(window.webpackJsonp=window.webpackJsonp||[]).push([["application.async.secondary"],{"+0jZ":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'};var o=r.get("ShoppingCampaign_Default_Bid");i=i+'<div class="bid-setting__container"><div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=o)?"":t)+'</label></h5><div class="col-sm-4"><div class="input-group"><input class="form-control campaign-bid" type="text" data-bind="value: SearchBid.string, hasFocus: SearchBid.editing, optionsValue: &quot;Value&quot;"'+n.attr("aria-label",o,!0,!0)+'><span class="input-group-addon">'+n.escape(null==(t=e)?"":t)+'</span></div><div class="noWrap">',a.koValidationError("SearchBid"),i+="</div></div></div></div>"}.call(this,"accountCurrencyCode"in r?r.accountCurrencyCode:"undefined"!==typeof accountCurrencyCode?accountCurrencyCode:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"+Bp1":function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return u});var n=i("nN5v"),a=i("UT4o"),r=i.n(a),o=i("xS7C"),s=i("TqQS"),l=window.globalLegacySchema.get("AdExtension"),c=[l.key,"Scheduling"],d=r.a.difference(r.a.keys(l.properties),c),u=function e(t){Object(n.a)(this,e);var i=r.a.difference(r.a.keys(t.schema.properties),d);t=r.a.extend({afterChangeComitted:r.a.noop,extensionDataFormatter:r.a.partial(r.a.map,r.a,r.a.partial(r.a.pick,r.a,i)),associationsDataFormatter:r.a.partial(r.a.pluck,r.a,"AdExtension")},t),this.extension=new o.a(t),this.association=new s.a(t)}},"+ESq":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l){a.collapse=t=function(e,a){var r=this&&this.block,o=(this&&this.attributes,e.text),s=e.property,l=e.id,c=e.className||"scheduling-form",d=a||"col-sm-4";i=i+"<div"+n.attr("class",n.classes(["form-group",c],[!1,!0]),!1,!0)+"><label"+n.attr("class",n.classes(["control-label",d,"collapse-toggle-label"],[!1,!0,!1]),!1,!0)+'><a data-toggle="collapse"'+n.attr("data-target","#"+l,!0,!0)+n.attr("data-bind",'attr: {"aria-expanded": '+s+'.observable() ? "true" : "false"}, click: '+s+".click",!0,!0)+' href="javascript:void(0)"><span class="spritedimage spritedimagealign"'+n.attr("data-bind","css: "+s+'.observable() ? "expandedImage" : "expanderImage"',!0,!0)+"></span>"+n.escape(null==(t=o)?"":t)+"</a></label></div><div"+n.attr("data-bind","attr: {id: "+s+".id}, css: "+s+'.observable() ? "in" : "collapse"',!0,!0)+">",r&&r&&r(),i+="</div>"},a["single-group"]=t=function(e){this&&this.block,this&&this.attributes,i=i+'<div class="form-group"'+n.attr("data-property",e,!0,!0)+n.attr("data-bind","visible: "+e+".visible, css: { 'has-error': !"+e+".isValid() }",!0,!0)+"><div"+(n.attr("class",n.classes(["form-label-container",o.labelClass],[!1,!0]),!1,!0)+n.attr("data-property",e,!0,!0))+"></div><div"+n.attr("class",n.classes(["control-value",o.controlClass],[!1,!0]),!1,!0)+'><div class="form-input-container"'+n.attr("data-property",e,!0,!0)+'></div><div class="form-validation-container"'+n.attr("data-property",e,!0,!0)+"></div></div></div>"},a["render-fields"]=t=function(e){this&&this.block,this&&this.attributes,function(){var t=e;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++)(r=t[i]).hasSubFields?"collapse"===r.type&&a.collapse.call({block:function(){a["render-fields"](r.fields)}},r,o.labelClass):a["single-group"](r.property);else for(var i in n=0,t){var r;n++,(r=t[i]).hasSubFields?"collapse"===r.type&&a.collapse.call({block:function(){a["render-fields"](r.fields)}},r,o.labelClass):a["single-group"](r.property)}}.call(this)},i=i+'<div class="extension-editor__container"'+n.attr("data-type",l,!0,!0)+'><div class="form-horizontal extension-editor__form-container"><div class="form-group" data-property="$overall"><div class="col-sm-12"><div class="form-validation-container alert alert-danger" data-property="$overall" data-bind="visible:!$overall.isValid()"></div></div></div>',a["render-fields"](r),i=i+'<div class="extension-editor__extra"></div><div class="scheduling hidden"></div><div class="alert alert-info form-group" role="alert"><div class="alert-image" data-bind="visible: editing"></div><div class="alert-info-inline alert-spacing"'+n.attr("data-bind",'text: editing ? "'+e+'" : ""',!0,!0)+'></div><div class="alert-image"></div><div class="alert-info-inline"'+n.attr("data-bind",'text: editing ? "'+s.get("AdExtensions_Edited_Latency")+'" : ""',!0,!0)+'></div><div class="alert-info-inline"'+n.attr("data-bind",'text: editing ? "" : "'+s.get("AdExtensions_Created_Latency")+'"',!0,!0)+'></div></div><div class="form-input-container save-bar form-group imgeditor-save-container" data-property="$buttons"></div></div></div>'}.call(this,"editWarningMessage"in r?r.editWarningMessage:"undefined"!==typeof editWarningMessage?editWarningMessage:void 0,"fields"in r?r.fields:"undefined"!==typeof fields?fields:void 0,"formatting"in r?r.formatting:"undefined"!==typeof formatting?formatting:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"type"in r?r.type:"undefined"!==typeof type?type:void 0),i}},"+HGQ":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,a="",r={},o=e||{};return function(o){r.previewGrid=t=function(e){this&&this.block,this&&this.attributes,a+='<div class="panel-footer" data-bind="visible: showPreview"><div data-bind="html: changeText" role="alert"></div><div class="previewTable grid" data-bind="if: results().length &gt; 0, visible: results().length &gt; 0"><table><thead>\x3c!--ko if: $root.previewGrids--\x3e<tr class="grid-header-row" data-bind="foreach: previewGrids"><th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text" data-bind="text: $data"></a></div></th></tr>\x3c!--/ko--\x3e\x3c!--ko ifnot: $root.previewGrids--\x3e<tr class="grid-header-row">',function(){var i=e;if("number"==typeof i.length)for(var r=0,o=i.length;r<o;r++){var s=i[r];a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}else for(var r in o=0,i)o++,s=i[r],a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}.call(this),a+='</tr>\x3c!--/ko--\x3e</thead><tbody data-bind="foreach: results"><tr class="grid-row" data-bind="foreach: $data.data"><td class="grid-cell">\x3c!-- ko if: $data.isHtml--\x3e<div class="grid-content-container" data-bind="html: $data.value"></div>\x3c!-- /ko--\x3e\x3c!-- ko if: !$data.isHtml--\x3e<div class="grid-content-container" data-bind="text: $data.value"></div>\x3c!-- /ko--\x3e</td></tr></tbody></table></div></div>'},r.errorsGrid=t=function(e,i){this&&this.block,this&&this.attributes,a=a+'<div class="panel-footer" data-bind="visible: showErrors() &amp;&amp; !isCampaignAdGroupCopyPasteOperation()"><div class="error" data-bind="html: errorCountString"></div><a class="errorCountLink" data-bind="html: errorCountLinkText" href="javascript:void(0)"></a><br><div class="previewTable grid" data-bind="visible: showErrorGrid"><table><thead>\x3c!--ko if: $root.errorsGrids--\x3e<tr class="grid-header-row" data-bind="foreach: errorsGrids"><th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text" data-bind="text: $data"></a></div></th>\x3c!--ko if: $index() === $parent.errorsGrids().length - 1--\x3e<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=o.getString("BulkEdit_InlineError_ErrorHeader"))?"":t)+'</a></div></th>\x3c!--/ko--\x3e</tr>\x3c!--/ko--\x3e\x3c!--ko ifnot: $root.errorsGrids--\x3e<tr class="grid-header-row">',function(){var i=e;if("number"==typeof i.length)for(var r=0,o=i.length;r<o;r++){var s=i[r];a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}else for(var r in o=0,i)o++,s=i[r],a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}.call(this),a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=o.getString("BulkEdit_InlineError_ErrorHeader"))?"":t)+'</a></div></th></tr>\x3c!--/ko--\x3e</thead><tbody data-bind="foreach: inlineErrors"><tr class="grid-row">\x3c!-- ko foreach: $data.data--\x3e<td class="grid-cell">\x3c!-- ko if: $data.isHtml--\x3e<div class="grid-content-container" data-bind="html: $data.value"></div>\x3c!-- /ko--\x3e\x3c!-- ko if: !$data.isHtml--\x3e<div class="grid-content-container" data-bind="text: $data.value"></div>\x3c!-- /ko--\x3e</td>\x3c!-- /ko--\x3e<td class="grid-cell"><div class="grid-content-container" role="alert">\x3c!-- ko foreach: $data.combinedErrors --\x3e',a+=i?'<span data-bind="html: $data"></span>':'<span data-bind="text: $data"></span>',a+='<br>\x3c!-- /ko --\x3e</div></td></tr></tbody></table></div></div><div class="panel-footer" data-bind="visible: showErrors() &amp;&amp; isCampaignAdGroupCopyPasteOperation()"><div class="error" data-bind="html: completedWithErrorsBulkEditResultsString"></div></div>'},r.changeCashbackPercentBase=t=function(e){this&&this.block,this&&this.attributes,a=a+'<h2 class="panel-heading" role="heading" aria-level="2"><div class="panel-title" data-bind="html: titleText"></div></h2><div class="panel-body form-horizontal"><div class="form-group"><label class="pull-left control-label" id="actionLabel">'+n.escape(null==(t=e.getString("BulkEdit_Action"))?"":t)+'</label><div class="col-sm-2"><select class="form-control" data-bind="options: actions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: selectedAction, disable: isDisabled" aria-labelledby="actionLabel"></select></div><div class="col-sm-6 form-inline" data-bind="visible: showSetPanel"><input class="bulkEdit-bid form-control" type="text" data-bind="value: cashbackPercentValue, valueUpdate: &quot;input&quot;, disable: isDisabled" aria-describedby="percentLabel"><span class="control-label" id="currencyLabel1" data-bind="html: selectedUnit"></span><div class="error" data-bind="html: errorMessage"></div></div></div>\x3c!-- ko if: cashbackPercentDescription() != null--\x3e<div class="alert alert-info" role="alert"><div class="alert-image"></div><div class="alert__content"><span class="alert__message" data-bind="html: cashbackPercentDescription"></span></div></div>\x3c!-- /ko--\x3e</div>'},a+='<div class="panel">',r.changeCashbackPercentBase(o),a+=null==(t=i("e0pX").call(this,e))?"":t;var s=o.getString("BulkEdit_Campaign_EntityNameHeader"),l=o.getString("BulkEdit_AdGroup_EntityNameHeader"),c=o.getString("BulkEdit_EntityNameHeader"),d=o.getString("BulkEdit_OldCashbackPercentHeader"),u=o.getString("BulkEdit_NewCashbackPercentHeader");r.previewGrid([s,l,c,d,u]),u=o.getString("BulkEdit_EntityNameHeader");var p=o.getString("BulkEdit_OldCashbackPercentHeader"),g=o.getString("BulkEdit_AttemptedCashbackPercentHeader");r.errorsGrid([u,p,g]),a=a+(null==(t=i("TyAh").call(this,e))?"":t)+"</div>"}.call(this,"i18n"in o?o.i18n:"undefined"!==typeof i18n?i18n:void 0),a}},"+Ki2":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i("7XbR"),s=i("5C8L"),l=i.n(s),c=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"configSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l.a.properties(this,e,t,i,n)}},{key:"bindEl",value:function(e){Object(o.applyBindings)(this,e)}},{key:"showGenericErrors",value:function(){this.errors&&Object(r.isFunction)(this.errors.add)&&this.errors.add()}},{key:"el",set:function(e){this.bindEl(e)}}]),e}();t.a=c},"+LXR":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},a.koCharactersRemaining=t=function(e,t){this&&this.block,this&&this.attributes,i=i+'<div class="remaining-hint help-block"><span'+(n.attr("data-bind","text:"+e+".char_rem",!0,!0)+n.attr("id",t||e+"_CharactersRemaining",!0,!0))+' role="status" aria-live="polite"></span></div>'},a.koErrors(),i=i+'<div class="adgroup-settings-page"><div class="adgroup-settings-container" data-bind="visible: dataLoaded">\x3c!--ko ifnot: isNewUI()--\x3e<h3 class="type-bold"><span>'+n.escape(null==(t=e.get("AdGroupSetting_SectionTitle"))?"":t)+'</span></h3><hr>\x3c!--/ko--\x3e<div class="adgroup-settings form-horizontal"><div class="form-group"><h5 class="col-sm-2 control-label"><label id="AdGroupSettings_AdGroup_Name_Label">'+n.escape(null==(t=e.get("AdGroup_Label_Name"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Keywords_AdGroupName",e.get("AdGroup_Label_Name"),e),i+='</h5><div class="col-sm-4"><input class="name form-control" data-bind="value: Name, valueUpdate: &quot;input&quot;, css: {&quot;validation-error&quot;: !Name.isValid()}" type="text" aria-labelledby="AdGroupSettings_AdGroup_Name_Label" aria-describedby="Name_CharactersRemaining">',a.koCharactersRemaining("Name"),i+='<div class="clear">',a.koValidationError("Name"),i=i+'</div></div></div>\x3c!--ko if: shouldShowAdGroupType--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.get("AdGroupType_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_DSA_AdGroupType",e.get("AdGroupType_Label"),e),i=i+'</h5><div class="col-sm-4 adgroup-type" data-bind="text: adGroupTypeString"></div></div>\x3c!--/ko--\x3e\x3c!--ko if: enableLanguageSelection()--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.get("Campaign_Language"))?"":t)+"</label>",a.popupHelp("pop_BA_Settings_Language",e.get("LanguageLabelText"),e),i=i+'</h5><div class="col-sm-4 adgroup-language"></div></div>\x3c!--/ko--\x3e\x3c!--ko if: !hideLanguage() && !enableLanguageSelection()--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.get("Campaign_Language"))?"":t)+"</label>",a.popupHelp("pop_BA_AdGroup_Settings_Language",e.get("LanguageLabelText"),e),i=i+'</h5><div class="col-sm-4"><div class="form-control-static" data-bind="text: languageString"></div></div></div>\x3c!--/ko--\x3e<div class="bidding-strategy__container"></div><div class="cpg-adgroup-type__container"></div>\x3c!--ko if: supportCashbackSettings--\x3e<div class="cashback-settings-container"></div>\x3c!-- /ko--\x3e<div class="advanced-settings-section"></div></div><div class="bid-block"><h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_SetBids"))?"":t)+'</span></h3><hr><div class="bid-section"></div><div class="cpg-bid-section__container"></div></div><h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_AdgroupTargets"))?"":t)+'</span></h3><hr><div class="adgroup-targets clearfix"></div>\x3c!--ko if: showHighLatencyAlert()--\x3e<div class="alert alert-info form-group page-alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.getString("TargetingSettings_OnSave_HighLantency_Text"))?"":t)+'</div></div>\x3c!--/ko--\x3e<div class="alert alert-info form-group page-alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.get("AdGroups_Latency"))?"":t)+'</div></div><div class="save-bar form-group">\x3c!--ko ifnot: isNewUI()--\x3e<input class="btn-save btn btn-primary" type="button"'+n.attr("value",e.get("Button_Save"),!0,!0)+'><input class="btn-cancel btn btn-default" type="button"'+n.attr("value",e.get("Button_Cancel"),!0,!0)+'>\x3c!--/ko--\x3e\x3c!--ko if: isNewUI()--\x3e<button class="btn-save btn btn-primary" type="button"'+n.attr("value",e.get("Button_Save"),!0,!0)+">"+n.escape(null==(t=e.get("Button_Save"))?"":t)+'</button><button class="btn-cancel btn btn-default" type="button"'+n.attr("value",e.get("Button_Cancel"),!0,!0)+">"+n.escape(null==(t=e.get("Button_Cancel"))?"":t)+"</button>\x3c!--/ko--\x3e</div></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"+Ye4":function(e,t,i){"use strict";var n=i("6e2+"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("5iHu"),m=i.n(h),f=i("/xyZ"),v=i.n(f),b=i("+9/h"),y=i("c0nf"),S=i("aLMy"),w=i.n(S),C=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){this.i18n=b.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.meterProps={value:0,max:100,min:0}}},{key:"render",value:function(){return this.$el.html(w()({i18n:this.i18n})),this}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"moveAlongBroad",value:function(e){this.$(".arrow").css({left:this.calcBroadPos(e)}),this.$(".arrow").css("border-top-color","green")}},{key:"moveToSpecific",value:function(){this.$(".arrow").css({left:this.calcSpecificPos(50)}),this.$(".arrow").css("border-top-color","red")}},{key:"calcBroadPos",value:function(e){return this.$(".specific-meter").width()+e*((this.$(".broad-meter").width()-g.a.first(this.$(".arrow").css("borderLeftWidth")))/this.meterProps.max)}},{key:"calcSpecificPos",value:function(e){return e*((this.$(".specific-meter").width()-g.a.first(this.$(".arrow").css("borderLeftWidth")))/this.meterProps.max)}}]),t}(u.a.View),x=i("pvZo"),k=i.n(x),A={None:{value:1,unit:""},Thousand:{value:1e3,unit:"K"},Million:{value:1e6,unit:"M"},Billion:{value:1e9,unit:"B"}},T=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.i18n=b.a.get("component/i18n/loader!campaignui/feature/audience-campaign");var i=b.a.get("component/config/index");this.permissions=i.get("Permissions"),this.debouncedUpdateEstimateFunc=g.a.debounce(function(t,i){return e.updateEstimateInternal(t,i)},2e3),this.audienceMeter=new C,this.postAudienceEstimation=v.a.resolve(),this.postPrivacyCheck=v.a.resolve(),this.isValid=!0,this.lastEstimateData=null,this.isPanelSticky=t.isSticky,this.viewContext=t.viewContext,this.scenario=t.scenario,this.customModifyTarget=t.modifyTarget,this.customThreshold=t.threshold,this.customRootMargin=t.rootMargin,m()(window).on("resize",function(){e.updateEstimatesOnMeter(e.lastEstimateData)})}},{key:"render",value:function(){return this.$el.html(k()(this)),this.$(".audience-meter-container").append(this.audienceMeter.render().el),this.isPanelSticky&&this.stickPanel(),this.$el.hide(),this}},{key:"updateEstimate",value:function(e,t){return this.debouncedUpdateEstimateFunc(e,t)}},{key:"stickPanel",value:function(){var e=this;if(window.IntersectionObserver){var t=this.$("#reach-control-sentinel").get(0);this.observer=new IntersectionObserver(this.customModifyTarget||function(t){g.a.first(t).intersectionRatio<1&&g.a.first(t).boundingClientRect.height>0&&(g.a.first(t).intersectionRect.y<100||g.a.first(t).intersectionRect.top<100)?e.$(".reach-estimate-control").addClass("sticky"):e.$(".reach-estimate-control").removeClass("sticky")},{root:null,rootMargin:this.customRootMargin||"0px",threshold:this.customThreshold||1}),this.observer.observe(t)}}},{key:"validate",value:function(){var e=this;return v.a.all([this.postAudienceEstimation,this.postPrivacyCheck]).then(function(){return e.isValid}).catch(function(){return!0})}},{key:"updateEstimateInternal",value:function(e,t){var i=this,a=b.a.get("component/http/channel/odata"),r=b.a.get("audienceCampaignPageContext");this.hasAudienceRemarketingList=t;var o="Customers(".concat(r.CurrentCustomerId,")/Accounts(").concat(r.CurrentAccount.Id,")/"),s="".concat(o,"Default.AudienceEstimationV2"),l="".concat(o,"Default.PrivacyCheckV2"),c={host:"adinsight.odata.url",path:"AdInsight/V2/",data:{request:e},customHeader:{name:"x-ms-scenarioname",value:this.scenario||"AudienceCampaign"}};return g.a.isEmpty(e)?(this.postAudienceEstimation=v.a.resolve({}),this.postPrivacyCheck=v.a.resolve({})):(this.postAudienceEstimation=a.post(s,c),this.postPrivacyCheck=a.post(l,c)),v.a.all([this.postAudienceEstimation,this.postPrivacyCheck]).then(function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];i.lastEstimateData=a,g.a.get(a,["EstImpression","Value"])?i.$el.show():i.$el.hide(),i.updatePanel(a,r,a&&r)}).catch(function(e){i.updatePanel(e,e,!1)}).finally(Object(y.withUiBlock)(this.$el,this.i18n.getString("Loading"),!1))}},{key:"updatePanel",value:function(e,t,i){var n=g.a.result(e,"IsImpressionTooSpecific"),a=g.a.result(t,"CheckResult");i&&"Pass"===a?(this.audienceMeter.show(),this.$(".estimate-note").show(),this.updateEstimatesOnMeter(e)):this.hideEstimate(),this.errMsg=this.validateReach(a,n,i),"Pass"!==a||n||!i?this.showWarning(this.errMsg):this.hideWarning()}},{key:"updateEstimatesOnMeter",value:function(e){if(e&&e.EstImpression){this.viewContext&&(this.viewContext.SuggestedBid=e.SuggestedBid);var t=e.EstImpression.Value,i=A[e.EstImpression.Unit].unit,n=A[e.EstImpression.Unit].value,a="".concat(t).concat(i),r=t*n;this.$("strong.impr").text(a),e.IsImpressionTooSpecific?this.audienceMeter.moveToSpecific():this.audienceMeter.moveAlongBroad(this.calcMeterValue(r))}}},{key:"hideEstimate",value:function(){this.audienceMeter.hide(),this.$(".estimate-note").hide()}},{key:"showWarning",value:function(e){this.$(".reach-warning").show(),this.$(".reach-warning").text(e)}},{key:"hideWarning",value:function(){this.$(".reach-warning").hide()}},{key:"validateReach",value:function(e,t,i){var n="";return this.isValid=!0,i&&"Pending"!==e?"TooNarrow"===e&&this.hasAudienceRemarketingList?(n=this.i18n.getString("Audience_Campaign_ReachControl_PrivacyCheckFailed_AudienceReMarketing"),this.isValid=!0,n):"TooNarrow"!==e||this.hasAudienceRemarketingList?t&&!this.permissions.IsKPIEstimateForAudienceFeedBasedEnabled?(n=this.i18n.getString("Audience_Campaign_ReachControl_TargettingTooSpecific"),this.isValid=!1,n):n:(n=this.i18n.getString("Audience_Campaign_ReachControl_PrivacyCheckFailed"),this.isValid=!1,n):n=this.i18n.getString("Audience_Campaign_ReachControl_NotAvailable")}},{key:"calcMeterValue",value:function(e){return 4.45078*Math.log(e)-10.74487}},{key:"remove",value:function(){Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this),this.observer&&this.observer.disconnect()}},{key:"errorMessage",get:function(){return this.errMsg}}]),t}(u.a.View),_=i("a28/"),E=i("ORPc"),I={EighteenToTwentyFive:"EighteenToTwentyFour",TwentyFiveToThirtyFive:"TwentyFiveToThirtyFour",ThirtyFiveToFifty:"ThirtyFiveToFourtyNine",FiftyToSixtyFive:"FiftyToSixtyFour",SixtyFiveAndAbove:"SixtyFiveAndAbove",Unknown:"Unknown"},O=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this.currentLevelTargetInfo=i.currentLevelTargetInfo,this.parentLevelTargetInfo=i.parentLevelTargetInfo;var n=b.a.get("component/config/index");this.permissions=n.get("Permissions"),this.bidStrategyPermissionBind=(t={},Object(_.a)(t,E.BidStrategy.ManualCpc,!0),Object(_.a)(t,E.BidStrategy.ManualCpv,this.permissions.IsKPIEstimateForCPVEnabled),Object(_.a)(t,E.BidStrategy.ManualCpm,this.permissions.IsKPIEstimateForCPMEnabled),t),this.campaignSubTypesSupported=[E.CampaignSubTypeMapping.AudienceStatic,E.CampaignSubTypeMapping.AudienceVideoAds],this.permissions.IsKPIEstimateForAudienceFeedBasedEnabled&&(this.campaignSubTypesSupported=this.campaignSubTypesSupported.concat(E.FeedBasedCampaginSubTypes)),this.request={}}return Object(r.a)(e,[{key:"create",value:function(e,t,i){return this.request={},this.createWithTargetSettings(["CompanyName","Industry","JobFunction","Audience"],e,t,i)}},{key:"createWithTargetSettings",value:function(e,t,i,n){this.request={},this.addAgeTargets(),this.addGenderTargets(),this.addLocationTargets(),this.addRadiusTargets(),this.addCompanyTargets(g.a.contains(e,"CompanyName")),this.addIndustryTargets(g.a.contains(e,"Industry")),this.addJobFunctionTargets(g.a.contains(e,"JobFunction")),this.addAudienceTargets(g.a.contains(e,"Audience")),g.a.isNumber(t)&&this.bidStrategyPermissionBind[t]?this.request.CampaignBiddingStrategy=t:this.request.CampaignBiddingStrategy=E.BidStrategy.ManualCpc;var a=i;return g.a.isString(a)&&(a=E.CampaignSubTypeMapping[i]),g.a.isNumber(a)&&this.campaignSubTypesSupported.includes(a)?this.request.CampaignSubType=a:this.request.CampaignSubType=E.CampaignSubTypeMapping.AudienceStatic,E.FeedBasedCampaginSubTypes.includes(this.request.CampaignSubType)&&(this.request.Feed={StoreId:g.a.get(n,"StoreId"),FeedId:g.a.get(n,"FeedId")}),this.request}},{key:"addAgeTargets",value:function(){var e=this.currentLevelTargetInfo.getAllByType("Age");if(!g.a.isEmpty(e)){var t={Includes:[],Excludes:[]};g.a.each(e,function(e){if("Age"===e.CriterionType){var i=I[e.Criterion.AgeCriterion.Target];t.Includes.push(i)}else if("NegativeAge"===e.CriterionType){var n=I[e.Criterion.AgeCriterion.Target];t.Excludes.push(n)}}),this.request.Age=t}}},{key:"addGenderTargets",value:function(){var e=this.currentLevelTargetInfo.getAllByType("Gender");if(!g.a.isEmpty(e)){var t={Includes:[],Excludes:[]};g.a.each(e,function(e){"Gender"===e.CriterionType?t.Includes.push(e.Criterion.GenderCriterion.Target):"NegativeGender"===e.CriterionType&&t.Excludes.push(e.Criterion.GenderCriterion.Target)}),this.request.Gender=t}}},{key:"addLocationTargets",value:function(){var e=this.currentLevelTargetInfo;this.parentLevelTargetInfo&&this.currentLevelTargetInfo.parentLevelTogglesByType.Location&&(e=this.parentLevelTargetInfo);var t=e.getAllByType("Location"),i=e.getAllByType("NegativeLocation");if(g.a.isEmpty(t)&&g.a.isEmpty(i))this.request.Location={};else{var n={Includes:[],Excludes:[]};g.a.each(t,function(e){var t=e.Criterion.LocationCriterion;t?"NegativeLocation"===e.CriterionType?n.Excludes.push(t.LocationId):n.Includes.push(t.LocationId):"#Model.NegativeCampaignCriterion"===e["@odata.type"]?n.Excludes.push(e.Criterion.LocationId):"#Model.CampaignCriterion"===e["@odata.type"]&&n.Includes.push(e.Criterion.LocationId)}),g.a.each(i,function(e){var t=e.Criterion.LocationCriterion;t&&n.Excludes.push(t.LocationId)}),this.request.Location=n}}},{key:"addRadiusTargets",value:function(){var e=this.currentLevelTargetInfo;this.parentLevelTargetInfo&&this.currentLevelTargetInfo.parentLevelTogglesByType.Location&&(e=this.parentLevelTargetInfo);var t=e.getAllByType("Radius");if(!g.a.isEmpty(t)){var i=[];g.a.each(t,function(e){var t=e.Criterion.RadiusCriterion;t&&i.push({Radius:t.Radius,CenterLongitude:t.Longitude,CenterLatitude:t.Latitude})}),i.length>0&&(this.request.RadiusTargets=i)}}},{key:"addCompanyTargets",value:function(e){var t=this.currentLevelTargetInfo.getAllByType("CompanyName");if(!g.a.isEmpty(t)){var i={Includes:[],Excludes:[]},n=g.a.partition(t,function(e){return"CompanyName"===e.CriterionType}),a=n[0],r=n[1];e&&g.a.each(a,function(e){i.Includes.push(e.Criterion.CompanyNameCriterion.Target)}),g.a.each(r,function(e){i.Excludes.push(e.Criterion.CompanyNameCriterion.Target)}),this.request.Company=i}}},{key:"addJobFunctionTargets",value:function(e){var t=this.currentLevelTargetInfo.getAllByType("JobFunction");if(!g.a.isEmpty(t)){var i={Includes:[],Excludes:[]},n=g.a.partition(t,function(e){return"JobFunction"===e.CriterionType}),a=n[0],r=n[1];e&&g.a.each(a,function(e){i.Includes.push(e.Criterion.JobFunctionCriterion.Target)}),g.a.each(r,function(e){i.Excludes.push(e.Criterion.JobFunctionCriterion.Target)}),this.request.JobFunction=i}}},{key:"addIndustryTargets",value:function(e){var t=this.currentLevelTargetInfo.getAllByType("Industry");if(!g.a.isEmpty(t)){var i={Includes:[],Excludes:[]},n=g.a.partition(t,function(e){return"Industry"===e.CriterionType}),a=n[0],r=n[1];e&&g.a.each(a,function(e){i.Includes.push(e.Criterion.IndustryCriterion.Target)}),g.a.each(r,function(e){i.Excludes.push(e.Criterion.IndustryCriterion.Target)}),this.request.Industry=i}}},{key:"addAudienceTargets",value:function(e){var t=this.currentLevelTargetInfo.getAllByType("Audience");if(t=g.a.reject(t,function(e){return"Paused"===e.Status}),!g.a.isEmpty(t)){var i={Includes:[],Excludes:[]},n=g.a.partition(t,function(e){return"Excluded"===e.Status}),a=n[0],r=n[1];e&&g.a.each(r,function(e){i.Includes.push(e.Criterion.AudienceId)}),g.a.each(a,function(e){i.Excludes.push(e.Criterion.AudienceId)}),this.request.Audience=i}}}]),e}();i.d(t,"b",function(){return T}),i.d(t,"a",function(){return O}),i.d(t,"c",function(){return A})},"+igW":function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("zshA"),i("4JMw"),i("AQBV")],void 0===(a=function(e,t,i,n,a,r,o){"use strict";var s=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");o.get("Permissions");return i.View.extend({initialize:function(e){this.options=e||{},t.defaults(this.options,{template:a,editMode:!0,errorMessages:"",isValid:!0,placeholderEnabled:!1,placeholders:{},isForVNext:!1,templateExampleEnabled:!0}),this.ko_model=new r(this.options),this.ko_model.trackingTemplate.subscribe(function(e){this.trigger("templateChanged",e)},this)},render:function(){return this.$el.html(e(a({i18n:s,trackingTemplatePlaceholdertype:this.options.placeholderEnabled?t.result(this.options.placeholders,"TrackingUrlTemplate")||s.get("UpgradedUrl_Placeholder_TrackingUrlTemplate"):""}))),n.applyBindings(this.ko_model,this.el),this},remove:function(){return n.cleanNode(this.el),this},setEditMode:function(e){this.ko_model.editMode(e)},setTrackingTemplate:function(e){this.ko_model.trackingTemplate(e)},getTrackingTemplate:function(){return(this.ko_model.trackingTemplate()||"").trim()},setErrors:function(e){this.ko_model.errorMessages(e)},isValid:function(){return!this.ko_model.errorMessages().length}})}.apply(t,n))||(e.exports=a)},"+uOd":function(e,t,i){var n,a;n=[i("5iHu"),i("7XbR"),i("UT4o"),i("sbat"),i("PZhF"),i("Jb+r"),i("eVoP"),i("Vrot"),i("P2fB"),i("dQEW"),i("Vr0g"),i("AQBV")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u){var p=window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),g=[{Value:a.set,Text:p.getString("BulkEdit_UrlOptions_SetTextOption")},{Value:a.findReplace,Text:p.getString("BulkEdit_UrlOptions_FindAndReplaceOption")},{Value:a.append,Text:p.getString("BulkEdit_UrlOptions_AppendTextOption")}],h=[{Value:l.set,Text:p.getString("BulkEdit_UrlOptions_TrackingTemplate_Set")},{Value:l.remove,Text:p.getString("BulkEdit_UrlOptions_TrackingTemplate_Remove")}],m=[{Value:c.add,Text:p.getString("BulkEdit_UrlOptions_CustomParameters_Add")},{Value:c.replaceAll,Text:p.getString("BulkEdit_UrlOptions_CustomParameters_ReplaceAll")},{Value:c.removeExact,Text:p.getString("BulkEdit_UrlOptions_CustomParameters_RemoveExact")},{Value:c.removeContaining,Text:p.getString("BulkEdit_UrlOptions_CustomParameters_RemoveContaining")},{Value:c.removeAll,Text:p.getString("BulkEdit_UrlOptions_CustomParameters_RemoveAll")}],f=[{Value:n.trackingTemplate,Text:p.getString("BulkEdit_UrlOptions_TrackingTemplate")},{Value:n.finalUrlSuffix,Text:p.getString("BulkEdit_UrlOptions_FinalUrlSuffix")},{Value:n.customParameters,Text:p.getString("BulkEdit_UrlOptions_CustomParameters")},{Value:n.customParametersName,Text:p.getString("BulkEdit_UrlOptions_CustomParametersName")},{Value:n.customParametersValue,Text:p.getString("BulkEdit_UrlOptions_CustomParametersValue")}];return function(e,s){o.call(this);var u=e.get("Entity"),v=u?u.toLowerCase():"",b=["campaign","adgroup","keyword","ad","audience"].indexOf(v)>=0;this.entityType=s.entityType,this.actions=g,this.trackingTemplateActions=h,this.customParametersActions=m;var y=i.clone(f);b||(y=i.filter(f,function(e){return e.Value!==n.finalUrlSuffix})),this.fields=y;var S=e.get("BatchAction").Actions[0];this.selectedAction=t.observable(S.ActionType),this.selectedField=t.observable(S.Property),this.trackingTemplateSelectedAction=t.observable(S.ActionType),this.customParametersSelectedAction=t.observable(S.ActionType),this.showCustomParamsInput=t.observable(!0),this.showTrackingTemplateInput=t.computed(function(){return this.trackingTemplateSelectedAction()===l.set},this),this.selectedAction.subscribe(function(){this.errorMessage("")},this),this.showFindReplacePanel=t.computed(function(){return this.selectedAction()===a.findReplace},this),this.showAppendTextPanel=t.computed(function(){return this.selectedAction()===a.append},this),this.showSetTextPanel=t.computed(function(){return this.selectedAction()===a.set},this),this.showFinalUrlSuffixInput=t.computed(function(){return b&&this.showSetTextPanel()},this),this.trackingTemplate=t.observable(""),this.finalUrlSuffix=t.observable(""),this.changeTextOption=t.observable(r.append),this.findTextValue=t.observable(S.SearchString),this.findText=t.computed({read:function(){return this.findTextValue()},write:function(e){this.errorMessage(""),this.findTextValue(e)},owner:this}),this.findText.subscribe(function(e){e.indexOf(" ")>=0&&this.findReplaceOptions(i.without(this.findReplaceOptions,s.MatchWholeWord))},this),this.replaceText=t.observable(S.Value),this.appendTextValue=t.observable(S.Value),this.appendText=t.computed({read:function(){return this.appendTextValue()},write:function(e){this.errorMessage(""),this.appendTextValue(e)},owner:this}),this.findReplaceOptions=t.observableArray([]),this.selectedEntityCount(e.get("selectedEntityCount")),this.titleText=t.computed(function(){switch(this.entityType){case"Ad":return p.getString("BulkEdit_UrlOptions_Ad_Title").replace("{0}",this.selectedEntityCount());case"Keyword":return p.getString("BulkEdit_UrlOptions_Keyword_Title").replace("{0}",this.selectedEntityCount());case"AdGroup":return p.getString("BulkEdit_UrlOptions_AdGroup_Title").replace("{0}",this.selectedEntityCount());case"Campaign":return p.getString("BulkEdit_UrlOptions_Campaign_Title").replace("{0}",this.selectedEntityCount())}},this),this.maxTrackingTemplateLength=2048,this.maxFinalUrlSuffixLength=1024,this.maxCustomParametersLength=16,this.maxCustomParametersKeyLength=16,this.maxCustomParametersValueLength=200,this.maxLength=t.computed(function(){switch(this.selectedField()){case n.trackingTemplate:return this.maxTrackingTemplateLength;case n.finalUrlSuffix:return this.maxFinalUrlSuffixLength;case n.customParameters:return this.maxCustomParametersLength;case n.customParametersName:return this.maxCustomParametersKeyLength;case n.customParametersValue:return this.maxCustomParametersValueLength}return 32},this),this.errorRole=t.computed(function(){return""===this.errorMessage()?"none":"alert"},this),this.entityHeaderName=t.computed(function(){switch(this.entityType){case"Ad":return p.getString("BulkEdit_Ad_EntityNameHeader");case"Keyword":return p.getString("BulkEdit_Keyword_EntityNameHeader");case"AdGroup":return p.getString("BulkEdit_AdGroup_EntityNameHeader");case"Campaign":return p.getString("BulkEdit_Campaign_EntityNameHeader");default:return"unknown entity"}},this),this.previewGrids=t.observableArray([]),this.errorsGrids=t.observableArray([]),this.showPreview=t.observable(!1),this.validate=function(e){if(this.errorMessage(""),0===this.selectedEntityCount())return alert(p.getString("Grid_RowSelectionRequired")),!1;var t=this.selectedAction();if(t===a.findReplace){if(""===this.findText()||null===this.findText())return this.errorMessage(p.getString("BulkEdit_EmptyFindTextError")),!1}else if(t===a.append){if(""===this.appendText()||null===this.appendText())return this.errorMessage(p.getString("BulkEdit_EmptyAppendTextError")),!1}else if(t===a.set&&this.trackingTemplateSelectedAction()===l.set&&(null===this.trackingTemplate()||""===this.trackingTemplate().trim())&&(null===this.finalUrlSuffix()||""===this.finalUrlSuffix().trim())&&this.customParametersSelectedAction()!==c.removeAll&&0===e.customParams.getValues(!0).params.length)return this.errorMessage(p.getString(d[u].EmptySetTextError)),!1;return!0}}}.apply(t,n))||(e.exports=a)},"/8uS":function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("AQBV"),o=i.n(r),s=i("uaCj");i.d(t,"e",function(){return m}),i.d(t,"a",function(){return f}),i.d(t,"b",function(){return v}),i.d(t,"d",function(){return b}),i.d(t,"c",function(){return y});var l,c,d,u=o.a.get("permissions"),p=Object(s.globalizationModelSetup)({permissions:u,culture:o.a.get("culture")}).LANGUAGES,g=(l=p,c={English:{WatchNow:"Watch Now",WatchMore:"Watch More",Watch:"Watch",VoteNow:"Vote Now",ViewPlans:"View Plans",ViewCars:"View Cars",TryNow:"Try Now",TestDrive:"Test Drive",Subscribe:"Subscribe",StartNow:"Start Now",SignUp:"Sign Up",SignIn:"Sign In",Showtimes:"Showtimes",ShopNow:"Shop Now",SellNow:"Sell Now",SeeOffer:"See Offer",SeeMenu:"See Menu",Schedule:"Schedule",SaveNow:"Save Now",Sale:"See Sale",Reserve:"Reserve",RentNow:"Rent Now",RentACar:"Rent A Car",Register:"Register",PostJob:"Post Job",PlayNow:"Play Now",PlayGame:"Play Game",OrderNow:"Order Now",LogIn:"Log In",ListenNow:"Listen Now",LearnMore:"Learn More",JoinNow:"Join Now",GetQuote:"Get Quote",GetOffer:"Get Offer",GetDeals:"Get Deals",FreeTrial:"Free Trial",FreeQuote:"Free Quote",FreePlay:"Free Play",FindJob:"Find Job",FileNow:"File Now",EnrollNow:"Enroll Now",EmailNow:"Email Now",Download:"Download",Donate:"Donate",Coupon:"Get Coupon",ContactUs:"Contact Us",Compare:"Compare",ChatNow:"Chat Now",BuyNow:"Buy Now",BookNow:"Book Now",BookHotel:"Book Hotel",BookACar:"Book A Car",BidNow:"Bid Now",BetNow:"Bet Now",ApplyNow:"Apply Now",ActNow:"Act Now",Directions:"Directions",FindStore:"Find Store",SwitchNow:"Switch Now",VisitStore:"Visit Store",RenewNow:"Renew Now",Reorder:"Reorder"},Danish:{WatchNow:"Se nu",WatchMore:"Se mere",Watch:"Se",VoteNow:"Stem nu",ViewPlans:"Vis planer",ViewCars:"Se biler",TryNow:"Pr\xf8v nu",TestDrive:"Pr\xf8vetur",Subscribe:"Abonner",StartNow:"Start nu",SignUp:"Tilmeld dig",SignIn:"Log p\xe5",Showtimes:"Spilletider",ShopNow:"Shop nu",SellNow:"S\xe6lg nu",SeeOffer:"Se tilbud",SeeMenu:"Se menu",Schedule:"Spilleplan",SaveNow:"Gem nu",Sale:"Se udsalg",Reserve:"Reserv\xe9r",RentNow:"Lej nu",RentACar:"Lej en bil",Register:"Registrer",PostJob:"Opsl\xe5 job",PlayNow:"Spil nu",PlayGame:"Spil spil",OrderNow:"Bestil nu",LogIn:"Log p\xe5",ListenNow:"Lyt nu",LearnMore:"F\xe5 mere at vide",JoinNow:"Deltag nu",GetQuote:"F\xe5 et tilbud",GetOffer:"F\xe5 tilbud",GetDeals:"F\xe5 tilbud",FreeTrial:"Gratis pr\xf8ve",FreeQuote:"Gratis tilbud",FreePlay:"Gratis spil",FindJob:"Find job",FileNow:"Anmeld nu",EnrollNow:"Tilmeld dig nu",EmailNow:"Send e-mail nu",Download:"Download",Donate:"Doner",Coupon:"F\xe5 kupon",ContactUs:"Kontakt os",Compare:"Sammenlign nu",ChatNow:"Chat nu",BuyNow:"K\xf8b nu",BookNow:"Reserv\xe9r nu",BookHotel:"Bestil hotel",BookACar:"Reserv\xe9r en bil",BidNow:"Byd nu",BetNow:"Spil nu",ApplyNow:"Ans\xf8g nu",ActNow:"Handl nu",Directions:"Rutevejledning",FindStore:"Find butik",SwitchNow:"Skift nu",VisitStore:"Bes\xf8g butik",RenewNow:"Forny ny",Reorder:"Bestil igen"},German:{WatchNow:"Jetzt ansehen",WatchMore:"Weitere ansehen",Watch:"Ansehen",VoteNow:"Jetzt abstimmen",ViewPlans:"Pl\xe4ne anzeigen",ViewCars:"Autos anzeigen",TryNow:"Jetzt testen",TestDrive:"Testfahrt",Subscribe:"Abonnieren",StartNow:"Jetzt starten",SignUp:"Registrieren",SignIn:"Anmelden",Showtimes:"Vorstellungen",ShopNow:"Jetzt einkaufen",SellNow:"Jetzt verkaufen",SeeOffer:"Angebot anzeigen",SeeMenu:"Men\xfc anzeigen",Schedule:"Zeitplan",SaveNow:"Jetzt speichern",Sale:"Sale anzeigen",Reserve:"Reservieren",RentNow:"Jetzt mieten",RentACar:"Auto mieten",Register:"Registrieren",PostJob:"Job posten",PlayNow:"Jetzt spielen",PlayGame:"Spiel spielen",OrderNow:"Jetzt bestellen",LogIn:"Anmelden",ListenNow:"Jetzt anh\xf6ren",LearnMore:"Mehr Info",JoinNow:"Jetzt beitreten",GetQuote:"Angebot",GetOffer:"Angebot",GetDeals:"Angebote",FindJob:"Job suchen",FileNow:"Einreichen",EnrollNow:"Registrieren",EmailNow:"E-Mail senden",Download:"Download",Donate:"Spenden",Coupon:"Gutschein holen",ContactUs:"Kontaktieren",Compare:"Vergleichen",ChatNow:"Jetzt chatten",BuyNow:"Jetzt kaufen",BookNow:"Jetzt buchen",BookHotel:"Hotel buchen",BookACar:"Auto buchen",BidNow:"Jetzt bieten",BetNow:"Jetzt wetten",ApplyNow:"Jetzt bewerben",ActNow:"Jetzt handeln",Directions:"Wegbeschreibung",FindStore:"Shop suchen",SwitchNow:"Jetzt wechseln",VisitStore:"Shop besuchen",RenewNow:"Jetzt verl\xe4ngern",Reorder:"Neu bestellen"},Spanish:{WatchNow:"Ver ahora",WatchMore:"Ver m\xe1s",Watch:"Ver",VoteNow:"Votar ahora",ViewPlans:"Ver planes",ViewCars:"Ver coches",TryNow:"Probar ahora",TestDrive:"Probar coche",Subscribe:"Suscribirse",StartNow:"Iniciar ahora",SignUp:"Registrarse",SignIn:"Iniciar sesi\xf3n",Showtimes:"Horarios",ShopNow:"Comprar ahora",SellNow:"Vender ahora",SeeOffer:"Ver oferta",SeeMenu:"Ver men\xfa",Schedule:"Programaci\xf3n",SaveNow:"Guardar ahora",Sale:"Ver oferta",Reserve:"Reservar",RentNow:"Alquilar ahora",RentACar:"Alquilar coche",Register:"Registro",PostJob:"Publicar anuncio",PlayNow:"Jugar ahora",PlayGame:"Jugar juego",OrderNow:"Pedir ahora",LogIn:"Iniciar sesi\xf3n",ListenNow:"Escuchar ahora",LearnMore:"M\xe1s informaci\xf3n",JoinNow:"Unirse ahora",GetQuote:"Obtener oferta",GetOffer:"Obtener oferta",GetDeals:"Obtener ofertas",FreeTrial:"Jugar ahora",FreeQuote:"Presupuesto",FreePlay:"Jugar gratis",FindJob:"Buscar trabajo",FileNow:"Archivar ahora",EnrollNow:"Inscribirse",EmailNow:"Enviar correo",Download:"Descargar",Donate:"Donar",Coupon:"Obtener cup\xf3n",ContactUs:"Cont\xe1ctanos",Compare:"Comparar",ChatNow:"Chat ahora",BuyNow:"Comprar ahora",BookNow:"Reservar ahora",BookHotel:"Reservar hotel",BookACar:"Reservar coche",BidNow:"Pujar ahora",BetNow:"Apostar ahora",ApplyNow:"Aplicar ahora",ActNow:"Actuar ahora",Directions:"Indicaciones",FindStore:"Buscar tienda",SwitchNow:"Cambiar ahora",VisitStore:"Visitar tienda",RenewNow:"Renovar ahora",Reorder:"Repetir pedido"},Finnish:{WatchNow:"Katso nyt",WatchMore:"Katso lis\xe4\xe4",Watch:"Katso",VoteNow:"\xc4\xe4nest\xe4 nyt",ViewPlans:"Suunnitelmat",ViewCars:"N\xe4yt\xe4 autot",TryNow:"Kokeile nyt",TestDrive:"Koeajo",Subscribe:"Tilaa",StartNow:"Aloita nyt",SignUp:"Rekister\xf6idy",SignIn:"Kirjaudu sis\xe4\xe4n",Showtimes:"Esitysajat",ShopNow:"Osta nyt",SellNow:"Myy nyt",SeeOffer:"N\xe4yt\xe4 tarjous",SeeMenu:"N\xe4yt\xe4 valikko",Schedule:"Aikataulu",SaveNow:"Tallenna nyt",Sale:"Katso tarjous",Reserve:"Varaa",RentNow:"Vuokraa nyt",RentACar:"Vuokraa auto",Register:"Rekister\xf6i",PostJob:"L\xe4het\xe4 ty\xf6",PlayNow:"Toista nyt",PlayGame:"Pelaa peli",OrderNow:"Tilaa nyt",LogIn:"Kirjaudu sis\xe4\xe4n",ListenNow:"Kuuntele nyt",LearnMore:"Lue lis\xe4\xe4",JoinNow:"Liity nyt",GetQuote:"Hae tarjous",GetOffer:"Hae tarjous",GetDeals:"Hae sopimuksia",FreeTrial:"Ilmaiskokeilu",FreeQuote:"Ilmaistarjous",FreePlay:"Ilmainen peli",FindJob:"Etsi ty\xf6paikka",FileNow:"Hae nyt",EnrollNow:"Ilmoittaudu nyt",EmailNow:"S\xe4hk\xf6postita",Download:"Lataa",Donate:"Lahjoita",Coupon:"Hanki kuponki",ContactUs:"Ota yhteytt\xe4",Compare:"Vertaa",ChatNow:"Keskustele nyt",BuyNow:"Osta nyt",BookNow:"Varaa nyt",BookHotel:"Varaa hotelli",BookACar:"Varaa auto",BidNow:"Tarjoa nyt",BetNow:"Veikkaa nyt",ApplyNow:"K\xe4yt\xe4 nyt",ActNow:"Toimi nyt",Directions:"Reittiohjeet",FindStore:"Etsi kauppa",SwitchNow:"Vaihda nyt",VisitStore:"Siirry kauppaan",RenewNow:"Uusi nyt",Reorder:"Tilaa uudelleen"},French:{WatchNow:"Regarder",WatchMore:"Regarder plus",Watch:"Regarder",VoteNow:"Voter",ViewPlans:"Afficher plans",TryNow:"Essayer",Subscribe:"S\u2019abonner",StartNow:"D\xe9marrer",SignUp:"S\u2019inscrire",SignIn:"Connexion",Showtimes:"Horaires",ShopNow:"Acheter",SellNow:"Vendre",SeeOffer:"Voir l\u2019offre",SeeMenu:"Voir le menu",Schedule:"Planifier",SaveNow:"Enregistrer",Sale:"Voir l\u2019offre",Reserve:"R\xe9server",RentNow:"Louer",RentACar:"Louer voiture",Register:"S\u2019inscrire",PostJob:"Publier emploi",PlayNow:"Lire",PlayGame:"Jouer",OrderNow:"Commander",LogIn:"Connexion",ListenNow:"\xc9couter",LearnMore:"En savoir plus",JoinNow:"Rejoindre",GetQuote:"Obtenir devis",GetOffer:"Obtenir offre",GetDeals:"Obtenir offres",FreeTrial:"Essai gratuit",FreeQuote:"Devis gratuit",FreePlay:"Jeu gratuit",FindJob:"Trouver emploi",FileNow:"Ranger",EnrollNow:"S\u2019inscrire",EmailNow:"Envoyer e-mail",Download:"T\xe9l\xe9charger",Donate:"Faire un don",Coupon:"Obtenir un bon",ContactUs:"Nous contacter",Compare:"Comparer",ChatNow:"Discuter",BuyNow:"Acheter",BookNow:"R\xe9server",BookHotel:"R\xe9server h\xf4tel",BookACar:"R\xe9server voiture",BidNow:"Faire une offre",BetNow:"Parier",ApplyNow:"Appliquer",ActNow:"Allez-y",Directions:"Itin\xe9raires",SwitchNow:"Changer",RenewNow:"Renouveler",Reorder:"Recommander"},Italian:{WatchNow:"Guarda ora",WatchMore:"Guarda altro",Watch:"Guarda",VoteNow:"Vota ora",ViewPlans:"Vedi piani",ViewCars:"Visualizza auto",TryNow:"Prova ora",TestDrive:"Prova su strada",Subscribe:"Sottoscrivi",StartNow:"Inizia ora",SignUp:"Iscriviti",SignIn:"Accedi",Showtimes:"Orari",ShopNow:"Acquista ora",SellNow:"Vendi ora",SeeOffer:"Vedi offerta",SeeMenu:"Visualizza menu",Schedule:"Pianifica",SaveNow:"Salva ora",Sale:"Guarda sconto",Reserve:"Prenota",RentNow:"Noleggia ora",RentACar:"Noleggia auto",Register:"Registrati",PostJob:"Offerta lavoro",PlayNow:"Riproduci ora",PlayGame:"Gioca",OrderNow:"Ordina ora",LogIn:"Accedi",ListenNow:"Ascolta ora",LearnMore:"Ulteriori info",JoinNow:"Partecipa ora",GetQuote:"Preventivo",GetOffer:"Ottieni offerta",GetDeals:"Ottieni offerte",FreeTrial:"Prova gratuita",FreePlay:"Gioco gratuito",FindJob:"Trova lavoro",FileNow:"Inoltra ora",EnrollNow:"Iscriviti ora",EmailNow:"Invia e-mail",Download:"Scarica",Donate:"Dona",Coupon:"Ottieni coupon",ContactUs:"Contattaci",Compare:"Confronta",ChatNow:"Chatta ora",BuyNow:"Acquista ora",BookNow:"Prenota ora",BookHotel:"Prenota hotel",BookACar:"Prenota un'auto",BidNow:"Offri ora",BetNow:"Scommetti ora",ApplyNow:"Applica ora",ActNow:"Agisci ora",Directions:"Indicazioni",FindStore:"Trova il negozio",SwitchNow:"Cambia subito",VisitStore:"Visita negozio",RenewNow:"Rinnova ora",Reorder:"Riordina"},Norwegian:{WatchNow:"Se n\xe5",WatchMore:"Se mer",Watch:"Se",VoteNow:"Stem n\xe5",ViewPlans:"Se planer",ViewCars:"Vis biler",TryNow:"Pr\xf8v n\xe5",TestDrive:"Testkj\xf8r",Subscribe:"Abonner",StartNow:"Start n\xe5",FreeTrial:"Start gratis",SignUp:"Meld deg p\xe5",SignIn:"Logg p\xe5",Showtimes:"Visningstider",ShopNow:"Handle n\xe5",SellNow:"Selg n\xe5",SeeOffer:"Se tilbud",SeeMenu:"Se meny",Schedule:"Terminliste",SaveNow:"Spar n\xe5",Sale:"Se salg",Reserve:"Reserver",RentNow:"Lei n\xe5",RentACar:"Lei en bil",Register:"Registrer deg",PostJob:"Legg ut jobb",PlayNow:"Spill n\xe5",PlayGame:"Spill",OrderNow:"Bestill n\xe5",LogIn:"Logg p\xe5",ListenNow:"H\xf8r n\xe5",LearnMore:"Les mer",JoinNow:"Bli med n\xe5",GetQuote:"F\xe5 anbud",GetOffer:"F\xe5 tilbud",GetDeals:"F\xe5 tilbud",FreeQuote:"Gratis anbud",FreePlay:"Gratis spill",FindJob:"Finn jobb",FileNow:"S\xf8k n\xe5",EnrollNow:"Registrer deg",EmailNow:"Send e-post n\xe5",Download:"Last ned",Donate:"Doner",Coupon:"Hent kupong",ContactUs:"Kontakt oss",Compare:"Sammenlign",ChatNow:"Chat n\xe5",BuyNow:"Kj\xf8p n\xe5",BookNow:"Reserver n\xe5",BookHotel:"Reserver hotell",BookACar:"Reserver en bil",BidNow:"By n\xe5",BetNow:"Sats n\xe5",ApplyNow:"S\xf8k n\xe5",ActNow:"Handle n\xe5",Directions:"Veibeskrivelse",FindStore:"Finn butikk",SwitchNow:"Bytt n\xe5",VisitStore:"G\xe5 til butikk",RenewNow:"Forny n\xe5",Reorder:"Bestill p\xe5 nytt"},Dutch:{WatchNow:"Nu kijken",WatchMore:"Meer kijken",Watch:"Kijken",VoteNow:"Nu stemmen",ViewPlans:"Plannen tonen",ViewCars:"Auto's tonen",TryNow:"Nu proberen",TestDrive:"Proefrit",Subscribe:"Abonneren",StartNow:"Nu beginnen",SignUp:"Registreren",SignIn:"Aanmelden",Showtimes:"Aanvangstijd",ShopNow:"Nu shoppen",SellNow:"Nu verkopen",SeeOffer:"Aanbieding zien",SeeMenu:"Menu zien",Schedule:"Schema",SaveNow:"Nu besparen",Sale:"Sale bekijken",Reserve:"Reserveren",RentNow:"Nu huren",RentACar:"Auto huren",Register:"Registreren",PlayNow:"Nu spelen",PlayGame:"Game spelen",OrderNow:"Nu bestellen",LogIn:"Aanmelden",ListenNow:"Nu luisteren",LearnMore:"Meer informatie",JoinNow:"Nu meedoen",GetQuote:"Offerte krijgen",GetOffer:"Aanbieding zien",GetDeals:"Deals zien",FreeTrial:"Gratis demo",FreeQuote:"Gratis offerte",FreePlay:"Gratis spelen",FindJob:"Vacature zoeken",FileNow:"Nu inzenden",EnrollNow:"Nu inschrijven",EmailNow:"Nu e-mailen",Download:"Downloaden",Donate:"Doneren",Coupon:"Coupon aanvragen",ContactUs:"Contact opnemen",Compare:"Vergelijken",ChatNow:"Nu chatten",BuyNow:"Nu kopen",BookNow:"Nu boeken",BookHotel:"Hotel boeken",BookACar:"Auto huren",BidNow:"Nu bieden",BetNow:"Nu inzetten",ApplyNow:"Nu solliciteren",ActNow:"Nu beslissen",Directions:"Route",FindStore:"Winkel zoeken",SwitchNow:"Nu wisselen",VisitStore:"Winkel bezoeken",RenewNow:"Nu vernieuwen",Reorder:"Nabestellen"},Portuguese:{WatchNow:"Assistir Agora",WatchMore:"Assistir Mais",Watch:"Assistir",VoteNow:"Votar Agora",ViewPlans:"Exibir Planos",ViewCars:"Exibir Carros",TryNow:"Experimentar J\xe1",TestDrive:"Test Drive",Subscribe:"Assinar",StartNow:"Iniciar Agora",SignUp:"Inscrever-se",SignIn:"Entrar",Showtimes:"Hor\xe1rios",ShopNow:"Comprar Agora",SellNow:"Vender Agora",SeeOffer:"Ver Oferta",SeeMenu:"Ver Menu",Schedule:"Agenda",SaveNow:"Salvar Agora",Sale:"Ver Promo\xe7\xe3o",Reserve:"Reservar",RentNow:"Alugar Agora",RentACar:"Alugar um Carro",Register:"Registrar",PostJob:"Postar Trabalho",PlayNow:"Jogar Agora",PlayGame:"Jogar Jogo",OrderNow:"Encomendar",LogIn:"Fazer Logon",ListenNow:"Ouvir Agora",LearnMore:"Saiba Mais",JoinNow:"Ingressar Agora",GetQuote:"Obter Cota\xe7\xe3o",GetOffer:"Obter Oferta",GetDeals:"Obter Ofertas",FreeTrial:"Avalie Gr\xe1tis",FreeQuote:"Cota\xe7\xe3o Gr\xe1tis",FreePlay:"Jogo Gr\xe1tis",FindJob:"Buscar Trabalho",FileNow:"Arquivar Agora",EnrollNow:"Registrar Agora",EmailNow:"Enviar Email",Download:"Download",Donate:"Doar",Coupon:"Obter Cupom",ContactUs:"Fale Conosco",Compare:"Comparar",ChatNow:"Conversar Agora",BuyNow:"Comprar Agora",BookNow:"Reservar Agora",BookHotel:"Reservar Hotel",BookACar:"Alugar um Carro",BidNow:"Fazer Lance",BetNow:"Apostar Agora",ApplyNow:"Solicitar Agora",ActNow:"Aja Agora",Directions:"Trajeto",FindStore:"Encontrar Loja",SwitchNow:"Mudar Agora",VisitStore:"Visitar Loja",RenewNow:"Renovar Agora",Reorder:"Comprar de novo"},Swedish:{WatchNow:"Titta nu",WatchMore:"Visa mer",Watch:"Visa",VoteNow:"R\xf6sta nu",ViewPlans:"Visa planer",ViewCars:"Visa bilar",TryNow:"Prova nu",TestDrive:"Provk\xf6r",Subscribe:"Prenumerera",StartNow:"B\xf6rja nu",SignUp:"Registrering",SignIn:"Logga in",Showtimes:"F\xf6rest\xe4llningar",ShopNow:"Shoppa nu",SellNow:"S\xe4lj nu",SeeOffer:"Visa erbjudande",SeeMenu:"Visa meny",Schedule:"Schemal\xe4gg",SaveNow:"Spara nu",Sale:"Visa f\xf6rs\xe4ljning",Reserve:"Reservera",RentNow:"Hyr nu",RentACar:"Hyr bil",Register:"Registrera dig",PostJob:"L\xe4gg upp jobb",PlayNow:"Spela nu",PlayGame:"Spela",OrderNow:"Best\xe4ll nu",LogIn:"Logga in",ListenNow:"Lyssna nu",LearnMore:"Mer information",JoinNow:"G\xe5 med nu",GetQuote:"Beg\xe4r offert",GetOffer:"Se erbjudanden",GetDeals:"Se erbjudanden",FreeTrial:"Prova gratis",FreeQuote:"Gratis offert",FreePlay:"Spela gratis",FindJob:"Hitta jobb",FileNow:"Spara nu",EnrollNow:"Registrera nu",EmailNow:"Skicka mejl nu",Download:"Ladda ned",Donate:"Donera",Coupon:"H\xe4mta kupong",ContactUs:"Kontakta oss",Compare:"J\xe4mf\xf6r",ChatNow:"Chatta nu",BuyNow:"K\xf6p nu",BookNow:"Boka nu",BookHotel:"Boka hotel",BookACar:"Boka en bil",BidNow:"Bjud nu",BetNow:"Spela nu",ApplyNow:"Ans\xf6k nu",ActNow:"G\xf6r det nu",Directions:"V\xe4gbeskrivning",FindStore:"Hitta butik",SwitchNow:"V\xe4xla nu",VisitStore:"Bes\xf6k butik",RenewNow:"F\xf6rnya nu",Reorder:"Best\xe4ll igen"},TraditionalChinese:{WatchNow:"\u7acb\u5373\u89c0\u770b",WatchMore:"\u89c0\u770b\u66f4\u591a",Watch:"\u89c0\u770b",VoteNow:"\u7acb\u5373\u6295\u7968",ViewPlans:"\u6aa2\u8996\u65b9\u6848",ViewCars:"\u6aa2\u8996\u8eca\u8f1b",TryNow:"\u7acb\u5373\u8a66\u8a66",TestDrive:"\u8a66\u99d5",Subscribe:"\u8a02\u95b1",StartNow:"\u7acb\u5373\u958b\u59cb",SignUp:"\u8a3b\u518a",SignIn:"\u767b\u5165",Showtimes:"\u653e\u6620\u6642\u9593",ShopNow:"\u7acb\u5373\u9078\u8cfc",SellNow:"\u7acb\u5373\u92b7\u552e",SeeOffer:"\u67e5\u770b\u512a\u60e0",SeeMenu:"\u67e5\u770b\u83dc\u55ae",Schedule:"\u6392\u7a0b",SaveNow:"\u7acb\u5373\u7701\u9322",Sale:"\u67e5\u770b\u92b7\u552e",Reserve:"\u9810\u7d04",RentNow:"\u7acb\u5373\u79df\u4e0b",RentACar:"\u79df\u8eca",Register:"\u8a3b\u518a",PostJob:"\u5f35\u8cbc\u8077\u7f3a",PlayNow:"\u7acb\u5373\u73a9",PlayGame:"\u73a9\u904a\u6232",OrderNow:"\u7acb\u5373\u8a02\u8cfc",LogIn:"\u767b\u5165",ListenNow:"\u7acb\u5373\u8046\u807d",LearnMore:"\u6df1\u5165\u4e86\u89e3",JoinNow:"\u7acb\u5373\u52a0\u5165",GetQuote:"\u53d6\u5f97\u5831\u50f9",GetOffer:"\u53d6\u5f97\u512a\u60e0",GetDeals:"\u53d6\u5f97\u512a\u60e0",FreeTrial:"\u514d\u8cbb\u8a66\u7528",FreeQuote:"\u514d\u8cbb\u5831\u50f9",FreePlay:"\u514d\u8cbb\u73a9",FindJob:"\u627e\u5de5\u4f5c",FileNow:"\u7acb\u5373\u63d0\u4ea4",EnrollNow:"\u7acb\u5373\u5831\u540d",EmailNow:"\u7acb\u5373\u5bc4\u96fb\u5b50\u90f5\u4ef6",Download:"\u4e0b\u8f09",Donate:"\u6350\u8d08",Coupon:"\u53d6\u5f97\u512a\u60e0\u5238",ContactUs:"\u8207\u6211\u5011\u9023\u7d61",Compare:"\u6bd4\u8f03",ChatNow:"\u7acb\u5373\u4ea4\u8ac7",BuyNow:"\u7acb\u5373\u8cfc\u8cb7",BookNow:"\u7acb\u5373\u9810\u8a02",BookHotel:"\u8a02\u65c5\u9928",BookACar:"\u8cb7\u8eca",BidNow:"\u7acb\u5373\u51fa\u50f9",BetNow:"\u7acb\u5373\u4e0b\u6ce8",ApplyNow:"\u7acb\u5373\u7533\u8acb",ActNow:"\u7acb\u5373\u884c\u52d5",Directions:"\u8def\u7dda",FindStore:"\u5c0b\u627e\u5546\u5e97",SwitchNow:"\u7acb\u5373\u5207\u63db",VisitStore:"\u9020\u8a2a\u5546\u5e97",RenewNow:"\u7acb\u5373\u66f4\u65b0",Reorder:"\u91cd\u65b0\u8a02\u8cfc"},Polish:{ActNow:"Dzia\u0142aj teraz",ApplyNow:"Zg\u0142o\u015b si\u0119 teraz",BetNow:"Postaw teraz",BidNow:"Licytuj teraz",BookACar:"Zarezerwuj samoch\xf3d",BookHotel:"Zarezerwuj pok\xf3j",BookNow:"Zarezerwuj teraz",BuyNow:"Kup teraz",ChatNow:"Porozmawiaj na czacie",Compare:"Por\xf3wnaj",ContactUs:"Skontaktuj si\u0119 z nami",Coupon:"Uzyskaj kupon",Directions:"Wskaz\xf3wki dojazdu",Donate:"Przeka\u017c darowizn\u0119",Download:"Pobierz",EmailNow:"Wy\u015blij e-mail teraz",EnrollNow:"Zapisz si\u0119 teraz",FileNow:"Z\u0142\xf3\u017c teraz",FindJob:"Znajd\u017a prac\u0119",FindStore:"Znajd\u017a sklep",FreePlay:"Bezp\u0142atna rozgrywka",FreeQuote:"Bezp\u0142atna wycena",FreeTrial:"Bezp\u0142atny okres pr\xf3bny",GetDeals:"Uzyskaj oferty",GetOffer:"Uzyskaj ofert\u0119",GetQuote:"Uzyskaj wycen\u0119",JoinNow:"Do\u0142\u0105cz teraz",LearnMore:"Dowiedz si\u0119 wi\u0119cej",ListenNow:"Pos\u0142uchaj teraz",LogIn:"Zaloguj si\u0119",OrderNow:"Zam\xf3w teraz",PlayGame:"Zagraj w co\u015b",PlayNow:"Zagraj teraz",PostJob:"Zamie\u015b\u0107 ofert\u0119 pracy",Register:"Zarejestruj si\u0119",RenewNow:"Odn\xf3w teraz",RentACar:"Wynajmij samoch\xf3d",RentNow:"Wynajmij teraz",Reorder:"Zam\xf3w ponownie",Reserve:"Zarezerwuj",Sale:"Zobacz wyprzeda\u017c",SaveNow:"Zapisz teraz",Schedule:"Zaplanuj",SeeMenu:"Zobacz menu",SeeOffer:"Zobacz ofert\u0119",SellNow:"Sprzedaj teraz",ShopNow:"Kup teraz",Showtimes:"Pory seans\xf3w",SignIn:"Zaloguj si\u0119",SignUp:"Zarejestruj si\u0119",StartNow:"Rozpocznij teraz",Subscribe:"Zasubskrybuj",SwitchNow:"Przejd\u017a teraz",TestDrive:"Jazda pr\xf3bna",TryNow:"Wypr\xf3buj teraz",ViewCars:"Zobacz samochody",ViewPlans:"Zobacz taryfy",VisitStore:"Odwied\u017a sklep",VoteNow:"Zag\u0142osuj teraz",Watch:"Obejrzyj",WatchMore:"Obejrzyj wi\u0119cej",WatchNow:"Obejrzyj teraz"},Turkish:{ActNow:"Hemen Harekete Ge\xe7",ApplyNow:"Hemen Ba\u015fvur",BetNow:"Hemen \u0130ddiaya Gir",BidNow:"Hemen Teklif Ver",BookACar:"Araba Ay\u0131rt",BookHotel:"Otel Ay\u0131rt",BookNow:"Hemen Ay\u0131rt",BuyNow:"Hemen Sat\u0131n Al",ChatNow:"Hemen Sohbet Et",Compare:"Kar\u015f\u0131la\u015ft\u0131r",ContactUs:"Bize Ula\u015f\u0131n",Coupon:"Kupon Al",Directions:"Yol Tarifi",Donate:"Ba\u011f\u0131\u015f Yap",Download:"\u0130ndir",EmailNow:"Hemen E-posta G\xf6nder",EnrollNow:"Hemen Kaydol",FileNow:"Hemen G\xf6nder",FindJob:"\u0130\u015f Bul",FindStore:"Ma\u011faza Bul",FreePlay:"\xdccretsiz Oyna",FreeQuote:"\xdccretsiz Fiyat Teklifi",FreeTrial:"\xdccretsiz Deneme",GetDeals:"F\u0131rsat Al",GetOffer:"Teklif Al",GetQuote:"Fiyat Teklifi Al",JoinNow:"Hemen Kat\u0131l",LearnMore:"Daha Fazla Bilgi",ListenNow:"Hemen Dinle",LogIn:"Oturum A\xe7",OrderNow:"Hemen Sipari\u015f Ver",PlayGame:"Oyun Oyna",PlayNow:"Hemen Oyna",PostJob:"\u0130\u015f \u0130lan\u0131 Yay\u0131mla",Register:"Kaydol",RenewNow:"Hemen Yenile",RentACar:"Araba Kirala",RentNow:"Hemen Kirala",Reorder:"Yeniden S\u0131rala",Reserve:"Rezerve Et",Sale:"\u0130ndirimi G\xf6ster",SaveNow:"Hemen Kaydet",Schedule:"Zamanla",SeeMenu:"Men\xfcy\xfc G\xf6ster",SeeOffer:"Teklifi G\xf6ster",SellNow:"Hemen Sat",ShopNow:"Hemen Al\u0131\u015fveri\u015f Yap",Showtimes:"G\xf6steri Zamanlar\u0131",SignIn:"Oturum A\xe7",SignUp:"Kaydol",StartNow:"Hemen Ba\u015fla",Subscribe:"Abone Ol",SwitchNow:"Hemen Ge\xe7i\u015f Yap",TestDrive:"Test S\xfcr\xfc\u015f\xfc",TryNow:"Hemen Dene",ViewCars:"Arabalar\u0131 G\xf6r\xfcnt\xfcle",ViewPlans:"Planlar\u0131 G\xf6r\xfcnt\xfcle",VisitStore:"Ma\u011fazay\u0131 G\xf6r\xfcnt\xfcle",VoteNow:"Hemen Oy Ver",Watch:"\u0130zle",WatchMore:"Daha Fazlas\u0131n\u0131 \u0130zle",WatchNow:"Hemen \u0130zle"},Greek:{ActNow:"\u0394\u03c1\u03ac\u03c3\u03c4\u03b5 \u03c4\u03ce\u03c1\u03b1",ApplyNow:"\u0391\u03af\u03c4\u03b7\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",BetNow:"\u03a3\u03c4\u03bf\u03af\u03c7\u03b7\u03bc\u03b1 \u03c4\u03ce\u03c1\u03b1",BidNow:"\u03a0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ac \u03c4\u03ce\u03c1\u03b1",BookACar:"\u039a\u03c1\u03ac\u03c4\u03b7\u03c3\u03b7 \u03b1\u03c5\u03c4\u03bf\u03ba\u03b9\u03bd\u03ae\u03c4\u03bf\u03c5",BookHotel:"\u039a\u03c1\u03ac\u03c4\u03b7\u03c3\u03b7 \u03be\u03b5\u03bd\u03bf\u03b4\u03bf\u03c7\u03b5\u03af\u03bf\u03c5",BookNow:"\u039a\u03c1\u03ac\u03c4\u03b7\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",BuyNow:"\u0391\u03b3\u03bf\u03c1\u03ac \u03c4\u03ce\u03c1\u03b1",ChatNow:"\u03a3\u03c5\u03bd\u03bf\u03bc\u03b9\u03bb\u03af\u03b1 \u03c4\u03ce\u03c1\u03b1",Compare:"\u03a3\u03cd\u03b3\u03ba\u03c1\u03b9\u03c3\u03b7",ContactUs:"\u0395\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03af\u03b1",Coupon:"\u0391\u03c0\u03cc\u03ba\u03c4\u03b7\u03c3\u03b7 \u03ba\u03bf\u03c5\u03c0\u03bf\u03bd\u03b9\u03bf\u03cd",Directions:"\u039f\u03b4\u03b7\u03b3\u03af\u03b5\u03c2",Donate:"\u0394\u03c9\u03c1\u03b5\u03ac",Download:"\u039b\u03ae\u03c8\u03b7",EmailNow:"\u0391\u03c0\u03bf\u03c3\u03c4\u03bf\u03bb\u03ae email \u03c4\u03ce\u03c1\u03b1",EnrollNow:"\u0395\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae \u03c4\u03ce\u03c1\u03b1",FileNow:"\u0391\u03c1\u03c7\u03b5\u03b9\u03bf\u03b8\u03ad\u03c4\u03b7\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",FindJob:"\u0395\u03cd\u03c1\u03b5\u03c3\u03b7 \u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1\u03c2",FindStore:"\u0395\u03cd\u03c1\u03b5\u03c3\u03b7 \u03ba\u03b1\u03c4\u03b1\u03c3\u03c4\u03ae\u03bc\u03b1\u03c4\u03bf\u03c2",FreePlay:"\u0394\u03c9\u03c1\u03b5\u03ac\u03bd \u03c0\u03b1\u03b9\u03c7\u03bd\u03af\u03b4\u03b9",FreeQuote:"\u0394\u03c9\u03c1\u03b5\u03ac\u03bd \u03c0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ac",FreeTrial:"\u0394\u03c9\u03c1\u03b5\u03ac\u03bd \u03b4\u03bf\u03ba\u03b9\u03bc\u03ae",GetDeals:"\u039b\u03ac\u03b2\u03b5\u03c4\u03b5 \u03c0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ad\u03c2",GetOffer:"\u039b\u03ac\u03b2\u03b5\u03c4\u03b5 \u03c0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ac",GetQuote:"\u039b\u03ac\u03b2\u03b5\u03c4\u03b5 \u03c4\u03b9\u03bc\u03ae",JoinNow:"\u0395\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae \u03c4\u03ce\u03c1\u03b1",LearnMore:"\u039c\u03ac\u03b8\u03b5\u03c4\u03b5 \u03c0\u03b5\u03c1\u03b9\u03c3\u03c3\u03cc\u03c4\u03b5\u03c1\u03b1",ListenNow:"\u0391\u03ba\u03c1\u03cc\u03b1\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",LogIn:"\u03a3\u03cd\u03bd\u03b4\u03b5\u03c3\u03b7",OrderNow:"\u03a0\u03b1\u03c1\u03b1\u03b3\u03b3\u03b5\u03bb\u03af\u03b1 \u03c4\u03ce\u03c1\u03b1",PlayGame:"\u0391\u03bd\u03b1\u03c0\u03b1\u03c1\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03b1\u03b9\u03c7\u03bd\u03b9\u03b4\u03b9\u03bf\u03cd",PlayNow:"\u0391\u03bd\u03b1\u03c0\u03b1\u03c1\u03b1\u03b3\u03c9\u03b3\u03ae \u03c4\u03ce\u03c1\u03b1",PostJob:"\u0394\u03b7\u03bc\u03bf\u03c3\u03af\u03b5\u03c5\u03c3\u03b7 \u03b8\u03ad\u03c3\u03b7\u03c2 \u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1\u03c2",Register:"\u039a\u03b1\u03c4\u03b1\u03c7\u03ce\u03c1\u03b9\u03c3\u03b7",RenewNow:"\u0391\u03bd\u03b1\u03bd\u03ad\u03c9\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",RentACar:"\u0395\u03bd\u03bf\u03b9\u03ba\u03af\u03b1\u03c3\u03b7 \u03b1\u03c5\u03c4\u03bf\u03ba\u03b9\u03bd\u03ae\u03c4\u03bf\u03c5",RentNow:"\u0395\u03bd\u03bf\u03b9\u03ba\u03af\u03b1\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",Reorder:"\u0391\u03bd\u03b1\u03c0\u03b1\u03c1\u03b1\u03b3\u03b3\u03b5\u03bb\u03af\u03b1",Reserve:"\u039a\u03c1\u03ac\u03c4\u03b7\u03c3\u03b7",Sale:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03c0\u03ce\u03bb\u03b7\u03c3\u03b7\u03c2",SaveNow:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",Schedule:"\u03a0\u03c1\u03cc\u03b3\u03c1\u03b1\u03bc\u03bc\u03b1",SeeMenu:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03bc\u03b5\u03bd\u03bf\u03cd",SeeOffer:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03c0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ac\u03c2",SellNow:"\u03a0\u03ce\u03bb\u03b7\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",ShopNow:"\u0391\u03b3\u03bf\u03c1\u03ac \u03c4\u03ce\u03c1\u03b1",Showtimes:"\u038f\u03c1\u03b5\u03c2 \u03c0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae\u03c2",SignIn:"\u0395\u03af\u03c3\u03bf\u03b4\u03bf\u03c2",SignUp:"\u0395\u03b3\u03b3\u03c1\u03b1\u03c6\u03ae",StartNow:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7 \u03c4\u03ce\u03c1\u03b1",Subscribe:"\u03a3\u03c5\u03bd\u03b4\u03c1\u03bf\u03bc\u03ae",SwitchNow:"\u039c\u03b5\u03c4\u03ac\u03b2\u03b1\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1",TestDrive:"\u0394\u03bf\u03ba\u03b9\u03bc\u03ae",TryNow:"\u0394\u03bf\u03ba\u03b9\u03bc\u03ae \u03c4\u03ce\u03c1\u03b1",ViewCars:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03b1\u03c5\u03c4\u03bf\u03ba\u03b9\u03bd\u03ae\u03c4\u03c9\u03bd",ViewPlans:"\u03a0\u03c1\u03bf\u03b2\u03bf\u03bb\u03ae \u03c3\u03c7\u03b5\u03b4\u03af\u03c9\u03bd",VisitStore:"\u0395\u03c0\u03af\u03c3\u03ba\u03b5\u03c8\u03b7 \u03c3\u03c4\u03bf \u03ba\u03b1\u03c4\u03ac\u03c3\u03c4\u03b7\u03bc\u03b1",VoteNow:"\u03a8\u03b7\u03c6\u03bf\u03c6\u03bf\u03c1\u03af\u03b1 \u03c4\u03ce\u03c1\u03b1",Watch:"\u03a0\u03b1\u03c1\u03b1\u03ba\u03bf\u03bb\u03bf\u03cd\u03b8\u03b7\u03c3\u03b7",WatchMore:"\u03a0\u03b1\u03c1\u03b1\u03ba\u03bf\u03bb\u03bf\u03cd\u03b8\u03b7\u03c3\u03b7 \u03c0\u03b5\u03c1\u03b9\u03c3\u03c3\u03cc\u03c4\u03b5\u03c1\u03c9\u03bd",WatchNow:"\u03a0\u03b1\u03c1\u03b1\u03ba\u03bf\u03bb\u03bf\u03cd\u03b8\u03b7\u03c3\u03b7 \u03c4\u03ce\u03c1\u03b1"},Bulgarian:{ActNow:"\u0414\u0435\u0439\u0441\u0442\u0432\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",ApplyNow:"\u041a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0441\u0442\u0432\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",BetNow:"\u0417\u0430\u043b\u043e\u0436\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",BidNow:"\u041d\u0430\u0434\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",BookACar:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0430",BookHotel:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0439\u0442\u0435 \u0445\u043e\u0442\u0435\u043b",BookNow:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",BuyNow:"\u041a\u0443\u043f\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",ChatNow:"\u0427\u0430\u0442 \u0441\u0435\u0433\u0430",Compare:"\u0421\u0440\u0430\u0432\u043d\u044f\u0432\u0430\u043d\u0435",ContactUs:"\u0412\u0440\u044a\u0437\u043a\u0430 \u0441 \u043d\u0430\u0441",Coupon:"\u0412\u0437\u0435\u043c\u0435\u0442\u0435 \u043a\u0443\u043f\u043e\u043d",Directions:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",Donate:"\u0414\u0430\u0440\u0435\u0442\u0435",Download:"\u0418\u0437\u0442\u0435\u0433\u043b\u044f\u043d\u0435",EmailNow:"\u0418\u0437\u043f\u0440\u0430\u0442\u0435\u0442\u0435 \u0438\u043c\u0435\u0439\u043b \u0441\u0435\u0433\u0430",EnrollNow:"\u0417\u0430\u043f\u0438\u0448\u0435\u0442\u0435 \u0441\u0435 \u0441\u0435\u0433\u0430",FileNow:"\u041f\u043e\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",FindJob:"\u041d\u0430\u043c\u0435\u0440\u0435\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0430",FindStore:"\u041d\u0430\u043c\u0435\u0440\u0435\u0442\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d",FreePlay:"\u0411\u0435\u0437\u043f\u043b\u0430\u0442\u043d\u0430 \u0438\u0433\u0440\u0430",FreeQuote:"\u0411\u0435\u0437\u043f\u043b\u0430\u0442\u043d\u0430 \u043e\u0444\u0435\u0440\u0442\u0430",FreeTrial:"\u0411\u0435\u0437\u043f\u043b\u0430\u0442\u0435\u043d \u043f\u0440\u043e\u0431\u0435\u043d \u043f\u0435\u0440\u0438\u043e\u0434",GetDeals:"\u0412\u0437\u0435\u043c\u0435\u0442\u0435 \u043e\u0444\u0435\u0440\u0442\u0438",GetOffer:"\u041f\u043e\u043b\u0443\u0447\u0435\u0442\u0435 \u043e\u0444\u0435\u0440\u0442\u0430",GetQuote:"\u0412\u0437\u0435\u043c\u0435\u0442\u0435 \u043e\u0444\u0435\u0440\u0442\u0430",JoinNow:"\u041f\u0440\u0438\u0441\u044a\u0435\u0434\u0438\u043d\u0435\u0442\u0435 \u0441\u0435 \u0441\u0435\u0433\u0430",LearnMore:"\u041d\u0430\u0443\u0447\u0435\u0442\u0435 \u043f\u043e\u0432\u0435\u0447\u0435",ListenNow:"\u0421\u043b\u0443\u0448\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",LogIn:"\u0412\u043b\u0438\u0437\u0430\u043d\u0435",OrderNow:"\u041f\u043e\u0440\u044a\u0447\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",PlayGame:"\u0418\u0433\u0440\u0430\u0439\u0442\u0435",PlayNow:"\u0418\u0433\u0440\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",PostJob:"\u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u043d\u0430 \u043e\u0444\u0435\u0440\u0442\u0430",Register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u043d\u0435",RenewNow:"\u041f\u043e\u0434\u043d\u043e\u0432\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",RentACar:"\u041a\u043e\u043b\u0430 \u043f\u043e\u0434 \u043d\u0430\u0435\u043c",RentNow:"\u041d\u0430\u0435\u043c\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",Reorder:"\u041f\u043e\u0440\u044a\u0447\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e",Reserve:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0439\u0442\u0435",Sale:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u0440\u0430\u0437\u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430\u0442\u0430",SaveNow:"\u0421\u043f\u0435\u0441\u0442\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",Schedule:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u0430",SeeMenu:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u043c\u0435\u043d\u044e\u0442\u043e",SeeOffer:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u043e\u0444\u0435\u0440\u0442\u0430\u0442\u0430",SellNow:"\u041f\u0440\u043e\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",ShopNow:"\u041f\u0430\u0437\u0430\u0440\u0443\u0432\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",Showtimes:"\u041f\u0440\u043e\u0436\u0435\u043a\u0446\u0438\u0438",SignIn:"\u0412\u0445\u043e\u0434",SignUp:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0446\u0438\u044f",StartNow:"\u0421\u0442\u0430\u0440\u0442\u0438\u0440\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",Subscribe:"\u0410\u0431\u043e\u043d\u0438\u0440\u0430\u043d\u0435",SwitchNow:"\u041f\u0440\u0435\u0432\u043a\u043b\u044e\u0447\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",TestDrive:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e \u0448\u043e\u0444\u0438\u0440\u0430\u043d\u0435",TryNow:"\u041e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",ViewCars:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438\u0442\u0435",ViewPlans:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u043f\u043b\u0430\u043d\u043e\u0432\u0435\u0442\u0435",VisitStore:"\u041f\u043e\u0441\u0435\u0442\u0435\u0442\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430",VoteNow:"\u0413\u043b\u0430\u0441\u0443\u0432\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430",Watch:"\u0413\u043b\u0435\u0434\u0430\u0439\u0442\u0435",WatchMore:"\u0413\u043b\u0435\u0434\u0430\u0439\u0442\u0435 \u043e\u0449\u0435",WatchNow:"\u0413\u043b\u0435\u0434\u0430\u0439\u0442\u0435 \u0441\u0435\u0433\u0430"},Croatian:{ActNow:"Djelujte sada",ApplyNow:"Primijeni sada",BetNow:"Kladite se sada",BidNow:"Po\u0161aljite ponudu sada",BookACar:"Rezervirajte automobil",BookHotel:"Rezervirajte hotel",BookNow:"Rezervirajte odmah",BuyNow:"Kupite sada",ChatNow:"Razgovarajte sada",Compare:"Usporedi",ContactUs:"Obratite nam se",Coupon:"Ostvarite kupon",Directions:"Upute",Donate:"Doniraj",Download:"Preuzmi",EmailNow:"Po\u0161alji poruku e-po\u0161te sada",EnrollNow:"Upi\u0161ite se sada",FileNow:"Predajte odmah",FindJob:"Tra\u017eenje posla",FindStore:"Tra\u017eenje trgovine",FreePlay:"Besplatna reprodukcija",FreeQuote:"Besplatna ponuda",FreeTrial:"Besplatna probna verzija",GetDeals:"Ostvarite ponude",GetOffer:"Ostvarite ponudu",GetQuote:"Zatra\u017eite ponudu",JoinNow:"Pridru\u017ei se sada",LearnMore:"Saznajte vi\u0161e",ListenNow:"Slu\u0161ajte sada",LogIn:"Prijava",OrderNow:"Naru\u010dite sada",PlayGame:"Igraj igru",PlayNow:"Igraj sada",PostJob:"Objavi posao",Register:"Registracija",RenewNow:"Obnovi sada",RentACar:"Unajmite automobil",RentNow:"Unajmi sada",Reorder:"Promijeni redoslijed",Reserve:"Rezerviraj",Sale:"Pogledajte rasprodaju",SaveNow:"Spremi sada",Schedule:"Zaka\u017ei",SeeMenu:"Pogledaj jelovnik",SeeOffer:"Prika\u017ei ponudu",SellNow:"Prodaj sada",ShopNow:"Krenite u kupovinu",Showtimes:"Raspored prikazivanja",SignIn:"Prijavite se",SignUp:"Registrirajte se",StartNow:"Zapo\u010dnite odmah",Subscribe:"Pretplatite se",SwitchNow:"Promijeni odmah",TestDrive:"Probna vo\u017enja",TryNow:"Isprobajte sada",ViewCars:"Prika\u017ei automobile",ViewPlans:"Prika\u017ei planove",VisitStore:"Posjeti trgovinu",VoteNow:"Glasajte sada",Watch:"Gledaj",WatchMore:"Pogledajte vi\u0161e",WatchNow:"Pogledajte sada"},Czech:{ActNow:"Jednat",ApplyNow:"Po\u017e\xe1dat",BetNow:"Vsadit si",BidNow:"U\u010dinit nab\xeddku",BookACar:"Rezervace auta",BookHotel:"Rezervovat hotel",BookNow:"Zarezervovat",BuyNow:"Kup te\u010f",ChatNow:"Chatovat",Compare:"Porovnat",ContactUs:"Kontaktujte n\xe1s",Coupon:"Z\xedskat kupon",Directions:"Naviga\u010dn\xed pokyny",Donate:"Darovat",Download:"St\xe1hnout",EmailNow:"Napsat e-mail",EnrollNow:"Zapsat se",FileNow:"Podat",FindJob:"Naj\xedt pr\xe1ci",FindStore:"Naj\xedt obchod",FreePlay:"Hr\xe1t zdarma",FreeQuote:"Bezplatn\xe1 nab\xeddka",FreeTrial:"Bezplatn\xe1 zku\u0161ebn\xed verze",GetDeals:"Z\xedskat slevy",GetOffer:"Z\xedskat nab\xeddku",GetQuote:"Po\u017e\xe1dat o nab\xeddku",JoinNow:"Zapojit se",LearnMore:"Dal\u0161\xed informace",ListenNow:"Poslouchat",LogIn:"P\u0159ihl\xe1sit se",OrderNow:"Objednat",PlayGame:"Hr\xe1t",PlayNow:"P\u0159ehr\xe1t",PostJob:"Zve\u0159ejnit",Register:"Registrovat",RenewNow:"Prodlou\u017eit",RentACar:"Pron\xe1jem auta",RentNow:"Pronajmout",Reorder:"P\u0159eobjednat",Reserve:"Rezervovat",Sale:"Zobrazit slevu",SaveNow:"Ulo\u017eit",Schedule:"\u010casov\xfd pl\xe1n",SeeMenu:"Zobrazit menu",SeeOffer:"Zobrazit nab\xeddku",SellNow:"Prodat",ShopNow:"Nakupovat",Showtimes:"Programy",SignIn:"P\u0159ihl\xe1\u0161en\xed",SignUp:"Zaregistrovat se",StartNow:"Spustit",Subscribe:"P\u0159ihl\xe1sit se k odb\u011bru",SwitchNow:"P\u0159ej\xedt",TestDrive:"Zku\u0161ebn\xed j\xedzda",TryNow:"Vyzkou\u0161et",ViewCars:"Zobrazit auta",ViewPlans:"Zobrazit pl\xe1ny",VisitStore:"Nav\u0161t\xedvit obchod",VoteNow:"Hlasovat",Watch:"Sledovat",WatchMore:"Sledovat dal\u0161\xed",WatchNow:"Sledovat nyn\xed"},Estonian:{ActNow:"Tegutse kohe",ApplyNow:"Rakenda kohe",BetNow:"Panusta kohe",BidNow:"Paku kohe",BookACar:"Broneeri auto",BookHotel:"Broneeri hotell",BookNow:"Broneeri kohe",BuyNow:"Osta kohe",ChatNow:"Vestle kohe",Compare:"V\xf5rdle",ContactUs:"Kontaktteave",Coupon:"Hangi kupong",Directions:"Juhised",Donate:"Anneta",Download:"Laadi alla",EmailNow:"Meili kohe",EnrollNow:"Registreeru kohe",FileNow:"Esita taotlus kohe",FindJob:"Otsi t\xf6\xf6d",FindStore:"Otsi poodi",FreePlay:"Tasuta m\xe4ng",FreeQuote:"Tasuta hinnapakkumine",FreeTrial:"Tasuta prooviversioon",GetDeals:"Hangi pakkumisi",GetOffer:"Hangi pakkumine",GetQuote:"Hangi hinnapakkumine",JoinNow:"Liitu kohe",LearnMore:"Lisateave",ListenNow:"Kuula kohe",LogIn:"Logi sisse",OrderNow:"Telli kohe",PlayGame:"M\xe4ngi",PlayNow:"Esita kohe",PostJob:"Postita t\xf6\xf6",Register:"Registreeri",RenewNow:"Uuenda kohe",RentACar:"Autorent",RentNow:"Rendi kohe",Reorder:"Telli uuesti",Reserve:"Reserveeri",Sale:"Kuva allahindlus",SaveNow:"S\xe4\xe4sta kohe",Schedule:"Ajasta",SeeMenu:"Kuva men\xfc\xfc",SeeOffer:"Kuva pakkumine",SellNow:"M\xfc\xfc kohe",ShopNow:"Mine poodi",Showtimes:"Esitusajad",SignIn:"Sisse logima",SignUp:"Registreeru",StartNow:"Alusta kohe",Subscribe:"Telli",SwitchNow:"Vaheta kohe",TestDrive:"Proovis\xf5it",TryNow:"Proovi kohe",ViewCars:"Vaata autosid",ViewPlans:"Kuva plaanid",VisitStore:"K\xfclasta poodi",VoteNow:"H\xe4\xe4leta kohe",Watch:"Vaata",WatchMore:"Vaata veel",WatchNow:"Vaata kohe"},Hungarian:{ActNow:"Cselekv\xe9s",ApplyNow:"Alkalmaz",BetNow:"Fogad\xe1s",BidNow:"Licit\xe1l\xe1s",BookACar:"Aut\xf3foglal\xe1s",BookHotel:"Sz\xe1llodai foglal\xe1s",BookNow:"Foglal\xe1s most",BuyNow:"Megv\xe1s\xe1rl\xe1s most",ChatNow:"Cseveg\xe9s most",Compare:"\xd6sszehasonl\xedt\xe1s",ContactUs:"Kapcsolatfelv\xe9tel",Coupon:"Kupon beszerz\xe9se",Directions:"\xdatvonalak",Donate:"Adom\xe1nyoz\xe1s",Download:"Let\xf6lt\xe9s",EmailNow:"E-mail k\xfcld\xe9se",EnrollNow:"Regisztr\xe1ci\xf3 most",FileNow:"Iktat\xe1s",FindJob:"\xc1ll\xe1s keres\xe9se",FindStore:"\xdczlet keres\xe9se",FreePlay:"Ingyenesen j\xe1tszhat\xf3",FreeQuote:"Ingyenes \xe1raj\xe1nlat",FreeTrial:"Ingyenes pr\xf3baverzi\xf3",GetDeals:"Aj\xe1nlatok megtekint\xe9se",GetOffer:"Aj\xe1nlat ig\xe9nybev\xe9tele",GetQuote:"Aj\xe1nlat k\xe9r\xe9se",JoinNow:"Csatlakoz\xe1s most",LearnMore:"Tov\xe1bbi inform\xe1ci\xf3",ListenNow:"Hallgat\xe1s",LogIn:"Bel\xe9p\xe9s",OrderNow:"Rendel\xe9s",PlayGame:"J\xe1t\xe9k",PlayNow:"Lej\xe1tsz\xe1s",PostJob:"\xc1ll\xe1shirdet\xe9s felad\xe1sa",Register:"Regisztr\xe1ci\xf3",RenewNow:"Meg\xfaj\xedt\xe1s",RentACar:"Aut\xf3b\xe9rl\xe9s",RentNow:"B\xe9rl\xe9s",Reorder:"\xdajrarendel\xe9s",Reserve:"Foglal\xe1s",Sale:"Akci\xf3 megtekint\xe9se",SaveNow:"Megtakar\xedt\xe1s",Schedule:"\xdctemez\xe9s",SeeMenu:"Men\xfc megtekint\xe9se",SeeOffer:"Aj\xe1nlat megtekint\xe9se",SellNow:"Elad\xe1s",ShopNow:"V\xe1s\xe1rl\xe1s most",Showtimes:"M\u0171sorok",SignIn:"Bejelentkez\xe9s",SignUp:"Csatlakoz\xe1s",StartNow:"Kezd\xe9s most",Subscribe:"Feliratkoz\xe1s",SwitchNow:"V\xe1lt\xe1s most",TestDrive:"Tesztvezet\xe9s",TryNow:"Kipr\xf3b\xe1l\xe1s",ViewCars:"Aut\xf3k megtekint\xe9se",ViewPlans:"Csomgaok megtekint\xe9se",VisitStore:"\xc1ruh\xe1z felkeres\xe9se",VoteNow:"Szavaz\xe1s",Watch:"Megtekint\xe9s",WatchMore:"Tov\xe1bbiak megtekint\xe9se",WatchNow:"Megtekint\xe9s most"},Latvian:{ActNow:"R\u012bkojieties t\u016bl\u012bt",ApplyNow:"Lietot tagad",BetNow:"Sol\u012bt t\u016bl\u012bt",BidNow:"Soliet t\u016bl\u012bt",BookACar:"Rezerv\u0113t automa\u0161\u012bnu",BookHotel:"Rezerv\u0113t viesn\u012bcu",BookNow:"Rezerv\u0113t tagad",BuyNow:"Pirkt t\u016bl\u012bt",ChatNow:"T\u0113rz\u0113t tagad",Compare:"Sal\u012bdzin\u0101t",ContactUs:"Sazin\u0101ties ar mums",Coupon:"Sa\u0146emt kuponu",Directions:"Nor\u0101des",Donate:"Ziedot",Download:"Lejupiel\u0101d\u0113t",EmailNow:"Nos\u016bt\u012bt e-pasta zi\u0146ojumu t\u016bl\u012bt",EnrollNow:"Re\u0123istr\u0113ties t\u016bl\u012bt",FileNow:"Iesniegt t\u016bl\u012bt",FindJob:"Atrast darbu",FindStore:"Atrast veikalu",FreePlay:"Bezmaksas sp\u0113le",FreeQuote:"Bezmaksas pied\u0101v\u0101jums",FreeTrial:"Bezmaksas izm\u0113\u0123in\u0101jumversija",GetDeals:"Sa\u0146emt pied\u0101v\u0101jumus",GetOffer:"Sa\u0146emt pied\u0101v\u0101jumu",GetQuote:"Ieg\u016bt pied\u0101v\u0101jumu",JoinNow:"Pievienoties t\u016bl\u012bt",LearnMore:"Uzzin\u0101t vair\u0101k",ListenNow:"Klaus\u012bties t\u016bl\u012bt",LogIn:"Pieteikties",OrderNow:"Pas\u016bt\u012bt t\u016bl\u012bt",PlayGame:"Sp\u0113l\u0113t sp\u0113li",PlayNow:"Atska\u0146ot tagad",PostJob:"Public\u0113t darbu",Register:"Piere\u0123istr\u0113ties",RenewNow:"Atjaunot t\u016bl\u012bt",RentACar:"Nom\u0101t automa\u0161\u012bnu",RentNow:"Nom\u0101t t\u016bl\u012bt",Reorder:"P\u0101rk\u0101rtot",Reserve:"Rezerv\u0113t",Sale:"Skat\u012bt izp\u0101rdo\u0161anas pied\u0101v\u0101jumu",SaveNow:"Ietaup\u012bt t\u016bl\u012bt",Schedule:"Grafiks",SeeMenu:"Skat\u012bt izv\u0113lni",SeeOffer:"Skat\u012bt pied\u0101v\u0101jumu",SellNow:"P\u0101rdot t\u016bl\u012bt",ShopNow:"Iepirkties t\u016bl\u012bt",Showtimes:"Seansi",SignIn:"Pierakst\u012bties",SignUp:"Re\u0123istr\u0113ties",StartNow:"S\u0101kt t\u016bl\u012bt",Subscribe:"Abon\u0113t",SwitchNow:"P\u0101rsl\u0113gt t\u016bl\u012bt",TestDrive:"Izm\u0113\u0123in\u0101juma brauciens",TryNow:"Izm\u0113\u0123in\u0101t t\u016bl\u012bt",ViewCars:"Skat\u012bt automa\u0161\u012bnas",ViewPlans:"Skat\u012bt pl\u0101nus",VisitStore:"Apmekl\u0113t veikalu",VoteNow:"Balsot t\u016bl\u012bt",Watch:"Skat\u012bties",WatchMore:"Skat\u012bties v\u0113l",WatchNow:"Skat\u012bties t\u016bl\u012bt"},Lithuanian:{ActNow:"Veikti dabar",ApplyNow:"Teikti parai\u0161k\u0105 dabar",BetNow:"La\u017eintis dabar",BidNow:"Si\u016blyti kain\u0105 dabar",BookACar:"U\u017esisakyti automobil\u012f",BookHotel:"U\u017esisakyti vie\u0161but\u012f",BookNow:"U\u017esakyti dabar",BuyNow:"\u012esigyti dabar",ChatNow:"Kalb\u0117tis dabar",Compare:"Palyginti",ContactUs:"Kontaktin\u0117 informacija",Coupon:"Gauti kupon\u0105",Directions:"Kryptys",Donate:"Aukoti",Download:"Atsisi\u0173sti",EmailNow:"Si\u0173sti el. pa\u0161tu dabar",EnrollNow:"Registruotis dabar",FileNow:"U\u017epildyti dabar",FindJob:"Rasti darb\u0105",FindStore:"Rasti parduotuv\u0119",FreePlay:"Nemokamas \u017eaidimas",FreeQuote:"Nemokamas pasi\u016blymas",FreeTrial:"Nemokama bandomoji versija",GetDeals:"Puik\u016bs pasi\u016blymai",GetOffer:"Gauti pasi\u016blym\u0105",GetQuote:"Gauti kain\u0105",JoinNow:"Prisijungti dabar",LearnMore:"Su\u017einokite daugiau",ListenNow:"Klausytis dabar",LogIn:"Prisijungimas",OrderNow:"U\u017esisakyti dabar",PlayGame:"\u017daisti \u017eaidim\u0105",PlayNow:"Leisti dabar",PostJob:"Pa\u0161to darbas",Register:"Registruotis",RenewNow:"Atnaujinti dabar",RentACar:"I\u0161sinuomoti automibil\u012f",RentNow:"I\u0161sinuomoti dabar",Reorder:"Pertvarkyti",Reserve:"Rezervuoti",Sale:"Per\u017ei\u016br\u0117ti i\u0161pardavim\u0105",SaveNow:"\u012era\u0161yti dabar",Schedule:"Tvarkara\u0161tis",SeeMenu:"Rodyti meniu",SeeOffer:"Rodyti pasi\u016blym\u0105",SellNow:"Parduoti dabar",ShopNow:"Apsipirkti dabar",Showtimes:"Rodymo laikas",SignIn:"Prisijungti",SignUp:"Prisiregistruoti",StartNow:"Prad\u0117ti dabar",Subscribe:"Prenumeruoti",SwitchNow:"Perjungti dabar",TestDrive:"Bandomoji versija",TryNow:"I\u0161bandyti dabar",ViewCars:"Per\u017ei\u016br\u0117ti automobilius",ViewPlans:"Per\u017ei\u016br\u0117ti planus",VisitStore:"Apsilankyti parduotuv\u0117je",VoteNow:"Balsuoti dabar",Watch:"\u017di\u016br\u0117ti",WatchMore:"\u017di\u016br\u0117ti daugiau",WatchNow:"\u017di\u016br\u0117ti dabar"},Maltese:{ActNow:"\u0126u Azzjoni Issa",ApplyNow:"Applika Issa",BetNow:"Ag\u0127mel Im\u0127atra Issa",BidNow:"Ag\u0127mel Offerta Issa",BookACar:"Ibbukkja Karozza",BookHotel:"Ibbukkja Lukanda",BookNow:"Ibbukkja Issa",BuyNow:"Ixtri Issa",ChatNow:"I\u010b\u010bettja Issa",Compare:"Qabbel",ContactUs:"Ikkuntattjana",Coupon:"Ikseb Kupun",Directions:"Direzzjonijiet",Donate:"Ag\u0127ti donazzjoni",Download:"Ni\u017c\u017cel",EmailNow:"Ibg\u0127at Email Issa",EnrollNow:"Inkiteb Issa",FileNow:"Iffajlja Issa",FindJob:"Sib Impjieg",FindStore:"Sib \u0126anut",FreePlay:"Log\u0127ob b'Xejn",FreeQuote:"Kwotazzjoni b'Xejn",FreeTrial:"Prova b'Xejn",GetDeals:"Ikseb Prezzijiet Vanta\u0121\u0121ju\u017ci",GetOffer:"Ikseb Offerta",GetQuote:"Ikseb Kwota",JoinNow:"Issie\u0127eb issa",LearnMore:"Sir af aktar",ListenNow:"Isma' Issa",LogIn:"Illoggja",OrderNow:"Ordna Issa",PlayGame:"Ilg\u0127ab il-Log\u0127ba",PlayNow:"Doqq issa",PostJob:"Ippowstja l-Impjieg",Register:"Irre\u0121istra",RenewNow:"\u0120edded Issa",RentACar:"Ikri Karozza",RentNow:"Ikri Issa",Reorder:"Er\u0121a' po\u0121\u0121i fl-ordni",Reserve:"Irri\u017cerva",Sale:"Ara l-Iskont",SaveNow:"Issejvja Issa",Schedule:"Skeda",SeeMenu:"Ara l-Menu",SeeOffer:"Ara l-Offerta",SellNow:"Bieg\u0127 Issa",ShopNow:"Ag\u0127mel ix-Xirja Issa",Showtimes:"\u0126inijiet ta' wiri",SignIn:"Id\u0127ol",SignUp:"O\u0127loq akkawnt",StartNow:"Ibda Issa",Subscribe:"Abbona",SwitchNow:"Aqleb Issa",TestDrive:"Test tas-Sewqan",TryNow:"Ipprova Issa",ViewCars:"Ara l-Karozzi",ViewPlans:"Ara l-Pjanijiet",VisitStore:"\u017bur il-\u0126anut",VoteNow:"Ivvota Issa",Watch:"Ara",WatchMore:"Ara Aktar",WatchNow:"Ara Issa"},Romanian:{ActNow:"Ac\u021biona\u021bi acum",ApplyNow:"Aplica\u021bi acum",BetNow:"Paria\u021bi acum",BidNow:"Licita\u021bi acum",BookACar:"Rezerva\u021bi o ma\u0219in\u0103",BookHotel:"Rezerva\u021bi o camer\u0103 de hotel",BookNow:"Rezerva\u021bi acum",BuyNow:"Achizi\u021biona\u021bi acum",ChatNow:"Discuta\u021bi acum",Compare:"Compara\u021bi",ContactUs:"Contacta\u021bi-ne",Coupon:"Ob\u021bine\u021bi un cupon",Directions:"Indica\u021bii",Donate:"Dona\u021bi",Download:"Desc\u0103rca\u021bi",EmailNow:"Trimite\u021bi un e-mail acum",EnrollNow:"\xcenscrie\u021bi-v\u0103 acum",FileNow:"Arhiva\u021bi acum",FindJob:"G\u0103si\u021bi un loc de munc\u0103",FindStore:"G\u0103si\u021bi magazinul",FreePlay:"Reda\u021bi gratis",FreeQuote:"Cota\u021bie gratis",FreeTrial:"\xcencercare gratuit\u0103",GetDeals:"Ob\u021bine\u021bi oferte",GetOffer:"Ob\u021bine\u021bi o ofert\u0103",GetQuote:"Ob\u021bine\u021bi cota\u021bia",JoinNow:"Al\u0103tura\u021bi-v\u0103 acum",LearnMore:"Afla\u021bi mai multe",ListenNow:"Asculta\u021bi acum",LogIn:"Loga\u021bi-v\u0103",OrderNow:"Comanda\u021bi acum",PlayGame:"Juca\u021bi jocuri",PlayNow:"Reda\u021bi acum",PostJob:"Posta\u021bi un loc de munc\u0103",Register:"\xcenregistra\u021bi",RenewNow:"Prelungi\u021bi acum",RentACar:"\xcenchiria\u021bi o ma\u0219in\u0103",RentNow:"\xcenchiria\u021bi acum",Reorder:"Reordona\u021bi",Reserve:"Rezerva\u021bi",Sale:"Vede\u021bi reducerile",SaveNow:"Salva\u021bi acum",Schedule:"Program",SeeMenu:"Vede\u021bi meniul",SeeOffer:"Vede\u021bi oferta",SellNow:"Vinde\u021bi acum",ShopNow:"Cump\u0103ra\u021bi acum",Showtimes:"Programul emisiunilor",SignIn:"Conecta\u021bi-v\u0103",SignUp:"\xcenregistra\u021bi-v\u0103",StartNow:"\xcencepe\u021bi acum",Subscribe:"Abona\u021bi-v\u0103",SwitchNow:"Comuta\u021bi acum",TestDrive:"Test Drive",TryNow:"\xcencerca\u021bi acum",ViewCars:"Vizualiza\u021bi ma\u0219ini",ViewPlans:"Vizualiza\u021bi planuri",VisitStore:"Vizita\u021bi magazinul",VoteNow:"Vota\u021bi acum",Watch:"Viziona\u021bi",WatchMore:"Urm\u0103ri\u021bi mai multe",WatchNow:"Urm\u0103ri\u021bi acum"},Slovak:{ActNow:"Kona\u0165",ApplyNow:"Po\u017eiada\u0165",BetNow:"Stavi\u0165",BidNow:"Pon\xfaknu\u0165",BookACar:"Rezervova\u0165 auto",BookHotel:"Rezervova\u0165 hotel",BookNow:"Rezervova\u0165",BuyNow:"K\xfapi\u0165",ChatNow:"Chatova\u0165",Compare:"Porovna\u0165",ContactUs:"Kontaktujte n\xe1s",Coupon:"Z\xedska\u0165 kup\xf3n",Directions:"Naviga\u010dn\xe9 pokyny",Donate:"Darova\u0165",Download:"Stiahnu\u0165",EmailNow:"Nap\xedsa\u0165 e-mail",EnrollNow:"Zap\xedsa\u0165 sa",FileNow:"Poda\u0165",FindJob:"N\xe1js\u0165 pr\xe1cu",FindStore:"N\xe1js\u0165 obchod",FreePlay:"Hra\u0165 zdarma",FreeQuote:"Bezplatn\xe1 cenov\xe1 ponuka",FreeTrial:"Sk\xfa\u0161obn\xe1 verzia zdarma",GetDeals:"Z\xedska\u0165 ponuky",GetOffer:"Z\xedska\u0165 ponuku",GetQuote:"Z\xedska\u0165 cenov\xfa ponuku",JoinNow:"Zapoji\u0165 sa",LearnMore:"\u010eal\u0161ie inform\xe1cie",ListenNow:"Po\u010d\xfava\u0165",LogIn:"Prihl\xe1si\u0165 sa",OrderNow:"Objedna\u0165",PlayGame:"Hra\u0165",PlayNow:"Prehra\u0165",PostJob:"Zverejni\u0165 pracovn\xe9 miesto",Register:"Registrova\u0165",RenewNow:"Obnovi\u0165",RentACar:"Po\u017ei\u010da\u0165 si auto",RentNow:"Po\u017ei\u010da\u0165 si",Reorder:"Znova objedna\u0165",Reserve:"Predobjedna\u0165",Sale:"Zobrazi\u0165 z\u013eavu",SaveNow:"Ulo\u017ei\u0165",Schedule:"Napl\xe1nova\u0165",SeeMenu:"Zobrazi\u0165 ponuku",SeeOffer:"Zobrazi\u0165 akciu",SellNow:"Preda\u0165",ShopNow:"Nakupova\u0165",Showtimes:"Programy",SignIn:"Prihl\xe1senie",SignUp:"Zaregistrova\u0165 sa",StartNow:"Spusti\u0165",Subscribe:"Prihl\xe1si\u0165 sa na odber",SwitchNow:"Prepn\xfa\u0165",TestDrive:"Testovacia jazda",TryNow:"Vysk\xfa\u0161a\u0165",ViewCars:"Zobrazi\u0165 aut\xe1",ViewPlans:"Zobrazi\u0165 pl\xe1ny",VisitStore:"Nav\u0161t\xedvi\u0165 obchod",VoteNow:"Hlasova\u0165",Watch:"Pozera\u0165",WatchMore:"Pozera\u0165 \u010fal\u0161ie",WatchNow:"Pozera\u0165 teraz"},Slovenian:{ActNow:"Ukrepajte zdaj",ApplyNow:"Prijavite se zdaj",BetNow:"Stavite zdaj",BidNow:"Dajte ponudbo zdaj",BookACar:"Rezervacija avtomobila",BookHotel:"Rezervacija hotela",BookNow:"Rezervirajte zdaj",BuyNow:"Kupite zdaj",ChatNow:"Klepet",Compare:"Primerjaj",ContactUs:"Stik z nami",Coupon:"Pridobi kupon",Directions:"Navodila",Donate:"Doniraj",Download:"Prenos",EmailNow:"Po\u0161ljite po e-po\u0161ti",EnrollNow:"Vpi\u0161ite se zdaj",FileNow:"Po\u0161ljite vlogo zdaj",FindJob:"Iskanje zaposlitve",FindStore:"Iskanje trgovine",FreePlay:"Brezpla\u010dno predvajanje",FreeQuote:"Brezpla\u010dna ponudba",FreeTrial:"Brezpla\u010den preskus",GetDeals:"Pridobi ugodnosti",GetOffer:"Pridobi ponudbo",GetQuote:"Prejem ponudbe",JoinNow:"Vklju\u010dite se zdaj",LearnMore:"Ve\u010d o tem",ListenNow:"Poslu\u0161aj zdaj",LogIn:"Prijava",OrderNow:"Naro\u010dite zdaj",PlayGame:"Igranje igre",PlayNow:"Predvajaj zdaj",PostJob:"Objava delovnega mesta",Register:"Registracija",RenewNow:"Obnovite zdaj",RentACar:"Najem avtomobila",RentNow:"Najemite zdaj",Reorder:"Ponovno naro\u010dilo",Reserve:"Rezerviraj",Sale:"Prikaz popustov",SaveNow:"Prihranite zdaj",Schedule:"Razpored",SeeMenu:"Prika\u017ei meni",SeeOffer:"Ogled ponudbe",SellNow:"Prodajte takoj",ShopNow:"Nakupovanje",Showtimes:"\u010casi predvajanja",SignIn:"Vpis",SignUp:"Ustvarjanje ra\u010duna",StartNow:"Za\u010dni zdaj",Subscribe:"Naro\u010di",SwitchNow:"Preklopi zdaj",TestDrive:"Testna vo\u017enja",TryNow:"Preizkusite zdaj",ViewCars:"Prikaz avtomobilov",ViewPlans:"Prikaz paketov",VisitStore:"Obisk trgovine",VoteNow:"Glasujte zdaj",Watch:"Ogled",WatchMore:"Oglejte si \u0161e ve\u010d",WatchNow:"Oglejte si zdaj"},Albanian:{ActNow:"Vepro tani",ApplyNow:"Apliko tani",BetNow:"Vendos bastin tani",BidNow:"Oferto tani",BookACar:"Rezervo nj\xeb makin\xeb",BookHotel:"Rezervo hotelin",BookNow:"Rezervo tani",BuyNow:"Bli tani",ChatNow:"Bisedo tani",Compare:"Krahaso",ContactUs:"Na kontakto",Coupon:"Merr kuponin",Directions:"Udh\xebzimet",Donate:"Dhuro",Download:"Shkarko",EmailNow:"D\xebrgo email tani",EnrollNow:"Regjistrohu tani",FileNow:"Raporto tani",FindJob:"Gjej pun\xeb",FindStore:"Gjej dyqanin",FreePlay:"Loj\xeb falas",FreeQuote:"Kuot\xeb falas",FreeTrial:"Prov\xeb falas",GetDeals:"Merr oferta",GetOffer:"P\xebrfito ofert\xebn",GetQuote:"Merr kuot\xeb",JoinNow:"Bashkohu tani",LearnMore:"M\xebso m\xeb shum\xeb",ListenNow:"D\xebgjo tani",LogIn:"Hyr",OrderNow:"Porosit tani",PlayGame:"Luaj loj\xebn",PlayNow:"Luaj tani",PostJob:"Posto pun\xebn",Register:"Regjistro",RenewNow:"Rinovo tani",RentACar:"Merr nj\xeb makin\xeb me qira",RentNow:"Merr me qira tani",Reorder:"Rirendit",Reserve:"Rezervo",Sale:"Shiko uljen",SaveNow:"Kurse tani",Schedule:"Planifiko",SeeMenu:"Shiko menyn\xeb",SeeOffer:"Shiko ofert\xebn",SellNow:"Shit tani",ShopNow:"B\xebj blerje tani",Showtimes:"Oraret e shfaqjes",SignIn:"Hyr te",SignUp:"Regjistrohu",StartNow:"Fillo tani",Subscribe:"Abonohu",SwitchNow:"Ndrysho tani",TestDrive:"Drejtim prov\xeb",TryNow:"Provo tani",ViewCars:"Shiko makinat",ViewPlans:"Shiko planet",VisitStore:"Vizito dyqanin",VoteNow:"Voto tani",Watch:"Shiko",WatchMore:"Shiko m\xeb shum\xeb",WatchNow:"Shiko tani"},Bosnian:{ActNow:"Reagiraj sada",ApplyNow:"Prijavi se sada",BetNow:"Po\u0161alji ponudu sada",BidNow:"Licitiraj sada",BookACar:"Rezerviraj automobil",BookHotel:"Rezerviraj hotel",BookNow:"Rezerviraj sada",BuyNow:"Kupi odmah",ChatNow:"Razgovaraj sada",Compare:"Uporedi",ContactUs:"Kontaktirajte nas",Coupon:"Preuzmi kupon",Directions:"Upute za kretanje",Donate:"Doniraj",Download:"Preuzmi",EmailNow:"Po\u0161alji e-poruku sada",EnrollNow:"Upi\u0161i se sada",FileNow:"Podnesi sada",FindJob:"Prona\u0111i posao",FindStore:"Prona\u0111i prodavnicu",FreePlay:"Besplatna reprodukcija",FreeQuote:"Besplatno kotiranje na berzi",FreeTrial:"Besplatna probna verzija",GetDeals:"Preuzmi pogodbe",GetOffer:"Preuzmi ponudu",GetQuote:"Preuzmi kotiranje na berzi",JoinNow:"Pridru\u017ei se sada",LearnMore:"Saznajte vi\u0161e",ListenNow:"Slu\u0161aj sada",LogIn:"Prijavljivanje",OrderNow:"Naru\u010di sada",PlayGame:"Igrajte igru",PlayNow:"Reproduciraj sada",PostJob:"Objavi posao",Register:"Registriraj",RenewNow:"Obnovi sada",RentACar:"Iznajmljivanje automobila",RentNow:"Iznajmi sada",Reorder:"Promijeni redoslijed",Reserve:"Rezerviraj",Sale:"Prika\u017ei rasprodaju",SaveNow:"Sa\u010duvaj sada",Schedule:"Raspored",SeeMenu:"Prika\u017ei meni",SeeOffer:"Prika\u017ei ponudu",SellNow:"Prodaj sada",ShopNow:"Kupi sada",Showtimes:"Vremena prikazivanja",SignIn:"Prijava",SignUp:"Izradite ra\u010dun",StartNow:"Po\u010dinje sada",Subscribe:"Pretplati se",SwitchNow:"Pre\u0111i sada",TestDrive:"Probna vo\u017enja",TryNow:"Probaj sada",ViewCars:"Prikaz vozila",ViewPlans:"Prikaz planova",VisitStore:"Posjeti prodavnicu",VoteNow:"Glasaj sada",Watch:"Gledaj",WatchMore:"Gledaj vi\u0161e",WatchNow:"Gledaj sada"},Icelandic:{ActNow:"Framkv\xe6ma n\xfana",ApplyNow:"S\xe6kja um n\xfana",BetNow:"Ve\xf0ja n\xfana",BidNow:"Gera tilbo\xf0 n\xfana",BookACar:"B\xf3ka b\xedl",BookHotel:"B\xf3ka h\xf3tel",BookNow:"B\xf3ka n\xfana",BuyNow:"Kaupa n\xfana",ChatNow:"Spjalla n\xfana",Compare:"Bera saman",ContactUs:"Hafa samband",Coupon:"F\xe1 afsl\xe1ttarmi\xf0a",Directions:"Lei\xf0s\xf6gn",Donate:"Gefa",Download:"S\xe6kja",EmailNow:"Senda t\xf6lvup\xf3st n\xfana",EnrollNow:"Skr\xe1 sig n\xfana",FileNow:"Skjalvista n\xfana",FindJob:"Finna starf",FindStore:"Finna verslun",FreePlay:"\xd3keypis spilun",FreeQuote:"Tilbo\xf0 a\xf0 kostna\xf0arlausu",FreeTrial:"\xd3keypis reynslut\xedmi",GetDeals:"F\xe1 s\xe9rtilbo\xf0",GetOffer:"F\xe1 tilbo\xf0",GetQuote:"F\xe1 ver\xf0tilbo\xf0",JoinNow:"Sk\xe1\xf0u \xfeig n\xfana",LearnMore:"Frekari uppl\xfdsingar",ListenNow:"Hlusta n\xfana",LogIn:"Skr\xe1 inn",OrderNow:"Panta n\xfana",PlayGame:"Spila leik",PlayNow:"Spila n\xfana",PostJob:"B\xf3ka starf",Register:"Skr\xe1",RenewNow:"Endurn\xfdja n\xfana",RentACar:"Leigja b\xedl",RentNow:"Leigja n\xfana",Reorder:"Endurra\xf0a",Reserve:"Panta",Sale:"Sko\xf0a \xfats\xf6lu",SaveNow:"Vista n\xfana",Schedule:"Dagskr\xe1",SeeMenu:"Sj\xe1 matse\xf0il",SeeOffer:"Sj\xe1 tilbo\xf0",SellNow:"Selja n\xfana",ShopNow:"Versla n\xfana",Showtimes:"S\xfdningart\xedmar",SignIn:"Innskr\xe1ning",SignUp:"Skr\xe1ning",StartNow:"R\xe6sa n\xfana",Subscribe:"Gerast \xe1skrifandi",SwitchNow:"Skipta n\xfana",TestDrive:"Reynsluakstur",TryNow:"Pr\xf3fa n\xfana",ViewCars:"Sko\xf0a b\xedla",ViewPlans:"Sko\xf0a \xe1\xe6tlanir",VisitStore:"Fara \xed verslun",VoteNow:"Kj\xf3sa n\xfana",Watch:"Horfa",WatchMore:"Horfa \xe1 fleira",WatchNow:"Horfa n\xfana"},Macedonian:{ActNow:"\u0414\u0435\u0458\u0441\u0442\u0432\u0443\u0432\u0430\u0458 \u0441\u0435\u0433\u0430",ApplyNow:"\u0410\u043f\u043b\u0438\u0446\u0438\u0440\u0430\u0458 \u0441\u0435\u0433\u0430",BetNow:"\u041e\u0431\u043b\u043e\u0436\u0438 \u0441\u0435 \u0441\u0435\u0433\u0430",BidNow:"\u041b\u0438\u0446\u0438\u0442\u0438\u0440\u0430\u0458 \u0441\u0435\u0433\u0430",BookACar:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0458 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b",BookHotel:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0458 \u0445\u043e\u0442\u0435\u043b",BookNow:"\u0420\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u0430\u0458 \u0441\u0435\u0433\u0430",BuyNow:"\u041a\u0443\u043f\u0438 \u0441\u0435\u0433\u0430",ChatNow:"\u0420\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0430\u0458 \u0441\u0435\u0433\u0430",Compare:"\u0421\u043f\u043e\u0440\u0435\u0434\u0438",ContactUs:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438\u0440\u0430\u0458 \u0441\u043e \u043d\u0430\u0441",Coupon:"\u0414\u043e\u0431\u0438\u0458 \u043a\u0443\u043f\u043e\u043d",Directions:"\u041d\u0430\u0441\u043e\u043a\u0438",Donate:"\u0414\u043e\u043d\u0438\u0440\u0430\u0458",Download:"\u041f\u0440\u0435\u0437\u0435\u043c\u0438",EmailNow:"\u0418\u0441\u043f\u0440\u0430\u0442\u0438 \u0435-\u043f\u043e\u0448\u0442\u0430 \u0441\u0435\u0433\u0430",EnrollNow:"\u041f\u0440\u0438\u0458\u0430\u0432\u0438 \u0441\u0435\u0433\u0430",FileNow:"\u041f\u043e\u0434\u043d\u0435\u0441\u0438 \u0441\u0435\u0433\u0430",FindJob:"\u041d\u0430\u0458\u0434\u0438 \u0440\u0430\u0431\u043e\u0442\u0430",FindStore:"\u041d\u0430\u0458\u0434\u0438 \u043f\u0440\u043e\u0434\u0430\u0432\u043d\u0438\u0446\u0430",FreePlay:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e \u0438\u0433\u0440\u0430\u045a\u0435",FreeQuote:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e \u0434\u0430\u0432\u0430\u045a\u0435 \u0446\u0435\u043d\u0430",FreeTrial:"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u0430 \u043f\u0440\u043e\u0431\u0430",GetDeals:"\u0414\u043e\u0431\u0438\u0458 \u0437\u0434\u0435\u043b\u043a\u0438",GetOffer:"\u0414\u043e\u0431\u0438\u0458 \u043f\u043e\u043d\u0443\u0434\u0430",GetQuote:"\u0414\u043e\u0431\u0438\u0458 \u0446\u0435\u043d\u0430",JoinNow:"\u041f\u0440\u0438\u0434\u0440\u0443\u0436\u0438 \u0441\u0435 \u0441\u0435\u0433\u0430",LearnMore:"\u0414\u043e\u0437\u043d\u0430\u0458\u0442\u0435 \u043f\u043e\u0432\u0435\u045c\u0435",ListenNow:"\u0421\u043b\u0443\u0448\u0430\u0458 \u0441\u0435\u0433\u0430",LogIn:"\u0415\u0432\u0438\u0434\u0435\u043d\u0442\u0438\u0440\u0430\u0458",OrderNow:"\u041d\u0430\u0440\u0430\u0447\u0430\u0458 \u0441\u0435\u0433\u0430",PlayGame:"\u0418\u0433\u0440\u0430\u0458 \u0438\u0433\u0440\u0430",PlayNow:"\u041f\u0443\u0448\u0442\u0438 \u0441\u0435\u0433\u0430",PostJob:"\u041e\u0431\u0458\u0430\u0432\u0438 \u0440\u0430\u0431\u043e\u0442\u043d\u043e \u043c\u0435\u0441\u0442\u043e",Register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0458 \u0441\u0435",RenewNow:"\u041e\u0431\u043d\u043e\u0432\u0438 \u0441\u0435\u0433\u0430",RentACar:"\u0418\u0437\u043d\u0430\u0458\u043c\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b",RentNow:"\u0418\u0437\u043d\u0430\u0458\u043c\u0438 \u0441\u0435\u0433\u0430",Reorder:"\u041f\u0440\u0435\u0443\u0440\u0435\u0434\u0438",Reserve:"\u0420\u0435\u0437\u0435\u0440\u0432\u0430",Sale:"\u0412\u0438\u0434\u0438 \u0440\u0430\u0441\u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430",SaveNow:"\u0417\u0430\u0447\u0443\u0432\u0430\u0458 \u0441\u0435\u0433\u0430",Schedule:"\u0420\u0430\u0441\u043f\u043e\u0440\u0435\u0434",SeeMenu:"\u0412\u0438\u0434\u0438 \u043c\u0435\u043d\u0438",SeeOffer:"\u0412\u0438\u0434\u0438 \u043f\u043e\u043d\u0443\u0434\u0430",SellNow:"\u041f\u0440\u043e\u0434\u0430\u0458 \u0441\u0435\u0433\u0430",ShopNow:"\u041f\u0430\u0437\u0430\u0440\u0443\u0432\u0430\u0458 \u0441\u0435\u0433\u0430",Showtimes:"\u0412\u0440\u0435\u043c\u0438\u045a\u0430 \u043d\u0430 \u043f\u0440\u0438\u043a\u0430\u0436\u0443\u0432\u0430\u045a\u0435",SignIn:"\u041f\u0440\u0438\u0458\u0430\u0432\u0438 \u0441\u0435",SignUp:"\u0417\u0430\u043f\u043e\u0447\u043d\u0438 \u0441\u0435\u0433\u0430",StartNow:"\u0417\u0430\u043f\u043e\u0447\u043d\u0438 \u0441\u0435\u0433\u0430",Subscribe:"\u041f\u0440\u0435\u0442\u043f\u043b\u0430\u0442\u0438 \u0441\u0435",SwitchNow:"\u041f\u0440\u0435\u0444\u0440\u043b\u0438 \u0441\u0435\u0433\u0430",TestDrive:"\u0422\u0435\u0441\u0442 \u0432\u043e\u0437\u0435\u045a\u0435",TryNow:"\u041e\u0431\u0438\u0434\u0438 \u0441\u0435 \u0441\u0435\u0433\u0430",ViewCars:"\u0412\u0438\u0434\u0438 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438",ViewPlans:"\u0412\u0438\u0434\u0438 \u043f\u0430\u043a\u0435\u0442\u0438",VisitStore:"\u041f\u043e\u0441\u0435\u0442\u0438 \u043f\u0440\u043e\u0434\u0430\u0432\u043d\u0438\u0446\u0430",VoteNow:"\u0413\u043b\u0430\u0441\u0430\u0458 \u0441\u0435\u0433\u0430",Watch:"\u0413\u043b\u0435\u0434\u0430\u0458",WatchMore:"\u0413\u043b\u0435\u0434\u0430\u0458 \u043f\u043e\u0432\u0435\u045c\u0435",WatchNow:"\u0413\u043b\u0435\u0434\u0430\u0458 \u0441\u0435\u0433\u0430"},Serbian:{ActNow:"Reaguj odmah",ApplyNow:"Prijavi se odmah",BetNow:"Kladi se odmah",BidNow:"Ponudi odmah",BookACar:"Rezervi\u0161i automobil",BookHotel:"Rezervi\u0161i hotel",BookNow:"Rezervi\u0161i odmah",BuyNow:"Kupi odmah",ChatNow:"\u0106askaj odmah",Compare:"Uporedi",ContactUs:"Kontaktirajte nas",Coupon:"Preuzmi kupon",Directions:"Putokazi",Donate:"Doniraj",Download:"Preuzmi",EmailNow:"Po\u0161alji e-poruku odmah",EnrollNow:"Upi\u0161i se odmah",FileNow:"Podnesi odmah",FindJob:"Prona\u0111i posao",FindStore:"Prona\u0111i prodavnicu",FreePlay:"Besplatna igra",FreeQuote:"Besplatna ponuda",FreeTrial:"Besplatna probna verzija",GetDeals:"Nabavi ponude",GetOffer:"Preuzmi ponudu",GetQuote:"Preuzmi kotiranje na berzi",JoinNow:"Pridru\u017ei se odmah",LearnMore:"Saznajte vi\u0161e",ListenNow:"Slu\u0161aj odmah",LogIn:"Prijavi se",OrderNow:"Poru\u010di odmah",PlayGame:"Igraj igru",PlayNow:"Reprodukuj odmah",PostJob:"Objavi posao",Register:"Registruj",RenewNow:"Obnovi odmah",RentACar:"Iznajmi automobil",RentNow:"Iznajmi odmah",Reorder:"Promeni redosled",Reserve:"Rezervi\u0161i",Sale:"Prika\u017ei prodaju",SaveNow:"Sa\u010duvaj odmah",Schedule:"Raspored",SeeMenu:"Prika\u017ei meni",SeeOffer:"Prika\u017ei ponudu",SellNow:"Prodaj odmah",ShopNow:"Kupujte odmah",Showtimes:"Termini prikazivanja",SignIn:"Prijavljivanje",SignUp:"Upi\u0161i se",StartNow:"Po\u010dni odmah",Subscribe:"Pretplati se",SwitchNow:"Zameni odmah",TestDrive:"Testiraj disk jedinicu",TryNow:"Isprobaj odmah",ViewCars:"Prika\u017ei automobile",ViewPlans:"Prika\u017ei planove",VisitStore:"Poseti prodavnicu",VoteNow:"Glasaj odmah",Watch:"Gledaj",WatchMore:"Gledaj vi\u0161e",WatchNow:"Gledaj odmah"}},d={English:{BuildNow:"Build Now",Dealers:"Dealers",GetDemo:"Get Demo",GetNow:"Get Now",GoToDemo:"Go To Demo",SeeDemo:"See Demo",SeeModels:"See Models",SeeOffers:"See Offers",ViewDemo:"View Demo"},Danish:{BuildNow:"Byg nu",Dealers:"Forhandlere",GetDemo:"F\xe5 demo",GetNow:"F\xe5 nu",GoToDemo:"G\xe5 til demo",SeeDemo:"Se demo",SeeModels:"Se modeller",SeeOffers:"Se tilbud",ViewDemo:"Vis demo"},German:{BuildNow:"Jetzt erstellen",Dealers:"H\xe4ndler",GetDemo:"Demo erhalten",GetNow:"Jetzt erhalten",GoToDemo:"Zur Demo gehen",SeeDemo:"Demo ansehen",SeeModels:"Modelle anzeigen",SeeOffers:"Angebote ansehen",ViewDemo:"Demo anzeigen"},Spanish:{BuildNow:"Compilar ahora",Dealers:"Agentes",GetDemo:"Obtener demo",GetNow:"Obtener ahora",GoToDemo:"Ir a demo",SeeDemo:"Consultar demo",SeeModels:"Ver modelos",SeeOffers:"Ver ofertas",ViewDemo:"Ver demos"},Finnish:{BuildNow:"Luo nyt",Dealers:"Myyj\xe4t",GetDemo:"Hanki demo",GetNow:"Hanki nyt",GoToDemo:"Siirry demoon",SeeDemo:"Katso demo",SeeModels:"Katso mallit",SeeOffers:"Katso tarjoukset",ViewDemo:"N\xe4yt\xe4 demo"},French:{BuildNow:"Cr\xe9er",Dealers:"Revendeurs",GetDemo:"Obtenir la d\xe9mo",GetNow:"Obtenir",GoToDemo:"Aller \xe0 la d\xe9mo",SeeDemo:"Voir la d\xe9mo",SeeModels:"Voir les mod\xe8les",SeeOffers:"Voir les offres",ViewDemo:"Afficher la d\xe9mo"},Italian:{BuildNow:"Crea ora",Dealers:"Concessionari",GetDemo:"Scarica demo",GetNow:"Scarica ora",GoToDemo:"Vai alla demo",SeeDemo:"Guarda demo",SeeModels:"Guarda modelli",SeeOffers:"Guarda offerte",ViewDemo:"Visualizza demo"},Norwegian:{BuildNow:"Bygg n\xe5",Dealers:"Forhandlere",GetDemo:"F\xe5 demo",GetNow:"F\xe5 n\xe5",GoToDemo:"G\xe5 til demo",SeeDemo:"Se demo",SeeModels:"Se modeller",SeeOffers:"Se tilbud",ViewDemo:"Vis demo"},Dutch:{BuildNow:"Nu bouwen",Dealers:"Dealers",GetDemo:"Demo ophalen",GetNow:"Nu ophalen",GoToDemo:"Ga naar demo",SeeDemo:"Demo bekijken",SeeModels:"Bekijk modellen",SeeOffers:"Bekijk aanbied.",ViewDemo:"Demo weergeven"},Portuguese:{BuildNow:"Construir Agora",Dealers:"Concession\xe1rias",GetDemo:"Obter demo",GetNow:"Obter agora",GoToDemo:"Ir para demo",SeeDemo:"Ver demo",SeeModels:"Ver modelos",SeeOffers:"Ver ofertas",ViewDemo:"Exibir demo"},Swedish:{BuildNow:"Bygg nu",Dealers:"Handlare",GetDemo:"H\xe4mta demo",GetNow:"H\xe4mta nu",GoToDemo:"G\xe5 till demo",SeeDemo:"Se demo",SeeModels:"Se modeller",SeeOffers:"Se erbjudanden",ViewDemo:"Visa demo"},TraditionalChinese:{BuildNow:"\u7acb\u5373\u5efa\u7acb",Dealers:"\u7d93\u92b7\u5546",GetDemo:"\u53d6\u5f97\u793a\u7bc4",GetNow:"\u7acb\u5373\u53d6\u5f97",GoToDemo:"\u79fb\u81f3\u793a\u7bc4",SeeDemo:"\u67e5\u770b\u793a\u7bc4",SeeModels:"\u67e5\u770b\u578b\u865f",SeeOffers:"\u67e5\u770b\u512a\u60e0",ViewDemo:"\u6aa2\u8996\u793a\u7bc4"},Polish:{BuildNow:"Buduj teraz",Dealers:"Sprzedawcy",GetDemo:"Pobierz pokaz",GetNow:"Pobierz teraz",GoToDemo:"Id\u017a do pokazu",SeeDemo:"Zobacz pokaz",SeeModels:"Zobacz modele",SeeOffers:"Zobacz oferty",ViewDemo:"Wy\u015bwietl pokaz"},Turkish:{BuildNow:"Hemen Olu\u015ftur",Dealers:"Bayiler",GetDemo:"Demo al",GetNow:"Hemen al",GoToDemo:"Demoya git",SeeDemo:"Demoyu g\xf6r",SeeModels:"Modelleri g\xf6r",SeeOffers:"Teklifleri g\xf6r",ViewDemo:"Demoyu g\xf6r\xfcnt\xfcle"},Greek:{BuildNow:"\u03a7\u03c4\u03af\u03c3\u03c4\u03b5 \u03c4\u03ce\u03c1\u03b1",Dealers:"\u0391\u03bd\u03c4\u03b9\u03c0\u03c1\u03bf\u03c3\u03c9\u03c0\u03b5\u03af\u03b5\u03c2",GetDemo:"\u039b\u03ae\u03c8\u03b7 \u03b5\u03c0\u03af\u03b4\u03b5\u03b9\u03be\u03b7\u03c2",GetNow:"\u039b\u03ae\u03c8\u03b7 \u03c4\u03ce\u03c1\u03b1",GoToDemo:"\u0395\u03c0\u03af\u03b4\u03b5\u03b9\u03be\u03b7",SeeDemo:"\u0395\u03bc\u03c6\u03ac\u03bd. \u03b5\u03c0\u03af\u03b4\u03b5\u03b9\u03be\u03b7\u03c2",SeeModels:"\u0395\u03bc\u03c6\u03ac\u03bd. \u03bc\u03bf\u03bd\u03c4\u03ad\u03bb\u03c9\u03bd",SeeOffers:"\u0395\u03bc\u03c6\u03ac\u03bd. \u03c0\u03c1\u03bf\u03c3\u03c6\u03bf\u03c1\u03ce\u03bd",ViewDemo:"\u03a0\u03c1\u03bf\u03b2. \u03b5\u03c0\u03af\u03b4\u03b5\u03b9\u03be\u03b7\u03c2"},Bulgarian:{BuildNow:"\u0418\u0437\u0433\u0440\u0430\u0434\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",Dealers:"\u0422\u044a\u0440\u0433\u043e\u0432\u0446\u0438",GetDemo:"\u041f\u043e\u043b\u0443\u0447\u0435\u0442\u0435 \u0434\u0435\u043c\u043e",GetNow:"\u041f\u043e\u043b\u0443\u0447\u0435\u0442\u0435 \u0441\u0435\u0433\u0430",GoToDemo:"\u041a\u044a\u043c \u0434\u0435\u043c\u043e",SeeDemo:"\u0412\u0438\u0436\u0442\u0435 \u0434\u0435\u043c\u043e",SeeModels:"\u0412\u0438\u0436\u0442\u0435 \u043c\u043e\u0434\u0435\u043b\u0438",SeeOffers:"\u0412\u0438\u0436\u0442\u0435 \u043e\u0444\u0435\u0440\u0442\u0438",ViewDemo:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u0434\u0435\u043c\u043e"},Croatian:{BuildNow:"Izradi odmah",Dealers:"Ovla\u0161teni distr.",GetDemo:"Dohvati pok. ver",GetNow:"Dohvati odmah",GoToDemo:"Idi na pok. ver.",SeeDemo:"Pogl. pok. ver.",SeeModels:"Pogl. modele",SeeOffers:"Pogl. ponude",ViewDemo:"Prikaz pok. ver."},Czech:{BuildNow:"Sestavit",Dealers:"Deale\u0159i",GetDemo:"Z\xedskat uk\xe1zku",GetNow:"Z\xedskat",GoToDemo:"P\u0159ej\xedt k uk\xe1zce",SeeDemo:"Zobrazit uk\xe1zku",SeeModels:"Zobrazit modely",SeeOffers:"Zobrazit nab\xeddky",ViewDemo:"Zhl\xe9dnout uk\xe1zku"},Estonian:{BuildNow:"Praegune vers.",Dealers:"Edasim\xfc\xfcjad",GetDemo:"Hangi demo",GetNow:"Hangi kohe",GoToDemo:"Mine demosse",SeeDemo:"Vaata demot",SeeModels:"Vaata mudeleid",SeeOffers:"Vaata pakkumisi",ViewDemo:"Demo vaatamine"},Hungarian:{BuildNow:"L\xe9trehoz\xe1s most",Dealers:"Keresked\u0151k",GetDemo:"Dem\xf3 beszerz\xe9se",GetNow:"Beszerz\xe9s most",GoToDemo:"Ugr\xe1s a dem\xf3ra",SeeDemo:"Dem\xf3 megn\xe9z\xe9se",SeeModels:"Modellek megtek.",SeeOffers:"Aj\xe1nl. megtek.",ViewDemo:"Dem\xf3 megtekint."},Latvian:{BuildNow:"Veidot tagad",Dealers:"D\u012bleri",GetDemo:"Ieg\u016bt demo",GetNow:"Ieg\u016bt tagad",GoToDemo:"Doties uz demo",SeeDemo:"Skat\u012bt demo",SeeModels:"Skat\u012bt mode\u013cus",SeeOffers:"Skat\u012bt pied\u0101v\u0101j.",ViewDemo:"Apskat\u012bt demo"},Lithuanian:{BuildNow:"Kurti dabar",Dealers:"Platintojai",GetDemo:"Gauti dem. ver.",GetNow:"Gauti dabar",GoToDemo:"Eiti \u012f dem. ver.",SeeDemo:"\u017dr. dem. ver.",SeeModels:"\u017dr. modelius",SeeOffers:"Per\u017e. pasi\u016blymus",ViewDemo:"Per\u017e. dem. ver."},Maltese:{BuildNow:"Ibni Issa",Dealers:"Negozjanti",GetDemo:"Ikseb Wirja",GetNow:"Ikseb issa",GoToDemo:"Mur g\u0127all-wirja",SeeDemo:"Ara l-wirja",SeeModels:"Ara l-mudelli",SeeOffers:"Ara l-offerti",ViewDemo:"E\u017camina l-wirja"},Romanian:{BuildNow:"Compila\u021bi acum",Dealers:"Furnizori",GetDemo:"Ob\u021bine\u021bi demo",GetNow:"Ob\u021bine\u021bi acum",GoToDemo:"Accesa\u021bi demo",SeeDemo:"Vede\u021bi demo",SeeModels:"Vede\u021bi modele",SeeOffers:"Vede\u021bi oferte",ViewDemo:"Vizualiza\u021bi demo"},Slovak:{BuildNow:"Zostavi\u0165",Dealers:"Predajcovia",GetDemo:"Z\xedska\u0165 uk\xe1\u017eku",GetNow:"Z\xedska\u0165",GoToDemo:"Prejs\u0165 na uk\xe1\u017eku",SeeDemo:"Otvori\u0165 uk\xe1\u017eku",SeeModels:"Zobrazi\u0165 modely",SeeOffers:"Zobrazi\u0165 ponuky",ViewDemo:"Zobrazi\u0165 uk\xe1\u017eku"},Slovenian:{BuildNow:"Zgradi zdaj",Dealers:"Prodajalci",GetDemo:"Prenesi predst.",GetNow:"Prenesi zdaj",GoToDemo:"Pojdi na predst.",SeeDemo:"Ogled predstav.",SeeModels:"Ogled modelov",SeeOffers:"Ogled ponudb",ViewDemo:"Prikaz predstav."},Albanian:{BuildNow:"Krijo tani",Dealers:"Shit\xebsit",GetDemo:"Merr demo",GetNow:"Merr tani",GoToDemo:"Shko te demo",SeeDemo:"Shiko demo",SeeModels:"Shiko modelet",SeeOffers:"Shiko ofertat",ViewDemo:"Shfaq demo"},Bosnian:{BuildNow:"Napravi sada",Dealers:"Prodava\u010di",GetDemo:"Pokazna verzija",GetNow:"Preuzmi sada",GoToDemo:"Idi na pokazno",SeeDemo:"Prika\u017ei pokazno",SeeModels:"Prika\u017ei modele",SeeOffers:"Prika\u017ei ponude",ViewDemo:"Pokazni prikaz"},Icelandic:{BuildNow:"Sm\xed\xf0a n\xfana",Dealers:"S\xf6lua\xf0ilar",GetDemo:"S\xe6kja s\xfdnid\xe6mi",GetNow:"S\xe6kja n\xfana",GoToDemo:"Fara \xed s\xfdnid\xe6mi",SeeDemo:"Sj\xe1 s\xfdnishorn",SeeModels:"Sko\xf0a l\xedk\xf6n",SeeOffers:"Sko\xf0a tilbo\xf0",ViewDemo:"Sj\xe1 s\xfdnid\xe6mi"},Macedonian:{BuildNow:"\u0418\u0437\u0433\u0440\u0430\u0434\u0438 \u0441\u0435\u0433\u0430",Dealers:"\u041f\u0440\u043e\u0434\u0430\u0432\u0430\u0447\u0438",GetDemo:"\u0414\u043e\u0431\u0438\u0458 \u0434\u0435\u043c\u043e",GetNow:"\u0414\u043e\u0431\u0438\u0458 \u0441\u0435\u0433\u0430",GoToDemo:"\u041e\u0434\u0438 \u043d\u0430 \u0434\u0435\u043c\u043e",SeeDemo:"\u0412\u0438\u0434\u0438 \u0434\u0435\u043c\u043e",SeeModels:"\u0412\u0438\u0434\u0438 \u043c\u043e\u0434\u0435\u043b\u0438",SeeOffers:"\u0412\u0438\u0434\u0438 \u043f\u043e\u043d\u0443\u0434\u0438",ViewDemo:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434\u0430\u0458 \u0434\u0435\u043c\u043e"},Serbian:{BuildNow:"Napravi odmah",Dealers:"Prodavci",GetDemo:"Nabavi demo",GetNow:"Nabavi odmah",GoToDemo:"Idi na demo",SeeDemo:"Pogledajte demo",SeeModels:"Prika\u017ei modele",SeeOffers:"Prika\u017ei ponude",ViewDemo:"Prika\u017ei demo"}},a.a.object(a.a.chain(l).reduce(function(e,t){var i=e,n=c[t];return u.IsNewActionAdextensionHeadersEnabled&&(n=Object.assign(n,d[t])),i[t]=n,i},{}).pairs().value())),h={Browse:"LearnMore",VisitSite:"LearnMore",ViewNow:"LearnMore",Explore:"LearnMore",SeeMore:"LearnMore",StartFree:"FreeTrial",NewCars:"ViewCars",UsedCars:"ViewCars",Message:"ContactUs"};function m(e){return a.a.result(h,e,e)}function f(e){if(a.a.isUndefined(e))return"";var t=e.Language,i=m(e.ActionType);return a.a.chain(g).result(t).result(i).value()}function v(e){if(a.a.isUndefined(e))return{};var t=e.Language,i=m(e.reserveActionType),n=a.a.omit(g[t]||{},a.a.keys(h)),r=n[i],o=a.a.invert(a.a.extend({},n));return o[r]=i,a.a.invert(o)}function b(){return a.a.keys(g)}function y(e){if(a.a.isUndefined(e))return"";var t=e.Language;return m(a.a.chain(g).result(t).keys().sortBy().first().value())}},"/UPv":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="form-groups-with-sidebar"'+n.attr("data-properties",e.toString(),!0,!0)+"></div>"}.call(this,"properties"in i?i.properties:"undefined"!==typeof properties?properties:void 0),t}},"/XA/":function(e,t,i){"use strict";t.a={SearchTermGridId:"KeywordsSearchTerm",AuctionInsightsGridId:"tdAuctionInsightsGrid",CampaignTabId:"Campaign",AdGroupTabId:"AdGroup",AdsTabId:"Ads",KeywordsTabId:"Keywords",ProductsGroupId:"ProductGroups",FlattenProductsGroupId:"FlattenAdGroupLevelProductGroups",AudienceTabId:"AudiencesAssociation",AdExtensionsTabId:"AdExtensions",ChangeHistoryTabId:"ChangeHistory",DimensionsTabId:"Bidimensions",AdGroupStatusFilterColumnName:"AdGroupStatus",KeywordNameFilterColumnName:"KeywordName",LocationsTabId:"Locations",DevicesTabId:"Devices",AdScheduleTabId:"AdSchedule",DemographicsTabId:"Demographics",AdDescriptionFilterColumnName:"AdDescription",AdExtensionCampaignAssociationStatus:"AdExtensionCampaignAssociationStatus",AdExtensionAssociationStatus:"AdExtensionAssociationStatus",KeywordMatchTypeColumnName:"MatchType",CampaignEntity:"Campaign",AdGroupEntity:"AdGroup",AdEntity:"Ad",KeywordEntity:"Keyword",SearchTermEntity:"SearchTerm",AuctionInsightEntity:"AuctionInsight",AudiencesAssociationEntity:"AdGroupAudienceAssociation",AccountEdmEntity:"Accounts",AdGroupCriterionEdmEntity:"AdGroupCriterions",CampaignCriterionEdmEntity:"CampaignCriterions",CampaignEdmEntity:"Campaigns",DynamicSearchAdsEdmEntity:"DynamidSearchAds",AdGroupEdmEntity:"AdGroups",AdEdmEntity:"Ads",KeywordEdmEntity:"Keywords",ClickMetricId:1,NoneMetricId:-1}},"/uqL":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l,c){i+='<span class="grid-cell-text">',a&&(i=i+'<div class="base-campaign-name">'+n.escape(null==(t=a)?"":t)+"</div>");var d=c?"true":"false";i=i+"<a"+(n.attr("class",n.classes(["scope-navigator",o],[!1,!0]),!1,!0)+n.attr("href",s,!0,!0)+n.attr("data-campaignid",r,!0,!0)+n.attr("data-skipscopenavigation",d,!0,!0)+n.attr("aria-label",e,!0,!0))+">"+n.escape(null==(t=l)?"":t)+"</a></span>"}.call(this,"ariaLabel"in a?a.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"baseCampaignName"in a?a.baseCampaignName:"undefined"!==typeof baseCampaignName?baseCampaignName:void 0,"campaignId"in a?a.campaignId:"undefined"!==typeof campaignId?campaignId:void 0,"className"in a?a.className:"undefined"!==typeof className?className:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0,"skipScopeNavigation"in a?a.skipScopeNavigation:"undefined"!==typeof skipScopeNavigation?skipScopeNavigation:void 0),i}},"029f":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t=i?t+'<span class="tracking-template__test-button"><input class="testUurl btn btn-default" type="button"'+n.attr("value",e.get("UURLTestTool_Test_Button"),!0,!0)+n.attr("aria-label",e.get("UURLTestTool_Test_Button"),!0,!0)+' data-bind="attr: { disabled: showTesting() }"></span><div class="uurl-test-info__container"></div>':t+'<span class="tracking-template__test-button"><input class="testUurl btn btn-default" type="button"'+n.attr("value",e.get("UURLTestTool_Test_Button"),!0,!0)+n.attr("aria-label",e.get("UURLTestTool_Test_Button"),!0,!0)+' data-bind="attr: { disabled: showTesting() }"></span>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"useDefaultStatusContainer"in i?i.useDefaultStatusContainer:"undefined"!==typeof useDefaultStatusContainer?useDefaultStatusContainer:void 0),t}},"0BNN":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){i=i+'<div class="target-intent-header"><div>'+n.escape(null==(t=e.getString(a.descriptionKey+(r?"_Bid_Only":"")))?"":t)+"</div>",r&&(i=i+"<div>"+(null==(t=e.getString("Audience_Campaign_Target_Setting_Bid_Only_Note"))?"":t)+"</div>"),i+='</div><div class="linked-in-target-search-container"></div><div class="linked-in-target-grid-container"></div><div class="linked-in-excluded-grid-container"></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"i18nKeys"in a?a.i18nKeys:"undefined"!==typeof i18nKeys?i18nKeys:void 0,"showBidOnlyNote"in a?a.showBidOnlyNote:"undefined"!==typeof showBidOnlyNote?showBidOnlyNote:void 0),i}},"0GbV":function(e,t,i){var n,a;n=[i("ERkP"),i("aWzz"),i("faId"),i("UT4o"),i("eHSY"),i("gejd")],void 0===(a=function(e,t,i,n,a,r){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=100)}({10:function(e,t){e.exports=n},100:function(e,t,i){e.exports=i(101)},101:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"VideoControls",{enumerable:!0,get:function(){return n.VideoControls}});var n=i(102)},102:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoControls=void 0;var n=g(i(3)),a=g(i(4)),r=g(i(10)),o=i(7),s=i(103),l=i(104),c=i(105),d=i(106),u=i(107),p=i(108);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){var t=e.children,i=e.width,a=e.classes,o=e.showProgressText,l=e.muteByDefault,g=e.immersive,m=e.iconColor,f=n.default.useRef(r.default.uniqueId("video-control-video-")).current,v=n.default.useRef(r.default.uniqueId("video-control-volume-")).current,b=h(n.default.useState(!1),2),y=b[0],S=b[1],w=h(n.default.useState(null),2),C=w[0],x=w[1],k=h(n.default.useState(!0),2),A=k[0],T=k[1],_=h(n.default.useState(!1),2),E=_[0],I=_[1],O=h(n.default.useState(0),2),P=O[0],M=O[1],j=h(n.default.useState(0),2),L=j[0],D=j[1],R=h(n.default.useState(!0),2),N=R[0],V=R[1],B=h(n.default.useReducer(p.volumeReducer,{currentVolume:l?0:u.DefaultVideoVolume,previousVolume:u.DefaultVideoVolume,muted:l}),2),F=B[0],U=F.currentVolume,G=F.muted,z=B[1],H=C?"".concat((0,d.FormatTime)(P),"/").concat((0,d.FormatTime)(L)):"";n.default.useEffect(function(){var e=document.querySelector("#".concat(f)).querySelector("video");if(null==e)throw new Error("Unable to find video element.");x(e)},[f]),n.default.useEffect(function(){C&&(C.onloadedmetadata=function(e){D(e.target.duration)},C.onplay=function(){T(!1),I(!1)},C.onpause=function(){T(!0)},C.onended=function(){I(!0)},C.ontimeupdate=function(e){M(e.target.currentTime)})},[C]),n.default.useEffect(function(){C&&(C.volume=U)},[U,C]);var W=i||(C?C.style.width||C.clientWidth||C.videoWidth:0),q=n.default.useCallback(function(){z(G?{type:p.VolumeActions.SET_UNMUTED}:{type:p.VolumeActions.SET_MUTED})},[G]),$=n.default.useMemo(function(){return E?"videoReplay":A?"videoPlayBig":"videoPause"},[E,A]),K=!C||C&&g&&!N&&!A,J=(0,c.getIconClass)(m);return n.default.createElement("div",{className:a.root,onMouseEnter:function(){return V(!0)},onMouseLeave:function(){return V(!1)}},n.default.createElement("div",{id:f},t),!K&&n.default.createElement(n.default.Fragment,null,g&&n.default.createElement("div",{className:a.videoControlsShadow,style:{width:W}}),n.default.createElement("div",{className:"".concat(a.container," ").concat(g?a.immersivePosition:""),style:{width:W}},n.default.createElement(s.Icon,{iconName:$,className:J,onClick:function(){return A?C.play():C.pause()}}),o&&n.default.createElement("span",{className:"".concat(a.progressText)},H),n.default.createElement(s.Slider,{className:a.progress,min:0,max:C.duration,value:P,styles:{root:{width:W},thumb:{display:"None"},lineContainer:{borderRadius:0},activeSection:{backgroundColor:"rgb(0, 120, 212)"}},showValue:!1,onChange:function(e){C.currentTime=e,C&&C.paused&&C.play()}}),n.default.createElement(s.Icon,{id:v,className:J,iconName:G?"videoMute":"videoUnmute",onMouseOver:function(){return S(!y)},onFocus:function(){return S(!y)},onClick:q})),n.default.createElement(s.Callout,{className:a.videoVolume,gapSpace:0,target:"#".concat(v),onDismiss:function(){return S(!1)},hidden:!y||G,isBeakVisible:!1,directionalHint:s.DirectionalHint.topCenter},n.default.createElement(s.Slider,{className:a.volumeSlider,min:0,max:100,vertical:!0,defaultValue:100*u.DefaultVideoVolume,onChange:function(e){return z({type:p.VolumeActions.SET_VOLUME,volume:e/100})},showValue:!1}))))}(0,l.registerIcons)({icons:{videoPlayBig:n.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M7.60846 4.61507C7.1087 4.34314 6.5 4.70491 6.5 5.27386V18.7262C6.5 19.2951 7.1087 19.6569 7.60846 19.385L19.97 12.6588C20.4921 12.3747 20.4921 11.6253 19.97 11.3412L7.60846 4.61507ZM5 5.27386C5 3.56701 6.82609 2.4817 8.32538 3.29749L20.687 10.0236C22.2531 10.8758 22.2531 13.1242 20.687 13.9764L8.32538 20.7025C6.82609 21.5183 5 20.433 5 18.7262V5.27386Z"})),videoPause:n.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.99609 4.75C3.99609 3.7835 4.7796 3 5.74609 3H9.24609C10.2126 3 10.9961 3.7835 10.9961 4.75V19.25C10.9961 20.2165 10.2126 21 9.24609 21H5.74609C4.7796 21 3.99609 20.2165 3.99609 19.25V4.75ZM5.74609 4.5C5.60802 4.5 5.49609 4.61193 5.49609 4.75V19.25C5.49609 19.3881 5.60802 19.5 5.74609 19.5H9.24609C9.38416 19.5 9.49609 19.3881 9.49609 19.25V4.75C9.49609 4.61193 9.38416 4.5 9.24609 4.5H5.74609ZM12.9961 4.75C12.9961 3.7835 13.7796 3 14.7461 3H18.2461C19.2126 3 19.9961 3.7835 19.9961 4.75V19.25C19.9961 20.2165 19.2126 21 18.2461 21H14.7461C13.7796 21 12.9961 20.2165 12.9961 19.25V4.75ZM14.7461 4.5C14.608 4.5 14.4961 4.61193 14.4961 4.75V19.25C14.4961 19.3881 14.608 19.5 14.7461 19.5H18.2461C18.3842 19.5 18.4961 19.3881 18.4961 19.25V4.75C18.4961 4.61193 18.3842 4.5 18.2461 4.5H14.7461Z"})),videoReplay:n.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M12 4.5C16.1421 4.5 19.5 7.85786 19.5 12C19.5 16.1421 16.1421 19.5 12 19.5C7.85786 19.5 4.5 16.1421 4.5 12C4.5 11.6236 4.52772 11.2538 4.58123 10.8923C4.64845 10.4382 4.31609 10 3.85708 10C3.48623 10 3.161 10.2562 3.10471 10.6228C3.03576 11.0718 3 11.5317 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.69494 3 7.59227 3.86656 6 5.29168V4.25C6 3.83579 5.66421 3.5 5.25 3.5C4.83579 3.5 4.5 3.83579 4.5 4.25V7.25C4.5 7.66421 4.83579 8 5.25 8H8.25C8.66421 8 9 7.66421 9 7.25C9 6.83579 8.66421 6.5 8.25 6.5H6.90093C8.23907 5.25883 10.0309 4.5 12 4.5Z"})),videoMute:n.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.21968 2.21966C2.51257 1.92677 2.98745 1.92678 3.28034 2.21968L21.7801 20.7198C22.073 21.0127 22.073 21.4876 21.7801 21.7805C21.4872 22.0734 21.0123 22.0734 20.7194 21.7805L15 16.0609V19.7456C15 20.8242 13.7255 21.3965 12.9194 20.6797L8.42793 16.686C8.29063 16.5639 8.11329 16.4965 7.92956 16.4965H4.25C3.00736 16.4965 2 15.4891 2 14.2465V9.74856C2 8.50592 3.00736 7.49856 4.25 7.49856H6.43782L2.21966 3.28032C1.92677 2.98743 1.92678 2.51255 2.21968 2.21966ZM13.5 19.1888V14.5609L7.93777 8.99855L7.92961 8.99856H4.25C3.83579 8.99856 3.5 9.33435 3.5 9.74856V14.2465C3.5 14.6607 3.83579 14.9965 4.25 14.9965H7.92956C8.48074 14.9965 9.01275 15.1988 9.42465 15.565L13.5 19.1888ZM13.4995 10.3177V4.8063L10.582 7.40015L9.51953 6.33766L12.919 3.31533C13.725 2.59866 14.9995 3.17089 14.9995 4.24951V11.8177L13.4995 10.3177ZM17.1412 13.9588L18.2792 15.0969C18.741 14.1624 19.0002 13.1103 19.0002 11.9996C19.0002 10.7964 18.696 9.66203 18.1598 8.67142C17.9626 8.30715 17.5074 8.17171 17.1432 8.36891C16.7789 8.5661 16.6434 9.02125 16.8406 9.38551C17.2611 10.1623 17.5002 11.0519 17.5002 11.9996C17.5002 12.6906 17.3731 13.3508 17.1412 13.9588ZM20.4811 17.2999L19.3877 16.2065C20.0954 14.9664 20.4996 13.5312 20.4996 12.0001C20.4996 10.1063 19.8811 8.35899 18.8349 6.94644C18.5884 6.61358 18.6583 6.14389 18.9912 5.89736C19.324 5.65082 19.7937 5.7208 20.0403 6.05365C21.2713 7.71573 21.9996 9.77393 21.9996 12.0001C21.9996 13.9458 21.4433 15.7632 20.4811 17.2999Z"})),videoUnmute:n.default.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"black",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 2.25049C13 1.17187 11.7255 0.599636 10.9195 1.31632L6.42794 5.30958C6.29065 5.43165 6.11333 5.49908 5.92961 5.49908H2.25C1.00736 5.49908 0 6.50644 0 7.74908V12.247C0 13.4896 1.00736 14.497 2.25 14.497H5.92956C6.11329 14.497 6.29063 14.5644 6.42793 14.6865L10.9194 18.6802C11.7255 19.397 13 18.8248 13 17.7461V2.25049ZM7.4246 6.4306L11.5 2.80728V17.1893L7.42465 13.5656C7.01275 13.1993 6.48074 12.997 5.92956 12.997H2.25C1.83579 12.997 1.5 12.6612 1.5 12.247V7.74908C1.5 7.33486 1.83579 6.99908 2.25 6.99908H5.92961C6.48075 6.99908 7.01272 6.79679 7.4246 6.4306ZM16.9912 3.89736C17.324 3.65082 17.7937 3.7208 18.0403 4.05365C19.2713 5.71573 19.9996 7.77393 19.9996 10C19.9996 12.2261 19.2713 14.2843 18.0403 15.9464C17.7937 16.2793 17.324 16.3492 16.9912 16.1027C16.6583 15.8562 16.5884 15.3865 16.8349 15.0536C17.8811 13.6411 18.4996 11.8939 18.4996 10C18.4996 8.10623 17.8811 6.35899 16.8349 4.94644C16.5884 4.61359 16.6583 4.1439 16.9912 3.89736ZM16.1598 6.67142C15.9626 6.30715 15.5074 6.17172 15.1432 6.36891C14.7789 6.5661 14.6434 7.02125 14.8406 7.38551C15.2611 8.16228 15.5002 9.05188 15.5002 9.99958C15.5002 10.9473 15.2611 11.8369 14.8406 12.6137C14.6434 12.9779 14.7789 13.4331 15.1432 13.6303C15.5074 13.8275 15.9626 13.692 16.1598 13.3278C16.696 12.3372 17.0002 11.2028 17.0002 9.99958C17.0002 8.79638 16.696 7.66203 16.1598 6.67142Z"}))}}),m.propTypes={children:a.default.element.isRequired,width:a.default.number,classes:a.default.shape({root:a.default.string,container:a.default.string,progress:a.default.string,progressText:a.default.string,videoVolume:a.default.string,volumeIcon:a.default.string,volumeSlider:a.default.string}),showProgressText:a.default.bool,muteByDefault:a.default.bool,immersive:a.default.bool,iconColor:a.default.string},m.defaultProps={width:0,classes:{},showProgressText:!0,muteByDefault:!1,immersive:!1,iconColor:"white"};var f=(0,o.withDefaultStyles)(m,c.getControlStyles);t.VideoControls=f},103:function(e,t){e.exports=a},104:function(e,t){e.exports=r},105:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconClass=t.defaultIconClass=t.getControlStyles=void 0;var n=i(104);t.getControlStyles=function(){return{root:{position:"relative"},container:{display:"flex",alignItems:"center","& i":{fontSize:20,cursor:"pointer"}},progress:{},progressText:{fontFamily:"Segoe UI",marginLeft:10,fontSize:12},videoVolume:{boxShadow:"none","& .ms-Callout-main":{backgroundColor:"rgba(0, 0, 0, 0)"}},volumeSlider:{height:120},videoControlsShadow:{background:"linear-gradient(180deg, rgba(34, 34, 34, 0) 0%, #111111 100%);",position:"absolute",bottom:0,height:50,pointerEvents:"none",transition:"opacity 0.3s"},immersivePosition:{position:"absolute",bottom:0}}};var a=(0,n.mergeStyles)({display:"flex"});t.defaultIconClass=a;t.getIconClass=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white";return(0,n.mergeStyles)(a,{selectors:{svg:{fill:e}}})}},106:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormatTime=function(e){var t=parseFloat(e),i=Math.floor(t/60),n=t-60*i;i<10&&(i="0".concat(i));return"".concat(i,":").concat(n<10?"0":"").concat(Math.floor(n))}},107:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultVideoVolume=void 0;t.DefaultVideoVolume=.3},108:function(e,t,i){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){a(e,t,i[t])})}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.volumeReducer=t.VolumeActions=void 0;var r={SET_VOLUME:"SET_VOLUME",SET_MUTED:"SET_MUTED",SET_UNMUTED:"SET_UNMUTED"};t.VolumeActions=r;t.volumeReducer=function(e,t){switch(t.type){case r.SET_VOLUME:return n({},e,{currentVolume:t.volume});case r.SET_MUTED:return{previousVolume:e.currentVolume,currentVolume:0,muted:!0};case r.SET_UNMUTED:return n({},e,{currentVolume:e.previousVolume,muted:!1});default:return e}}},3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},7:function(e,t){e.exports=i}})}.apply(t,n))||(e.exports=a)},"0LCZ":function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("029f"),i("qG7Q"),i("Oro1"),i("Vb2v"),i("hmuE"),i("xlyl"),i("Nrh9"),i("uUvm"),i("AQBV"),i("Td3X")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u,p,g){"use strict";var h=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url"),m=["UURLTestTool_Result_Found","UURLTestTool_Result_NotFound","UURLTestTool_Result_Mismatch","UURLTestTool_Result_Unreachable","UURLTestTool_Result_Unknown","UURLTestTool_Result_UserInputError","UURLTestTool_Result_NoEligibleUrlsFound","UURLTestTool_Result_TestComplete"],f=["UURLTestTool_TrackingCall_Successful","UURLTestTool_TrackingCall_Unsuccessful"],v=["Unkown","Entity_Account","Entity_Campaign","Entity_Adgroup","Entity_Ads","Entity_Keywords","Entity_SitelinkExtensions"],b="ptLandingUrl",y="ptTrackingUrl",S="sqServingUrl";function w(e){return 0===e?null:h.getString("UURLTestTool_From",h.get(v[e]))}function C(e){if(t.isUndefined(e))return e;var i=t.union(t.map(e.CustomParameters,function(e){return{Key:"{_"+e.Key+"}",Value:e.Value,Level:w(e.Level)}}),t.map(e.ValueTrackParameters,function(e){return{Key:"{"+e.Key+"}",Value:e.Value,Level:null}}),t.map(e.IndicateParameters,function(e){return{Key:e.Key,Value:e.Value,Level:null}}));e.LpUrl&&(i=t.union([{Key:"{"+e.LpUrl.Key+"}",Value:e.LpUrl.Value,Level:w(e.LpUrl.Level)}],i));var n={resultType:e.Result,resultString:h.get(m[e.Result]),servingUrl:e.ServingUrl,landingUrl:e.LandingUrl,attributes:i};if(e.TrackingTemplate){var a={Value:e.TrackingTemplate.Value,Level:w(e.TrackingTemplate.Level)};n=t.extend(n,{trackingTemplate:a})}if(e.FinalUrl){var r={Value:e.FinalUrl.Value,Level:w(e.FinalUrl.Level)};n=t.extend(n,{finalUrl:r})}if(e.FinalUrlSuffix){var o={Value:e.FinalUrlSuffix.Value,Level:w(e.FinalUrlSuffix.Level)};n=t.extend(n,{finalUrlSuffix:o})}if(e.ParallelTrackingUrl){var s={Value:e.ParallelTrackingUrl.Value,Level:w(e.ParallelTrackingUrl.Level)};n=t.extend(n,{trackingUrl:s})}return t.isNull(e.TrackingCallResult)||t.isUndefined(e.TrackingCallResult)||(n=t.extend(n,{trackingResultType:e.TrackingCallResult,trackingResultString:h.get(f[e.TrackingCallResult])})),n}var x=null;return i.View.extend({initialize:function(e){this.options=e||{},t.defaults(this.options,{template:a,location:"topRight",position:o.PositionAttribute.fixed}),this.ko_model=new r},events:{"click .testUurl":"testUurl","click .resultDetails":"showResultV2","click .resultString":"showResultDetailsForVNext","mouseover .resultString":"showResultDetailsForVNext"},attributes:function(){return{class:this.options.urlTestToolStatusContainer?"uurl-test-tool-inline":""}},render:function(){var t=!this.options.urlTestToolStatusContainer,i=this,r=".popup--uurl-v2-"+this.cid;this.$el.html(e(a({i18n:h,useDefaultStatusContainer:t}))),n.cleanNode(e(this.$("input.testUurl"))[0]),n.applyBindings(this.ko_model,e(this.$("input.testUurl"))[0]);var o=this.options.urlTestToolStatusContainer||this.$(".uurl-test-info__container");return o.empty().append(e(s({i18n:h,isForVNext:!0}))),n.cleanNode(o[0]),n.applyBindings(this.ko_model,o[0]),t||(o.on("click",".resultDetails",this.showResultV2.bind(this)),o.on("mouseover",".resultString",this.showResultDetailsForVNext.bind(this))),e("body").off("click",".popup--uurl-v2").on("click",".popup--uurl-v2",function(t){var n=e(t.target);n.hasClass("HelpTopic")||t.stopPropagation(),0===n.closest(".popup--uurl-detail").length&&i.dismissDetailPopup()}),e("body").off("click",'.popup--uurl-v2 [data-toggle="collapse"]').on("click",'.popup--uurl-v2 [data-toggle="collapse"]',function(t){var i=e(t.target),n=i.parent(i.attr("data-target")),a=n.hasClass("in"),r=e('[aria-expanded="'+!a+'"]'+i.attr("data-target"));n.toggleClass("in").attr("aria-expanded",!a).height(a?"0":"auto"),r.toggleClass("in").attr("aria-expanded",a).height(a?"auto":"0")}),e("body").off("click",r+" .ptLandingUrl").on("click",r+" .ptLandingUrl",function(e){i.showResultUrlDetailV2(e,b),e.stopPropagation()}),e("body").off("click",r+" .ptTrackingUrl").on("click",r+" .ptTrackingUrl",function(e){i.showResultUrlDetailV2(e,y),e.stopPropagation()}),e("body").off("click",r+" .sqServingUrl").on("click",r+" .sqServingUrl",function(e){i.showResultUrlDetailV2(e,S),e.stopPropagation()}),this},remove:function(){return n.cleanNode(this.el),this},fetchAccountFinalUrlSuffix:function(){var e="Customers("+window.App.state.get("advertisercustomer_id")+")/Accounts("+window.App.state.get("account_id")+")?$select=FinalUrlSuffix";return g.get(e).then(function(e){return e.FinalUrlSuffix})},testUurl:function(){var e=this;this.fetchAccountFinalUrlSuffix().then(function(i){this.ko_model.showTesting(!0),this.ko_model.resultString(null),this.ko_model.resultType(null),this.trigger("testUurl",e.handleTestResultList,t.extend(e,{isParallelTracking:!0,accountFinalUrlSuffix:i}))}.bind(this))},getTestStatus:function(){return{resultType:this.ko_model.resultType(),resultString:this.ko_model.resultString(),showTesting:this.ko_model.showTesting()}},handleTestResultList:function(e){if(this.ko_model.showTesting(!1),e){if(e.Result&&e.Errors&&e.Errors.length)return this.ko_model.resultType(e.Result),void this.ko_model.resultString(h.get(m[e.Result]));if(t.isArray(e)&&e.length){this.urlTestResultList=[],this.isMultipleResult=e.isMultipleResult,this.resultListTrackingTemplate=e.resultListTrackingTemplate;var i=this;t.each(e,function(n){if(n){var a={sequentialTrackingResult:C(t.extend({},{Result:e.Result},n.SequentialTrackingResult)),parallelTrackingResult:n.ParallelTrackingResult?C(t.extend({},{Result:e.Result},n.ParallelTrackingResult)):null,campaignName:n.CampaignName,adGroupName:n.AdGroupName};i.ko_model.resultType()||i.calculateResultType(a),i.urlTestResultList.push(a)}}),7===e.Result&&this.ko_model.resultString(h.getString(m[e.Result]))}}},calculateResultType:function(e){var t=e.sequentialTrackingResult,i=e.parallelTrackingResult,n=!!i;n&&0!==i.resultType?(this.ko_model.resultType(i.resultType),this.ko_model.resultString(i.resultString)):n&&0!==i.trackingResultType?(this.ko_model.resultType(i.trackingResultType),this.ko_model.resultString(i.trackingResultString)):(this.ko_model.resultType(t.resultType),this.ko_model.resultString(t.resultString))},createResultItemV2:function(e){var t=e.sequentialTrackingResult||{},i=e.parallelTrackingResult||{};return{sq:{resultType:t.resultType,resultString:t.resultString,landingUrl:t.landingUrl,servingUrl:t.servingUrl,finalUrl:t.finalUrl,attributes:t.attributes,trackingTemplate:t.trackingTemplate,finalUrlSuffix:t.finalUrlSuffix},pt:{resultType:i.resultType,resultString:i.resultString,landingUrl:i.landingUrl,servingUrl:i.servingUrl,finalUrl:i.finalUrl,attributes:i.attributes,trackingTemplate:i.trackingTemplate,finalUrlSuffix:i.finalUrlSuffix,trackingUrl:i.trackingUrl,trackingResultType:i.trackingResultType,trackingResultString:i.trackingResultString},campaignName:e.campaignName,adGroupName:e.adGroupName||h.getString("UURLTestTool_NA")}},showResultV2:function(e){this.isMultipleResult?this.showResultListV2(e):this.showResultSingleV2(e)},showResultSingleV2:function(i){if(this.urlTestResultList&&this.urlTestResultList.length){var n=this.createResultItemV2(this.urlTestResultList[0]);o.show(t.extend({},{positioningMethod:"fixed",positioningOptions:{location:this.options.location,positionAttribute:this.options.position},classes:["popup--uurl-v2","popup--uurl-v2-"+this.cid],template:function(){return c({sq:n.sq,pt:n.pt,i18n:h})}},{container:e("body"),anchor:e(i.target)})),this.options.isForVNext||t.defer(function(){var t=e(".popup--uurl-v2");t.css("marginTop",t[0].offsetHeight/-2+"px")})}},showResultListV2:function(i){var n=[];t.each(this.urlTestResultList,function(e){n.push(this.createResultItemV2(e))}.bind(this)),o.show(t.extend({},{positioningMethod:"fixed",positioningOptions:{location:this.options.location,positionAttribute:this.options.position},classes:["popup--uurl-v2","popup--uurl-v2-"+this.cid],template:function(){return u({resultList:n,resultListTrackingTemplate:this.resultListTrackingTemplate,i18n:h})}.bind(this)},{container:e("body"),anchor:e(i.target)})),this.options.isForVNext||t.defer(function(){var t=e(".popup--uurl-v2");t.css("marginTop",t[0].offsetHeight/-2+"px")})},showResultDetailsForVNext:function(e){this.options.isForVNext&&this.showResultV2(e)},showResultUrlDetailV2:function(i,n){var a=e(i.target).data("index")||0,r=this.urlTestResultList[a];if(r){var s=r.sequentialTrackingResult,c=r.parallelTrackingResult,d=n===S?s:c,u=d.finalUrl,p=d.trackingTemplate,g=d.finalUrlSuffix,m=d.attributes;this.dismissDetailPopup(),(x=new o.Popup).show(t.extend({},{positioningMethod:"fixed",positioningOptions:{location:this.calculateDetailPopupLocation(e(i.target))},classes:["popup--uurl-detail"],template:function(){return l({finalUrl:u,attributes:m,trackingTemplate:p,finalUrlSuffix:g,i18n:h,index:0})}},{container:e(".popup.popup--uurl-v2"),anchor:e(i.target)}))}},calculateDetailPopupLocation:function(t){var i=e(window).height(),n=t[0].getBoundingClientRect().top;return i-t.outerHeight()-n>400?"buttomRight":"topRight"},dismissDetailPopup:function(){x&&(x.dismiss(),x=null)}})}.apply(t,n))||(e.exports=a)},"0XzA":function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("7XbR"),i("5iHu"),i("/xyZ"),i("bw/x"),i("g0eY"),i("abmd"),i("DXRr"),i("AQBV"),i("gWJr"),i("1EwD"),i("7Mx6"),i("kRy6"),i("d3dF"),i("ITOZ")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u,p,g,h,m){"use strict";var f=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextensions"),v=g.default,b=c.get("Permissions")||{},y=c.get("odata.url")+c.get("odata.path"),S={odataRootUrl:c.get("CampaignAzureDomain"),odataPath:y,odataToken:c.get("odata.token")},w={i18n:f,pageSize:10,i18nKeys:{search_for:"Searchbox_SearchFor",filter_watermark:"AdExtensions_Search",save_btn:"Button_Save",cancel_btn:"Button_Cancel",subtitle:[],multiSelectInlineAlert:"AdExtensions_MultiSelect_Max_Select_Notification",failedAssociationsLabel:"AdExtensions_FailedAssociationsLabel",successfulAssociationsLabel:"AdExtensions_SuccessfulAssociationsLabel"},template:{layout:o,preview:"#:data.name#",rowTemplate:function(){return"data.name"}},maxSelectedItemsCount:-1,hasSubTitle:!0,showErrorsInline:!1,popupFront:"",extensionType:"",showEditor:!0,isMultiSelect:!1,entityType:"campaign",showSaveBar:!0,instrumentation:{startScenario:e.noop,startActivity:e.noop,logMessage:e.noop,endActivity:e.noop,asLoggingStart:e.constant(e.noop)},instrumentConstants:{LOGCATEGORY:{},LOGLEVEL:{}},instrumentationSettings:{ACTIVITYNAME:{},SCENARIONAME:{}},disableDelete:!1};return t.View.extend({events:{"click .associations .btn-save":"_saveClickHandler","click .associations .btn-cancel":"_cancelClickHandler","click .associations .btn-create":"_createClickHandler"},idField:"Id",initialize:function(t){return t&&t.perfMarker&&(this.showExtensionMarker=t.perfMarker.createChild("Show_Extension_"+t.extensionType),this.showExtensionMarker.willInit()),this.options=e.defaults({},t,w),this.i18nKeys=e.defaults({},this.options.i18nKeys,w.i18nKeys),this.template=e.defaults({},this.options.template,w.template),this.idField=this.options.idField||this.idField,this.showErrorsInline=this.options.showErrorsInline,this.orderBy=this.options.orderBy,this.i18nKeys.subtitle=e.isArray(this.i18nKeys.subtitle)?this.i18nKeys.subtitle:[this.i18nKeys.subtitle],this.options.data.association.createRequestFactory(this.options.entityType),this.itemActions=this.itemActions||{},this.itemActions.source=e.defaults(this.itemActions.source||{},{edit:{caption:"",callback:e.bind(this._editExtension,this),class:"glyphicon glyphicon-pencil",label:f.get("Edit")},delete:{caption:"",callback:e.bind(this._deleteExtension,this),class:"glyphicon glyphicon-remove",label:f.get("Remove")}}),this.itemActions.selected=e.defaults(this.itemActions.selected||{},{edit:{caption:"",callback:e.bind(this._editExtension,this),class:"glyphicon glyphicon-pencil",label:f.get("Edit")},delete:{caption:"",callback:e.bind(this._deleteExtension,this),class:"glyphicon glyphicon-remove",label:f.get("Remove")}}),this.options.disableDelete&&(this.itemActions.source.delete&&delete this.itemActions.source.delete,this.itemActions.selected.delete&&delete this.itemActions.selected.delete),this.subtitleArgs={maxLimit:t.maxSelectedItemsCount,entityType:"campaign"===t.entityType?f.get("AdExtension_EntityName_Campaign").toLowerCase():f.get("AdExtension_EntityName_AdGroup").toLowerCase()},this.ko_model=new r(e.extend(e.pick(this.options,"pageSize","filterField","entityType","processItem","headerText","showEditor"),{allExtensions:e.bind(this._loadSource,this),itemTemplateType:this.template.previewTemplateType,itemTemplate:this.template.preview,itemActions:this.itemActions,idField:this.idField,campaignId:(this.options.isStringFormatId?this.options.campaignId:Number(this.options.campaignId))||0,adgroupId:(this.options.isStringFormatId?this.options.adgroupId:Number(this.options.adgroupId))||0,campaignName:this.options.campaignName||"",adGroupName:this.options.adGroupName||"",getMaximumSelectionAlertString:this._getMaximumSelectionAlertString.bind(this)})),this.ko_model.isAssociationChanged.subscribe(function(e){this.trigger("selected-changed",e)}.bind(this)),this.debouncedUpdateMultiAssetWarningMessage=e.debounce(this._updateMultiAssetWarningMessage,100,!1),this.ko_model.selectedExtensions.subscribe(function(){"ImageExtension"===this.options.extensionType&&b.IsImageAdExtensionV2Enabled&&this.debouncedUpdateMultiAssetWarningMessage()}.bind(this)),this.on("associate:extensions",this._saveClickHandler),this.findScope=this.options.findScope||this.defaultFindScope,this},logActivityToSubstrate:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,"adextension associations editor")},defaultFindScope:function(e){return function(t){return t.campaignId===e.CampaignId&&t.adGroupId===e.AdGroupId}},render:function(){return this.showExtensionMarker&&this.showExtensionMarker.willRender(),this.$el.html(this.template.layout({i18n:this.options.i18n,i18nKeys:this.i18nKeys,maxSelectedItemsCount:this.options.maxSelectedItemsCount,maxSelectedItems:this.options.maxSelectedItemsCount>0?f.get("AdExtensions_Max_Select_Count_New",{count:this.options.maxSelectedItemsCount}):"",hasSubTitle:this.options.hasSubTitle,showErrorsInline:this.showErrorsInline,subtitleArgs:this.subtitleArgs,showSaveBar:this.options.showSaveBar})),i.applyBindings(this.ko_model,this.$el[0]),this.on("scope-changed",this.onScopeChange.bind(this)),this.on("scopes-changed",this.onScopesChange.bind(this)),this.options.isMultiSelect&&this.options.showSelector||this._selectScope(this.ko_model.scope()),this.options.adExtensionId&&this._editExtensionById(this.options.adExtensionId),this},onScopeChange:function(e){this.ko_model.scope(e),this.ko_model.updateInlineAlertString(),this._selectScope(e)},onScopesChange:function(e){this.ko_model.scopes(e),this.ko_model.clearOriginalIds()},remove:function(){return this.undelegateEvents(),this.$el.empty(),i.cleanNode(this.$el[0]),this.editor&&this.editor.remove(),this},_updateMultiAssetWarningMessage:function(){var e=this.ko_model.selectedExtensions();h.default.isAssociationsQualifyForMultiAsset(e)?this.ko_model.shouldShowMultiAssetWarning(!1):this.ko_model.shouldShowMultiAssetWarning(!0)},_getMaximumSelectionAlertString:function(t,i){var n=i||t;if(this.options.maxSelectedItemsCount>0){if(this.options.isMultiSelect)return f.get(this.i18nKeys.multiSelectInlineAlert,{count:this.options.maxSelectedItemsCount});if(this.i18nKeys.inlineAlert)return e.isString(n)&&n.length>0?f.get(this.i18nKeys.inlineAlert,{name:n,count:this.options.maxSelectedItemsCount}):f.get(this.i18nKeys.multiSelectInlineAlert,{count:this.options.maxSelectedItemsCount})}return""},_loadSource:function(e,t){this.showExtensionMarker&&this.showExtensionMarker.willFetchData(),this._clearErrors();var i={where:{name:{contains:e.filterText}},skip:e.skip,limit:e.take};this.orderBy&&(i.orderBy=this.orderBy),this.options.data.extension.findAll(i).then(function(e){t(null,e),this.showExtensionMarker&&this.showExtensionMarker.done()}.bind(this)).finally(u(this.$el)).catch(function(e){this._handleErrors(e),t(e)}.bind(this))},_selectScope:function(e){this._clearErrors(),(e.campaignId||e.adGroupId||"account"===this.options.entityType)&&(this.ko_model.setLoadedSelection([]),this.options.data.association.findAll({where:e,associationType:this.options.associationType}).then(function(e){this.ko_model.setLoadedSelection(e)}.bind(this)).finally(u(this.$el)).catch(function(e){this._handleErrors(e)}.bind(this)))},_deleteExtension:function(e){d.confirm(f.get(this.i18nKeys.delete_confirm))&&(this._clearErrors(),this.options.data.extension.destroy(e[this.idField]).finally(u(this.$el)).then(function(){this.ko_model.handleDelete(e),this.trigger("deleted",e),""!==this.options.extensionType&&this.options.instrumentation.logMessage([this.options.instrumentConstants.LOGCATEGORY.TRACE],this.options.instrumentConstants.LOGLEVEL.INFO,"delete"+this.options.extensionType,"1")}.bind(this)).catch(function(e){this._handleErrors(e)}.bind(this)),this.trigger("extensions:changed"))},_showInfoExtension:function(e){},_editExtensionById:function(e){this.options.data.extension.find(e).finally(u(this.$el)).then(this._editExtension.bind(this)).catch(this._handleErrors.bind(this))},_handleCreatedExtension:function(e){this.ko_model.handleCreate(e),this.editor.remove(),this.trigger("created",e),this.trigger("close:extensionEditor"),""!==this.options.extensionType&&this.options.instrumentation.logMessage([this.options.instrumentConstants.LOGCATEGORY.TRACE],this.options.instrumentConstants.LOGLEVEL.INFO,"create"+this.options.extensionType,"1"),this.trigger("extensions:changed"),"ImageExtension"===this.options.extensionType&&b.IsImageAdExtensionV2Enabled&&this.debouncedUpdateMultiAssetWarningMessage()},_handleUpdatedExtension:function(e){this.ko_model.handleUpdate(e),this.editor.remove(),this.trigger("updated",e),this.trigger("close:extensionEditor"),""!==this.options.extensionType&&this.options.instrumentation.logMessage([this.options.instrumentConstants.LOGCATEGORY.TRACE],this.options.instrumentConstants.LOGLEVEL.INFO,"update"+this.options.extensionType,"1"),this.trigger("extensions:changed"),"ImageExtension"===this.options.extensionType&&b.IsImageAdExtensionV2Enabled&&this.debouncedUpdateMultiAssetWarningMessage()},_handleCancel:function(){this.editor.remove(),this.trigger("close:extensionEditor")},_handleRemove:function(){this.trigger("close:extensionEditor"),this.editor=null},_editExtension:function(t){this.editor&&this.editor.remove(),this._clearErrors();var i=t?this.options.EditForm:this.options.CreateForm;"ImageExtension"===this.options.extensionType&&b.IsImageAdExtensionV2Enabled&&this.trigger("modeChange",{isEdit:!!t}),this.editor=new i(e.extend({extension:t,data:this.options.data,campaignId:this.options.campaignId,adgroupId:this.options.adgroupId,title:f.get(t?this.i18nKeys.edit_title:this.i18nKeys.create_title),i18nKeys:this.i18nKeys,dialogOptions:{popupFront:this.options.popupFront},instrumentation:this.options.instrumentation,instrumentationSettings:this.options.instrumentationSettings,disableScheduling:this.options.disableScheduling,isForVNext:this.options.isForVNext,oDataConfig:S,newI18n:this.options.newI18n},this.options.extraEditorOptions,this.options.usePanel?{eventsToActions:[{event:"created",action:function(e){this._handleCreatedExtension(e)}.bind(this)},{event:"updated",action:function(e){this._handleUpdatedExtension(e)}.bind(this)},{event:"cancel",action:this._handleCancel.bind(this)},{event:"remove",action:this._handleRemove.bind(this)}],onClose:function(e){("react-focus-lock"===e.currentTarget.className&&"keyup"===e.type||"panel-mask"===e.currentTarget.className||e.currentTarget.className&&e.currentTarget.className.indexOf("panel-close")>-1)&&this._handleCancel()}.bind(this)}:{})).render(),this.options.usePanel||(this.editor.on("created",function(e){this._handleCreatedExtension(e)}.bind(this)),this.editor.on("updated",function(e){this._handleUpdatedExtension(e)}.bind(this)),this.editor.on("cancel",this._handleCancel.bind(this)),this.editor.on("remove",this._handleRemove.bind(this))),this.trigger("open:extensionEditor")},_createClickHandler:function(){this._editExtension(null)},_removeAssociations:function(t,i){return this.options.data.association.destroyAll({where:e.extend({id:{in:t.removed}},i)}).then(this.ko_model.handleRemovedIds.bind(this.ko_model,t.removed))},_createAssociations:function(t,i,n,a){var r={id:{in:t.added}};return this.options.isMultiSelect?this.options.data.association.updateAll(null,{where:r},n):this.options.data.association.updateAll(null,{where:e.extend(r,i)})},_saveClickHandler:function(t){this._clearErrors();var i=this.ko_model.changes(),n=this.ko_model.scope(),a=this.ko_model.scopes();if(i.isEmpty)this.trigger("save",this.ko_model.selectedExtensions());else{var r=a.length>1?this.options.instrumentationSettings.ACTIVITYNAME.UpdateAssociationsForMultipleEntities:this.options.instrumentationSettings.ACTIVITYNAME.UpdateAssociationsForSingleEntity;this.options.instrumentation.startScenario(this.options.instrumentationSettings.SCENARIONAME.UpdateAdExtensionAssociations),this.options.instrumentation.startActivity(r),this._removeAssociations(i,n).then(this._createAssociations.bind(this,i,n,a)).bind(this).finally(u(this.$el)).then(this.ko_model.handleSave.bind(this.ko_model)).then(function(){var t=e.size(i.removed),n=e.size(i.added);t>0&&(this.options.instrumentation.logMessage([this.options.instrumentConstants.LOGCATEGORY.TRACE],this.options.instrumentConstants.LOGLEVEL.INFO,"AdExtension/DeleteAssociations",JSON.stringify({extensionCount:t,extensionType:this.options.extensionType,entityType:this.options.entityType,entityCount:e.size(a)||1})),this.logActivityToSubstrate("adextension removed. extensionType: "+this.options.extensionType+" extensionCount: "+t)),n>0&&(this.options.instrumentation.logMessage([this.options.instrumentConstants.LOGCATEGORY.TRACE],this.options.instrumentConstants.LOGLEVEL.INFO,"AdExtension/CreateAssociations",JSON.stringify({extensionCount:n,extensionType:this.options.extensionType,entityType:this.options.entityType,entityCount:e.size(a)||1})),this.logActivityToSubstrate("adextension added. extensionType: "+this.options.extensionType+" extensionCount: "+n)),this.options.instrumentation.endActivity(r),this.trigger("save",this.ko_model.selectedExtensions()),this.trigger("save:success",this.ko_model.selectedExtensions())}).catch(function(e){this._handleErrors(e)}).finally(function(){this.options.instrumentation.startActivity(this.options.instrumentationSettings.ACTIVITYNAME.SaveAdExtensionAssociations)})}},_cancelClickHandler:function(){this._clearErrors(),this.trigger("cancel")},_clearErrors:function(){this.ko_model.errors.clear(l.isCampaignApiError),this.showErrorsInline||s.clearErrorSummary()},_processOdataErrors:function(t,i){var n=e.constant("message")(),a=m.curlyTemplate("<a href={{url}}>{{message}}</a>");return e.chain(t).map(function(e,t){var n=i.errors[t];return{type:n["@odata.type"],message:n.Message?a({url:n.Message,message:e.toString()}):e.toString()}}).groupBy("type").mapObject(function(t){return e.uniq(t,!1,n)}).map(function(t,i){return"#Model.ApiEditorialError"===i?f.get("Editorial_Error_Alert",{message:e.pluck(t,n).join(", ")}):e.pluck(t,n)}).flatten().value()},_handleErrors:function(t){var i=l.getODataErrors(t.errors);if(t.associations&&this.options.isMultiSelect){var n=e.filter(i,function(e){return!!t.associations.value[e.property]&&!(null==e.Message&&"EditorialError"==e.code)});i=e.difference(i,n),this._handleAssociationErrors(n,t.associations)}(i.length||t.errorResponseBody)&&(this.showErrorsInline?this.ko_model.errors.add(i):("odata"===t.type?i=this._processOdataErrors(i,t):t.errorResponseBody&&t.errorResponseBody.Errors&&(i=e.uniq(t.errorResponseBody.Errors,!1,"Code")),s.showJsonErrors(i)))},_handleAssociationErrors:function(t,i){t=e.chain(t).groupBy("property").map(function(t){return e.uniq(t,"message")}).flatten().value();var n=e.map(t,function(t){var n=i.value[t.property],a=e.find(this.ko_model.scopes(),this.findScope(n)),r=e.find(this.ko_model.selectedExtensions(),function(e){return e.Id==n.AdExtensionId});return{Entity:{campaignName:a&&a.campaignName?a.campaignName:"",adgroupName:a&&a.adGroupName?a.adGroupName:""},Extension:r,Error:t.message}}.bind(this));n.length?(this._createErrorGrid(n),this.ko_model.failedAssociationsLabel(f.get(this.i18nKeys.failedAssociationsLabel,{count:i.failCount})),this.ko_model.successfulAssociationsLabel(f.get(this.i18nKeys.successfulAssociationsLabel,{count:i.successCount}))):(e.result(this.errorGrid,"removeGrid"),this.ko_model.failedAssociationsLabel(""))},_createErrorGrid:function(e){this.errorGrid=new v({rowTemplate:this.template.rowTemplate,el:this.$(".error-grid-container"),errors:e,entityType:this.options.entityType,i18nKeys:this.options.i18nKeys}).render()}})}.apply(t,n))||(e.exports=a)},"0cl2":function(e,t,i){"use strict";i.r(t);var n=i("6e2+"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("7XbR"),m=i.n(h),f=i("5iHu"),v=i.n(f),b=i("/xyZ"),y=i.n(b),S=i("YK3D"),w=i.n(S),C=i("AQBV"),x=i.n(C),k=i("1gQY"),A=i.n(k),T=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.scenarioToSectionsMap,r=void 0===n?{}:n,o=i.scenario,s=void 0===o?"creation-workflow":o,l=i.editModel,c=void 0!==l&&l,d=i.collapseAdvancedSettings,u=void 0!==d&&d,p=i.campaignType,h=void 0===p?"search":p,f=i.isFinalURLSuffixEnabled;Object(a.a)(this,e),this.isNewUI=x.a.get("IsNewUI"),this.isAdvancedSettingsExpanded=m.a.observable(c&&!u),this.isExclusionsExpanded=m.a.observable(this.isNewUI&&c&&!u),this.isFinalURLSuffixEnabled=m.a.observable(f),this.shouldShowSection=function(e){return g.a.contains(r[s],e)};var v=g.a.uniq(g.a.flatten(g.a.values(r)));g.a.each(v,function(e){t["show".concat(e)]=m.a.observable(t.shouldShowSection(e)),t["infoText".concat(e)]=m.a.observable()},this),this.infoTextDemographicTargets=m.a.observable(),this.showUrlOptions(this.showUrlOptions()&&("shopping"!==h||this.isUpgradedUrlsForBscSettingsEnabled(h))),this.showNativeAds(this.showNativeAds()&&g.a.result(x.a.get("Permissions"),"IsNativeAdsAllowed")&&!g.a.result(x.a.get("Permissions"),"IsEnabledForAutoBiddingForAudienceNetwork")&&("search"===h||"shopping"===h)),this.showMultimediaAds=m.a.observable(w.a.Permissions.IsMultiMediaAdsEnabled&&"search"===h),this.showAdSchedule(this.showAdSchedule()),this.showDemographicTargets=m.a.computed(function(){return"audience"!==h&&(t.showAgeTargets()||t.showGenderTargets())},this),this.showTargetsSection=m.a.computed(function(){return t.showAdSchedule()||t.showDeviceTargets()||t.showDemographicTargets()},this),this.showOtherSettingsSection=m.a.computed(function(){return t.showNativeAds()||t.showAdRotation()||t.showAdDistribution()||t.showMultimediaAds()},this),this.showExclusions=m.a.computed(function(){return t.showSiteExclusion()||t.showIPExclusion()},this)}return Object(r.a)(e,[{key:"isUpgradedUrlsForBscSettingsEnabled",value:function(e){return"shopping"===e&&("11270641"===A.a.get("customer_id")&&"3096017"===A.a.get("account_id")||g.a.result(x.a.get("Permissions"),"IsUpgradedUrlsForBscSettingsEnabled"))}}]),e}(),_=i("AKJU"),E=i.n(_),I=i("apu2"),O=i.n(I),P=i("Sk/Z"),M=i("qqpG"),j=i("t7Tx"),L=i("2sC/"),D=i("Tq7U"),R=i("rm/4"),N=i("b172"),V=i("Q3lO"),B=i("jOdW"),F=i.n(B),U=i("nza/"),G=i("XUdy"),z=i.n(G),H=i("5C8L"),W=i.n(H),q=i("Xhun"),$=window.globalLegacySchema.get("AdGroup"),K=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),J=Boolean(g.a.result(x.a.get("Permissions"),"IsSPAv2Enabled",!1)),Z=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.AdDistribution,r=void 0===n?"BingYahooAndSearchPartners":n,o=i.Medium,s=void 0===o?"":o,l=i.campaignSubType,c=void 0===l?null:l,d=i.showSynd,u=void 0===d||d;Object(a.a)(this,e),W.a.properties(this,$,["AdDistribution","Medium"],{AdDistribution:r,Medium:s||q.a.Search}),this.syndAllowed=m.a.observable(!0),this.showSynd=m.a.observable(u),this.Medium.searchSelected=m.a.computed({read:function(){return g.a.contains([q.a.Mixed,q.a.Search],this.Medium())},write:function(e){e?this.Medium(q.a.Search):this.Medium("")}},this);var p=g.a.result(this.Medium.validators,"enum");p&&(p.message=K.get("Validation_AdDistribution_NetworkRequired")),this.enableSynd=m.a.computed(function(){return t.Medium.searchSelected()&&t.syndAllowed()}),this.showInHouse=m.a.observable(function(){if(!J||!r)return!1;var e=g.a.result(x.a.get("CurrentCampaign"),"CampaignSubType");if("ShoppingSponsoredProductAd"===c||11===e)return!0;if(10!==e)return!1;var t=g.a.result(x.a.get("CurrentAdGroup"),"Settings");return 0===g.a.result(g.a.first(t),"BidOption")}())},Y=i("l62P"),Q=i("Z4Ty"),X=i("WLWg"),ee=i("nlAS"),te=i.n(ee),ie=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),ne=[{Language:"French",Market:"CA"},{Language:"French",Market:"FR"},{Language:"English",Market:"CA"},{Language:"English",Market:"GB"},{Language:"English",Market:"IE"},{Language:"English",Market:"US"},{Language:"English",Market:"AU"},{Language:"German",Market:"DE"},{Language:"Norwegian",Market:"NO"}].concat(g.a.result(x.a.get("Permissions"),"IsSyndOptOutToEuropeanAndIndiaEnabled")?[{Language:"Italian",Market:"IT"},{Language:"Spanish",Market:"ES"},{Language:"Dutch",Market:"NL"},{Language:"Swedish",Market:"SE"},{Language:"Danish",Market:"DK"},{Language:"German",Market:"AT"},{Language:"France",Market:"BE"},{Language:"Finnish",Market:"FI"},{Language:"English",Market:"IN"}]:[]),ae=w.a&&w.a.Permissions&&w.a.Permissions.IsSPAv2Enabled;function re(e,t){if(Boolean(g.a.result(x.a.get("Permissions"),"IsSyndShownForAllLanguages")))return!0;var i=e?[e]:t||[];return!(!g.a.isEmpty(i)&&!g.a.contains(i,"All"))||g.a.any(i,function(e){return g.a.contains(g.a.pluck(ne,"Language"),e)})}var oe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.AdDistribution,n=void 0===i?X.a.BingYahooAndSearchPartners:i,a=t.Medium,r=void 0===a?"":a,o=t.Language,s=void 0===o?"":o,l=t.Languages,c=void 0===l?[]:l,d=t.campaignType,u=void 0===d?"search":d,p=t.campaignSubType,g=void 0===p?null:p,h=t.level,m=void 0===h?"campaign":h,f=t.activityLogger;this.viewModel=new Z({AdDistribution:n,Medium:r,campaignType:u,campaignSubType:g,showSynd:re(s,c)}),this.level=m,this.languages=c,this.campaignType=u,this.isSponsoredCampaign=ae&&"SponsoredShoppingCampaign"===x.a.get("CampaignObjective")||"ShoppingSponsoredProductAd"===g,this.viewModel.Medium.searchSelected.subscribe(function(t){e.trigger("search:change",t)}),this.viewModel.AdDistribution.subscribe(function(){f&&f.signal("ad distribution changed","ad distribution")})}},{key:"render",value:function(){return this.$el.html(z()({appendLearnMoreLink:Y.appendLearnMoreLink,i18n:ie,nativeAdsAllowed:Boolean(g.a.result(x.a.get("Permissions"),"IsNativeAdsAllowed")),isSponsoredCampaign:this.isSponsoredCampaign})),m.a.applyBindings(this.viewModel,this.el),this}},{key:"getValues",value:function(){return this.viewModel.toObject()}},{key:"validate",value:function(){return this.viewModel.validate()}},{key:"toObject",value:function(){var e=this.viewModel.toObject();return this.viewModel.Medium.searchSelected()||(e=g.a.omit(e,"AdDistribution")),e}},{key:"update",value:function(e){var t=g.a.isArray(e),i=te.a.Intermediate.getAll("CampaignCriterion"),n=t?null:e;t&&(this.languages=e),this.viewModel.showSynd(re(n,this.languages)),this.isSyndOptionAllowed(n,i)}},{key:"isLocationTargetingsAllowed",value:function(e,t){var i=this,n=g.a.filter(t,function(e){return e.SelectionStatus===j.Included}),a=Q.c(e||this.languages);if(g.a.isEmpty(n)||!a)return!0;var r=[],o=g.a.filter(n,function(e){return"Location"===e.Criterion.Type});g.a.isEmpty(o)?r=a.NoSupported:g.a.each(o,function(e){var t=e.Criterion.LocationCriterion,i=a[t.CountryCode]||a.NoSupported;r=r.concat(i)});var s=g.a.pluck(g.a.filter(ne,function(t){return e?t.Language===e:g.a.contains(i.languages,t.Language)||g.a.contains(i.languages,"All")}),"Market");return g.a.some(g.a.intersection(s,r))}},{key:"isSyndOptionAllowed",value:function(e,t){if(Boolean(g.a.result(x.a.get("Permissions"),"IsSyndShownForAllLanguages")))return this.viewModel.showSynd(!0),void this.viewModel.syndAllowed(!0);var i=re(e,this.languages);this.viewModel.showSynd(i),i=i&&this.isLocationTargetingsAllowed(e,t),this.viewModel.syndAllowed(i),i||this.viewModel.AdDistribution(X.a.BingYahooAndSearchPartners)}},{key:"setInHouseStatus",value:function(e){this.viewModel.showInHouse(e),e||this.viewModel.AdDistribution()!==X.a.InHousePromotion||this.viewModel.AdDistribution(X.a.BingYahooAndSearchPartners)}}]),t}(u.a.View),se=i("ocoE"),le=i("aA6B"),ce=i("+PqR");i.d(t,"default",function(){return pe});var de=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),ue={"creation-workflow":["LocationTargets","DeviceTargets","AdSchedule","NativeAds","DateSettings","AdDistribution",w.a.Permissions.IsMultiMediaAdsEnabled&&"MultimediaAds"],"shopping-creation-workflow":["DeviceTargets","AdSchedule","DateSettings","AdDistribution"],"campaign-settings":["DeviceTargets","AgeTargets","GenderTargets","NativeAds","AdSchedule","UrlOptions","SiteExclusion","IPExclusion",w.a.Permissions.IsMultiMediaAdsEnabled&&"MultimediaAds"],"adgroup-create":["DeviceTargets","AdSchedule","NativeAds","DateSettings","AdDistribution",w.a.Permissions.IsMultiMediaAdsEnabled&&"MultimediaAds"],"adgroup-settings":["DeviceTargets","AgeTargets","GenderTargets","NativeAds","AdSchedule","UrlOptions","AdRotation","DateSettings","AdDistribution","SiteExclusion",w.a.Permissions.IsMultiMediaAdsEnabled&&"MultimediaAds"],"smart-shopping-campaign":["UrlOptions"]};g.a.each(ue,function(e,t){ue[t]=g.a.compact(e)});var pe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.campaignId,i=void 0===t?"":t,n=e.adgroupId,a=void 0===n?"":n,r=e.level,o=void 0===r?"campaign":r,s=e.scenario,l=void 0===s?"creation-workflow":s,c=e.nativeAdsCampaignBid,d=void 0===c?null:c,u=e.nativeAdsAdgroupBid,p=void 0===u?null:u,h=e.multimediaAdsCampaignBid,m=void 0===h?null:h,f=e.multimediaAdsAdgroupBid,v=void 0===f?null:f,b=e.model,y=void 0===b?{}:b,S=e.TimeZone,C=void 0===S?"":S,k=e.campaignType,A=void 0===k?"search":k,_=e.campaignSubType,E=void 0===_?null:_,I=e.language,O=void 0===I?"":I,P=e.languages,M=void 0===P?[]:P,j=e.campaignBiddingStrategy,L=void 0===j?"":j,D=e.campaignAdScheduleUseSearcherTimeZone,R=void 0===D?null:D,N=e.collapseAdvancedSettings,B=void 0!==N&&N,F=e.activityLogger,G=e.supportCashbackSettings,z=void 0!==G&&G;this.campaignId=i,this.adgroupId=a,this.level=o,this.scenario=l,this.scenarioToSectionsMap=ue,this.nativeAdsAdgroupBid=p,this.nativeAdsCampaignBid=d,this.multimediaAdsCampaignBid=m,this.multimediaAdsAdgroupBid=v,this.isNativeAdsRebrandingEnabled=w.a.Permissions.IsNativeAdsRebrandingEnabled,this.isMultiMediaAdsEnabled=w.a.Permissions.IsMultiMediaAdsEnabled,this.timeZone=C,this.model=y,this.campaignType=w.a.CurrentCampaign?Object(V.default)():A,this.collapseAdvancedSettings=B,this.isNewUI=x.a.get("IsNewUI"),this.activityLogger=F,this.campaignAdScheduleUseSearcherTimeZone=R,this.supportCashbackSettings=z,this.editMode=!g.a.isEmpty(this.model);var H=this.level?this.level.toLowerCase():"",W=!1;if(["campaign","adgroup","keyword","ad","audience"].indexOf(H)>=0?W=!0:["imageadextension","sitelink2adextension"].indexOf(H)>=0&&(W=w.a.Permissions.IsFinalURLSuffixPhase3Enabled),this.viewmodel=new T({scenarioToSectionsMap:ue,scenario:l,campaignType:this.campaignType,isFinalURLSuffixEnabled:W,collapseAdvancedSettings:B}),this.subViews={},this.viewmodel.showAdRotation()){var q="InheritFromParent"===g.a.result(g.a.result(this.model,"BiddingScheme"),"Type")&&g.a.contains(["MaxClicks","MaxConversions","TargetCpa"],L);this.adRotationView=new U.a(g.a.result(g.a.result(this.model,"AdRotation"),"RotationType"),q)}this.viewmodel.showAdDistribution()&&(this.adDistributionView=new oe(g.a.extend(g.a.defaults(g.a.pick(this.model,"AdDistribution","Medium","Language"),{campaignType:A,Language:O,campaignSubType:E,activityLogger:this.activityLogger}),{Languages:M})))}},{key:"updateLocationTargetsVisibility",value:function(e){if(g.a.contains(ue[this.scenario],"LocationTargets")){var t=g.a.filter(e,function(e){return e.SelectionStatus===j.Included});this.viewmodel.showLocationTargets(t.length>0)}else this.viewmodel.showLocationTargets(!1)}},{key:"updateLocationTargetsInfoText",value:function(e){e.length>0?this.viewmodel.infoTextLocationTargets(""):this.viewmodel.infoTextLocationTargets(de.get("LocationTargeting_TargetEverywhere"))}},{key:"render",value:function(){var e=this;return this.$el.html(E()({i18n:de,title:this.title,level:this.level,isNotAudienceCampaign:this.isNotAudienceCampaign(),isNativeAdsRebrandingEnabled:this.isNativeAdsRebrandingEnabled,isMultiMediaAdsEnabled:this.isMultiMediaAdsEnabled,isNewUI:this.isNewUI})),m.a.applyBindings(this.viewmodel,this.el),this.loadAndRenderTargets(),this.renderLocationTargets(),this.loadAndRenderAdSchedule(),this.loadAndRenderNativeAds(),this.renderUpgradedUrlOptions(),this.loadAndRenderExclusions(),this.renderOtherSettings(),this.editMode&&!this.collapseAdvancedSettings&&(this.$("#setAdvancedSettings").collapse("show"),this.isNewUI&&this.$("#setExclusions").collapse("show")),this.isNotAudienceCampaign()||te.a.Intermediate.subscribe("CampaignCriterion",function(){"campaign"===e.level&&e.updateLocationTargetsVisibility(te.a.Intermediate.getAll("CampaignCriterion"))}),this}},{key:"showAdvancedSettings",value:function(e){var t=v()(e.target).data("section");"Advanced"===t?this.viewmodel.isAdvancedSettingsExpanded(!0):this.isNewUI&&"ExclusionsSection"===t?this.viewmodel.isExclusionsExpanded(!0):this.activityLogger&&this.activityLogger.signal("show ".concat(t," settings clicked"),"advanced settings")}},{key:"hideAdvancedSettings",value:function(e){var t=v()(e.target).data("section");"Advanced"===t?this.viewmodel.isAdvancedSettingsExpanded(!1):this.isNewUI&&"ExclusionsSection"===t?this.viewmodel.isExclusionsExpanded(!1):this.activityLogger&&this.activityLogger.signal("hide ".concat(t," settings clicked"),"advanced settings")}},{key:"loadAndRenderExclusions",value:function(){var e=this;(this.viewmodel.showSiteExclusion()||this.viewmodel.showIPExclusion())&&le.a.load(this.campaignId,this.adgroupId,this.level).then(function(t){var i=Object(n.a)(t,2),a=i[0],r=i[1];if(e.viewmodel.showSiteExclusion()){var o="campaign"===e.level?a:r;e.siteExclusionView=new se.a({exclusions:g.a.result(o,"ExcludedSites"),exclusionType:"site",level:e.level,campaignExclusions:g.a.result(a,"ExcludedSites")}),e.$(".site-exclusion").empty().append(e.siteExclusionView.render().el),e.subViews.SiteExclusion=e.siteExclusionView}e.viewmodel.showIPExclusion()&&(e.ipExclusionView=new se.a({exclusions:g.a.result(a,"ExcludedIPs"),exclusionType:"ip"}),e.$(".ip-exclusion").empty().append(e.ipExclusionView.render().el),e.subViews.IPExclusion=e.ipExclusionView)})}},{key:"exclusionsUpdated",value:function(){if(!this.viewmodel.showSiteExclusion()&&!this.viewmodel.showIPExclusion())return!1;var e=this.viewmodel.showSiteExclusion()&&this.siteExclusionView&&!g.a.isEqual(this.siteExclusionView.options.exclusions,this.siteExclusionView.getValues()),t=this.viewmodel.showIPExclusion()&&this.ipExclusionView&&!g.a.isEqual(this.ipExclusionView.options.exclusions,this.ipExclusionView.getValues());return e||t}},{key:"saveExtensions",value:function(){var e=this;if(!this.viewmodel.showSiteExclusion()&&!this.viewmodel.showIPExclusion())return{};var t=this.viewmodel.showSiteExclusion()&&this.siteExclusionView?this.siteExclusionView.getValues():{},i=this.viewmodel.showIPExclusion()&&this.ipExclusionView?this.ipExclusionView.getValues():{},n={};return n="campaign"===this.level?{campaignId:this.campaignId,AdvanceSettings:{Exclusions:{ExcludedSites:t,ExcludedIPs:i}}}:{AdGroupId:this.adgroupId,CampaignId:this.campaignId,AdvancedSettings:{ExcludedSites:t}},le.a.saveExtensions(n,this.level).catch(function(t){if(t.NegativeSitesResult||t.NegativeIPsResult)throw e.showExclusionErrors(t),"exclusion error"})}},{key:"renderOtherSettings",value:function(){if(w.a.Permissions.IsMultiMediaAdsEnabled&&this.viewmodel.showMultimediaAds()){var e={MultimediaAdTypeMultimediaAdsBidsCampaignBidAdjustment:this.multimediaAdsCampaignBid?this.multimediaAdsCampaignBid:R.a.multimediaAdDefaultBid,MultimediaAdTypeMultimediaAdsBidsAdgroupBidAdjustment:this.multimediaAdsAdgroupBid};this.multimediaAdsUpdateView=new P.default(g.a.extend({targetType:D.default.MultimediaAd,campaignId:this.campaignId,adgroupId:this.adgroupId,level:this.level,scenario:this.scenario,activityLogger:this.activityLogger},e)),this.$(".multimedia-ads").empty().html(this.multimediaAdsUpdateView.render().el)}this.viewmodel.showAdRotation()&&(this.$(".ad-rotation").html(this.adRotationView.render().el),this.subViews.AdRotation=this.adRotationView),this.viewmodel.showAdDistribution()&&(this.$(".ad-distribution").html(this.adDistributionView.render().el),this.subViews.AdDistribution=this.adDistributionView)}},{key:"parseSchedulingRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return g.a.each(e,function(e){var n=e.Criterion,a=e.CriterionBid.Multiplier,r=g.a.chain(e).result("CriterionCashback").result("CashbackPercent").value();-1===r&&(r=null),null!=r&&(r=ce.fromFloatToString(r,2)),i.push({Id:t?"":e.Id,Day:n.Day,StartHour:n.FromHour,StartMinute:n.FromMinute,EndHour:n.ToHour,EndMinute:n.ToMinute,BidAdjustmentType:a<0?-1:1,BidAdjustmentAmount:window.Math.abs(a),CashbackPercent:r})}),i}},{key:"loadAndRenderAdSchedule",value:function(){var e=this;this.campaignId?"smart-shopping-campaign"!==this.scenario&&("campaign"===this.level?N.load(this.campaignId,"",["DayTimeCriterion"]).then(function(t){var i=e.parseSchedulingRows(t,"adgroup-create"===e.scenario);e.renderAdShedule(i)}):"adgroup"!==this.level||"adgroup-settings"!==this.scenario&&"adgroup-create"!==this.scenario?this.renderAdShedule([]):y.a.join(N.load(this.campaignId,"",["DayTimeCriterion"]),"adgroup-create"===this.scenario?y.a.resolve():N.load(this.campaignId,this.adgroupId,["DayTimeCriterion"]),function(t,i){var n=e.parseSchedulingRows(i,!1),a=e.parseSchedulingRows(t,!0);e.renderAdShedule(n,a)})):this.renderAdShedule()}},{key:"renderAdShedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.viewmodel.showAdSchedule()){var i={dayTimeRanges:e,timeZone:this.timeZone,adScheduleTimeZoneSetting:this.model.AdScheduleTimeZoneSetting,adScheduleUseSearcherTimeZone:this.model.AdScheduleUseSearcherTimeZone,startDate:g.a.result(this.model,"StartDate"),endDate:g.a.result(this.model,"EndDate"),adGroupStatus:g.a.result(this.model,"Status")};this.adScheduleView=new L.default({model:i,level:this.level,showDateSettings:this.viewmodel.showDateSettings(),campaignDayTimeRanges:t,campaignAdScheduleUseSearcherTimeZone:this.campaignAdScheduleUseSearcherTimeZone,activityLogger:this.activityLogger,supportCashbackSettings:this.supportCashbackSettings}),this.$(".ad-schedule").append(this.adScheduleView.render().el),this.subViews.AdSchedule=this.adScheduleView}}},{key:"renderUpgradedUrlOptions",value:function(){this.viewmodel.showUrlOptions()&&(this.upgradedUrlOptions=new F.a({editMode:this.editMode,entityType:this.level,trackingTemplate:g.a.result(this.model,"TrackingUrlTemplate"),finalUrlSuffix:g.a.result(this.model,"FinalUrlSuffix"),customParameters:g.a.isEmpty(this.model.UrlCustomParameters)?void 0:this.model.UrlCustomParameters,urlOptionsTemplate:O.a,isNewUI:this.isNewUI,showUurlTestTool:"campaign"===this.level||"adgroup"===this.level,campaignId:this.campaignId,adGroupId:this.adgroupId}),this.$(".upgraded-url-options-settings").empty().html(this.upgradedUrlOptions.render().el),this.subViews.UrlOptions=this.upgradedUrlOptions)}},{key:"setData",value:function(e){var t=this,i="adgroup"===this.level?"AdGroupCriterions":"CampaignCriterions";if(e){this.adScheduleView&&this.adScheduleView.backFillItems(e.entity?e:{entity:e});var n=[];g.a.has(e,"entity")&&g.a.has(e.entity,i)?n=e.entity[i]:g.a.has(e,i)&&(n=e[i]),g.a.each(n,function(e){switch(e.CriterionType){case D.default.Device:case D.default.OrignalDevice:t.deviceTargetsUpdateView&&t.deviceTargetsUpdateView.setData(e);break;case D.default.Age:t.ageTargetsUpdateView&&t.ageTargetsUpdateView.setData(e);break;case D.default.Gender:t.genderTargetsUpdateView&&t.genderTargetsUpdateView.setData(e)}})}}},{key:"getDeviceTypeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=R.a.rowKeys.Device.concat(["Computers"]);w.a.Permissions.IsOriginalDeviceTargetingEnabled&&g.a.each(i,function(e){g.a.each(R.a.osNames[e],function(t){i.push("".concat(e).concat(t))})});var n={};return g.a.each(i,function(i){if(n["DeviceType".concat(i,"CampaignBidAdjustment")]=e["Device".concat(i,"Bid")]||0,n["DeviceType".concat(i,"CampaignBidId")]=e["Device".concat(i,"BidId")]||"",n["DeviceType".concat(i,"AdgroupBidAdjustment")]=t["Device".concat(i,"Bid")]||0,n["DeviceType".concat(i,"AdgroupBidId")]=t["Device".concat(i,"BidId")]||"",w.a.Permissions.IsPersonalizedOffersEnabled){var a=e["Device".concat(i,"CashbackPercent")];n["DeviceType".concat(i,"CampaignCashbackPercent")]=null==a?a:ce.fromFloatToString(a,2);var r=t["Device".concat(i,"CashbackPercent")];n["DeviceType".concat(i,"AdgroupCashbackPercent")]=null==r?r:ce.fromFloatToString(t["Device".concat(i,"CashbackPercent")],2)}}),n}},{key:"getAgeTypeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=R.a.rowKeys.Age,n={};return g.a.each(i,function(i){n["AgeType".concat(i,"CampaignBidAdjustment")]=e["Age".concat(i,"Bid")]||0,n["AgeType".concat(i,"CampaignBidId")]=e["Age".concat(i,"BidId")]||"",n["AgeType".concat(i,"AdgroupBidAdjustment")]=t["Age".concat(i,"Bid")]||0,n["AgeType".concat(i,"AdgroupBidId")]=t["Age".concat(i,"BidId")]||""}),n}},{key:"getGenderTypeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=R.a.rowKeys.Gender,n={};return g.a.each(i,function(i){n["GenderType".concat(i,"CampaignBidAdjustment")]=e["Gender".concat(i,"Bid")]||0,n["GenderType".concat(i,"CampaignBidId")]=e["Gender".concat(i,"BidId")]||"",n["GenderType".concat(i,"AdgroupBidAdjustment")]=t["Gender".concat(i,"Bid")]||0,n["GenderType".concat(i,"AdgroupBidId")]=t["Gender".concat(i,"BidId")]||""}),n}},{key:"isNotAudienceCampaign",value:function(){return"audience"!==this.campaignType}},{key:"renderTargets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.viewmodel.showDeviceTargets()){var i=this.getDeviceTypeOptions(e,t);this.deviceTargetsUpdateView=new P.default(g.a.extend({targetType:w.a.Permissions.IsOriginalDeviceTargetingEnabled?D.default.OriginalDevice:D.default.Device,campaignId:this.campaignId,adgroupId:this.adgroupId,level:this.level,scenario:this.scenario,activityLogger:this.activityLogger,supportCashbackSettings:this.supportCashbackSettings},i)),this.$(".device-targets").append(this.deviceTargetsUpdateView.render().el),this.subViews.DeviceTargets=this.deviceTargetsUpdateView}if(this.viewmodel.showAgeTargets()){var n=this.getAgeTypeOptions(e,t);this.ageTargetsUpdateView=new P.default(g.a.extend({targetType:D.default.Age,campaignId:this.campaignId,adgroupId:this.adgroupId,level:this.level,scenario:this.scenario},n)),this.$(".demographic-age-targets").append(this.ageTargetsUpdateView.render().el),this.subViews.AgeTargets=this.ageTargetsUpdateView}if(this.viewmodel.showGenderTargets()){var a=this.getGenderTypeOptions(e,t);this.genderTargetsUpdateView=new P.default(g.a.extend({targetType:D.default.Gender,campaignId:this.campaignId,adgroupId:this.adgroupId,level:this.level,scenario:this.scenario},a)),this.$(".demographic-gender-targets").append(this.genderTargetsUpdateView.render().el),this.subViews.GenderTargets=this.genderTargetsUpdateView}}},{key:"loadAndRenderTargets",value:function(){var e=this;if(!this.isNotAudienceCampaign())if(this.campaignId){if("smart-shopping-campaign"!==this.scenario){var t=[];this.viewmodel.showDeviceTargets()&&t.push("DeviceCriterion"),this.viewmodel.showAgeTargets()&&t.push("AgeCriterion"),this.viewmodel.showGenderTargets()&&t.push("GenderCriterion"),"campaign"===this.level||"adgroup-create"===this.scenario?N.load(this.campaignId,"",t).then(function(t){var i=e.extractBids(t);e.renderTargets(i)}):"adgroup"===this.level&&y.a.join(N.load(this.campaignId,"",t),N.load(this.campaignId,this.adgroupId,t),function(t,i){var n=e.extractBids(t),a=e.extractBids(i);e.renderTargets(n,a)})}}else this.renderTargets()}},{key:"renderNativeAds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.viewmodel.showNativeAds()){var i={NativeAdTypeNativeAdsBidsCampaignBidAdjustment:e.NativeAdBid,NativeAdTypeNativeAdsBidsAdgroupBidAdjustment:t.NativeAdBid};this.nativeAdsUpdateView=new P.default(g.a.extend({targetType:D.default.NativeAd,campaignId:this.campaignId,adgroupId:this.adgroupId,level:this.level,scenario:this.scenario,activityLogger:this.activityLogger},i)),this.$(".native-ads").empty().html(this.nativeAdsUpdateView.render().el),this.subViews.NativeAds=this.nativeAdsUpdateView}}},{key:"loadAndRenderNativeAds",value:function(){var e={NativeAdBid:this.nativeAdsCampaignBid},t={NativeAdBid:this.nativeAdsAdgroupBid};this.renderNativeAds(e,t)}},{key:"renderLocationTargets",value:function(){this.viewmodel.showLocationTargets()&&"campaign"===this.level&&(this.locationTargetsView=new M.a({level:this.level}),this.isNotAudienceCampaign()||this.$(".location-targets").empty().html(this.locationTargetsView.render().el),this.subViews.LocationTargets=this.locationTargetsView)}},{key:"update",value:function(e){this.locationTargetsView&&this.locationTargetsView.refresh(),this.adDistributionView&&!g.a.isEmpty(e)&&this.adDistributionView.update(e)}},{key:"extractBids",value:function(e){var t={};return g.a.each(e,function(e){var i="".concat(e.Criterion.Type).concat(e.Criterion[R.a.targetTypeToFilterProperty[e.Criterion.Type]]);"Device"===e.Criterion.Type&&e.Criterion.OSName&&(i+=e.Criterion.OSName);var n="".concat(i,"Bid"),a="".concat(n,"Id");t[n]=e.CriterionBid?e.CriterionBid.Multiplier:0,t[a]=e.Id||"";var r="".concat(i,"CashbackPercent");t[r]=e.CriterionCashback?e.CriterionCashback.CashbackPercent:""}),t}},{key:"getValues",value:function(e,t){var i=this,n={};this.viewmodel.showUrlOptions()&&(n=this.upgradedUrlOptions.toObject(),g.a.isEmpty(n.TrackingUrlTemplate)&&(n.TrackingUrlTemplate=null),g.a.isEmpty(n.UrlCustomParameters)&&(n.UrlCustomParameters=null));var a={deviceTargets:this.deviceTargetsUpdateView?this.deviceTargetsUpdateView.getValues():[],ageTargets:this.ageTargetsUpdateView?this.ageTargetsUpdateView.getValues():[],genderTargets:this.genderTargetsUpdateView?this.genderTargetsUpdateView.getValues():[],locationTargets:this.locationTargetsView?this.locationTargetsView.getValues():[],nativeAds:this.nativeAdsUpdateView?this.nativeAdsUpdateView.getValues():{},multimediaAds:this.multimediaAdsUpdateView?this.multimediaAdsUpdateView.getValues():{},scheduling:this.adScheduleView?this.adScheduleView.getValues(function(n){if("adgroup-create"===i.scenario)g.a.each(n,function(i){i.Status="Deleted",i.CampaignName=t,i.AdGroupName=e});else if("adgroup"===i.level)g.a.each(n,function(e){e.Status="Deleted",e.AdGroup={Id:w.a.CurrentAdGroup.Id}});else{var a=g.a.isEmpty(w.a.CurrentCampaign)?i.campaignId:w.a.CurrentCampaign.Id;g.a.each(n,function(e){e.Status="Deleted",e.Campaign={Id:a}})}}):[],dateSettings:this.adScheduleView?this.adScheduleView.getDateSettings():{},urlOptions:n,adRotation:this.viewmodel.showAdRotation()?this.adRotationView.getValues():{},netWorkOptions:this.viewmodel.showAdDistribution()?this.adDistributionView.toObject():{},siteExclusions:this.viewmodel.showSiteExclusion()&&this.siteExclusionView?this.siteExclusionView.getValues():[],ipExclusions:this.viewmodel.showIPExclusion()&&this.ipExclusionView?this.ipExclusionView.getValues():[]};return this.adScheduleView&&this.adScheduleView.getAdScheduleUseSearcherTimeZone&&(a.adScheduleUseSearcherTimeZone=this.adScheduleView.getAdScheduleUseSearcherTimeZone()),"adgroup-create"===this.scenario&&(a.deviceTargets=g.a.map(a.deviceTargets,function(i){return g.a.extend(i,{CampaignName:t,AdGroupName:e})}),a.scheduling=g.a.map(a.scheduling,function(i){return g.a.extend(i,{CampaignName:t,AdGroupName:e})})),a}},{key:"showExclusionErrors",value:function(e){var t=e.NegativeSitesResult,i=e.NegativeIPsResult;this.viewmodel.showSiteExclusion()&&this.siteExclusionView&&this.siteExclusionView.showErrors(t),this.viewmodel.showIPExclusion()&&this.ipExclusionView&&this.ipExclusionView.showErrors(i),this.$("#setAdvancedSettings").collapse("show"),this.isNewUI&&this.$("#setExclusions").collapse("show")}},{key:"validate",value:function(){var e=this,t=g.a.chain(this.subViews).map(function(t,i){var n=!g.a.isFunction(t.validate)||t.validate();return n||e.$("#set".concat(i,"Settings")).collapse("show"),!n&&g.a.contains(["AgeTargets","GenderTargets"],i)&&e.$("#setDemographicTargetsSettings").collapse("show"),n||"UrlOptions"!==i||t.expandSettingsWithValidateErrors(),n}).every().value();return t||(this.$("#setAdvancedSettings").collapse("show"),this.isNewUI&&this.$("#setExclusions").collapse("show")),t}},{key:"clearApiErrors",value:function(){g.a.each(this.subViews,function(e){g.a.isFunction(e.clearApiErrors)&&e.clearApiErrors()})}},{key:"handleErrors",value:function(e){return this.expandSettingsWithErrors(e),g.a.each(this.subViews,function(t){g.a.isFunction(t.handleErrors)&&(e.errors=t.handleErrors(e))}),e.entity.errors&&this.viewmodel.showUrlOptions()&&(this.upgradedUrlOptions.handleApiErrors(g.a.groupBy(e.entity.errors,"property")),e.errors=g.a.reject(e.errors,function(e){return"TrackingUrlTemplate"===e.Property||"UrlCustomParameters"===e.Property})),e.errors}},{key:"expandSettingsWithErrors",value:function(e){var t=e.errors,i=g.a.some(g.a.filter(t,function(e){return e.Type.indexOf("Location Criterion")>-1})),n=g.a.some(g.a.filter(t,function(e){return e.Type.indexOf("DeviceOS Criterion")>-1})),a=g.a.some(g.a.filter(t,function(e){return e.Type.indexOf("Age Criterion")>-1||e.Type.indexOf("Gender Criterion")>-1})),r=g.a.some(g.a.filter(t,function(e){return e.Type.indexOf("Day Time Criterion")>-1})),o=g.a.groupBy(e.entity.errors,"property"),s=g.a.has(o,"TrackingUrlTemplate")||g.a.has(o,"UrlCustomParameters")||g.a.has(o,"FinalUrlSuffix");i&&this.$("#setLocationTargetsSettings").collapse("show"),n&&this.$("#setDeviceTargetsSettings").collapse("show"),a&&this.$("#setDemographicTargetsSettings").collapse("show"),r&&this.$("#setAdScheduleSettings").collapse("show"),s&&this.upgradedUrlOptions.expandSettingsWithApiErrors(g.a.has(o,"TrackingUrlTemplate"),g.a.has(o,"UrlCustomParameters"),g.a.has(o,"FinalUrlSuffix")),(i||n||a||r||s)&&this.$("#setAdvancedSettings").collapse("show")}},{key:"setAdGroupId",value:function(e){this.adgroupId=e}},{key:"setCampaignId",value:function(e){this.campaignId=e}},{key:"setLevel",value:function(e){this.level=e,this.viewmodel.showDeviceTargets()&&this.deviceTargetsUpdateView&&this.deviceTargetsUpdateView.setLevel(e),this.viewmodel.showAgeTargets()&&this.ageTargetsUpdateView&&this.ageTargetsUpdateView.setLevel(e),this.viewmodel.showGenderTargets()&&this.genderTargetsUpdateView&&this.genderTargetsUpdateView.setLevel(e)}},{key:"remove",value:function(){g.a.each(this.subViews,function(e){e.remove()}),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"title",get:function(){var e=g.a.result(w.a.CurrentCampaign,"ExperimentId")>0;return"campaign"===this.level&&e?de.get("Section_Advanced_ExperimentSettings"):"campaign"!==this.level||e?de.get("Targeting_AdvancedOptions_AdvancedAdgroupSettings"):de.get("Targeting_AdvancedOptions_AdvancedCampaignSettings")}},{key:"events",get:function(){return{"show.bs.collapse":"showAdvancedSettings","hide.bs.collapse":"hideAdvancedSettings"}}}]),t}(u.a.View)},"0zBa":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",a.getString("LearnMore")+": "+t,!0,!0)+"></a>"},i+='<div class="fieldRowAd">\x3c!--final url form-group--\x3e',r?(i=i+'<div class="with-destination-url-container"><label class="col-sm-4 control-label" data-bind="visible: showTitles()" style="margin-top:0px;">'+n.escape(null==(t=e.getString("LandingPage_Label"))?"":t),a.popupHelp("pop_BA_NewCampaignCreate_Ad_LandingPage",e.getString("LandingPage_Label"),e),i+='</label><div class="fieldItemAd" data-bind="css: {\'col-sm-8\': showTitles(), \'col-sm-12\': !showTitles()}"><div class="final-url"></div></div></div>'):(i=i+'<div><label class="col-sm-4 control-label">'+n.escape(null==(t=e.getString("Ad_FinalUrl"))?"":t),a.popupHelp("pop_BA_NewAdCreate_FinalURL",e.getString("Ad_FinalUrl"),e),i+="</label></div>"),i=i+'\x3c!--url form-group--\x3e<div class="form-group">\x3c!--offset by 4 because the url does not have title--\x3e<div class="fieldItemAd" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="url"></div></div></div>\x3c!--ko if: showUpgradeWarning--\x3e<div class="form-group"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="alert alert-warning"><div class="alert-image"></div><span>'+n.escape(null==(t=e.getString("BulkEdit_UrlOptions_UpgradeWarning"))?"":t)+'</span><a class="HelpTopic" query="help:app51230" href="javascript:void(0);">'+n.escape(null==(t=e.getString("LearnMore"))?"":t)+'</a></div></div></div>\x3c!-- /ko--\x3e<div class="form-group" data-bind="visible: landingPageUrlErrorMessages().length &gt; 0"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="font-error container-fluid"><ul data-bind="foreach:landingPageUrlErrorMessages"><li><span class="is-error" data-bind="text: $data"></span></li></ul></div></div></div>\x3c!--mobile url form-group--\x3e<div class="form-group" data-bind="visible: mobileUrlVisible"><div><label class="col-sm-4 control-label" data-bind="visible: showTitles()">'+n.escape(null==(t=e.getString("MobileFinalUrl_Label"))?"":t),a.popupHelp("pop_BA_NewCampaignCreate_Ad_MobileURL",e.getString("MobileFinalUrl_Label"),e),i+='</label><div class="fieldItemAd" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="mobile-url"></div></div></div></div><div class="form-group" data-bind="visible: mobileUrlVisible() &amp;&amp; errorMessages().length &gt; 0"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="font-error container-fluid"><ul data-bind="foreach:errorMessages"><li><span class="is-error" data-bind="text: $data"></span></li></ul></div></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"showDestinationUrl"in r?r.showDestinationUrl:"undefined"!==typeof showDestinationUrl?showDestinationUrl:void 0),i}},"1fLw":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="radio"><label><input class="radio-final-url" type="radio" role="radio" name="isFinalUrl" value="true" data-bind="checked:isFinalUrl.Editing">'+n.escape(null==(t=e.get("FinalUrl_Label"))?"":t)+'</label></div><div class="radio"><label><input class="radio-destination-url" type="radio" role="radio" name="isFinalUrl" value="false" data-bind="checked:isFinalUrl.Editing">'+n.escape(null==(t=e.get("Ad_DestinationUrl"))?"":t)+"</label></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"1omw":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<button class="btn btn-primary save" type="button">'+n.escape(null==(t=a)?"":t)+'</button><button class="btn btn-default cancel" type="button">'+n.escape(null==(t=e)?"":t)+"</button>"}.call(this,"cancelButtonText"in a?a.cancelButtonText:"undefined"!==typeof cancelButtonText?cancelButtonText:void 0,"saveButtonText"in a?a.saveButtonText:"undefined"!==typeof saveButtonText?saveButtonText:void 0),i}},"1suL":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i.n(r),s=i("n2I+"),l=i("nlAS"),c=i.n(l),d=i("YK3D"),u=i.n(d),p=10;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=o.a.compact(["(CampaignType ne Enum.CampaignType'Smart')",e&&"contains(Name, '".concat(e,"')")]).join(" and "),n={$select:o.a.compact(["Id","Name","Status",u.a.Permissions.IsPersonalizedOffersEnabled&&"CampaignCashback"]).join(", "),$skip:t*p,$top:p};return i&&(n.$filter=i),c.a.Campaign.findAll({query:n}).then(function(e){return function(e){if(!e||!o.a.isArray(e))return[];var t=e.map(function(e){return{Id:e.Id,name:e.Name,status:e.Status}});return{totalCount:e.totalCount,items:t}}(e)})}var h=i("1EwD"),m=i.n(h);i.d(t,"a",function(){return v});var f=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/campaign-creation-advanced"),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.onEventTrigger,a=t.getCustomizedData;Object(n.a)(this,e),this.onEventTrigger=i,this.getCustomizedData=a||null}return Object(a.a)(e,[{key:"fecthCampaignData",value:function(e,t,i){var n=i&&i.$el&&i.$el.find(".dropdown-menu");return null===this.getCustomizedData?g(e,t).finally(m()(n)):this.getCustomizedData(e,t).finally(m()(n))}},{key:"getCampaignSelectorView",value:function(){var e=this,t=new s.b({i18n:f,fetch:function(i){var n=i.query,a=void 0===n?"":n,r=i.pageNumber,o=void 0===r?0:r;return e.fecthCampaignData(a,o,t)},ariaLabel:f.getString("Campaign_List"),searchBoxAriaLabel:f.getString("Search by campaign name")});return t.on("selected-campaign",function(t){o.a.isFunction(e.onEventTrigger)&&e.onEventTrigger("selected-campaign",t)}),t}}]),e}()},"1tDs":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+'<div class="success-dialog"><div class="success-dialog__header"><h2>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Paused_Title"))?"":t)+'</h2></div><div class="success-dialog__content"><h4>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Paused_"+o+"_DescriptionLine1"))?"":t)+"</h4><h4>"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Paused_"+o+"_DescriptionLine2"))?"":t)+'</h4><div class="dialog-diagram"><div class="dialog-diagram__bar"><span class="campaign-creation-status-icon-active"></span><div class="horizontal-line-1of3rd horizontal-line-success"></div><span class="campaign-creation-status-icon-danger"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span></div><div class="dialog-diagram__row"><span class="dialog-diagram__row__cell campaign-creation-status-text-active">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_CreateCampaign"))?"":t)+'</span><span class="dialog-diagram__row__cell campaign-creation-status-text-danger">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_AccountOnHold"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_InReview"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_Approved"))?"":t)+'</span></div></div><div class="dialog-form"><div class="dialog-form__row"><div class="dialog-form__row__cell"></div><div class="dialog-form__row__cell"><a class="btn btn-default"'+n.attr("href",r,!0,!0)+">"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Button_"+e))?"":t)+'</a></div><div class="dialog-form__row__cell"></div></div></div></div><div class="success-dialog__footer"></div></div>'}.call(this,"action"in a?a.action:"undefined"!==typeof action?action:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"reason"in a?a.reason:"undefined"!==typeof reason?reason:void 0),i}},"25f/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t+='<div class="edit-panel">';var a=e.isSaveButtonDisabled?{disabled:"disabled"}:{},r=e.isCleanButtonDisabled?{disabled:"disabled"}:{};t=t+"<input"+n.attrs(n.merge([{class:"btn btn-primary",id:"Save",type:"button",value:n.escape(i.i18n.getString("HotelCenter_Shared_Save")),tabindex:"0"},a]),!0)+"><input"+n.attrs(n.merge([{class:n.classes(["btn","btn-default",e.hasCleanButton?"":"hide"],[!1,!1,!0]),id:"Clean",type:"button",value:n.escape(i.i18n.getString("HotelCenter_Shared_Clear")),tabindex:"0"},r]),!0)+'><input class="btn btn-default" id="Cancel" type="button"'+n.attr("value",i.i18n.getString("HotelCenter_Shared_Cancel"),!0,!0)+' tabindex="0"></div>'}.call(this,"model"in i?i.model:"undefined"!==typeof model?model:void 0,"view"in i?i.view:"undefined"!==typeof view?view:void 0),t}},"2Dgx":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="hotel-center-global-toolbar-containter"><div class="global-toolbar-container"></div><div class="global-filter-bar"></div></div>'}},"2Fak":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},i+='<div class="form-group">',a.koErrors("AdGroupCreate_BidTrafficEstError"),i=i+'</div>\x3c!--ko if: showInfo--\x3e<div class="form-group"><div class="alert alert-info"><div data-bind="text: infoMessage"></div></div></div>\x3c!-- /ko--\x3e<div class="form-group"><div'+n.attr("class",n.classes(["control-label",l?"":"col-sm-2"],[!1,!0]),!1,!0)+'><label id="AdGroupCreate_SearchBidLabel">'+n.escape(null==(t=s)?"":t)+"</label>",c&&a.popupHelp(c,s,o),i=i+"</div><div"+n.attr("class",n.classes([l?"":"col-sm-2"],[!0]),!1,!0)+'><div class="input-group"><input class="searchbid form-control" type="text" data-bind="disable: isAutoBidding(), value: SearchBid.string, valueUpdate: &quot;input&quot;, css: {&quot;validation-error&quot;: searchBidInvalid()}, attr: {&quot;aria-invalid&quot;: searchBidInvalid()}" aria-required="true" aria-labelledby="AdGroupCreate_SearchBidLabel AdGroupCreate_BidCurrencyCode" aria-describedby="AdGroupCreate_SearchBidClientError AdGroupCreate_BidTrafficEstError"><span class="iconba iconba-Financial bidlandscape_icon spritedimagealign spritedimage clickable" data-bind="visible: bidLandscapeAvailable()"></span><span class="input-group-addon" id="AdGroupCreate_BidCurrencyCode">'+n.escape(null==(t=e)?"":t)+"</span>",r&&(i+='<span class="status-container"><div class="status_success status" data-bind="visible: bidStatus() === bidStatusENUM.Good"></div><div class="status_warning status iconba iconba-Warning" data-bind="visible: bidStatus() === bidStatusENUM.Warning" role="button"><div class="raise-bid-popup-container"></div></div><div class="status_error status" data-bind="visible: bidStatus() === bidStatusENUM.Error"></div></span>'),i+='</div><div class="noWrap">',a.koValidationError("SearchBid","AdGroupCreate_SearchBidClientError"),a.koError("searchBidErrorMessage","AdGroupCreate_SearchBidClientError"),i+="</div></div>",d&&(i+='<div class="col-sm-2" data-bind="visible: showEstimateButton"><input class="btn-estimate btn btn-default" type="button" data-bind="value: estimateBtnText"></div>'),i+="</div>",d&&(i=i+'\x3c!-- ko if: showEstimation--\x3e<div class="panel panel-default estimation-result">\x3c!-- have to add the heading or the margin things--\x3e<div class="panel-heading" role="heading"></div><div class="panel-body"><div class="form-group"><div class="col-sm-3 control-label"><label>'+n.escape(null==(t=o.get("EstimatedClicks"))?"":t)+"</label>",a.popupHelp("pop_BA_Signup_CampaignCreate_EstClicks",o.get("EstimatedClicks"),o),i=i+'</div><div class="col-sm-4 estimated-clicks form-control-static" data-bind="text: Clicks"></div></div><div class="form-group"><div class="col-sm-3 control-label"><label>'+n.escape(null==(t=o.get("EstimatedImpressions"))?"":t)+"</label>",a.popupHelp("pop_BA_Signup_CampaignCreate_EstImpressions",o.get("EstimatedImpressions"),o),i=i+'</div><div class="col-sm-4 estimated-impressions form-control-static" data-bind="text: Impressions"></div></div><div class="form-group"><div class="col-sm-3 control-label"><label>'+n.escape(null==(t=o.get("EstimatedSpend"))?"":t)+"</label>",a.popupHelp("pop_BA_Signup_CampaignCreate_EstSpend",o.get("EstimatedSpend"),o),i+='</div><div class="col-sm-4 estimated-spend form-control-static" data-bind="text: Spend" x-ms-format-detection="none"></div></div></div></div>\x3c!-- /ko--\x3e')}.call(this,"accountCurrencyCode"in r?r.accountCurrencyCode:"undefined"!==typeof accountCurrencyCode?accountCurrencyCode:void 0,"bidStatusEnabled"in r?r.bidStatusEnabled:"undefined"!==typeof bidStatusEnabled?bidStatusEnabled:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"inputLabel"in r?r.inputLabel:"undefined"!==typeof inputLabel?inputLabel:void 0,"isInKeywordCreationWorkflow"in r?r.isInKeywordCreationWorkflow:"undefined"!==typeof isInKeywordCreationWorkflow?isInKeywordCreationWorkflow:void 0,"popupId"in r?r.popupId:"undefined"!==typeof popupId?popupId:void 0,"showTrafficEstimation"in r?r.showTrafficEstimation:"undefined"!==typeof showTrafficEstimation?showTrafficEstimation:void 0),i}},"2YJl":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="shared-budgets-status-header"><div class="status-header-margin shared-budgets-grid-status-icon"></div></div>'}},"2sC/":function(e,t,i){"use strict";i.r(t);var n=i("bgLp"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("5iHu"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("syDw"),m=i.n(h),f=i("7XbR"),v=i.n(f),b=i("t5+g"),y=i.n(b),S=i("FBIO"),w=i.n(S),C=i("s3tY"),x=i.n(C),k=i("YK3D"),A=i.n(k),T=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/campaign-creation-advanced"),_="M/d/yyyy";function E(e){return T.formatDate(e,{raw:_})}function I(e){return T.parseDate(e.substring(0,10),{raw:"yyyy-MM-dd"})}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.from,n=t.to,a=T.formatDate(e,{timeZone:i,raw:"yyyy-MM-dd"});return T.parseDate(a,{timeZone:n,raw:"yyyy-MM-dd"})}function P(e){return O(e,{from:null})}function M(e){return O(e,{to:null})}var j=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.startDate,r=void 0===n?null:n,o=i.endDate,s=void 0===o?null:o,l=i.adGroupStatus,c=void 0===l?void 0:l,d=i.activityLogger;Object(a.a)(this,e),this.culture=A.a.Culture||"en-US",this.format=A.a.CultureDateTimeFormat.ShortDatePattern||_,this.activityLogger=d,this.currentDate=O(new Date),this.rawStartDate=v.a.observable(r?I(r):this.currentDate),this.rawEndDate=v.a.observable(s?I(s):O(new Date((new Date).setFullYear((new Date).getFullYear()+1)))),this.startDate=v.a.computed({read:function(){return g.a.isDate(t.rawStartDate())?M(t.rawStartDate()):null},write:function(e){t.rawStartDate(g.a.isDate(e)?P(e):null)}}),this.startDate.subscribe(function(){d&&d.signal("start date changed","ad schedule")}),this.endDate=v.a.computed({read:function(){return g.a.isDate(t.rawEndDate())?M(t.rawEndDate()):null},write:function(e){t.rawEndDate(g.a.isDate(e)?P(e):null)}}),this.endDate.subscribe(function(){d&&d.signal("end date changed","ad schedule")}),this.hasEndDate=v.a.observable(!g.a.isNull(s)),this.hasFixedStartDate=!(g.a.isNull(r)||this.rawStartDate()>this.currentDate||"Draft"===c),this.startDateError=v.a.observable(""),this.endDateError=v.a.observable(""),this.hasEndDate.Editing=v.a.computed({read:function(){return this.hasEndDate()?"true":"false"},write:function(e){"false"===e?this.endDateError(""):this.validateEndDate(this.endDate()),this.hasEndDate("true"===e)}},this),this.hasEndDate.subscribe(function(e){d&&d.signal("has end date change: ".concat(e),"ad schedule")}),this.rawStartDate.subscribe(this.validateStartDate,this),this.rawEndDate.subscribe(this.validateEndDate,this)}return Object(r.a)(e,[{key:"validateStartDate",value:function(e){g.a.isNull(e)?this.startDateError(T.getString("Campaign_Validation_StartDateInvalid")):(this.startDateError(e<this.currentDate?T.getString("Campaign_Validation_StartDateGreaterThanToday"):""),this.hasEndDate()&&this.endDateError(e>this.rawEndDate()?T.getString("Campaign_Validation_EndDateGreaterThanStartDate"):""))}},{key:"validateEndDate",value:function(e){g.a.isNull(e)?this.endDateError(T.getString("Campaign_Validation_EndDateInvalid")):this.endDateError(e<this.rawStartDate()?T.getString("Campaign_Validation_EndDateGreaterThanStartDate"):"")}},{key:"getValues",value:function(){return{StartDate:E(this.rawStartDate()),EndDate:this.hasEndDate()?E(this.rawEndDate()):"1/1/3000"}}},{key:"validate",value:function(){return this.hasFixedStartDate?g.a.isEmpty(this.endDateError()):(g.a.isNull(this.rawStartDate())?this.startDateError(T.getString("Campaign_Validation_StartDateInvalid")):this.startDateError(this.rawStartDate()<this.currentDate?T.getString("Campaign_Validation_StartDateGreaterThanToday"):""),this.hasEndDate()&&(g.a.isNull(this.rawEndDate())?this.endDateError(T.getString("Campaign_Validation_EndDateInvalid")):this.endDateError(this.rawStartDate()>this.rawEndDate()?T.getString("Campaign_Validation_EndDateGreaterThanStartDate"):"")),g.a.isEmpty(this.startDateError())&&g.a.isEmpty(this.endDateError()))}}]),e}(),L=(i("ViT6"),window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced")),D=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startDate,i=void 0===t?null:t,n=e.endDate,a=void 0===n?null:n,r=e.adGroupStatus,o=void 0===r?void 0:r,s=e.timeZone,l=void 0===s?"PacificTimeUSCanadaTijuana":s,c=e.activityLogger;return this.viewModel=new j({startDate:i,endDate:a,adGroupStatus:o,timeZone:l,activityLogger:c}),this.activityLogger=c,this}},{key:"render",value:function(){return this.$el.html(x()({i18n:L})),v.a.applyBindings(this.viewModel,this.el),this}},{key:"getValues",value:function(){return this.viewModel.getValues()}},{key:"validate",value:function(){var e=this.viewModel.validate();return!e&&this.activityLogger&&this.activityLogger.signal("date setting is not valid","ad schedule"),e}}]),t}(m.a.View),R=i("RibF"),N=i.n(R),V=i("SxtD"),B=i("AQBV"),F=i.n(B),U=i("UgQD"),G=i.n(U),z=i("DXRr"),H=i("i/gc");i.d(t,"default",function(){return $});var W=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),q={template:y.a,showDateSettings:!0,fromSettingsGrid:!1,showBidAdjustmentColumn:!0,showDisplayTimeAndFooter:!0},$=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=g.a.defaults(t,q),this.model.timeZoneText=G.a.getAccountTimeZoneText(),this.model.adScheduleUseSearcherTimeZone=!!g.a.isBoolean(this.model.adScheduleUseSearcherTimeZone)&&this.model.adScheduleUseSearcherTimeZone,this.model.adScheduleTimeZoneSetting=this.model.adScheduleTimeZoneSetting||0,this.model.campaignAdScheduleUseSearcherTimeZone=!!g.a.isBoolean(this.options.campaignAdScheduleUseSearcherTimeZone)&&this.options.campaignAdScheduleUseSearcherTimeZone,this.supportCashbackSettings=!!t.supportCashbackSettings&&!A.a.Permissions.IsPersonalizedOffersV3Enabled,this.koModel=new w.a(this.model,this.options.level,this.options.campaignDayTimeRanges,this.options.isForVNext,this.options.activityLogger,this.supportCashbackSettings,t.currentCampaign,t.currentAdGroup),this.options.showDateSettings&&(this.dateSettings=new D(g.a.extend({activityLogger:t.activityLogger},g.a.pick(this.model,"startDate","endDate","adGroupStatus","timeZone")))),this.toggleView=new V.a({toggleText:{on:W.getString("Toggle_On"),off:W.getString("Toggle_Off")},labelledbyId:"ad-schedule-use-campaign-settings"}),this.toggleView.setToggleState(this.koModel.useCampaignSettingsChecked()?"on":"off"),this.listenTo(this.toggleView,"change",function(t){e.koModel.useCampaignSettingsChecked("on"===t)},this),this.koModel.useCampaignSettings.subscribe(function(t){t||!g.a.isEmpty(e.model.dayTimeRanges)||g.a.isEmpty(e.options.campaignDayTimeRanges)||e.koModel.update({dayTimeRanges:e.options.campaignDayTimeRanges}),e.koModel.showAdGroupOverrideInformation(!1),e.koModel.adScheduleUseSearcherTimeZone(t?e.model.campaignAdScheduleUseSearcherTimeZone:e.model.adScheduleUseSearcherTimeZone)},this),this.koModel.showAdGroupOverrideInformation(this.options.fromSettingsGrid&&this.koModel.useCampaignSettings())}},{key:"toggleCashbackPercentColumns",value:function(e,t){this.koModel.supportCashbackSettings(e&&!A.a.Permissions.IsPersonalizedOffersV3Enabled),this.koModel.resetCashbackInheritStatus(t)}},{key:"render",value:function(){var e=this.options,t=e.showBidAdjustmentColumn,i=e.showDisplayTimeAndFooter;return this.$el.html(this.options.template({percentSymbol:F.a.get("globalization.number.percentSymbol"),i18n:W,showDateSettings:this.options.showDateSettings,showBidAdjustmentColumn:t,showDisplayTimeAndFooter:i})),v.a.applyBindings(this.koModel,this.el),this.options.showDateSettings&&this.$(".date-settings__container").append(this.dateSettings.render().el),this.toggleView.render(),this.$(".toggle-campaign-settings-switch").append(this.toggleView.el),this}},{key:"log",value:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,"ad schedule")}},{key:"addTimeRow",value:function(){this.koModel.addTimeRow(),this.log("add schedule row clicked")}},{key:"removeAllRows",value:function(){this.koModel.dayTimeRanges([]),this.log("remove all schedule rows clicked")}},{key:"removeRow",value:function(e){var t=parseInt(u()(e.target).attr("data-index"));this.koModel.onRemovingSchedulingRow(t),e.stopImmediatePropagation(),this.log("remove a schedule row clicked")}},{key:"getValues",value:function(e){var t=this,i=this.getDeletedItems(),n=this.getCriterions(),a=[];return g.a.isFunction(e)&&e(i),g.a.each(i,function(e){g.a.each(n,function(i){if(g.a.isEqual(g.a.omit(i.Criterion.DayTimeCriterion,"Id"),g.a.omit(e.Criterion.DayTimeCriterion,"Id"))){var n=i.Criterion.BidAdjustment===e.Criterion.BidAdjustment,r=!t.supportCashbackSettings||Object(H.getRealCashbackPercentValue)(i.Criterion.CashbackPercent)===Object(H.getRealCashbackPercentValue)(e.Criterion.CashbackPercent);n&&r?a.push(i,e):(i.Id=e.Id,a.push(e))}})}),g.a.difference(n.concat(i),a)}},{key:"getCriterions",value:function(){var e=this.koModel.getCriterions();return this.formatCriterions(e)}},{key:"getDateSettings",value:function(){return this.options.showDateSettings?this.dateSettings.getValues():{}}},{key:"getDeletedItems",value:function(){var e=this.koModel.getDeletedItems();return this.formatCriterions(e)}},{key:"getPropertyValidationErrors",value:function(){return{scheduleRow:this.koModel.dayTimeRanges().map(function(e){var t=e().scheduleInRowError();return t?t.message:null}).filter(function(e){return null!=e&&""!==e}),date:[this.dateSettings.viewModel.startDateError(),this.dateSettings.viewModel.endDateError()].filter(function(e){return null!=e&&""!==e})}}},{key:"validate",value:function(){return g.a.reduce([this.koModel.validate(),!this.options.showDateSettings||this.dateSettings.validate()],function(e,t){return e&&t},!0)}},{key:"getAdScheduleUseSearcherTimeZone",value:function(){return this.koModel.adScheduleUseSearcherTimeZone()}},{key:"backFillItems",value:function(e){var t=e.entity.AdGroupCriterions?e.entity.AdGroupCriterions:e.entity.CampaignCriterions,i=g.a.chain(t).where({CriterionType:"DayTime",Status:"Deleted"}).map(function(e){return e.Id}).value(),a=g.a.chain(t).filter(function(e){return"DayTime"===e.CriterionType&&"Deleted"!==e.Status}).map(function(e){return{Id:e.Id,Day:e.Criterion.DayTimeCriterion.Day,StartHour:e.Criterion.DayTimeCriterion.FromHour,EndHour:e.Criterion.DayTimeCriterion.ToHour,StartMinute:N.a.minuteToReadMap[e.Criterion.DayTimeCriterion.FromMinute],EndMinute:N.a.minuteToReadMap[e.Criterion.DayTimeCriterion.ToMinute],BidAdjustmentType:e.Criterion.BidAdjustment>=0?1:-1,BidAdjustmentAmount:window.Math.abs(e.Criterion.BidAdjustment)}}).value(),r=u.a.extend(!0,{},this.koModel.model);e.entity.AdGroupCriterions&&g.a.each(r.dayTimeRanges,function(e){var t=g.a.find(a,function(t){var i=Object(n.a)({},t);return delete i.Id,g.a.isMatch(e,i)&&!g.a.isMatch(e,t)});t&&(e.Id=t.Id)}),a=g.a.filter(a,function(e){return!g.a.find(r.dayTimeRanges,function(t){return g.a.isMatch(t,e)})});var o={dayTimeRanges:g.a.filter(r.dayTimeRanges.concat(a),function(e){return-1===g.a.indexOf(i,e.Id.toString())})};return this.koModel.update(o),t}},{key:"handleErrors",value:function(e){var t=this.backFillItems(e),i=g.a.where(t,{CriterionType:"DayTime"}),n=[];return g.a.each(i,function(e){e.errors&&(n=n.concat(e.errors))}),this.koModel.errors.add(n),e.errors=g.a.filter(e.errors,function(e){return-1===e.Type.indexOf("Day Time Criterion")}),e.errors}},{key:"clearApiErrors",value:function(){this.koModel.errors.clear(z.isCampaignApiError)}},{key:"formatCriterions",value:function(e){return g.a.map(e,function(e){return{Criterion:e,CriterionType:"DayTime",Id:e.DayTimeCriterion.Id}})}},{key:"remove",value:function(){var e;this.toggleView&&this.toggleView.remove();for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(l.a)(Object(s.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"events",get:function(){return{"click .add-time-row":"addTimeRow","click .remove-all-row":"removeAllRows","click .remove-schedule":"removeRow"}}}]),t}(m.a.View)},"2wXG":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("C9Ux"),m=i.n(h),f=window.globalLegacyI18n.get("component/i18n/loader!component/language-selector"),v=window.globalLegacySchema.get("AdGroup"),b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{language:"English"};Object(n.a)(this,e);var i=c.a.isEmpty(t.languages)?c.a.without(v.properties.Language.enum,"All","None"):t.languages;t.enableArabic||(i=c.a.without(i,"Arabic")),t.enableSimplifiedChinese||(i=c.a.without(i,"SimplifiedChinese")),t.IsAdsGlobalizationPhase1Enabled||(i=c.a.without(i,"Greek","Polish","Bulgarian","Croatian","Czech","Estonian","Hungarian","Latvian","Lithuanian","Maltese","Romanian","Slovak","Slovenian")),t.IsAdsGlobalizationPhase2Enabled||(i=c.a.without(i,"Turkish","Serbian","Bosnian","Albanian","Macedonian","Icelandic","Japanese")),this.languageOptions=c.a.chain(i).sortBy().map(function(e){return{Text:f.get("Language_".concat(e)),Value:e}}).value(),t.withInheritOption&&this.languageOptions.unshift({Text:f.get("Language_Inherit"),Value:null}),this.language=g.a.observable(t.language),this.disabled=g.a.observable(!1)},y=i("UcGB"),S=i("L/dA");i.d(t,"default",function(){return x});var w=window.globalLegacyI18n.get("component/i18n/loader!component/language-selector"),C={i18nStrings:{Description:w.get("Campaign_Language_Description"),SaveWarning:w.get("Campaign_FinalValue_SaveWarning"),ChooseLanguage:w.get("Campaign_Language_Choose_Language")},language:S.get(),languages:[],withInheritOption:!1,enableArabic:!1,enableSimplifiedChinese:!1},x=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=c.a.defaults(t,C),this.i18nStrings=c.a.defaults({},this.options.i18nStrings,C.i18nStrings),this.koModel=new b(c.a.pick(this.options,"language","languages","withInheritOption","enableArabic","enableSimplifiedChinese","IsAdsGlobalizationPhase1Enabled","IsAdsGlobalizationPhase2Enabled")),this.koModel.language.subscribe(function(t){y.default.trigger("language:changed",t),e.trigger("language:changed",t)},this),this.on("language:set",function(t){return e.koModel.language(t)})}},{key:"render",value:function(){return this.$el.empty().append(m()({Description:this.i18nStrings.Description,SaveWarning:this.i18nStrings.SaveWarning,ChooseLanguage:this.i18nStrings.ChooseLanguage})),g.a.applyBindings(this.koModel,this.el),this}}]),t}(u.a.View)},"35d6":function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("1gQY"),o=i.n(r),s=i("G59r"),l=i.n(s),c=i("syDw"),d=i.n(c),u=i("fE/Z"),p=(i("jQIp"),function(e){return l.a.format(e,"M/d/yyyy")}),g=function(e){return l.a.format(e,"yyyy-MM-dd")},h=function(e){return l.a.parse(e)},m=["PeriodPerformanceMetrics","PerformanceMetricsChange","PerformanceMetricsChangePercentage","PhonePeriodPerformanceMetrics","PhonePerformanceMetricsChange","PhonePerformanceMetricsChangePercentage"];t.a=function(e){return e("dateFilter",["config","gridView","dataSource"],function(e,t,i){var n=a.a.extend({},d.a.Events),r=a.a.result(e.plugins,"dateFilter",{}),s=r.comparisonColumns,l=void 0===s?m:s,c=i.query,f=null;return o.a.getPromise("$daterange").then(function(e){f=e}),e.isDataFetchManagerSource||(i.query=function(e){return o.a.getPromise("$daterange").then(function(n){var o;return o=r.isOdataActionSource?a.a.defaults({select:n.compared?a.a.union(e.select,l):a.a.difference(e.select,l)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=e.options,n=u.default.root.identifyEntitySet(i.entitySet.toJSON()),r=n.navigation.source,o=a.a.defaults({DateRange:{StartDate:g(t.start)||g(h(t.RangeStartDate)),EndDate:g(t.end)||g(h(t.RangeEndDate))},ComparisonDateRange:t.compared?{StartDate:g(t.compared.start),EndDate:g(t.compared.end)}:null},n.navigation.parameters.gridDataParameters),s=n.navigation.parameters;return a.a.extend(s,{gridDataParameters:o}),a.a.defaults({options:a.a.defaults({entitySet:r.$call(s)},i)},e)}(e,n)):function(e,t){var i=a.a.defaults({startDate:p(t.start)||p(h(t.RangeStartDate)),endDate:p(t.end)||p(h(t.RangeEndDate))},e.query);return i=t.compared?a.a.defaults({comparisonStartDate:p(t.compared.start),comparisonEndDate:p(t.compared.end)},i):a.a.omit(i,"comparisonStartDate","comparisonEndDate"),a.a.defaults({query:i},e)}(e,n),t.set({queryParams:o}),c.call(i,o)})}),window.App&&window.App.views&&window.App.views.Summary&&window.App.views.Summary.bindDateFilterChangeHandler(function(e,i){(function(e,t){function i(e){var t=a.a.pick(e,"start","end");return e.compared&&a.a.extend(t,{comparedStart:e.compared.start,comparedEnd:e.compared.end}),t}return!(!e||!t)&&JSON.stringify(i(e))===JSON.stringify(i(t))})(f,i)||(f=i,t.refresh(!0),n.trigger("dateChange"))}),{events:n,getCurrentDateRange:function(){return f},p$getCurrentDateRange:function(){return o.a.getPromise("$daterange")}}})}},"3AVr":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="custom-params-template"><div data-bind="visible: showNone()"><span class="control-label">'+n.escape(null==(t=a.getString("UrlOptions_None"))?"":t)+'</span></div><table class="full-width" data-bind="visible: editMode()" role="presentation"><tbody data-bind="foreach: parameters"><tr class="custom-param-entry"><td data-bind="css: {\'custom-param__bulk-first-row\': $parent.parameters().length &lt; 2 &amp;&amp; $index() === 0}"><div class="flex-row-fixed custom-param__key-container"><label class="control-label">'+n.escape(null==(t="{ _")?"":t)+"</label>";var r=e?a.getString("Input_NoChange_PlaceHolder"):a.getString("CustomParameters_Placeholder_Key");i=i+'<input class="form-control custom-param__key-field" type="text" data-bind="disable: $root.isDisabled, value: key, attr: {\'aria-label\': $root.getInputAriaLabel($index())}"'+n.attr("placeholder",r,!0,!0)+' maxlength="16"><label class="control-label">'+n.escape(null==(t="} =")?"":t)+'</label></div><span class="flex-row-dynamic">';var o=e?a.getString("Input_NoChange_PlaceHolder"):a.getString("CustomParameters_Placeholder_Value");i=i+'<input class="form-control custom-param__value-field" type="text" data-bind="disable: $root.isDisabled, value: val, attr: { maxlength: $root.valueMaxLength, \'aria-label\': $root.getInputAriaLabel($index(), false)}"'+n.attr("placeholder",o,!0,!0)+'></span></td><td data-bind="style: { visibility: $root.bulkEditShowAddLabel() &amp;&amp; $index() !== 0 ? &quot;visible&quot; : &quot;hidden&quot; }">\x3c!-- ko if: $root.isDisabled--\x3e<div class="iconba iconba-Cancel control-label closeimage custom-param__close-button disabled"></div>\x3c!-- /ko--\x3e\x3c!-- ko ifnot: $root.isDisabled--\x3e<div class="iconba iconba-Cancel control-label closeimage clickable custom-param__close-button" data-bind="click: function(data, event) { event.stopPropagation(); $root.removeCustomParamEntry($index())}, attr: {\'aria-label\': $root.getRemoveButtonAriaLabel($index())}" tabindex="0" role="button"></div>\x3c!-- /ko--\x3e</td></tr><tr><td><div class="font-error"><ul data-bind="foreach:errorMessages"><li><span data-bind="text: $data"></span></li></ul></div></td></tr></tbody></table>';var s=a.getString("BulkEdit_UrlOptions_CustomParameters_AddAnother");i=i+'\x3c!-- ko if: $root.isDisabled--\x3e<span class="add-another-link inactive" data-bind="visible: showAddLable">'+n.escape(null==(t=s)?"":t)+'</span>\x3c!-- /ko--\x3e\x3c!-- ko ifnot: $root.isDisabled--\x3e<a class="add-another-link" data-bind="visible: showAddLable, click: addCustomParamEntry" href="javascript:void(0)" role="button">'+n.escape(null==(t=s)?"":t)+'</a>\x3c!-- /ko--\x3e<div class="checkbox" data-bind="visible: $root.bulkEditShowMatchCase()"><label><input name="match-case-checkbox" type="checkbox" data-bind="disable: $root.isDisabled, checked: bulkEditMatchCaseSelected">'+n.escape(null==(t=a.getString("BulkEdit_UrlOptions_CustomParameters_MatchCase"))?"":t)+'</label></div><div data-bind="visible: !editMode(), foreach:parameters"><div class="row" data-bind="visible:$data.key"><div class="form-inline col-sm-12"><span class="control-label">'+n.escape(null==(t="{_")?"":t)+'</span><span class="control-label" data-bind="text:$data.key()"></span><span class="control-label">'+n.escape(null==(t="} = ")?"":t)+'</span><span class="control-label" data-bind="text:$data.val()"></span></div></div></div><div class="font-error" data-bind="visible: errorMessages().length &gt; 0 || parametersError().length &gt; 0"><ul data-bind="visible: errorMessages().length &gt; 0, foreach:errorMessages" role="alert"><li><span class="is-error" data-bind="text: $data"></span></li></ul><ul data-bind="parametersError().length &gt; 0, foreach:parametersError" role="alert"><li><span class="is-error" data-bind="text: $data.message"></span></li></ul></div></div>'}.call(this,"bulkEditMode"in a?a.bulkEditMode:"undefined"!==typeof bulkEditMode?bulkEditMode:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"3XzS":function(e,t,i){var n,a;n=[i("Fw1b"),i("Ah3X")],void 0===(a=function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=312)}({312:function(e,t,i){e.exports=i(313)},313:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(314);Object.defineProperty(t,"sessionStore",{enumerable:!0,get:function(){return n.sessionStore}})},314:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionStore=void 0;var n=r(i(315)),a=r(i(316));function r(e){return e&&e.__esModule?e:{default:e}}var o=new n.default.DS,s=new a.default({storage:sessionStorage});o.registerAdapter("sessionStorage",s,{default:!0}),t.sessionStore=o},315:function(t,i){t.exports=e},316:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},"3afM":function(e,t,i){"use strict";i.r(t),i.d(t,"decorate",function(){return g});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("5iHu"),c=i.n(l),d=i("UT4o"),u=i.n(d),p=(i("6T07"),{modal:!0,maxWidth:600,resizable:!1,visible:!1,title:""}),g=function(e,t){function i(e,t,i){u.a.isFunction(e)&&e.apply(t,u.a.toArray(i))}return function(l){function d(){return Object(n.a)(this,d),Object(r.a)(this,Object(o.a)(d).apply(this,arguments))}return Object(s.a)(d,l),Object(a.a)(d,[{key:"initialize",value:function(t){this.options=t||{},this.destroy=this.remove,u.a.has(e.prototype,"render")||this.show(),i(e.prototype.initialize,this,arguments)}},{key:"render",value:function(){return this.show(),i(e.prototype.render,this,arguments),this.setPosition(),this}},{key:"setPosition",value:function(){"center"===this.dialogOptions.position&&this.center()}},{key:"show",value:function(){var e=this,i=u.a.defaults({title:this.options.title,autoFocus:!0,animation:!1},this.options.dialogOptions,t,p);if(this._window||(this._window=this.$el.kendoWindow(i).data("kendoWindow")),this._window.wrapper.attr("role","dialog"),this._window.wrapper.attr("aria-label",i.title),i.rootId&&this._window.wrapper.attr("id",i.rootId),this._window.center(),this._window.open(),c()("span.k-icon.k-i-close",this._window.wrapper).html("").click(u.a.bind(this.remove,this)),u.a.each(i.dialogClasses,function(t){e._window.element.addClass(t)},this),i.zindex&&this.$el.css("z-index",i.zindex),!u.a.isEmpty(i.popupFront)){var n=c()(i.popupFront);if(n&&n.length>0){var a=parseInt(n.css("z-index"),10)+2,r=c()(".k-window"),o=c()(".k-overlay");r&&r.length>0&&r.css("z-index",a),o&&o.length>0&&o.css("z-index",a-1)}}return this.dialogOptions=i,this}},{key:"center",value:function(){return this._window&&this._window.center(),this}},{key:"hide",value:function(){return this._window&&this._window.close(),this}},{key:"remove",value:function(t){t&&t.preventDefault(),this._window&&(i(e.prototype.remove,this,arguments),i(e.prototype.destroy,this,arguments),this._window.close(),this._window.destroy(),this._window=null)}}]),d}(e)}},"3qPY":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="form-control-static"'+n.attr("id",e.id,!0,!0)+n.attr("data-bind","text: "+e.property+".text",!0,!0)+"></div>"}.call(this,"field"in i?i.field:"undefined"!==typeof field?field:void 0),t}},"3rRK":function(e,t,i){var n,a;n=[i("5iHu")],void 0===(a=function(e){function t(e){this.handler=function(){return e},this.active=!1}return t.prototype.on=function(){this.active||(e(window).on("beforeunload",this.handler),this.active=!0)},t.prototype.off=function(){this.active&&(e(window).off("beforeunload",this.handler),this.active=!1)},t}.apply(t,n))||(e.exports=a)},"4+Mt":function(e,t,i){"use strict";var n=i("bgLp"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("UT4o"),u=i.n(d),p=i("/xyZ"),g=i.n(p),h=i("ITOZ"),m=i("98nU"),f=i("+9/h"),v=i("O3qA"),b=i("jep4"),y=i("DUzX"),S=i("c0nf"),w=i("+Ye4"),C=i("0e0T"),x=i("ORPc"),k=i("kLlV"),A=i("vMz+"),T=i.n(A),_=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this;this.perfMarker=e.perfMarker,this.perfMarker.willInit(),this.isAdImpressions=e.isAdImpressions,this.wizardElement=e.wizardElement,this.viewContext=e.viewContext||{},this.viewContext.level="adGroup",this.i18n=f.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=f.a.get("component/api-errors-campaign/index"),this.audienceCampaignType=e.audienceCampaignType||"",this.scenario=e.scenario||"",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.saveOnce=!1,this.currentCampaign=this.viewContext.currentCampaign;var i=f.a.get("$/schema!campaign/AdGroup"),a=Object(m.BackboneSchema)(i,this.i18n,["Name","Medium","PricingModel","Campaign"]),r=f.a.get("component/config/index");this.accountInfo=r.get("CurrentAccount"),this.isIMAReachRepresentationPhase1Enabled=u.a.result(r.get("Permissions"),"IsIMAReachRepresentationPhase1Enabled"),this.model=new a,this.logScenario=e.logScenario,this.activityLogger=this.logScenario.createAdGroup.create(),this.applyActivity=e.applyActivity,this.isOpenCreatePanel=e.isOpenCreatePanel,this.isLastStep="CrudAudienceAdgroup"===e.lastStep,this.isForVNext=e&&e.isForVNext,this.audienceTargetSelector=new x.AudienceTargetSelector({selectedTypeKeys:[],blackListKeys:["device"],activityLogger:this.activityLogger}),this.supportCashbackSettings=Object(C.shouldSupportCashbackSettings)(this.currentCampaign);var o={viewContext:this.viewContext,currentLevelTargetInfo:this.currentLevelTargetInfo,scenario:e.scenario,isLiveUpdateEnabled:!0,showTargetSelection:!0,showBidAdjustment:this.supportCashbackSettings,showTargetOrBid:!1,supportCashbackSettings:this.supportCashbackSettings};if(this.locationSetting=new v.LocationCriterionSetting(u.a.extend({hideTitleLabel:!0,deps:u.a.defaults(e.deps,Object(n.a)({isNewUI:e.isForVNext},this.isIMAReachRepresentationPhase1Enabled?{onLocationTargetsChange:function(e){return t.onLocationTargetsChange(e)},isAudienceCreationWorkflow:!0}:{}))},o,{showBidAdjustment:!1})),this.ageSetting=new v.AgeCriterionSetting(o),this.genderSetting=new v.GenderCriterionSetting(o),this.deviceSetting=new v.DeviceCriterionSetting(o),this.audienceSetting=new v.AudienceCriterionSetting(o),this.companySetting=new v.CompanyNameCriterionSetting(o),this.industrySetting=new v.IndustryCriterionSetting(o),this.jobFunctionSetting=new v.JobFunctionCriterionSetting(o),this.targetSettingViews=[this.locationSetting,this.ageSetting,this.genderSetting,this.deviceSetting,this.audienceSetting,this.companySetting,this.industrySetting,this.jobFunctionSetting],this.reachControl=new w.b({isSticky:!0,viewContext:this.viewContext,scenario:e.logScenario.value}),this.estimateRequestFactory=new w.a({currentLevelTargetInfo:this.currentLevelTargetInfo}),this.errorsView=new x.AudienceCampaignErrorsView,this.isIMAReachRepresentationPhase1Enabled&&this.audienceSetting.setOnAudiencesTargetChangeCallback(function(e){return t.onAudienceTargetsChange(e)}),this.isAudienceCampaignCollapseTargetSelectionEnable=u.a.result(r.get("Permissions"),"IsAudienceCampaignCollapseTargetSelectionEnabled",!1),this.isCopyCampaignSettingsAudienceCampaignEnabled=u.a.result(r.get("Permissions"),"IsCopyCampaignSettingsAudienceCampaignEnabled",!1),this.isCopyCampaignSettingsAudienceCampaignEnabled){var s=f.a.get("campaignui/feature/adgroup-create-advanced/view/copy-adgroup-settings");this.adGroupSettings=new s}}},{key:"willShow",value:function(){var e=this;this.perfMarker.willRender(),this.startListeningForEvents(),this.handleEstimateUpdates(),this.originalSnapshot=this.currentLevelTargetInfo.getSnapshot(),this.ageSetting.saveSnapshot(),this.genderSetting.saveSnapshot(),this.deviceSetting.saveSnapshot(),this.supportCashbackSettings&&this.targetSettingViews.forEach(function(t){t.resetSupportCashbackSettings&&t.resetSupportCashbackSettings(!0,{level:"AdGroup",value:e.viewContext.currentAdGroup.CashbackPercent})})}},{key:"render",value:function(){var e=this;return this.$el.html(T()(this)),this.viewContext.currentAdGroup?this.$(".adgroup-name-input-container").hide():(this.nameInput=new b.InputControl({entity:this.model,field:"Name",ariaLabelledby:"adgroupNameLabel"}),this.nameInput.on("input-changed",function(){e.activityLogger.signal("adgroup name change","crud audience adgroup")}),this.isAudienceCampaignCollapseTargetSelectionEnable&&this.nameInput.setState({value:this.autoSuggestedName()}),this.nameInputRemainingCharsHint=new y.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"Name"}),this.$(".name-input-control-container").prepend(this.nameInput.render().$el),this.$(".remaining-chars-hint-container").append(this.nameInputRemainingCharsHint.render().$el)),this.$(".audience-target-selector-container").append(this.audienceTargetSelector.render().$el),this.$(".audience-reach-estimate-container").append(this.reachControl.render().$el),this.$(".errors-container").append(this.errorsView.render().$el),this.isAudienceCampaignCollapseTargetSelectionEnable?(this.audienceTargetSelector.$(".location-setting-container").append(this.locationSetting.render().$el),this.audienceTargetSelector.$(".age-setting-container").append(this.ageSetting.render().$el),this.audienceTargetSelector.$(".gender-setting-container").append(this.genderSetting.render().$el),this.audienceTargetSelector.$(".audience-setting-container").append(this.audienceSetting.render().$el),this.audienceTargetSelector.$(".companyName-setting-container").append(this.companySetting.render().$el),this.audienceTargetSelector.$(".industry-setting-container").append(this.industrySetting.render().$el),this.audienceTargetSelector.$(".jobFunction-setting-container").append(this.jobFunctionSetting.render().$el),this.audienceTargetSelector.$(".control-label").removeClass("show")):(this.$(".location-setting-container").append(this.locationSetting.render().$el).hide(),this.$(".age-setting-container").append(this.ageSetting.render().$el).hide(),this.$(".gender-setting-container").append(this.genderSetting.render().$el).hide(),this.$(".audience-setting-container").append(this.audienceSetting.render().$el).hide(),this.$(".companyName-setting-container").append(this.companySetting.render().$el).hide(),this.$(".industry-setting-container").append(this.industrySetting.render().$el).hide(),this.$(".jobFunction-setting-container").append(this.jobFunctionSetting.render().$el).hide()),this.perfMarker.done(),this.isCopyCampaignSettingsAudienceCampaignEnabled&&this.$(".copy-adgroup-settings-container").append(this.adGroupSettings.render().$el),this}},{key:"getAdGroupData",value:function(){var e=null;return this.viewContext.currentAdGroup?e=this.viewContext.currentAdGroup:((e=this.model.toJSON()).Campaign={Id:this.viewContext.currentCampaign.Id},e.AdScheduleUseSearcherTimeZone=!1,"AudienceVideoAds"===this.viewContext.currentCampaign.CampaignSubType?e.PricingModel="CPV":this.isAdImpressions&&(e.PricingModel="CPM")),e}},{key:"getDataAsync",value:function(){var e=this,t=this.getAdGroupData(),i=[this.ageSetting.updateCriterionDataAsync(),this.genderSetting.updateCriterionDataAsync(),this.deviceSetting.updateCriterionDataAsync()];return g.a.all(i).then(function(){var i=e.currentLevelTargetInfo.getAllNoneEmptyTypeKeys();i=u.a.reject(i,function(e){return"Location"===e||"Radius"===e||"NegativeLocation"===e||"Device"===e}),t.TargetSetting=i.join(";");var n=e.currentLevelTargetInfo.getSnapshot(),a=x.criterionHelper.compareAndGetCriterionsDelta(e.originalSnapshot,n);if(a=u.a.reject(a,function(e){return"NegativeAge"===e.CriterionType||"NegativeGender"===e.CriterionType||"NegativeDevice"===e.CriterionType}),!e.currentLevelTargetInfo.listenToLocationCriterion){a=u.a.reject(a,function(e){return"Location"===e.CriterionType||"Radius"===e.CriterionType||"NegativeLocation"===e.CriterionType});var r=e.locationSetting.getData(),o=r.intent,s=void 0===o?[]:o,l=r.locations,c=void 0===l?[]:l,d=r.deletedLocations,p=void 0===d?[]:d,g=s.concat(c).concat(p);a=a.concat(g)}var m=[];u.a.each(a,function(t){var i=e.viewContext.currentCampaign.Name,n=e.model.get("Name"),a=Object(h.cloneDeep)(t);parseInt(a.Id,10)<0&&(a.Id=void 0),e.viewContext.currentAdGroup?a.AdGroup={Id:e.viewContext.currentAdGroup.Id}:(a=u.a.omit(a,"Campaign"),a=u.a.omit(a,"AdGroup")),a=u.a.extendOwn(a,{CampaignName:i,AdGroupName:n}),m.push(a)});var f=u.a.reject(m,function(e){return"Audience"===e.Criterion.Type}),v=u.a.filter(m,function(e){return"Audience"===e.Criterion.Type});return t.AdGroupCriterions=f,t.AdGroupAudienceCriterions=v,t})}},{key:"wizardShouldGoNext",value:function(){var e=this;return this.activityLogger.trace("wizard should go next is called"),this.validateAndSave().then(function(t){return t&&e.stopListeningForEvents(),e.activityLogger.trace("validate and save result: ".concat(t)),e.activityLogger.signal("clicked next: ".concat(t),"crud audience adgroup"),t})}},{key:"wizardShouldGoBack",value:function(){var e=this;return this.validateAndSave().then(function(t){return t&&e.stopListeningForEvents(),e.activityLogger.signal("clicked back: ".concat(t),"crud audience adgroup"),t})}},{key:"startListeningForEvents",value:function(){this.listenTo(this.audienceTargetSelector,"selectionChanged",this.onSelectionChanged),this.listenTo(this.currentLevelTargetInfo,"AdGroupCriterionChanged",this.handleEstimateUpdates)}},{key:"stopListeningForEvents",value:function(){this.stopListening(this.audienceTargetSelector,"selectionChanged",this.onSelectionChanged),this.stopListening(this.currentLevelTargetInfo,"AdGroupCriterionChanged",this.handleEstimateUpdates)}},{key:"saveAndExit",value:function(){var e=this;this.validateAndSave().then(function(t){if(e.activityLogger.signal("save and exit: ".concat(t),"crud audience adgroup"),t&&(e.trigger("saveAndExit"),e.isOpenCreatePanel&&e.isLastStep)){var i={CampaignId:e.viewContext.currentCampaign.Id,DeliveryStatusType:"NoEligibleAdGroups"};e.applyActivity.trace(JSON.stringify(i))}})}},{key:"validate",value:function(){return this.nameInput&&!this.nameInput.getState().isValid?(this.nameInput.setState({showError:!0}),this.nameInput.$el[0].scrollIntoView(!1),this.activityLogger.trace("validation failed due to name input: ".concat(this.nameInput.getState())),!1):!!(this.locationSetting.validate()&&this.ageSetting.validate()&&this.genderSetting.validate()&&this.deviceSetting.validate()&&this.audienceSetting.validate()&&this.companySetting.validate()&&this.industrySetting.validate()&&this.jobFunctionSetting.validate())||(this.activityLogger.trace("validation failed due to one of the target settings"),!1)}},{key:"validateAndSave",value:function(){var e=this;return this.validate()?this.reachControl.validate().then(function(t){if(e.activityLogger.trace("reach control validation result: ".concat(t)),t)return e.checkIMAReachAndSave();var i=e.reachControl.errorMessage;return e.errorsView.setErrors([{message:i}]),!1}).catch(function(){}):g.a.resolve(!1)}},{key:"checkIMAReachAndSave",value:function(){var e,t=this,i=this.currentLevelTargetInfo.getSnapshot(),n=[],a=u.a.chain(i).filter(function(e){return"InMarket"===e.CriterionType}).reduce(function(e,t){var i=t.Criterion.AudienceId;return-1===u.a.indexOf(n,i)&&(n.push(i),e.push({Level:"AdGroup",AudienceCriterion:{AudienceId:t.Criterion.AudienceId,AudienceName:t.Criterion.AudienceName}})),e},[]).value();if(this.currentLevelTargetInfo.listenToLocationCriterion){e=u.a.filter(i,function(e){return"Location"===e.CriterionType||"Radius"===e.CriterionType||"NegativeLocation"===e.CriterionType}),e=u.a.filter(e,function(e){return"Deleted"!==e.Status});var r=this.currentLevelTargetInfo.getCampaignLocationCriterions();0===e.length&&r&&r.length>0&&(e=u.a.filter(r,function(e){return"Deleted"!==e.Status}))}else{var o=this.locationSetting.getAllLocations(),s=o.intent,l=void 0===s?[]:s,c=o.locations,d=void 0===c?[]:c;e=l.concat(d),e=u.a.filter(e,function(e){return"Deleted"!==e.Status});var p=u.a.filter(e,function(e){return"LocationIntentCriterion"!==e.CriterionType}),h=this.locationSetting.getCampaignLocationCriterions();if(0===p.length&&h&&h.length>0){var m=Object(k.c)(h);e=m.locations.concat(m.intent)}}return this.isIMAReachRepresentationPhase1Enabled&&this.isForVNext&&e.length>0&&a.length>0?new g.a(function(i){var n=Object(k.b)(e);Object(k.e)({locationsInfo:n,onYes:function(){t.saveAsync().then(function(e){i(e)})},onCancel:function(){return i(!1)},deliveryChannel:"AIM",adGroupId:t.viewContext.currentAdGroup&&t.viewContext.currentAdGroup.Id?Number(t.viewContext.currentAdGroup.Id):1,audienceAssociations:{value:a},i18n:t.i18n,aid:t.accountInfo.Id,cid:t.accountInfo.AdvertiserCustomerID}).then(function(e){e||t.saveAsync().then(function(e){i(e)})})}):this.saveAsync()}},{key:"saveAsync",value:function(){var e,t=this,i=f.a.get("component/js-data-campaign/index");if(this.errorsView.removeErrors(),this.viewContext.currentAdGroup&&this.viewContext.currentAdGroup.Id)e=g.a.resolve(!0);else{var n=this.getAdGroupData();this.activityLogger.trace("creating the ad group with the params: ".concat(n)),e=i.AdGroup.create(n,{adapter:"bulk",cacheResponse:!1}).then(function(e){return!!u.a.isFinite(e.Id)&&(t.viewContext.currentAdGroup=e,!0)})}return e.then(function(){return t.getDataAsync()}).then(function(e){return i.AdGroup.update(e.Id,e,{adapter:"bulk",cacheResponse:!1})}).then(function(e){if(u.a.isFinite(e.Id)){t.viewContext.currentAdGroup=e,t.viewContext.audienceSetting=t.audienceSetting;var i=e.AdGroupCriterions?e.AdGroupCriterions:[],n=e.AdGroupAudienceCriterions?e.AdGroupAudienceCriterions:[];return t.postProcessAfterSaveAsync(i,n)}return g.a.resolve(!1)}).catch(function(e){return t.handleErrors(e),g.a.resolve(!1)}).finally(Object(S.withUiBlock)(this.wizardElement,this.i18n.getString("Loading")))}},{key:"handleErrors",value:function(e){var t=this,i=this.logScenario.createAudienceTargets.create();if(e&&e.entity)if(e&&!u.a.isUndefined(e.errors)){if(e.errors.length){var n=this.i18nErrors.getBulkApiErrors(e.errors),a=u.a.every(n,function(e){return e.code===e.message});u.a.isEmpty(n)||a?(this.errorsView.setErrors([{message:this.i18n.getString("GenericErrorMessage_Short")}]),i.error("".concat(Object(x.getBulkErrorsLogMessage)(e.errors),", Entity:").concat(JSON.stringify(e.entity)))):(this.errorsView.setErrors(n),i.trace(Object(x.getBulkErrorsLogMessage)(e.errors)),u.a.each(e.errors,function(e){t.activityLogger.signal(e.Error,"audience campaign creation api error")}))}}else i.error(JSON.stringify(e));else this.errorsView.setErrors(this.i18nErrors.getODataErrors(e.errors))}},{key:"postProcessAfterSaveAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.currentLevelTargetInfo;return t.length>0||i.length>0?n.destroyAllAsync().then(function(){var a=x.criterionHelper.applyCriterionsDelta(e.originalSnapshot,u.a.union(t,i));return n.createMultipleAsync(a).then(function(){return!0})}):g.a.resolve(!0)}},{key:"onSelectionChanged",value:function(e){this.$(this.getContainerNameFromId(e)).show()}},{key:"getContainerNameFromId",value:function(e){return".".concat(e,"-setting-container")}},{key:"handleEstimateUpdates",value:function(){var e=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.BiddingScheme&&this.viewContext.currentCampaign.BiddingScheme.Type,t=x.BidStrategy[e],i=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.CampaignSubType,n=u.a.first(u.a.get(this.viewContext.currentCampaign,"CampaignSettings"))||{},a=Object(x.getFeedInfo)(n),r=this.estimateRequestFactory.create(t,i,a),o=this.currentLevelTargetInfo.hasAudienceRemarketingList();this.reachControl.updateEstimate(r,o)}},{key:"remove",value:function(){this.audienceTargetSelector.remove(),this.locationSetting.remove(),this.ageSetting.remove(),this.genderSetting.remove(),this.deviceSetting.remove(),this.audienceSetting.remove(),this.companySetting.remove(),this.industrySetting.remove(),this.jobFunctionSetting.remove(),this.reachControl.remove(),this.errorsView.remove(),this.nameInput&&this.nameInput.remove(),this.nameInputRemainingCharsHint&&this.nameInputRemainingCharsHint.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"onLocationTargetsChange",value:function(e){var t=Object(k.b)(e),i=t.locationIntentCriterion,n=t.targetedLocationCriterions,a=t.excludedLocationCriterions;return this.audienceSetting.reloadAudienceData({targetedLocationCriterions:n,excludedLocationCriterions:a,locationIntentCriterion:i,isLocationRestricted:!1})}},{key:"onAudienceTargetsChange",value:function(e){this.locationSetting.reloadLocationView(e)}},{key:"autoSuggestedName",value:function(){var e="",t=new Date,i=t.getTime().toString();return i=i.slice(i.length-6),e="".concat(t.getMonth()+1).concat(t.getDate()).concat(t.getFullYear().toString().slice(2)),e="Ad_Group_".concat(e,"_#").concat(i)}},{key:"title",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Adgroup_Title")}}},{key:"pageTitle",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Adgroup_PageTitle")}}},{key:"actions",get:function(){var e=[{name:"back",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Back_Label")},{name:"done",htmlAttributes:{class:"btn-default"},enabled:!0,method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Exit")}];if("adgroup-creation"===this.scenario&&"shopping"===this.audienceCampaignType);else{if("campaign-creation"!==this.scenario&&"adgroup-creation"!==this.scenario)return Object(l.a)(Object(s.a)(t.prototype),"actions",this);e.unshift({name:"next",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Next")})}return e}}]),t}(x.AudienceStepBase),E=i("a28/"),I=i("7XbR"),O=i.n(I),P=i("J3Zd"),M=i("6e2+"),j=i("syDw"),L=i.n(j),D=i("5iHu"),R=i.n(D),N=i("eRnW"),V=i.n(N),B=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.viewContext=e.viewContext,this.model=e.viewContext.currentAdGroup,this.campaign={},this.scenario=e.scenario,this.level=e.viewContext.level,this.supportCashbackSettings=e.supportCashbackSettings;var t=f.a.get("component/config/index");this.isNewUI=t.get("IsNewUI"),this.i18n=f.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.isNewUI&&(this.isExclusionsExpanded=O.a.observable(!1)),"adgroup-settings"===this.scenario&&(this.initExclusions(),this.initUrlOptions(),this.initAdRotation())}},{key:"render",value:function(){var e=this;return this.$el.html(V()({i18n:this.i18n,isSettings:"adgroup-settings"===this.scenario,isNewUI:this.isNewUI})),f.a.get("component/js-data-campaign/index").Campaign.find(Number(this.viewContext.currentCampaign.Id)).then(function(t){e.campaign=t,e.initAdScheduleViewAsync()}),"adgroup-settings"===this.scenario&&(this.$(".url-options").append(this.upgradedUrlOptions.render().$el),this.$(".ad-rotation").append(this.adRotation.render().$el),this.isNewUI&&this.$("#setExclusions").collapse("show")),this}},{key:"showExclusions",value:function(e){var t=R()(e.target).data("section");this.isNewUI&&"ExclusionsSection"===t&&(this.isExclusionsExpanded(!0),this.$(".camp-adg-shared-exclusions-dropdown .bedded-icon-marker").toggleClass("expanderImage expandedImage"))}},{key:"hideExclusions",value:function(e){var t=R()(e.target).data("section");this.isNewUI&&"ExclusionsSection"===t&&(this.isExclusionsExpanded(!1),this.$(".camp-adg-shared-exclusions-dropdown .bedded-icon-marker").toggleClass("expanderImage expandedImage"))}},{key:"validate",value:function(){return this.adScheduleView.validate()&&(!this.upgradedUrlOptions||this.upgradedUrlOptions.validate())}},{key:"getData",value:function(){var e={},t=this.adScheduleView.getDateSettings(),i=u.a.result(this.adScheduleView,"getAdScheduleUseSearcherTimeZone");if(u.a.extend(e,t),"adgroup-settings"===this.scenario){var n=this.upgradedUrlOptions.toObject();u.a.isEmpty(n.TrackingUrlTemplate)&&(n.TrackingUrlTemplate=null),u.a.isEmpty(n.FinalUrlSuffix)&&(n.FinalUrlSuffix=null),u.a.isEmpty(n.UrlCustomParameters)&&(n.UrlCustomParameters=null);var a=this.adRotation.getValues();u.a.extend(e,n,a)}return u.a.isBoolean(i)&&(e.AdScheduleUseSearcherTimeZone=i),e}},{key:"saveExtensions",value:function(){var e=this,t=f.a.get("campaignui/feature/advanced-settings/util/exclusion-repository"),i=this.siteExclusionView.getValues(),n=this.viewContext.currentCampaign.Id,a={AdGroupId:this.viewContext.currentAdGroup.Id,CampaignId:n,AdvancedSettings:{ExcludedSites:i}};return t.saveExtensions(a,"adgroup").catch(function(t){if(t.NegativeSitesResult)throw e.siteExclusionView.showErrors(t.NegativeSitesResult),e.isNewUI&&e.$("#setExclusions").collapse("show"),"exclusion error"})}},{key:"initAdRotation",value:function(){var e=f.a.get("campaignui/feature/advanced-settings/view/ad-rotation");this.adRotation=new e(u.a.result(u.a.result(this.model,"AdRotation"),"RotationType"))}},{key:"initExclusions",value:function(){var e=this,t=f.a.get("campaignui/feature/advanced-settings/util/exclusion-repository"),i=f.a.get("campaignui/feature/advanced-settings/view/base-exclusion"),n=this.viewContext.currentCampaign.Id,a=this.viewContext.currentAdGroup.Id;t.load(n,a,"adgroup").then(function(t){var n=Object(M.a)(t,2),a=n[0],r=n[1];e.siteExclusionView=new i({exclusions:u.a.result(r,"ExcludedSites"),exclusionType:"site",level:"adgroup",campaignExclusions:u.a.result(a,"ExcludedSites")}),e.$(".site-exclusions").append(e.siteExclusionView.render().$el)})}},{key:"initUrlOptions",value:function(){var e=f.a.get("campaignui/feature/advanced-settings/template/url-options"),t=f.a.get("component/upgraded-url/view/advancedSettingsUrlOptions");this.upgradedUrlOptions=new t({editMode:"adgroup-settings"===this.scenario,entityType:"adgroup",trackingTemplate:u.a.result(this.model,"TrackingUrlTemplate"),finalUrlSuffix:u.a.result(this.model,"FinalUrlSuffix"),customParameters:u.a.isEmpty(this.model.UrlCustomParameters)?void 0:this.model.UrlCustomParameters,urlOptionsTemplate:e,showUurlTestTool:!0,isForVNext:this.isNewUI,adGroupId:this.model.Id})}},{key:"initAdScheduleViewAsync",value:function(){var e=this;return"adgroup-settings"===this.scenario?this.updateAdScheduleViewWithContextAsync():new g.a(function(t){t(e.renderAdSchedule())})}},{key:"updateAdScheduleViewWithContextAsync",value:function(){var e=this,t=this.viewContext.currentCampaign.Id,i=this.viewContext.currentAdGroup.Id,n=f.a.get("campaignui/feature/base-targets/util/criterionLoader"),a=n.load(t,i,["DayTimeCriterion"]),r=n.load(t,"",["DayTimeCriterion"]);return g.a.join(a,r).then(function(t){var i=Object(M.a)(t,2),n=i[0],a=i[1],r=e.parseSchedulingRows(n),o=e.parseSchedulingRows(a,!0);e.renderAdSchedule(r,o)})}},{key:"renderAdSchedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i="adgroup-settings"===this.scenario,n={adScheduleTimeZoneSetting:i&&this.model?this.model.AdScheduleTimeZoneSetting:this.campaign.AdScheduleTimeZoneSetting,adScheduleUseSearcherTimeZone:i&&this.model?this.model.AdScheduleUseSearcherTimeZone:this.campaign.AdScheduleUseSearcherTimeZone,dayTimeRanges:e,startDate:u.a.result(this.model,"StartDate"),endDate:u.a.result(this.model,"EndDate"),adGroupStatus:u.a.result(this.model,"Status")},a=f.a.get("campaignui/feature/ad-schedule/view/index");this.adScheduleView&&this.adScheduleView.remove(),this.adScheduleView=new a({model:n,level:"adgroup",showDateSettings:!0,campaignDayTimeRanges:t,campaignAdScheduleUseSearcherTimeZone:this.campaign.AdScheduleUseSearcherTimeZone,supportCashbackSettings:this.supportCashbackSettings}),this.$(".ad-schedule").append(this.adScheduleView.render().$el)}},{key:"parseSchedulingRows",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];return u.a.each(e,function(e){var a=e.Criterion,r=e.CriterionBid.Multiplier,o=u.a.chain(e).result("CriterionCashback").result("CashbackPercent").value();-1===+o&&(o=null),null!=o&&(o=t.i18n.formatDecimalToFixed(o,{digits:2})),n.push({Id:i?"":e.Id,Day:a.Day,StartHour:a.FromHour,StartMinute:a.FromMinute,EndHour:a.ToHour,EndMinute:a.ToMinute,BidAdjustmentType:r<0?-1:1,BidAdjustmentAmount:Math.abs(r),CashbackPercent:o})}),n}},{key:"events",get:function(){return{"show.bs.collapse":"showExclusions","hide.bs.collapse":"hideExclusions"}}}]),t}(L.a.View),F=i("fYVA"),U=i.n(F),G=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this;this.viewContext=e.viewContext,this.wizardElement=e.wizardElement,this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.scenario=e.scenario,this.currentCampaign=e.viewContext.currentCampaign,this.currentAdGroup=e.viewContext.currentAdGroup,this.i18n=f.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.decimal=f.a.get("component/humanize/decimal"),this.i18nErrors=f.a.get("component/api-errors-campaign/index"),this.deps=e.deps||{},this.isNewUI=u.a.result(this.deps,"isNewUI",!1),this.isNextButtonEnabled=!(this.viewContext.isReadOnlyUser||this.viewContext.CurrentAccountInActive),this.supportCashbackSettings=Object(C.shouldSupportCashbackSettings)(this.currentCampaign),this.supportCashbackSettings&&(this.initCashbackSettings(this.currentAdGroup,this.currentCampaign),this.cashbackSettingsView&&this.cashbackSettingsView.viewModel.CashbackPercent.subscribe(function(e){t.cashbackSettingsView.viewModel.validateCashbackPercent(e)&&t.onCashbackPercentChange(e)})),this.initializeNameInputControl(),this.initializeBiddingStrategyView(),this.initDefaultBidInput(),this.initAudienceAdvancedSettings(),this.errorsView=new x.AudienceCampaignErrorsView,this.logScenario=e.logScenario,this.viewmodel={isAdvancedAdgroupExpanded:O.a.observable(!1)}}},{key:"onCashbackPercentChange",value:function(e){var t=""===e||null==e?null:this.decimal.fromLocalToFloat(e);this.advancedSettings&&this.advancedSettings.adScheduleView&&this.advancedSettings.adScheduleView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:t})}},{key:"saveAndExit",value:function(){var e=this;return this.save().then(function(t){t&&e.trigger("saveAndExit")})}},{key:"toggleAdvancedSettings",value:function(){this.$("#advancedSettings").toggle(),this.$(".audience-advanced-settings-header .bedded-icon-marker").toggleClass("expanderImage expandedImage"),this.viewmodel.isAdvancedAdgroupExpanded(!this.viewmodel.isAdvancedAdgroupExpanded())}},{key:"initializeNameInputControl",value:function(){var e=f.a.get("$/schema!campaign/AdGroup"),t=Object(m.BackboneSchema)(e,this.i18n,["Name"]);this.adGroupNameInputModel=new t,this.currentAdGroup&&this.adGroupNameInputModel.set("Name",this.currentAdGroup.Name),this.nameInput=new b.InputControl({entity:this.adGroupNameInputModel,field:"Name",ariaLabelledby:"adgroupNameLabel"}),this.nameInputRemainingCharsHint=new y.RemainingCharsHint({i18n:this.i18n,model:this.adGroupNameInputModel,field:"Name"})}},{key:"initializeBiddingStrategyView",value:function(){var e,t=f.a.get("campaignui/feature/bidding-strategy/view/setting"),i=Object(x.getCampaignType)(this.viewContext.currentCampaign),n=x.CampaignSubTypeTextMapping[this.viewContext.currentCampaign&&this.viewContext.currentCampaign.CampaignSubType];this.currentAdGroup?this.biddingStrategyView=new t({entityType:"AdGroup",biddingStrategyType:this.currentAdGroup.BiddingScheme.Type,campaignSubType:n,campaignType:i}):(this.viewContext.currentCampaign&&"AudienceVideoAds"===n&&this.viewContext.currentCampaign.BiddingScheme&&this.viewContext.currentCampaign.BiddingScheme.Type&&(e=this.viewContext.currentCampaign.BiddingScheme.Type),this.biddingStrategyView=new t({entityType:"AdGroup",isInitialize:!0,biddingStrategyType:e,campaignSubType:n,campaignType:i}))}},{key:"initDefaultBidInput",value:function(){var e=f.a.get("component/config/index"),t=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.BiddingScheme&&this.viewContext.currentCampaign.BiddingScheme.Type,i=Object(m.BackboneSchema)(Object(x.getBidSchema)({bidCeil:u.a.result(e.get(x.BiddingStrategyToRangeKey[t]||"KeywordBidRange"),"CeilingValue"),bidFloor:u.a.result(e.get(x.BiddingStrategyToRangeKey[t]||"KeywordBidRange"),"FloorValue")}),this.i18n,["Amount"]);if(this.defaultBidModel=new i,this.currentAdGroup){var n=x.PricingModelToBidParam[this.currentAdGroup.PricingModel]||"SearchBid",a=this.currentAdGroup[n];a&&this.defaultBidModel.set("Amount",a.toString())}this.defaultBidInput=new b.InputControl({entity:this.defaultBidModel,field:"Amount",addonText:this.viewContext.accountCurrencyCode,ariaLabelledby:"defaultBidLabel"})}},{key:"initAudienceAdvancedSettings",value:function(){this.advancedSettings=new B({viewContext:this.viewContext,scenario:this.scenario,isNewUI:this.isNewUI,supportCashbackSettings:this.supportCashbackSettings})}},{key:"initCashbackSettings",value:function(e,t){var i=u.a.chain(e).result("AdGroupCashback").result("Percent",null).value(),a=u.a.chain(e).result("AdGroupCashback").result("Scope").value()||"None",r=u.a.chain(e).result("AdGroupCashback").result("CouponsEnabled","None").value(),o=u.a.chain(t).result("CampaignCashback").result("Percent",null).value(),s=u.a.chain(t).result("CampaignCashback").result("Scope").value()||"None",l=u.a.chain(t).result("CampaignCashback").result("CouponsEnabled","None").value();this.supportCashbackSettings&&(this.cashbackSettingsView=new P.CashbackSettings({CashbackPercent:i,CashbackScope:a,showEnableCashbackSettingsCheckbox:!1,showCashbackBudget:!1,isCashbackScopeReadonly:!1,showInheritFromParentOption:!0,ParentLevelCashbackPercent:o,ParentLevelCashbackScope:s,CouponsEnabled:r,ParentCouponsEnabled:l,deps:Object(n.a)({},this.deps,{i18n:this.i18n})}))}},{key:"render",value:function(){return this.$el.html(U()(this)),O.a.applyBindings(this.viewmodel,this.el),this.$(".name-input-control-container").prepend(this.nameInput.render().$el),this.$(".remaining-chars-hint-container").append(this.nameInputRemainingCharsHint.render().$el),this.$(".bidding-strategy-container").append(this.biddingStrategyView.render().$el),this.$(".default-bid-container").append(this.defaultBidInput.render().$el),this.cashbackSettingsView&&this.$(".cashback-settings-container").append(this.cashbackSettingsView.render().$el),this.$(".audience-advanced-settings-container").append(this.advancedSettings.render().$el),this.$(".errors-container").append(this.errorsView.render().$el),this}},{key:"getData",value:function(){var e="CPC";this.viewContext.currentCampaign.BiddingScheme&&this.viewContext.currentCampaign.BiddingScheme.Type&&(e=x.BiddingStrategyToPricingModel[this.viewContext.currentCampaign.BiddingScheme.Type]||e);var t=Object(E.a)({Name:this.adGroupNameInputModel.toJSON().Name,Medium:"Search",PricingModel:e,Languages:["All"],Campaign:{Id:this.viewContext.currentCampaign.Id},BiddingScheme:this.biddingStrategyView.getValues()},x.PricingModelToBidParam[e],this.defaultBidModel.toJSON().Amount);this.viewContext.currentAdGroup&&(t.Id=this.viewContext.currentAdGroup.Id),u.a.extend(t,this.advancedSettings.getData());var i=this.getScheduleInfo();return t.AdGroupCriterions=this.populateCriterionWithAdGroupInfo(i),this.cashbackSettingsView&&u.a.extend(t,this.cashbackSettingsView.getValues()),t}},{key:"validate",value:function(){var e=this.advancedSettings.validate(),t=!this.cashbackSettingsView||this.cashbackSettingsView.validate();return!!(this.nameInput.getState().isValid&&this.defaultBidInput.getState().isValid&&e&&t)||(this.nameInput.setState({showError:!0}),this.defaultBidInput.setState({showError:!0}),e?this.nameInput.$el[0].scrollIntoView(!1):(this.$("#advancedSettings").is(":visible")||this.toggleAdvancedSettings(),this.$("#advancedSettings")[0].scrollIntoView()),!1)}},{key:"wizardShouldGoNext",value:function(){return this.save()}},{key:"save",value:function(){var e=this;if(!this.validate())return g.a.resolve(!1);var t=f.a.get("component/js-data-campaign/index"),i=this.getData(),n=null;n=i.Id?t.AdGroup.update(i.Id,i,{adapter:"bulk",cacheResponse:!1}):t.AdGroup.create(i,{adapter:"bulk",cacheResponse:!1}),this.errorsView.removeErrors();var a=this.logScenario.createAdGroupBasic.create();return n.then(function(t){return u.a.isFinite(t.Id)?(e.viewContext.currentAdGroup=t,Object(C.logAdGroupPersonalizedOffers)(e.supportCashbackSettings,a.signal.bind(a),i),e.advancedSettings.updateAdScheduleViewWithContextAsync().then(function(){return!0})):g.a.resolve(!1)}).catch(function(t){if(t&&t.entity)if(t&&!u.a.isUndefined(t.errors)){if(t.errors.length){var i=u.a.partition(t.errors,function(e){return"AdGroup Error"===e.Type})[0];e.errorsView.setErrors(e.i18nErrors.getBulkApiErrors(i)),a.trace(Object(x.getBulkErrorsLogMessage)(t.errors))}}else a.error(Object(x.getBulkErrorsLogMessage)(t.errors));else e.errorsView.setErrors(e.i18nErrors.getODataErrors(t.errors));return!1}).finally(Object(S.withUiBlock)(this.wizardElement,this.i18n.getString("Loading")))}},{key:"populateCriterionWithAdGroupInfo",value:function(e){var t=this;return"adgroup-settings"===this.scenario?u.a.each(e,function(e){e.AdGroup={Id:t.viewContext.currentAdGroup.Id}},this):u.a.each(e,function(e){e.CampaignName=t.viewContext.currentCampaign.Name,e.AdGroupName=t.adGroupNameInputModel.toJSON().Name},this),e}},{key:"getScheduleInfo",value:function(){var e=this;return this.advancedSettings.adScheduleView.getValues(function(t){u.a.each(t,function(t){t.Status="Deleted","adgroup-settings"===e.scenario?t.AdGroup={Id:e.viewContext.currentAdGroup.Id}:(t.CampaignName=e.viewContext.currentCampaign.Name,t.AdGroupName=e.adGroupNameInputModel.toJSON().Name)})})}},{key:"events",get:function(){return{"click .audience-advanced-settings-header":"toggleAdvancedSettings"}}},{key:"actions",get:function(){var e=[{name:"next",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Next"),enabled:this.isNextButtonEnabled}];return this.viewContext.currentAdGroup?e.push({name:"done",enabled:this.isNextButtonEnabled,htmlAttributes:{class:"btn btn-default btn-exitWithSave"},method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Exit")}):e.push({name:"cancel",displayText:this.i18n.getString("Audience_Campaign_Cancel_Label")}),e}},{key:"title",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Adgroup_Basic_Title")}}},{key:"pageTitle",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Adgroup_Basic_PageTitle")}}}]),t}(x.AudienceStepBase);i.d(t,"a",function(){return _}),i.d(t,"b",function(){return G})},"4I68":function(e,t,i){"use strict";var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("7XbR"),h=i.n(g),m=i("/xyZ"),f=i.n(m),v=i("kwR5"),b=i("YMJb"),y=window.globalLegacySchema.get("ShoppingCampaign"),S=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),w={All:"All",Filtered:"Filtered"},C=function(e){function t(e){var i,n=e.model,r=void 0===n?{}:n,l=e.editMode,c=void 0!==l&&l,u=e.data,p=void 0===u?{ProductCollectionAccounts:[],SalesCountryCollection:[],CampaignCriterionsData:{}}:u,g=e.storeData,m=void 0===g?{storeOptions:[],excludedStoreOptions:[]}:g,f=e.isLocalInventoryAdsEnabled,b=void 0!==f&&f,C=e.isSponsoredCampaign,x=void 0!==C&&C,k=e.shouldShowPlaceholderStoreIfExists,A=void 0!==k&&k,T=e.deps,_=void 0===T?{}:T,E=e.campaignType,I=e.campaignSubType,O=e.isSearchCampaign,P=void 0!==O&&O;if(Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this))).fields=d.a.union(["SalesCountry","Priority","ProviderId"],b?["LocalInventoryAdsEnabled"]:[],x?["CampaignSubType"]:[]),i.FeedId=h.a.observable(null),i.configSchema(y,i.fields,d.a.defaults(r,{Priority:"Low",SalesCountry:"US",ProviderId:d.a.propertyOf(d.a.first(m.storeOptions))("Value"),CampaignSubType:x?"ShoppingSponsoredProductAd":void 0})),i.isCPSSelected=h.a.observable(!1),i.showPriority=h.a.computed(function(){return"Audience"!==E&&"ShoppingSmartAds"!==I&&!i.isCPSSelected()&&!P}),i.updatePriorityFunc=i.updatePriority(),i.showBid=h.a.computed(function(){return!i.isCPSSelected()}),i.isCPSSelected.subscribe(function(e){i.updatePriorityFunc(e)}),i.scope=w,i.productScope=h.a.observable(i.scope.All),i.productScope.editing=h.a.computed({read:function(){return this.productScope()},write:function(e){this.productScope(e)}},Object(v.a)(Object(v.a)(i))),i.salesCountries=h.a.observableArray(p.SalesCountryCollection.map(function(e){return d.a.extend(e,{Text:S.getString("SalesCountry_".concat(e.Value))||e.Text})})),i.excludedStoreOptions=h.a.observableArray(m.excludedStoreOptions),i.shouldShowPlaceholderStoreIfExists=A,i.deps=_,c){var M=d.a.find(m.storeOptions,{Value:r.ProviderId.toString()}),j=i.shouldShowPlaceholderStoreIfExists&&i.isSelectedStoreAPlaceholderStore({ProductCollectionAccounts:p.ProductCollectionAccounts,selectedStoreId:r.ProviderId});i.storeText=h.a.observable(i.generateStoreText({model:r,selectedStoreItem:M,isPlaceholderStore:j})),i.countryText=d.a.propertyOf(d.a.find(i.salesCountries(),{Value:r.SalesCountry}))("Text"),d.a.isEmpty(p.CampaignCriterionsData)||i.productScope(i.scope.Filtered)}else i.storeOptions=h.a.observableArray(m.storeOptions);return i.showWarning=h.a.observable(!1),i.disableStoreSelection=h.a.observable(!1),i.selectedStore=h.a.computed(function(){var e=i.ProviderId(),t=d.a.find(m.storeOptions,{Value:e.toString()});return d.a.isUndefined(t)&&r.ProviderId&&(t={IsCoOpStore:!d.a.isNull(r.LinkStoreId),LinkStoreId:r.LinkStoreId,Text:"",Value:r.ProviderId}),t}),i.hasValidStore=h.a.computed(function(){return Number(i.ProviderId())>=0}),i.campaignSubTypeText=h.a.computed(function(){return d.a.result(i.selectedStore(),"IsCoOpStore")?S.getString("ShoppingCampaign_CoOpStore_CampaignSubType"):S.getString("ShoppingCampaign_Default_CampaignSubType")}),i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"selectAllProducts",value:function(e){this.productScope.editing(e?this.scope.All:this.scope.Filtered)}},{key:"hasFilteredProducts",value:function(){return this.productScope()===this.scope.Filtered}},{key:"setProviderId",value:function(e){this.ProviderId(e)}},{key:"setFeedId",value:function(e){this.FeedId(e)}},{key:"isSelectedStoreAPlaceholderStore",value:function(e){var t=e.ProductCollectionAccounts,i=e.selectedStoreId;return this.shouldShowPlaceholderStoreIfExists&&!d.a.isUndefined(d.a.find(t,function(e){return parseInt(e.Value,10)===i&&e.IsPlaceholder}))}},{key:"generateStoreText",value:function(e){var t=e.model,i=e.selectedStoreItem,n=e.isPlaceholderStore;return this.shouldShowPlaceholderStoreIfExists&&n?this.deps.gmcToMMCGridDeps.draftStoreName({draftStoreId:t.ProviderId,i18n:S,isNewUII18n:!1}):d.a.propertyOf(i)("Text")||t.ProviderId}},{key:"updatePriority",value:function(){var e=this,t=this.Priority();return function(i){i?(t=e.Priority(),e.Priority("Highest")):e.Priority(t)}}}]),t}(b.a),x=i("iYrX"),k=i.n(x),A=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).queries=h.a.observableArray(),e.queryOptions=h.a.observableArray([]),e.showAddNewButton=h.a.observable(!0),e.isEditing=h.a.observable(!0),e}return Object(l.a)(t,e),Object(r.a)(t,[{key:"isLastQuery",value:function(e){return e()===this.queries().length-1}}]),t}(b.a),T=i("MQpz"),_=i.n(T),E=i("AQBV"),I=i.n(E),O=window.globalLegacySchema.get("ProductCondition"),P=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),M=Boolean(d.a.result(I.a.get("Permissions"),"IsCPGForBSCEnabled",!1)),j=Boolean(d.a.result(I.a.get("Permissions"),"IsSPAv2Enabled",!1)),L=Boolean(d.a.result(I.a.get("Permissions"),"IsLocalInventoryAdV2Enabled",!1)),D={standard:1,coop:2,all:3},R=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).configSchema(O,["Attribute","Operand"],i.model,{Attribute:{isValid:function(t){if(e.selectedCondition){var i=e.selectedCondition();if("Brand"===i.Value||"Id"===i.Value)return t.length<=500}return!0},message:P.getString("ProductExtension_SpecificProducts_FilterStringTooLong")}}),e.selected=h.a.observable(!0),e.showRemoveLink=h.a.observable(!1),e.productConditionOptions=h.a.computed(function(){return d.a.filter(i.productConditionOptions,function(e){return!!(L||"Channel"!==e.Value&&"ChannelExclusivity"!==e.Value)&&((M||j)&&i.isCoOpStoreSelected?e.SubTypeFlag===D.coop||e.SubTypeFlag===D.all:e.SubTypeFlag!==D.coop)})}),e.selectedCondition=h.a.computed(function(){return d.a.find(e.productConditionOptions(),{Value:e.Operand()})}),e.selectedCondition.subscribe(function(t){null==t.ValueOptions&&e.Attribute("")}),e.attributeOptions=h.a.computed(function(){return d.a.isEmpty(e.selectedCondition())||d.a.isEmpty(e.selectedCondition().ValueOptions)?[]:d.a.result(e.selectedCondition(),"ValueOptions")}),e.operandText=h.a.computed(function(){return d.a.result(e.selectedCondition(),"Text")}),e.attributeText=h.a.computed(function(){return d.a.isEmpty(e.attributeOptions())?e.Attribute():d.a.result(d.a.find(e.attributeOptions(),{Value:e.Attribute()}),"Text")}),e}return Object(l.a)(t,e),t}(b.a),N=i("e/m7"),V=i.n(N),B=i("ijv9"),F=i.n(B),U=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),G=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.viewModel=new R(e)}},{key:"render",value:function(){return this.$el.html(V()({i18n:U,uuid:F.a})),h.a.applyBindings(this.viewModel,this.el),this}},{key:"close",value:function(){this.trigger("close")}},{key:"validate",value:function(){return this.viewModel.validate()}},{key:"setFocus",value:function(){this.$(".query-attribute",this.el).focus()}},{key:"hasDynamicChildren",value:function(){return!d.a.isEmpty(this.viewModel.selectedCondition())&&d.a.propertyOf(this.viewModel.selectedCondition())("HasChild")}},{key:"events",get:function(){return{"click .glyphicon-remove":"close"}}}]),t}(p.a.View),z=i("nlAS"),H=i.n(z),W=i("1gQY"),q=i.n(W),$=i("1EwD"),K=i.n($),J=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),Z=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.productConditionOptions,i=void 0===t?[]:t,n=e.countryOfSale,a=void 0===n?"US":n,r=e.maxQueriesPerGroup,o=void 0===r?7:r,s=e.campaignCriterion,l=(s=void 0===s?{}:s).Criterion,c=(l=void 0===l?{}:l).ProductConditions,d=void 0===c?[]:c,u=e.isCoOpStoreSelected,p=void 0!==u&&u;this.viewModel=new A,this.queryEditorList=[],this.productConditionOptions=i,this.productConditions=d,this.countryOfSale=a,this.maxQueriesPerGroup=o,this.isCoOpStoreSelected=p}},{key:"render",value:function(){var e=this;return this.$el.html(_()({i18n:J})),h.a.applyBindings(this.viewModel,this.el),d.a.isEmpty(this.productConditions)||!d.a.isArray(this.productConditions)?this.addNewQuery():(d.a.each(this.productConditions,function(t){e.addNewQuery(t)}),this.apply()),this}},{key:"addQueryClickHandler",value:function(){var e=this;d.a.isUndefined(this.lastQuery())?this.addNewQuery():this.validate()?this.lastQuery().hasDynamicChildren()?f.a.resolve(this.getChildProductCondition(this.lastQuery())).then(function(t){d.a.isEmpty(t)||d.a.isEmpty(t.DynamicQueryOption)||e.productConditionOptions.push(t.DynamicQueryOption),e.addNewQuery()}):this.addNewQuery():this.lastQuery().setFocus()}},{key:"addNewQuery",value:function(e){var t=this;if(!d.a.isUndefined(this.lastQuery())){var i=d.a.findIndex(this.productConditionOptions,{Value:this.lastQuery().viewModel.Operand()});this.productConditionOptions.splice(i,1)}var n=new G({productConditionOptions:d.a.clone(this.productConditionOptions),model:e||{},isCoOpStoreSelected:this.isCoOpStoreSelected}).render();this.$(".query-list").append(n.$el),d.a.isEmpty(this.queryEditorList)||(n.viewModel.showRemoveLink(!0),this.lastQuery().viewModel.selected(!1),this.lastQuery().viewModel.showRemoveLink(!1)),this.queryEditorList.push(n),this.canAddNewQuery(),n.on("close",function(){t.queryEditorList.pop(),n.remove(),t.productConditionOptions=d.a.clone(t.lastQuery().options.productConditionOptions),t.lastQuery().viewModel.selected(!0),d.a.size(t.queryEditorList)>1&&t.lastQuery().viewModel.showRemoveLink(!0),t.canAddNewQuery()})}},{key:"lastQuery",value:function(){return d.a.last(this.queryEditorList)}},{key:"canAddNewQuery",value:function(){d.a.size(this.queryEditorList)>=this.maxQueriesPerGroup?this.viewModel.showAddNewButton(!1):this.viewModel.showAddNewButton(!0)}},{key:"getChildProductCondition",value:function(e){var t=this,i="/Campaign/ProductAdExtensions.m/GetChildProductCondition?aid=".concat(q.a.get("account_id"),"&cid=").concat(q.a.get("customer_id"),"&uid=").concat(q.a.get("user_id")),n={countryOfSale:this.countryOfSale?this.countryOfSale:"US","parent.Operand":e.viewModel.Operand(),"parent.Attribute":e.viewModel.Attribute()};return H.a.Product.find(d.a.values(n).join(", "),{url:i,data:n,adapter:"legacy"}).finally(K()()).catch(function(){t.viewModel.errors.add()})}},{key:"validate",value:function(){return d.a.isUndefined(this.lastQuery())||this.lastQuery().validate()}},{key:"apply",value:function(){this.validate()?(this.viewModel.queries(d.a.map(this.queryEditorList,function(e){return{Operand:e.viewModel.operandText(),Attribute:e.viewModel.attributeText()}})),this.viewModel.isEditing(!1),this.trigger("apply:queries")):this.lastQuery().setFocus()}},{key:"edit",value:function(){this.viewModel.isEditing(!0)}},{key:"getValues",value:function(){this.apply();var e={};return d.a.each(this.queryEditorList,function(t,i){var n=t.viewModel.toObject();e["ProductCondition".concat(i+1)]=n.Operand,e["ProductValue".concat(i+1)]=n.Attribute}),e}},{key:"getQueries",value:function(){return d.a.map(this.queryEditorList,function(e){return e.viewModel.toObject()})}},{key:"events",get:function(){return{"click .addNewQuery":"addQueryClickHandler","click .btn-apply":"apply","click .edit-query":"edit"}}}]),t}(p.a.View),Y=i("YK3D"),Q=i.n(Y),X=i("sNFH"),ee=i("aPcP"),te=i("Q3lO"),ie=i("YKsG"),ne=window.globalLegacySchema.get("AdGroup"),ae=function(e){function t(e){var i,n=e.isAudienceCampaign,r=void 0!==n&&n;Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this))).configSchema(ne,["SearchBid"],{SearchBid:Object(ie.defaultBid)()});var l=r?te.MTCampaignTypeEnum.Audience:te.MTCampaignTypeEnum.Shopping;return Object(ee.a)(l)?X.a.extend(Object(v.a)(Object(v.a)(i)),["SearchBid"],!0):X.a.extend(Object(v.a)(Object(v.a)(i)),["SearchBid"]),i}return Object(l.a)(t,e),t}(b.a),re=i("+0jZ"),oe=i.n(re),se=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),le=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.activityLogger,i=e.isAudienceCampaign,n=void 0!==i&&i;this.viewModel=new ae({isAudienceCampaign:n}),this.activityLogger=t}},{key:"render",value:function(){var e=this;return this.$el.html(oe()({i18n:se,accountCurrencyCode:Q.a.AccountCurrencyCode})),this.viewModel.el=this.el,this.viewModel.SearchBid.subscribe(function(){e.activityLogger&&e.activityLogger.signal("default bid change","bid setting")}),this}},{key:"getValues",value:function(){return this.viewModel.SearchBid()}},{key:"validate",value:function(){var e=this.viewModel.validate();return!e&&this.activityLogger&&this.activityLogger.signal("default bid invalid","bid setting"),e}}]),t}(p.a.View),ce=i("eiR/"),de=i("Td3X"),ue=i.n(de),pe=i("ERkP"),ge=i.n(pe),he=i("7nmT"),me=i.n(he),fe=i("W6bG"),ve=i("fE/Z"),be=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={disable:e.startDisabled,checked:!1,selectedItems:[],storeOptions:e.storeOptions},i.originalExcludedStores=[],e.campaignId&&i.loadExcludedStores(e.campaignId),i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"enable",value:function(e){this.state.disable===e&&this.setState({disable:!e,checked:!1,selectedItems:[]})}},{key:"excludedStoreTitleText",value:function(e){return this.props.i18n.get("ShoppingCampaign_Sponsored_ExcludedStores_Count").replace("{0}",e.length)}},{key:"dropDownChange",value:function(e,t){var i=Object(n.a)(this.state.selectedItems);if(t.selected)i.push(t.key);else{var a=i.indexOf(t.key);a>-1&&i.splice(a,1)}this.setState({selectedItems:i})}},{key:"getCriterions",value:function(e){var t=d.a.difference(this.originalExcludedStores,this.state.selectedItems),i=d.a.difference(this.state.selectedItems,this.originalExcludedStores),a=this.getDeleteCriterion(e.Id,t),r=this.getSelectedItemsCriterion(e,i);return Object(n.a)(a).concat(Object(n.a)(r))}},{key:"getSelectedItemsCriterion",value:function(e,t){return d.a.map(t,function(t){var i={CriterionType:"NegativeStore",Criterion:{Type:"NegativeStore",NegativeStoreCriterion:{StoreId:t}}};return e.Id?i.Campaign={Id:e.Id}:i.CampaignName=e.Name,i})}},{key:"getDeleteCriterion",value:function(e,t){var i=d.a.filter(this.originalCriterion,function(e){return d.a.contains(t,e.Criterion.StoreId.toString())});return d.a.map(i,function(t){return{CriterionType:"NegativeStore",Status:"Deleted",Id:t.Id,Criterion:{Type:"NegativeStore",NegativeStoreCriterion:{StoreId:t.Criterion.StoreId}},Campaign:{Id:e}}})}},{key:"loadExcludedStores",value:function(e){var t=this,i=ve.default.currentAccount.Campaigns.$withKey(Number(e));i=i["".concat("CampaignCriterion","s")]["Model.Negative".concat("CampaignCriterion")],H.a.CampaignCriterion.findAll({query:{$filter:"isof(Criterion,'Model.StoreCriterion')"}},{entitySet:i,cacheResponse:!1,bypassCache:!0,headers:{lcid:Q.a.CultureLcid}}).then(function(e){var i=d.a.map(e,function(e){return e.Criterion.StoreId.toString()});if(i.length>0){var a=d.a.difference(i,t.props.storeOptions.map(function(e){return e.Value})),r=Object(n.a)(t.props.storeOptions);a.length>0&&r.push.apply(r,Object(n.a)(d.a.map(a,function(e){return{IsCoOpStore:!0,LinkStoreId:parseInt(e),IsGlobalStore:!1,Selected:!1,Value:e,Text:"ID: ".concat(e," [Invalid ID]")}}))),t.setState({selectedItems:i,disabled:!1,checked:!0,storeOptions:r}),t.originalExcludedStores=Object(n.a)(i),t.originalCriterion=e}})}},{key:"render",value:function(){var e=this,t={onText:"Yes",offText:"No",disabled:this.state.disable,checked:this.state.checked,onChange:function(t,i){e.setState({checked:i,selectedItems:[]})}},i={placeholder:"None",multiSelect:!0,options:d.a.map(this.state.storeOptions,function(e){return{key:e.Value,text:e.Text}}),onRenderTitle:this.excludedStoreTitleText.bind(this),onChange:this.dropDownChange.bind(this),selectedKeys:this.state.selectedItems,errorMessage:this.state.selectedItems.length>10?this.props.i18n.get("ShoppingCampaign_Sponsored_ExcludedStores_Count_Error"):void 0,hidden:!this.state.checked};return ge.a.createElement("div",null,ge.a.createElement(fe.Toggle,t,null),ge.a.createElement(fe.Dropdown,i,null))}}]),t}(ge.a.Component),ye=i("5xDO"),Se=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,e))).onRemove=function(e){var t=i.state.dataSource;d.a.last(e).HasChild&&i.setState({dataSource:t.slice(0,-1)})},i.onAdd=function(e){var t=i.state.dataSource,n=d.a.last(e),a=d.a.result(n,"id"),r=d.a.find(t,function(e){return e.Text===a}),o=d.a.result(d.a.result(n,"data"),"value"),s=d.a.result(r,"Value");r.HasChild&&i.props.getChildProductCondition(o,s).then(function(e){var n=d.a.result(e,"Value");!d.a.isEmpty(n)&&d.a.isUndefined(d.a.find(t,function(e){return e.Value===n}))?i.setState({dataSource:t.concat(d.a.extend(e))}):r.HasChild=!1})},i.state={dataSource:e.dataSource},i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return ge.a.createElement(Oe,Object.assign({},d.a.omit(this.props,"dataSource"),{dataSource:this.state.dataSource,onAddFilterOptionsItemCallback:this.onAdd,onRemoveFilterOptionsItemCallback:this.onRemove}))}}]),t}(ge.a.PureComponent),we=i("faId"),Ce=i("bgLp"),xe=["FreeText","Selection"].reduce(function(e,t){return e[t]=t,e},{}),ke=function(e){for(var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ",a=(t=";;",i="\n",e.split(t).join(i)).split("\n").filter(function(e){return e}),r=a[0].trim(),o=1;o<a.length;o+=1)r="".concat(r).concat(n).concat(a[o].trim());return r},Ae={NotEmpty:function(e,t,i){return i===xe.Selection?!d.a.isEmpty(d.a.result(t,"valueKeys",[])):"string"===typeof e?0!==e.replace(/\s/g,"").length:"number"===typeof e},TotalLength:function(e){return"string"===typeof e?e.replace(/\s/g,"").length<=4e3:"number"===typeof e},SegmentLength:function(e){if("string"===typeof e){var t=ke(e,";;").replace(/\s/g,"").split(";;");return!d.a.any(t,function(e){return e.length>1e3})}return"number"===typeof e}},Te=function(e,t){var i,n=[];return function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(!t)return!1;if(t.Text===i)return n(t),!0;if(t.Children&&t.Children instanceof Array)for(var r=!1,o=0;o<t.Children.length;o++){var s=t.Children[o];if(r=r||e(s,i,n,a))return a(t),!0}return!1}(e,t,function(e){i=e},function(e){n.push(e)}),{target:i,parents:n.reverse()}},_e=0,Ee=[{key:"equal",text:"="},{key:"notequal",text:"\u2260"}],Ie=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,e))).onFilterOptionsItemDeletedHandler=function(){var e=i.state.selectedDataSource,t=Object(c.clone)(e),n=t.pop();i.setState({selectedDataSource:t}),i.props.onRemoveFilterOptionsItemCallback(t,n)},i.onAddNewQuery=function(e){if(Object(c.last)(e).isValid){var t=i.props.dataSource,n=i.state.selectedDataSource,a=i.getSelectedDataSourceAndSelectableDataSource(t,n.map(function(e){return i.keyExtractor(e)})).selectableDataSource,r=Object(c.clone)(n),o=Object(c.clone)(a.filter(function(e){return!Object(c.find)(n,function(t){return i.keyExtractor(t)===i.keyExtractor(e)})})).shift();r.push(o),i.setState({selectedDataSource:r}),i.props.onAddFilterOptionsItemCallback(e,o)}},i.onDataModelChange=function(e){var t=i.getDataModelKeyHash(e);if(i.currentDataModelKeyHash!==t){var n=e.map(function(e){return e.id}),a=Object(c.last)(n),r=n.slice(0,-1);i.setSelectedAndSelectableDataSource(r,a),i.currentDataModelKeyHash=t}},i.getDataModelKeyHash=function(e){return e.reduce(function(e,t){return e+t.id},"")},i.getSelectedDataSourceAndSelectableDataSource=function(e,t){for(var n=[],a=[],r=0;r<t.length;r++)for(var o=t[r],s=e,l=0;l<s.length;l++){var d=s[l],u=Te(d,o),p=u.target,g=u.parents;if(p){var h=p.Children||[],m=0!==g.length?g.reduce(function(e,t){return e.concat(t.Children||[])},[]):[];n.push(p),a=a.concat(m,h)}else a.push(d)}return{selectedDataSource:n,selectableDataSource:a=(a=Object(c.uniq)(a,"Text")).filter(function(e){return!Object(c.contains)(t,i.keyExtractor(e))})}},i.getSelectedAndSelectableDataSourceWhenSelecting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=i.props.dataSource;return{selectableDataSource:i.getSelectedDataSourceAndSelectableDataSource(n,e).selectableDataSource,selectedDataSource:i.getSelectedDataSourceAndSelectableDataSource(n,e.concat(t)).selectedDataSource}},i.setSelectedAndSelectableDataSource=function(e,t){var n=i.props.dataSource;if(e&&0!==e.length){var a=i.getSelectedAndSelectableDataSourceWhenSelecting(e,t).selectedDataSource;i.setState({selectedDataSource:a})}else i.setState({selectedDataSource:n.filter(function(e){return i.keyExtractor(e)===t})})},i.setDataModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{key:"",value:"",operator:"",keyText:"",valueText:"",operatorText:"",valueKeys:null},n=t.key,a=t.value,r=t.operator,o=t.keyText,s=t.valueText,l=t.operatorText,d=t.valueKeys,u=i.dataModel,p=Object(c.find)(u,function(t){return t.id===e});p&&(n&&(p.data.key=n),a&&(p.data.value=a),r&&(p.data.operator=r),o&&(p.data.keyText=o),s&&(p.data.valueText=s),l&&(p.data.operatorText=l),d&&(p.data.valueKeys=d),p.trigger("Change",p.data),i.onDataModelChange(i.dataModel))},i.getValueOnApply=function(e){return i.props.enableMultiSelect?e.valueKeys.length>0?e.valueKeys.join(", "):e.valueText?e.valueText:ke(e.value):e.value},i.keyExtractor=function(e){return e.Text},i.ValidateDataModel=function(){i.dataModel.forEach(function(e){return e.validate()})},i.OnApply=function(){i.ValidateDataModel();var e=i.dataModel.reduce(function(e,t){return e&&t.isValid},!0);i.props.onApply({data:i.dataModel,isValid:e,dataSource:i.props.dataSource}),e&&i.setState({isShowPreview:!0,previewContent:i.dataModel.map(function(e){return{key:e.data.keyText,operator:i.props.enableOperator?e.data.operatorText:"=",value:i.getValueOnApply(e.data)}})})},i.OnAddQuery=function(){i.ValidateDataModel(),i.onAddNewQuery(i.dataModel)},i.dataCollotor=function(e){var t=e.index,n=e.dataModel;i.dataModel[t]=n,i.onDataModelChange(i.dataModel)},i.clearDataModelItem=function(e){i.dataModel.splice(e,1),i.onDataModelChange(i.dataModel)},i.initState=function(){var e=i.props,t=e.dataSource,n=e.defaultSelectedDataSource;if(n){var a=n.map(function(e){return i.keyExtractor(e)}),r=i.getSelectedDataSourceAndSelectableDataSource(t,a).selectedDataSource;i.state={selectedDataSource:r,isShowPreview:!0,previewContent:[{key:"",operator:"",value:""}]}}else i.state={selectedDataSource:[t[_e]],isShowPreview:!1,previewContent:[{key:"",operator:"",value:""}]}},i.isAbleToAddNewQuery=function(){var e=i.state.selectedDataSource,t=i.props.maximumFiltersCount;return e.length<t&&e.length<i.totalNodesCountInDataSource},i.isDeletable=function(e){var t=i.state.selectedDataSource;return e===t.length-1&&t.length>1},i.isDisabled=function(e){var t=i.state.selectedDataSource;return 1!==t.length&&e!==t.length-1},i.handleOnEdit=function(){i.setState({isShowPreview:!1})},i.renderGroupItems=function(){return i.state.selectedDataSource.map(function(e,t){var n,a=e.Text,r=e.ValueOptions,o=e.Value,s=i.props.dataSource,l=i.state.selectedDataSource,d=Object(c.map)(l,function(e){return e.Text}),u=Object(c.size)(d)<=1?s.slice():Object(c.result)(i.getSelectedAndSelectableDataSourceWhenSelecting(d.slice(0,-1)),"selectableDataSource",[]);n=Object(c.find)(u,function(e){return i.keyExtractor(e)===a})?u.map(function(e){return{key:i.keyExtractor(e),text:e.Text}}):[e].concat(u).map(function(e){return{key:i.keyExtractor(e),text:e.Text}});var p=e.ValueOptions?e.ValueOptions.map(function(e){return{key:i.keyExtractor(e),text:e.Text}}):null,g=i.isDeletable(t),h=i.isDisabled(t),m=i.props.enableOperator&&!Object(c.contains)(i.props.blacklistOperator,o),f=i.props.enableMultiSelect&&!Object(c.contains)(i.props.blacklistMultiSelect,o);return ge.a.createElement(je,{key:a,validationRules:[{rule:"NotEmpty",errorMessage:i.props.i18nLegacy.getString("Filter_Validation_Common_Required")},{rule:"TotalLength",errorMessage:i.props.i18nLegacy.getString("Product_Condition_Validation_Common_Max_Length")},{rule:"SegmentLength",errorMessage:i.props.i18nLegacy.getString("Product_Condition_Validation_Common_Max_Segment")}],dataCollotor:i.dataCollotor,onFilterOptionsItemDeleted:i.onFilterOptionsItemDeletedHandler,clearParentDataModel:i.clearDataModelItem,index:t,type:r?xe.Selection:xe.FreeText},ge.a.createElement(Be,{type:r?xe.Selection:xe.FreeText,itemKey:a,key:a,keyOptions:n,value:o,valueOptions:p,operatorOptions:Ee,deletable:g,disabled:h,keyOptionsDefaultSelectedKey:a,enableOperator:m,enableMultiSelect:f,blacklistOperator:i.props.blacklistOperator,blacklistMultiSelect:i.props.blacklistMultiSelect}))})},i.dataModel=[],i.initState(),i.currentDataModelKeyHash="",i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;null!==this.props.defaultSelectedDataSource&&setTimeout(function(){e.props.defaultSelectedDataSource.slice(0,e.props.maximumFiltersCount).map(function(t){if(null===t.ValueOptions)return e.setDataModel(e.keyExtractor(t),{operator:e.getOperatorObject(t.PresetOperator),value:t.PresetValue});var i=Object(c.find)(t.ValueOptions,function(e){return e.Selected}),n=Object(c.chain)(t.ValueOptions).where({Selected:!0}).pluck("Value").value();return e.setDataModel(e.keyExtractor(t),{operator:e.getOperatorObject(t.PresetOperator),value:i.Value,valueText:i.Text,valueKeys:n})}),e.OnApply()},0)}},{key:"getOperatorObject",value:function(e){return Object(c.find)(Ee,function(t){return t.key===(e||"equal")})}},{key:"render",value:function(){var e=this.props,t=e.classes,i=t.Container,n=t.AddNewQuery,a=t.BottomButtonContainer,r=t.Invisible,o=e.i18nLegacy,s=e.id,l=this.state,c=l.isShowPreview,u=l.previewContent;return this.totalNodesCountInDataSource=this.props.dataSource.reduce(function(e,t){return e+function e(t){return d.a.reduce(t.Children,function(t,i){return t+e(i)},0)+1}(t)},0),ge.a.createElement(ge.a.Fragment,null,ge.a.createElement("div",{className:c?r:i,id:s},this.renderGroupItems(),this.isAbleToAddNewQuery()&&ge.a.createElement("div",{className:n},ge.a.createElement(fe.CommandButton,{id:"filter_options_group_addQueryButton",iconProps:{iconName:"Add"},text:o.getString("ShoppingCampaign_Add_AnotherQuery"),styles:{padding:"0"},onClick:this.OnAddQuery})),ge.a.createElement("div",{className:a},ge.a.createElement(fe.PrimaryButton,{id:"filter_options_group_applyButton",text:o.getString("Apply"),onClick:this.OnApply}))),ge.a.createElement(Ue,{key:"Preview",onEdit:this.handleOnEdit,Content:u,i18nLegacy:o,showPreview:c}))}}]),t}(ge.a.PureComponent);Ie.defaultProps={onApply:c.noop,onAddFilterOptionsItemCallback:c.noop,onRemoveFilterOptionsItemCallback:c.noop,defaultSelectedDataSource:null,id:"FilterOptionsGroupContainer",maximumFiltersCount:100,enableOperator:!1,enableMultiSelect:!1,blacklistOperator:[],blacklistMultiSelect:[]};var Oe=Object(we.withDefaultStyles)(Ie,function(){return{Container:{width:"100%",border:"1px solid #605E5C",padding:"10px",boxSizing:"border-box",marginBottom:"12px"},Invisible:{display:"none"},AddNewQuery:{"& .ms-Button--command":{padding:"0","& i.ms-Button-icon":{marginLeft:"0"},"& div.ms-Button-textContainer":{color:"rgb(0, 120, 212)"},"&:hover div.ms-Button-textContainer":{color:"rgb(0, 69, 120)",textDecoration:"underline"}}},BottomButtonContainer:{marginTop:"15px"}}}),Pe=function e(t){var i=t.id,n=t.data,r=t.validationRules,o=t.validateCallBack,s=t.isValid,l=void 0===s||s,c=t.errorMessages,d=void 0===c?[]:c,u=t.type;Object(a.a)(this,e),this.data=n,this.id=i,this.validationRules=r,this.validateCallBack=o,this.isValid=l,this.errorMessages=d,this.subscribeList={},this.type=u};Pe.prototype.getValidationRules=function(){var e=this.validationRules,t=null;return e&&(t=e.map(function(e){var t=e.rule,i=e.errorMessage;return"string"===typeof t?Ae[t]?{validationFunction:Ae[t],errorMessage:i}:null:{validationFunction:t,errorMessage:i}})),t},Pe.prototype.validate=function(){var e=this.data?this.data.value:null,t=Object(c.result)(this,"type"),i=this.getValidationRules(),n=[],a=!0;if(null!==i)for(var r=0;r<i.length;r+=1){var o=i[r];if(o){var s=o.errorMessage;if(!(0,o.validationFunction)(e,this.data,t)){a=!1,n.push(s);break}}}this.validateCallBack&&this.validateCallBack({errorMessages:n}),this.isValid=a,this.errorMessages=n},Pe.prototype.subscribe=function(e,t){void 0===this.subscribeList[e]?this.subscribeList[e]=[t]:this.subscribeList[e].push(t)},Pe.prototype.trigger=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;void 0!==this.subscribeList[e]&&this.subscribeList[e].forEach(function(e){return e.apply(t,[t.data,i])})};var Me=[],je=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,e))).validateCallBack=function(e){var t=e.errorMessages;i.setState({errorMessage:t})},i.CollectData=function(e){i.dataModel.id=e.key,i.dataModel.data=e,i.props.dataCollotor({index:i.props.index,dataModel:i.dataModel}),i.setState({errorMessage:Me})},i.OnFilterOptionsItemDeleted=function(){i.props.clearParentDataModel(i.props.index),i.props.onFilterOptionsItemDeleted()},i.dataModel=new Pe({id:null,data:null,validationRules:i.props.validationRules,validateCallBack:i.validateCallBack,type:i.props.type}),i.state={errorMessage:Me},i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearParentDataModel(this.props.index)}},{key:"render",value:function(){var e=this.props.children,t={CollectData:this.CollectData,errorMessage:this.state.errorMessage,onFilterOptionsItemDeleted:this.OnFilterOptionsItemDeleted,dataModel:this.dataModel};return ge.a.createElement(ge.a.Fragment,null,function(e,t){var i=ge.a.Children.map(e,function(e,i){return ge.a.cloneElement(e,Object(Ce.a)({},t,{index:i}))});return ge.a.createElement(ge.a.Fragment,null,i)}(e,t))}}]),t}(ge.a.PureComponent);je.defaultProps={index:0,validationRules:null,onFilterOptionsItemDeleted:c.noop,dataCollotor:c.noop,clearParentDataModel:c.noop,type:xe.FreeText};var Le=i("a28/"),De=i("6e2+"),Re=i("O94r"),Ne=i.n(Re),Ve=function(e){var t=e.classes,i=t.Container,a=t.OperandContainer,r=t.OperatorContainer,o=t.OperandValueContainer,s=t.DeleteButtonContainer,l=t.TextArea,d=e.keyOptions,u=e.valueOptions,p=e.operatorOptions,g=e.keyOptionsDefaultSelectedKey,h=e.valueOptionsDefaultSelectedKey,m=e.operatorDefaultSelectedKey,f=e.CollectData,v=e.type,b=e.disabled,y=e.deletable,S=e.itemKey,w=e.onFilterOptionsItemDeleted,C=e.errorMessage,x=e.dataModel,k=e.enableOperator,A=e.enableMultiSelect,T=ge.a.useState(),_=Object(De.a)(T,2),E=_[0],I=_[1],O=ge.a.useState(),P=Object(De.a)(O,2),M=P[0],j=P[1],L=ge.a.useState(),D=Object(De.a)(L,2),R=D[0],N=D[1],V=ge.a.useState(),B=Object(De.a)(V,2),F=B[0],U=B[1],G=ge.a.useState(),z=Object(De.a)(G,2),H=z[0],W=z[1],q=function(e){if(x&&x.data.valueKeys){var t=Object(n.a)(x.data.valueKeys);return!1!==e.selected?(Object(c.contains)(t,e.key)||t.push(e.key),t):t.filter(function(t){return t!==e.key})}return!1!==e.selected?[e.key]:[]};Object(pe.useEffect)(function(){var e=Object(c.find)(d,function(e){return e.key===g}),t=Object(c.find)(u,function(e){return e.key===h}),i=Object(c.find)(p,function(e){return e.key===(x.data?x.data.operator:m)});f({key:E&&E.key||S,value:(M?M.key:null)||R,operator:F&&F.key||(i?i.key:null),keyText:E&&E.text||(e?e.text:null),valueText:M?M.text:t?t.text:null,operatorText:F&&F.text||(i?i.text:null),valueKeys:M?q(M):[]})},[R,E,M,F,H]),Object(pe.useEffect)(function(){x.subscribe("Change",function(e){v===xe.FreeText?N(e.value):(j({key:e.value,text:e.valueText}),W(e.valueKeys)),k&&U(e.operator)})},[]);var $=C.join("\n")||null;return ge.a.createElement("div",{className:i,id:"FilterOptionItem_".concat(S)},ge.a.createElement("div",{className:a},ge.a.createElement(fe.Dropdown,{className:"FilterOptionItemDropdownKey",selectedKey:E?E.key:g,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(t)},options:d,disabled:b})),ge.a.createElement("div",{className:r},k?ge.a.createElement(fe.Dropdown,{className:"FilterOptionItemDropdownOperator",selectedKey:F?F.key:m,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};U(t)},options:p,disabled:b,style:{width:64,marginLeft:12,marginRight:12}}):ge.a.createElement("span",{className:"defaultOperator"},"=")),ge.a.createElement("div",{className:o},v===xe.FreeText?ge.a.createElement(fe.TextField,{className:"FilterOptionItemDropdownValue",disabled:b,inputClassName:Ne()(Object(Le.a)({},l,A)),onChange:function(e){N(e.target.value)},value:R,errorMessage:$,multiline:A,autoAdjustHeight:A}):A?ge.a.createElement(fe.Dropdown,{className:"FilterOptionItemDropdownValue",multiSelect:!0,multiSelectDelimiter:", ",errorMessage:$,selectedKeys:H||(M?M.key:h),onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(t),W(q(t))},options:u,disabled:b}):ge.a.createElement(fe.Dropdown,{className:"FilterOptionItemDropdownValue",errorMessage:$,selectedKey:M?M.key:h,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(t)},options:u,disabled:b})),y?ge.a.createElement("div",{role:"button",tabIndex:0,className:s,onClick:function(){w({key:S})}},ge.a.createElement("span",{className:"close"})):null)};Ve.defaultProps={type:xe.FreeText,disabled:!1,deletable:!1,onFilterOptionsItemDeleted:c.noop,errorMessage:[],valueOptions:null,keyOptionsDefaultSelectedKey:void 0,valueOptionsDefaultSelectedKey:void 0,operatorDefaultSelectedKey:"equal",enableOperator:!1,enableMultiSelect:!1};var Be=Object(we.withDefaultStyles)(Ve,function(){return{Container:{display:"flex",margin:"2px 0 2px 0","& .is-disabled":{border:"1px solid rgb(179, 176, 173)",borderRadius:"2px"},"& .ms-Dropdown-title":{borderRadius:"2px"},"& .ms-TextField .ms-TextField-fieldGroup":{borderRadius:"2px"}},OperandContainer:{width:"186px"},OperatorContainer:{"& span.defaultOperator":{display:"block",lineHeight:"32px",padding:"0 39px"}},OperandValueContainer:{width:"186px",maxHeight:"80px",height:"100%"},TextArea:{maxHeight:80,overflow:"hidden scroll","&::-webkit-scrollbar":{width:4,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{width:4,height:44,backgroundColor:"#EBEAE8"}},DeleteButtonContainer:{outline:"none","& .close":{outline:"none",display:"block",position:"relative",width:"14px",height:"100%",opacity:"1",left:"12px","&:hover":{opacity:"0.5",cursor:"pointer"},"&::before, &::after":{position:"absolute",left:"6px",top:"9px",content:'" "',height:"14px",width:"1px",backgroundColor:"rgb(96, 94, 92)"},"&::before":{transform:"rotate(45deg)"},"&::after":{transform:"rotate(-45deg)"}}}}}),Fe=function(e){var t=e.classes,i=t.Container,n=t.ContentContainer,a=t.EditButton,r=t.InVisible,o=e.Content,s=e.onEdit,l=e.showPreview,c=e.i18nLegacy,d=function(){s()};return ge.a.createElement("div",{className:l?i:r,id:"FilterOptionsGroupPreivew"},ge.a.createElement("div",{className:n},o.map(function(e,t){var i=e.key,n=e.operator,a=e.value;return t+1!==o.length?ge.a.createElement("div",{key:i,className:"PreviewItem"},"".concat(i," ").concat(n," ").concat(a," &")):ge.a.createElement("div",{key:i,className:"PreviewItem"},"".concat(i," ").concat(n," ").concat(a))})),ge.a.createElement("a",{role:"button",tabIndex:0,className:a,onClick:d,onKeyDown:d},c.getString("ShoppingCampaign_Edit")))};Fe.defaultProps={showPreview:!1};var Ue=Object(we.withDefaultStyles)(Fe,function(){return{Container:{width:"100%",border:"1px solid #605E5C",padding:"10px",boxSizing:"border-box",display:"flex"},InVisible:{display:"none"},ContentContainer:{flex:1},EditButton:{outline:"none",color:"rgb(0, 120, 212)","&:hover":{textDecoration:"underline",cursor:"pointer"}}}}),Ge={dropdown:{width:"300px"}};i.d(t,"a",function(){return Ye});var ze=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),He=Boolean(d.a.result(I.a.get("Permissions"),"IsLocalInventoryAdsEnabled")),We=Boolean(d.a.result(I.a.get("Permissions"),"IsCPGForBSCEnabled",!1)),qe=Boolean(d.a.result(I.a.get("Permissions"),"IsSPAv2Enabled",!1)),$e=Boolean(d.a.result(I.a.get("Permissions"),"IsEnhancedPAFilterP1Enabled")),Ke=Boolean(d.a.result(I.a.get("Permissions"),"IsLocalInventoryAdV2Enabled",!1)),Je=Boolean(d.a.result(I.a.get("Permissions"),"IsCategoryandIdfilterforaudiencecampaiginEnabled",!1)),Ze={DynamicDataToursAndActivitiesFeed:ze.getString("DynamicDataToursAndActivitiesFeed"),DynamicDataAutosListingFeed:ze.getString("DynamicDataAutosListingFeed"),DynamicDataAutosAggregateFeed:ze.getString("DynamicDataAutosAggregateFeed"),DynamicDataHotelsAndVacationRentalsFeed:ze.getString("DynamicDataHotelsAndVacationRentalsFeed"),DynamicDataEventsFeed:ze.getString("DynamicDataEventsFeed"),DynamicDataRealEstateListingFeed:ze.getString("DynamicDataRealEstateListingFeed"),DynamicDataRealEstateAggregateFeed:ze.getString("DynamicDataRealEstateAggregateFeed"),DynamicDataCreditCardsFeed:ze.getString("DynamicDataCreditCardsFeed"),DynamicDataCustomFeed:ze.getString("DynamicDataCustomFeed"),DynamicDataProfessionalServiceFeed:ze.getString("DynamicDataProfessionalServiceFeed")},Ye=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.model,a=void 0===i?{}:i,r=e.data,o=void 0===r?{ProductConditionOptions:[],CampaignCriterionsData:{},ProductCollectionAccounts:[],SalesCountryCollection:[],DynamicDataFeedConditionOptions:{}}:r,s=e.feedData,l=void 0===s?null:s,c=e.campaignType,u=void 0===c?"Shopping":c,p=e.campaignSubType,g=void 0===p?null:p,h=e.campaignId,m=void 0===h?void 0:h,f=e.isStoreValid,v=void 0===f||f,b=e.isSponsoredSettings,y=void 0===b?{isSponsoredCampaign:!1,isSponsoredPilotEnabled:!1}:b,S=e.editMode,w=e.activityLogger,x=e.bidStrategyUpdater,k=void 0===x?null:x,A=e.shouldShowPlaceholderStoreIfExists,T=void 0!==A&&A,_=e.deps,E=void 0===_?{}:_,O=e.isSearchCampaign,P=void 0!==O&&O;this.campaignType=u,this.campaignSubType=g,this.isAudienceCampaign="Audience"===u,this.campaignId=m,this.isSponsoredSettings=y,this.isStoreValid=v&&o.ProductCollectionAccounts.length>0,this.activityLogger=w,this.bidStrategyUpdater=k,this.isEnabledDynamicFeedCampaign=Boolean(d.a.result(I.a.get("Permissions"),"IsEnabledForDynamicFeedCampaign"))&&this.isAudienceCampaign,this.feedData=l,this.shouldShowPlaceholderStoreIfExists=T,this.selectedCategory=null,this.DynamicDataFeedConditionOptions=o.DynamicDataFeedConditionOptions,this.isToggledByNewComponent=!1,this.filterDataComesFrom="None",this.isDynamicDataFeedFiltersValid=!1,this.DynamicDataFeedFiltersData=null,this.isDynamicDataFeedBasedCampaign="AudienceDynamicFeedBased"===g,this.deps=E,this.isSearchCampaign=P,this.enableOperator=$e&&"Shopping"!==this.campaignType,this.enableMultiSelect=$e&&"Shopping"!==this.campaignType,this.onSelectionChange=this.onSelectionChange.bind(this),this.onApplyFilterNewComponent=this.onApplyFilterNewComponent.bind(this),this.clickApplyButton=this.clickApplyButton.bind(this),this.previousStore={IsCoOpStore:null},this.editMode=null==S?!d.a.isEmpty(a):S,this.model=a,this.storeData={storeOptions:Object(n.a)(o.ProductCollectionAccounts),excludedStoreOptions:null};var M=null,j=d.a.findIndex(this.storeData.storeOptions,function(e){return e.IsGlobalStore});if(j>=0&&(M=this.storeData.storeOptions[j],this.globalStoreId=M.LinkStoreId,this.storeData.storeOptions.splice(j,1)),y.isSponsoredPilotEnabled&&(this.storeData.storeOptions=d.a.filter(this.storeData.storeOptions,function(e){return e.IsCoOpStore===y.isSponsoredCampaign}),y.isSponsoredCampaign&&(this.storeData.excludedStoreOptions=Object(n.a)(this.storeData.storeOptions),M&&(M.Text=ze.get("ShoppingCampaign_Sponsored_AllLinkedStores"),this.storeData.storeOptions.splice(0,0,M)))),this.viewModel=new C({model:a,editMode:this.editMode,data:o,isLocalInventoryAdsEnabled:He,storeData:this.storeData,isSponsoredCampaign:y.isSponsoredCampaign,campaignType:this.campaignType,campaignSubType:this.campaignSubType,isEnabledDynamicFeedCampaign:this.isEnabledDynamicFeedCampaign,shouldShowPlaceholderStoreIfExists:this.shouldShowPlaceholderStoreIfExists,deps:this.deps,isSearchCampaign:this.isSearchCampaign}),this.isEnabledDynamicFeedCampaign&&this.isDynamicDataFeedBasedCampaign&&this.editMode){var L=this.model.FeedId||this.model.ProviderId;this.selectedFeed=d.a.find(this.feedData,function(e){return e.Id===L.toString()}),this.selectedFeed||this.activityLogger.error("can not find Feed data, feedId is ".concat(L)),this.selectedCategory=this.selectedFeed.FeedType,this.defaultSelectedDataSource=[];var D=this.DynamicDataFeedConditionOptions[this.selectedCategory],R=d.a.get(o,["CampaignCriterionsData","Criterion","ProductConditions"])||[];this.defaultSelectedDataSourceHelper(D,R),this.viewModel.setFeedId(L.toString())}else $e&&this.editMode&&(this.defaultSelectedDataSource=[],this.defaultSelectedDataSourceHelper(o.ProductConditionOptions,d.a.get(o,["CampaignCriterionsData","Criterion","ProductConditions"])||[]));this.productGroup=null,this.productConditionOptions=o.ProductConditionOptions,this.isAudienceCampaign&&(Je||(this.productConditionOptions=d.a.reject(this.productConditionOptions,function(e){return["Id","CategoryL1"].indexOf(e.Value)>=0}))),this.campaignCriterion=o.CampaignCriterionsData,this.viewModel.SalesCountry.subscribe(function(){t.viewModel.selectAllProducts(!0),t.removeProductGroup(),t.validateProductOfferCount()}),this.viewModel.productScope.subscribe(function(e){t.activityLogger&&t.activityLogger.signal("shopping campaign product scope change: ".concat(e),"shopping campaign settings"),t.validateProductOfferCount()}),this.viewModel.ProviderId.subscribe(function(){t.validateProductOfferCount()}),(We||y.isSponsoredCampaign)&&(this.viewModel.selectedStore.subscribe(function(e){t.storeChanged(e)}),this.isEnabledDynamicFeedCampaign||this.storeChanged(this.viewModel.selectedStore())),this.isEnabledDynamicFeedCampaign&&this.viewModel.FeedId.subscribe(function(e){t.trigger("feedChanged",e)}),this.activityLogger&&d.a.each(this.viewModel.fields,function(e){t.viewModel[e].subscribe(function(i){t.activityLogger.signal("shopping campaign settings field change ".concat(e," : ").concat(i),"shopping campaign settings")})})}},{key:"defaultSelectedDataSourceHelper",value:function(e,t){var i=this;t.forEach(function(t){for(var n,a=0;a<e.length;a++){var r=e[a];!i.isDynamicDataFeedBasedCampaign&&r&&r.Value===t.Operand&&(t.Operand=r.Text);var o=Te(r,t.Operand).target;if(o){n=o;break}}if(n){var s=d.a.clone(n);if(s.PresetOperator=t.Operator,s.ValueOptions){var l=s.ValueOptions,c=function(e,t){return e.Value.toUpperCase()===t.toUpperCase()||e.Text.toUpperCase()===t.toUpperCase()},u=t.Attribute.split(";;"),p=d.a.find(l,function(e){return c(e,u[0])}),g=[];u.forEach(function(e){g.push(d.a.find(l,function(t){return c(t,e)}))}),i.isDynamicDataFeedBasedCampaign||l.forEach(function(e){e.Value=e.Text}),p?(p.Selected=!0,g.forEach(function(e){return e.Selected=!0})):i.activityLogger.error("can not find user selected value option item which is ".concat(JSON.stringify(t)))}else s.PresetValue=i.multilineValueInputProcessor(t.Attribute);i.defaultSelectedDataSource.push(s)}else i.activityLogger.error("can not find user selected production condition item which is ".concat(JSON.stringify(t)))})}},{key:"multilineValueInputProcessor",value:function(e){var t=e.split(";;");if(!$e||1===t.length)return e;for(var i=t[0],n=1;n<t.length;n++)i="".concat(i,"\n").concat(t[n]);return i}},{key:"multilineValueOutProcessor",value:function(e){for(var t=e.replaceAll("\n",";;").split("\n").filter(function(e){return e}),i=t[0].trim(),n=1;n<t.length;n++)i="".concat(i,";;").concat(t[n].trim());return i}},{key:"render",value:function(){if(this.$el.html(k()({i18n:ze,editMode:this.editMode,isLocalInventoryAdsEnabled:He,isCPGForBSCEnabled:We,isAudienceCampaign:this.isAudienceCampaign,isSponsoredCampaign:this.isSponsoredSettings.isSponsoredCampaign,campaignType:this.campaignType,campaignSubType:this.campaignSubType,isEnabledDynamicFeedCampaign:this.isEnabledDynamicFeedCampaign,isSearchCampaign:this.isSearchCampaign})),this.editMode){if(this.isEnabledDynamicFeedCampaign&&this.isDynamicDataFeedBasedCampaign){var e=this.selectedFeed?"FeedId: ".concat(this.selectedFeed.Id,", Name: ").concat(this.selectedFeed.Name):"FeedId: ".concat(this.model.ProviderId);this.viewModel.storeText(e)}}else this.renderCatagrizedOptionsList();if(this.isEnabledDynamicFeedCampaign&&this.isAudienceCampaign&&this.trigger("feedChanged",this.selectedFeed?this.selectedFeed.Id:""),this.shouldShowPlaceholderStoreIfExists&&this.viewModel.isSelectedStoreAPlaceholderStore({ProductCollectionAccounts:this.storeData.storeOptions,selectedStoreId:this.model.ProviderId})){var t={hasDraftStore:!0,i18n:ze,isNewUII18n:!1,scope:{values:{aid:q.a.get("account_id"),cid:q.a.get("customer_id"),uid:q.a.get("user_id")}}};me.a.render(ge.a.createElement(this.deps.gmcToMMCGridDeps.DraftAlert,t,null),this.$(".draft-store-alert-container").get(0))}if(h.a.applyBindings(this.viewModel,this.el),this.editMode||"ShoppingSmartAds"===this.campaignSubType||(this.bidSetting=new le({activityLogger:this.activityLogger,isAudienceCampaign:this.isAudienceCampaign}).render(),this.$(".bid-settings").append(this.bidSetting.$el)),this.editMode&&this.hasFilteredProducts()&&(this.isDynamicDataFeedBasedCampaign||$e?!this.isDynamicDataFeedBasedCampaign&&$e?this.renderProductGroup(this.productConditionOptions,this.campaignCriterion,this.defaultSelectedDataSource):this.renderDynamicFeedFilterGroup({dataSource:this.DynamicDataFeedConditionOptions[this.selectedCategory],defaultSelectedDataSource:this.defaultSelectedDataSource}):this.renderProductGroup(this.productConditionOptions,this.campaignCriterion)),this.isSponsoredSettings.isSponsoredCampaign){var i={storeOptions:this.viewModel.excludedStoreOptions(),campaignId:this.editMode&&this.viewModel.ProviderId()===this.globalStoreId?this.campaignId:void 0,startDisabled:this.editMode&&this.viewModel.ProviderId()!==this.globalStoreId,i18n:ze};this.excludedStores=me.a.render(ge.a.createElement(be,i,null),this.$(".excluded-store-controls").get(0))}return this.validateProductOfferCount(),this}},{key:"onSelectionChange",value:function(e){var t=e.category,i=e.optionKey;this.selectedCategory=t,this.isSelectedStore()?(this.SetStoreProviderId(i.toString()),this.viewModel.setFeedId("")):(this.SetStoreProviderId(""),this.viewModel.setFeedId(i.toString())),this.viewModel.hasFilteredProducts()&&this.filterProducts()}},{key:"onApplyFilterNewComponent",value:function(e){var t=e.data,i=e.isValid,n=e.dataSource;this.isDynamicDataFeedFiltersValid=i,this.DynamicDataFeedFiltersData=t,this.newComponentDataSource=n}},{key:"clickApplyButton",value:function(){var e=this.$("#filter_options_group_applyButton");e.is(":visible")&&e.get(0).click()}},{key:"getDynamicFeedFiltersConditionData",value:function(){var e=this;if(d.a.isEmpty(this.DynamicDataFeedFiltersData))return null;var t=this.DynamicDataFeedFiltersData;if("Stores"===this.selectedCategory||"Shopping"===this.campaignType||"AudienceFeedBased"===this.campaignSubType){var i=d.a.defaults(d.a.reduce(this.productConditionOptions,function(e,t){return e[t.Text]=t.Value,e},{}),d.a.reduce(this.newComponentDataSource,function(e,t){return e[t.Text]=t.Value,e},{}));t=d.a.map(this.DynamicDataFeedFiltersData,function(e){return d.a.defaults({data:d.a.defaults({key:i[e.data.key]},e.data)},e)})}return t.reduce(function(t,i,n){return t["ProductCondition".concat(n+1)]=i.data.key,t["ProductValue".concat(n+1)]=e.enableMultiSelect?i.data.valueKeys.join(";;")||e.multilineValueOutProcessor(i.data.value):i.data.value,$e&&"Shopping"!==e.campaignType&&(t["ProductOperator".concat(n+1)]=i.data.operator),t},{})}},{key:"isSelectedStore",value:function(){return"Stores"===this.selectedCategory}},{key:"SetStoreProviderId",value:function(e){this.viewModel.setProviderId(e)}},{key:"TransformStoreAndFeedData",value:function(e){var t=e.storeData,i=e.feedData;return this.CategrizeStoreData(t).concat(this.CategrizeFeedData(i))}},{key:"CategrizeStoreData",value:function(e){return[{key:"Stores",text:ze.getString("DynamicFeedCampaign_Stores"),value:e.storeOptions.map(function(e){return{key:e.Value,text:e.Text}})}]}},{key:"CategrizeFeedData",value:function(e){var t=this;if(!e)return[];var i=d.a.groupBy(e,function(e){return e.FeedType}),n=d.a.mapObject(i,function(e,i){return{key:i,text:t.MapFeedTypeToDisplayString(i),value:d.a.map(e,function(e){return{key:e.Id,text:e.Name}})}});return d.a.values(n)}},{key:"MapFeedTypeToDisplayString",value:function(e){return Ze[e]?Ze[e]:e}},{key:"storeChanged",value:function(e){this.productGroup&&(this.viewModel.selectAllProducts(!0),this.removeProductGroup()),this.excludedStores&&this.excludedStores.enable(e.LinkStoreId===this.globalStoreId),this.bidStrategyUpdater&&!this.isSponsoredSettings.isSponsoredCampaign&&this.previousStore.IsCoOpStore!==e.IsCoOpStore&&this.bidStrategyUpdater(e.IsCoOpStore),this.trigger("storeChanged",e),this.previousStore=e}},{key:"isCoOpStoreSelected",value:function(){return!(!We&&!this.isSponsoredSettings.isSponsoredCampaign||!this.viewModel.selectedStore().IsCoOpStore)||!(!this.isSponsoredSettings.isSponsoredCampaign||!this.viewModel.selectedStore().IsGlobalStore)}},{key:"refreshData",value:function(e,t){this.viewModel.setModel(d.a.first(e.CampaignSettings)),this.removeProductGroup(),this.productConditionOptions=t.ProductConditionOptions,this.campaignCriterion=t.CampaignCriterionsData,this.campaignCriterion?(this.viewModel.selectAllProducts(!1),this.renderProductGroup(this.productConditionOptions,this.campaignCriterion)):this.viewModel.selectAllProducts(!0)}},{key:"renderProductGroup",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if($e){var a={standard:1,coop:2,all:3},r=d.a.filter(e,function(e){return!!(Ke||"Channel"!==e.Value&&"ChannelExclusivity"!==e.Value)&&((We||qe)&&i.isCoOpStoreSelected()?e.SubTypeFlag===a.coop||e.SubTypeFlag===a.all:e.SubTypeFlag===a.standard||e.SubTypeFlag===a.all)});n?this.renderDynamicFeedFilterGroup({dataSource:r,defaultSelectedDataSource:n}):this.renderDynamicFeedFilterGroup({dataSource:r})}else this.filterDataComesFrom="LegacyComponent",this.productGroup=new Z({productConditionOptions:e,campaignCriterion:t,countryOfSale:this.viewModel.SalesCountry(),isCoOpStoreSelected:this.isCoOpStoreSelected()}).render(),this.productGroup.on("apply:queries",function(){i.validateProductOfferCount()}),this.$(".product-group__container").empty().append(this.productGroup.$el)}},{key:"renderCatagrizedOptionsList",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disabled,t=void 0!==e&&e;if(this.isEnabledDynamicFeedCampaign){var i=d.a.reject(this.TransformStoreAndFeedData({storeData:this.storeData,feedData:this.feedData}),function(e){return d.a.isEmpty(e.value)}),n={categories:i,placeholder:ze.getString("DynamicFeedCampaign_CategorizedSelectorList_Placeholder"),dropdownStyle:Ge,maxHeight:300,onSelectionChange:this.onSelectionChange,disabled:t},a=this.viewModel.ProviderId(),r=this.viewModel.FeedId();if(a)this.selectedCategory="Stores",n.selectedKey={categoryKey:"Stores",optionKey:a};else if(!r){var o=d.a.first(i),s=o.key,l=o.value[0].key;this.selectedCategory=s,n.selectedKey={categoryKey:s,optionKey:l},this.onSelectionChange({category:s,optionKey:l})}me.a.render(ge.a.createElement(ye.a,n,null),this.$(".category_container").get(0))}}},{key:"getChildProductCondition",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"US",a="/Campaign/ProductAdExtensions.m/GetChildProductCondition?aid=".concat(q.a.get("account_id"),"&cid=").concat(q.a.get("customer_id"),"&uid=").concat(q.a.get("user_id")),r={countryOfSale:n,"parent.Operand":t,"parent.Attribute":e};return H.a.Product.find(d.a.values(r).join(", "),{url:a,data:r,adapter:"legacy"}).then(function(e){return d.a.result(e,"DynamicQueryOption")}).finally(K()()).catch(function(){i.viewModel.errors.add()})}},{key:"renderDynamicFeedFilterGroup",value:function(e){var t=e.dataSource,i=e.defaultSelectedDataSource,n=void 0===i?null:i;this.filterDataComesFrom="NewComponent";var a,r={dataSource:t,i18nLegacy:ze,onApply:this.onApplyFilterNewComponent,key:this.selectedCategory,maximumFiltersCount:7,enableOperator:this.enableOperator,enableMultiSelect:this.enableMultiSelect,blacklistOperator:["Channel","ChannelExclusivity"],blacklistMultiSelect:["Channel","ChannelExclusivity"],getChildProductCondition:this.getChildProductCondition.bind(this)};if(n&&n instanceof Array&&0!==n.length&&(r.defaultSelectedDataSource=n),"Shopping"===this.campaignType)a=ge.a.createElement(Se,r,null);else if("Stores"===this.selectedCategory||"AudienceFeedBased"===this.campaignSubType){var o=["CategoryL2","CategoryL3","CategoryL4","CategoryL5","ProductType2","ProductType3","ProductType4","ProductType5"],s=d.a.reject(t,function(e){return d.a.contains(o,e.Value)});a=ge.a.createElement(Oe,d.a.defaults({dataSource:s},r),null)}else a=ge.a.createElement(Oe,r,null);me.a.render(a,this.$(".product-group__container").get(0))}},{key:"removeProductGroup",value:function(){d.a.isNull(this.productGroup)||(this.productGroup.remove(),delete this.productGroup),this.productGroup=null,this.productConditionOptions=null}},{key:"filterProducts",value:function(){var e=this;this.editMode||(this.isEnabledDynamicFeedCampaign&&!this.isSelectedStore()?(this.isToggledByNewComponent=!0,this.renderDynamicFeedFilterGroup({dataSource:this.DynamicDataFeedConditionOptions[this.selectedCategory]})):(d.a.isNull(this.productGroup)||this.isToggledByNewComponent)&&(me.a.unmountComponentAtNode(this.$(".product-group__container").get(0)),f.a.resolve(this.getTopLevelProductConditions()).then(function(t){e.renderProductGroup(t)}),this.isToggledByNewComponent=!1)),this.editMode&&d.a.isNull(this.productGroup)&&!this.isDynamicDataFeedBasedCampaign&&f.a.resolve(this.getTopLevelProductConditions()).then(function(t){e.renderProductGroup(t)}),this.editMode&&this.isDynamicDataFeedBasedCampaign&&this.isEnabledDynamicFeedCampaign&&this.renderDynamicFeedFilterGroup({dataSource:this.DynamicDataFeedConditionOptions[this.selectedCategory]})}},{key:"getTopLevelProductConditions",value:function(){var e=this;if(!d.a.isNull(this.productConditionOptions))return d.a.clone(this.productConditionOptions);var t=this.viewModel.SalesCountry(),i="/Campaign/ProductAdExtensions.m/GetTopLevelProductConditions?aid=".concat(q.a.get("account_id"),"&cid=").concat(q.a.get("customer_id"),"&uid=").concat(q.a.get("user_id")),n={countryOfSale:t};return H.a.Product.find(t,{url:i,data:n,adapter:"legacy"}).then(function(e){return d.a.clone(e.DynamicQueryOption)}).finally(K()()).catch(function(){e.viewModel.errors.add()})}},{key:"validateProductOfferCount",value:function(){var e=this;if(this.isStoreValid){var t=this.viewModel.selectedStore(),i=t.IsCoOpStore?t.LinkStoreId:this.viewModel.ProviderId(),n="",a="/Customers()/ProductOfferStores(".concat(i,")/ProductOffers/$count");if(i&&I.a.get("IsUserLoggedIn")){var r=this.getQueries();if(this.viewModel.hasFilteredProducts()&&r&&r.length>0){var o=0;d.a.each(r,function(e){e.Attribute&&e.Operand&&(0!==o&&(n+="+and+"),n+="".concat(e.Operand,"+eq+'").concat(encodeURIComponent(e.Attribute.replace("'",'"')),"'"),o++)}),n&&(a=Object(ce.setUrlParameter)("$filter","(".concat(n,")"),a))}this.viewModel.showWarning(!1),ue.a.get(a).then(function(t){parseInt(t)>1e6&&e.viewModel.showWarning(!0)})}}}},{key:"validate",value:function(){var e;return this.isEnabledDynamicFeedCampaign||$e?(e="LegacyComponent"===this.filterDataComesFrom?!this.hasFilteredProducts()||this.productGroup.validate():!this.hasFilteredProducts()||this.isDynamicDataFeedFiltersValid,d.a.reduce([e,!!this.editMode||this.bidSetting.validate()],function(e,t){return e&&t},!0)):d.a.reduce([!this.hasFilteredProducts()||this.productGroup.validate(),!!this.editMode||this.bidSetting.validate()],function(e,t){return e&&t},!0)}},{key:"getSearchBid",value:function(){return this.editMode?{}:this.bidSetting.getValues()}},{key:"getProductScope",value:function(){return this.isEnabledDynamicFeedCampaign&&"NewComponent"===this.filterDataComesFrom||$e?this.getDynamicFeedFiltersConditionData():d.a.isNull(this.productGroup)?null:this.productGroup.getValues()}},{key:"getQueries",value:function(){return d.a.isNull(this.productGroup)?[]:this.productGroup.getQueries()}},{key:"hasFilteredProducts",value:function(){return this.viewModel.hasFilteredProducts()}},{key:"handleApiErrors",value:function(e){var t=[];d.a.isArray(e.entity.AdGroups)&&d.a.first(e.entity.AdGroups).errors&&(t=d.a.first(e.entity.AdGroups).errors),d.a.has(e.entity,"CampaignProductScope")&&d.a.has(e.entity.CampaignProductScope,"errors")&&(t=d.a.union(e.entity.CampaignProductScope.errors,t)),this.viewModel.errors.add(t)}},{key:"clearApiErrors",value:function(){this.viewModel.errors([])}},{key:"getCriterions",value:function(e){if(!this.excludedStores)return e;var t=this.excludedStores.getCriterions(e);return e.CampaignCriterions=e.CampaignCriterions.concat(t),e}},{key:"disableStoreSelection",value:function(){this.viewModel.disableStoreSelection(!0)}},{key:"events",get:function(){return{"click .filteredProducts":"filterProducts"}}}]),t}(p.a.View)},"4JMw":function(e,t,i){var n,a;n=[i("7XbR"),i("UT4o"),i("eiR/")],void 0===(a=function(e,t,i){"use strict";var n=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");return function(a){this.editMode=e.observable(a.editMode),this.maxLength=2048,this.trackingTemplate=e.observable(a.trackingTemplate),this.trackingTemplateErrors=e.observableArray(),this.finalUrlSuffix=e.observable(a.finalUrlSuffix),this.errorMessages=e.observableArray(a.errorMessages),this.errors=e.computed(function(){var e=this.trackingTemplate(),a=[];e&&(a=function(e){var a=[];return i.hasScheme(e)||t.find(["{lpurl}","{unescapedlpurl}"],function(t){return 0===e.indexOf(t)})||(a=t.union(a,[n.get("Error_Campaign_API_InvalidUrlScheme")])),e.trim().length>2048&&(a=t.union(a,[n.get("Error_Campaign_API_TrackingTemplateTooLong")])),a}(e)),this.errorMessages(a)},this),this.showNone=e.computed(function(){return!this.editMode()&&!this.trackingTemplate()},this),this.templateExampleEnabled=e.observable(a.templateExampleEnabled)}}.apply(t,n))||(e.exports=a)},"4JS8":function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("QOvT"),o=Object(r.jsdataRawDataPlugin)({getRawData:a.a.property("raw")});i.d(t,"a",function(){return o})},"5A7a":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="location-cell-status clickable" tabindex="0" role="button" aria-label="Location deprecation details"><span class="location-cell-status-inline">'+n.escape(null==(t=e)?"":t)+"</span></div>"}.call(this,"text"in a?a.text:"undefined"!==typeof text?text:void 0),i}},"5J5i":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="input-group"><div class="form-input" data-control="text"></div><span class="input-group-addon">'+n.escape(null==(t=e)?"":t)+"</span></div>"}.call(this,"addonText"in a?a.addonText:"undefined"!==typeof addonText?addonText:void 0),i}},"5Ox/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+"<div"+n.attr("railviewid",0===e.scope?"Settings_AllSettings":"Settings_AllSettings_Settings",!0,!0)+' style="display:none"></div><div class="all-settings-view" data-ref="all-settings-container"></div>'}.call(this,"model"in i?i.model:"undefined"!==typeof model?model:void 0),t}},"5SfK":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="actionextension-search-dropdown-container"></div>'}},"5lM/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t=t+'<select class="form-control input" role="listbox" data-bind="options: availableOptions, optionsText: \'text\', optionsValue: \'key\', value: selectedOption, attr: { disabled: useRecommendationBid }"'+n.attr("aria-label",e.getString("BidAdjustment_Options"),!0,!0)+'></select><div class="input-group bid-adjustment-input-group"><input class="form-control text-right" type="text"'+n.attr("aria-label",e.getString("BidAdjustment_BidMultiplier"),!0,!0)+n.attr("size",i,!0,!0)+n.attr("maxlength",i,!0,!0)+' data-bind="textInput: bidAdjPercentage, attr: { disabled: useRecommendationBid }"><span class="input-group-addon">'+n.escape("%")+"</span></div>"}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"size"in i?i.size:"undefined"!==typeof size?size:void 0),t}},"5shv":function(e,t,i){var n,a;n=[i("UT4o")],void 0===(a=function(e){"use strict";var t=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared"),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=[{days:i.slice(0),displayName:t.get("AdExtensions_Scheduling_Day_All_Days")},{days:i.slice(1,6),displayName:t.get("AdExtensions_Scheduling_Day_Monday_To_Friday")},{days:[i[1]],displayName:t.get("AdExtensions_Scheduling_Day_Monday")},{days:[i[2]],displayName:t.get("AdExtensions_Scheduling_Day_Tuesday")},{days:[i[3]],displayName:t.get("AdExtensions_Scheduling_Day_Wednesday")},{days:[i[4]],displayName:t.get("AdExtensions_Scheduling_Day_Thursday")},{days:[i[5]],displayName:t.get("AdExtensions_Scheduling_Day_Friday")},{days:[i[6]],displayName:t.get("AdExtensions_Scheduling_Day_Saturday")},{days:[i[0]],displayName:t.get("AdExtensions_Scheduling_Day_Sunday")}];e.each(n,function(e){e.val=e.days.join()});var a=[{val:0,twentyFourHourDisplay:"00",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_12AM_Start_Of_Day")},{val:1,twentyFourHourDisplay:"01",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_1AM")},{val:2,twentyFourHourDisplay:"02",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_2AM")},{val:3,twentyFourHourDisplay:"03",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_3AM")},{val:4,twentyFourHourDisplay:"04",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_4AM")},{val:5,twentyFourHourDisplay:"05",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_5AM")},{val:6,twentyFourHourDisplay:"06",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_6AM")},{val:7,twentyFourHourDisplay:"07",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_7AM")},{val:8,twentyFourHourDisplay:"08",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_8AM")},{val:9,twentyFourHourDisplay:"09",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_9AM")},{val:10,twentyFourHourDisplay:"10",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_10AM")},{val:11,twentyFourHourDisplay:"11",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_11AM")},{val:12,twentyFourHourDisplay:"12",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_12PM")},{val:13,twentyFourHourDisplay:"13",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_1PM")},{val:14,twentyFourHourDisplay:"14",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_2PM")},{val:15,twentyFourHourDisplay:"15",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_3PM")},{val:16,twentyFourHourDisplay:"16",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_4PM")},{val:17,twentyFourHourDisplay:"17",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_5PM")},{val:18,twentyFourHourDisplay:"18",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_6PM")},{val:19,twentyFourHourDisplay:"19",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_7PM")},{val:20,twentyFourHourDisplay:"20",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_8PM")},{val:21,twentyFourHourDisplay:"21",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_9PM")},{val:22,twentyFourHourDisplay:"22",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_10PM")},{val:23,twentyFourHourDisplay:"23",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_11PM")},{val:24,twentyFourHourDisplay:"24",twelveHourDisplay:t.get("AdExtensions_Scheduling_Time_12AM_End_Of_Day")}];return{days:i,hours:["12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12"],dayOptions:n,fromHourOptions:a.slice(0,24),toHourOptions:a.slice(0),minuteOptions:[{val:0,stringVal:"ZERO",displayName:"00"},{val:15,stringVal:"FIFTEEN",displayName:"15"},{val:30,stringVal:"THIRTY",displayName:"30"},{val:45,stringVal:"FORTY_FIVE",displayName:"45"}]}}.apply(t,n))||(e.exports=a)},"5vAe":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+'<div class="form-group"><div class="target-intent-header">'+n.escape(null==(t=r.getString(a))?"":t)+'</div><a class="select-all-button" href="javascript:void(0);" type="button">'+n.escape(null==(t=r.getString("Audience_Campaign_Target_Setting_Deselect_All_Label"))?"":t)+"</a>";for(var s=0,l=e.keys(o);s<l.length;){i+='<div class="row"><div class="col-sm-3">';var c=o[l[s]];i=i+'<label class="checkbox-inline"><input type="checkbox"'+n.attr("id",c.id,!0,!0)+n.attr("checked",c.isSelected,!0,!0)+"><div>"+n.escape(null==(t=r.getString(c.labelKey))?"":t)+"</div></label></div>",++s<l.length&&(i+='<div class="col-sm-6">',c=o[l[s++]],i=i+'<label class="checkbox-inline"><input type="checkbox"'+n.attr("id",c.id,!0,!0)+n.attr("checked",c.isSelected,!0,!0)+"><div>"+n.escape(null==(t=r.getString(c.labelKey))?"":t)+"</div></label></div>"),i+="</div>"}i+='<div class="row errors-container"></div></div>'}.call(this,"Object"in a?a.Object:"undefined"!==typeof Object?Object:void 0,"descriptionKey"in a?a.descriptionKey:"undefined"!==typeof descriptionKey?descriptionKey:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"selections"in a?a.selections:"undefined"!==typeof selections?selections:void 0),i}},"5xDO":function(e,t,i){"use strict";var n=i("6e2+"),a=i("bgLp"),r=i("ERkP"),o=i.n(r),s=i("UT4o"),l=i("W6bG"),c=i("faId"),d={dropdownItemHeader:{color:"black",fontWeight:"bold"}},u=function(e,t){return"".concat(e,"_").concat(t)},p=function(e){var t=e.classes.CategorizedDropdownListContainer,i=e.categories,r=e.onSelectionChange,c=e.placeholder,p=e.label,g=e.dropdownStyle,h=e.selectedKey,m=e.forwardedRef,f=e.maxHeight,v=e.disabled;if(g){var b=g.title;b||(g.title={borderColor:"rgb(179, 176, 173)"}),b&&!b.borderColor&&(b.borderColor="rgb(179, 176, 173)"),d=Object(a.a)({},d,g)}var y,S=function(e){return Object(s.flatten)(e.map(function(e,t){var i=e.value.map(function(t,i){return{key:u(e.key,t.key?t.key:i),text:t.text}});return i.unshift({key:"".concat(e.key,"_Header"),text:e.text,itemType:l.DropdownMenuItemType.Header}),i.push({key:"divider_".concat(t),text:"-",itemType:l.DropdownMenuItemType.Divider}),i}))}(i),w=o.a.useState(),C=Object(n.a)(w,2),x=C[0],k=C[1];if(h){var A=h.categoryKey,T=h.optionKey;y=u(A,T)}return o.a.createElement(l.Dropdown,{componentRef:m,label:p,selectedKey:x?x.key:y,onChange:function(e,t){k(t);var i,n={categoryKey:(i=t.key).split("_")[0],optionKey:i.split("_")[1]};r({category:n.categoryKey,value:t,optionKey:n.optionKey})},placeholder:c,options:S,className:t,styles:d,calloutProps:f?{calloutMaxHeight:f}:{},disabled:v})};p.defaultProps={onSelectionChange:s.noop,placeholder:void 0,label:void 0,dropdownStyle:null,selectedKey:null,forwardedRef:null,maxHeight:null,disabled:!1};var g=Object(c.withDefaultStyles)(p,function(){return{CategorizedDropdownListContainer:{}}}),h=o.a.forwardRef(function(e,t){return o.a.createElement(g,Object.assign({},e,{forwardedRef:t}))});i.d(t,"a",function(){return h})},"6Lfu":function(e,t,i){var a,r;a=[i("UT4o"),i("syDw"),i("Glrc"),i("/xyZ")],void 0===(r=function(e,t,i,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=332)}({13:function(e,t){e.exports=i},17:function(e,t){e.exports=a},332:function(e,t,i){e.exports=i(333)},333:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageCropper",{enumerable:!0,get:function(){return n.ImageCropper}}),Object.defineProperty(t,"jcropReactStyle",{enumerable:!0,get:function(){return a.jcropReactStyle}});var n=i(334),a=i(337)},334:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageCropper=void 0;var n=s(i(9)),a=s(i(17)),r=s(i(8));i(335);var o=s(i(336));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var i,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n.default.View),i=t,(s=[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.imgData,n=t.cropperOptions,o=void 0===n?{}:n,s=t.onCropperInitialized,l=void 0===s?r.default.noop:s,c=t.isPreviewNeeded,d=void 0===c||c,u=t.croppedImgWidth,p=t.allowedAspectRatioError,g=void 0===p?.01:p,h=t.logActivity,m=void 0===h?{trace:r.default.noop}:h;this.img=i,this.croppedImgWidth=u||this.img.naturalWidth,this.isPreviewNeeded=d,this.logActivity=m,this.logActivity.trace("Cropper: original image size ".concat(this.img.naturalWidth,"x").concat(this.img.naturalHeight)),this.allowedARError=g,this.cropOptions={onSelect:function(t){return e.onSelectionChanged(t)},legacyHandlers:{onSelect:"cropend"}},r.default.defaults(this.cropOptions,o),this.onCropperInitialized=l,this.resolveSetSelectionChangedPromise=null,this.setSelectionChangedPromise=new a.default(function(t){e.resolveSetSelectionChangedPromise=t}),this.setCropOptions()}},{key:"getOriginalImgType",value:function(){var e=this.img.src.indexOf("image/");if(-1===e)return"image/jpeg";var t="image/X".length,i=this.img.src.indexOf(";",e+t);return i<=e?"image/jpeg":this.img.src.substring(e,i)}},{key:"setCropOptions",value:function(){var e={aspectRatio:1,minSize:[300,300],maxSize:[this.img.naturalWidth,this.img.naturalHeight],bgOpacity:.4,bgColor:"black",handles:["sw","ne","nw","se"],dragbars:[],borders:[],applyFilters:["constrain","extent","backoff","ratio","shader"]};r.default.defaults(this.cropOptions,e);var t=this.img.naturalWidth/this.img.naturalHeight;this.expectedAspectRatio=this.cropOptions.aspectRatio,this.logActivity.trace("Cropper: expectedAspectRatio ".concat(this.expectedAspectRatio)),this.isValidAspectRatio(t)&&(this.cropOptions.aspectRatio=t),this.setCroppedImageDimensions(),this.cropOptions.maxSize=0===this.cropOptions.maxSize[0]||0===this.cropOptions.maxSize[1]?[this.img.naturalWidth,this.img.naturalHeight]:this.cropOptions.maxSize,this.cropOptions.setSelect=this.setInitialCrop(this.cropOptions.maxSize),this.cropOptions.minSize=this.cropOptions.maxSize[0]<this.cropOptions.minSize[0]||this.cropOptions.maxSize[1]<this.cropOptions.minSize[1]?[0,0]:this.cropOptions.minSize}},{key:"setCroppedImageDimensions",value:function(){this.croppedImgWidth=this.croppedImgWidth>this.cropOptions.maxSize[0]?this.cropOptions.maxSize[0]:this.croppedImgWidth,this.croppedImgHeight=Math.floor(this.croppedImgWidth/this.cropOptions.aspectRatio),this.croppedImgHeight=this.croppedImgHeight<=this.cropOptions.maxSize[1]&&0!==this.cropOptions.maxSize[1]?this.croppedImgHeight:this.cropOptions.maxSize[1],this.croppedImgWidth=Math.floor(this.croppedImgHeight*this.cropOptions.aspectRatio)}},{key:"render",value:function(){var e=this;return this.$el.html((0,o.default)(this)),this.canvas=this.$(".crop-preview-canvas").get(0),this.context=this.canvas.getContext("2d"),this.$(".img-crop").Jcrop(this.cropOptions,function(){e.resolveSetSelectionChangedPromise();var t=e.cropOptions,i=this.opt,n=i.xscale,a=i.yscale,o=r.default.extend({},t.maxSize&&{maxSize:[t.maxSize[0]/n,t.maxSize[1]/a]},t.minSize&&{minSize:[t.minSize[0]/n,t.minSize[1]/a]},t.edge&&{edge:{w:t.edge.w/n,e:t.edge.e/n,n:t.edge.n/a,s:t.edge.s/a}});r.default.isEmpty(o)||(this.setOptions(o),t.setSelect&&this.setSelect(t.setSelect)),e.onCropperInitialized(this)}),this}},{key:"setInitialCrop",value:function(){if(this.cropOptions.cropSettings)return this.cropSettings={SourceX:this.cropOptions.cropSettings.SourceX,SourceY:this.cropOptions.cropSettings.SourceY,SourceWidth:this.cropOptions.cropSettings.SourceWidth,SourceHeight:this.cropOptions.cropSettings.SourceHeight},[this.cropOptions.cropSettings.SourceX,this.cropOptions.cropSettings.SourceY,this.cropOptions.cropSettings.SourceWidth,this.cropOptions.cropSettings.SourceHeight];var e=this.img.naturalWidth||0,t=this.img.naturalHeight||0,i=0,n=0;if(t>0&&e>0&&0!==this.cropOptions.aspectRatio){var a=e/t;this.cropOptions.aspectRatio<a?(e=t*this.cropOptions.aspectRatio,i=Math.floor((this.img.naturalWidth-e)/2)):(t=(e=this.img.naturalWidth)/this.cropOptions.aspectRatio,n=Math.floor((this.img.naturalHeight-t)/2))}return i=Math.round(i),n=Math.round(n),e=Math.round(e),t=Math.round(t),this.cropSettings={SourceX:i,SourceY:n,SourceWidth:e,SourceHeight:t},[i,n,e,t]}},{key:"onSelectionChanged",value:function(e){var t=this.invalidateCoords(e),i=t.isValid,n=t.validCoords;if(i){var a=n.x,r=n.y,o=n.w,s=n.h;this.cropSettings={SourceX:a,SourceY:r,SourceWidth:o,SourceHeight:s},this.canvas.width=o,this.canvas.height=s,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.isPreviewNeeded&&this.context.drawImage(this.img,a,r,o,s,0,0,this.canvas.width,this.canvas.height),this.trigger("cropSettingsUpdated",this.cropSettings),this.trigger("previewUpdated",this.canvas),this.resolveSetSelectionChangedPromise()}}},{key:"invalidateCoords",value:function(e){var t=e.x,i=e.y,n=e.w,a=e.h,r=!1;if(0===n||0===a)return{isValid:r};t<0&&(n+=t,t=0),i<0&&(a+=i,i=0),t=Math.round(t),i=Math.round(i),n=Math.round(n),a=Math.round(a);var o=c(this.cropOptions.minSize,2),s=o[0],l=o[1],d=this.cropOptions.edge||{},u=d.w,p=d.n;if(s>0&&n<s){this.logActivity.trace("Adjust w to minw: w(".concat(n,"), minw(").concat(s,")"));var g=s-n;n=s,t>(u||0)&&(this.logActivity.trace("Adjust x by ".concat(g," from ").concat(t," (minx(").concat(u,"))")),t-=g)}if(l>0&&a<l){this.logActivity.trace("Adjust h to minh: h(".concat(a,"), minh(").concat(l,")"));var h=l-a;a=l,i>(p||0)&&(this.logActivity.trace("Adjust y by ".concat(h," from ").concat(i," (miny(").concat(p,"))")),i-=h)}if(t<0||i<0)return this.logActivity.trace("After adjustment, x or y become negative"),{isValid:r};var m=n/a;return this.expectedAspectRatio>0&&!this.isValidAspectRatio(m)?(this.logActivity.trace("Invalid ratio w(".concat(n,") + h(").concat(a,") expected ratio: ").concat(this.expectedAspectRatio)),{isValid:r}):t+n>this.img.naturalWidth?(this.logActivity.trace("x(".concat(t,") + w(").concat(n,") bigger than natural width(").concat(this.img.naturalWidth,")")),{isValid:r}):i+a>this.img.naturalHeight?(this.logActivity.trace("y(".concat(i,") + h(").concat(a,") bigger than natural height(").concat(this.img.naturalHeight,")")),{isValid:r}):{isValid:r=!0,validCoords:{x:t,y:i,w:n,h:a}}}},{key:"isValidAspectRatio",value:function(e){return Math.abs(e-this.expectedAspectRatio).toFixed(2)<=this.allowedARError}},{key:"validateImageSizeConstraints",value:function(e){0!==this.cropOptions.maxSize[1]&&e.height>this.cropOptions.maxSize[1]&&this.validationErrors.push("Error_ImageValidation_HeightTooLarge"),0!==this.cropOptions.minSize[1]&&e.height<this.cropOptions.minSize[1]&&this.validationErrors.push("Error_ImageValidation_HeightTooSmall"),0!==this.cropOptions.maxSize[0]&&e.width>this.cropOptions.maxSize[0]&&this.validationErrors.push("Error_ImageValidation_WidthTooLarge"),0!==this.cropOptions.minSize[0]&&e.width<this.cropOptions.minSize[0]&&this.validationErrors.push("Error_ImageValidation_WidthTooSmall")}},{key:"onCroppedImageLoaded",value:function(){this.validationErrors=[],this.validateImageSizeConstraints(this.cropped),this.logActivity.trace("Cropper: cropped image size ".concat(this.cropped.naturalWidth,"x").concat(this.cropped.naturalHeight)),0===this.validationErrors.length?this.trigger("croppedImageLoaded"):this.trigger("validationErrors",this.validationErrors)}},{key:"loadCroppedImage",value:function(){var e=this;return this.setSelectionChangedPromise.then(function(){e.cropped=new Image,e.cropped.onload=function(){return e.onCroppedImageLoaded()},e.logActivity.trace("Cropper: cropped canvase size ".concat(e.canvas.width,"x").concat(e.canvas.height)),e.cropped.src=e.canvas.toDataURL(e.getOriginalImgType())})}},{key:"croppedImage",get:function(){return this.cropped}},{key:"fullImageWithCroppingData",get:function(){return this.logActivity.trace("fullImageWithCroppingData ".concat(JSON.stringify(this.cropSettings))),{fullImage:this.img,cropSettings:this.cropSettings}}}])&&d(i.prototype,s),l&&d(i,l),t}();t.ImageCropper=h},335:function(e,t){function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! Jcrop.js v2.0.4 - build: 20151117
 *  @copyright 2008-2015 Tapmodo Interactive LLC
 *  @license Free software under MIT License
 *  @website http://jcrop.org/
 **/
/*! Jcrop.js v2.0.4 - build: 20151117
 *  @copyright 2008-2015 Tapmodo Interactive LLC
 *  @license Free software under MIT License
 *  @website http://jcrop.org/
 **/
!function(e){"use strict";var t=function t(i,n){var a=navigator.userAgent.toLowerCase();this.opt=e.extend({},t.defaults,n||{}),this.container=e(i),this.opt.is_msie=/msie/.test(a),this.opt.is_ie_lt9=/msie [1-8]\./.test(a),this.container.addClass(this.opt.css_container),this.ui={},this.state=null,this.ui.multi=[],this.ui.selection=null,this.filter={},this.init(),this.setOptions(n),this.applySizeConstraints(),this.container.trigger("cropinit",this),this.opt.is_ie_lt9&&(this.opt.dragEventTarget=document.body)};e.extend(t,{component:{},filter:{},stage:{},registerComponent:function(e,i){t.component[e]=i},registerFilter:function(e,i){t.filter[e]=i},registerStageType:function(e,i){t.stage[e]=i},attach:function(t,i){return new e.Jcrop(t,i)},imgCopy:function(e){var t=new Image;return t.src=e.src,t},imageClone:function(i){return e.Jcrop.supportsCanvas?t.canvasClone(i):t.imgCopy(i)},canvasClone:function(t){var i=document.createElement("canvas"),n=i.getContext("2d");return e(i).width(t.width).height(t.height),i.width=t.naturalWidth,i.height=t.naturalHeight,n.drawImage(t,0,0,t.naturalWidth,t.naturalHeight),i},propagate:function(e,t,i){for(var n=0,a=e.length;n<a;n++)t.hasOwnProperty(e[n])&&(i[e[n]]=t[e[n]])},getLargestBox:function(e,t,i){return t/i>e?[i*e,i]:[t,t/e]},stageConstructor:function(i,n,a){var r=[];e.each(t.stage,function(e,t){r.push(t)}),r.sort(function(e,t){return e.priority-t.priority});for(var o=0,s=r.length;o<s;o++)if(r[o].isSupported(i,n)){r[o].create(i,n,function(e,t){"function"==typeof a&&a(e,t)});break}},supportsColorFade:function(){return e.fx.step.hasOwnProperty("backgroundColor")},wrapFromXywh:function(e){var t={x:e[0],y:e[1],w:e[2],h:e[3]};return t.x2=t.x+t.w,t.y2=t.y+t.h,t}});var a=function(){};e.extend(a,{isSupported:function(e,t){return!0},priority:100,create:function(e,t,i){var n=new a;n.element=e,i.call(this,n,t)},prototype:{attach:function(e){this.init(e),e.ui.stage=this},triggerEvent:function(t){return e(this.element).trigger(t),this},getElement:function(){return this.element}}}),t.registerStageType("Block",a);var r=function(){};r.prototype=new a,e.extend(r,{isSupported:function(e,t){if("IMG"==e.tagName)return!0},priority:90,create:function(t,i,n){e.Jcrop.component.ImageLoader.attach(t,function(a,o){var s=new r;s.element=e(t).wrap("<div />").parent(),s.element.width(a).height(o),s.imgsrc=t,"function"==typeof n&&n.call(this,s,i)})}}),t.registerStageType("Image",r);var o=function(){this.angle=0,this.scale=1,this.scaleMin=.2,this.scaleMax=1.25,this.offset=[0,0]};o.prototype=new r,e.extend(o,{isSupported:function(t,i){if(e.Jcrop.supportsCanvas&&"IMG"==t.tagName)return!0},priority:60,create:function(t,i,n){var a=e(t),r=e.extend({},i);e.Jcrop.component.ImageLoader.attach(t,function(e,i){var s=new o;a.hide(),s.createCanvas(t,e,i),a.before(s.element),s.imgsrc=t,r.imgsrc=t,"function"==typeof n&&(n(s,r),s.redraw())})}}),e.extend(o.prototype,{init:function(e){this.core=e},setOffset:function(e,t){return this.offset=[e,t],this},setAngle:function(e){return this.angle=e,this},setScale:function(e){return this.scale=this.boundScale(e),this},boundScale:function(e){return e<this.scaleMin?e=this.scaleMin:e>this.scaleMax&&(e=this.scaleMax),e},createCanvas:function(t,i,n){this.width=i,this.height=n,this.canvas=document.createElement("canvas"),this.canvas.width=i,this.canvas.height=n,this.$canvas=e(this.canvas).width("100%").height("100%"),this.context=this.canvas.getContext("2d"),this.fillstyle="rgb(0,0,0)",this.element=this.$canvas.wrap("<div />").parent().width(i).height(n)},triggerEvent:function(e){return this.$canvas.trigger(e),this},clear:function(){return this.context.fillStyle=this.fillstyle,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this},redraw:function(){return this.context.save(),this.clear(),this.context.translate(parseInt(.5*this.width),parseInt(.5*this.height)),this.context.translate(this.offset[0]/this.core.opt.xscale,this.offset[1]/this.core.opt.yscale),this.context.rotate(this.angle*(Math.PI/180)),this.context.scale(this.scale,this.scale),this.context.translate(-parseInt(.5*this.width),-parseInt(.5*this.height)),this.context.drawImage(this.imgsrc,0,0,this.width,this.height),this.context.restore(),this.$canvas.trigger("cropredraw"),this},setFillStyle:function(e){return this.fillstyle=e,this}}),t.registerStageType("Canvas",o);var s=function(){this.minw=40,this.minh=40,this.maxw=0,this.maxh=0,this.core=null};e.extend(s.prototype,{tag:"backoff",priority:22,filter:function(e){var t=this.bound;return e.x<t.minx&&(e.x=t.minx,e.x2=e.w+e.x),e.y<t.miny&&(e.y=t.miny,e.y2=e.h+e.y),e.x2>t.maxx&&(e.x2=t.maxx,e.x=e.x2-e.w),e.y2>t.maxy&&(e.y2=t.maxy,e.y=e.y2-e.h),e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.bound={minx:0+e.edge.w,miny:0+e.edge.n,maxx:this.elw+e.edge.e,maxy:this.elh+e.edge.s}}}),t.registerFilter("backoff",s);var l=function(){this.core=null};e.extend(l.prototype,{tag:"constrain",priority:5,filter:function(e,t){return"move"==t?(e.x<this.minx&&(e.x=this.minx,e.x2=e.w+e.x),e.y<this.miny&&(e.y=this.miny,e.y2=e.h+e.y),e.x2>this.maxx&&(e.x2=this.maxx,e.x=e.x2-e.w),e.y2>this.maxy&&(e.y2=this.maxy,e.y=e.y2-e.h)):(e.x<this.minx&&(e.x=this.minx),e.y<this.miny&&(e.y=this.miny),e.x2>this.maxx&&(e.x2=this.maxx),e.y2>this.maxy&&(e.y2=this.maxy)),e.w=e.x2-e.x,e.h=e.y2-e.y,e},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.minx=0+e.edge.w,this.miny=0+e.edge.n,this.maxx=this.elw+e.edge.e,this.maxy=this.elh+e.edge.s}}),t.registerFilter("constrain",l);var c=function(){this.core=null};e.extend(c.prototype,{tag:"extent",priority:12,offsetFromCorner:function(e,t,i){var n=t[0],a=t[1];switch(e){case"bl":return[i.x2-n,i.y,n,a];case"tl":return[i.x2-n,i.y2-a,n,a];case"br":return[i.x,i.y,n,a];case"tr":return[i.x,i.y2-a,n,a]}},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,i=e.opposite[1]-e.offsety;return t<0&&i<0?"br":t>=0&&i>=0?"tl":t<0&&i>=0?"tr":"bl"},filter:function(e,i,n){if("move"==i)return e;var a=e.w,r=e.h,o=n.state,s=this.limits,l=o?this.getQuadrant(o):"br";return s.minw&&a<s.minw&&(a=s.minw),s.minh&&r<s.minh&&(r=s.minh),s.maxw&&a>s.maxw&&(a=s.maxw),s.maxh&&r>s.maxh&&(r=s.maxh),a==e.w&&r==e.h?e:t.wrapFromXywh(this.offsetFromCorner(l,[a,r],e))},refresh:function(e){this.elw=e.core.container.width(),this.elh=e.core.container.height(),this.limits={minw:e.minSize[0],minh:e.minSize[1],maxw:e.maxSize[0],maxh:e.maxSize[1]}}}),t.registerFilter("extent",c);var d=function(){this.stepx=1,this.stepy=1,this.core=null};e.extend(d.prototype,{tag:"grid",priority:19,filter:function(e){var t={x:Math.round(e.x/this.stepx)*this.stepx,y:Math.round(e.y/this.stepy)*this.stepy,x2:Math.round(e.x2/this.stepx)*this.stepx,y2:Math.round(e.y2/this.stepy)*this.stepy};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),t.registerFilter("grid",d);var u=function(){this.ratio=0,this.core=null};e.extend(u.prototype,{tag:"ratio",priority:15,offsetFromCorner:function(e,t,i){var n=t[0],a=t[1];switch(e){case"bl":return[i.x2-n,i.y,n,a];case"tl":return[i.x2-n,i.y2-a,n,a];case"br":return[i.x,i.y,n,a];case"tr":return[i.x,i.y2-a,n,a]}},getBoundRatio:function(e,i){var n=t.getLargestBox(this.ratio,e.w,e.h);return t.wrapFromXywh(this.offsetFromCorner(i,n,e))},getQuadrant:function(e){var t=e.opposite[0]-e.offsetx,i=e.opposite[1]-e.offsety;return t<0&&i<0?"br":t>=0&&i>=0?"tl":t<0&&i>=0?"tr":"bl"},filter:function(e,t,i){if(!this.ratio)return e;e.w,e.h;var n=i.state,a=n?this.getQuadrant(n):"br";if("move"==(t=t||"se"))return e;switch(t){case"n":e.x2=this.elw,e.w=e.x2-e.x,a="tr";break;case"s":e.x2=this.elw,e.w=e.x2-e.x,a="br";break;case"e":e.y2=this.elh,e.h=e.y2-e.y,a="br";break;case"w":e.y2=this.elh,e.h=e.y2-e.y,a="bl"}return this.getBoundRatio(e,a)},refresh:function(e){this.ratio=e.aspectRatio,this.elw=e.core.container.width(),this.elh=e.core.container.height()}}),t.registerFilter("ratio",u);var p=function(){this.core=null};e.extend(p.prototype,{tag:"round",priority:90,filter:function(e){var t={x:Math.round(e.x),y:Math.round(e.y),x2:Math.round(e.x2),y2:Math.round(e.y2)};return t.w=t.x2-t.x,t.h=t.y2-t.y,t}}),t.registerFilter("round",p);var g=function(e,t){this.color=t||"black",this.opacity=e||.5,this.core=null,this.shades={}};e.extend(g.prototype,{tag:"shader",fade:!0,fadeEasing:"swing",fadeSpeed:320,priority:95,init:function(){var t=this;t.attached||(t.visible=!1,t.container=e("<div />").addClass(t.core.opt.css_shades).prependTo(this.core.container).hide(),t.elh=this.core.container.height(),t.elw=this.core.container.width(),t.shades={top:t.createShade(),right:t.createShade(),left:t.createShade(),bottom:t.createShade()},t.attached=!0)},destroy:function(){this.container.remove()},setColor:function(i,n){var a=this;if(i==a.color)return a;this.color=i;var r=t.supportsColorFade();return e.each(a.shades,function(e,t){a.fade&&!n&&r?t.animate({backgroundColor:i},{queue:!1,duration:a.fadeSpeed,easing:a.fadeEasing}):t.css("backgroundColor",i)}),a},setOpacity:function(t,i){var n=this;return t==n.opacity?n:(n.opacity=t,e.each(n.shades,function(e,a){!n.fade||i?a.css({opacity:t}):a.animate({opacity:t},{queue:!1,duration:n.fadeSpeed,easing:n.fadeEasing})}),n)},createShade:function(){return e("<div />").css({position:"absolute",backgroundColor:this.color,opacity:this.opacity}).appendTo(this.container)},refresh:function(e){var t=this.core,i=this.shades;this.setColor(e.bgColor?e.bgColor:this.core.opt.bgColor),this.setOpacity(e.bgOpacity?e.bgOpacity:this.core.opt.bgOpacity),this.elh=t.container.height(),this.elw=t.container.width(),i.right.css("height",this.elh+"px"),i.left.css("height",this.elh+"px")},filter:function(e,t,i){if(!i.active)return e;var n=this,a=n.shades;return a.top.css({left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:Math.round(e.y)+"px"}),a.bottom.css({top:Math.round(e.y2)+"px",left:Math.round(e.x)+"px",width:Math.round(e.w)+"px",height:n.elh-Math.round(e.y2)+"px"}),a.right.css({left:Math.round(e.x2)+"px",width:n.elw-Math.round(e.x2)+"px"}),a.left.css({width:Math.round(e.x)+"px"}),n.visible||(n.container.show(),n.visible=!0),e}}),t.registerFilter("shader",g);var h=function(e){this.stage=e,this.core=e.core,this.cloneStagePosition()};h.prototype={cloneStagePosition:function(){var e=this.stage;this.angle=e.angle,this.scale=e.scale,this.offset=e.offset},getElement:function(){var t=this.stage;return e("<div />").css({position:"absolute",top:t.offset[0]+"px",left:t.offset[1]+"px",width:t.angle+"px",height:t.scale+"px"})},animate:function(e){var t=this;this.scale=this.stage.boundScale(this.scale),t.stage.triggerEvent("croprotstart"),t.getElement().animate({top:t.offset[0]+"px",left:t.offset[1]+"px",width:t.angle+"px",height:t.scale+"px"},{easing:t.core.opt.animEasing,duration:t.core.opt.animDuration,complete:function(){t.stage.triggerEvent("croprotend"),"function"==typeof e&&e.call(this)},progress:function(e){var i,n={},a=e.tweens;for(i=0;i<a.length;i++)n[a[i].prop]=a[i].now;t.stage.setAngle(n.width).setScale(n.height).setOffset(n.top,n.left).redraw()}})}},t.stage.Canvas.prototype.getAnimator=function(){return new h(this)},t.registerComponent("CanvasAnimator",h);var m=function(e){this.selection=e,this.core=e.core};m.prototype={getElement:function(){var t=this.selection.get();return e("<div />").css({position:"absolute",top:t.y+"px",left:t.x+"px",width:t.w+"px",height:t.h+"px"})},animate:function(e,t,i,n,a){var r=this;r.selection.allowResize(!1),r.getElement().animate({top:t+"px",left:e+"px",width:i+"px",height:n+"px"},{easing:r.core.opt.animEasing,duration:r.core.opt.animDuration,complete:function(){r.selection.allowResize(!0),a&&a.call(this)},progress:function(e){var t,i={},n=e.tweens;for(t=0;t<n.length;t++)i[n[t].prop]=n[t].now;var a={x:parseInt(i.left),y:parseInt(i.top),w:parseInt(i.width),h:parseInt(i.height)};a.x2=a.x+a.w,a.y2=a.y+a.h,r.selection.updateRaw(a,"se")}})}},t.registerComponent("Animator",m);var f=function(e,t,i){var n=this;n.x=e.pageX,n.y=e.pageY,n.selection=t,n.eventTarget=t.core.opt.dragEventTarget,n.orig=t.get(),t.callFilterFunction("refresh");var a=t.core.container.position();n.elx=a.left,n.ely=a.top,n.offsetx=0,n.offsety=0,n.ord=i,n.opposite=n.getOppositeCornerOffset(),n.initEvents(e)};f.prototype={getOppositeCornerOffset:function(){var e=this.orig,t=this.x-this.elx-e.x,i=this.y-this.ely-e.y;switch(this.ord){case"nw":case"w":return[e.w-t,e.h-i];case"sw":return[e.w-t,-i];case"se":case"s":case"e":return[-t,-i];case"ne":case"n":return[-t,e.h-i]}return[null,null]},initEvents:function(t){e(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())},dragEvent:function(e){this.offsetx=e.pageX-this.x,this.offsety=e.pageY-this.y,this.selection.updateRaw(this.getBox(),this.ord)},endDragEvent:function(e){var t=this.selection;t.core.container.removeClass("jcrop-dragging"),t.element.trigger("cropend",[t,t.core.unscale(t.get())]),t.focus()},createStopHandler:function(){var t=this;return function(i){return e(t.eventTarget).off(".jcrop"),t.endDragEvent(i),!1}},createDragHandler:function(){var e=this;return function(t){return e.dragEvent(t),!1}},update:function(e,t){var i=this;i.offsetx=e-i.x,i.offsety=t-i.y},resultWrap:function(e){var t={x:Math.min(e[0],e[2]),y:Math.min(e[1],e[3]),x2:Math.max(e[0],e[2]),y2:Math.max(e[1],e[3])};return t.w=t.x2-t.x,t.h=t.y2-t.y,t},getBox:function(){var e=this,t=e.orig,i={x2:t.x+t.w,y2:t.y+t.h};switch(e.ord){case"n":return e.resultWrap([t.x,e.offsety+t.y,i.x2,i.y2]);case"s":return e.resultWrap([t.x,t.y,i.x2,e.offsety+i.y2]);case"e":return e.resultWrap([t.x,t.y,e.offsetx+i.x2,i.y2]);case"w":return e.resultWrap([t.x+e.offsetx,t.y,i.x2,i.y2]);case"sw":return e.resultWrap([e.offsetx+t.x,t.y,i.x2,e.offsety+i.y2]);case"se":return e.resultWrap([t.x,t.y,e.offsetx+i.x2,e.offsety+i.y2]);case"ne":return e.resultWrap([t.x,e.offsety+t.y,e.offsetx+i.x2,i.y2]);case"nw":return e.resultWrap([e.offsetx+t.x,e.offsety+t.y,i.x2,i.y2]);case"move":return i.nx=t.x+e.offsetx,i.ny=t.y+e.offsety,e.resultWrap([i.nx,i.ny,i.nx+t.w,i.ny+t.h])}}},t.registerComponent("DragState",f);var v=function(e){this.core=e};v.prototype={on:function(t,i){e(this).on(t,i)},off:function(t){e(this).off(t)},trigger:function(t){e(this).trigger(t)}},t.registerComponent("EventManager",v);var b=function(e,t,i){this.src=e,t||(t=new Image),this.element=t,this.callback=i,this.load()};e.extend(b,{attach:function(e,t){return new b(e.src,e,t)},prototype:{getDimensions:function(){var e=this.element;return e.naturalWidth?[e.naturalWidth,e.naturalHeight]:e.width?[e.width,e.height]:null},fireCallback:function(){this.element.onload=null,"function"==typeof this.callback&&this.callback.apply(this,this.getDimensions())},isLoaded:function(){return this.element.complete},load:function(){var e=this;e.element.src=e.src,e.isLoaded()?e.fireCallback():e.element.onload=function(t){e.fireCallback()}}}}),t.registerComponent("ImageLoader",b);var y=function(e){this.core=e,this.init()};e.extend(y,{support:function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0},prototype:{init:function(){var t=this,i=e.Jcrop.component.DragState.prototype;i.touch||(t.initEvents(),t.shimDragState(),t.shimStageDrag(),i.touch=!0)},shimDragState:function(){var t=this;e.Jcrop.component.DragState.prototype.initEvents=function(i){"touch"==i.type.substr(0,5)?e(this.eventTarget).on("touchmove.jcrop.jcrop-touch",t.dragWrap(this.createDragHandler())).on("touchend.jcrop.jcrop-touch",this.createStopHandler()):e(this.eventTarget).on("mousemove.jcrop",this.createDragHandler()).on("mouseup.jcrop",this.createStopHandler())}},shimStageDrag:function(){this.core.container.addClass("jcrop-touch").on("touchstart.jcrop.jcrop-stage",this.dragWrap(this.core.ui.manager.startDragHandler()))},dragWrap:function(e){return function(t){return t.preventDefault(),t.stopPropagation(),"touch"==t.type.substr(0,5)&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,e(t))}},initEvents:function(){var e=this.core;e.container.on("touchstart.jcrop.jcrop-touch","."+e.opt.css_drag,this.dragWrap(e.startDrag()))}}}),t.registerComponent("Touch",y);var S=function(e){this.core=e,this.init()};e.extend(S,{defaults:{eventName:"keydown.jcrop",passthru:[9],debug:!1},prototype:{init:function(){e.extend(this,S.defaults),this.enable()},disable:function(){this.core.container.off(this.eventName)},enable:function(){var t=this,i=t.core;i.container.on(t.eventName,function(n){var a=n.shiftKey?16:2;if(e.inArray(n.keyCode,t.passthru)>=0)return!0;switch(n.keyCode){case 37:i.nudge(-a,0);break;case 38:i.nudge(0,-a);break;case 39:i.nudge(a,0);break;case 40:i.nudge(0,a);break;case 46:case 8:return i.requestDelete(),!1;default:t.debug&&console.log("keycode: "+n.keyCode)}n.metaKey||n.ctrlKey||n.preventDefault()})}}}),t.registerComponent("Keyboard",S);var w=function(){};e.extend(w,{defaults:{minSize:[8,8],maxSize:[0,0],aspectRatio:0,edge:{n:0,s:0,e:0,w:0},bgColor:null,bgOpacity:null,last:null,state:null,active:!0,linked:!0,canDelete:!0,canDrag:!0,canResize:!0,canSelect:!0},prototype:{init:function(e){this.core=e,this.startup(),this.linked=this.core.opt.linked,this.attach(),this.setOptions(this.core.opt),e.container.trigger("cropcreate",[this])},attach:function(){},startup:function(){var t=this,i=t.core.opt;e.extend(t,w.defaults),t.filter=t.core.getDefaultFilters(),t.element=e("<div />").addClass(i.css_selection).data({selection:t}),t.frame=e("<button />").addClass(i.css_button).data("ord","move").attr("type","button"),t.element.append(t.frame).appendTo(t.core.container),t.core.opt.is_msie&&t.frame.css({opacity:0,backgroundColor:"white"}),t.insertElements(),t.frame.on("focus.jcrop",function(e){t.core.setSelection(t),t.element.trigger("cropfocus",t),t.element.addClass("jcrop-focus")}).on("blur.jcrop",function(e){t.element.removeClass("jcrop-focus"),t.element.trigger("cropblur",t)})},propagate:["canDelete","canDrag","canResize","canSelect","minSize","maxSize","aspectRatio","edge"],setOptions:function(e){return t.propagate(this.propagate,e,this),this.refresh(),this},refresh:function(){this.allowResize(),this.allowDrag(),this.allowSelect(),this.callFilterFunction("refresh"),this.updateRaw(this.get(),"se")},callFilterFunction:function(e,t){for(var i=0;i<this.filter.length;i++)this.filter[i][e]&&this.filter[i][e](this);return this},addFilter:function(e){e.core=this.core,this.hasFilter(e)||(this.filter.push(e),this.sortFilters(),e.init&&e.init(),this.refresh())},hasFilter:function(e){var t,i=this.filter;for(t=0;t<i.length;t++)if(i[t]===e)return!0},sortFilters:function(){this.filter.sort(function(e,t){return e.priority-t.priority})},clearFilters:function(){for(var e=this.filter,t=0;t<e.length;t++)e[t].destroy&&e[t].destroy();this.filter=[]},removeFilter:function(e){for(var t=this.filter,i=[],n=0;n<t.length;n++)t[n].tag&&t[n].tag==e||e===t[n]?t[n].destroy&&t[n].destroy():i.push(t[n]);this.filter=i},runFilters:function(e,t){for(var i=0;i<this.filter.length;i++)e=this.filter[i].filter(e,t,this);return e},endDrag:function(){this.state&&(e(document.body).off(".jcrop"),this.focus(),this.state=null)},startDrag:function(i,n){var a=this;a.core;return n=n||e(i.target).data("ord"),this.focus(),("move"!=n||!a.element.hasClass(a.core.opt.css_nodrag))&&(this.state=new t.component.DragState(i,this,n),!1)},allowSelect:function(e){return void 0===e&&(e=this.canSelect),e&&this.canSelect?this.frame.attr("disabled",!1):this.frame.attr("disabled","disabled"),this},allowDrag:function(e){var t=this,i=t.core.opt;return void 0==e&&(e=t.canDrag),e&&t.canDrag?t.element.removeClass(i.css_nodrag):t.element.addClass(i.css_nodrag),this},allowResize:function(e){var t=this,i=t.core.opt;return void 0==e&&(e=t.canResize),e&&t.canResize?t.element.removeClass(i.css_noresize):t.element.addClass(i.css_noresize),this},remove:function(){this.element.trigger("cropremove",this),this.element.remove()},toBack:function(){this.active=!1,this.element.removeClass("jcrop-current jcrop-focus")},toFront:function(){this.active=!0,this.element.addClass("jcrop-current"),this.callFilterFunction("refresh"),this.refresh()},redraw:function(e){return this.moveTo(e.x,e.y),this.resize(e.w,e.h),this.last=e,this},update:function(e,t){return this.updateRaw(this.core.scale(e),t)},updateRaw:function(e,t){return e=this.runFilters(e,t),this.redraw(e),this.element.trigger("cropmove",[this,this.core.unscale(e)]),this},animateTo:function(e,i){var n=new t.component.Animator(this),a=this.core.scale(t.wrapFromXywh(e));n.animate(a.x,a.y,a.w,a.h,i)},center:function(e){var t=this.get(),i=this.core,n=i.container.width(),a=i.container.height(),r=[(n-t.w)/2,(a-t.h)/2,t.w,t.h];return this[e?"setSelect":"animateTo"](r)},createElement:function(t,i){return e("<div />").addClass(t+" ord-"+i).data("ord",i)},moveTo:function(e,t){this.element.css({top:t+"px",left:e+"px"})},blur:function(){return this.element.blur(),this},focus:function(){return this.core.setSelection(this),this.frame.focus(),this},resize:function(e,t){this.element.css({width:e+"px",height:t+"px"})},get:function(){var e=this.element,t=e.position(),i=e.width(),n=e.height(),a={x:t.left,y:t.top};return a.x2=a.x+i,a.y2=a.y+n,a.w=i,a.h=n,a},insertElements:function(){var e,t=this,i=(t.core,t.element),n=t.core.opt,a=n.borders,r=n.handles,o=n.dragbars;for(e=0;e<o.length;e++)i.append(t.createElement(n.css_dragbars,o[e]));for(e=0;e<r.length;e++)i.append(t.createElement(n.css_handles,r[e]));for(e=0;e<a.length;e++)i.append(t.createElement(n.css_borders,a[e]))}}}),t.registerComponent("Selection",w);var C=function t(i,n){e.extend(this,t.defaults,n||{}),this.manager=i,this.core=i.core};C.defaults={offset:[-8,-8],active:!0,minsize:[20,20]},e.extend(C.prototype,{start:function(i){var n=this.core;if(n.opt.allowSelect){if(n.opt.multi&&n.opt.multiMax&&n.ui.multi.length>=n.opt.multiMax)return!1;var a=e(i.currentTarget).offset(),r=i.pageX-a.left+this.offset[0],o=i.pageY-a.top+this.offset[1],s=n.ui.multi;if(!n.opt.multi)if(n.opt.multiCleanup){for(var l=0;l<s.length;l++)s[l].remove();n.ui.multi=[]}else n.removeSelection(n.ui.selection);n.container.addClass("jcrop-dragging");var c=n.newSelection().updateRaw(t.wrapFromXywh([r,o,1,1]));return c.element.trigger("cropstart",[c,this.core.unscale(c.get())]),c.startDrag(i,"se")}},end:function(e,t){this.drag(e,t);var i=this.sel.get();this.core.container.removeClass("jcrop-dragging"),i.w<this.minsize[0]||i.h<this.minsize[1]?this.core.requestDelete():this.sel.focus()}}),t.registerComponent("StageDrag",C);var x=function(e){this.core=e,this.ui=e.ui,this.init()};e.extend(x.prototype,{init:function(){this.setupEvents(),this.dragger=new C(this)},tellConfigUpdate:function(e){for(var t=0,i=this.ui.multi,n=i.length;t<n;t++)i[t].setOptions&&(i[t].linked||this.core.opt.linkCurrent&&i[t]==this.ui.selection)&&i[t].setOptions(e)},startDragHandler:function(){var e=this;return function(t){if(!t.button||e.core.opt.is_ie_lt9)return e.dragger.start(t)}},removeEvents:function(){this.core.event.off(".jcrop-stage"),this.core.container.off(".jcrop-stage")},shimLegacyHandlers:function(t){var i,n=this.core;e.each(n.opt.legacyHandlers,function(e,a){e in t&&(i=t[e],n.container.off(".jcrop-"+e).on(a+".jcrop.jcrop-"+e,function(e,t,a){i.call(n,a)}),delete t[e])})},setupEvents:function(){var e=this,t=e.core;t.event.on("configupdate.jcrop-stage",function(i){e.shimLegacyHandlers(t.opt),e.tellConfigUpdate(t.opt),t.container.trigger("cropconfig",[t,t.opt])}),this.core.container.on("mousedown.jcrop.jcrop-stage",this.startDragHandler())}}),t.registerComponent("StageManager",x);var k=function(){};e.extend(k,{defaults:{selection:null,fading:!0,fadeDelay:1e3,fadeDuration:1e3,autoHide:!1,width:80,height:80,_hiding:null},prototype:{recopyCanvas:function(){var e=this.core.ui.stage,t=e.context;this.context.putImageData(t.getImageData(0,0,e.canvas.width,e.canvas.height),0,0)},init:function(t,i){var n=this;this.core=t,e.extend(this,k.defaults,i),n.initEvents(),n.refresh(),n.insertElements(),n.selection?(n.renderSelection(n.selection),n.selectionTarget=n.selection.element[0]):n.core.ui.selection&&n.renderSelection(n.core.ui.selection),n.core.ui.stage.canvas&&(n.context=n.preview[0].getContext("2d"),n.core.container.on("cropredraw",function(e){n.recopyCanvas(),n.refresh()}))},updateImage:function(t){return this.preview.remove(),this.preview=e(e.Jcrop.imageClone(t)),this.element.append(this.preview),this.refresh(),this},insertElements:function(){this.preview=e(e.Jcrop.imageClone(this.core.ui.stage.imgsrc)),this.element=e("<div />").addClass("jcrop-thumb").width(this.width).height(this.height).append(this.preview).appendTo(this.core.container)},resize:function(e,t){this.width=e,this.height=t,this.element.width(e).height(t),this.renderCoords(this.last)},refresh:function(){this.cw=this.core.opt.xscale*this.core.container.width(),this.ch=this.core.opt.yscale*this.core.container.height(),this.last&&this.renderCoords(this.last)},renderCoords:function(e){var t=this.width/e.w,i=this.height/e.h;return this.preview.css({width:Math.round(t*this.cw)+"px",height:Math.round(i*this.ch)+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(i*e.y)+"px"}),this.last=e,this},renderSelection:function(e){return this.renderCoords(e.core.unscale(e.get()))},selectionStart:function(e){this.renderSelection(e)},show:function(){this._hiding&&clearTimeout(this._hiding),this.fading?this.element.stop().animate({opacity:1},{duration:80,queue:!1}):this.element.stop().css({opacity:1})},hide:function(){var e=this;e.fading?e._hiding=setTimeout(function(){e._hiding=null,e.element.stop().animate({opacity:0},{duration:e.fadeDuration,queue:!1})},e.fadeDelay):e.element.hide()},initEvents:function(){var e=this;e.core.container.on("croprotstart croprotend cropimage cropstart cropmove cropend",function(t,i,n){if(e.selectionTarget&&e.selectionTarget!==t.target)return!1;switch(t.type){case"cropimage":e.updateImage(n);break;case"cropstart":e.selectionStart(i);case"croprotstart":e.show();break;case"cropend":e.renderCoords(n);case"croprotend":e.autoHide&&e.hide();break;case"cropmove":e.renderCoords(n)}})}}}),t.registerComponent("Thumbnailer",k);var A=function(){};A.prototype={init:function(t,i,n){i||(i=t.container),this.$btn=e(i),this.$targ=e(i),this.core=t,this.$btn.addClass("dialdrag").on("mousedown.dialdrag",this.mousedown()).data("dialdrag",this),e.isFunction(n)||(n=function(){}),this.callback=n,this.ondone=n},remove:function(){return this.$btn.removeClass("dialdrag").off(".dialdrag").data("dialdrag",null),this},setTarget:function(t){return this.$targ=e(t),this},getOffset:function(){var e=this.$targ,t=e.offset();return[t.left+e.width()/2,t.top+e.height()/2]},relMouse:function(e){var t=e.pageX-this.offset[0],i=e.pageY-this.offset[1];return[t,i,Math.atan2(i,t)*(180/Math.PI),Math.sqrt(Math.pow(t,2)+Math.pow(i,2))]},mousedown:function(){var t=this;function i(i){e(window).off(".dialdrag"),t.ondone.call(t,t.relMouse(i)),t.core.container.trigger("croprotend")}function n(e){t.callback.call(t,t.relMouse(e))}return function(a){t.offset=t.getOffset();var r=t.relMouse(a);return t.angleOffset=-t.core.ui.stage.angle+r[2],t.distOffset=r[3],t.dragOffset=[r[0],r[1]],t.core.container.trigger("croprotstart"),e(window).on("mousemove.dialdrag",n).on("mouseup.dialdrag",i),t.callback.call(t,t.relMouse(a)),!1}}},t.registerComponent("DialDrag",A),t.defaults={edge:{n:0,s:0,e:0,w:0},setSelect:null,linked:!0,linkCurrent:!0,canDelete:!0,canSelect:!0,canDrag:!0,canResize:!0,eventManagerComponent:t.component.EventManager,keyboardComponent:t.component.Keyboard,dragstateComponent:t.component.DragState,stagemanagerComponent:t.component.StageManager,animatorComponent:t.component.Animator,selectionComponent:t.component.Selection,stageConstructor:t.stageConstructor,allowSelect:!0,multi:!1,multiMax:!1,multiCleanup:!0,animation:!0,animEasing:"swing",animDuration:400,fading:!0,fadeDuration:300,fadeEasing:"swing",bgColor:"black",bgOpacity:.5,applyFilters:["constrain","extent","backoff","ratio","shader","round"],borders:["e","w","s","n"],handles:["n","s","e","w","sw","ne","nw","se"],dragbars:["n","e","w","s"],dragEventTarget:window,xscale:1,yscale:1,boxWidth:null,boxHeight:null,css_nodrag:"jcrop-nodrag",css_drag:"jcrop-drag",css_container:"jcrop-active",css_shades:"jcrop-shades",css_selection:"jcrop-selection",css_borders:"jcrop-border",css_handles:"jcrop-handle jcrop-drag",css_button:"jcrop-box jcrop-drag",css_noresize:"jcrop-noresize",css_dragbars:"jcrop-dragbar jcrop-drag",legacyHandlers:{onChange:"cropmove",onSelect:"cropend"}},e.extend(t.prototype,{init:function(){this.event=new this.opt.eventManagerComponent(this),this.ui.keyboard=new this.opt.keyboardComponent(this),this.ui.manager=new this.opt.stagemanagerComponent(this),this.applyFilters(),e.Jcrop.supportsTouch&&new e.Jcrop.component.Touch(this),this.initEvents()},applySizeConstraints:function(){var i=this.opt,n=this.opt.imgsrc;if(n){var a=n.naturalWidth||n.width,r=n.naturalHeight||n.height,o=i.boxWidth||a,s=i.boxHeight||r;if(n&&(a>o||r>s)){var l=t.getLargestBox(a/r,o,s);e(n).width(l[0]).height(l[1]),this.resizeContainer(l[0],l[1]),this.opt.xscale=a/l[0],this.opt.yscale=r/l[1]}}if(this.opt.trueSize){var c=this.opt.trueSize[0],d=this.opt.trueSize[1],u=this.getContainerSize();this.opt.xscale=c/u[0],this.opt.yscale=d/u[1]}},initComponent:function(e){if(t.component[e]){var i=Array.prototype.slice.call(arguments),n=new t.component[e];return i.shift(),i.unshift(this),n.init.apply(n,i),n}},setOptions:function(t,i){return e.isPlainObject(t)||(t={}),e.extend(this.opt,t),this.opt.setSelect&&(this.ui.multi.length||this.newSelection(),this.setSelect(this.opt.setSelect),this.opt.setSelect=null),this.event.trigger("configupdate"),this},destroy:function(){this.opt.imgsrc?(this.container.before(this.opt.imgsrc),this.container.remove(),e(this.opt.imgsrc).removeData("Jcrop").show()):this.container.remove()},applyFilters:function(){for(var t,i=0,n=this.opt.applyFilters,a=n.length;i<a;i++)e.Jcrop.filter[n[i]]&&(t=new e.Jcrop.filter[n[i]]),t.core=this,t.init&&t.init(),this.filter[n[i]]=t},getDefaultFilters:function(){for(var e=[],t=0,i=this.opt.applyFilters,n=i.length;t<n;t++)this.filter.hasOwnProperty(i[t])&&e.push(this.filter[i[t]]);return e.sort(function(e,t){return e.priority-t.priority}),e},setSelection:function(e){for(var t=this.ui.multi,i=[],n=0;n<t.length;n++)t[n]!==e&&i.push(t[n]),t[n].toBack();return i.unshift(e),this.ui.multi=i,this.ui.selection=e,e.toFront(),e},getSelection:function(e){return this.ui.selection.get()},newSelection:function(e){return e||(e=new this.opt.selectionComponent),e.init(this),this.setSelection(e),e},hasSelection:function(e){for(var t=0;t<this.ui.multi;t++)if(e===this.ui.multi[t])return!0},removeSelection:function(e){for(var t=[],i=this.ui.multi,n=0;n<i.length;n++)e!==i[n]?t.push(i[n]):i[n].remove();return this.ui.multi=t},addFilter:function(e){for(var t=0,i=this.ui.multi,n=i.length;t<n;t++)i[t].addFilter(e);return this},removeFilter:function(e){for(var t=0,i=this.ui.multi,n=i.length;t<n;t++)i[t].removeFilter(e);return this},blur:function(){return this.ui.selection.blur(),this},focus:function(){return this.ui.selection.focus(),this},initEvents:function(){var e=this;e.container.on("selectstart",function(e){return!1}).on("mousedown","."+e.opt.css_drag,e.startDrag())},maxSelect:function(){this.setSelect([0,0,this.elw,this.elh])},nudge:function(e,t){var i=this.ui.selection,n=i.get();n.x+=e,n.x2+=e,n.y+=t,n.y2+=t,n.x<0?(n.x2=n.w,n.x=0):n.x2>this.elw&&(n.x2=this.elw,n.x=n.x2-n.w),n.y<0?(n.y2=n.h,n.y=0):n.y2>this.elh&&(n.y2=this.elh,n.y=n.y2-n.h),i.element.trigger("cropstart",[i,this.unscale(n)]),i.updateRaw(n,"move"),i.element.trigger("cropend",[i,this.unscale(n)])},refresh:function(){for(var e=0,t=this.ui.multi,i=t.length;e<i;e++)t[e].refresh()},blurAll:function(){for(var e=this.ui.multi,t=0;t<e.length;t++)e[t]!==sel&&n.push(e[t]),e[t].toBack()},scale:function(e){var t=this.opt.xscale,i=this.opt.yscale;return{x:e.x/t,y:e.y/i,x2:e.x2/t,y2:e.y2/i,w:e.w/t,h:e.h/i}},unscale:function(e){var t=this.opt.xscale,i=this.opt.yscale;return{x:e.x*t,y:e.y*i,x2:e.x2*t,y2:e.y2*i,w:e.w*t,h:e.h*i}},requestDelete:function(){if(this.ui.multi.length>1&&this.ui.selection.canDelete)return this.deleteSelection()},deleteSelection:function(){this.ui.selection&&(this.removeSelection(this.ui.selection),this.ui.multi.length&&this.ui.multi[0].focus(),this.ui.selection.refresh())},animateTo:function(e){return this.ui.selection&&this.ui.selection.animateTo(e),this},setSelect:function(e){return this.ui.selection&&this.ui.selection.update(t.wrapFromXywh(e)),this},startDrag:function(){var t=this;return function(i){var n=e(i.target),a=n.closest("."+t.opt.css_selection).data("selection"),r=n.data("ord");return t.container.trigger("cropstart",[a,t.unscale(a.get())]),a.startDrag(i,r),!1}},getContainerSize:function(){return[this.container.width(),this.container.height()]},resizeContainer:function(e,t){this.container.width(e).height(t),this.refresh()},setImage:function(t,i){var n=this,a=n.opt.imgsrc;if(!a)return!1;new e.Jcrop.component.ImageLoader(t,null,function(r,o){n.resizeContainer(r,o),a.src=t,e(a).width(r).height(o),n.applySizeConstraints(),n.refresh(),n.container.trigger("cropimage",[n,a]),"function"==typeof i&&i.call(n,r,o)})},update:function(e){this.ui.selection&&this.ui.selection.update(e)}}),e.fn.Jcrop=function(t,i){t=t||{};var n=this.eq(0).data("Jcrop"),a=Array.prototype.slice.call(arguments);return"api"==t?n:n&&"string"==typeof t?!!n[t]&&(a.shift(),n[t].apply(n,a),n):void this.each(function(){var n=e(this),a=n.data("Jcrop");return a?a.setOptions(t):(t.stageConstructor||(t.stageConstructor=e.Jcrop.stageConstructor),t.stageConstructor(this,t,function(t,a){var r=a.setSelect;r&&delete a.setSelect;var o=e.Jcrop.attach(t.element,a);"function"==typeof t.attach&&t.attach(o),n.data("Jcrop",o),r&&(o.newSelection(),o.setSelect(r)),"function"==typeof i&&i.call(o)})),this})};var T=function(e,t,n){var a,r,o={},s=t.documentElement,l="modernizr",c=t.createElement(l),d=c.style,u={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),g="Webkit Moz O ms".split(" "),h="Webkit Moz O ms".toLowerCase().split(" "),m="http://www.w3.org/2000/svg",f={},v=[],b=v.slice,y=function(e,i,n,a){var r,o,c,d,u=t.createElement("div"),p=t.body,g=p||t.createElement("body");if(parseInt(n,10))for(;n--;)(c=t.createElement("div")).id=a?a[n]:l+(n+1),u.appendChild(c);return r=["&#173;",'<style id="s',l,'">',e,"</style>"].join(""),u.id=l,(p?u:g).innerHTML+=r,g.appendChild(u),p||(g.style.background="",g.style.overflow="hidden",d=s.style.overflow,s.style.overflow="hidden",s.appendChild(g)),o=i(u,e),p?u.parentNode.removeChild(u):(g.parentNode.removeChild(g),s.style.overflow=d),!!o},S=function(){var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(i,a){a=a||t.createElement(e[i]||"div");var r=(i="on"+i)in a;return r||(a.setAttribute||(a=t.createElement("div")),a.setAttribute&&a.removeAttribute&&(a.setAttribute(i,""),r=x(a[i],"function"),x(a[i],"undefined")||(a[i]=n),a.removeAttribute(i))),a=null,r}}(),w={}.hasOwnProperty;function C(e){d.cssText=e}function x(e,t){return i(e)===t}function k(e,t){for(var i in e){var a=e[i];if(!~(""+a).indexOf("-")&&d[a]!==n)return"pfx"!=t||a}return!1}function A(e,t,i){var a=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+g.join(a+" ")+a).split(" ");return x(t,"string")||x(t,"undefined")?k(r,t):function(e,t,i){for(var a in e){var r=t[e[a]];if(r!==n)return!1===i?e[a]:x(r,"function")?r.bind(i||t):r}return!1}(r=(e+" "+h.join(a+" ")+a).split(" "),t,i)}for(var T in r=x(w,"undefined")||x(w.call,"undefined")?function(e,t){return t in e&&x(e.constructor.prototype[t],"undefined")}:function(e,t){return w.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=b.call(arguments,1);return function n(){if(this instanceof n){var a=function(){};a.prototype=t.prototype;var r=new a,o=t.apply(r,i.concat(b.call(arguments)));return Object(o)===o?o:r}return t.apply(e,i.concat(b.call(arguments)))}}),f.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},f.canvastext=function(){return!(!o.canvas||!x(t.createElement("canvas").getContext("2d").fillText,"function"))},f.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:y(["@media (",p.join("touch-enabled),("),l,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i},f.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},f.csstransforms=function(){return!!A("transform")},f.svg=function(){return!!t.createElementNS&&!!t.createElementNS(m,"svg").createSVGRect},f.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==m},f.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(u.call(t.createElementNS(m,"clipPath")))},f)r(f,T)&&(a=T.toLowerCase(),o[a]=f[T](),v.push((o[a]?"":"no-")+a));return o.addTest=function(e,t){if("object"==i(e))for(var a in e)r(e,a)&&o.addTest(a,e[a]);else{if(e=e.toLowerCase(),o[e]!==n)return o;t="function"==typeof t?t():t,"undefined"!==typeof enableClasses&&enableClasses&&(s.className+=" "+(t?"":"no-")+e),o[e]=t}return o},C(""),c=null,o._version="2.7.1",o._prefixes=p,o._domPrefixes=h,o._cssomPrefixes=g,o.hasEvent=S,o.testProp=function(e){return k([e])},o.testAllProps=A,o.testStyles=y,o}(window,window.document);!function(){var e=new Image;e.onerror=function(){T.addTest("datauri",function(){return!1})},e.onload=function(){T.addTest("datauri",function(){return 1==e.width&&1==e.height})},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}(),e.Jcrop=t,e.Jcrop.supportsCanvas=T.canvas,e.Jcrop.supportsCanvasText=T.canvastext,e.Jcrop.supportsDragAndDrop=T.draganddrop,e.Jcrop.supportsDataURI=T.datauri,e.Jcrop.supportsSVG=T.svg,e.Jcrop.supportsInlineSVG=T.inlinesvg,e.Jcrop.supportsSVGClipPaths=T.svgclippaths,e.Jcrop.supportsCSSTransforms=T.csstransforms,e.Jcrop.supportsTouch=T.touch}(jQuery)},336:function(e,t,i){var n=i(13);e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<img class="img-crop"'+n.attr("src",e.src,!0,!0)+'><canvas class="crop-preview-canvas" style="display:none"></canvas>'}.call(this,"img"in i?i.img:"undefined"!==typeof img?img:void 0),t}},337:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jcropReactStyle=void 0;t.jcropReactStyle={"@global":{".jcrop-active":{direction:"ltr",textAlign:"left",boxSizing:"border-box",msTouchAction:"none"},".jcrop-dragging":{mozUserSelect:"none",webkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},".jcrop-selection":{zIndex:"2",position:"absolute"},".jcrop-selection.jcrop-current":{zIndex:"4"},".jcrop-border":{background:'#ffffff url("Jcrop.gif")',lineHeight:"1px !important",fontSize:"0 !important",overflow:"hidden",position:"absolute",filter:"alpha(opacity=50) !important",opacity:"0.5 !important"},".jcrop-border.ord-w, .jcrop-border.ord-e, .jcrop-border.ord-n":{top:0},".jcrop-border.ord-n, .jcrop-border.ord-s":{width:"100%",height:"1px !important"},".jcrop-border.ord-w, .jcrop-border.ord-e":{height:"100%",width:"1px !important"},".jcrop-border.ord-e":{right:-1},".jcrop-border.ord-n":{top:-1},".jcrop-border.ord-w":{left:-1},".jcrop-border.ord-s":{bottom:-1},".jcrop-box":{zIndex:"2",display:"block",background:"none",border:"none",padding:"0",margin:"0",fontSize:"0",width:"100%",height:"100%",cursor:"move"},".jcrop-box:hover":{background:"none"},".jcrop-box:active":{background:"none"},".jcrop-box:focus":{outline:"1px rgba(128, 128, 128, 0.65) dotted"},".jcrop-active, .jcrop-box":{position:"relative"},".jcrop-handle":{zIndex:"4",backgroundColor:"rgba(49, 28, 28, 0.58)",border:"1px #eeeeee solid",width:9,height:9,fontSize:"0",position:"absolute",filter:"alpha(opacity=80) !important",opacity:"0.8 !important"},".jcrop-handle.ord-n":{left:"50%",marginLeft:-5,marginTop:-5,top:"0",cursor:"n-resize"},".jcrop-handle.ord-s":{bottom:"0",left:"50%",marginBottom:-5,marginLeft:-5,cursor:"s-resize"},".jcrop-handle.ord-e":{marginRight:-5,marginTop:-5,right:"0",top:"50%",cursor:"e-resize"},".jcrop-handle.ord-w":{left:"0",marginLeft:-5,marginTop:-5,top:"50%",cursor:"w-resize"},".jcrop-handle.ord-nw":{left:"0",marginLeft:-5,marginTop:-5,top:"0",cursor:"nw-resize"},".jcrop-handle.ord-ne":{marginRight:-5,marginTop:-5,right:"0",top:"0",cursor:"ne-resize"},".jcrop-handle.ord-se":{bottom:"0",marginBottom:-5,marginRight:-5,right:"0",cursor:"se-resize"},".jcrop-handle.ord-sw":{bottom:"0",left:"0",marginBottom:-5,marginLeft:-5,cursor:"sw-resize"},".jcrop-touch .jcrop-handle":{zIndex:"4",backgroundColor:"rgba(49, 28, 28, 0.58)",border:"1px #eeeeee solid",width:18,height:18,fontSize:"0",position:"absolute",filter:"alpha(opacity=80) !important",opacity:"0.8 !important"},".jcrop-touch .jcrop-handle.ord-n":{left:"50%",marginLeft:-10,marginTop:-10,top:"0",cursor:"n-resize"},".jcrop-touch .jcrop-handle.ord-s":{bottom:"0",left:"50%",marginBottom:-10,marginLeft:-10,cursor:"s-resize"},".jcrop-touch .jcrop-handle.ord-e":{marginRight:-10,marginTop:-10,right:"0",top:"50%",cursor:"e-resize"},".jcrop-touch .jcrop-handle.ord-w":{left:"0",marginLeft:-10,marginTop:-10,top:"50%",cursor:"w-resize"},".jcrop-touch .jcrop-handle.ord-nw":{left:"0",marginLeft:-10,marginTop:-10,top:"0",cursor:"nw-resize"},".jcrop-touch .jcrop-handle.ord-ne":{marginRight:-10,marginTop:-10,right:"0",top:"0",cursor:"ne-resize"},".jcrop-touch .jcrop-handle.ord-se":{bottom:"0",marginBottom:-10,marginRight:-10,right:"0",cursor:"se-resize"},".jcrop-touch .jcrop-handle.ord-sw":{bottom:"0",left:"0",marginBottom:-10,marginLeft:-10,cursor:"sw-resize"},".jcrop-dragbar":{fontSize:"0",position:"absolute"},".jcrop-dragbar.ord-n, .jcrop-dragbar.ord-s":{height:"9px !important",width:"100%"},".jcrop-dragbar.ord-e, .jcrop-dragbar.ord-w":{top:0,height:"100%",width:"9px !important"},".jcrop-dragbar.ord-n":{marginTop:-5,cursor:"n-resize",top:0},".jcrop-dragbar.ord-s":{bottom:"0",marginBottom:-5,cursor:"s-resize"},".jcrop-dragbar.ord-e":{marginRight:-5,right:"0",cursor:"e-resize"},".jcrop-dragbar.ord-w":{marginLeft:-5,cursor:"w-resize"},".jcrop-shades":{position:"relative",top:"0",left:"0"},".jcrop-shades div":{cursor:"crosshair"},".jcrop-noresize .jcrop-dragbar, .jcrop-noresize .jcrop-handle":{display:"none"},".jcrop-selection.jcrop-nodrag .jcrop-box, .jcrop-nodrag .jcrop-shades div":{cursor:"default"},".jcrop-light .jcrop-border":{background:"#ffffff",filter:"alpha(opacity=70) !important",opacity:".70!important"},".jcrop-light .jcrop-handle":{backgroundColor:"#000000",borderColor:"#ffffff"},".jcrop-dark .jcrop-border":{background:"#000000",filter:"alpha(opacity=70) !important",opacity:"0.7 !important"},".jcrop-dark .jcrop-handle":{backgroundColor:"#ffffff",borderColor:"#000000"},".solid-line .jcrop-border":{background:"#ffffff"},".jcrop-thumb":{position:"absolute",overflow:"hidden",zIndex:"5"},".jcrop-active img, .jcrop-thumb img, .jcrop-thumb canvas":{minWidth:"none",minHeight:"none",maxWidth:"none",maxHeight:"none"},".jcrop-hl-active .jcrop-border":{filter:"alpha(opacity=20) !important",opacity:".20!important"},".jcrop-hl-active .jcrop-handle":{filter:"alpha(opacity=10) !important",opacity:".10!important"},".jcrop-hl-active .jcrop-selection:hover":{},".jcrop-hl-active .jcrop-selection:hover .jcrop-border":{backgroundColor:"#ccc",filter:"alpha(opacity=50) !important",opacity:".50!important"},".jcrop-hl-active .jcrop-selection.jcrop-current .jcrop-border":{background:"#808080 url('Jcrop.gif')",opacity:".35!important",filter:"alpha(opacity=35) !important"},".jcrop-hl-active .jcrop-selection.jcrop-current .jcrop-handle":{filter:"alpha(opacity=30) !important",opacity:".30!important"},".jcrop-hl-active .jcrop-selection.jcrop-focus .jcrop-border":{background:"url('Jcrop.gif')",opacity:".65!important",filter:"alpha(opacity=65) !important"},".jcrop-hl-active .jcrop-selection.jcrop-focus .jcrop-handle":{filter:"alpha(opacity=60) !important",opacity:".60!important"},"button.jcrop-box":{background:"none"}}}},8:function(t,i){t.exports=e},9:function(e,i){e.exports=t}})}.apply(t,a))||(e.exports=r)},"6Ux2":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("sO0N"),d=i("Cwtd"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("7XbR"),m=i.n(h),f=i("eiR/"),v=function e(t){var i=this,a=t.trackingTemplate,r=t.i18n,o=t.editMode,s=t.showUurlTestTool;Object(n.a)(this,e),this.editMode=m.a.observable(o),this.maxLength=2048,this.trackingTemplate=m.a.observable(a),this.inputClass=s?["with-test-button form-control"]:["full-width form-control"],this.validate=function(e){var t=[];return f.hasScheme(e)||g.a.find(["{lpurl}","{unescapedlpurl}"],function(t){return 0===e.indexOf(t)})||(t=g.a.union(t,[r.getString("Error_Campaign_API_InvalidUrlScheme")])),t},this.errorMessages=m.a.computed(function(){return i.trackingTemplate()?i.validate(i.trackingTemplate()):[]}),this.showNone=m.a.computed(function(){return!i.editMode()&&!i.trackingTemplate()}),this.isValid=m.a.computed(function(){return!i.errorMessages().length},this)},b=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.editMode,r=void 0===a||a,l=e.template,c=void 0===l?u.a:l,d=e.trackingTemplate,p=e.showUurlTestTool,g=void 0!==p&&p;this.options={i18n:n,editMode:r,trackingTemplate:d,template:c,showUurlTestTool:g},Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,this.options),this.viewModel.trackingTemplate.subscribe(function(){i.trigger("trackingTemplate:updated",{isValid:i.isValid(),trackingTemplate:i.getTrackingTemplate()})},this)}},{key:"setEditMode",value:function(e){this.viewModel.editMode(e)}},{key:"setTrackingTemplate",value:function(e){this.viewModel.trackingTemplate(e)}},{key:"getTrackingTemplate",value:function(){return(this.viewModel.trackingTemplate()||"").trim()}},{key:"setErrors",value:function(e){this.viewModel.errorMessages(e)}},{key:"isValid",value:function(){return this.viewModel.isValid()}},{key:"template",get:function(){var e=this;return function(){return e.options.template({i18n:e.options.i18n})}}},{key:"ViewModel",get:function(){return v}}]),t}(c.PureKnockoutView),y=i("y1Ku"),S=i("p0Zs"),w=i.n(S),C=function e(t){var i=t.error,a=void 0===i?"":i,r=t.isValid,o=void 0===r||r;Object(n.a)(this,e),this.error=m.a.observable(a),this.isValid=m.a.observable(o)},x=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.trackingTemplate,r=e.showUurlTestTool,l=e.isForVNext,c=e.deps,d=void 0===c?null:c;if(Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{i18n:n,trackingTemplate:a}),this.i18n=n,this.trackingTemplateView=new b({i18n:n,editMode:!0,trackingTemplate:a,showUurlTestTool:r}),this.trackingTemplateView.on("trackingTemplate:updated",function(e){var t=e.isValid;i.viewModel.isValid(t)}),this.viewModel.isValid(this.trackingTemplateView.isValid()),this.setChild("childView",this.trackingTemplateView),r){var u;try{u=y.globalContext.require("component/upgraded-url/view/urlTestTool")}catch(p){if(!d)return;u=d.uurlTestToolView}u&&setTimeout(function(){var e=new u({urlTestToolStatusContainer:i.$(".uurl-test-info__container"),isForVNext:l});i.$(".uurl-test-tool__container").empty().append(e.render().el),e.on("testUurl",function(e,t){i.trigger("testUurl",e,t)})},50)}}},{key:"save",value:function(){this.trigger("save",{trackingTemplate:this.trackingTemplateView.getTrackingTemplate()})}},{key:"cancel",value:function(){this.trigger("close")}},{key:"setErrors",value:function(e){e&&!g.a.isEmpty(e)&&g.a.isObject(e)?this.viewModel.error(e[g.a.keys(e)[0]]):this.viewModel.error("")}},{key:"events",get:function(){return{"click .btn-primary":"save","click .btn-default.grid-popupeditor-cancel":"cancel"}}},{key:"template",get:function(){var e=this;return function(t){var i=t.model;return w()({model:i,i18n:e.i18n})}}},{key:"ViewModel",get:function(){return C}}]),t}(c.PureKnockoutView),k=i("6cGU"),A=i.n(k),T=function e(t){var i=this,a=t.finalUrlSuffix,r=t.i18n,o=t.editMode,s=t.showPlaceholder,l=void 0!==s&&s;Object(n.a)(this,e),this.editMode=m.a.observable(o),this.maxLength=1024,this.finalUrlSuffix=m.a.observable(a),this.validate=function(e){i.externalErrors&&i.externalErrors([]);var t=[],n=g.a.first(e);return(g.a.contains(["#","?","&"],n)||/\s|\r|\n/g.test(e))&&(t=g.a.union(t,[r.getString("Error_Campaign_API_InvalidCharactersInValue")])),g.a.find(["{lpurl}","{lpurl+2}","{lpurl+3}","{unescapedlpurl}","{ignore}","{escapedlpurl}","{escapedlpurl+2}","{escapedlpurl+3}","{ignore}"],function(t){return 0===e.indexOf(t)})&&(t=g.a.union(t,[r.getString("Error_Campaign_API_InvalidTag")])),t},this.errorMessages=m.a.computed(function(){return i.finalUrlSuffix()?i.validate(i.finalUrlSuffix()):[]}),this.externalErrors=m.a.observableArray(),this.showNone=m.a.computed(function(){return!i.editMode()&&!i.finalUrlSuffix()}),this.isValid=m.a.computed(function(){return!i.errorMessages().length},this),this.placeholderText=l?r.getString("UpgradedUrl_Placeholder_FinalUrlSuffix"):""},_=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.editMode,r=void 0===a||a,l=e.template,c=void 0===l?A.a:l,d=e.finalUrlSuffix,u=e.showPlaceholder,p=void 0!==u&&u;this.options={i18n:n,editMode:r,finalUrlSuffix:d,template:c,showPlaceholder:p},Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,this.options),this.viewModel.finalUrlSuffix.subscribe(function(){i.trigger("finalUrlSuffix:updated",{isValid:i.isValid(),finalUrlSuffix:i.getFinalUrlSuffix()})},this)}},{key:"setEditMode",value:function(e){this.viewModel.editMode(e)}},{key:"setFinalUrlSuffix",value:function(e){this.viewModel.finalUrlSuffix(e)}},{key:"getFinalUrlSuffix",value:function(){return(this.viewModel.finalUrlSuffix()||"").trim()}},{key:"setErrors",value:function(e){this.viewModel.externalErrors(e)}},{key:"isValid",value:function(){return this.viewModel.isValid()}},{key:"template",get:function(){var e=this;return function(){return e.options.template({i18n:e.options.i18n})}}},{key:"ViewModel",get:function(){return T}}]),t}(c.PureKnockoutView),E=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.finalUrlSuffix;Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{i18n:n,finalUrlSuffix:a}),this.i18n=n,this.finalUrlSuffixView=new _({i18n:n,editMode:!0,finalUrlSuffix:a}),this.finalUrlSuffixView.on("finalUrlSuffix:updated",function(e){var t=e.isValid;i.viewModel.isValid(t)}),this.viewModel.isValid(this.finalUrlSuffixView.isValid()),this.setChild("childView",this.finalUrlSuffixView)}},{key:"save",value:function(){this.trigger("save",{finalUrlSuffix:this.finalUrlSuffixView.getFinalUrlSuffix()})}},{key:"cancel",value:function(){this.trigger("close")}},{key:"setErrors",value:function(e){e&&!g.a.isEmpty(e)&&g.a.isObject(e)?this.viewModel.error(e[g.a.keys(e)[0]]):this.viewModel.error("")}},{key:"events",get:function(){return{"click .btn-primary":"save","click .btn-default":"cancel"}}},{key:"template",get:function(){var e=this;return function(t){var i=t.model;return w()({model:i,i18n:e.i18n})}}},{key:"ViewModel",get:function(){return C}}]),t}(c.PureKnockoutView),I=i("3AVr"),O=i.n(I),P=i("5iHu"),M=i.n(P),j=function e(t){var i=this,a=t.Key,r=t.Value,o=t.i18n;Object(n.a)(this,e),this.key=m.a.observable(a),this.val=m.a.observable(r),this.isValid=m.a.observable(!0),this.errorMessages=m.a.computed(function(){var e=[],t=i.key(),n=i.val();return n&&!t&&e.push(o.getString("Error_Campaign_API_KeyNullOrEmpty")),g.a.some(["#","/"," "],function(e){return g.a.contains(t,e)})&&e.push(o.getString("Error_Campaign_API_InvalidCharactersInKey")),/\s/.test(n)&&e.push(o.getString("Error_Campaign_API_InvalidCharactersInValue")),i.isValid(!e.length),e})},L=function e(t){var i=this,a=t.customParameters,r=void 0===a?[]:a,o=t.bulkEditMode,s=t.editMode,l=t.bulkEditShowAddLabel,c=t.bulkEditShowMatchCase,d=t.i18n,u=t.permissions,p=t.entityType,h=t.forceUseIncreasedCount;Object(n.a)(this,e);for(var f=r;f.length<1;)f.push({Key:void 0,Value:void 0});this.bulkEditMode=o,this.editMode=m.a.observable(s),this.isDisabled=m.a.observable(!1),this.bulkEditShowAddLabel=m.a.observable(l),this.bulkEditShowMatchCase=m.a.observable(c),this.bulkEditMatchCaseSelected=m.a.observable(!1);var v=!!h;if(!v){var b=p?p.toLowerCase():"";v="phase1entity"===b||"campaign"===b||"adgroup"===b||"keyword"===b||"ad"===b||"audience"===b||"autotarget"===b||"productgroup"===b||u.IsCustomParameterCountIncreasePhase3Enabled}this.maxParameterCount=v?8:3,this.valueMaxLength=m.a.observable(v?250:200),this.addCustomParamEntry=function(){i.parameters.push(new j({Key:void 0,Value:void 0,i18n:d})),M()(".custom-param__key-field").last().focus()},this.removeCustomParamEntry=function(e){i.parameters.splice(e,1)},this.getInputAriaLabel=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?d.getString("CustomParameters_Placeholder_Key"):d.getString("CustomParameters_Placeholder_Value");return(d.getString("BulkEdit_UrlOptions_CustomParameters_InputAriaLabel")||"").replace("{{key}}",t).replace("{{number}}",e+1)},this.getRemoveButtonAriaLabel=function(e){return(d.getString("BulkEdit_UrlOptions_CustomParameters_RemoveLineNumber")||"").replace("{{number}}",e+1)},this.parameters=m.a.observableArray(g.a.map(f,function(e){return new j(g.a.extend({i18n:d},e))})),this.showAddLable=m.a.computed(function(){return i.editMode()&&i.bulkEditShowAddLabel()&&i.parameters().length<i.maxParameterCount}),this.errorMessages=m.a.computed(function(){i.parametersError&&i.parametersError([]);var e=g.a.compact(g.a.invoke(i.parameters(),"key"));return e=g.a.map(e,function(e){return e.toLowerCase()}),g.a.unique(e).length!==e.length?[d.getString("ErrorNumber_UniqueCustomParameterNames")]:""}),this.parameterArray=m.a.computed(function(){return g.a.map(i.parameters(),function(e){return{Key:e.key(),Value:e.val()}})}),this.parametersError=m.a.observableArray(),this.isValid=m.a.computed(function(){return i.parametersError&&i.parametersError([]),!i.errorMessages().length&&void 0===g.a.find(i.parameters(),function(e){return e.errorMessages().length})}),this.showNone=m.a.computed(function(){return!i.editMode()&&!g.a.find(i.parameters(),function(e){return e.key()||e.val()})})},D=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.editMode,r=void 0===a||a,l=e.bulkEditMode,c=void 0!==l&&l,d=e.bulkEditShowAddLabel,u=void 0===d||d,p=e.bulkEditShowMatchCase,g=void 0!==p&&p,h=e.errorMessages,m=e.customParameters,f=void 0===m?[]:m,v=e.permissions,b=e.entityType,y=e.forceUseIncreasedCount;this.options={i18n:n,editMode:r,bulkEditMode:c,bulkEditShowAddLabel:u,bulkEditShowMatchCase:g,customParameters:f,template:O.a,errorMessages:h,permissions:v,entityType:b,forceUseIncreasedCount:y},Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,this.options),this.viewModel.isValid.subscribe(function(){i.trigger("customParameters:updated",{isValid:i.isValid(),customParameters:i.getValues()})},this)}},{key:"goToAddReplaceMode",value:function(){this.viewModel.bulkEditShowAddLabel(!0),this.viewModel.bulkEditShowMatchCase(!1)}},{key:"goToRemoveMode",value:function(){this.viewModel.bulkEditShowAddLabel(!1),this.viewModel.bulkEditShowMatchCase(!0),this.options.bulkEditMode&&this.viewModel.parameters(this.viewModel.parameters.slice(0,1))}},{key:"setEditMode",value:function(e){this.viewModel.editMode(e)}},{key:"setDisabled",value:function(e){this.viewModel.isDisabled(e)}},{key:"isValid",value:function(){return this.viewModel.isValid()}},{key:"getValues",value:function(e){var t=[];return g.a.each(this.viewModel.parameters(),function(i){var n=i.key();if(n){var a={},r=i.val();void 0===r&&(r=""),e?(a.Key=n,a.Value=r):a[n]=r,t.push(a)}}),this.options.bulkEditMode?{params:t,matchCase:this.viewModel.bulkEditMatchCaseSelected()}:t}},{key:"ViewModel",get:function(){return L}},{key:"template",get:function(){var e=this;return function(){return e.options.template({i18n:e.options.i18n,bulkEditMode:e.options.bulkEditMode})}}}]),t}(c.PureKnockoutView),R=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.customParameters,r=e.permissions,l=e.entityType;Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{i18n:n,customParameters:a}),this.i18n=n,this.customPramsView=new D({i18n:n,editMode:!0,customParameters:a,permissions:r,entityType:l}),this.customPramsView.on("customParameters:updated",function(e){var t=e.isValid;i.viewModel.isValid(t)}),this.viewModel.isValid(this.customPramsView.isValid()),this.setChild("childView",this.customPramsView)}},{key:"save",value:function(){this.trigger("save",{customParams:this.customPramsView.getValues(!0)})}},{key:"cancel",value:function(){this.trigger("close")}},{key:"setErrors",value:function(e){e&&!g.a.isEmpty(e)&&g.a.isObject(e)?this.viewModel.error(e[g.a.keys(e)[0]]):this.viewModel.error("")}},{key:"events",get:function(){return{"click .btn-primary":"save","click .btn-default":"cancel"}}},{key:"template",get:function(){var e=this;return function(t){var i=t.model;return w()({model:i,i18n:e.i18n})}}},{key:"ViewModel",get:function(){return C}}]),t}(c.PureKnockoutView),N=i("eRoi"),V=i("syDw"),B=i.n(V),F=i("HcQT"),U=i.n(F),G=function e(t){var i=this;Object(n.a)(this,e),this.isFinalUrl=m.a.observable(t.isFinal),this.isFinalUrl.Editing=m.a.computed({read:function(){return i.isFinalUrl().toString()},write:function(e){return i.isFinalUrl("true"===e)}},this)},z=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,g.a.defaults(this.options,{template:U.a,isFinal:!0}),this.ko_model=new G(this.options),this.ko_model.isFinalUrl.subscribe(function(t){!0===t?e.trigger("finalUrlSelected"):e.trigger("destinationUrlSelected")})}},{key:"render",value:function(){return this.$el.html(U()({i18n:this.options.i18n})),m.a.applyBindings(this.ko_model,this.el),this}},{key:"getValues",value:function(){return{isFinal:this.ko_model.isFinalUrl()}}}]),t}(B.a.View),H=new RegExp("^(http|https)(://)(.+)","i"),W=function e(t){var i=this;Object(n.a)(this,e),this.maxFullUrlLength=t.maxFullUrlLength||2048,this.protocols=[{Value:"https",Text:"https://"},{Value:"http",Text:"http://"}],t.url&&0!==t.url.indexOf("http")&&(t.url="https://".concat(t.url)),this.errorContainer=m.a.observable(""),this.errorMessage=m.a.observable(""),this.showErrors=m.a.observable(!1),this.protocol=m.a.observable(),this.urlWithoutProtocol=m.a.observable(),this.fullUrl=m.a.computed({read:function(){if(!i.urlWithoutProtocol()||g.a.isEmpty(i.urlWithoutProtocol().trim()))return null;var e=H.exec(i.urlWithoutProtocol().trim());return e&&(i.protocol(e[1]),i.urlWithoutProtocol(e[3])),"".concat(i.protocol(),"://").concat(i.urlWithoutProtocol().trim())},write:function(e){var t=H.exec(e);i.protocol(t?t[1]:"https"),i.urlWithoutProtocol(t?t[3]:"")}},this),this.errorContainer(t.errorContainer),this.fullUrl(t.url),this.isDisabled=m.a.observable(!1),this.maxLength=m.a.computed(function(){return i.maxFullUrlLength-i.protocol().length-"://".length},this),this.hasErrors=m.a.observable(!1)},q=i("YlyU"),$=i.n(q),K=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=this;this.options=e||{},g.a.defaults(this.options,{template:$.a,urlPlaceholder:"",errorContainer:""}),this.ko_model=new W(this.options),this.ko_model.fullUrl.subscribe(function(e){t.trigger("urlChanged",e)},this)}},{key:"render",value:function(){return this.$el.html(this.options.template({urlPlaceholder:this.options.urlPlaceholder,ariaLabelledby:this.options.ariaLabelledby})),m.a.applyBindings(this.ko_model,this.el),this}},{key:"remove",value:function(){return m.a.cleanNode(this.el),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this),this}},{key:"getFullUrl",value:function(){return this.ko_model.fullUrl()}},{key:"setFullUrl",value:function(e){return this.ko_model.fullUrl(e)}},{key:"enable",value:function(){this.ko_model.isDisabled(!1)}},{key:"disable",value:function(){this.ko_model.isDisabled(!0)}}]),t}(B.a.View),J=function e(t){Object(n.a)(this,e),this.mobileUrlVisible=m.a.observable(t.isFinal&&!t.isMobilePreferred),this.showTitles=m.a.observable(t.showTitles),this.errorMessages=m.a.observableArray(),this.landingPageUrlErrorMessages=m.a.observableArray(),this.showUpgradeWarning=m.a.observable(!1)},Z=i("0zBa"),Y=i.n(Z),Q=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.i18n=e.i18n,g.a.defaults(this.options,{template:Y.a,isFinal:!0,smallContainer:!0,showTitles:!0,campaignFlow:!1}),this.showDestinationUrl=!this.options.disableKeywordDestinationUrl||!this.options.isFinal,this.ko_model=new J(this.options)}},{key:"updateOnDevicePreference",value:function(){this.ko_model.mobileUrlVisible(!0)}},{key:"getValues",value:function(){var e=!this.showDestinationUrl||this.finalUrl.getValues().isFinal;return{url:this.urlEditor.getFullUrl(),mobileFinalUrl:e?this.mobileUrl.ko_model.fullUrl():null,isFinal:e}}},{key:"finalUrlSelected",value:function(){this.updateOnDevicePreference(),this.urlEditor.enable(),this.options.isFinal||this.ko_model.showUpgradeWarning(!0),this.isValid()}},{key:"destinationUrlSelected",value:function(){this.ko_model.mobileUrlVisible(!1),this.ko_model.showUpgradeWarning(!1),this.options.disableKeywordDestinationUrl&&(this.urlEditor.setFullUrl(this.options.url),this.urlEditor.disable()),this.isValid()}},{key:"render",value:function(){var e=this;this.$el.html(this.options.template({i18n:this.i18n,showDestinationUrl:this.showDestinationUrl})),m.a.applyBindings(this.ko_model,this.el),this.showDestinationUrl&&(this.finalUrl=new z(g.a.extend({},this.options,{el:this.$(".final-url")})),this.finalUrl.on("finalUrlSelected",this.finalUrlSelected.bind(this)),this.finalUrl.on("destinationUrlSelected",this.destinationUrlSelected.bind(this)),this.finalUrl.render());var t=this.$(".url");return this.urlEditor=new K({url:this.options.url,el:t}),this.urlEditor.on("urlChanged",function(){e.trigger("finalUrlChanged")},this),this.urlEditor.render(),this.showDestinationUrl&&this.options.disableKeywordDestinationUrl&&this.urlEditor.disable(),this.mobileUrl=new K({url:this.options.finalMobileUrl,el:this.$(".mobile-url")}),this.mobileUrl.on("urlChanged",function(){e.trigger("mobileUrlChanged")},this),this.mobileUrl.render(),this.$(".url input.url-field").attr("name","FinalUrls"),this.$(".mobile-url input.url-field").attr("name","MobileFinalUrls"),this.on("finalUrlChanged",this.isValid),this.on("mobileUrlChanged",this.isValid),this}},{key:"isValid",value:function(){var e=this.getValues(),t=[],i=[];e.isFinal&&e.mobileFinalUrl&&!e.url&&t.push(this.i18n.getString("Error_Campaign_API_FinalUrlRequiredWhenUsingMobileFinalUrl")),this.ko_model.errorMessages(t),this.ko_model.landingPageUrlErrorMessages(i);var n=!t.length&&!i.length;return this.trigger("upgradedUrl:updated",{isValid:n}),n}},{key:"remove",value:function(){this.urlEditor.remove(),this.finalUrl&&this.finalUrl.remove(),this.mobileUrl.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}}]),t}(B.a.View),X=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.view=e.view,this.listenTo(this.view,"all",this.trigger),this.rendered=!0}}]),t}(N.DeterministicWrapperView),ee=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.i18n,a=e.upgradedUrls,r=e.permissions;Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{i18n:n,upgradedUrls:a}),this.i18n=n;var l=!!r&&r.IsKeywordDestinationURLDisabled;this.upgradedUrlView=new Q({url:a.url,finalMobileUrl:a.mobileFinalUrl,isFinal:a.isFinal,showTitles:!0,i18n:n,disableKeywordDestinationUrl:l}),this.upgradedUrlView.on("upgradedUrl:updated",function(e){var t=e.isValid;i.viewModel.isValid(t)}),this.setChild("childView",new X({view:this.upgradedUrlView.render()})),this.viewModel.isValid(this.upgradedUrlView.isValid())}},{key:"save",value:function(){this.trigger("save",{upgradedUrls:this.upgradedUrlView.getValues()})}},{key:"cancel",value:function(){this.trigger("close")}},{key:"setErrors",value:function(e){e&&!g.a.isEmpty(e)&&g.a.isObject(e)?this.viewModel.error(e[g.a.keys(e)[0]]):this.viewModel.error("")}},{key:"events",get:function(){return{"click .btn-primary":"save","click .btn-default":"cancel"}}},{key:"template",get:function(){var e=this;return function(t){var i=t.model;return w()({model:i,i18n:e.i18n,customClass:"upgraded-url-inline-editor"})}}},{key:"ViewModel",get:function(){return C}}]),t}(c.PureKnockoutView);i.d(t,"TrackingTemplateView",function(){return b}),i.d(t,"TrackingTemplateInlineEditView",function(){return x}),i.d(t,"FinalUrlSuffixView",function(){return _}),i.d(t,"FinalUrlSuffixInlineEditView",function(){return E}),i.d(t,"CustomParametersView",function(){return D}),i.d(t,"CustomParameterInlineEditView",function(){return R}),i.d(t,"UpgradedUrlInlineEditView",function(){return ee})},"6cGU":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'\x3c!-- ko if: editMode()--\x3e<input class="form-control full-width" type="text" name="FinalUrlSuffix" data-bind="value: finalUrlSuffix, attr: {maxlength: maxLength, &quot;aria-invalid&quot;: errorMessages().length &gt; 0, &quot;placeholder&quot;: placeholderText}"'+n.attr("aria-label",e.getString("FinalUrlSuffix_Label"),!0,!0)+' aria-describedby="FinalUrlSuffixErrors FinalUrlSuffixExample"><div class="charactersRemaining"><span id="FinalUrlSuffixExample">'+n.escape(null==(t=e.getString("FinalUrlSuffix_Example"))?"":t)+'</span></div><div class="font-error"><ul id="FinalUrlSuffixErrors" data-bind="foreach:errorMessages" role="alert"><li><span class="is-error" data-bind="html: $data"></span></li></ul><ul id="FinalUrlSuffixExternalErrors" data-bind="foreach:externalErrors" role="alert"><li><span class="is-error" data-bind="html: $data"></span></li></ul></div>\x3c!-- /ko--\x3e<span class="control-label" data-bind="visible: !editMode(), text: finalUrlSuffix"></span><div data-bind="visible: showNone()"><span class="control-label">'+n.escape(null==(t=e.getString("UrlOptions_None"))?"":t)+"</span></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"79zO":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("/xyZ"),o=i.n(r),s=i("UT4o"),l=i.n(s),c=i("UP37"),d=i("GJCM"),u=i("bgLp"),p=i("ITOZ"),g=i("f3PW"),h={},m=3;function f(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,n=t.data.JobId;if(n||(n=Object(p.generateGuid)()),!h[n]){var a={count:0,response:{"@odata.context":"http://apidomain/Advertiser/v2/$metadata#Model.MediaGenerationResult",JobId:n,Assets:[]}};switch(t.data.Image.Filters[0].Name){case g.MTSmartEffect.DesignerEffects:a.response.Assets.push({MediaType:"image",Resource:"https://image.shutterstock.com/image-vector/powerpoint-presentation-templates-set-use-600w-1218710179.jpg"},{MediaType:"image",Resource:"https://image.shutterstock.com/image-vector/business-powerpoint-presentation-design-templates-600w-1171086526.jpg"});break;default:throw new Error("Unsupport smart effect type passed")}h[n]=a}return h[n].count+=1,h[n].count>=i?o.a.resolve(Object(u.a)({wip:!1},h[n].response)):o.a.resolve({wip:!0,JobId:n})}var v={},b=function(){function e(t){var i=t.cid,a=t.aid,r=t.cmpId,o=t.oDataConfig;Object(n.a)(this,e),this.cid=i,this.aid=a,this.cmpId=r,this.path=o.odataPath,this.oDataConfig={oDataToken:o.odataToken,oDataTokenType:o.oDataTokenType,applicationName:o.applicationName},this.odata=c.odata,this.mockDataFetch=f}return Object(a.a)(e,[{key:"recommend",value:function(e){var t=e.landingPageUrl,i=e.pageNumber,n=void 0===i?1:i,a=e.pageSize,r=void 0===a?30:a,o=this.generateUrlWithScope("Default.CreateMediaRecommendation"),s=l.a.extend({data:{url:t,mediaType:["image"],paging:[{EntityName:"Image",PageNumber:n,PageSize:r}]}},this.oDataConfig);return this.odata.post(o,s)}},{key:"generate",value:function(e,t){var i=e.options,n=Object(d.stringifySync)(i);if(v[n])return o.a.resolve(v[n]);var a=this.generateUrlWithScope("Default.MediaGeneration"),r=l.a.extend({data:i},this.oDataConfig);return(t&&this.mockDataFetch||this.odata.post)(a,r).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e.wip&&e.Assets&&(v[n]=e),e})}},{key:"generateUrlWithScope",value:function(e){return"".concat(this.path,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/Campaigns(").concat(this.cmpId,")/").concat(e)}},{key:"resetCache",value:function(){v={}}}]),e}(),y=i("23d6"),S=i("Pb1Y"),w=i("Vwpy"),C=function(e){function t(e){return Object(n.a)(this,t),Object(y.a)(this,Object(S.a)(t).call(this,Object(u.a)({},e,{assetType:"image",fileFormat:"jpg"})))}return Object(w.a)(t,e),t}(function e(t){var i=t.filters,a=t.crop,r=t.imageUrl,o=t.jobId,s=t.assetType,l=t.fileFormat;Object(n.a)(this,e),this.JobId=o,this.Image={BaseImageUrl:r,Filters:i,Crop:a},this.Output={MediaType:s,Image:{Type:l}}}),x=function(e){function t(e){var i=e.jobId,a=e.cropSettings,r=e.imageUrl;return Object(n.a)(this,t),Object(y.a)(this,Object(S.a)(t).call(this,{jobId:i,imageUrl:r,crop:{x:a.x,y:a.y,width:a.width,height:a.height,scale_x:1,scale_y:1}}))}return Object(w.a)(t,e),t}(C),k=function(e){function t(e){var i=e.jobId,a=e.placementSettings,r=e.imageUrl;return Object(n.a)(this,t),Object(y.a)(this,Object(S.a)(t).call(this,{filters:[{Name:g.MTSmartEffect.SmartCrop,Param:{ExpectedCrops:l.a.map(a,function(e){var t=e.aspectRatio,i=e.minSize;return{AspectRatio:Object(g.convertAspectRatioDecimalToRatio)(t),MinHeight:i[1]}})}}],jobId:i,imageUrl:r}))}return Object(w.a)(t,e),t}(C),A=function(e){function t(e){var i=e.jobId,a=e.smartEffects,r=e.imageUrl;return Object(n.a)(this,t),Object(y.a)(this,Object(S.a)(t).call(this,{filters:l.a.map(a,function(e){return{Name:e.smartEffectName,Param:e.smartEffectOptions}}),jobId:i,imageUrl:r}))}return Object(w.a)(t,e),t}(C),T=function(){function e(t){Object(n.a)(this,e),this.dataService=new b(t)}return Object(a.a)(e,[{key:"generateEffect",value:function(e){var t=e.imageUrl,i=e.smartEffects,n=new A({imageUrl:t,smartEffects:i});return this.createGenerateRequestWithPolling({effectOptions:n})}},{key:"generateSmartCrop",value:function(e){var t=e.imageUrl,i=e.placementSettings,n=new k({imageUrl:t,placementSettings:i});return this.createGenerateRequestWithPolling({effectOptions:n})}},{key:"generateManualCrop",value:function(e){var t=e.imageUrl,i=e.cropSettings,n=new x({imageUrl:t,cropSettings:i});return this.createGenerateRequestWithPolling({effectOptions:n})}},{key:"createGenerateRequestWithPolling",value:function(e,t){var i=this,n=e.effectOptions,a={},r=function(){a.intervalId&&clearInterval(a.intervalId),a.timeoutId&&clearTimeout(a.timeoutId)};return this.dataService.generate({options:n},t).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.wip?new o.a(function(n,o){a.intervalId=setInterval(function(){i.dataService.generate({options:{JobId:e.JobId}},t).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.wip||(r(),n(e.Assets))}).catch(function(e){r(),o(e)})},1e3),a.timeoutId=setTimeout(function(){r(),o(new Error("MediaRepositoryTimeoutError"))},3e5)}):e.Assets})}}]),e}(),_=3e4,E=function(){function e(t){Object(n.a)(this,e),this.dataService=new b(t),this.intervalId=null,this.timeoutId=null,this.hasOfflineProcessingFinished=!1,this.offlineProccesingTimeoutId=null,this.jobCompleteCallback=t.jobCompleteCallback,this.maxTimeout=t.timeout||_,this.logger=t.logger}return Object(a.a)(e,[{key:"cancel",value:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.offlineProccesingTimeoutId&&(clearTimeout(this.offlineProccesingTimeoutId),this.offlineProccesingTimeoutId=null),this.hasOfflineProcessingFinished=!1}},{key:"handleError",value:function(e){this.jobCompleteCallback({error:e}),this.logger.trace("MediaRecommendationError: ".concat(e,";")),this.cancel()}},{key:"doesResponseHaveImages",value:function(e){return e&&e.Images&&e.Images.length>0}},{key:"getMoreLandingPageSuggestions",value:function(e){var t=e.landingPageUrl,i=e.pageNumber;if(!i||i<=1)throw new Error("For first page request, please call getLandingPageSuggestions to use polling");return this.dataService.recommend({landingPageUrl:t,pageNumber:i})}},{key:"getLandingPageSuggestions",value:function(e){var t=this,i=e.landingPageUrl,n=e.enableOfflinePollingDelay,a=void 0===n||n,r=e.additionalCallback,o=void 0===r?l.a.noop:r;return this.cancel(),this.dataService.recommend({landingPageUrl:i}).then(function(e){!e.ImageWip&&t.doesResponseHaveImages(e)?(t.jobCompleteCallback(e),o()):(a?t.offlineProccesingTimeoutId=setTimeout(function(){t.hasOfflineProcessingFinished=!0},15e3):t.hasOfflineProcessingFinished=!0,t.startPollingJob({landingPageUrl:i,additionalCallback:o}))}).catch(function(e){t.handleError(e)})}},{key:"startPollingJob",value:function(e){var t=this,i=e.landingPageUrl,n=e.additionalCallback;this.intervalId=setInterval(function(){t.dataService.recommend({landingPageUrl:i}).then(function(e){var i=t.doesResponseHaveImages(e);e.ImageWip||!t.hasOfflineProcessingFinished&&!i||(t.jobCompleteCallback(e),n(),t.cancel(),t.hasOfflineProcessingFinished&&!i&&t.logger.trace("MediaRecommendationError: NoImages;"))}).catch(function(e){t.handleError(e),n()})},500),this.timeoutId=setTimeout(function(){t.handleError("RecommendationTimeoutError"),n()},this.maxTimeout)}}]),e}(),I=function(e){if(e){var t=e.ImagePaging,i=void 0===t?{}:t,n=i.TotalCount,a=i.PageNumber,r=i.PageSize;if(n>0&&a>0&&r>0)return n>a*r}return!1};i.d(t,"a",function(){return T}),i.d(t,"b",function(){return"RecommendationTimeoutError"}),i.d(t,"c",function(){return E}),i.d(t,"d",function(){return I})},"7Cbf":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="audience-advanced-target-settings"><a class="toggle-edit-target-category" href="javascript:void(0)" role="button" data-bind="attr: {&quot;aria-expanded&quot;: isEditTargetCategoriesExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="glyphicon glyphicon-pencil"></span><span><u>'+n.escape(null==(t=e.getString("Audience_Campaign_Edit_Target_Categories"))?"":t)+'</u></span></a></div><div class="audience-target-selector-container" style="display: none"></div><div class="audience-target-settings-container"><div class="location-target-setting-container"></div><div class="age-target-setting-container"></div><div class="gender-target-setting-container"></div><div class="device-target-setting-container"></div><div class="audience-target-setting-container"></div><div class="companyName-target-setting-container"></div><div class="industry-target-setting-container"></div><div class="jobFunction-target-setting-container"></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"7JQq":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("5iHu"),p=i.n(u),g=i("syDw"),h=i.n(g),m=i("7XbR"),f=i.n(m),v=i("YK3D"),b=i.n(v),y=i("sNFH"),S=i("aPcP"),w=i("5C8L"),C=i.n(w),x=i("+PqR"),k=i.n(x),A=i("YKsG"),T=window.globalLegacySchema.get("AdGroup"),_=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),E={Error:"error",Warning:"warning",Good:"ok"},I=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.adgroup,r=void 0===a?void 0:a,o=i.isInKeywordCreationWorkflow,s=void 0!==o&&o;Object(n.a)(this,e),this.editMode=!d.a.isUndefined(r)||s,this.suggestedBid=f.a.observable(0),this.bidStatusENUM=E,C.a.properties(this,T,["SearchBid"],{SearchBid:this.editMode?d.a.result(r,"SearchBid"):Object(A.defaultBid)()}),this.bidTooLow=f.a.computed(function(){return t.SearchBid()<t.suggestedBid()},this),Object(S.a)()?y.a.extend(this,["SearchBid"],!0):y.a.extend(this,["SearchBid"]),this.showEstimation=f.a.observable(!1),this.Clicks=f.a.observable(),this.Impressions=f.a.observable(),this.Spend=f.a.observable(),this.bidLandscapeAvailable=f.a.observable(!1),this.infoMessage=f.a.observable(""),this.showInfo=f.a.computed(function(){return!d.a.isEmpty(t.infoMessage())},this),this.estimateBtnText=f.a.observable(_.get("Estimate_SearchTraffic")),this.showEstimateButton=f.a.observable(!1),this.disableSearchBid=f.a.observable(!1),this.isAutoBidding=f.a.observable(!1),this.searchBidErrorMessage=f.a.computed(function(){return!d.a.isNull(t.SearchBid())?"":_.get("Validation_BidRequired")},this),this.searchBidInvalid=f.a.computed(function(){return!t.SearchBid.isValid()||!d.a.isEmpty(t.searchBidErrorMessage())},this),this.bidStatus=f.a.computed(function(){return t.searchBidInvalid()?E.Error:t.bidTooLow()?E.Warning:E.Good})}return Object(a.a)(e,[{key:"updateAdGroupMedium",value:function(){}},{key:"updateEstimations",value:function(e){d.a.isEmpty(e.value)&&(this.showEstError(),this.showEstimation(!1));var t=d.a.property("AdGroupEstimatedTraffic")(d.a.first(e.value));d.a.isEmpty(t)?(this.showEstError(),this.showEstimation(!1)):(this.showEstimation(!0),this.Clicks(k.a.fromFloatToString(t.Clicks,0)),this.Impressions(k.a.fromFloatToString(t.Impressions)),this.Spend(k.a.fromFloatToString(t.TotalCost)),this.estimateBtnText(_.get("Estimate_SearchTraffic_Refresh")))}},{key:"showEstError",value:function(e){var t=d.a.isString(e)?e:_.get("Budget_TrafficEstimation_RequestError");this.errors.add([t])}}]),e}(),O=i("2Fak"),P=i.n(O),M=i("P9GN"),j=i("f35g");var L=i("AQBV"),D=i.n(L),R=i("BPWY"),N=i.n(R),V=i("ZhOl"),B=i.n(V);i.d(t,"default",function(){return W});var F=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),U=b.a.Permissions,G=U.IsSuggestionInAdGroupCreationWorkflowEnabled,z=U.IsSuggestionInAdGroupCreationWorkflowVNextEnabled,H=D.a.get("KeywordBidRange"),W=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.showTrafficEstimation,n=void 0!==i&&i,a=e.budget,r=void 0===a?0:a,o=e.getKeywordsCb,s=void 0===o?function(){return[]}:o,l=e.adgroup,c=e.inputLabel,d=void 0===c?F.get("Bids_SearchNetworkBid_New"):c,u=e.popupId,p=e.languages,g=void 0===p?[]:p,h=e.bidStatusEnabled,m=void 0!==h&&h,f=e.isInKeywordCreationWorkflow,v=void 0!==f&&f,b=e.isForVNext,y=void 0!==b&&b,S=e.activityLogger;this.budget=r,this.inputLabel=d,this.getKeywordsCb=s,this.popupId=u,this.activityLogger=S,this.viewModel=new I({adgroup:l,isInKeywordCreationWorkflow:v});var w=y&&z||!y&&G;return this.bidStatusEnabled=m&&w&&n,this.isInKeywordCreationWorkflow=v,this.showTrafficEstimation=n,this.languages=g,this.isNKW=!1,this.viewedSuggestion=!1,this.updatedTimestamp=0,this.bidStatusEnabled&&(this.statusSubscription=this.viewModel.bidStatus.subscribe(function(){t.closeBidPopup()})),this}},{key:"bidChanged",value:function(){this.activityLogger&&this.activityLogger.signal("search bid change","search bid")}},{key:"showBidLandscape",value:function(e){this.trigger("bid:clicked-bid-landscape",e)}},{key:"raiseBidPopup",value:function(e){var t=this,n=this;if(p()(e.target).hasClass("status_warning")){var a=p()(".raise-bid-popup-container");if(this.bidStatusEnabled&&d.a.isUndefined(n.bidSuggestionView))(function(e){switch(e){case"@bingads-webui-campaign-legacy/budget/view/bid-suggestion-popup":return Promise.all([i.e("application.async.secondary"),i.e("application.async.secondary.2")]).then(i.bind(null,"k+up"));default:return new Promise(null)}})("@bingads-webui-campaign-legacy/budget/view/bid-suggestion-popup").then(function(e){var i=e.default;n.bidSuggestionView=new i({i18n:F,suggestedBid:n.viewModel.suggestedBid(),el:n.$(".raise-bid-popup-container"),callback:function(){return n.viewModel.SearchBid(n.viewModel.suggestedBid())}}).render(),t.viewedSuggestion=!0});a.show()}}},{key:"closeBidPopup",value:function(){p()(".raise-bid-popup-container").hide()}},{key:"render",value:function(){return this.$el.append(P()({i18n:F,accountCurrencyCode:b.a.AccountCurrencyCode,showTrafficEstimation:this.showTrafficEstimation,inputLabel:this.inputLabel,popupId:this.popupId,bidStatusEnabled:this.bidStatusEnabled,isInKeywordCreationWorkflow:this.isInKeywordCreationWorkflow})),f.a.applyBindings(this.viewModel,this.el),this}},{key:"beginEstimation",value:function(){var e=this;this.activityLogger&&this.activityLogger.signal("clicked get perf estimation","search bid");var t=this.viewModel.SearchBid(),i=this.getKeywordsCb();if(this.viewModel.errors([]),d.a.isFinite(t)&&this.validate()&&d.a.isFinite(this.budget)){if(d.a.isEmpty(this.adgroupName)||d.a.isEmpty(i))return void this.viewModel.errors.add([F.get("Estimate_SearchTraffic_Error")]);var n={Name:this.adgroupName,Keywords:i};Object(M.a)({locations:this.locations,adGroup:n,bid:k.a.fromFloatToString(t),budget:k.a.fromFloatToString(this.budget),languages:this.languages},{onNotAllSupported:function(t,i){e.viewModel.infoMessage(F.get("TarfficEstimation_PartiallyNonSupported").replace("{0}",t).replace("{1}",i))},onSuccess:function(t){e.viewModel.updateEstimations(t)},onRequestError:function(){e.viewModel.showEstError()},onNonSupported:function(){},onServiceNotSupported:this.viewModel.showEstError.bind(this.viewModel)},{spinner:this.$(".input-group")})}}},{key:"clearEstimation",value:function(){this.viewModel.errors([]),this.viewModel.infoMessage(""),this.viewModel.showEstimation(!1)}},{key:"validate",value:function(){var e=this.viewModel.isAutoBidding()||this.viewModel.validate()&&d.a.isEmpty(this.viewModel.searchBidErrorMessage());return e||N.a.logMessage([B.a.LOGCATEGORY.SUBSTRATE],B.a.LOGLEVEL.INFO,"search bid","search bid is not valid"),e}},{key:"getValues",value:function(){return this.viewModel.disableSearchBid()?{}:this.viewModel.toObject()}},{key:"fetchBidSuggestion",value:function(){var e=this;this.isNKW=!1;var t=+new Date;if(this.bidStatusEnabled&&this.viewModel.showEstimateButton()){var i=this.getKeywordsCb();i.length&&Object(j.getBidSuggestion)({locations:this.locations,languages:this.languages,adGroup:{Keywords:i}},{onSuccess:function(t,i){t&&t.value&&t.value.length&&!d.a.isNull(t.value[0])?e.updateSuggestedBid(Math.min(H.CeilingValue,Math.ceil(100*t.value[0].Amount)/100),i,!0):e.updateSuggestedBid(0,i)},onRequestError:function(t,i){e.updateSuggestedBid(0,i)},onServiceNotSupported:function(t,i){e.updateSuggestedBid(0,i)},onNonSupported:function(t,i){e.updateSuggestedBid(0,i)}},{},t)}else this.updateSuggestedBid(0,t)}},{key:"updateSuggestedBid",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t>this.updatedTimestamp&&(this.isNKW=i,this.updatedTimestamp=t,this.viewModel.suggestedBid(e))}},{key:"onLanguageLocationChanged",value:function(e,t,i){this.clearEstimation(),this.viewModel.showEstimateButton(e),this.locations=t,this.languages=i,this.fetchBidSuggestion()}},{key:"updateBidLandscapeAvailability",value:function(e){this.viewModel.bidLandscapeAvailable(e)}},{key:"updateAdGroupName",value:function(e){this.adgroupName=e}},{key:"updateBudgetAmount",value:function(e){this.budget=e}},{key:"onKeywordsEditingFinished",value:function(){this.fetchBidSuggestion()}},{key:"remove",value:function(){d.a.isUndefined(this.statusSubscription)||this.statusSubscription.dispose(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"events",get:function(){return{"click .btn-estimate":"beginEstimation","click .input-group .status_warning":"raiseBidPopup","click .bidlandscape_icon":"showBidLandscape","change .input-group input.searchbid":"bidChanged"}}}]),t}(h.a.View)},"7K8j":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="form-group"><div class="audience-association-view-container"></div></div>'}},"7Mva":function(e,t,i){"use strict";var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("jQIp"),u=i.n(d),p=i("5iHu"),g=i.n(p),h=i("syDw"),m=i.n(h),f=i("7XbR"),v=i.n(f),b=i("UT4o"),y=i.n(b),S={control:"text",valueUpdate:"input",validators:{range:{blockInput:!1},decimalLength:{blockInput:!1}}},w=S,C=i("wL7j"),x=i.n(C),k=i("owKP"),A=i.n(k),T={control:function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var i=e.observable,n=y.a.isArray(i())?y.a.first(i()):i();Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,y.a.chain({url:n,maxFullUrlLength:v.a.unwrap(i.maxLength),template:A.a}).pick(Boolean).value()),this.on("urlChanged",function(e){var t=y.a.isEmpty(e)?"":e;y.a.isArray(i())?y.a.isEmpty(t)?i([]):i([t]):i(t)})}}]),t}(x.a)},_=i("+igW"),E={control:function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=y.a.defaults({},i,{trackingTemplate:y.a.clone(i.observable())});y.a.isEmpty(i.observable())&&i.observable(null),i.observable.validate=function(){return y.a.isEmpty(e.ko_model.errorMessages())},Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,n),this.ko_model.trackingTemplate.subscribe(function(e){var t=y.a.isEmpty(e)?null:e;i.observable(t)})}}]),t}(i.n(_).a)},I=i("6Ux2"),O=i("AQBV"),P=i.n(O),M=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url"),j={boolean:{control:"checkbox",values:[!0,!1]},enum:function(e){return{control:"select",values:e.enum}},integer:w,number:S,string:{control:"text",showHint:!1,valueUpdate:"input",validators:{maxLength:{blockInput:!1}}},Url:T,TrackingTemplate:E,CustomParams:{control:function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=y.a.defaults({},i,{customParameters:y.a.clone(i.observable()),permissions:P.a.get("Permissions")||{},i18n:M});i.observable.validate=function(){var t=!0;return y.a.each(e.viewModel.parameters(),function(e){t=t&&e.isValid()}),t&&y.a.isEmpty(e.viewModel.errorMessages())},Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,n),this.viewModel.parameterArray.subscribe(function(e){var t=y.a.filter(e,function(e){return!y.a.isEmpty(e.Key)});i.observable(t)})}}]),t}(I.CustomParametersView)}},L=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=t.format?t.format:y.a.isEmpty(t.enum)?t.type:"enum";var i=j[e];return y.a.isFunction(i)?i(t):i};function D(e,t,i,n){return y.a.map(t,function(t){var a=y.a.isString(t)?{property:t}:t;if(!y.a.isEmpty(a.fields)){var r=D(e,a.fields,i,n),o=y.a.uniqueId(y.a.pluck(r,"property").join(""));return y.a.extend({},a,{control:a.type,property:o,id:"".concat(i,"-").concat(o),hasSubFields:!0,fields:r})}var s=e.name,l=a.property,c=e.properties[a.property]||{},d=L(c)||{},u=a.values||d.values,p=function(e,t){return y.a.isArray(e)?e:y.a.isObject(e)?y.a.map(t,function(t){return e[t]}):e}(a.valueMessages,u)||y.a.map(u,y.a.partial(n.value,s,l)),g={showLabel:!0,schema:c,message:p[0],id:"".concat(i,"-").concat(l),label:n.property(s,l),visible:!0,required:Boolean(c.required||y.a.contains(e.required,l))},h={valueMessages:p};return y.a.extend(g,d,a,h)})}var R=i("fdxD"),N=i("IMjj"),V=i.n(N),B=window.globalLegacyI18n.get("component/i18n/loader!component/form"),F=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.properties,n=void 0===i?[]:i,a=t.viewModel,r=void 0===a?{}:a,o=t.id,s=n.toString();this.srId="".concat(o,"-TotalRemaining"),y.a.each(n,function(t){r[t].describedby.push(e.srId)}),this.viewModel={remaining:r[s].remaining,remainingChar:v.a.computed(function(){var e=r[s].remaining(),t=y.a.reduce(n,function(e,t){return e?B.get("TotalRemainingCharactersText_FieldsList",{initial:e,last:r[t].label()}):r[t].label()});return B.get("TotalRemainingCharactersText",{count:e,fields:t})})}}},{key:"render",value:function(){return this.$el.html(V()({srId:this.srId})),v.a.applyBindings(this.viewModel,this.el),this}}]),t}(m.a.View);var U={aggregateLength:function(e){var t=y.a.filter(e.constraints,{type:"aggregateLength"});return y.a.map(t,function(e){return{properties:e.properties,view:F}})}};function G(e,t){return y.a.indexBy(e,function(e){var i=e.properties.toString();if(!Object(R.includes)(t,i))throw new Error("Some of properties ".concat(i," passed in through sidebars are not in passed in properties ").concat(t));return i})}function z(e){var t=e.schema,i=e.properties,n=e.sidebars,a=i.toString();return y.a.defaults(G(n,a),function(e,t){return G(y.a.reduce(U,function(t,i){return t.concat(i(e))},[]),t.toString())}(t,i))}var H=i("/UPv"),W=i.n(H),q=i("NaGR"),$=i.n(q),K=i("cQpn"),J=i.n(K),Z=i("W1RS"),Y=i.n(Z),Q=i("EA/1"),X=i.n(Q),ee=i("3qPY"),te=i.n(ee),ie=i("ikjY"),ne=i.n(ie),ae=i("flv5"),re=i.n(ae),oe=i("pShd"),se=i.n(oe),le=i("rrD6"),ce=i.n(le),de=i("k9md"),ue=i.n(de),pe=i("1omw"),ge=i.n(pe),he=i("A3Bz"),me=i.n(he),fe=i("5C8L"),ve=i.n(fe),be=i("/QdR"),ye=i.n(be);function Se(e,t){e.radios="string"===t.type?e:e.string}function we(e,t){if(y.a.isObject(e)){var i=e.depends,a=e.computedBy;return v.a.computed(function(){return a.apply(void 0,Object(n.a)(y.a.map(i,function(e){return t[e]()})))})}return v.a.observable(e)}function Ce(e,t,i,n){var a=i.id;e.text=e.string?e.string:e,e.placeholder=we(i.placeholder,n),e.describedby=v.a.observableArray(["".concat(a,"-Remaining"),"".concat(a,"-Validation")]),e.strDescribedby=v.a.computed(function(){return(e.describedby()||[]).join(" ")}),e.labelledBy=i.ariaLabel?void 0:"".concat(a,"-Label"),e.ariaLabel=i.ariaLabel}var xe={checkbox:function(e,t,i){if(!i.values)throw new Error("pass custom values as [checked-value, not-checked-value] in!");y.a.contains(y.a.first(i.values,2),e())||e(i.values[1]),e.checkbox=v.a.computed({read:function(){return i.values[0]===e()},write:function(t){e(i.values[t?0:1])}})},radios:Se,"inline-radios":Se,select:function(e,t,i){y.a.contains(i.values,e())||e(i.values[0]),e.select="string"===t.type?e:e.string},text:Ce,textarea:function(e,t,i,n){Ce(e,0,i,n)},collapse:function(e,t,i,n){y.a.isUndefined(i.isExpanded)?e.isExpanded=function e(t,i){return t.hasSubFields?y.a.some(t.fields,function(t){return e(t,i)}):!y.a.chain(i).result(t.property).isEmpty().value()}(i,n):e.isExpanded=i.isExpanded,e.observable=v.a.observable(e.isExpanded),e.click=function(){var t=e.observable();return e.observable(!t),null},y.a.extend(e,i)},static:function(e){e.text=e.string?e.string:e}},ke=function(e,t,i,n,a){!0!==n.hasSubFields&&(function(e,t,i,n){e.label=we(i.label,n)}(t,0,n,a),function(e,t,i,n){e.visible=we(i.visible,n)}(t,0,n,a)),y.a.isFunction(xe[e])&&xe[e](t,i,n,a)},Ae=function e(t){var i=this,n=t.fields,r=t.schema,o=t.model,s=t.customValidators;Object(a.a)(this,e);var l=y.a.pluck(n,"property");ve.a.properties(this,r,l,o,s),y.a.each(n,function(e){e.value&&(i[e.property]=we(e.value,i).extend({validate:[ye.a.passive()]})),y.a.isUndefined(i[e.property])&&(i[e.property]=v.a.observable());var t=i[e.property];ke(e.control,t,r.properties[e.property],e,i),y.a.has(t,"validators")&&y.a.each(e.validators,function(e,i){var n=t.validators[i];n&&y.a.extend(n,e)})});var c=ye.a.passive();this.$overall=v.a.observable().extend({validate:[c]}),this.$overall.validators={passive:c},this.editing=function(e,t){var i=!y.a.isEmpty(t);return e.key&&(i=i&&t[e.key]),i}(r,o)};i.d(t,"a",function(){return Ee});var Te=window.globalLegacyI18n.get("component/i18n/loader!component/form");function _e(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).prototype instanceof m.a.View}var Ee=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"events",value:function(){return{"click .save":"save","click .cancel":"cancel","submit form":"save","click .helpbutton":"clickHelpIcon"}}},{key:"clickHelpIcon",value:function(e){PopupController.PopupJsClick(e.target),e.stopPropagation()}},{key:"initialize",value:function(e){var t=this,i=e.schema,n=e.fields,a=e.model,r=e.customValidators,o=void 0===r?{}:r,s=e.sidebars,l=void 0===s?[]:s,c=e.template,d=void 0===c?"horizontal":c,p=e.labelTemplate,g=void 0===p?ue.a:p,h=e.hasButtons,m=void 0===h||h,f=e.saveButtonText,v=void 0===f?Te.get("Form_SaveButton"):f,b=e.cancelButtonText,y=void 0===b?Te.get("Form_CancelButton"):b,S=e.hasLabels,w=void 0===S||S,C=e.s$i18n,x=void 0===C?{type:function(e){return e},property:function(e,t){return t},value:function(e,t,i){return String(i)}}:C;u.a.isFunction(d)?this.template=d:this.template={horizontal:$.a,inline:J.a}[d],this.model=a,this.type=i.name,this.id="".concat(u.a.uniqueId("Form-"),"-").concat(i.name),this.fields=D(i,n,this.id,x),this.flattedFields=this._getFlattedFields(this.fields),this.properties=u.a.chain(this.flattedFields).filter(function(e){return!0!==e.hasSubFields}).pluck("property").value(),this.sidebars=z({schema:i,properties:this.properties,sidebars:l}),this.fieldIndex=u.a.indexBy(this.flattedFields,function(e){return e.property}),this.viewModel=new Ae({fields:this.flattedFields,schema:i,model:this.model,customValidators:o}),u.a.each(this.properties,function(e){t.viewModel[e].subscribe(function(i){t.trigger("change:".concat(e),i),t.trigger("change",t.currentModel())})}),this.labelTemplate=g,this.hasButtons=m,this.saveButtonText=v,this.cancelButtonText=y,this.hasLabels=w}},{key:"render",value:function(){return this.$el.html(this.template({properties:this.properties,fields:this.fields,indexedFields:this.fieldIndex,hasButtons:this.hasButtons,hasLabels:this.hasLabels,type:this.type})),this._renderBuiltInControls(),this._renderTemplateControls(),this._renderLabels(),this._renderValidations(),v.a.applyBindings(this.viewModel,this.el),this._renderViewControls(),this._renderSidebars(),this}},{key:"remove",value:function(){u.a.each(this.viewControls,function(e){e.remove()}),u.a.each(this.sidebarViews,function(e){e.remove()}),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"_getFlattedFields",value:function(e){var t=this,i=u.a.map(e,function(e){var i=[];return!0===e.hasSubFields&&(i=t._getFlattedFields(e.fields)),i.push(e),i});return u.a.flatten(i)}},{key:"_renderBuiltInControls",value:function(){var e=this;this.$(".form-input-container").each(function(t,i){var n=g()(i);n.html(e._renderBuiltInControl(n.attr("data-property")))})}},{key:"_renderBuiltInControl",value:function(e){var t=this;if("$buttons"===e)return ge()(u.a.pick(this,["saveButtonText","cancelButtonText"]));var i=this.fieldIndex[e],n=this.viewModel[e];return u.a.result({text:function(){return Y()({field:i,hasLengthHint:n.maxLength&&i.showHint,hasLengthHintInline:n.maxLength&&i.showHintInline,type:t.type})},textarea:function(){return X()({field:i,type:t.type})},static:function(){return te()({field:i,type:t.type})},select:function(){return ne()({field:i,type:t.type})},checkbox:function(){return re()({field:i,type:t.type})},radios:function(){return se()({field:i,type:t.type})},"inline-radios":function(){return ce()({field:i,type:t.type})}},i.control,"")}},{key:"_renderTemplateControls",value:function(){var e=this;this.$(".form-input-container").each(function(t,i){var n=g()(i),a=n.attr("data-property"),r=e.fieldIndex[a]||{},o=r.control;!_e(o)&&u.a.isFunction(o)&&n.html(o({field:r,type:e.type}))})}},{key:"_renderViewControls",value:function(){var e=this;this.viewControls={},this.$(".form-input-container").each(function(t,i){var n=g()(i),a=n.attr("data-property"),r=e.fieldIndex[a]||{},o=r.control;_e(o)&&(e.viewControls[a]=new o({observable:e.viewModel[a],viewModel:e.viewModel,field:r}),n.append(e.viewControls[a].render().el))})}},{key:"_renderLabels",value:function(){var e=this;this.$(".form-label-container").each(function(t,i){var n=g()(i),a=e.fieldIndex[n.attr("data-property")];if(a.showLabel){var r=a.schema.helpId?Te.get("Form_LearnMore",{item:a.label}):"";n.html(e.labelTemplate({field:a,type:e.type,learnMoreText:r}))}})}},{key:"_renderValidations",value:function(){var e=this;this.$(".form-validation-container").each(function(t,i){var n=g()(i),a=n.attr("data-property"),r=e.fieldIndex[a]||{property:a,id:"".concat(e.id,"-").concat(a)},o=e.viewModel[a];u.a.isFunction(o.validate)&&n.html(me()({field:r}))})}},{key:"_renderSidebars",value:function(){var e=this;this.sidebarViews={},u.a.each(this.sidebars,function(t,i){var n=t.properties,a=t.view,r=void 0===a?{}:a,o=u.a.map(n,function(e){return".form-group[data-property=".concat(e,"]")}).join(",");if(e.$(o).wrapAll(W()({properties:n})),_e(r)){var s=new r({className:"sidebar",id:"".concat(e.id,"-").concat(i),properties:n,viewModel:e.viewModel});e.$(".form-groups-with-sidebar[data-properties='".concat(i,"']")).append(s.render().el),e.sidebarViews[i]=s}})}},{key:"currentModel",value:function(){return u.a.defaults(this.viewModel.toObject(),this.model)}},{key:"setErrors",value:function(e,t){var i=this,a=t||this.currentModel();u.a.each(e,function(e,t){var r=i.viewModel[t];if(u.a.isArray(e)){var o,s=r||i.viewModel.$overall,l=u.a.uniq(e,function(e,t){return e.message===t.message});s.validate(),(o=s.errors).push.apply(o,Object(n.a)(l))}else if(r&&r.validators){var c=r.validators.passive;c&&u.a.isFunction(c.setError)&&c.setError(e,a[t]),r.validate()}})}},{key:"validate",value:function(){return this.viewModel.validate()}},{key:"save",value:function(e){e&&"submit"===e.type&&e.preventDefault(),this.validate()&&this.trigger("save",this.currentModel())}},{key:"cancel",value:function(){this.trigger("cancel",this.currentModel())}}]),t}(m.a.View)},"7R4q":function(e,t,i){"use strict";var n=i("6e2+"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("AWtb"),m=i.n(h),f=i("V34t"),v=i("kwR5"),b=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).configSchema(Object(v.a)(Object(v.a)(e))),e}return Object(c.a)(t,e),t}(i("YMJb").a),y=i("DXRr"),S=i("nlAS"),w=i.n(S),C=i("1EwD"),x=i.n(C),k=i("fE/Z"),A=i("1gQY"),T=i.n(A),_=i("AQBV"),E=i.n(_),I=i("/xyZ"),O=i.n(I),P=i("qW/f");i.d(t,"a",function(){return j});var M=(E.a.get("Permissions")||{}).IsEnabledForDynamicFeedCampaign,j=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.deps,i=e.perfMarker;i&&(this.campaignScopeAllSettingsPerfMarker=i.createChild("CampaignScope_AllSettings_EditShoppingCampaign")),this.mark("willInit"),this.campaignId=Number(T.a.get("campaign_id")),this.deps=t,this.viewModel=new b}},{key:"render",value:function(){var e=this;return this.$el.html(m()()),g.a.applyBindings(this.viewModel,this.el),this.hideUIBlocker=x()(),this.mark("willFetchData"),O.a.all(M?[this.getCampaign(),this.getFeedData()]:[this.getCampaign()]).then(function(t){var i=Object(n.a)(t,2),a=i[0],r=i[1],o=void 0===r?null:r;e.mark("willRender"),e.shoppingCampaignView=new f.a({campaign:a,deps:e.deps,feed:o,isSettingsPage:!0}),e.$(".update-container").html(e.shoppingCampaignView.render().el)}).finally(function(){e.hideUIBlocker(),e.mark("done")}).catch(function(t){var i=t.errors;e.viewModel.errors.add(Object(y.getODataErrors)(i))}),this}},{key:"getCampaign",value:function(){var e={queryParameters:{entitySet:k.default.currentAccount.Campaigns,expand:["Budget"]},bypassCache:!0};return w.a.Campaign.find(this.campaignId,e)}},{key:"getFeedData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.$top,i=void 0===t?1e4:t,n=e.$skip,a=void 0===n?0:n;return Object(P.b)({$top:i,$skip:a})}},{key:"remove",value:function(){this.shoppingCampaignView&&this.shoppingCampaignView.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"mark",value:function(e){this.campaignScopeAllSettingsPerfMarker&&this.campaignScopeAllSettingsPerfMarker[e]()}}]),t}(u.a.View)},"7pBl":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="bid-cap-panel form-horizontal"><div class="bid-selection"><div class="col-sm-12 radio"><label class="empty"><input class="bid-cap-radio" type="radio" name="bid-radio" value="empty"'+n.attr("checked","empty"===e.capSelection,!0,!0)+"><span>"+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Max_Bid_Option_No_Cap"))?"":t)+'</span></label></div><div class="col-sm-12 radio form-group"><label class="col-sm-3 bid-selection-label"><input class="bid-cap-radio" type="radio" name="bid-radio" value="cap"'+n.attr("checked","cap"===e.capSelection,!0,!0)+"><span>"+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Max_Bid_Option_With_Cap"))?"":t)+"</span></label><div"+n.attr("class",n.classes(["col-sm-7","empty"===e.capSelection?"hide":"show"],[!1,!0]),!1,!0)+'><div data-ref="max-bid-input"></div></div></div></div></div>'}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},"865U":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="location-recommend-grid" data-bind="visible: isRecommendGridVisible"><div class="form-group row"><div class="col-sm-12"><div class="alert alert-recommendation" style="line-height: 15px; border: 1px solid;"><div class="alert-info-inline" style="display: flex;flex-direction: row;"><div style="display: inline-flex;flex-direction: column;padding-right: 10px;"><div style="flex-grow: 1"></div><span class="recommendation-light-bulb"></span><div style="flex-grow: 1"></div></div><span data-bind="html: description"></span></div></div></div><div class="col-sm-12"><div class="location-recommend-grid-container new-advance-target-grid-container"></div></div><div class="col-sm-12"><input class="target btn btn-primary" type="button"'+n.attr("value",e.getString("Target_Location_Recommendations"),!0,!0)+' data-bind="attr: {disabled: !isTargetButtonEnabled()}"></div></div></div>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},"89Mx":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i.n(r),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"renameProperty",value:function(e,t,i){return t!==i&&o.a.has(e,t)?o.a.chain(e).pairs().map(function(e){return e[0]===t&&(e[0]=i),e}).object().value():e}},{key:"adaptParams",value:function(e){return e.skip&&(e=this.renameProperty(e,"skip","offset")),e.where&&e.where.name&&(e.where=this.renameProperty(e.where,"name","*")),e}}]),e}()},"8Elc":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){i=i+'<div class="form-group"><span>'+n.escape(null==(t=r)?"":t)+"</span>",a&&(i=i+'<a class="HelpTopic"'+n.attr("query",a,!0,!0)+' href="javascript:void(0);">'+n.escape(null==(t=e.getString("Learn_more_link_text"))?"":t)+"</a>"),i=i+'</div><div class="save-bar form-group"><input class="btn btn-default" type="button"'+n.attr("value",e.getString("Button_Ok"),!0,!0)+"></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"learnMoreId"in a?a.learnMoreId:"undefined"!==typeof learnMoreId?learnMoreId:void 0,"messageDetails"in a?a.messageDetails:"undefined"!==typeof messageDetails?messageDetails:void 0),i}},"8U/d":function(e,t,i){"use strict";var n=i("bgLp"),a=i("nN5v"),r=i("ePzV"),o=i("/xyZ"),s=i.n(o),l=i("UT4o"),c=i.n(l),d=i("ITOZ"),u={aspectRatios:{Image191x100:{aspectRatio:1.91,type:"Image191x100",associationType:"LandscapeImageMedia",stringKey:"ImageExperience_Image_Ratio_191x100",previewTypeStringKey:"ImageExperience_Preview_Type_191x100",imagePreviewHeight:200,previewWidth:"191px",previewHeight:"100px",simplifiedType:"Image191x100",isRequired:!0,minSize:[703,368],maxSize:[0,0],previewSettings:{previewContentClassName:"audience-network-wide",showShortHeadline:!1,showLongHeadline:!0,showDescription:!0,showAdditionalDisclaimer:!0}},Image178x100:{aspectRatio:1.78,type:"Image178x100",associationType:"ImageMedia178X100",stringKey:"ImageExperience_Image_Ratio_178x100",previewTypeStringKey:"ImageExperience_Preview_Type_178x100",imagePreviewHeight:350,minSize:[624,350],previewSettings:{previewContentClassName:"edge-single-carousel",showShortHeadline:!1,showLongHeadline:!0,showDescription:!1,showGradient:!0}},Image172x100:{aspectRatio:1.72,type:"Image172x100",associationType:"ImageMedia172X100",stringKey:"ImageExperience_Image_Ratio_172x100",previewTypeStringKey:"ImageExperience_Preview_Type_172x100",imagePreviewHeight:174,minSize:[300,174],previewSettings:{previewContentClassName:"edge-medium-headline",showShortHeadline:!1,showLongHeadline:!0,showDescription:!1}},Image169x100:{aspectRatio:1.69,type:"Image169x100",associationType:"ImageMedia169X100",stringKey:"ImageExperience_Image_Ratio_169x100",previewTypeStringKey:"ImageExperience_Preview_Type_169x100",imagePreviewHeight:368,minSize:[622,368],previewSettings:{previewContentClassName:"msn-single-carousel",showShortHeadline:!1,showLongHeadline:!0,showDescription:!1,showGradient:!0}},Image155x100:{aspectRatio:1.55,type:"Image155x100",associationType:"ImageMedia155X100",stringKey:"ImageExperience_Image_Ratio_155x100",previewTypeStringKey:"ImageExperience_Preview_Type_155x100",imagePreviewHeight:194,minSize:[300,194],previewSettings:{previewContentClassName:"msn-medium-headline",showShortHeadline:!1,showLongHeadline:!0,showDescription:!1}},Image150x100:{aspectRatio:1.5,type:"Image150x100",associationType:"ImageMedia15X10",stringKey:"ImageExperience_Image_Ratio_150x100",previewTypeStringKey:"ImageExperience_Preview_Type_150x100",imagePreviewHeight:200,minSize:[300,200],previewSettings:{previewContentClassName:"msn-in-article",showShortHeadline:!1,showLongHeadline:!0,showDescription:!0}},Image133x100:{aspectRatio:1.33,type:"Image133x100",associationType:"ImageMedia133X100",stringKey:"ImageExperience_Image_Ratio_133x100",previewTypeStringKey:"ImageExperience_Preview_Type_133x100",imagePreviewHeight:75,minSize:[100,75],previewSettings:{previewContentClassName:"msn-small-headline",showShortHeadline:!1,showLongHeadline:!0,showDescription:!1}},Image1x1:{aspectRatio:1,type:"Image1x1",associationType:"SquareImageMedia",stringKey:"ImageExperience_Image_Ratio_1x1",previewTypeStringKey:"ImageExperience_Preview_Type_1x1",imagePreviewHeight:75,previewWidth:"200px",previewHeight:"200px",simplifiedType:"Image1x1",isRequired:!0,minSize:[300,300],maxSize:[0,0],previewSettings:{previewContentClassName:"audience-network-square-image",showShortHeadline:!0,showLongHeadline:!1,showDescription:!1,showAdditionalDisclaimer:!0}},Image93x100:{aspectRatio:.93,type:"Image93x100",associationType:"ImageMedia93X100",stringKey:"ImageExperience_Image_Ratio_93x100",previewTypeStringKey:"ImageExperience_Preview_Type_93x100",imagePreviewHeight:333,minSize:[311,333],previewSettings:{previewContentClassName:"msn-double-carousel",showShortHeadline:!0,showLongHeadline:!1,showDescription:!1,showGradient:!0}}},videoAspectRatios:{VideoMedia16X9:{ratio:16/9,text:"16 : 9",stringKey:"ImageExperience_Video_Ratio_16x9",cropSetting:{minSize:{width:160,height:90}},thumbnailCropSetting:{minSize:[224,126]}},VideoMedia5X4:{ratio:1.25,text:"5 : 4",stringKey:"ImageExperience_Video_Ratio_5x4",cropSetting:{minSize:{width:100,height:80}},thumbnailCropSetting:{minSize:[150,120]}},VideoMedia1X1:{ratio:1,text:"1 : 1",stringKey:"ImageExperience_Video_Ratio_1x1",cropSetting:{minSize:{width:100,height:100}},thumbnailCropSetting:{minSize:[120,120]}},VideoMedia4X5:{ratio:.8,text:"4 : 5",stringKey:"ImageExperience_Video_Ratio_4x5",cropSetting:{minSize:{width:80,height:100}},thumbnailCropSetting:{minSize:[120,150]}},VideoMedia9X16:{ratio:9/16,text:"9 : 16",stringKey:"ImageExperience_Video_Ratio_9x16",cropSetting:{minCropSize:{width:90,height:160}},thumbnailCropSetting:{minSize:[126,224]}}},videoPreviewsSettings:[{type:"16X9-Homepage",videoType:"VideoMedia16X9",text:"16 : 9",stringKey:"ImageExperience_Video_Ratio_16x9",previewContainerHeight:360,previewContainerWidth:640,hideTextWhenPlay:!0,showShortHeadline:!0,showLongHeadline:!1,showDescription:!1,showAdditionalDisclaimer:!1,showProgressText:!0,className:"preview-16-9-homepage"},{type:"16X9-Infopane",videoType:"VideoMedia16X9",text:"16 : 9",stringKey:"ImageExperience_Video_Ratio_16x9",previewContainerHeight:360,previewContainerWidth:640,hideTextWhenPlay:!0,showShortHeadline:!0,showLongHeadline:!1,showDescription:!1,showAdditionalDisclaimer:!1,showProgressText:!0,className:"preview-16-9-infopane"},{type:"16X9-InArticleAd",videoType:"VideoMedia16X9",text:"16 : 9",stringKey:"ImageExperience_Video_Ratio_16x9",previewContainerHeight:296,previewContainerWidth:318,hideTextWhenPlay:!1,showShortHeadline:!0,showLongHeadline:!1,showDescription:!1,showAdditionalDisclaimer:!1,showProgressText:!1,className:"preview-16-9-inarticlead"}],videoPreviewDefaultWidth:640,videoPreviewDefaultHeight:300,resizeImageHeightInList:80,sortBySelections:{recentUpload:{id:1,enum:"recentUpload",stringKey:"ImageExperience_SortBy_RecentUpload",query:"$orderby=UploadedTime desc"},imageText:{id:2,enum:"imageText",stringKey:"ImageExperience_SortBy_ImageText",query:"$orderby=Text asc"}},videoSortBySelections:{recentUpload:{id:1,enum:"recentUpload",stringKey:"ImageExperience_Sort_Recent_Upload",query:"$orderby=UploadedTime desc",edmDefinition:{UploadedTime:-1}},description:{id:2,enum:"description",stringKey:"ImageExperience_Sort_Video_Text",query:"$orderby=Text asc",edmDefinition:{Text:1}}},imageTypesWithOrder:["Image191x100","Image178x100","Image172x100","Image169x100","Image155x100","Image150x100","Image133x100","Image1x1","Image93x100"],videoTypesWithOrder:["VideoMedia16X9","VideoMedia5X4","VideoMedia1X1","VideoMedia4X5","VideoMedia9X16"],videoTypeToThumbnailType:{VideoMedia16X9:"VideoMedia16X9Thumbnail",VideoMedia5X4:"VideoMedia5X4Thumbnail",VideoMedia1X1:"VideoMedia1X1Thumbnail",VideoMedia4X5:"VideoMedia4X5Thumbnail",VideoMedia9X16:"VideoMedia9X16Thumbnail"},subTypeToType:{ImageMedia4X1:"Image4x1",LandscapeImageMedia:"Image191x100",ImageMedia178X100:"Image178x100",ImageMedia172X100:"Image172x100",ImageMedia169X100:"Image169x100",ImageMedia155X100:"Image155x100",ImageMedia15X10:"Image150x100",ImageMedia133X100:"Image133x100",SquareImageMedia:"Image1x1",ImageMedia93X100:"Image93x100",ImageMedia1X2:"Image1x2"},pageSize:12,imageAdExtSettings:{MobileMultiImage:{previewContentClassName:"mobile-multi-img",imagePreviewHeight:310,previewTypeStringKey:"ImageExperience_Preview_Type_MobileMulti"},BingDesktopImage:{previewContentClassName:"bing-desktop-img",imagePreviewHeight:100,previewTypeStringKey:"ImageExperience_Preview_Type_BingDeskMulti"},BingSingleImage:{previewTypeStringKey:"ImageExperience_Preview_Type_BingSingleImage",imagePreviewHeight:45,previewSettings:{previewContentClassName:"bing-single-image",showShortHeadline:!1,showLongHeadline:!0,showDescription:!0,showBusinessName:!1,showUrl:!0}}},GenericImage:{minWidth:128,minHeight:128},getMinimumSizeForImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?u.getMmaAspectRatios():u.aspectRatios;return e?i[e].minSize:t?[u.GenericImage.minWidth,u.GenericImage.minHeight]:c.a.reduce(i,function(e,t){return[e[0]>t.minSize[0]?e[0]:t.minSize[0],e[1]>t.minSize[1]?e[1]:t.minSize[1]]},[0,0])},getImageTypesWithOrder:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?["Image4x1","Image191x100","Image1x1","Image1x2"]:u.imageTypesWithOrder},getDefaultRatio:function(e,t,i){return c.a.chain(i).filter(function(i){return e>=i.minSize[0]&&t>=i.minSize[1]}).sortBy(function(i){return Math.abs(i.aspectRatio-e/t)}).first().value()},getMmaAspectRatios:function(){return{Image191x100:{aspectRatio:1.91,type:"Image191x100",associationType:"LandscapeImageMedia",stringKey:"ImageExperience_Image_Ratio_191x100",previewTypeStringKey:"ImageExperience_Preview_Type_MultimediaAd_191x100",imagePreviewHeight:244,previewWidth:"600px",previewHeight:"244px",simplifiedType:"Image191x100",isRequired:!0,minimumRequirements:1,minSize:[703,368],maxSize:[0,0],previewSettings:{previewContentClassName:"multimedia-ad-landscape-image",showShortHeadline:!0,showLongHeadline:!1,showDescription:!0,showBusinessName:!1,showUrl:!0,showAction:!0,showAdsLabel:!0,showAdditionalDisclaimer:!0}},Image4x1:{aspectRatio:4,type:"Image4x1",associationType:"ImageMedia4x1",stringKey:"ImageExperience_Image_Ratio_4x1",previewTypeStringKey:"ImageExperience_Preview_Type_MultimediaAd_4x1",imagePreviewHeight:152,previewWidth:"608px",previewHeight:"152px",simplifiedType:"Image4x1",isRequired:!0,minimumRequirements:0,minSize:[608,152],maxSize:[0,0],previewSettings:{previewContentClassName:"multimedia-ad-wide-image",showShortHeadline:!0,showLongHeadline:!1,showDescription:!0,showBusinessName:!1,showUrl:!0,showAction:!0,showAdsLabel:!0,showAdditionalDisclaimer:!0}},Image1x1:{aspectRatio:1,type:"Image1x1",associationType:"SquareImageMedia",stringKey:"ImageExperience_Image_Ratio_1x1",previewTypeStringKey:"ImageExperience_Preview_Type_MultimediaAd_1x1",imagePreviewHeight:400,previewWidth:"400px",previewHeight:"400px",simplifiedType:"Image1x1",isRequired:!0,minimumRequirements:1,minSize:[470,470],maxSize:[0,0],previewSettings:{previewContentClassName:"multimedia-ad-square-image",showShortHeadline:!0,showLongHeadline:!1,showDescription:!0,showBusinessName:!1,showUrl:!0,showAction:!0,showAdsLabel:!0,showAdditionalDisclaimer:!0}},Image1x2:{aspectRatio:.5,type:"Image1x2",associationType:"ImageMedia1x2",stringKey:"ImageExperience_Image_Ratio_1x2",previewTypeStringKey:"ImageExperience_Preview_Type_MultimediaAd_1x2",imagePreviewHeight:400,previewWidth:"200px",previewHeight:"400px",simplifiedType:"Image1x2",isRequired:!0,minimumRequirements:0,minSize:[470,940],maxSize:[0,0],previewSettings:{previewContentClassName:"multimedia-ad-vertical-image",showShortHeadline:!0,showLongHeadline:!1,showDescription:!0,showBusinessName:!1,showUrl:!0,showAction:!0,showAdsLabel:!0,showAdditionalDisclaimer:!0}}}},SupportedCaptionLocales:[{Lcid:1033,FullName:"English (US): en_US",Tag:"en_US"}],LcidToFullName:function(e){var t=u.SupportedCaptionLocales.find(function(t){return t.Lcid===e});return t?t.FullName:e.toString()},TagToLcid:function(e){var t=u.SupportedCaptionLocales.find(function(t){return t.Tag.toLowerCase()===e.toLowerCase()});return t?t.Lcid:null},MMAMaximumImage:16,MAX_IMAGECOUNT_MMA_MSAN:16,multimediaAdinMSANRatios:["Image191x100","Image178x100","Image150x100","Image133x100","Image1x1"],imageSources:{Website:"Website",Upload:"Upload",Existing:"Existing",Stock:"Stock"},preferenceFlags:{MMATeachingBubble:"WebApp.CampaignUI.ShowAdCreatorEditImageBubble",MMAWebsiteImageOptIn:"WebApp.CampaignUI.MMAWebsiteImageOptIn"}},p=u,g=function(){function e(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(a.a)(this,e),this.id=t.id,this.idString=t.idString,this.src=t.src,this.type=t.type,this.width=t.width,this.height=t.height,this.cropSettings=t.cropSettings,this.effectSettings=t.effectSettings,this.baseId=t.baseId,this.metadata=t.metadata,this.isIncluded=t.isIncluded,this.originCropSetting=t.originCropSetting||this.cropSettings,this.isAutoCropping=t.isAutoCropping,this.text=t.text,this.source=t.source,i&&this.type?this.baseImage=new e(c.a.defaults({cropSettings:null,effectSettings:null,type:null,id:this.BaseId,baseId:null,metadata:null},t),!1):this.baseImage=t.baseImage}return Object(r.a)(e,[{key:"setBaseImage",value:function(e){this.baseImage=e}},{key:"setSrc",value:function(e){this.src=e}},{key:"setType",value:function(e){this.type=e}},{key:"setEffectSettings",value:function(e){this.effectSettings=e}},{key:"isMaunalCropped",value:function(){return!c.a.isEqual(this.originCropSetting,this.cropSettings)}},{key:"setIncluded",value:function(e){this.isIncluded=e}},{key:"setAutoCropping",value:function(e){this.isAutoCropping=e}},{key:"setCropSettings",value:function(e){this.cropSettings=e}},{key:"clone",value:function(){var t=this.baseImage?new e(Object(d.cloneDeep)(Object(n.a)({},this.baseImage)),!1):null;return new e(c.a.extend(Object(d.cloneDeep)({id:this.id,idString:this.idString,src:this.src,type:this.type,width:this.width,height:this.height,cropSettings:this.cropSettings,effectSettings:this.effectSettings,isIncluded:this.isIncluded,baseId:this.baseId,metadata:this.metadata}),{baseImage:t}),!1)}},{key:"getBasicData",value:function(){return{id:this.id,idString:this.idString,src:this.src,width:this.width,height:this.height,text:this.text,type:this.type,isIncluded:this.isIncluded,source:this.source}}},{key:"formatToSave",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.Type:t?p.getMmaAspectRatios()[this.Type].associationType:p.aspectRatios[this.Type].associationType;var i={id:this.Id,idString:this.IdString||this.Id.toString(),subType:e};return this.cropSettings&&(i=Object(n.a)({},i,{cropX:this.cropSettings.SourceX,cropY:this.cropSettings.SourceY,cropWidth:this.cropSettings.SourceWidth,cropHeight:this.cropSettings.SourceHeight})),i}},{key:"BaseImage",get:function(){return this.baseImage}},{key:"Id",get:function(){return this.id}},{key:"BaseId",get:function(){return this.baseId||this.Id}},{key:"IdString",get:function(){return this.idString}},{key:"Src",get:function(){return this.src}},{key:"Metadata",get:function(){return this.metadata}},{key:"Width",get:function(){return this.width}},{key:"Height",get:function(){return this.height}},{key:"Type",get:function(){return this.type}},{key:"Text",get:function(){return this.text}},{key:"CropSettings",get:function(){return this.cropSettings}},{key:"EffectSettings",get:function(){return this.effectSettings}},{key:"FinalSrc",get:function(){return this.effectSettings&&this.effectSettings.effectKey?this.effectSettings.effectSrc:this.src}},{key:"IsIncluded",get:function(){return this.isIncluded}},{key:"ThumbnailForAdList",get:function(){return"".concat(this.ThumbnailUrl,"&w=191&h=100")}},{key:"ThumbnailUrl",get:function(){var e=this.src.indexOf("?")>0?this.src:"".concat(this.src,"?"),t="";if(this.cropSettings){var i=this.cropSettings.SourceX/this.width,n=this.cropSettings.SourceY/this.height,a=(this.cropSettings.SourceX+this.cropSettings.SourceWidth)/this.width,r=(this.cropSettings.SourceY+this.cropSettings.SourceHeight)/this.height;t="&c=16&roil=".concat(i,"&roit=").concat(n,"&roir=").concat(a,"&roib=").concat(r)}return"".concat(e).concat(t)}},{key:"Source",get:function(){return this.source}}]),e}(),h=function(e,t){return new g({id:e.Id,idString:e.IdString,src:e.Url,width:e.Width,height:e.Height,text:e.Text,source:t})},m=i("1lK0"),f=function(){function e(t){Object(a.a)(this,e),this.id=t.id,this.idString=t.idString,this.thumbnailUrl=t.thumbnailUrl,this.type=t.type,this.width=t.width,this.height=t.height,this.text=t.text,this.src=t.src,this.status=t.status,this.failureCode=t.failureCode,this.duration=t.duration,this.altText=t.altText}return Object(r.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"formatToSave",value:function(){return{id:this.Id,idString:this.IdString,subType:this.Type}}},{key:"Id",get:function(){return this.id}},{key:"IdString",get:function(){return this.idString}},{key:"ThumbnailUrl",get:function(){return this.thumbnailUrl}},{key:"ThumbnailForAdList",get:function(){return this.thumbnailUrl}},{key:"Width",get:function(){return this.width}},{key:"Height",get:function(){return this.height}},{key:"Type",get:function(){return this.type}},{key:"Text",get:function(){return this.text}},{key:"Duration",get:function(){return this.duration}},{key:"Src",get:function(){return this.src}},{key:"Status",get:function(){return this.status}},{key:"FailureCode",get:function(){return this.failureCode}}]),e}(),v=function(e){return{src:function(e){if(!e)return null;var t=JSON.parse(e),i=Object.keys(t).map(function(e){return parseInt(e,10)});return t[Math.min.apply(Math,Object(m.a)(i))]}(e.DownloadUrl),width:e.Width,height:e.Height,type:e.SubType,text:e.Description,status:e.Status,thumbnailUrl:e.ThumbnailUrl,failureCode:e.FailureCode,duration:e.DurationInMilliSeconds||e.DurationInMS}},b=function(e){return new f(Object(n.a)({id:parseInt(e.Id,10),idString:e.Id},v(e)))},y=function(e){return new f(Object(n.a)({id:e.Id,idString:e.IdString},v(e)))},S=i("23d6"),w=i("Pb1Y"),C=i("Vwpy"),x=i("ERkP"),k=i.n(x),A=i("lObe"),T=i("pomj"),_=i("6e2+"),E=i("eHSY"),I=i("4jZH"),O=i("faId"),P=i("O94r"),M=i.n(P),j=i("6Lfu"),L=i("TI2v"),D=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).state={isImageLoaded:!1},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadImageFromSource()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.isImageLoaded!==t.isImageLoaded||this.props.imageSource!==e.imageSource}},{key:"componentDidUpdate",value:function(){this.loadImageFromSource()}},{key:"getCropperEdgeOption",value:function(){if(this.state.isImageLoaded&&this.props.maxCropBox){var e=this.props.maxCropBox,t=e.SourceX,i=e.SourceY,n=e.SourceWidth,a=e.SourceHeight;return{w:t,e:-(this.imageObj.naturalWidth-t-n),n:i,s:-(this.imageObj.naturalHeight-i-a)}}}},{key:"loadImageFromSource",value:function(){var e=this;this.imageObj&&this.imageObj.src===this.props.imageSource||(this.setState({isImageLoaded:!1}),this.imageObj=new Image,this.imageObj.src=this.props.imageSource,this.imageObj.onload=function(){e.setState({isImageLoaded:!0}),e.props.onImageLoaded()})}},{key:"render",value:function(){var e=Object(n.a)({},this.props.cropSettings);e.SourceX=e.SourceX||0,e.SourceY=e.SourceY||0,e.SourceWidth=e.SourceWidth||this.imageObj&&this.imageObj.width||0,e.SourceHeight=e.SourceHeight||e.SourceWidth/this.props.aspectRatio;var t={aspectRatio:this.props.aspectRatio,allowSelect:!1,canDrag:!0,boxWidth:this.props.boxWidth,boxHeight:this.props.boxHeight,minSize:this.props.minSize,maxSize:this.props.maxSize,edge:this.getCropperEdgeOption(),cropSettings:e},i={imgData:this.imageObj,cropperOptions:t,preview:{show:!1},isPreviewNeeded:!1,onCropperInitialized:this.props.onCropperInitialized};return k.a.createElement("div",{className:M()("react-image-cropper",this.props.classes.container),"aria-label":this.props.ariaLabel},this.state.isImageLoaded&&k.a.createElement(L.BackboneViewWrapper,{View:j.ImageCropper,options:i,eventsToActions:[{event:"cropSettingsUpdated",action:this.props.onCropSettingsChanged}]}))}}]),t}(k.a.Component);D.defaultProps={aspectRatio:1,maxSize:[2e3,2592],maxCropBox:null,onImageLoaded:function(){},cropSettings:null,boxWidth:null,onCropperInitialized:c.a.noop};var R=Object(O.withDefaultStyles)(D,function(){var e={content:'" "',position:"absolute",zIndex:"-1",width:16,height:16,opacity:"1"};return Object(n.a)({},j.jcropReactStyle,{container:{display:"table",margin:"0 auto","& .jcrop-handle":{backgroundColor:"rgba(255,255,255,0)",opacity:"0.5!important",width:20,height:20,border:"none",margin:0},"& .jcrop-handle.ord-ne":{borderRight:"6px #000000 solid",borderTop:"6px #000000 solid"},"& .jcrop-handle.ord-ne:before":Object(n.a)({},e,{top:"0",right:"0",borderRight:"2px solid white",borderTop:"2px solid white",marginTop:-4,marginRight:-4}),"& .jcrop-handle.ord-se":{borderRight:"6px #000000 solid",borderBottom:"6px #000000 solid"},"& .jcrop-handle.ord-se:before":Object(n.a)({},e,{bottom:"0",right:"0",borderRight:"2px solid white",borderBottom:"2px solid white",marginBottom:-4,marginRight:-4}),"& .jcrop-handle.ord-nw":{borderLeft:"6px #000000 solid",borderTop:"6px #000000 solid"},"& .jcrop-handle.ord-nw:before":Object(n.a)({},e,{top:"0",left:"0",borderLeft:"2px solid white",borderTop:"2px solid white",marginTop:-4,marginLeft:-4}),"& .jcrop-handle.ord-sw":{borderLeft:"6px #000000 solid",borderBottom:"6px #000000 solid"},"& .jcrop-handle.ord-sw:before":Object(n.a)({},e,{bottom:"0",left:"0",borderLeft:"2px solid white",borderBottom:"2px solid white",marginBottom:-4,marginLeft:-4}),"& .jcrop-holder":{display:"inline-block"},"& .jcrop-holder .jcrop-tracker":{height:"100%",width:"100%"},"& .jcrop-holder .jcrop-keymgr":{visibility:"hidden"}}})}),N=i("f3PW"),V=i("LvSV"),B=i("ZItL"),F=function(){return{description:{margin:"12px 32px 28px 0",fontSize:14,lineHeight:"20px"}}},U=function(e){var t=e.iconFontFamily;return{validCropTag:{background:"#DFF6DD"},invalidCropTag:{background:"#FDE7E9"},cropTagGroup:{marginTop:16},cropTag:{display:"inline-block",borderRadius:"99px",marginRight:10},tagString:{fontSize:12,lineHeight:"32px",margin:"0px 8px 0px 2px",display:"inline",verticalAlign:"middle"},tagIcon:{margin:"0px 2px 0px 8px",display:"inline",fontFamily:void 0===t?"MsAds MDL2 Assets":t,lineHeight:"32px",fontSize:14,verticalAlign:"middle"},validCropIcon:{color:"#107C10","&:before":{content:'"\\E73E"'}},invalidCropIcon:{color:"#A80000","&:before":{content:'"\\E711"'}}}},G=function(e){var t=e.ratioConfig,i=e.currentCropSettings,n=Object(x.useState)({}),a=Object(_.a)(n,2),r=a[0],o=a[1],s=Object(x.useState)(!0),l=Object(_.a)(s,2),c=l[0],d=l[1],u=Object(O.useDefaultStyles)(U);return i&&i.SourceWidth&&i.SourceHeight&&(i.SourceWidth===r.SourceWidth&&i.SourceHeight===r.SourceHeight||(o(i),d(function(e,t){return!(t.SourceHeight<e.minSize[1])&&!(t.SourceWidth<e.minSize[0])}(t,i)))),k.a.createElement(E.TooltipHost,{content:t.aspectRatio,calloutProps:{gapSpace:6}},k.a.createElement("div",{className:M()(c?u.validCropTag:u.invalidCropTag,u.cropTag,"crop-tag")},k.a.createElement("div",{className:M()(u.tagIcon,c?u.validCropIcon:u.invalidCropIcon,c?"valid-icon":"invalid-icon")}),k.a.createElement("span",{className:M()(u.tagString,"tag-string")},t.tagString)))};G.defaultProps={ratioConfig:null,currentCropSettings:null};var z=function(e){var t=e.aspectRatioConfig,i=e.currentCropSettings,a=Object(O.useDefaultStyles)(U),r=Object(x.useContext)(I.I18nContext),o=Object(l.map)(t,function(e){return Object(n.a)({},function(e,t){switch(e){case 1.91:return{tagString:t.getString("Landscape image"),aspectRatio:t.getString("1.91 : 1")};case 4:return{tagString:t.getString("Wide image"),aspectRatio:t.getString("4 : 1")};case 1:return{tagString:t.getString("Square image"),aspectRatio:t.getString("1 : 1")};case.5:return{tagString:t.getString("Vertical image"),aspectRatio:t.getString("1 : 2")};default:return null}}(e.aspectRatio,r),{minSize:e.minSize,key:e.aspectRatio})}),s=Object(l.map)(o,function(e){return k.a.createElement(G,{key:e.key,currentCropSettings:i,ratioConfig:e})});return k.a.createElement("div",{className:a.cropTagGroup},s)};z.defaultProps={aspectRatioConfig:null,currentCropSettings:null};var H=function(e){var t=e.baseImage,i=e.cropSettings,n=e.onCropSettingsChanged,a=e.minCropSize,r=e.maxCropBox,o=e.aspectRatioConfig,s=Object(O.useDefaultStyles)(F),l=Object(x.useContext)(I.I18nContext),c=Object(x.useState)({}),d=Object(_.a)(c,2),u=d[0],p=d[1],g=Object(x.useContext)(B.InstrumentationContext),h=Object(V.a)(g).manualCropActivity,m=function(e,t){if(!e)return 415;var i=!0;t&&t.SourceWidth>0&&t.SourceHeight>0&&(i=!1);var n=i?e.Width:t.SourceWidth,a=i?e.Height:t.SourceHeight,r=Object(N.getResizeImageHeight)({aspectRatio:n/a,maxWidth:596,maxHeight:415});return i?r:r*e.Height/a}(t,r),f=Object(N.getAllowedAspectRatio)(t),v=i||t&&{SourceWidth:t.Width,SourceHeight:t.Height}||{};return t?k.a.createElement("div",{className:"image-crop-editor-container"},k.a.createElement("div",{className:s.description},l.getString("Crop your image.")),k.a.createElement("div",{className:"cropper-container",style:u.container},k.a.createElement("div",{className:"cropper-sub-container",style:u.subContainer},k.a.createElement(R,{ariaLabel:l.getString("Cropper"),aspectRatio:f,boxHeight:m,minSize:a,maxSize:[t.Width,t.Height],maxCropBox:r,imageSource:t.Src,cropSettings:i,onCropSettingsChanged:function(e){h.trace("UserAppliedManualCrop"),n(e)},onCropperInitialized:function(e){if(r){var t=e.filter.constrain,i=t.minx,n=t.maxx,a=t.miny,o=t.maxy;p({container:{width:n-i,height:o-a,overflow:"hidden"},subContainer:{marginTop:-1*a,marginLeft:-1*i}})}else p({subContainer:{maxWidth:596}})}}))),0===f&&k.a.createElement(z,{aspectRatioConfig:o,currentCropSettings:v})):null};H.defaultProps={baseImage:null,cropSettings:null,maxCropBox:null,aspectRatioConfig:null};var W=function(e){function t(){return Object(a.a)(this,t),Object(S.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.originalWidth,i=e.resizeImageHeight,n=e.aspectRatio,a=e.src,r=i*n,o=r/t,s=t/(this.props.SourceWidth||t),l=-(this.props.SourceX||0)*o*s,c=-(this.props.SourceY||0)*o*s,d={height:"".concat(i,"px"),width:"".concat(r,"px"),overflow:"hidden"},u={width:"".concat(r*s,"px"),marginLeft:"".concat(l,"px"),marginTop:"".concat(c,"px")};return k.a.createElement("div",{className:"cropped-image-view",style:d},k.a.createElement("img",{onContextMenu:function(e){return e.preventDefault()},style:u,src:a,alt:n}))}}]),t}(k.a.PureComponent);W.defaultProps={SourceWidth:null,SourceX:null,SourceY:null};var q=i("0v5/"),$=function(e){var t=e.text,i=e.height,n=Object(O.useDefaultStyles)(function(e){var t=e.height;return function(){return{container:{height:t,width:"100%"}}}}({height:i}));return k.a.createElement(q.UiBlocker,{blocking:!0,loadingText:t},k.a.createElement("div",{className:n.container}))};$.defaultProps={height:200};var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).palette,i=void 0===t?{}:t,a=e.reactUIBlockerStyle&&e.reactUIBlockerStyle(i);return{container:Object(n.a)({width:"100%",backgroundColor:i.neutralLighterAlt},a,{"& .blocker-image":{margin:"0 auto !important"}}),imageContainer:{display:"table",margin:"0 auto"}}},J=function(e){var t=e.loading,i=e.loadingText,n=e.baseImageSrc,a=e.baseImageWidth,r=e.aspectRatio,o=e.cropSettings,s=e.resizeImageHeight,l=Object(O.useDefaultStyles)(K),c=o||{},d=c.SourceX,u=c.SourceY,p=c.SourceWidth,g=c.SourceHeight;return k.a.createElement("div",{className:M()(l.container,"effect-editor-preview")},t?k.a.createElement($,{text:i,height:s,width:s*r}):k.a.createElement("div",{className:l.imageContainer},n&&k.a.createElement(W,{originalWidth:a,resizeImageHeight:s,aspectRatio:r,SourceWidth:p,SourceHeight:g,SourceX:d,SourceY:u,src:n})))};J.defaultProps={loading:!1,loadingText:"",baseImageSrc:null,baseImageWidth:null,resizeImageHeight:void 0,cropSettings:null,aspectRatio:null};var Z,Y=function(){return{container:{margin:"0 auto",display:"table"},label:{margin:"24px 0 12px 8px",fontSize:14,lineHeight:"20px",fontWeight:600},labelWrapper:{maxWidth:78,"& > span":{textOverflow:"ellipsis",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",whiteSpace:"normal"}},innerField:{boxSizing:"content-box"}}},Q=i("a28/"),X={imageSize:{width:32,height:32}},ee=(Z={},Object(Q.a)(Z,N.EffectChoiceKey.None,Object(n.a)({},X,{key:N.EffectChoiceKey.None,imageSrc:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1024 0q141 0 271 36t245 104 207 160 161 208 103 244 37 272q0 141-36 271t-104 245-160 207-208 161-244 103-272 37q-141 0-271-36t-245-104-207-160-161-208-103-244-37-272q0-141 36-271t104-245 160-207 208-161T752 37t272-37zm0 1920q164 0 313-56t274-163L347 437Q240 561 184 710t-56 314q0 124 32 238t90 214 140 181 181 140 214 91 239 32zm677-309q107-124 163-273t56-314q0-124-32-238t-90-214-140-181-181-140-214-91-239-32q-164 0-313 56T437 347l1264 1264z" /></svg>',localizeKey:"None"})),Object(Q.a)(Z,N.EffectChoiceKey.DesignerEffects,Object(n.a)({},X,{key:N.EffectChoiceKey.DesignerEffects,imageSrc:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1472 458q23 0 38 15t16 39q0 27 11 57t28 58 37 54 40 45q19 19 44 39t54 38 59 28 57 11q23 0 38 15t16 39q0 23-15 38t-39 16q-27 0-57 11t-58 28-54 37-45 40q-19 19-39 44t-38 54-28 59-11 57q0 23-15 38t-39 16q-23 0-38-15t-16-39q0-27-11-57t-28-58-37-54-40-45q-19-19-44-39t-54-38-59-28-57-11q-23 0-38-15t-16-39q0-23 15-38t39-16q27 0 57-11t58-28 54-37 45-40q19-19 39-44t38-54 28-59 11-57q0-23 15-38t39-16zm0 651q37-63 93-119t119-94q-63-38-119-94t-93-119q-37 63-93 119t-119 94q63 38 119 94t93 119zM832 816q-20 0-34-14t-14-34q0-23-9-47t-23-48-32-45-32-36q-15-15-36-32t-44-31-48-24-48-9q-20 0-34-14t-14-34q0-20 14-34t34-14q23 0 47-9t48-23 45-32 36-32q15-15 32-36t31-44 24-48 9-48q0-20 14-34t34-14q20 0 34 14t14 34q0 23 9 47t23 48 32 45 32 36q15 15 36 32t44 31 48 24 48 9q20 0 34 14t14 34q0 20-14 34t-34 14q-23 0-47 9t-48 23-45 32-36 32q-15 15-32 36t-31 44-24 48-9 48q0 20-14 34t-34 14zm0-540q-31 51-76 96t-96 76q51 31 96 76t76 96q31-51 76-96t96-76q-51-31-96-76t-76-96zm0 662q23 0 38 15t16 39q0 36 14 74t35 76 48 69 52 58q25 25 57 51t70 48 75 36 75 14q23 0 38 15t16 39q0 23-15 38t-39 16q-36 0-74 14t-76 36-69 48-58 51q-25 25-51 57t-48 70-36 75-14 75q0 23-15 38t-39 16q-23 0-38-15t-16-39q0-36-14-74t-36-76-48-69-51-58q-25-25-57-51t-70-48-75-36-75-14q-23 0-38-15t-16-39q0-23 15-38t39-16q36 0 74-14t76-35 69-48 58-52q25-25 51-57t48-70 36-75 14-75q0-23 15-38t39-16zm0 827q49-90 126-167t167-126q-90-49-167-126t-126-167q-49 90-126 167t-167 126q90 49 167 126t126 167z" /></svg>',localizeKey:"Designer effects"})),Object(Q.a)(Z,N.EffectChoiceKey.BackgroundBlur,Object(n.a)({},X,{key:N.EffectChoiceKey.BackgroundBlur,imageSrc:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M0 1792v-79l79 79H0zM1457 256h158l433 433v158l-591-591zm542 0l49 49v158l-207-207h158zm-926 0h158l817 817v158l-975-975zm-384 0h158l1201 1201v158l-579-579q3 26 3 52 0 78-26 151l553 553h-158l-449-449q-25 36-53 63t-64 53q89 38 161 98t122 137 78 167 28 187h-128q0-106-40-199t-110-162-163-110-199-41q-106 0-199 40t-162 110-110 163-41 199H384q0-66 13-131t40-125H305L0 1487v-158l445 445q17-37 39-71t50-66L0 1103V945l613 613q31-27 65-49t72-40L0 719V561l579 579q-3-25-3-52 0-40 7-79t21-77l-4 4L0 335v-79h79l577 577q46-67 113-113L305 256h158l409 408-4 4q74-28 156-28 26 0 52 3L689 256zm15 832q0 66 25 124t68 102 102 69 125 25q66 0 124-25t101-68 69-102 26-125q0-66-25-124t-69-101-102-69-124-26q-66 0-124 25t-102 69-69 102-25 124z" /></svg>',localizeKey:"Background blur"})),Object(Q.a)(Z,N.EffectChoiceKey.BackgroundSolidColor,Object(n.a)({},X,{key:N.EffectChoiceKey.BackgroundSolidColor,imageSrc:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1024 0q141 0 272 36t245 103 207 160 160 208 103 245 37 272q0 141-36 272t-103 245-160 207-208 160-245 103-272 37q-53 0-99-20t-81-55-55-81-21-100q0-49 9-85t24-67 31-56 31-52 23-56 10-68q0-52-20-99t-55-81-82-55-99-21q-38 0-67 9t-56 24-53 31-56 31-67 23-85 10q-53 0-99-20t-81-55-55-81-21-100q0-141 36-272t103-245 160-207 208-160T751 37t273-37zm0 1920q123 0 237-32t214-90 182-141 140-181 91-214 32-238q0-123-32-237t-90-214-141-182-181-140-214-91-238-32q-123 0-237 32t-214 90-182 141-140 181-91 214-32 238q0 27 10 50t27 40 41 28 50 10q38 0 67-9t56-24 52-31 55-31 67-23 87-10q80 0 150 30t122 82 82 122 30 150q0 49-9 86t-24 67-31 55-31 52-23 56-10 68q0 27 10 50t27 40 41 28 50 10zM512 640q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10zm384-256q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10zm512 384q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10zm128 256q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10zm-256 384q27 0 50 10t40 27 28 41 10 50q0 27-10 50t-27 40-41 28-50 10q-27 0-50-10t-40-27-28-41-10-50q0-27 10-50t27-40 41-28 50-10z" /></svg>',localizeKey:"Background color",disclaimerText:"Your image must have a clear subject that occupies more than 50% of the image for background color to produce a result.",showDisclaimerOnChecked:!1})),Z),te=Object(l.map)(Object(l.reduce)(N.EffectChoiceOrder,function(e,t,i){return e[t]=i,e},[]),function(e){return ee[e]}),ie=i("5iHu"),ne=i.n(ie),ae=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).palette,i=void 0===t?{}:t;return{container:{margin:"0 auto",display:"table","& .ms-swatchColorPickerBodyContainer td:first-child span":{content:'url("'.concat("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2048 2048' width='16' height='16'><path d='M1758 0q60 0 113 23t92 62 62 92 23 113q0 58-22 111t-63 95l-240 240q33 32 51 72t18 88q0 46-17 86t-50 72l-157 157-160-161-805 805-26 1q-51 2-87 17t-64 36-50 46-48 45-55 34-73 14q-41 0-77-16t-64-43-43-63-16-78q0-43 13-73t35-55 45-47 45-50 37-64 17-88l1-26 805-805-161-160 157-157q32-32 72-49t86-18q47 0 87 18t73 51l240-240q41-41 94-63t112-22zm-441 960l-229-229-769 769q-5 51-19 91t-36 74-51 66-64 67q-21 21-21 51 0 29 21 50t50 21q30 0 51-21 35-34 67-63t66-52 74-36 91-19l769-769zm555-555q48-48 48-114 0-33-13-63t-35-52-52-35-63-13q-66 0-114 48l-331 330-94-94q-28-28-66-28-21 0-39 10t-35 25-32 31-28 30l550 550 68-68q28-28 28-66 0-20-7-36t-22-31l-93-93 330-331z' fill='%230078D4' /></svg>",'")'),backgroundColor:i.neutralLighter}},label:{margin:"24px 0 7px 0",fontSize:14,lineHeight:"20px",fontWeight:600}}},re=i("+KRH"),oe=i("H6w+"),se=function(e){var t=e.i18n,i=e.updateColor,n=e.color,a=e.showColorPicker,r=e.hideColorPicker,o=e.styles;return k.a.createElement("div",{className:"color-picker-wrapper"},a?k.a.createElement(re.FocusLock,{onExit:r,focusFirstItemOnMount:!0},k.a.createElement(oe.a,{hideColorPicker:r,color:n,onChange:function(e,t){i(e,t)},alphaType:"none",showPreview:!1,outsideClickIgnoreClass:"color-picker-toggler",strings:{hex:t.getString("Hex"),red:t.getString("Red"),green:t.getString("Green"),blue:t.getString("Blue"),alpha:t.getString("Alpha")},styles:o})):null)},le=/(\d*),\s?(\d*),\s?(\d*)/;function ce(e){var t=e.r,i=e.g,n=e.b;return"".concat(t,",").concat(i,",").concat(n)}var de=function(e){var t=e.effectOptions,i=e.onColorPickerChange,a=e.loading,r=e.i18n,o=Object(O.useDefaultStyles)(ae),s=function(e){var t=e.backgroundColor;if(t){var i=le.exec(t),n=c.a.reduce([i[1],i[2],i[3]],function(e,t){var i=parseInt(t,10).toString(16);return i=2===i.length?i:"0".concat(i),e.concat(i)},"#");return Object(E.getColorFromString)(n)}return Object(E.getColorFromString)("#ffffff")}(t),l=k.a.useState(s),d=Object(_.a)(l,2),u=d[0],p=d[1],g=k.a.useState(s.str.toUpperCase()),h=Object(_.a)(g,2),m=h[0],f=h[1],v=k.a.useState(!1),b=Object(_.a)(v,2),y=b[0],S=b[1],w=k.a.useState(!0),C=Object(_.a)(w,2),x=C[0],A=C[1],T=k.a.useState(null),I=Object(_.a)(T,2),P=I[0],j=I[1],L=k.a.useState(null),D=Object(_.a)(L,2),R=D[0],N=D[1];if(!R&&t.backgroundColor){var V=s.str.toUpperCase();N(V),f(V),p(s)}var B=function(e,t){return e?[{id:"showColorPicker",label:t.getString("Show color picker"),color:"#F3F2F1"},{id:e,label:t.getString("Default color"),color:e},{id:"#C20734",label:t.getString("Red"),color:"#C20734"},{id:"#ECABCE",label:t.getString("Pink"),color:"#ECABCE"},{id:"#E3BC67",label:t.getString("Orange"),color:"#E3BC67"},{id:"#F8E3AC",label:t.getString("Yellow"),color:"#F8E3AC"},{id:"#E7E7E7",label:t.getString("Gray"),color:"#E7E7E7"},{id:"#4DBAA9",label:t.getString("Green"),color:"#4DBAA9"},{id:"#0E92BE",label:t.getString("Turquoise"),color:"#0E92BE"},{id:"#5074B9",label:t.getString("Blue"),color:"#5074B9"},{id:"#6F146E",label:t.getString("Purple"),color:"#6F146E"},{id:"#112355",label:t.getString("Dark blue"),color:"#112355"}]:[]}(R,r);!a&&x&&A(!1);var F=function(){var e=ne()(".ms-swatchColorPickerBodyContainer td:first-child");if(e.length>0){var t=e.position();return{position:"absolute",zIndex:10,left:t.left+32,top:t.top+4}}return{}},U=k.a.useCallback(function(e){p(e),i(ce(e));var t=e.str.toUpperCase();c.a.some(B,function(e){return e.color===t})?f(t):f(null)},[p,f,B,i]),G=k.a.useCallback(function(e,t){P&&clearTimeout(P),"input"!==e.type?j(setTimeout(function(){U(t)},500)):U(t)},[P,j,U]),z=k.a.useCallback(function(e){if("showColorPicker"===e)S(!y),f(m);else{var t=Object(E.getColorFromString)(e);p(t),f(e),i(ce(t))}},[i,p,y,S,m,f]);return k.a.createElement("div",{className:M()("color-picker",o.container)},!x&&k.a.createElement("div",{className:"color-picker-group"},k.a.createElement("div",{className:o.label},r.getString("Background color")),k.a.createElement(se,{i18n:r,updateColor:G,color:u,showColorPicker:y,showLoading:a,hideColorPicker:function(){return S(!1)},pickerPosition:F,styles:{panel:{border:"1px solid #605E5C",padding:12,background:"#FFFFFF"},root:F()}}),a&&!c.a.isEmpty(F())&&k.a.createElement("div",{style:Object(n.a)({},F(),{width:300,height:334,backgroundColor:"#FFFFFF",opacity:.5,pointerEvents:"none"})}),k.a.createElement(E.SwatchColorPicker,{cellHeight:28,cellWidth:28,cellShape:"square",colorCells:B,onColorChanged:z,selectedId:m,columnCount:13,disabled:a,styles:{tableCell:{padding:"4px","& svg":{borderRadius:"2px"}}},getColorGridCellStyles:function(e){return e.selected?{colorCell:{border:"4px solid #0078D4",padding:"0px",marginBottom:"5px"}}:{}}})))};de.defaultProps={effectOptions:{},loading:!1};var ue=function(e,t){return{container:{margin:"0 auto",display:"table"},label:{margin:"24px 0 12px 0",fontSize:14,lineHeight:"20px",fontWeight:600},labelWrapper:{maxWidth:78},innerField:{boxSizing:"content-box"},designerEffectChoiceGroup:{"& .ms-Label, & .ms-ChoiceField-labelWrapper":{display:"none"},"& .ms-ChoiceFieldGroup-flexContainer":{display:"flex",flexFlow:"row","& .ms-ChoiceField":{margin:0,"& ~ .ms-ChoiceField":{marginLeft:8},"& .ms-ChoiceField-field":{borderWidth:2,height:t,width:e,padding:0,"&:before, &:after":{zIndex:1}},"& .ms-ChoiceField-innerField":{padding:0}}}}}};var pe=function(e){var t=e.designerEffectSrcs,i=e.loading,a=e.baseImageWidth,r=e.baseImageHeight,o=e.effectOptions,s=e.onDesignerChange,l=e.i18n,d=a>r?r/(a/112):112,u=a<=r?a/(r/112):112,p=Object(O.useDefaultStyles)(ue),g=o.designerEffect;if(t.length>1){var h=c.a.map(function(e,t,i){var a={imageSize:{width:t,height:i},text:"",onRenderLabel:function(){return null}};return[Object(n.a)({},a,{key:e[0].Effect,imageSrc:e[0].Resource}),Object(n.a)({},a,{key:e[1].Effect,imageSrc:e[1].Resource}),Object(n.a)({},a,{key:e[2].Effect,imageSrc:e[2].Resource}),Object(n.a)({},a,{key:e[3].Effect,imageSrc:e[3].Resource}),Object(n.a)({},a,{key:e[4].Effect,imageSrc:e[4].Resource})]}(t,u,d),function(e){var t=e.key,n=e.text,a=e.imageSrc;return{key:t,text:n,imageSrc:a,imageSize:e.imageSize,onRenderLabel:e.onRenderLabel,onRenderField:e.onRenderField,selectedImageSrc:a,disabled:i&&t!==g}});return k.a.createElement("div",{className:M()("image-list-choice-group",p.container)},k.a.createElement("div",{className:p.label},l.getString("Auto-generated images")),k.a.createElement("div",{className:p.designerEffectChoiceGroup},k.a.createElement(E.ChoiceGroup,{selectedKey:g,onChange:s,options:h})))}return null};pe.defaultProps={baseImageWidth:null,baseImageHeight:null,effectOptions:{},designerEffectSrcs:[],loading:!1};var ge=function(e){var t=e.onBlurChange,i=e.effectOptions,n=e.i18n,a=e.loading,r=i.backgroundBlur||50,o=k.a.useState(!0),s=Object(_.a)(o,2),l=s[0],c=s[1],d=k.a.useState(r),u=Object(_.a)(d,2),p=u[0],g=u[1],h=k.a.useCallback(function(e,i){g(i),t(i)},[g,t]);return!a&&l&&c(!1),50===p&&r!==p&&g(r),!l&&k.a.createElement("div",{className:"background-blur-control"},k.a.createElement(E.Slider,{ariaLabel:n.getString("Blur amount"),label:n.getString("Blur amount"),max:100,min:1,onChanged:h,value:p,disabled:a,showValue:!0,styles:{root:{width:"438px",margin:"auto",paddingTop:"24px",paddingLeft:"4px"}}}),k.a.createElement(E.MessageBar,{styles:{root:{width:"434px",marginTop:"24px",marginLeft:"auto",marginRight:"auto"}}},n.getString("Background blur works best when the image has a clear subject.")))};ge.defaultProps={effectOptions:{},loading:!1};var he=function(e){switch(e.selectedKey){case N.EffectChoiceKey.BackgroundSolidColor:return k.a.createElement(de,e);case N.EffectChoiceKey.DesignerEffects:return k.a.createElement(pe,e);case N.EffectChoiceKey.BackgroundBlur:return k.a.createElement(ge,e);default:return null}};he.defaultProps={selectedKey:N.EffectChoiceKey.None};var me=function(e){var t=e.i18n,i=e.onChange,n=(e.onDesignerChange,e.baseImageWidth,e.baseImageHeight,e.selectedKey),a=e.unavailableEffectsConfig,r=(e.designerEffectSrcs,e.effectOptions,e.onColorPickerChange,e.loading),o=Object(O.useDefaultStyles)(Y),s=c.a.map(te,function(e){var i=e.key,o=e.imageSrc,s=e.localizeKey,l=e.imageSize,d=e.disclaimerText,u=e.showDisclaimerOnChecked,p=a&&a[i];return{key:i,imageSrc:o,selectedImageSrc:o,text:t.getString(s),imageSize:l,styles:c.a.extend(c.a.pick({container:{margin:"0 auto",display:"table"},label:{margin:"24px 0 12px 8px",fontSize:14,lineHeight:"20px",fontWeight:600},labelWrapper:{maxWidth:78,"& > span":{textOverflow:"ellipsis",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",whiteSpace:"normal"}},innerField:{boxSizing:"content-box"}},"innerField","labelWrapper"),{root:{margin:"0px 8px 4px 8px"}}),disabled:r&&i!==n||p,onRenderField:function(e,i){var n,a=i(e),r=e.checked,o=p;return!o&&d&&(o=r&&u||!r),o&&(n=p?"We cannot apply this effect to your image.":d),o?k.a.createElement(E.TooltipHost,{styles:{root:{display:"inline-block"}},content:t.getString(n)},a):a},onRenderLabel:function(e){var t=e.text;return k.a.createElement("span",{title:t}," ",t," ")}}});return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:M()("effect-picker-container",o.container)},k.a.createElement("div",{className:o.label},t.getString("Smart effects")),k.a.createElement(E.ChoiceGroup,{selectedKey:n,onChange:i,options:s})),k.a.createElement(he,e))};me.defaultProps={baseImageWidth:null,baseImageHeight:null,selectedKey:N.EffectChoiceKey.None,designerEffectSrcs:[],loading:!1,effectOptions:{},unavailableEffectsConfig:{}};var fe,ve=function(){return{description:{margin:"12px 32px 28px 0",fontSize:14,lineHeight:"20px"}}},be=(fe={},Object(Q.a)(fe,N.EffectChoiceKey.BackgroundBlur,"Applying background blur..."),Object(Q.a)(fe,N.EffectChoiceKey.BackgroundSolidColor,"Applying background color ..."),Object(Q.a)(fe,N.EffectChoiceKey.DesignerEffects,"Applying designer effects ..."),fe),ye=function(e){var t=e.baseImage,i=e.selectedEffectKey,n=e.onEffectChange,a=e.onDesignerChange,r=e.onBlurChange,o=e.effectOptions,s=e.allEffectSrcs,l=e.unavailableEffectsConfig,c=e.cropSettings,d=e.onColorPickerChange,u=e.loading,p=Object(O.useDefaultStyles)(ve),g=Object(x.useContext)(I.I18nContext),h=t&&t.Src,m=Object(N.getAspectRatio)(t,c),f=Object(N.getResizeImageHeight)({aspectRatio:m,maxWidth:596,maxHeight:415}),v=be[i];return k.a.createElement("div",{className:"image-effect-editor-container"},k.a.createElement("div",{className:p.description},g.getString("Enhance your image with smart effects.")),k.a.createElement(J,{i18n:g,loading:u,loadingText:v&&g.getString(v),baseImageSrc:h,baseImageWidth:t&&t.Width,aspectRatio:m,resizeImageHeight:f,cropSettings:c}),k.a.createElement(me,{i18n:g,baseImageWidth:t&&t.Width,baseImageHeight:t&&t.Height,onChange:n,onDesignerChange:a,selectedKey:i,unavailableEffectsConfig:l,effectOptions:o,designerEffectSrcs:s,onColorPickerChange:d,loading:u,onBlurChange:r}))};ye.defaultProps={baseImage:null,cropSettings:null,effectOptions:{},allEffectSrcs:[],unavailableEffectsConfig:{},loading:!1,onBlurChange:l.noop};var Se,we=i("79zO"),Ce=(Se={},Object(Q.a)(Se,N.EffectChoiceKey.DesignerEffects,"Designer effects failed. We cannot apply this effect to your image."),Object(Q.a)(Se,N.EffectChoiceKey.BackgroundBlur,"Background blur failed. We cannot apply this effect to your image."),Object(Q.a)(Se,N.EffectChoiceKey.BackgroundSolidColor,"Background color failed. We cannot apply this effect to your image."),Se),xe={EFFECT_RESTORE_FAILURE:"We could not restore one or more of your previously selected smart effects. Please choose from the updated smart effects options."},ke=c.a.mapObject(xe,function(e,t){return t}),Ae=function(e,t,i){var a=e.effectKey,r=e.effectSrc,o=e.effectOptions,c=e.allSrcs,d=e.Type,u=e.Width,p=e.Height,g=e.Src,h=Object(x.useState)(function(e){var t=e.effectKey,i=e.effectSrc,n=e.effectOptions,a=e.allSrcs,r=e.Type,o=e.Width,s=e.Height,l=e.Src,c=e.unavailableEffectsConfig,d={effectKey:t||N.EffectChoiceKey.None,effectOptions:n,allEffectSrcs:a,unavailableEffectsConfig:c};if(o>0&&s>0){var u=d.effectKey!==N.EffectChoiceKey.None?i:l;d.chosenImage={Type:r,Width:o,Height:s,Src:u,loading:!1}}return d}({effectKey:a,effectSrc:r,effectOptions:o,allSrcs:c,Type:d,Width:u,Height:p,Src:g})),m=Object(_.a)(h,2),f=m[0],v=m[1],b=Object(x.useState)({type:E.MessageBarType.severeWarning,text:""}),y=Object(_.a)(b,2),S=y[0],w=y[1],C=Object(x.useContext)(B.InstrumentationContext),k=Object(V.a)(C).smartEffectActivity,A=function(){w({})},T=function(e){var t=e.generatePromise,a=e.newEffectKey,r=e.oldEffectKey||f.effectKey;return A(),t.then(function(e){var t,i,a=e.assets,r=e.defaultAsset;if(Object(l.isEmpty)(a)?i=!0:r||(i=!0,t=ke.EFFECT_RESTORE_FAILURE),i)throw new Error(t);return v(function(e){return Object(n.a)({},e,{effectSrc:r.Resource,effectOptions:Object(n.a)({},e.effectOptions,{backgroundColor:r.DefaultBgColor||Object(l.propertyOf)(e.effectOptions)("backgroundColor"),backgroundBlur:r.BgBlurLevel||Object(l.propertyOf)(e.effectOptions)("backgroundBlur"),designerEffect:r.Effect||Object(l.propertyOf)(e.effectOptions)("designerEffect")}),allEffectSrcs:a})}),function(e){var t=null,i=null,n=new s.a(function(e,n){t=e,i=n}),a=new Image;return a.src=e,a.onload=function(){t(a)},a.onabort=function(){i(new Error("load image by url aborted"))},a.onerror=function(){i(new Error("load image by url errored"))},n}(r.Resource)}).then(function(e){var t=e.src;v(function(e){return Object(n.a)({},e,{loading:!1,chosenImage:Object(n.a)({},e.chosenImage,{Src:t})})})}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(e){var t=e.code,i=e.newEffectKey,n=e.i18n;return t&&xe[t]?n.getString(xe[t]):n.getString(Ce[i])}({code:e.message,newEffectKey:a,i18n:i}),o=!e.message,s=o?E.MessageBarType.severeWarning:E.MessageBarType.warning;k.trace("User failed to select effect: ".concat(a,",           err.message: ").concat(e.message,", will restore to ").concat(r)),w({text:t,type:s}),v(function(e){return Object(n.a)({},e,{effectKey:r,loading:!1,unavailableEffectsConfig:Object(n.a)({},e.unavailableEffectsConfig,Object(Q.a)({},a,o))})})})},I=function(e){var i=e.newEffectKey,a=e.oldEffectKey,r=e.mtEffectOptions,o=void 0===r?{}:r,c=e.modelEffectOptions,d=void 0===c?{}:c,u=(N.EffectChoiceMtSmartEffectMapping[i]?t.generateEffect({imageUrl:g,smartEffects:[{smartEffectName:N.EffectChoiceMtSmartEffectMapping[i],smartEffectOptions:Object(n.a)({},o)}]}):s.a.resolve([{Resource:g}])).then(function(e){return{assets:e,defaultAsset:d.designerEffect&&i===N.EffectChoiceKey.DesignerEffects?Object(l.find)(e,function(e){return e.Effect===d.designerEffect}):Object(l.first)(e)}});return v(function(e){return Object(n.a)({},e,{loading:!0,effectKey:i,effectOptions:Object(n.a)({},e.effectOptions||{},d)})}),T({generatePromise:u,newEffectKey:i,oldEffectKey:a})};return{selectedEffectKey:f.effectKey,effectImage:f.chosenImage,allEffectSrcs:f.allEffectSrcs,loading:f.loading,effectOptions:f.effectOptions,onEffectKeyChange:function(e){return k.trace("User selected effect: ".concat(e)),I({newEffectKey:e}).then(function(t){return k.trace("Effect applied successfully: ".concat(e)),t})},onDesignerEffectImageChange:function(e){v(function(t){var i=Object(l.find)(t.allEffectSrcs,function(t){return t.Effect===e}).Resource;return Object(n.a)({},t,{effectOptions:Object(n.a)({},t.effectOptions||{},{designerEffect:e}),chosenImage:Object(n.a)({},t.chosenImage,{Src:i})})})},onBackgroundColorChange:function(e){return I({newEffectKey:N.EffectChoiceKey.BackgroundSolidColor,mtEffectOptions:{ManualBgColor:e},modelEffectOptions:{backgroundColor:e}})},onBlurChange:function(e){return I({newEffectKey:N.EffectChoiceKey.BackgroundBlur,mtEffectOptions:{ManualBgBlurLevel:e},modelEffectOptions:{backgroundBlur:e}})},messageState:S,dismissMessage:A,unavailableEffectsConfig:f.unavailableEffectsConfig,prefetchData:function(e){var t=e.effectKeyToPrefetch,i=e.effectOptionsToPrefetch;I({oldEffectKey:N.EffectChoiceKey.None,newEffectKey:t,modelEffectOptions:i})}}},Te=function(e){return{footer:{"& button ~ button":{marginLeft:8}},commands:{marginBottom:e?22:32},subTitleDivider:{marginTop:32,marginBottom:20},actionBtnContainer:{marginTop:28}}},_e=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).palette,i=void 0===t?{}:t,a={height:"40px",padding:"0 16px"};return{link:Object(n.a)({},a,{backgroundColor:i.neutralLighter}),linkIsSelected:Object(n.a)({},a,{backgroundColor:i.themeLighterAlt,color:i.neutralPrimary,fontWeight:"600"})}},Ee=function(e){var t=e.items,i=e.selectedKey,n=e.onClick,a=Object(O.useDefaultStyles)(_e),r=c.a.map(t,function(e){var t=e.text,i=e.itemKey;return k.a.createElement(E.PivotItem,{key:i,headerText:t,itemKey:i})});return c.a.isEmpty(t)?null:k.a.createElement(E.Pivot,{className:"pivot-view-container",linkFormat:E.PivotLinkFormat.tabs,selectedKey:i,onLinkClick:function(e){n(e.props.itemKey)},styles:c.a.pick(a,"link","linkIsSelected")},r)},Ie="effect",Oe="crop",Pe=Ie,Me={Image191x100:"Edit image: 1.91 : 1 aspect ratio",Image4x1:"Edit image: 4 : 1 aspect ratio",Image1x1:"Edit image: 1 : 1 aspect ratio",Image1x2:"Edit image: 1 : 2 aspect ratio"},je=function(e){var t=e.isOpen,i=e.onApply,a=e.onDismiss,r=e.baseImage,o=e.effectSettings,s=e.cropSettings,l=e.minCropSize,d=e.maxCropBox,u=e.isAdCreatorEnhancementsEnabled,p=e.mediaRepository,g=e.aspectRatioConfig,h=e.selectedPivotItemKey,m=e.onPivotSelectionChange,f=Object(x.useContext)(I.I18nContext),v=Ae(Object(n.a)({effectKey:c.a.propertyOf(o)("effectKey"),effectSrc:c.a.propertyOf(o)("effectSrc"),allSrcs:c.a.propertyOf(o)("allSrcs"),effectOptions:c.a.propertyOf(o)("effectOptions")},c.a.pick(r,"Type","Width","Height","Src")),p,f),b=v.selectedEffectKey,y=v.effectImage,S=v.allEffectSrcs,w=v.loading,C=v.effectOptions,A=v.onEffectKeyChange,T=v.onDesignerEffectImageChange,P=v.onBackgroundColorChange,M=v.onBlurChange,j=v.messageState,L=v.dismissMessage,D=v.unavailableEffectsConfig,R=v.prefetchData,V=function(e){var t=Object(x.useState)(e),i=Object(_.a)(t,2),n=i[0],a=i[1];return Object(x.useEffect)(function(){a(e)},[e]),[n,a]}(s),B=Object(_.a)(V,2),F=B[0],U=B[1];Object(x.useEffect)(function(){b!==N.EffectChoiceKey.DesignerEffects||S||R({effectKeyToPrefetch:N.EffectChoiceKey.DesignerEffects,effectOptionsToPrefetch:C})},[]);var G=Object(x.useCallback)(function(){i({effectSettings:{effectKey:b,effectSrc:y.Src,allSrcs:S,effectOptions:C},cropSettings:F})},[i,F,b,y,S,C]),z=Object(x.useCallback)(function(){a()},[a]),W=function(e,t){var i="Edit image",n=null;return t&&Me[t]&&(i=Me[t],n=e.getString("Choose how your image will look with this ad placement.")),[e.getString(i),n]}(f,r&&r.Type),q=W[1],$=Object(O.useDefaultStyles)(function(){return Te(q)});q&&(q=k.a.createElement("div",{className:"panel-sub-title"},W[1],k.a.createElement("hr",{className:$.subTitleDivider})));var K=Object(x.useCallback)(function(){var e=j.type,t=j.text;return k.a.createElement(k.a.Fragment,null,t&&k.a.createElement(E.MessageBar,{messageBarType:e,onDismiss:function(){return L()}},t),k.a.createElement("div",{className:$.actionBtnContainer},k.a.createElement(E.PrimaryButton,{disabled:w,onClick:G},f.getString("Apply")),k.a.createElement(E.DefaultButton,{onClick:z},f.getString("Cancel"))))},[j,L,$.actionBtnContainer,w,G,z,f]),J=function(e){var t=e.i18n;return[{text:t.getString("Smart effects"),itemKey:Ie},{text:t.getString("Crop"),itemKey:Oe}]}({i18n:f});return k.a.createElement(E.Panel,{className:"media-editor-container",headerText:W[0],isOpen:t,onDismiss:a,type:E.PanelType.custom,customWidth:668,closeButtonAriaLabel:f.getString("Close"),onRenderFooterContent:K,isFooterAtBottom:!0,styles:c.a.pick(Te(q),"footer","commands"),layerProps:{eventBubblingEnabled:!0}},q,k.a.createElement(Ee,{items:J,selectedKey:h,onClick:m}),h===Ie?k.a.createElement(ye,{loading:w,baseImage:y,cropSettings:F,onEffectChange:function(e,t){return A(t.key)},onDesignerChange:function(e,t){T(t.key)},onColorPickerChange:function(e){P(e)},allEffectSrcs:S,selectedEffectKey:b,unavailableEffectsConfig:D,effectOptions:C,onBlurChange:M,isAdCreatorEnhancementsEnabled:u}):k.a.createElement(H,{baseImage:y,cropSettings:F,onCropSettingsChanged:function(e){U(e)},minCropSize:l,maxCropBox:d,aspectRatioConfig:g}))};je.defaultProps={isOpen:!1,baseImage:null,cropSettings:null,effectSettings:null,maxCropBox:null,isAdCreatorEnhancementsEnabled:!1,aspectRatioConfig:null};var Le=function(e){var t,i=e.baseImage,a=e.isOpen,r=Object(x.useState)(Pe),o=Object(_.a)(r,2),s=o[0],l=o[1],d=function(e){var t=Object(x.useState)(e),i=Object(_.a)(t,2),a=i[0],r=i[1],o={isNewImage:!1,isNewPlacement:!1};return e&&(c.a.propertyOf(a)("Src")!==e.Src&&(o=Object(n.a)({},o,{isNewImage:!0})),c.a.propertyOf(a)("Type")!==e.Type&&(o=Object(n.a)({},o,{isNewPlacement:!0}))),(o.isNewImage||o.isNewPlacement)&&r(e),o}(i),u=d.isNewImage,p=d.isNewPlacement;return(u||p)&&(l(Pe),t=c.a.uniqueId("media-editor-key")),a?k.a.createElement(je,Object.assign({key:t,selectedPivotItemKey:s,onPivotSelectionChange:l},e)):null};Le.defaultProps={isOpen:!1,baseImage:null};var De=i("Vpbc"),Re=i("kwR5"),Ne=i("amAB"),Ve=i("B7du"),Be=i("mKJd"),Fe=i("aDGu"),Ue=i("Cle3"),Ge=i("eiR/"),ze=i("sPMD"),He={ShutterStock:"ShutterStock"},We=function(e){var t=e.children,i=e.itemHeight,n=e.image,a=e.isSelected,r=i,o=Math.round(n.width*r/n.height),s={maxHeight:r,height:r,width:o/r>1.6?1.6*r:o,overflow:"hidden",margin:"5px",border:a?"2px solid #0078D4":"none"};return k.a.createElement("div",{style:s,className:"stock-image-wrapper"},t)};We.defaultProps={isSelected:!1};var qe=We,$e=i("pMvo"),Ke=function(e){function t(e){var i,n=e.imageWidth,r=e.imageHeight,o=e.minWidth,s=e.minHeight;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,"SizeValidationError"))).imageWidthInternal=n,i.imageHeightInternal=r,i.minWidthInternal=o,i.minHeightInternal=s,i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"imageWidth",get:function(){return this.imageWidthInternal}},{key:"imageHeight",get:function(){return this.imageHeightInternal}},{key:"minWidth",get:function(){return this.minWidthInternal}},{key:"minHeight",get:function(){return this.minHeightInternal}}]),t}(Object($e.a)(Error)),Je=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=p.getMinimumSizeForImage(i,n);return e<a[0]||t<a[1]?new Ke({imageWidth:e,imageHeight:t,minWidth:a[0],minHeight:a[1]}):null},Ze=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Image,a=null,r=null,o=new s.a(function(e,t){a=e,r=t});return n.src=e,n.onload=function(){var e=p.getMinimumSizeForImage(t,i);n.naturalWidth<e[0]||n.naturalHeight<e[1]?r(new Ke({imageWidth:n.naturalWidth,imageHeight:n.naturalHeight,minWidth:e[0],minHeight:e[1]})):a()},o},Ye=function(e){var t=e.originalImageToCrop,i=e.aspectRatios,n=e.maxCropBox,a=n?n.SourceWidth:t.Width,r=n?n.SourceHeight:t.Height,o=a/r,s=p.getDefaultRatio(a,r,i);return c.a.map(i,function(e){var i={id:t.Id,idString:t.IdString,src:t.Src,width:t.Width,height:t.Height,text:t.Text,source:t.source},a=c.a.defaults({},n||{SourceWidth:t.Width,SourceHeight:t.Height,SourceX:0,SourceY:0});if(Math.abs(o-e.aspectRatio)>.01)if(e.aspectRatio<=o){var r=Math.round(a.SourceHeight*e.aspectRatio),l=Math.round((a.SourceWidth-r)/2)+a.SourceX;a.SourceWidth=r,a.SourceX=l}else{var d=Math.round(a.SourceWidth/e.aspectRatio),u=Math.round((a.SourceHeight-d)/2)+a.SourceY;a.SourceHeight=d,a.SourceY=u}return i.cropSettings=a,i.type=e.type,i.isIncluded=e.aspectRatio===c.a.result(s,"aspectRatio"),new g(i)})},Qe=function(e){var t=e.originalImageToCrop,i=e.isMultimediaAd,n=void 0!==i&&i,a=e.isMultimediaAdinMSANEnabled,r=e.maxCropBox,o=n?p.getMmaAspectRatios():p.aspectRatios;a&&(o=c.a.pick(o,p.multimediaAdinMSANRatios));var s=Ye({originalImageToCrop:t,aspectRatios:o,maxCropBox:r});return a&&s.forEach(function(e){e.setIncluded(!0),e.setAutoCropping(!0)}),s};var Xe=function(e,t,i){var n=p.getMmaAspectRatios(),a=p.getDefaultRatio(t.Width,t.Height,n),r=c.a.map(n,function(e){return{aspectRatio:e.aspectRatio,type:e.type,associationType:e.associationType,stringKey:e.stringKey,previewTypeStringKey:e.previewTypeStringKey,imagePreviewHeight:e.imagePreviewHeight,minSize:e.minSize,previewSettings:e.previewSettings}});return e.generateSmartCrop({imageUrl:t.Src,placementSettings:r}).then(function(e){var r={},o=c.a.compact(c.a.map(e,function(e){var o={id:t.Id,idString:t.IdString,src:t.Src,width:t.width,height:t.height,source:t.source},s={SourceWidth:e.Width,SourceHeight:e.Height,SourceX:e.X,SourceY:e.Y};o.cropSettings=s;var l=Object(N.convertAspectRatioToDecimal)(e.AspectRatio),d=c.a.find(n,function(e){return e.aspectRatio.toString()===l}),u=c.a.propertyOf(d)("minSize")||[];return o.type=c.a.propertyOf(d)("type"),o.isIncluded=a&&l===c.a.result(a,"aspectRatio").toString(),function(e){var t=e.originalImage,i=e.cropSettings,n=e.minWidth,a=e.minHeight,r=e.aspectRatio,o=e.smartCropActivity;return t.width<i.SourceWidth?(o.trace("Smart crop provided invalid cropsettings for ".concat(r," originalWidth:").concat(t.width," smartCropWidth:").concat(i.SourceWidth," imageSrc:").concat(t.Src)),!1):t.height<i.SourceHeight?(o.trace("Smart crop provided invalid cropsettings for ".concat(r," originalHeight:").concat(t.height," smartCropHeight:").concat(i.SourceHeight," imageSrc:").concat(t.Src)),!1):i.SourceHeight<0?(o.trace("Smart crop provided invalid SourceHeight ".concat(i.SourceHeight," imageSrc:").concat(t.Src)),!1):i.SourceWidth<0?(o.trace("Smart crop provided invalid SourceWidth ".concat(i.SourceWidth," imageSrc:").concat(t.Src)),!1):i.SourceX<0?(o.trace("Smart crop provided invalid X ".concat(i.SourceX," imageSrc:").concat(t.Src)),!1):i.SourceY<0?(o.trace("Smart crop provided invalid Y ".concat(i.SourceY," imageSrc:").concat(t.Src)),!1):i.SourceX+i.SourceWidth>t.width?(o.trace("Smart crop dimensions exceed width of image: CropX: ".concat(i.SourceX," CropWidth: ").concat(i.SourceWidth," ImageWidth: ").concat(t.width," imageSrc:").concat(t.Src)),!1):i.SourceY+i.SourceHeight>t.height?(o.trace("Smart crop dimensions exceed height of image: CropY ".concat(i.SourceY," CropHeight: ").concat(i.SourceHeight," ImageWidth: ").concat(t.height," imageSrc:").concat(t.Src)),!1):n&&n>i.SourceWidth?(o.trace("Smart crop width does not meet minWidth: CropWidth: ".concat(i.SourceWidth," MinWidth: ").concat(n," imageSrc:").concat(t.Src)),!1):!(a&&a>i.SourceHeight)||(o.trace("Smart crop height does not meet minHeight: CropHeight: ".concat(i.SourceHeight," MinHeight: ").concat(a," imageSrc:").concat(t.Src)),!1)}({cropSettings:s,originalImage:t,aspectRatio:c.a.propertyOf(d)("aspectRatio"),minWidth:2===u.length&&u[0],minHeight:2===u.length&&u[1],smartCropActivity:i})?(r[o.type]=!0,new g(o)):null}));if(o.length<Object.keys(n).length){var s=c.a.pick(n,function(e){var t=e.type;return!r[t]}),l=Ye({originalImageToCrop:t,aspectRatios:s});return o.concat(l)}return o})},et=i("UP37"),tt=function(){function e(t){var i=t.cid,n=t.aid,r=t.oDataConfig,o=t.controller;Object(a.a)(this,e),this.cid=i,this.aid=n,this.path=r.odataPath,this.controller=o||"Images",this.oDataConfig={oDataToken:r.odataToken,oDataTokenType:r.oDataTokenType,applicationName:r.applicationName},this.odata=et.odata}return Object(r.a)(e,[{key:"getStockImages",value:function(e){var t=c.a.defaults(e,{top:20,skip:0,customQueries:{}}),i="".concat(this.path,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/").concat(this.controller),n=c.a.extend({$top:t.top,$skip:t.skip},t.customQueries);return this.odata.get(i,c.a.extend({data:n},this.oDataConfig))}},{key:"saveStockImage",value:function(e){var t=e.stockImageId,i=e.stockImageVendorId,n="".concat(this.path,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/").concat(this.controller);return this.odata.post(n,c.a.extend({data:{Id:t.toString(),StockImageVendor:i}},this.oDataConfig))}},{key:"saveUserImage",value:function(e){var t=e.stockImageId,i=e.stockImageVendorId,n="".concat(this.path,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/").concat(this.controller);return this.odata.post(n,c.a.extend({data:{Id:t.toString(),StockImageVendor:i}},this.oDataConfig))}}]),e}(),it=function(){function e(t){Object(a.a)(this,e),this.currentData=[],this.currentQuery="",this.hasMore=!1,this.odataService=new tt({cid:t.cid,aid:t.aid,oDataConfig:t.oDataConfig,customParams:t.customParams,controller:t.controller,top:20,skip:0}),this.filter=t.filter,this.filterQuery={},this.pageSize=20,this.isMultimediaAd=t.isMultimediaAd||!1}return Object(r.a)(e,[{key:"subscribe",value:function(e){this.callback=e}},{key:"unsubscribe",value:function(){this.callback=null}},{key:"excuteCallBackIfExsit",value:function(e){this.callback&&this.callback(e)}},{key:"loadMore",value:function(){return this.currentStart=this.currentStart+this.pageSize,this.searchInternalAsync()}},{key:"reset",value:function(){this.currentData=[],this.excuteCallBackIfExsit(ze.DataSourceState.Done)}},{key:"updateFilterQuery",value:function(e){this.filterQuery=e,this.currentQuery&&!c.a.isEmpty(this.currentQuery.trim())&&(this.reset(),this.searchInternalAsync())}},{key:"searchAsync",value:function(e){return this.reset(),!e||c.a.isEmpty(e.trim())?s.a.resolve():(this.currentQuery=e,this.currentStart=0,this.searchInternalAsync())}},{key:"searchInternalAsync",value:function(){var e=this;this.excuteCallBackIfExsit(ze.DataSourceState.Loading);var t=c.a.get(window,["globalLegacyI18n","context","culture"]);return this.odataService.getStockImages({customQueries:c.a.extend({appName:"CampaignUI",$search:this.currentQuery,$skip:this.currentStart,$top:this.pageSize,language:t,includevertical:this.isMultimediaAd},this.filterQuery)}).then(function(t){e.hasMore=t["@odata.count"]>t.value.length+e.currentStart;var i=c.a.filter(t.value,e.filter),n=c.a.map(i,function(e){return{id:parseInt(e.Id,10),src:e.Thumbnail.Url,width:e.Thumbnail.Dimensions.Width,height:e.Thumbnail.Dimensions.Height,altText:e.Description||"",textFields:[]}});e.currentData=e.currentData.concat(n)}).catch(function(e){throw e}).finally(function(){e.excuteCallBackIfExsit(ze.DataSourceState.Done)})}},{key:"SaveAsync",value:function(e){return this.odataService.saveStockImage(e)}},{key:"getData",value:function(){return{hasMore:this.hasMore,data:this.currentData}}}]),e}(),nt=function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new it({cid:e,aid:t,oDataConfig:i,controller:"StockImages",top:20,skip:0,isMultimediaAd:a,filter:function(e){var t=e.Preview.Dimensions,i=t.Width,a=t.Height;return null===Je(i,a,n)}})},at=i("SfTZ"),rt=function(){function e(t,i,n){Object(a.a)(this,e),this.imageOData=new at.a(t,i,n)}return Object(r.a)(e,[{key:"getExistingImages",value:function(e){var t=e.sortById,i=e.searchTerm,n=e.pageNumber,a=e.pageSize,r=c.a.find(p.sortBySelections,function(e){return e.id===t}),o=r&&r.query;return this.imageOData.getExistingImages({sortQuery:o,searchTerm:i,pageNumber:n,pageSize:a})}},{key:"getImageByIdAsync",value:function(e){return this.imageOData.getImageByIdAsync(e)}},{key:"uploadImageAsync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.imageOData.uploadImageAsync(e,t)}},{key:"updateImageAsync",value:function(e){return this.imageOData.updateImageAsync(e)}},{key:"deleteImageAsync",value:function(e){return this.imageOData.deleteImageAsync(e)}},{key:"bulkSaveImagesByUrl",value:function(e){return this.imageOData.bulkSaveImagesByUrl(e)}}]),e}(),ot=function(){return k.a.createElement("div",{className:"loadImage",style:{width:"50px",height:"50px",border:"2px solid",animation:"spinner 1s linear infinite",marginRight:"9px",borderRadius:"50%",borderTopColor:"#c7e0f4",borderLeftColor:"#0078d4",borderRightColor:"#c7e0f4",borderBottomColor:"#c7e0f4",margin:"60px auto"}})},st=180,lt=function(e){function t(){var e,i;Object(a.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=Object(S.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).onLoadMore=function(){i.props.stockPhotoDataSource.loadMore()},i.onStockImageSelected=function(e){var t=Object(_.a)(e,1)[0].id,n=i.props,a=n.showUiBlocker,r=n.imageRepository,o=n.showErrors,l=n.onSelectedImagesSet,d=n.i18n,u=n.stockPhotoDataSource,g=n.isMultimediaAd,m=n.isAdCreatorV1Enabled,f=n.mediaRepository,v=n.isMultimediaAdinMSANEnabled,b=n.isChooseThumbnail,y=n.perfMarker;y.willInit(),a(!0),u.SaveAsync({stockImageId:t,stockImageVendorId:He.ShutterStock}).then(function(e){var t=e.value;return r.getImageByIdAsync(t)}).then(function(e){var t=h(c.a.extend(e,{source:p.imageSources.Stock})),n=Je(t.Width,t.Height);if(n)throw n;if(b)return s.a.resolve(e);if(m)return Xe(f,t,i.props.smartCropActivity);var a=Qe({originalImageToCrop:t,isMultimediaAdinMSANEnabled:v,isMultimediaAd:g});return s.a.resolve(a)}).then(function(e){return l(e)}).catch(function(e){if(!(e instanceof Ke))throw e;o([d.getString("ImageExperience_SizeValidationFailTemplate",{width:e.minWidth,height:e.minHeight})])}).finally(function(){y.done(),a(!1)})},i.bingLoadingImage=function(){var e=i.props,t=e.staticImagePath;if(e.isForVNext)return k.a.createElement(ot,null);var n="".concat(t,"Loader_Grey_30x30.gif");return k.a.createElement("div",{style:{backgroundColor:"white",width:"100%",height:"100%"}},k.a.createElement("img",{alt:"loading",src:n,style:{marginTop:(st-30)/2}}))},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.staticImagePath,i=e.stockPhotoDataSource,n=e.i18n;return k.a.createElement("div",{className:"stock-image-picker-container"},k.a.createElement(ze.ImagePickerContainer,{i18n:n,dataSource:i,isMultiSelection:!1,onLoadMore:this.onLoadMore,onSelectionChanged:this.onStockImageSelected,isAutoLoadMore:!0,isLazyLoadEnabled:!0,maximizeFrame:!0,itemHeight:st,imagePlaceHolder:this.bingLoadingImage,imageListItemWrapper:qe,staticImagePath:t,useBingAdsLoader:!0}))}}]),t}(k.a.PureComponent);lt.defaultProps={showErrors:{},showUiBlocker:{},staticImagePath:"",isForVNext:!1,isMultimediaAd:!1,isAdCreatorV1Enabled:!1,isMultimediaAdinMSANEnabled:!1,isChooseThumbnail:!1,mediaRepository:null,smartCropActivity:{trace:c.a.noop}};var ct=lt,dt=i("SjL2"),ut=i("O5L4"),pt=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onValidate=function(e){i.setState({isValid:e.isValid})},i.state={isValid:!0},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return k.a.createElement("div",{className:"image-name-container"},k.a.createElement(ut.ValidatedInput,{className:"image-name-input",value:this.props.value,onChange:this.props.onChanged,validationProps:{schema:{properties:{Text:{type:"string",maxLength:512}}},field:"Text",i18n:this.props.i18n,onValidate:this.onValidate},id:"image-name-field",ariaLabel:this.props.i18n.getString("ImageExperience_Edit_Image_Name")}),k.a.createElement(dt.Button,{onClick:this.props.onSave,disabled:!this.state.isValid},this.props.i18n.getString("Audience_Campaign_Save_Label")),k.a.createElement(dt.Button,{onClick:this.props.onCancel},this.props.i18n.getString("Audience_Campaign_Cancel_Label")))}}]),t}(k.a.PureComponent);pt.defaultProps={value:""};var gt=function(e){var t=e.i18n,i=e.isForVNext,n=e.onUserImageDelete,a=e.onUserImageEdit,r=e.isAdCreatorV1Enabled,o=function(e){var o=e.children,s=e.itemHeight,l=e.image,c=e.isSelected,d=Object(x.useState)(!1),u=Object(_.a)(d,2),p=u[0],g=u[1],h=Object(x.useState)(l.textFields[0]),m=Object(_.a)(h,1)[0],f=Object(x.useState)(""),v=Object(_.a)(f,2),b=v[0],y=v[1],S=s,w=Math.round(l.width*S/l.height),C={maxHeight:S+30,height:S+30,width:(w/S>1.6?1.6*S:w)+4,position:"relative",overflow:"visible",margin:"5px"};return k.a.createElement("div",{style:C,className:"existing-image-container"},k.a.createElement("div",{className:"image-section-wrapper",style:{overflow:"hidden"}},k.a.createElement("div",{className:"image-section"},k.a.createElement("div",{className:"image-content-wrap","data-imageid":l.idString,style:{border:c?"2px solid #0078D4":"none"}},o),!i&&k.a.createElement("div",{className:"image-dimensions"},"".concat(l.width," x ").concat(l.height)),!i&&k.a.createElement("button",{id:l.idString,className:"image-edit glyphicon glyphicon-pencil",onClick:function(){y(m),g(!0)},"aria-label":t.getString("ImageExperience_Edit_Image_Name")}),k.a.createElement("button",{id:l.idString,"data-imageid":l.idString,className:M()("image-delete glyphicon glyphicon-remove",r?"circular-hover":""),onClick:function(e){var t=e.currentTarget.id;return n(t)},"aria-label":t.getString("ImageExperience_Remove_Image")}))),!p&&k.a.createElement("div",{className:"image-name-section"},k.a.createElement("span",{className:"image-name"},m),i&&k.a.createElement("button",{id:l.idString,className:"image-edit glyphicon glyphicon-pencil",onClick:function(){y(m),g(!0)},"aria-label":t.getString("ImageExperience_Edit_Image_Name")})),p&&k.a.createElement(re.FocusLock,{focusFirstItemOnMount:!0,isControlledFocusLock:!0,isFocusLock:p,onExit:function(){return g(!1)}},k.a.createElement(pt,{id:l.idString,value:b,i18n:t,onChanged:function(e){return y(e.target.value)},onSave:function(){var e;e=l.idString,a(e,b),g(!1)},onCancel:function(){return g(!1)}})))};return o.defaultProps={isSelected:!1},o},ht=function(){function e(t){Object(a.a)(this,e),this.currentData=[],this.hasMore=!1,this.sortById=t.sortById,this.imageRepository=t.imageRepository,this.pageSize=20}return Object(r.a)(e,[{key:"subscribe",value:function(e){this.callback=e}},{key:"unsubscribe",value:function(){this.callback=null}},{key:"excuteCallBackIfExsit",value:function(e){this.callback&&this.callback(e)}},{key:"loadMore",value:function(){return this.currentPage+=1,this.fetchImageAsync()}},{key:"reload",value:function(){return this.currentData=[],this.currentPage=0,this.excuteCallBackIfExsit(ze.DataSourceState.Done),this.fetchImageAsync()}},{key:"searchAsync",value:function(e,t){return this.currentData=[],this.excuteCallBackIfExsit(ze.DataSourceState.Done),this.currentSearchTerm=null===e?"":e,this.sortById=t||this.sortById,this.currentPage=0,this.fetchImageAsync()}},{key:"fetchImageAsync",value:function(){var e=this;this.excuteCallBackIfExsit(ze.DataSourceState.Loading),this.imageRepository.getExistingImages({sortById:this.sortById,searchTerm:this.currentSearchTerm,pageNumber:this.currentPage,pageSize:p.pageSize}).then(function(t){e.hasMore=t["@odata.count"]>t.value.length+e.currentData.length;var i=c.a.map(t.value,function(e){var t=e.Url.indexOf("http")>=0?"".concat(e.Url).concat(e.Url.indexOf("?")<0?"?":"","&h=180"):e.Url;return{id:parseInt(e.Id,10),idString:e.IdString,src:t,width:e.Width,height:e.Height,altText:e.Description||"",textFields:[e.Text],baseIdString:e.BaseIdString,metadata:e.Metadata}});e.currentData=e.currentData.concat(i)}).finally(function(){e.excuteCallBackIfExsit(ze.DataSourceState.Done)})}},{key:"getData",value:function(){return{hasMore:this.hasMore,data:this.currentData}}}]),e}(),mt=function(e){var t=e.imageType,i=e.imageRepository;return new ht({imageRepository:i,imageType:t,sortById:1,filter:function(){return!0}})},ft=function(e){var t=e.i18n,i=e.userPhotoDataSource,a=e.staticImagePath,r=e.onImageSelected,o=e.imageRepository,l=e.showUiBlocker,d=e.showErrors,u=e.isLazyLoadEnabled,p=e.isForVNext,g=e.imageList,h=e.isAdCreatorEnhancementsEnabled,m=e.isAdCreatorV1Enabled,f=e.isMultimediaAd,v=gt({i18n:t,isForVNext:p,onUserImageDelete:function(e){return confirm(t.getString("ImageExperience_Image_Delete_Confirm"))?f&&g.find(function(t){return t.find(function(t){return t.idString===e})})?(d([t.getString("ImageExperience_Multimedia_Delete_Error_UseInDraft")]),s.a.resolve(!1)):g.find(function(t){return t.IdString===e})?(d([t.getString("ImageExperience_Media_Delete_Error_UseInDraft")]),s.a.resolve(!1)):(l(!0),d([]),o.deleteImageAsync({IdString:e}).then(function(){return i.reload()}).catch(function(e){d(c.a.map(e.errors,function(e){return t.getString("Error_ImageValidation_".concat(e.Code))}))}).finally(function(){l(!1)})):s.a.resolve(!1)},onUserImageEdit:function(e,t){return l(!0),d([]),o.updateImageAsync({Id:e,Text:t}).then(function(){return i.reload()}).finally(function(){l(!1)})},isAdCreatorV1Enabled:m});return k.a.createElement("div",{className:"user-image-picker-container"},k.a.createElement(ze.ImagePickerContainer,{i18n:t,className:"existing-images",dataSource:i,isMultiSelection:!1,onLoadMore:function(){i.loadMore()},onSelectionChanged:function(e){var t,a=e[0],l=c.a.extend({Id:a.id,IdString:a.idString,Height:a.height,Width:a.width,Text:a.textFields[0],Url:a.src.replace("&h=180","")},h&&{BaseIdString:a.baseIdString,Metadata:a.metadata});if(h&&a.baseIdString&&a.baseIdString!==a.id){var d=i.getData().data,u=c.a.find(d,function(e){return e.id===a.baseIdString});return u?(t=u.src.replace("&h=180",""),s.a.resolve(r(Object(n.a)({},l,{OriginalUrl:t})))):o.getImageByIdAsync(a.baseIdString).then(function(e){var t=e.Url;return r(Object(n.a)({},l,{OriginalUrl:t}))})}return s.a.resolve(r(l))},isAutoLoadMore:!0,isLazyLoadEnabled:u,maximizeFrame:!0,itemHeight:180,imageListItemWrapper:v,imagePlaceHolder:function(){if(p)return k.a.createElement(ot,null);var e="".concat(a,"Loader_Grey_30x30.gif");return k.a.createElement("div",{style:{backgroundColor:"white",width:"100%",height:"100%"}},k.a.createElement("img",{alt:"loading",src:e,style:{marginTop:75}}))},staticImagePath:a,useBingAdsLoader:!0}))};ft.defaultProps={showErrors:c.a.noop,showUiBlocker:c.a.noop,staticImagePath:"",isForVNext:!1,imageList:[],isAdCreatorEnhancementsEnabled:!1,isAdCreatorV1Enabled:!1,isMultimediaAd:!1};var vt=ft,bt=function(e){var t=e.children,i=e.itemHeight,n=Object(O.useDefaultStyles)(function(e){var t=e.itemHeight;return function(){return{container:{minWidth:180,maxHeight:t,height:t,margin:"5px",maxWidth:1.6*t,overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center","& img":{maxHeight:t}}}}}({itemHeight:i}));return k.a.createElement("div",{className:n.container},t)},yt=function(e){return!0===e.emptyURL},St=function(){return k.a.createElement(ot,null)},wt=function(e){var t=e.suggestion,i=e.dataSource,n=e.i18n,a=e.onImageSelectedByUrl,r=e.onUpdateSubdomainUrl,o=e.finalUrlDomain,s=e.logger,l=e.enableSubdomain,d=e.blockImagePickerOnly,u=function(e,t){var i="";return e?yt(e)?i=t.getString("ImageExperience_EmptyURL"):!0===e.invalidURL?i=t.getString("ImageExperience_InvalidURL"):!0===e.inProgress?i=t.getString("ImageExperience_InProgress"):!0===e.isTimeout?i=t.getString("ImageExperience_Timeout"):e.images&&!c.a.isEmpty(e.images)||(i=t.getString("ImageExperience_NoSuggestion")):i=t.getString("ImageExperience_NoSuggestion"),i}(t,n),p=Object(x.useState)(""),g=Object(_.a)(p,2),h=g[0],m=g[1];return Object(x.useEffect)(function(){if(t&&!c.a.isEmpty(t.images)){var e=t.hasMore,n=t.images.map(function(e){var t=e.fullUrl;return{src:e.thumbnailUrl,fullSrc:t,id:parseInt(c.a.uniqueId(),10)}});i.reload(n,e)}else i.reload([])},[t,i]),k.a.createElement("div",{className:"image-suggestion-picker-container"},k.a.createElement(q.UiBlocker,{blocking:t&&!0===t.inProgress,loadingText:u},(!t||!t.inProgress)&&u&&k.a.createElement("div",{className:"alert alert-info",style:{margin:"3px 0"}},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},u)),t&&t.images&&!c.a.isEmpty(t.images)&&k.a.createElement("div",{className:"found-image-message"},n.getString("ImageExperience_ImageSuggestion_ImagesFound")),!c.a.isEmpty(t)&&!yt(t)&&l&&k.a.createElement("div",{className:"subdomain-fields"},k.a.createElement(E.TextField,{disabled:!0,className:"final-url",value:o,styles:{root:{display:"inline-block",width:260},field:{paddingRight:8,paddingLeft:32}},iconProps:{iconName:"Search",styles:{root:{left:8,right:0}}}}),k.a.createElement("div",{className:"divider"},"/"),k.a.createElement(E.TextField,{className:"subdomain",placeholder:n.getString("ImageExperience_ImageSuggestion_Subdomain_Placeholder"),onBlur:function(e){return function(e,t,i,n){var a=e&&e.target&&e.target.value;a&&a!==t&&(n(a),i(a))}(e,h,m,r)},disabled:d,styles:{root:{display:"inline-block",width:260}}})),k.a.createElement(q.UiBlocker,{blocking:d,loadingText:n.getString("ImageExperience_InProgress")},k.a.createElement(ze.ImagePickerContainer,{dataSource:i,isMultiSelection:!1,onLoadMore:function(){i.loadMore()},isAutoLoadMore:!0,onSelectionChanged:function(e,t){var i=Object(_.a)(e,1)[0].fullSrc;a(i);c.a.isNull(t)||c.a.isUndefined(t)?s.trace("UserSelectedWebsiteSuggestionImage"):s.trace("".concat("UserSelectedWebsiteSuggestionImage",": ").concat(t,";"))},i18n:n,isLazyLoadEnabled:!0,maximizeFrame:!0,itemHeight:180,imagePlaceHolder:St,imageListItemWrapper:bt,maximumItemCount:2e3}))))};wt.defaultProps={suggestion:{},enableSubdomain:!1,blockImagePickerOnly:!1,finalUrlDomain:null};var Ct=wt,xt=function(e){function t(){return Object(a.a)(this,t),Object(S.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.props.isModalOpen?k.a.createElement("div",{className:"modal-container ".concat(this.props.className)},k.a.createElement("div",{className:"modal-content"},this.props.children)):null}}]),t}(k.a.PureComponent);xt.defaultProps={isModalOpen:!1,className:""};var kt=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onDragOver=function(e){e.preventDefault(),e.stopPropagation(),i.state.isDraging||i.handleDraging(!0)},i.onDrop=function(e){var t=i.props.onReadFile;e.preventDefault(),e.stopPropagation();for(var n=e.dataTransfer.files,a=[],r=0;r<n.length;r+=1){var o=n[r];i.validateExtension(o)&&a.push(o)}a.length>0&&t(a),i.handleDraging(!1)},i.onDragLeave=function(e){e.preventDefault(),e.stopPropagation(),i.state.isDraging&&i.handleDraging(!1)},i.handleDraging=function(e){var t=i.props.dragging;t&&t(e),i.setState({isDraging:e})},i.validateExtension=function(e){var t=i.props,n=t.allowedFileExtension,a=t.onInvalidExtension,r=e.type.split("/").pop(),o=".".concat(r);return-1!==n.indexOf(o)||(a(),!1)},i.state={isDraging:!1},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.state.isDraging,t=this.props,i=t.label,n=t.description,a=t.dropDescription,r=t.classes,o=t.i18n;return k.a.createElement("div",{className:M()(r.fileDragWrapper,"file-drag-wrapper"),"aria-label":o.getString("ImageExperience_Drag_File_Description"),onDragOver:this.onDragOver,onDrop:this.onDrop,onDragLeave:this.onDragLeave},e?k.a.createElement("div",{className:M()(r.fileSelectedWrapper)},k.a.createElement("div",{className:M()(r.fileSelectedIcon)},k.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",fill:"#0078D4"},k.a.createElement("path",{d:"M960 0q133 0 255 34t230 96 194 150 150 195 97 229 34 256q0 133-34 255t-96 230-150 194-195 150-229 97-256 34q-133 0-255-34t-230-96-194-150-150-195-97-229T0 960q0-133 34-255t96-230 150-194 195-150 229-97T960 0zm0 1792q115 0 221-30t198-84 169-130 130-168 84-199 30-221q0-115-30-221t-84-198-130-169-168-130-199-84-221-30q-115 0-221 30t-198 84-169 130-130 168-84 199-30 221q0 115 30 221t84 198 130 169 168 130 199 84 221 30zm0-1311l430 434-92 90-274-278v681H896V727l-274 278-92-90 430-434z"}))),a&&k.a.createElement("div",{className:M()(r.fileSelectedText)},a)):k.a.createElement("div",{className:M()(r.fileDefaultWrapper)},k.a.createElement("div",{className:M()(r.fileUploadIcon)},k.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",fill:"#A19F9D"},k.a.createElement("path",{d:"M1955 1533l-163-162v677h-128v-677l-163 162-90-90 317-317 317 317-90 90zM256 1920h1280v128H128V0h1115l549 549v475h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293z"}))),i&&k.a.createElement("div",{className:M()(r.fileUploadText)},i),n&&k.a.createElement("div",{className:M()(r.fileUploadTip)},n)))}}]),t}(k.a.PureComponent);kt.defaultProps={label:"",description:"",dropDescription:"",dragging:function(){}};var At=Object(O.withDefaultStyles)(kt,function(e,t){var i=t.palette,n=void 0===i?{}:i;return{fileDragWrapper:{width:"100%",height:"190px"},fileDefaultWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",border:"1px dashed #BBB",borderRadius:"12px"},fileUploadIcon:{width:"28px",height:"28px"},fileUploadText:{marginTop:"8px",fontFamily:"Segoe UI",fontSize:"14px",lineHeight:"16px",color:"#484644"},fileUploadTip:{marginTop:"8px",fontFamily:"Segoe UI",fontSize:"12px",lineHeight:"14px",color:n.neutralSecondary},fileSelectedWrapper:{width:"100%",height:"100%",background:"rgba(239, 246, 252, 0.5)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px dashed #005A9E",borderRadius:"12px"},fileSelectedIcon:{width:"36px",height:"36px",pointerEvents:"none",color:n.blue},fileSelectedText:{marginTop:"8px",fontFamily:"Segoe UI",fontSize:"14px",lineHeight:"16px",color:"#484644",pointerEvents:"none"}}}),Tt=i("QKu0"),_t=i("N8IT"),Et=function(e){return new s.a(function(t,i){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=i,n.readAsDataURL(e)})},It=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).getErrorMessage=function(e,t){var n=i.props,a=n.i18n;return n.isVideo?a.getString("ImageExperience_Video_FileSize_Too_Big_Template",{maximumFileSize:t/1e3}):a.getString("ImageExperience_FileSize_Too_Big_Template",{fileSize:e,maximumFileSize:t})},i.showExtensionError=function(){var e=i.props,t=e.isVideo,n=e.i18n;(0,e.showErrors)([k.a.createElement("span",null,n.getString("ImageExperience_Error_MediaFormatNotSupported"),k.a.createElement(Ve.f,{linkText:n.getString(t?"ImageExperience_BestPracticeHelp_Video":"ImageExperience_BestPracticeHelp"),topic:t?"app54794":"app54718"}))])},i.readFile=function(e){var t=i.props,n=t.onFileRead,a=t.showErrors,r=t.isVideo,o=r?1e4:50,l=!c.a.isUndefined(e)&&e.length>0?e:i.filePicker.fileObjects;if(l){var d,u=l.length,p=[],g=[];for(d=0;d<u;d+=1){var h=l[d],m=(h.size/1024/1024).toFixed(3);if(m>o){g.push(i.getErrorMessage(m,o));break}r||p.push(Et(h))}if(c.a.isEmpty(g)){if(!r)return s.a.all(p).then(n);n(i.filePicker.fileObject)}else a(g)}return""},i.handleDraging=function(e){i.setState({isFileDraging:e})};var n=e.i18n,r=e.isVideo,o=e.enableMultiple;i.allowedImageExtension=[".png",".jpg",".jpeg",".gif"],i.allowedVideoExtension=[".flv",".mxf",".gxf",".ts",".ps",".3gp",".3gpp",".mpg",".wmv",".asf",".avi",".mp4",".m4a",".m4v",".isma",".ismv",".dvr-ms",".mkv",".wav",".mov"];var l={allowedFileExtensions:r?i.allowedVideoExtension:i.allowedImageExtension,i18n:n,isNative:!1,displayFilePath:"filename",enableMultiple:o};return i.filePicker=new Tt.FilePicker(l),i.filePicker.on("validated",i.readFile),i.filePicker.on("error.extension",function(){i.showExtensionError()}),i.filePicker.render(),i.filePicker.$(".remove-file").remove(),i.filePicker.$(".file-text").hide(),i.state={isFileDraging:!1},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.i18n,i=e.isVideo,n=e.enableDrag,a=e.minimumSize,r=e.hideDescription,o=this.state.isFileDraging,s=i?this.allowedVideoExtension:this.allowedImageExtension,l="";return!c.a.isUndefined(a)&&c.a.isArray(a)&&a.length>1&&(l=t.getString("ImageExperience_Drag_File_Minimum_Size_Tip",{width:a[0],height:a[1]})),k.a.createElement("div",{className:"file-picker-container"},!i&&!r&&k.a.createElement("div",{className:"choose-file-description"},t.getString("ImageExperience_Choose_File_Description")),n?k.a.createElement("div",{className:"file-drag-container"},k.a.createElement("div",{className:"file-picker-react-wrapper ".concat(o?"disabled":"")},k.a.createElement(_t.BackboneInstanceWrapper,{instance:this.filePicker})),k.a.createElement(At,{onReadFile:this.readFile,allowedFileExtension:s,onInvalidExtension:this.showExtensionError,label:t.getString("ImageExperience_Drag_File_Description"),description:l,dropDescription:t.getString("ImageExperience_Drop_File_Description"),dragging:this.handleDraging,i18n:t})):k.a.createElement("div",{className:"file-picker-react-wrapper"},k.a.createElement(_t.BackboneInstanceWrapper,{instance:this.filePicker})))}}]),t}(k.a.PureComponent);It.defaultProps={isVideo:!1,enableMultiple:!1,enableDrag:!1,minimumSize:[],hideDescription:!1};var Ot=It,Pt=i("Nj9o"),Mt="#edebe9",jt="#f3f2f1",Lt="#323130",Dt="#e1dfdd",Rt="#605e5c",Nt="#8a8886",Vt="#a19f9d",Bt="#005a9e",Ft="#106ebe",Ut="#0078d4",Gt="#ffffff",zt=function(){return{floatButton:{background:jt,border:"none",borderRadius:0,color:Ft,fontWeight:"normal",height:"auto",minHeight:"auto",minWidth:"auto",width:"auto",padding:"14px 8px","&:active, &:focus, &:hover":{color:Bt,background:Dt}}}},Ht=function(e){var t=e.iconFontFamily,i=void 0===t?"MsAds MDL2 Assets":t;return{"& .ba-pagination, .dlb-pager-container, .pagination-control":{height:"auto",padding:"6px 0","& > .text":{display:"inline-block",verticalAlign:"middle",padding:"0px 0px 8px 5px","& > span":{marginRight:"5px"}},"& button":{border:0,background:"transparent",minWidth:"1px",padding:0,color:Rt},"& button:hover":{borderRadius:2,background:jt},"& button:disabled":{background:"transparent",color:"#BEBBB8"},"& .pager-input":{border:"1px solid ".concat(Rt),padding:"6px 8px",height:32,textAlign:"center",margin:"0 12px",width:70,display:"inline-block",borderRadius:2,boxSizing:"border-box",color:Lt},"& .glyphicon-triangle-left, & .glyphicon-triangle-right":{display:"inline-block",fontFamily:i,color:"inherit"},"& .glyphicon-triangle-left:before":{content:'"\\E76B"'},"& .glyphicon-triangle-right:before":{content:'"\\E76C"'}},"& .pager, .location-bid-pager-view":{height:32,padding:0,margin:0,"& .pager-input, .page-number-input, .grid-pager-input":{border:"1px solid ".concat(Rt),padding:"6px 8px",height:32,textAlign:"center",margin:"0 12px",width:70,display:"inline-block",borderRadius:2,boxSizing:"border-box",color:Lt,background:Gt},"& .pager-input[disabled], & .page-number-input[disabled], & .grid-pager-input[disabled]":{backgroundColor:jt},"& .pager-previous, & .pager-next, & .glyphicon-triangle-left, & .glyphicon-triangle-right":{fontFamily:i,color:Rt,background:"transparent",display:"inline-block",verticalAlign:"middle",padding:"2px 5px",height:32,lineHeight:"32px",marginTop:"-7px",outline:"none"},"& .pager-previous, & .pager-next":{"&:focus":{outline:"1px solid ".concat(Rt),outlineOffset:"-2px"}},"& .pager-previous:hover, & .pager-next:hover":{borderRadius:2,background:jt},"& .pager-previous-disabled, & .pager-next-disabled":{fontFamily:i,color:"#BEBBB8",background:"transparent",display:"inline-block",verticalAlign:"middle",padding:"2px 5px",height:32,lineHeight:"32px",marginTop:"-7px"},"& .pager-previous-disabled:before, & .pager-previous:before":{content:'"\\E76B"'},"& .pager-next-disabled:before, & .pager-next:before":{content:'"\\E76C"'},"& .pager-totalCount":{verticalAlign:"unset",marginLeft:4}},"& .pagination-control":{textAlign:"left","& .text":{display:"inline-block",width:"auto"},"& .page-size-selector":{border:"1px solid ".concat(Rt),height:32,textAlign:"center",margin:"0 12px",width:"70px !important",display:"inline-block",borderRadius:2,boxSizing:"border-box",color:Lt}}}},Wt=function(){var e={height:32,minWidth:80,background:Ut,borderRadius:2,textAlign:"center",color:Gt,boxSizing:"border-box","&:hover":{background:Ft},"&:focus":{background:Ut,outline:"none"},"&:active":{background:Bt},"&:disabled":{background:jt,color:Vt}};return{".btn-primary":e,".btn-hero":e,".btn-default":{height:32,minWidth:80,background:Gt,borderRadius:2,textAlign:"center",color:Lt,border:"1px solid ".concat(Nt),"&:hover":{background:jt},"&:focus":{background:Mt},"&:disabled":{background:jt,color:Vt}}}},qt=function(){return{".form-control":{"-webkit-box-shadow":"none",backgroundColor:Gt,backgroundImage:"none",border:"1px solid ".concat(Rt),borderRadius:2,boxShadow:"none",color:Lt,display:"block",fontSize:14,height:32,lineHeight:1.5,padding:"6px 12px",transition:"border-color .15s ease-in-out, box-shadow .15s ease-in-out","&:active":{borderColor:Ut},"&:hover":{borderColor:Lt},"&:focus":{"-webkit-box-shadow":"none",borderColor:Ut,boxShadow:"none",outline:0}}}},$t=function(e){var t=e.iconFontFamily,i=void 0===t?"MsAds MDL2 Assets":t;return{"& .add-image-content, & .image-edit-content":{fontSize:14,lineHeight:"20px",position:"relative","& .add-image-label, & .edit-image-title":{fontSize:20,fontWeight:600,lineHeight:"27px",marginBottom:16},"& .add-image-description":{marginBottom:20,paddingBottom:32,borderBottom:"1px solid ".concat(Rt)},"& .image-preview-crop-description":{fontSize:14,lineHeight:"20px",margin:"0 0 32px 0"},"& .image-cropper-ratio-label":{fontSize:14,fontWeight:"normal",lineHeight:"20px",margin:"16px 0"},"& .close-dialog-button":{backgroundColor:"transparent",color:Rt,fontFamily:i,fontSize:12,lineHeight:1,position:"absolute",right:0,top:0,border:"none",background:"none","&:before":{content:'"\\E711"'}},"& .search-box-container":{width:"40%",display:"flex",alignItems:"center","& .search-box__input-group":{display:"flex","& input.search-box__input":{color:Rt,marginLeft:-32,padding:"6px 8px 6px 32px",order:1},"& .search-box__icon":{position:"relative",fontFamily:i,fontSize:16,lineHeight:1,order:0,padding:8,"&:before":{content:'"\\E721"'}}},"& .ba-search-box":{flex:1},"& .clear-search":{marginLeft:10,border:"none",backgroundColor:"transparent",cursor:"pointer"}},"& .sort-by-label":{display:"none"},"& .dropdown-selector-container":{float:"right",minWidth:"25%","& .dropdown-toggle":{background:'url("data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiM0ODQ2NDQ7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5BcnRib2FyZCAxPC90aXRsZT48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xMS4zNyw0bC41Mi41M0w2LDEwLjQ1LjEyLDQuNTYuNjQsNCw2LDkuNFoiLz48L3N2Zz4=") no-repeat right 8px top 8px transparent',backgroundSize:"14px 14px",borderColor:Rt,borderRadius:2,boxShadow:"none",color:Lt,fontWeight:"normal",height:32,padding:"0px 28px 0px 8px",transition:"border-color .15s ease-in-out,box-shadow .15s ease-in-out",width:"100%","-webkit-box-shadow":"none","-webkit-appearance":"none","-moz-appearance":"none","&:active":{borderColor:Ut},"&:focus":{borderColor:Ut,outline:0},"&:hover":{borderColor:Lt},"& span":{margin:"auto 0"},"& .glyphicon-triangle-bottom":{display:"none"}}},"& .image-picker-container":{"& .image-name-section":{bottom:0,left:0,position:"absolute",display:"flex",justifyContent:"center",width:"100%","& .image-name":{position:"relative",left:0,bottom:0,width:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"& .glyphicon-pencil":{border:"none",background:"none",color:Bt,display:"inline",fontFamily:i,paddingLeft:8,position:"relative",top:"unset",right:"unset","&:before":{content:'"\\E70F"'}}},"& .image-name-container":{background:Gt,border:"rgba(0, 0, 0, 0.2)",boxShadow:"0px 0px 6px rgba(0, 0, 0, 0.2)",position:"absolute",top:90,left:0,margin:1,padding:16,minWidth:240,width:"max-content",zIndex:9,display:"grid",gridTemplateColumns:"auto auto 1fr","& .image-name-input":{extend:qt()[".form-control"],gridColumnStart:"1",gridColumnEnd:"span 3","& + button":{extend:Wt()[".btn-primary"]}},"& #image-name-field":{width:"100%"},"& button":{marginLeft:0,marginTop:16,"& ~ button":{marginLeft:8}}},"& button.glyphicon-remove":{extend:zt().floatButton,position:"absolute",top:"unset",right:5,bottom:31,fontFamily:i,fontSize:16,lineHeight:1,float:"right","&:before":{content:'"\\E711"'},"&.circular-hover":{backgroundColor:"".concat(Gt,"d4"),padding:0,borderRadius:"50%",height:32,width:32,right:8,bottom:36},"&.circular-hover:hover":{backgroundColor:"".concat(Ft,"ff"),"&:before":{color:Gt}}},"& .image-delete.glyphicon.glyphicon-remove":{display:"inline"}},"& .image-picker":{background:"none",border:"none",margin:"16px 0",padding:0,"& .existing-images":{display:"flex",flexWrap:"wrap",height:"auto",justifyContent:"space-between","& .existing-image-container":{display:"inline-flex",margin:"0 0 24px 0",paddingBottom:20,"& .image-section-wrapper":{display:"flex",flexDirection:"column",justifyContent:"center",height:202,width:202,"& .image-section":{position:"relative","& .image-dimensions":{display:"none"},"& button.existing-image":{border:"1px solid transparent","&:before":{fontFamily:i,fontSize:18,position:"absolute",right:5,top:5},"& img":{margin:0,maxHeight:200,maxWidth:200}},"&:active button.existing-image":{border:"1px solid ".concat(Ut),"&:before":{color:Ut,content:'"\\ECCB"'}},"&:focus button.existing-image":{border:"1px solid ".concat(Rt)},"&:hover button.existing-image":{border:"1px solid ".concat(Lt),"&:before":{color:Lt,content:'"\\ECCA"'}},"& button.glyphicon-remove":{extend:zt().floatButton,position:"absolute",top:"unset",right:1,bottom:1,fontFamily:i,fontSize:16,lineHeight:1,float:"right","&:before":{content:'"\\E711"'}}}},"& .image-name-section":{bottom:0,left:0,position:"absolute",display:"flex",justifyContent:"center",width:"100%","& .image-name":{position:"relative",left:0,bottom:0,width:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"& .glyphicon-pencil":{border:"none",background:"none",color:Bt,display:"inline",fontFamily:i,paddingLeft:8,position:"relative",top:"unset",right:"unset","&:before":{content:'"\\E70F"'}}},"& .image-name-container":{background:Gt,border:"rgba(0, 0, 0, 0.2)",boxShadow:"0px 0px 6px rgba(0, 0, 0, 0.2)",left:0,margin:1,padding:16,width:220,zIndex:9,"& .image-name-input":{extend:qt()[".form-control"],"& + button":{extend:Wt()[".btn-primary"]}},"& #image-name-field":{width:"100%"},"& button":{marginLeft:0,marginTop:16,"& ~ button":{marginLeft:8}}},"& .image-delete.glyphicon.glyphicon-remove":{display:"inline"}}}},"& .ba-pagination":{display:"block",textAlign:"center"},"& .choose-file-description":{borderTop:"1px solid ".concat(Rt),paddingTop:32},"& .edit-url-description":{paddingTop:16},"& .file-picker-react-wrapper":{margin:0,padding:"14px 0 0 0",width:"100%","& .file-picker-btn":{extend:Wt()[".btn-default"],display:"inline-block",float:"none",marginLeft:0,"& ~ .file-text":{display:"inline-block",border:"none"}}},"& .file-drag-container":{position:"relative",width:"100%",height:"190px",marginTop:"8px","& .file-picker-react-wrapper":{position:"absolute",left:"50%",bottom:"32px",zIndex:"1",transform:"translateX(-49px)"},"& .file-picker-react-wrapper.disabled":{display:"none"}},"& .add-image-button-bar, & .image-edit-actions":{borderTop:"1px solid #EDEBE9",bottom:0,margin:"0 -16px",padding:"16px",position:"fixed",width:"100%","& button ~ button":{marginLeft:12}},"& .image-cropper-in-edit":{margin:0,padding:0},"& .edit-preview-section":{display:"flex","& .edit-section":{display:"flex",flexDirection:"column",justifyContent:"center"}},"& > .error":{color:"#A80000",fontSize:12,margin:"4px 0 0 0"},"& .HelpTopic, & .a":{color:"#106ebe",textDecoration:"underline"}}}},Kt=function(e,t){var i,a=t.iconFontFamily,r=void 0===a?"MsAds MDL2 Assets":a;return{addImageStyle:Object(n.a)((i={"& .video-inactive":{paddingTop:60},"& .video-inactive:hover":{cursor:"not-allowed"},"& .add-image-content":{fontSize:12,position:"relative",height:"100%",display:"flex",flexDirection:"column"}},Object(Q.a)(i,"& .user-image-picker-container, .stock-image-picker-container, .image-suggestion-picker-container, .image-suggestion-picker-container > .react-block-ui-none, .image-suggestion-picker-container > .react-block-ui-none > .react-block-ui-none",{flexGrow:1,overflow:"auto",display:"flex",flexDirection:"column"}),Object(Q.a)(i,"& .add-image-content .add-image-label",{marginBottom:15,fontSize:14,fontFamily:'"Segoe UI"',fontWeight:"400",fontStyle:"normal"}),Object(Q.a)(i,"& .add-image-description",{marginBottom:20,paddingBottom:32,borderBottom:"1px solid ".concat(Rt)}),Object(Q.a)(i,"& .add-image-content .add-image-description",{marginBottom:5}),Object(Q.a)(i,"& .add-image-content .search-box-container",{width:"45%",float:"left"}),Object(Q.a)(i,"& .add-image-content .search-box-container .search-box__input-group .search-box__input.form-control",{borderRadius:"0"}),Object(Q.a)(i,"& .add-image-content .search-box-container .search-box__input-group .search-box__icon",{fontSize:12}),Object(Q.a)(i,"& .add-image-content .add-image-button-bar",{marginTop:15}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container",{float:"right"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector",{position:"relative"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector button.dropdown-toggle",{borderRadius:"0",minWidth:190}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector button.dropdown-toggle .icon-right.glyphicon-triangle-bottom",{paddingTop:3}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .list-selector-content",{border:"none"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .empty-message",{position:"absolute",padding:"5px 10px"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .list-selector-item",{padding:"5px 10px",margin:"0"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .list-selector-item:hover",{cursor:"pointer",backgroundColor:"#f5f5f5"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .list-selector-item.selected",{background:"#E7F0F6"}),Object(Q.a)(i,"& .add-image-content .dropdown-selector-container .ba-dropdown-selector .ba-list-selector .list-selector-item .item-actions",{float:"right"}),Object(Q.a)(i,"& .add-image-content .sort-by-label",{paddingTop:9,paddingRight:5,float:"right"}),Object(Q.a)(i,"& .add-image-content .image-picker",{marginTop:15,marginBottom:5,backgroundColor:"#f4f4f4",padding:15,border:"1px solid #bbb"}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images",{overflowY:"auto",height:400}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container",{position:"relative",display:"inline-block",padding:"0",margin:10}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container:hover .image-dimensions, .add-image-content .image-picker .existing-images .existing-image-container:hover .image-edit.glyphicon.glyphicon-pencil, .add-image-content .image-picker .existing-images .existing-image-container:hover .image-delete.glyphicon.glyphicon-remove",{display:"inline"}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .existing-image",{display:"inline-block",position:"relative",cursor:"pointer",border:"none",background:"none",padding:"0"}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .existing-image img",{margin:15,width:225}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-dimensions",{display:"none",position:"absolute",bottom:15,left:15,textIndent:5,color:"white",backgroundColor:"rgba(27,27,27,0.616)",width:225}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-name-container",{position:"absolute",left:15,bottom:"0",marginBottom:-15}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-name-container input",{width:100}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-name-container button",{marginLeft:3}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-name-container [role=alert]",{position:"absolute"}),Object(Q.a)(i,"& .add-image-content .image-picker .existing-images .existing-image-container .image-name",{position:"absolute",width:225,left:15,bottom:"0",marginBottom:-5,textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),Object(Q.a)(i,"& .add-image-content .file-picker-react-wrapper",{marginTop:5,marginBottom:5}),Object(Q.a)(i,"& .add-image-content .pagination-control-container",{marginBottom:10}),Object(Q.a)(i,"& .add-image-content .pagination-control-container .ba-pagination>*",{display:"inline"}),Object(Q.a)(i,"& .add-image-content .pagination-control-container .pager-input",{border:"1px solid #BBB",width:25,padding:"0 3px",marginRight:5}),Object(Q.a)(i,"& .add-image-content .pagination-control-container .btn.btn-default",{border:"none"}),Object(Q.a)(i,"& .add-image-content .pagination-control-container .btn.btn-default:disabled",{backgroundColor:"inherit"}),Object(Q.a)(i,"& .add-image-content .pagination-control-container .btn.btn-default:disabled .glyphicon",{color:"#a2a2a2"}),Object(Q.a)(i,"& .add-image-content .pagination-control-container span",{marginRight:5}),Object(Q.a)(i,"& .add-image-content .existing-opt-in-disclaimer",{marginTop:15,"& .middle-info.btn-link":{paddingRight:0},"& .btn-link":{color:Ut}}),Object(Q.a)(i,"& .add-image-button",{margin:"10px 0",background:"#008272"}),Object(Q.a)(i,"& .panel-body > .react-block-ui-none, .panel-body > .react-block-ui",{height:"100%"}),Object(Q.a)(i,"& .add-image-content-container",{width:1059,height:"100%"}),Object(Q.a)(i,"& .image-suggestion-picker-container",{"& + div > div > div, .react-block-ui > div:last-child > div > div":{flexDirection:"column"},"& + div .blocker-image, .react-block-ui > div:last-child > div > div > .blocker-image":{margin:"0 auto 8px auto !important"}}),Object(Q.a)(i,"& .image-suggestion-picker-container > .subdomain-fields",{marginTop:16,"& .divider":{display:"inline-block",marginLeft:10,marginRight:10,fontSize:14,lineHeight:"20px"}}),i),$t({iconFontFamily:r}),Ht({iconFontFamily:r}),{"& .panel-body":{height:"100%",marginBottom:"65px"}},{"& .add-video-content-container .upload-choice-group":{marginTop:-4,"& .ms-Label":{fontWeight:400,marginBottom:6}},"& .add-video-content-container .ms-ChoiceField:first-child":{marginTop:26},"& .add-video-content-container .ms-ChoiceField:nth-child(2)":{marginTop:10},"& .add-video-content-container .ms-ChoiceField-field":{padding:0,fontWeight:400},"& .add-video-content-container .upload-local-file-container":{display:"flex",alignItems:"flex-start",marginTop:20,marginLeft:26},"& .add-video-content-container .upload-progress-container":{marginLeft:26,paddingTop:4,"& .bar-upload-progress":{width:400},"& .bar-upload-progress-text":{marginTop:-10}},"& .add-video-content-container .cancel-upload-button":{marginLeft:26},"& .add-video-content-container .file-picker-input":{display:"inline-block",width:400},"& .add-video-content-container .file-picker-container":{display:"inline-block",marginLeft:8,"& .file-picker-react-wrapper":{padding:0}},"& .add-video-content-container .image-url-container":{background:Gt,width:500,display:"flex",marginTop:20,marginLeft:26,"& .image-url-input":{extend:qt()[".form-control"],width:400,display:"inline-block"},"& #image-url-field, #image-description-field":{width:"100%"},"& .image-url-button":{extend:Wt()[".btn-default"],display:"inline-block",marginLeft:8,width:130}}}),"@global":{".popover-content":{overflow:"auto","max-height":"500px"}}}},Jt=function(){return{circle:{display:"flex",flexDirection:"column",alignItems:"center","& .radial-progress-text":{textAlign:"center",display:"block",color:"white",fontSize:10,fontWeight:600}}}},Zt=function(){function e(t){var i=t.loadMoreByPageNumber;Object(a.a)(this,e),this.loadMoreByPageNumber=i,this.currentData=[],this.currentPageNumber=1,this.hasMore=!1}return Object(r.a)(e,[{key:"subscribe",value:function(e){this.callback=e}},{key:"unsubscribe",value:function(){this.callback=null}},{key:"executeCallBackIfExist",value:function(e){this.callback&&this.callback(e)}},{key:"loadMore",value:function(){var e=this;return this.executeCallBackIfExist(ze.DataSourceState.Loading),this.currentPageNumber+=1,this.loadMoreByPageNumber(this.currentPageNumber).then(function(t){e.hasMore=Object(we.d)(t);var i=t.Images.map(function(e){var t=e.ImageUrl;return{src:e.ThumbnailUrl,fullSrc:t,id:parseInt(c.a.uniqueId(),10)}});e.currentData=e.currentData.concat(i)}).catch(function(e){throw e}).finally(function(){e.executeCallBackIfExist(ze.DataSourceState.Done)})}},{key:"reload",value:function(e,t){this.currentPageNumber=1,this.currentData=e,this.hasMore=t,this.executeCallBackIfExist(ze.DataSourceState.Done)}},{key:"getData",value:function(){return{hasMore:this.hasMore,data:this.currentData}}}]),e}(),Yt=function(e){var t=e.loadMoreByPageNumber;return new Zt({loadMoreByPageNumber:t})},Qt=i("3GA3"),Xt=function(e){var t=Object(x.useState)(""),i=Object(_.a)(t,2),n=i[0],a=i[1],r=e.onSearch,o=e.searchBoxPlacedHolderText,s=e.searchBoxAriaLabel,l=e.query;return Object(x.useEffect)(function(){a(l)},[l]),k.a.createElement("div",{className:"search-box-container"},k.a.createElement(Qt.SearchBox,{onQueryChange:function(e){a(e)},onSearch:function(){return r(n)},value:n,placeholder:o,ariaLabel:s}),k.a.createElement("button",{onClick:function(){a(""),r("")},className:"clear-search iconba iconba-Cancel"}))};Xt.defaultProps={query:""};var ei=Xt,ti=i("f9Pu"),ii=i("ILEM"),ni=function(e){return{properties:{people_model_released:{name:"People Model Released",filterable:!0,title:e.getString("ShutterStock_Filter_People_Model_Released"),type:"string",property:"people_model_released",enum:["true","false"],localized:{true:e.getString("ShutterStock_Filter_People_Model_Released_True"),false:e.getString("ShutterStock_Filter_People_Model_Released_False")},operatorDisplayNameMap:{eq:"is"},operators:["eq"],chooseType:"radio"},people_ethnicity:{name:"People Ethnicity",filterable:!0,title:e.getString("ShutterStock_Filter_People_Ethnicity"),type:"string",property:"people_ethnicity",enum:["african","african_american","black","brazilian","chinese","caucasian","east_asian","hispanic","japanese","middle_eastern","native_american","pacific_islander","south_asian","southeast_asian","other"],localized:{african:e.getString("ShutterStock_Filter_People_Ethnicity_African"),african_american:e.getString("ShutterStock_Filter_People_Ethnicity_African_American"),black:e.getString("ShutterStock_Filter_People_Ethnicity_Black"),brazilian:e.getString("ShutterStock_Filter_People_Ethnicity_Brazilian"),chinese:e.getString("ShutterStock_Filter_People_Ethnicity_Chinese"),caucasian:e.getString("ShutterStock_Filter_People_Ethnicity_Caucasian"),east_asian:e.getString("ShutterStock_Filter_People_Ethnicity_East_Asian"),hispanic:e.getString("ShutterStock_Filter_People_Ethnicity_Hispanic"),japanese:e.getString("ShutterStock_Filter_People_Ethnicity_Japanese"),middle_eastern:e.getString("ShutterStock_Filter_People_Ethnicity_Middle_Eastern"),native_american:e.getString("ShutterStock_Filter_People_Ethnicity_Native_American"),pacific_islander:e.getString("ShutterStock_Filter_People_Ethnicity_Pacific_Islander"),south_asian:e.getString("ShutterStock_Filter_People_Ethnicity_South_Asian"),southeast_asian:e.getString("ShutterStock_Filter_People_Ethnicity_Southeast_Asian"),other:e.getString("ShutterStock_Filter_People_Ethnicity_Other")},operatorDisplayNameMap:{eq:"is"},operators:["eq"],chooseType:"checkbox"},people_gender:{name:"People Gender",filterable:!0,title:e.getString("ShutterStock_Filter_People_Gender"),type:"string",property:"people_gender",enum:["male","female","both"],localized:{male:e.getString("ShutterStock_Filter_People_Male"),female:e.getString("ShutterStock_Filter_People_Female"),both:e.getString("ShutterStock_Filter_People_Both")},operatorDisplayNameMap:{eq:"is"},operators:["eq"],chooseType:"radio"},people_age:{name:"People Age",filterable:!0,title:e.getString("ShutterStock_Filter_People_Age"),type:"string",property:"people_model_age",enum:["infants","children","teenagers","20s","30s","40s","50s","60s","older"],localized:{infants:e.getString("ShutterStock_Filter_People_Age_Infants"),children:e.getString("ShutterStock_Filter_People_Age_Children"),teenagers:e.getString("ShutterStock_Filter_People_Age_Teenagers"),"20s":e.getString("ShutterStock_Filter_People_Age_20s"),"30s":e.getString("ShutterStock_Filter_People_Age_30s"),"40s":e.getString("ShutterStock_Filter_People_Age_40s"),"50s":e.getString("ShutterStock_Filter_People_Age_50s"),"60s":e.getString("ShutterStock_Filter_People_Age_60s"),older:e.getString("ShutterStock_Filter_People_Age_Older")},operatorDisplayNameMap:{eq:"is"},operators:["eq"],chooseType:"radio"},people_number:{name:"People Number",filterable:!0,title:e.getString("ShutterStock_Filter_People_Number"),type:"string",property:"people_number",enum:["1","2","3","4"],localized:{1:"1",2:"2",3:"3",4:"4+"},operatorDisplayNameMap:{eq:"is"},operators:["eq"],chooseType:"radio"}},name:"ShutterStockPeopleFilterSchema",type:"object"}},ai=function(e){return t=e,!c.a.isObject(t)||c.a.isArray(t)||c.a.isEmpty(e)?[]:e.$and?e.$and:[e];var t},ri=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onQueryChange=function(e){var t=i.props,n=t.data,a=t.setData,r={predicates:ai(e)};c.a.isEqual(n,r)||a(r)};var n=e.i18nLegacy;return i.filterSchema=ni(n),i.editableFilter=new ti.FilterEntity({},{entitySchema:i.filterSchema}),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.classes,n=t.data.predicates,a=t.popoverContainer,r=function(e){return!c.a.isArray(e)||c.a.isEmpty(e)?{}:1===e.length?e[0]:{$and:e}}(n);return this.editableFilter.updateQuery(r),k.a.createElement("div",{className:"stock-photo-new-filter ".concat(i.filterContainer)},k.a.createElement(I.I18nContext.Consumer,null,function(t){return k.a.createElement(ii.PredicateList,{i18n:t,onApplySavedFilter:c.a.noop,onDeleteFilters:c.a.noop,selector:[],entitySchema:e.filterSchema,editableFilter:e.editableFilter,selectableFilter:null,onEditableFilterUpdate:e.onQueryChange,onSelectableFilterUpdate:c.a.noop,disallowDuplicateFilters:!0,popoverContainer:a})}))}}]),t}(k.a.Component);ri.defaultProps={data:null,i18n:{getString:c.a.identity},popoverContainer:null};var oi=Object(O.withDefaultStyles)(ri,function(e,t){return{filterContainer:{display:"flex",alignItems:"center",justifyContent:"space-between","& > .predicate-list":{paddingLeft:0},"& .add-filter-button":{background:"transparent",marginLeft:0,"&:focus":{background:"transparent"},"&:focus:after":{border:0}},"& .filter-bar-button":{height:"56px",border:0,"&:focus:after":{border:0},"& .iconba":{color:t.palette.themePrimary}},"& .btn:focus":{outline:"1px solid"},"& .selector-placeholder.labels-selector":Pt.predicateValueEditorStyle.selector({palette:t.palette})}}}),si=function(e){var t=e.i18nLegacy,i=e.isForVNext,n=e.onFilterQueryChange,a=e.popoverContainer,r=Object(x.useState)({}),o=Object(_.a)(r,2),s=o[0],l=o[1],d=Object(x.useState)({}),u=Object(_.a)(d,2),p=(u[0],u[1]);return Object(x.useEffect)(function(){if(s.predicates){var e=c.a.reduce(s.predicates,function(e,t){var i=c.a.keys(t),n=Object(_.a)(i,1)[0],a={},r=c.a.values(c.a.values(t)[0]),o=Object(_.a)(r,1)[0];if(o.length>1)o.forEach(function(e,t){a["".concat(n,"[").concat(t,"]")]=e});else{var s=Object(_.a)(o,1);a[n]=s[0]}return c.a.extend(e,a)},{});p(e),i&&n(e)}},[s,i]),k.a.createElement(oi,{i18nLegacy:t,data:s,setData:l,popoverContainer:a})};si.defaultProps={isForVNext:!1,popoverContainer:null};var li=si,ci=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onImageSearch=function(e){i.setState({searchValue:e},function(){i.getDataSource().searchAsync(i.state.searchValue,i.state.sortBySelection.id)})},i.onSortBySelect=function(e){i.setState({sortBySelection:e},function(){i.getDataSource().searchAsync(i.state.searchValue,i.state.sortBySelection.id)})},i.onThumbnailSelected=function(e){i.setState({selectedImage:e})},i.onImageSelected=function(e,t){var n=i.props,a=n.i18n,r=n.onSelectedImagesSet,o=n.imageType,s=n.isMultimediaAd,c=n.isMultimediaAdinMSANEnabled,d=n.isChooseThumbnail,u=n.isAdCreatorV1Enabled,p=n.isAdCreatorEnhancementsEnabled,g=n.mediaRepository;i.showUiBlocker(!0),i.imageSelectPerfMarker.willInit();try{var m=Je(e.Width,e.Height,o,s);if(m)throw m;var f=p&&e.OriginalUrl,v=h(Object(l.extend)({},e,f&&{Id:e.BaseIdString,IdString:e.BaseIdString,Url:e.OriginalUrl}),t);if(d)r(v);else{var b;if(u){var y=Object(V.a)(i.props.instrumentation).smartCropActivity;b=Xe(g,v,y)}if(b=Qe({originalImageToCrop:v,isMultimediaAd:s,isMultimediaAdinMSANEnabled:c}),p){var S=(Object(Ue.a)(e.Metadata)||{}).effectSettings;if(S){var w=Object(l.defaults)({effectSrc:e.Url},S);Object(l.each)(b,function(e){e.BaseImage.setEffectSettings(w),e.setEffectSettings(w)})}}r(b)}}catch(x){if(x instanceof Ke)i.showErrors([a.getString("ImageExperience_SizeValidationFailTemplate",{width:x.minWidth,height:x.minHeight})]);else{var C=Object(l.result)(x,"message","");i.showErrors([a.getString("ImageExperience_Error_".concat(C))||C])}}finally{i.imageSelectPerfMarker.done({imageWidth:e.Width,imageHeight:e.height}),i.showUiBlocker(!1)}},i.onNewImage=function(e){var t=e.imageSource,n=e.saveImagePromise,a=e.source,r=i.props,o=r.i18n,c=r.onSelectedImagesSet,d=r.imageType,u=r.isMultimediaAdinMSANEnabled,p=r.isMultimediaAd,g=r.isChooseThumbnail,m=r.mediaRepository,f=r.isAdCreatorV1Enabled;i.showUiBlocker(!0);var v=Object(l.isArray)(t)?t:[t];return s.a.all(Object(l.map)(v,function(e){return Ze(e,d,p)})).bind(Object(Re.a)(Object(Re.a)(i))).then(function(){var e=Object(l.map)(v,n);return s.a.all(e)}).then(function(e){var t=Object(l.map)(e,function(e){return i.imageRepository.getImageByIdAsync(e)});return s.a.all(t)}).then(function(e){var t=Object(l.map)(e,function(e){var t=h(e,a),n=Je(t.Width,t.Height,d,p);if(n)throw n.isDueToResizing=!0,n;if(g)return t;if(f){var r=Object(V.a)(i.props.instrumentation).smartCropActivity;return Xe(m,t,r)}return Qe({originalImageToCrop:t,isMultimediaAd:p,isMultimediaAdinMSANEnabled:u})});return s.a.all(t)}).then(function(e){1===e.length?c(e[0]):c(e)}).catch(function(e){if(e instanceof Ke){var t="ImageExperience_SizeValidationFailTemplate";e.isDueToResizing&&(t="ImageExperience_SizeValidationFailTemplate_WithDetail"),i.showErrors([o.getString(t,{width:e.minWidth,height:e.minHeight})])}else{var n=Object(l.result)(e,"message","");i.showErrors([o.getString("ImageExperience_Error_".concat(n))||n])}}).finally(function(){i.showUiBlocker(!1)})},i.onImageSelectedByUrl=function(e){return i.onNewImage({imageSource:e,saveImagePromise:function(){return i.imageRepository.bulkSaveImagesByUrl([{url:e}]).then(function(e){if(Object(l.isObject)(Object(l.first)(e)))throw new Error(e[0].code);return e[0]})},source:p.imageSources.Website})},i.onFileRead=function(e){if(i.props.isAdCreatorV1Enabled){var t=Object(V.a)(i.props.instrumentation).fileUploadActivity,n=Object(l.isArray)(e)?Object(l.size)(e):1;t.trace("Selected ".concat(n," local files"))}return i.onNewImage({imageSource:e,saveImagePromise:function(e){return i.imageRepository.uploadImageAsync(e).then(function(e){if(!e.imageId)throw new Error(e[0].Code);return e.imageId})},source:p.imageSources.Upload})},i.onPillChange=function(e){var t=e.index;i.setState({pillControlIndex:t})},i.getDataSource=function(){return i.pillControlIndexToDataSource[i.state.pillControlIndex]},i.showErrors=function(e){return i.setState({errors:e})},i.showUiBlocker=function(e){return i.setState({blockUi:e})},i.isStockImages=function(){return i.props.isStockPhotoEnabled&&1===i.state.pillControlIndex};var n=i.props,r=n.i18n,o=n.aid,c=n.cid,d=n.oDataConfig,u=n.imageType,g=n.isStockPhotoEnabled,m=n.isAdCreatorV1Enabled,f=n.isChooseThumbnail,v=n.isMultimediaAd;return i.imageRepository=new rt(c,o,d),i.sortBySelectionItems=[{id:p.sortBySelections.recentUpload.id,value:r.getString("ImageExperience_Sort_Recent_Upload")},{id:p.sortBySelections.imageText.id,value:r.getString("ImageExperience_Sort_Image_Text")}],i.pillControlItems=Object(l.compact)([{name:r.getString("ImageExperience_Existing_Images"),href:"#",value:"existingImages"},{name:r.getString("ImageExperience_Stock_Images"),href:"#",value:"stockImages"},m&&{name:r.getString("ImageExperience_Website_Suggestions"),href:"#",value:"websiteSuggestions",labelString:r.getString("ImageExperience_New")},!f&&{name:r.getString("ImageExperience_Upload"),href:"#",value:"upload"}]),i.userPhotoDataSource=mt({imageType:u,imageRepository:i.imageRepository}),g&&(i.stockPhotoDataSource=nt(c,o,d,u,v)),m&&(i.imageSuggestionDataSource=Yt({loadMoreByPageNumber:function(e){var t=i.props.finalUrl;return i.props.suggestionPoller.getMoreLandingPageSuggestions({landingPageUrl:t,pageNumber:e})}}),i.minimumSize=p.getMinimumSizeForImage(u,v)),i.pillControlIndexToDataSource=[i.userPhotoDataSource,i.stockPhotoDataSource],i.defaultState={sortBySelection:i.sortBySelectionItems[0],blockUi:!1,errors:[],pillControlIndex:0,userPhotoInitialized:!1,searchValue:"",selectedImage:null,blockSuggestionImagePickerOnly:!1},i.imageSelectPerfMarker=i.props.perfMarker.createChild("existingImageSelect"),i.state=i.defaultState,i.dialogRef=k.a.createRef(),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){if(this.props.shouldShowContentOnly){var e=this.getDataSource();e&&e.searchAsync(null,this.state.sortBySelection.id)}}},{key:"componentDidUpdate",value:function(e){if(!this.props.shouldShowContentOnly&&(this.props.isImageSelectorDisplayed||this.setState(this.defaultState),!e.isImageSelectorDisplayed&&this.props.isImageSelectorDisplayed&&!this.props.isChooseThumbnail)){var t=this.getDataSource();t&&t.searchAsync(null,this.state.sortBySelection.id)}}},{key:"render",value:function(){var e=this,t=this.props,i=t.i18n,n=t.isForVNext,a=t.staticImagePath,r=t.onSelectedImagesSet,o=t.imageType,s=t.isStockPhotoEnabled,c=t.isLazyLoadEnabled,d=t.permissions,u=t.isChooseThumbnail,g=t.getContainer,h=t.imageList,m=t.isMultimediaAdinMSANEnabled,f=t.isAdCreatorV1Enabled,v=t.isAdCreatorEnhancementsEnabled,b=t.shouldShowContentOnly,y=this.state,S=y.pillControlIndex,w=y.sortBySelection,C=s,x=!s||s&&0===S,A=s&&1===S,T=!s||s&&2!==S,_=!s||s&&0===S,I=!s||s&&S===(f?3:2),O=s&&f&&2===S,P={trace:l.noop},M=Object(Ge.getUrlProtocolAndDomain)(this.props.finalUrl||"");O&&Object(V.a)(this.props.instrumentation).websiteSuggestionActivity.trace("User opened website suggestions");f&&(P=Object(V.a)(this.props.instrumentation).smartCropActivity);var j=function(){return o?i.getString("ImageExperience_ReplaceImageTitle"):i.getString("ImageExperience_AddImageTitle")},L=function(){return k.a.createElement("div",{className:"add-image-content"},!n&&k.a.createElement("div",{className:"add-image-label"},j()),k.a.createElement("div",{className:"add-image-description"},k.a.createElement("span",null,"".concat(i.getString("ImageExperience_AddImageDescription")," ")),!e.props.isMultimediaAd&&k.a.createElement(Ve.f,{linkText:i.getString("ImageExperience_BestPracticeHelp"),topic:"app54659"})),!n&&k.a.createElement("button",{className:"close-dialog-button glyphicon glyphicon-remove",onClick:e.props.onImageSelectionCanceled}),C&&k.a.createElement(Fe.PillControl,{className:"pill-control",defaultSelectedIndex:S,onItemChange:function(t){var i=t.name,n=t.value,a=t.index;return e.onPillChange({name:i,value:n,index:a})},items:e.pillControlItems}),k.a.createElement("div",{className:"clearfix"},T&&k.a.createElement("div",{className:0===S?"user-image-search-box":"user-image-search-box hide"},k.a.createElement(ei,{onSearch:e.onImageSearch,searchBoxPlacedHolderText:i.getString("ImageExperience_Search_Placeholder"),searchBoxAriaLabel:i.getString("ImageExperience_Search_Placeholder")})),T&&k.a.createElement("div",{className:1===S?"stock-image-search-box":"stock-image-search-box hide"},k.a.createElement(ei,{onSearch:e.onImageSearch,searchBoxPlacedHolderText:i.getString("ImageExperience_Stock_Search_Placeholder"),searchBoxAriaLabel:i.getString("ImageExperience_Stock_Search_Placeholder")})),_&&k.a.createElement("div",null,k.a.createElement("div",{className:"dropdown-selector-container"},k.a.createElement(Ne.DropdownSelector,{totalCount:2,i18n:i,selectedItem:w,onSelect:e.onSortBySelect,mode:"simple",items:e.sortBySelectionItems,dropdownMenuAriaLabel:i.getString("ImageExperience_SortBy"),enableArrowKeysSupport:e.props.isForVNext,shouldFocusFirstFocusableItemOnMount:!0})),k.a.createElement("span",{className:"sort-by-label"},i.getString("ImageExperience_SortBy")))),A&&d.IsStockPhotoFilterEnabled&&k.a.createElement("div",{className:"shutter-stock-filter-container"},k.a.createElement(li,{i18n:i,i18nLegacy:i,isForVNext:n,onFilterQueryChange:function(t){return e.stockPhotoDataSource.updateFilterQuery(t)}})),x&&k.a.createElement(k.a.Fragment,null,e.props.isAdCreatorV1Enabled&&k.a.createElement("div",{className:"alert alert-info existing-opt-in-disclaimer"},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartOne")),k.a.createElement("a",{target:"_blank",className:"btn-link middle-info",rel:"noopener noreferrer",href:"https://about.ads.microsoft.com/en-us/resources/policies/microsoft-advertising-agreement"},k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartTwo"))),k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartThree")),k.a.createElement("a",{target:"_blank",className:"btn-link",rel:"noopener noreferrer",href:"https://about.ads.microsoft.com/en-us/resources/policies/image-audio-and-video-policies"},k.a.createElement("span",null,i.getString("ImageExperience_Review_Image_Policy"))))),k.a.createElement(vt,{imageType:o,showUiBlocker:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,staticImagePath:a,userPhotoDataSource:e.userPhotoDataSource,onImageSelected:function(t){return e.onImageSelected(t,p.imageSources.Existing)},isForVNext:n,isLazyLoadEnabled:c,i18n:i,imageList:h,isAdCreatorV1Enabled:e.props.isAdCreatorV1Enabled,isAdCreatorEnhancementsEnabled:v,isMultimediaAd:e.props.isMultimediaAd})),A&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"alert alert-info",style:{margin:"3px 0"}},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},i.getString("ImageExperience_ShutterStock_Disclaimer_Watermark"))),k.a.createElement("div",{className:"alert alert-info"},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},k.a.createElement("span",null,i.getString("ImageExperience_ShutterStock_Disclaimer_Image_Policy")),k.a.createElement("span",null,"\xa0"),k.a.createElement("a",{className:"HelpTopic btn-link",query:"app54718",rel:"noopener noreferrer"},k.a.createElement("span",null,i.getString("ImageExperience_Review_Image_Policy")))))),A&&k.a.createElement(ct,{imageType:o,showUiBlocker:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,onSelectedImagesSet:r,staticImagePath:a,stockPhotoDataSource:e.stockPhotoDataSource,isMultimediaAdinMSANEnabled:m,isForVNext:n,isMultimediaAd:e.props.isMultimediaAd,permissions:e.props.permissions,perfMarker:e.props.perfMarker.createChild("stockImagePicker"),i18n:i,isAdCreatorV1Enabled:e.props.isAdCreatorV1Enabled,mediaRepository:e.props.mediaRepository,smartCropActivity:P}),O&&k.a.createElement(Ct,{suggestion:e.props.suggestion,dataSource:e.imageSuggestionDataSource,i18n:i,setUiBlockerStatus:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,isMultimediaAd:e.props.isMultimediaAd,onImageSelectedByUrl:e.onImageSelectedByUrl,logger:Object(V.a)(e.props.instrumentation).websiteSuggestionActivity,onUpdateSubdomainUrl:function(t){e.props.suggestionPoller.getLandingPageSuggestions({landingPageUrl:Object(Ge.extendPath)(M,t),enableOfflinePollingDelay:!1,additionalCallback:function(){e.setState({blockSuggestionImagePickerOnly:!1})}}),e.setState({blockSuggestionImagePickerOnly:!0})},finalUrl:e.props.finalUrl,enableSubdomain:d.IsAdCreatorSubdomainEnabled,blockImagePickerOnly:e.state.blockSuggestionImagePickerOnly,finalUrlDomain:M}),I&&k.a.createElement(Ot,{onFileRead:e.onFileRead,showErrors:e.showErrors,i18n:i,enableMultiple:e.props.isAdCreatorV1Enabled,enableDrag:!1,minimumSize:e.minimumSize,hideDescription:!1}),e.props.isMultimediaAd&&e.state.errors.map(function(t,i){return k.a.createElement(E.MessageBar,{className:"error",key:"".concat(i),messageBarType:E.MessageBarType.severeWarning,onDismiss:function(){return e.showErrors([])}},t)}),!e.props.isMultimediaAd&&e.state.errors.map(function(e,t){return k.a.createElement("div",{className:"error",key:"".concat(t)},e)}),k.a.createElement("div",{className:"add-image-button-bar"},k.a.createElement("button",{className:"add-image-cancel-button btn btn-default",onClick:e.props.onImageSelectionCanceled},i.getString("Audience_Campaign_Cancel_Label"))))},D=function(){return k.a.createElement("div",{className:"add-image-content-container"},L())};return u?e.props.isImageSelectorDisplayed?k.a.createElement(E.Dialog,{title:i.getString("ImageExperience_EditThumbnailTitle"),hidden:!1,onDismiss:e.props.onImageSelectionCanceled,modalProps:{className:e.props.classes.addImageStyle,layerProps:{onLayerDidMount:function(){var t=e.getDataSource();t&&t.searchAsync(null,e.state.sortBySelection.id)}}},minWidth:1200},k.a.createElement(q.UiBlocker,{blocking:e.state.blockUi,loadingText:i.getString("Loading")},k.a.createElement("div",{className:"add-image-content-container"},k.a.createElement("div",{className:"add-image-content",ref:e.dialogRef},k.a.createElement("div",{className:"add-image-description"},k.a.createElement("span",null,"".concat(i.getString("ImageExperience_AddImageDescription")," ")),k.a.createElement(Ve.f,{linkText:i.getString("ImageExperience_BestPracticeHelp"),topic:"app54659"})),k.a.createElement(Fe.PillControl,{className:"pill-control",defaultSelectedIndex:S,onItemChange:function(t){var i=t.name,n=t.value,a=t.index;return e.onPillChange({name:i,value:n,index:a})},items:e.pillControlItems}),k.a.createElement("div",{className:"clearfix"},T&&k.a.createElement("div",{className:0===S?"user-image-search-box":"user-image-search-box hide"},k.a.createElement(ei,{onSearch:e.onImageSearch,searchBoxPlacedHolderText:i.getString("ImageExperience_Search_Placeholder"),searchBoxAriaLabel:i.getString("ImageExperience_Search_Placeholder")})),T&&k.a.createElement("div",{className:1===S?"stock-image-search-box":"stock-image-search-box hide"},k.a.createElement(ei,{onSearch:e.onImageSearch,searchBoxPlacedHolderText:i.getString("ImageExperience_Stock_Search_Placeholder"),searchBoxAriaLabel:i.getString("ImageExperience_Stock_Search_Placeholder")})),_&&k.a.createElement("div",null,k.a.createElement("div",{className:"dropdown-selector-container"},k.a.createElement(Ne.DropdownSelector,{totalCount:2,i18n:i,selectedItem:w,onSelect:e.onSortBySelect,mode:"simple",items:e.sortBySelectionItems,dropdownMenuAriaLabel:i.getString("ImageExperience_SortBy"),enableArrowKeysSupport:e.props.isForVNext,shouldFocusFirstFocusableItemOnMount:!0})),k.a.createElement("span",{className:"sort-by-label"},i.getString("ImageExperience_SortBy")))),A&&d.IsStockPhotoFilterEnabled&&k.a.createElement("div",{className:"shutter-stock-filter-container"},k.a.createElement(li,{i18n:i,i18nLegacy:i,isForVNext:n,onFilterQueryChange:function(t){return e.stockPhotoDataSource.updateFilterQuery(t)},popoverContainer:e.dialogRef.current})),x&&k.a.createElement(k.a.Fragment,null,e.props.isAdCreatorV1Enabled&&k.a.createElement("div",{className:"alert alert-info"},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartOne")),k.a.createElement("a",{target:"_blank",className:"btn-link",rel:"noopener noreferrer",href:"https://about.ads.microsoft.com/en-us/resources/policies/microsoft-advertising-agreement"},k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartTwo"))),k.a.createElement("span",null,i.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartThree")),k.a.createElement("a",{target:"_blank",className:"btn-link",rel:"noopener noreferrer",href:"https://about.ads.microsoft.com/en-us/resources/policies/image-audio-and-video-policies"},k.a.createElement("span",null,i.getString("ImageExperience_Review_Image_Policy"))))),k.a.createElement(vt,{imageType:o,showUiBlocker:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,staticImagePath:a,userPhotoDataSource:e.userPhotoDataSource,onImageSelected:e.onThumbnailSelected,isForVNext:n,isLazyLoadEnabled:c,i18n:i,imageList:h}),k.a.createElement(Ot,{onFileRead:e.onFileRead,showErrors:e.showErrors,i18n:i})),A&&k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"alert alert-info",style:{margin:"3px 0"}},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},i.getString("ImageExperience_ShutterStock_Disclaimer_Watermark"))),k.a.createElement("div",{className:"alert alert-info"},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("div",{className:"alert-info-inline"},k.a.createElement("span",null,i.getString("ImageExperience_ShutterStock_Disclaimer_Image_Policy")),k.a.createElement("span",null,"\xa0"),k.a.createElement("a",{className:"HelpTopic btn-link",query:"app54718",rel:"noopener noreferrer"},k.a.createElement("span",null,i.getString("ImageExperience_Review_Image_Policy")))))),A&&k.a.createElement(ct,{imageType:o,showUiBlocker:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,onSelectedImagesSet:e.onThumbnailSelected,staticImagePath:a,stockPhotoDataSource:e.stockPhotoDataSource,isForVNext:n,isMultimediaAd:e.props.isMultimediaAd,permissions:e.props.permissions,i18n:i,isAdCreatorV1Enabled:e.props.isAdCreatorV1Enabled,mediaRepository:e.props.mediaRepository,isChooseThumbnail:!0}),O&&k.a.createElement(Ct,{suggestion:e.props.suggestion,dataSource:e.imageSuggestionDataSource,i18n:i,setUiBlockerStatus:e.showUiBlocker,imageRepository:e.imageRepository,showErrors:e.showErrors,isMultimediaAd:e.props.isMultimediaAd,onImageSelectedByUrl:e.onImageSelectedByUrl}),e.state.errors.map(function(e,t){return k.a.createElement("div",{className:"error",key:"".concat(t)},e)}))),k.a.createElement(E.DialogFooter,null,k.a.createElement(E.PrimaryButton,{disabled:!e.state.selectedImage,onClick:function(){return e.onImageSelected(e.state.selectedImage)}},i.getString("Audience_Campaign_Save_Label")),k.a.createElement(E.DefaultButton,{onClick:e.props.onImageSelectionCanceled},i.getString("Cancel"))))):null:b?D():n?e.props.isImageSelectorDisplayed?k.a.createElement(Be.a,{title:j(),isOpen:!0,onClose:e.props.onImageSelectionCanceled,getContainer:g,panelClassName:"".concat(e.props.classes.addImageStyle," thumbnail-selector-dialog"),i18n:i,panelReadyAriaLabel:i.getString("Add image side panel opened")},k.a.createElement(q.UiBlocker,{blocking:e.state.blockUi,loadingText:i.getString("Loading")},D())):null:k.a.createElement(xt,{isModalOpen:this.props.isImageSelectorDisplayed},k.a.createElement(q.UiBlocker,{blocking:this.state.blockUi,loadingText:i.getString("Loading")},L()))}}]),t}(k.a.PureComponent);ci.defaultProps={imageType:null,isImageSelectorDisplayed:!1,isForVNext:!1,isMultimediaAd:!1,cid:"",isStockPhotoEnabled:!1,oDataConfig:null,staticImagePath:null,permissions:{},isChooseThumbnail:!1,getContainer:"body",imageList:[],suggestion:{},isMultimediaAdinMSANEnabled:!1,isAdCreatorV1Enabled:!1,isAdCreatorEnhancementsEnabled:!1,mediaRepository:null,shouldShowContentOnly:!1,finalUrl:"",suggestionPoller:{getLandingPageSuggestions:l.noop,getMoreLandingPageSuggestions:l.noop},instrumentation:{addScenario:l.noop}};var di=Object(B.withInstrumentation)(Object(O.withDefaultStyles)(Object(A.withPerfMarker)(ci),Kt)),ui=i("YDtG"),pi=function(e){function t(){return Object(a.a)(this,t),Object(S.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return k.a.createElement("div",{className:"business-name-with-ads"},k.a.createElement("span",{className:"adslabel"},this.props.i18n.getString("Entity_Ads")),!this.props.onlyIcon&&k.a.createElement("span",{className:"business-name"},this.props.businessName))}}]),t}(k.a.PureComponent);pi.defaultProps={onlyIcon:!1};var gi=function(e){function t(e,i){var n;return Object(a.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e,i))).multiLineTextRefs=[k.a.createRef(),k.a.createRef(),k.a.createRef()],n}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.multiLineTextRefs.forEach(function(e){e.current&&e.current.processText()})}},{key:"render",value:function(){var e=this.props.opacityChangeEnabled,t="".concat(this.props.previewContentClassName," responsive-ad-preview-content"),i=this.props.showGradient?"gradient image-container":"image-container",n=this.props.isMultimediaAd?p.getMmaAspectRatios()[this.props.image.Type]:p.aspectRatios[this.props.image.Type],a=this.props.isAdCreatorV1Enabled?this.props.image.FinalSrc:this.props.image.Src;return k.a.createElement("div",{className:"new-responsive-ad-preview-container",style:{opacity:!e||this.props.image.isIncluded?"100%":"50%"}},k.a.createElement("a",{className:t,target:"_blank",rel:"noopener noreferrer",href:this.props.previewTexts.url},k.a.createElement("div",{className:i},this.props.showAdsLabel&&this.props.isMultimediaAd&&this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"ads-label"},this.props.i18n.getString("Entity_Ads")),this.props.isMultimediaAd&&this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"gradient"}),k.a.createElement(W,{resizeImageHeight:this.props.additionalSetting?this.props.additionalSetting.imagePreviewHeight:n.imagePreviewHeight,src:a,originalWidth:this.props.image.Width,originalHeight:this.props.image.Height,SourceX:this.props.image.CropSettings.SourceX,SourceY:this.props.image.CropSettings.SourceY,SourceWidth:this.props.image.CropSettings.SourceWidth,SourceHeight:this.props.image.CropSettings.SourceHeight,aspectRatio:n.aspectRatio})),k.a.createElement("div",{className:"text-container"},this.props.showShortHeadline&&(this.props.isMultimediaAd?this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"short-headline"},this.props.previewTexts.shortHeadline):k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[0],className:"short-headline",text:this.props.previewTexts.shortHeadline})),this.props.showLongHeadline&&k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"long-headline",text:this.props.previewTexts.longHeadline}),this.props.showUrl&&(this.props.isMultimediaAd?this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"final-url"},Object(Ge.isValidUrl)(this.props.previewTexts.url)?new URL(this.props.previewTexts.url).origin:this.props.previewTexts.url):k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"final-url",text:this.props.previewTexts.url})),this.props.showDescription&&(this.props.isMultimediaAd?this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"description"},this.props.previewTexts.description):k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[2],className:"description",text:this.props.previewTexts.description})),this.props.showBusinessName&&k.a.createElement(pi,{i18n:this.props.i18n,businessName:this.props.previewTexts.businessName}),this.props.showAction&&this.props.isMultimediaAd&&this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("button",{className:"action-button"},this.props.previewTexts.callToAction.replace(/([A-Z])/g," $1")))),k.a.createElement("div",{className:"preview-type-string"},this.props.i18n.getString(this.props.additionalSetting?this.props.additionalSetting.previewTypeStringKey:n.previewTypeStringKey)),this.props.showAdditionalDisclaimer&&!this.props.isMultiMediaAdsPhase2Enabled&&k.a.createElement("div",{className:"additional-disclaimer"},this.props.i18n.getString(this.props.isMultimediaAd?"ImageExperience_Additional_Disclaimer_Message_MultimediaAd":"ImageExperience_Additional_Disclaimer_Message")))}}]),t}(k.a.PureComponent);gi.defaultProps={showShortHeadline:!1,opacityChangeEnabled:!1,showLongHeadline:!1,showDescription:!1,showGradient:!1,showAdditionalDisclaimer:!1,additionalSetting:null,showBusinessName:!0,showUrl:!1,showAction:!1,showAdsLabel:!1,isMultimediaAd:!1,isMultiMediaAdsPhase2Enabled:!1,isAdCreatorV1Enabled:!1};var hi=function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r={image:e,previewTexts:t,i18n:i,isCurrent:n,opacityChangeEnabled:a,isMultimediaAd:a,isMultiMediaAdsPhase2Enabled:arguments.length>5&&void 0!==arguments[5]&&arguments[5],isAdCreatorV1Enabled:arguments.length>6&&void 0!==arguments[6]&&arguments[6]},o=a?p.getMmaAspectRatios():p.aspectRatios;return r=c.a.defaults(r,o[e.Type].previewSettings),k.a.createElement(gi,r)},mi=function(e,t,i,n,a){var r=p.imageAdExtSettings[a],o=r.previewTypeStringKey,s=r.imagePreviewHeight,l={image:e,previewTexts:t,i18n:i,isCurrent:n,additionalSetting:r&&{previewTypeStringKey:o,imagePreviewHeight:s}};return l=c.a.defaults(l,r&&r.previewSettings),k.a.createElement(gi,l)},fi=i("p5vc"),vi=function(e){function t(e,i){var n;return Object(a.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e,i))).handleSelect=function(e,t){n.setState({index:e,direction:t.direction})},n.multiLineTextRefs=[k.a.createRef(),k.a.createRef(),k.a.createRef(),k.a.createRef()],n.state={index:0,direction:null},n}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.multiLineTextRefs.forEach(function(e){e.current&&e.current.processText()})}},{key:"render",value:function(){var e=this,t=this.state,i=t.index,n=t.direction;return k.a.createElement("div",{className:"image-combo-contanier"},k.a.createElement("div",{className:"image-container"},this.props.isInsideImages&&k.a.createElement("div",null,k.a.createElement(W,{resizeImageHeight:this.props.imagePreviewHeight,src:this.props.images[0].Src,originalWidth:this.props.images[0].Width,originalHeight:this.props.images[0].Height,SourceX:this.props.images[0].CropSettings.SourceX,SourceY:this.props.images[0].CropSettings.SourceY,SourceWidth:this.props.images[0].CropSettings.SourceWidth,SourceHeight:this.props.images[0].CropSettings.SourceHeight,aspectRatio:p.aspectRatios[this.props.images[0].Type].aspectRatio}),k.a.createElement("div",{className:"text-container"},k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[0],className:"extension-headline",text:this.props.previewTexts.extensionHeadline}))),!this.props.isInsideImages&&k.a.createElement("div",null,k.a.createElement(fi.Carousel,{activeIndex:i,direction:n,onSelect:this.handleSelect,controls:!1,wrap:!1},this.props.images.map(function(t){return k.a.createElement(fi.Carousel.Item,{key:t.idString},k.a.createElement("span",{className:"ad-logo"},k.a.createElement("p",null,e.props.i18n.getString("Entity_Ads"))),k.a.createElement(W,{resizeImageHeight:e.props.imagePreviewHeight,src:t.Src,originalWidth:t.Width,originalHeight:t.Height,SourceX:t.CropSettings.SourceX,SourceY:t.CropSettings.SourceY,SourceWidth:t.CropSettings.SourceWidth,SourceHeight:t.CropSettings.SourceHeight,aspectRatio:p.aspectRatios[t.Type].aspectRatio}))})),k.a.createElement("div",{className:"text-container"},k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[0],className:"long-headline",text:this.props.previewTexts.longHeadline}),k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"final-url",text:this.props.previewTexts.url}),k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[2],className:"description",text:this.props.previewTexts.description})))))}}]),t}(k.a.PureComponent);vi.defaultProps={imagePreviewHeight:null,isInsideImages:!1};var bi=function(e){function t(e,i){var n;return Object(a.a)(this,t),n=Object(S.a)(this,Object(w.a)(t).call(this,e,i)),c.a.defaults(Object(Re.a)(Object(Re.a)(n)),p.imageAdExtSettings[n.props.previewType]),n.multiLineTextRefs=[k.a.createRef(),k.a.createRef(),k.a.createRef()],n.isMobilePreview="MobileMultiImage"===n.props.previewType,n}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.multiLineTextRefs.forEach(function(e){e.current&&e.current.processText()})}},{key:"render",value:function(){var e=this,t="".concat(this.previewContentClassName," responsive-ad-preview-content");return k.a.createElement("div",{className:"new-responsive-ad-preview-container"},!this.isMobilePreview&&k.a.createElement("div",{className:t,rel:"noopener noreferrer"},k.a.createElement("div",{className:"text-container"},k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[0],className:"long-headline",text:this.props.previewTexts.longHeadline}),k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"final-url",text:this.props.previewTexts.url}),k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[2],className:"description",text:this.props.previewTexts.description})),k.a.createElement("div",{className:"desktop-mutiImg-container"},this.props.images.map(function(t){return k.a.createElement(vi,{images:t&&[t],i18n:e.props.i18n,previewTexts:e.props.previewTexts,imagePreviewHeight:e.imagePreviewHeight,isInsideImages:!0,key:t.idString})}))),this.isMobilePreview&&k.a.createElement("div",{className:t,rel:"noopener noreferrer"},k.a.createElement(vi,{images:this.props.images,i18n:this.props.i18n,previewTexts:this.props.previewTexts,imagePreviewHeight:this.imagePreviewHeight})),k.a.createElement("div",{className:"preview-type-string"},this.props.i18n.getString(this.previewTypeStringKey)))}}]),t}(k.a.PureComponent),yi=function(e){var t=new Image,i=null,n=new s.a(function(e){i=e});return t.onload=function(){i({Src:t.src,Width:t.naturalWidth,Height:t.naturalHeight,Type:"Image191x100"})},t.src=e,n},Si=function(e){var t=Object(x.useState)(0),i=Object(_.a)(t,2),n=i[0],a=i[1],r=Object(x.useState)([]),o=Object(_.a)(r,2),l=o[0],d=o[1],u=[e.genericImage].concat(Object(m.a)(e.placeHolderImages)),g=c.a.map(u,function(e){return yi(e).then(function(e){return Qe({originalImageToCrop:e})})});return s.a.all(g).then(function(t){var i=Object(_.a)(t,3),n=i[0],a=i[1],r=i[2],o=[];o.push(e.image),[a||n,r||n].forEach(function(e,t){var i=c.a.find(e,function(e){return e.type===p.aspectRatios.Image133x100.type}).clone();i.id=i.id?i.id+t:t,o.push(i)}),l.length<3?d(o):l[0].cropSettings.SourceHeight===o[0].cropSettings.SourceHeight&&l[0].cropSettings.SourceWidth===o[0].cropSettings.SourceWidth&&l[0].cropSettings.SourceX===o[0].cropSettings.SourceX&&l[0].cropSettings.SourceY===o[0].cropSettings.SourceY||d(o)}),k.a.createElement(fi.Carousel,{className:"edit-carousel-container",activeIndex:n,onSelect:function(e){a(e)},controls:!1},k.a.createElement(fi.Carousel.Item,null,k.a.createElement(bi,{images:l,i18n:e.i18n,previewTexts:e.previewTexts,previewType:"MobileMultiImage"})),k.a.createElement(fi.Carousel.Item,null,k.a.createElement(bi,{images:l,i18n:e.i18n,previewTexts:e.previewTexts,previewType:"BingDesktopImage"})),k.a.createElement(fi.Carousel.Item,null,hi(e.image,e.previewTexts,e.i18n)))};Si.defaultProps={placeHolderImages:[]};var wi=function(e){var t=Object(x.useState)(0),i=Object(_.a)(t,2),n=i[0],a=i[1];return k.a.createElement(fi.Carousel,{className:"edit-carousel-container",activeIndex:n,onSelect:function(e){a(e)},controls:!1},k.a.createElement(fi.Carousel.Item,null,mi(e.image,e.previewTexts,e.i18n,!0,"BingSingleImage")),k.a.createElement(fi.Carousel.Item,null,hi(e.image,e.previewTexts,e.i18n)))},Ci=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onCropSettingsChanged=function(e){if(!i.state.image||JSON.stringify(i.state.image.CropSettings)!==JSON.stringify(e)){var t=i.state.image.clone();t.setCropSettings(e),i.setState({image:t})}},i.onSaveEditedImage=function(){i.props.onSave(i.state.image)},i.isMultimediaAd=i.props.isMultimediaAd,i.aspectRatios=i.isMultimediaAd?p.getMmaAspectRatios():p.aspectRatios,i.state={image:e.image},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){e.image!==this.props.image&&this.setState({image:this.props.image})}},{key:"render",value:function(){var e=this,t=function(){return k.a.createElement("div",{className:"image-edit-actions"},k.a.createElement("button",{className:"save-edit-button btn btn-primary",onClick:e.onSaveEditedImage},e.props.i18n.getString("Audience_Campaign_Save_Label")),k.a.createElement("button",{className:"cancel-edit-button btn btn-default",onClick:e.props.onCancel},e.props.i18n.getString("Audience_Campaign_Cancel_Label")))},i=function(){return e.props.i18n.getString("ImageExperience_Edit_Image_Template",{ratio:e.props.i18n.getString(e.aspectRatios[e.state.image.Type].stringKey)})},n=function(){return k.a.createElement("div",{className:"image-preview-crop-description"},e.props.i18n.getString("ImageExperience_Image_ReCrop_Description"))},a=function(){return k.a.createElement("div",{className:"clearfix image-edit-content"},!e.props.isForVNext&&k.a.createElement("div",{className:"edit-image-title"},i()),!e.props.isForVNext&&k.a.createElement("button",{className:"close-dialog-button glyphicon glyphicon-remove",onClick:e.props.onCancel}),e.props.isForVNext&&n(),k.a.createElement("div",{className:"clearfix edit-preview-section"},k.a.createElement("div",{className:"edit-section",style:{width:"50%",float:"left"}},!e.props.isForVNext&&n(),function(){var t=300;return t*e.state.image.Width/e.state.image.Height>640&&(t=Math.round(640*e.state.image.Height/e.state.image.Width)),k.a.createElement("div",{className:"image-cropper-in-edit",onContextMenu:function(e){return e.preventDefault(),!1}},k.a.createElement(R,{aspectRatio:e.aspectRatios[e.state.image.Type].aspectRatio,boxHeight:t,minSize:e.aspectRatios[e.state.image.Type].minSize,imageSource:e.state.image.Src,cropSettings:e.state.image.CropSettings,onCropSettingsChanged:e.onCropSettingsChanged}),k.a.createElement("div",{className:"image-cropper-ratio-label"},e.props.i18n.getString(e.aspectRatios[e.state.image.Type].stringKey)))}(),!e.props.isForVNext&&t()),k.a.createElement("div",{className:"preview-section",style:{width:"50%",float:"left"}},k.a.createElement("div",{className:"preview-section-title"},e.props.i18n.getString("ImageExperience_Ad_Preview_Title")),e.props.isImageAdExtensionMode&&e.state.image.type===p.aspectRatios.Image133x100.type&&k.a.createElement(Si,{i18n:e.props.i18n,previewTexts:e.props.previewTexts,image:e.state.image,genericImage:e.props.genericImage,placeHolderImages:e.props.placeHolderImages}),e.props.isImageAdExtensionMode&&e.state.image.type===p.aspectRatios.Image178x100.type&&k.a.createElement(wi,{i18n:e.props.i18n,previewTexts:e.props.previewTexts,image:e.state.image}),e.props.isImageAdExtensionMode&&e.state.image.type!==p.aspectRatios.Image133x100.type&&e.state.image.type!==p.aspectRatios.Image178x100.type&&hi(e.state.image,e.props.previewTexts,e.props.i18n,!0,e.isMultimediaAd),!e.props.isImageAdExtensionMode&&hi(e.state.image,e.props.previewTexts,e.props.i18n,!0,e.isMultimediaAd))),e.props.isForVNext&&t(),k.a.createElement("div",{className:"alert alert-info"},k.a.createElement("div",{className:"alert-image"}),k.a.createElement("span",{className:"alert-info-inline"},e.props.i18n.getString("AdExtensions_Image_Preview_ClaimText"))))};return this.props.isImageEditDisplayed&&this.state.image&&this.state.image.src?this.props.isForVNext?k.a.createElement(Be.a,{title:i(),isOpen:this.props.isImageEditDisplayed,onClose:this.props.onCancel,getContainer:"body",panelClassName:this.props.classes.editImageStyle,i18n:this.props.i18n,panelReadyAriaLabel:this.props.i18n.getString("Edit image side panel opened")},k.a.createElement("div",{className:"edit-image-content-container"},a())):k.a.createElement(xt,{isModalOpen:this.props.isImageEditDisplayed,className:"image-edit-modal"},a()):null}}]),t}(k.a.PureComponent);Ci.defaultProps={image:null,isForVNext:!1,isImageAdExtensionMode:!1,isMultimediaAd:!1,genericImage:null,placeHolderImages:[]};var xi=Object(O.withDefaultStyles)(Object(A.withPerfMarker)(Ci),function(e,t){var i=t.iconFontFamily,a=void 0===i?"MsAds MDL2 Assets":i;return{editImageStyle:Object(n.a)({"& .image-edit-content .edit-image-title":{fontSize:14,fontFamily:'"Segoe UI"',fontWeight:"400",fontStyle:"normal"},"& .image-edit-content .close-dialog-button":{top:10,right:5},"& .image-edit-content .image-preview-crop-description":{fontSize:12,margin:"10px 0"},"& .image-edit-content .image-cropper-in-edit":{padding:5,marginTop:30},"& .image-edit-content .image-cropper-in-edit .image-cropper-ratio-label":{fontSize:12,margin:"10px 0 5px 0",width:"100%",fontWeight:"700",textAlign:"center"},"& .image-edit-content .image-replace-description":{fontSize:12,margin:"10px 0"},"& .image-edit-content .preview-section":{border:"1px solid #CCCCCC"},"& .image-edit-content .image-edit-actions":{marginTop:40},"& .edit-image-content-container":{minWidth:1350,width:1350},"& .new-responsive-ad-preview-container":{fontFamily:'"Segoe UI","Segoe WP",Arial,Sans-Serif',fontSize:10,height:620,position:"relative"},"& .new-responsive-ad-preview-container .responsive-ad-preview-content":{boxSizing:"unset",position:"absolute",top:"47%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",overflow:"hidden"},"& .new-responsive-ad-preview-container .preview-type-string":{position:"absolute",bottom:75,fontSize:12,textAlign:"center",width:"100%"},"& .preview-section":{border:"1px solid #C8C8C8",padding:"20px 24px","& .preview-section-title":{fontSize:18,fontWeight:"normal",lineHeight:"24px"}},"& .disclaimer-info, & .additional-disclaimer":{fontSize:12,lineHeight:"20px",textAlign:"left"},"& .disclaimer-info":{padding:"0 24px 20px 24px"},"& .additional-disclaimer":{bottom:0,padding:"0 24px"},"& .panel-content":{"@media screen and (max-width: 1400px)":{maxWidth:"90%"}}},$t({iconFontFamily:a}),Ht({iconFontFamily:a}),{"& .panel-body":{height:"100%",marginBottom:"65px"}},Object(Pt.editImageCommonStyle)())}}),ki=function(e){function t(){var e,i;Object(a.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=Object(S.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).onAddImage=function(e){var t=e.target.dataset.imagetype;i.props.onAddImage(t)},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=80*p.aspectRatios[this.props.type].aspectRatio,t={width:"".concat(e,"px"),height:"".concat(80,"px"),borderColor:"#D90026"};return k.a.createElement("div",{className:"image-list-item empty-image-list-item",key:this.props.type},k.a.createElement("button",{style:t,onClick:this.onAddImage,"data-imagetype":this.props.type},this.props.i18n.getString("ImageEditor_AddImage")),k.a.createElement("div",{className:"image-item-ratio-label",style:{color:"#D90026"}},this.props.i18n.getString(p.aspectRatios[this.props.type].stringKey)))}}]),t}(k.a.PureComponent),Ai=function(e){function t(){var e,i;Object(a.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=Object(S.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).onEditSelect=function(e,t){var n=t.target.parentNode.parentNode.dataset.imagetype;switch(e){case"replace":i.props.onReplaceImage(n);break;case"re-crop":default:i.props.onReCropImage(n)}},i.onAddImage=function(e){i.props.onReplaceImage(e)},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.isMultimediaAd;return k.a.createElement("div",{className:"image-list-view-content"},k.a.createElement("div",{className:"image-list clearfix"},k.a.createElement("div",null,k.a.createElement("span",{className:"image-list-label"},this.props.i18n.getString("ImageExperience_Image_List_Label")),k.a.createElement(T.HelpPopup,{topic:"pop_BA_CampaignCreate_AudAds_Images","aria-label":this.props.i18n.getString("Click to learn more about {{item}}",{item:this.props.i18n.getString("ImageExperience_Image_List_Label")})})),k.a.createElement("div",{className:"image-list-content"},p.getImageTypesWithOrder(t).map(function(t){var i=c.a.find(e.props.imageList,function(e){return e.Type===t});return i?k.a.createElement("div",{className:"image-list-item",key:i.Type},k.a.createElement("div",{className:"image-list-item-image"},k.a.createElement(W,{resizeImageHeight:p.resizeImageHeightInList,src:i.Src,originalWidth:i.Width,originalHeight:i.Height,SourceX:i.CropSettings.SourceX,SourceY:i.CropSettings.SourceY,SourceWidth:i.CropSettings.SourceWidth,SourceHeight:i.CropSettings.SourceHeight,aspectRatio:p.aspectRatios[i.Type].aspectRatio}),k.a.createElement(fi.Dropdown,{className:"image-edit-dropdown",onSelect:e.onEditSelect},k.a.createElement(fi.Dropdown.Toggle,{"aria-label":e.props.i18n.getString("ImageExperience_Edit_Image_Label",{ratio:e.props.i18n.getString(p.aspectRatios[i.Type].stringKey)})},!e.props.isForVNext&&e.props.i18n.getString("Audience_Campaign_Crud_Ad_EditAd")),k.a.createElement(fi.Dropdown.Menu,{"data-imagetype":i.Type},k.a.createElement(fi.MenuItem,{eventKey:"re-crop"},e.props.i18n.getString("ImageEditor_CropImage")),k.a.createElement(fi.MenuItem,{eventKey:"replace"},e.props.i18n.getString("ImageExperience_Replace"))))),k.a.createElement("div",{className:"image-item-ratio-label"},e.props.i18n.getString(p.aspectRatios[i.Type].stringKey))):k.a.createElement(ki,{i18n:e.props.i18n,onAddImage:e.onAddImage,type:t,key:t})}),this.props.isForVNext&&k.a.createElement("button",{className:"remove-all-button",onClick:this.props.onRemoveAllImages,"aria-label":this.props.i18n.getString("ImageExperience_RemoveAllImages")}))),!this.props.isForVNext&&k.a.createElement("button",{className:"btn btn-default remove-all-button",onClick:this.props.onRemoveAllImages},this.props.i18n.getString("ImageExperience_RemoveAllImages")))}}]),t}(k.a.PureComponent);Ai.defaultProps={isForVNext:!1,isMultimediaAd:!1};var Ti=i("lM1H"),_i=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onDismissTeachingBubble=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(V.a)(i.props.instrumentation).teachingBubbleActivity;i.setState({showTeachingBubble:!1}),i.props.preferenceService.setAtUserLevel({Name:p.preferenceFlags.MMATeachingBubble,Data:{hasBeenDismissed:!0}}),t?n.trace("ClickedButtonTeachingBubble"):n.trace("ClickedCloseTeachingBubble")},i.onSelect=function(e,t){i.props.onSelectImage(t.key)},i.onRemove=function(e){i.props.onRemoveImage(e.currentTarget.dataset.imageid)},i.onEdit=function(e){var t=Object(V.a)(i.props.instrumentation).editImageActivity;i.props.onEditImage(e.currentTarget.dataset.imageid),t.trace("User opened edit image panel")};var n=i.props.preferenceService.findByNameAtUserLevel(p.preferenceFlags.MMATeachingBubble);return i.disableTeachingBubble=!(!n||!n.Data)&&n.Data.hasBeenDismissed,i.state={showTeachingBubble:!0},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"getKeyForImageItem",value:function(e){var t=Object(_.a)(e,1)[0];return this.props.isAdCreatorEnhancementsEnabled?t.BaseId:t.Id}},{key:"getChoiceGroupOption",value:function(){var e=this;return c.a.map(this.props.imageList,function(t,i){var n=c.a.first(t),a=e.getKeyForImageItem(t);if(n){var r=e.props.isAdCreatorV1Enabled?99:63,o=112,s=r,l={},d=n.Src;if(e.props.isAdCreatorV1Enabled){var u=r/n.Height>112/n.Width?r/n.Height:112/n.Width;s=n.Height*u,o=n.Width*u,c.a.extend(l,{field:{alignItems:"center",justifyContent:"start",overflow:"hidden"}});var p=n.BaseImage&&n.BaseImage.CropSettings;if(d=n.BaseImage.FinalSrc,p&&p.SourceWidth>0&&p.SourceHeight>0){var g,h=p.SourceWidth,m=p.SourceHeight,f=r/m>112/h?r/m:112/h;g=m*f;var v=h*f/p.SourceWidth,b=g/p.SourceHeight;o=n.Width*v,s=n.Height*b,c.a.extend(l,{selectedImageWrapper:{marginLeft:-p.SourceX*v,marginTop:-p.SourceY*b},imageWrapper:{marginLeft:-p.SourceX*v,marginTop:-p.SourceY*b}})}}var y=e.props,S=y.isAdCreatorV1Enabled,w=y.i18n;return{key:a,imageSrc:d,selectedImageSrc:d,imageSize:{width:o,height:s},text:"",styles:l,ariaLabel:"".concat(w.getString("ImageExperience_Image")," ").concat(i+1),onRenderLabel:function(){return null},onRenderField:function(t,i){return k.a.createElement("div",{className:"image-list-item",key:n.Type,style:{overflow:"hidden"},"data-imageid":a},k.a.createElement("div",{className:"image-list-item-image"},i(t),S&&!e.disableTeachingBubble&&e.state.showTeachingBubble&&k.a.createElement(E.TeachingBubble,{calloutProps:{directionalHint:E.DirectionalHint.bottomCenter},headline:w.getString("AdCreator_EditImageTeachingBubble_Headline"),target:".image-list-choice-group .ms-ChoiceField:first-child button.image-edit",hasCloseButton:!0,onDismiss:e.onDismissTeachingBubble,primaryButtonProps:{children:w.getString("Coupon_GotIt"),onClick:function(t){return e.onDismissTeachingBubble(t,!0)}}},w.getString("AdCreator_EditImageTeachingBubble_Body")),S&&k.a.createElement("button",{"aria-label":w.getString("ImageExperience_Edit_Image"),className:"glyphicon glyphicon-pencil image-edit",onClick:e.onEdit,"data-imageid":a}),k.a.createElement("button",{"aria-label":w.getString("ImageExperience_Remove_Image"),className:"image-delete glyphicon glyphicon-remove",onClick:e.onRemove,"data-imageid":a})))}}}return null})}},{key:"render",value:function(){return k.a.createElement("div",{className:"image-list-view-content"},k.a.createElement("div",{className:"image-list"},k.a.createElement("div",{className:"image-list-content"},k.a.createElement(E.ChoiceGroup,{className:M()("image-list-choice-group",this.props.isAdCreatorV1Enabled&&"image-list-choice-group-ad-creator"),label:this.props.i18n.getString("ImageExperience_Image_List_Label"),defaultSelectedKey:this.getKeyForImageItem(this.props.imageList[0]),selectedKey:this.props.currentSelectedImageId,options:this.getChoiceGroupOption(),onChange:this.onSelect}),k.a.createElement("button",{className:"remove-all-button",onClick:this.props.onRemoveAllImages,"aria-label":this.props.i18n.getString("ImageExperience_RemoveAllImages")}))))}}]),t}(k.a.PureComponent);_i.defaultProps={currentSelectedImageId:null,onEditImage:c.a.noop,isAdCreatorV1Enabled:!1,isAdCreatorEnhancementsEnabled:!1};var Ei=Object(Ti.withPreference)(Object(B.withInstrumentation)(_i)),Ii=function(e,t){return 200!==e.status&&e.responseJSON&&e.responseJSON.value&&0!==e.responseJSON.value.length?c.a.compact(e.responseJSON.value.map(function(e){return e.Code})).map(function(e){return t.getString("ImageExperience_Video_Error_".concat(e))||e}):[]},Oi={display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%"},Pi={fontSize:"36px",lineHeight:"36px",color:"#0078d4"},Mi=function(){return{"@global":{"@keyframes spinner":{to:{transform:"rotate(360deg)"}},"@keyframes downloading":{from:{transform:"translateY(-18px)"},to:{transform:"translateY(42px)"}}},encoding:Object(n.a)({},Oi,{"& .placeholder-icon":Object(n.a)({},Pi,{animation:"spinner 1.2s linear infinite"}),".add-video-content-container &":{marginTop:14}}),unverified:Object(n.a)({},Oi,{"& .download-icon-container":{overflow:"hidden",borderBottom:"2px solid #0078d4"},"& .placeholder-icon":Object(n.a)({},Pi,{animation:"downloading 1.2s ease infinite"})}),failed:Object(n.a)({},Oi,{"& .placeholder-icon":Object(n.a)({},Pi,{color:"#d83b01"})})}},ji=function(e){return k.a.createElement("div",{className:e.classes.unverified},k.a.createElement("div",{className:"download-icon-container"},k.a.createElement(E.Icon,{className:"placeholder-icon",iconName:"Down"})),k.a.createElement("div",{style:{fontWeight:600,color:e.textColor}},e.i18n.getString("ImageExperience_Video_Status_Unverified")))};ji.defaultProps={textColor:void 0};var Li=Object(O.withDefaultStyles)(ji,Mi),Di=function(e){return k.a.createElement("div",{className:e.classes.encoding},k.a.createElement(E.Icon,{className:"placeholder-icon",iconName:"ProgressRingDots"}),k.a.createElement("div",{style:{fontWeight:600,color:e.textColor}},e.i18n.getString("ImageExperience_Video_Status_Encoding")))};Di.defaultProps={textColor:void 0};var Ri=Object(O.withDefaultStyles)(Di,Mi),Ni=function(e){return k.a.createElement("div",{className:e.classes.failed},k.a.createElement(E.Icon,{className:"placeholder-icon",iconName:"ErrorBadge"}),k.a.createElement("div",{style:{fontWeight:600,color:e.textColor}},"Invalid video"))};Ni.defaultProps={textColor:void 0};var Vi=Object(O.withDefaultStyles)(Ni,Mi),Bi=function(e){var t=e.i18n,i=e.onUserVideoDelete,n=e.onUserVideoEdit;return function(e){var a=e.children,r=e.itemHeight,o=e.image,s=Object(x.useState)(!1),l=Object(_.a)(s,2),c=l[0],d=l[1],u=Object(x.useState)(o.altText),p=Object(_.a)(u,1)[0],g=Object(x.useState)(""),h=Object(_.a)(g,2),m=h[0],f=h[1],v=r,b=Math.round(o.width*v/o.height),y={maxHeight:v+30,height:v+30,width:b/v>1.6?1.6*v:b,position:"relative",overflow:"visible",margin:"5px"},S="Active"===o.status?"":"video-inactive";return k.a.createElement("div",{style:y,className:"existing-image-container"},k.a.createElement("div",{className:"image-section-wrapper",style:{overflow:"hidden"}},k.a.createElement("div",{className:"image-section"},k.a.createElement("div",{className:"image-content-wrap ".concat(S),"data-imageid":o.idString},"Active"===o.status?a:function(e,t){return"Draft"===e.status?k.a.createElement(Ri,{i18n:t}):"Unverified"===e.status?k.a.createElement(Li,{i18n:t}):"Failed"===e.status?k.a.createElement(Vi,{i18n:t}):null}(o,t)),k.a.createElement("button",{id:o.idString,"data-imageid":o.idString,className:"image-delete glyphicon glyphicon-remove",onClick:function(e){var t=e.currentTarget.id;i(t)},"aria-label":t.getString("ImageExperience_Remove_Image")}))),!c&&k.a.createElement("div",{className:"image-name-section"},k.a.createElement("span",{className:"image-name",title:p},p),k.a.createElement("button",{id:o.idString,className:"image-edit glyphicon glyphicon-pencil",onClick:function(){f(p),d(!0)},"aria-label":t.getString("ImageExperience_Edit_Image_Name")})),c&&k.a.createElement(re.FocusLock,{focusFirstItemOnMount:!0,isControlledFocusLock:!0,isFocusLock:c,onExit:function(){return d(!1)}},k.a.createElement(pt,{id:o.idString,value:m,i18n:t,onChanged:function(e){return f(e.target.value)},onSave:function(){var e;e=o.idString,n(e,m),d(!1)},onCancel:function(){return d(!1)}})))}},Fi=function(){return k.a.createElement(ot,null)},Ui=function(e){var t=e.i18n,i=e.userVideoDataSource,a=e.onVideoSelected,r=e.videoRepository,o=e.showUiBlocker,l=e.showErrors,c=e.isLazyLoadEnabled,d=e.videoList,u=Object(x.useCallback)(function(e){return confirm(t.getString("ImageExperience_Video_Delete_Confirm"))?d.find(function(t){return t.IdString===e})?(l([t.getString("ImageExperience_Media_Delete_Error_UseInDraft")]),s.a.resolve(!1)):(o(!0),l([]),r.deleteVideo({id:e}).then(function(){return i.reload()}).catch(function(e){l(Ii(e,t))}).finally(function(){o(!1)})):s.a.resolve(!1)},[t,r,i,o,l,d]),p=Object(x.useCallback)(function(e,n){return o(!0),l([]),r.patchVideo({id:e,deltaVideo:{Description:n}}).then(function(){return i.reload()}).finally(function(){o(!1)}).catch(function(){return l([t.getString("ImageExperience_VideoEditFail")])})},[r,i,o,l,t]),g=Object(x.useMemo)(function(){return Bi({i18n:t,onUserVideoDelete:u,onUserVideoEdit:p})},[t,u,p]),h=Object(x.useCallback)(function(){i.loadMore()},[i]);return k.a.createElement("div",{className:"user-image-picker-container"},k.a.createElement(ze.ImagePickerContainer,{i18n:t,dataSource:i,isMultiSelection:!1,onSelectionChanged:function(e){var t=e[0];a(Object(n.a)({},t,{src:t.videoSrc}))},isLazyLoadEnabled:c,onLoadMore:h,isAutoLoadMore:!0,height:window.innerHeight>1e3?580:window.innerHeight>870?450:350,itemHeight:180,imageListItemWrapper:g,imagePlaceHolder:Fi,useBingAdsLoader:!0}))};Ui.defaultProps={showErrors:c.a.noop,showUiBlocker:c.a.noop,videoList:[]};var Gi=Ui,zi=function(e){var t=null;if(e.DownloadUrl){var i=JSON.parse(e.DownloadUrl),n=Object.keys(i).map(function(e){return parseInt(e,10)});t=i[Math.min.apply(Math,Object(m.a)(n))]}return{id:parseInt(e.Id,10),idString:e.Id,src:e.ThumbnailUrl,videoSrc:t,thumbnailUrl:e.ThumbnailUrl,width:e.Width||150,height:e.Height||0,altText:e.Description||"",status:e.Status,duration:e.DurationInMilliSeconds||e.DurationInMS,durationInMs:e.DurationInMS,uploadedTime:e.UploadedTime,textFields:[e.Description||""]}},Hi=function(){function e(t){Object(a.a)(this,e),this.currentData=[],this.sortById=t.sortById,this.videoRepository=t.videoRepository,this.currentSearchTerm="",this.pageSize=20}return Object(r.a)(e,[{key:"subscribe",value:function(e){this.callback=e}},{key:"unsubscribe",value:function(){this.callback=null}},{key:"excuteCallBackIfExsit",value:function(e){this.callback&&this.callback(e)}},{key:"loadMore",value:function(){return this.currentPage+=1,this.fetchVideoAsync()}},{key:"reload",value:function(){return this.currentData=[],this.currentPage=0,this.excuteCallBackIfExsit(ze.DataSourceState.Done),this.fetchVideoAsync()}},{key:"searchAsync",value:function(e,t){return this.currentData=[],this.excuteCallBackIfExsit(ze.DataSourceState.Done),this.currentSearchTerm=null===e?"":e,this.sortById=t||this.sortById,this.currentPage=0,this.fetchVideoAsync()}},{key:"fetchVideoAsync",value:function(){var e=this;return this.excuteCallBackIfExsit(ze.DataSourceState.Loading),this.videoRepository.getVideos({sortById:this.sortById,searchTerm:this.currentSearchTerm,pageNumber:this.currentPage,pageSize:this.pageSize}).then(function(t){e.hasMore=t["@odata.count"]>t.value.length+e.currentData.length;var i=c.a.map(t.value,zi);e.currentData=e.currentData.concat(i)}).finally(function(){e.excuteCallBackIfExsit(ze.DataSourceState.Done)})}},{key:"getData",value:function(){return{hasMore:this.hasMore,data:this.currentData}}}]),e}(),Wi=function(e){var t=e.videoRepository;return new Hi({videoRepository:t,sortById:1,filter:function(){return!0}})},qi=i("UShG"),$i=i("aWzz"),Ki=i.n($i),Ji=function(e){var t="".concat((100*e.uploadedBytes/e.totalBytes).toFixed(1)," %");return k.a.createElement("div",{className:"upload-progress-container"},k.a.createElement(qi.Progress,{className:"bar-upload-progress",progressPercentage:e.uploadedBytes/e.totalBytes}),k.a.createElement("div",{className:"bar-upload-progress-text"},t))},Zi=Object(O.withDefaultStyles)(function(e){return k.a.createElement("div",{className:e.classes.circle},k.a.createElement(qi.RadialProgress,{progressPercentage:e.uploadedBytes/e.totalBytes,size:44,stroke:"#0078d4",strokeWidth:4}))},Jt),Yi=function(e){switch(e.type){case"bar":return k.a.createElement(Ji,e);case"circle":return k.a.createElement(Zi,e);default:return null}};Zi.propTypes=Object(n.a)({},Yi.propTypes,{classes:Ki.a.shape(Object(l.mapObject)({circle:{display:"flex",flexDirection:"column",alignItems:"center","& .radial-progress-text":{textAlign:"center",display:"block",color:"white",fontSize:10,fontWeight:600}}},Object(l.constant)(Ki.a.string.isRequired))).isRequired}),Yi.defaultProps={type:"bar"};var Qi=Yi,Xi=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onValidate=function(e){i.setState({isValid:e.isValid})},i.state={isValid:!0},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"image-url-container"},k.a.createElement(ut.ValidatedInput,{className:"image-url-input",value:this.props.url,onChange:this.props.onUrlChanged,validationProps:{schema:{properties:{Text:{type:"string",maxLength:1024,minLength:1}}},field:"Text",i18n:this.props.i18n,onValidate:this.onValidate},id:"image-url-field",ariaLabel:this.props.i18n.getString("ImageExperience_Edit_Url"),placeholder:this.props.i18n.getString("ImageExperience_Edit_Url")}),k.a.createElement(E.DefaultButton,{onClick:this.props.onSubmit,disabled:!this.state.isValid,text:this.props.i18n.getString("ImageExperience_Get_Video_Label"),className:"image-url-button"})))}}]),t}(k.a.PureComponent);Xi.defaultProps={url:""};var en=i("Uvua"),tn=function(){function e(t,i,n,r){Object(a.a)(this,e),this.cid=t,this.aid=i,this.baseURL="".concat(n.odataPath,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")"),this.oDataConfig={oDataToken:n.odataToken,oDataTokenType:n.oDataTokenType,applicationName:n.applicationName},this.uploader=new en.AzureUploader({logger:r?{trace:r.signal,error:r.error}:{trace:c.a.noop,error:c.a.noop}})}return Object(r.a)(e,[{key:"getUploadUrl",value:function(e){var t=e.fileExtension,i="".concat(this.baseURL,"/Videos/Default.GetUploadUrl(fileExtension='").concat(t,"')");return et.odata.get(i,this.oDataConfig)}},{key:"postVideoByFile",value:function(e){var t=this,i=e.file,a=e.description,r=e.onProgress;return new o.Promise(function(e,o){var s=i.name.split("."),l=s[s.length-1];t.getUploadUrl({fileExtension:".".concat(l)}).then(function(o){var s=o.BlobName,l=t.uploader.uploadPayloadToBlobWithCancellation({blob:o,payload:new en.FilePayload({file:i}),onProgress:r});l.chain(function(){return et.odata.post("".concat(t.baseURL,"/Videos/"),Object(n.a)({},t.oDataConfig,{urlParameters:{blobName:s,description:a}}))}),e(l)}).catch(o)})}},{key:"postVideoByUrl",value:function(e){var t=e.videoUrl;return et.odata.post("".concat(this.baseURL,"/Videos/"),Object(n.a)({},this.oDataConfig,{urlParameters:{videoUrl:t,description:t}}))}},{key:"getVideos",value:function(e){var t=e.sortById,i=e.searchTerm,a=e.pageNumber,r=e.pageSize,o=r,s=a*r,l=c.a.find(p.videoSortBySelections,function(e){return e.id===t}).query,d={$top:o,$skip:s,count:!0};return i.length>0&&(d.$filter="contains(Text, '".concat(i,"')")),et.odata.get("".concat(this.baseURL,"/Videos/?").concat(l),Object(n.a)({},this.oDataConfig,{data:d,customHeader:{name:"x-ms-refreshcampaigncache",value:!0}}))}},{key:"getVideo",value:function(e){var t=e.id;return et.odata.get("".concat(this.baseURL,"/Videos/").concat(t),this.oDataConfig)}},{key:"patchVideo",value:function(e){var t=e.id,i=e.deltaVideo;return et.odata.patch("".concat(this.baseURL,"/Videos/").concat(t),Object(n.a)({},this.oDataConfig,{data:i}))}},{key:"deleteVideo",value:function(e){var t=e.id;return et.odata.delete("".concat(this.baseURL,"/Videos/").concat(t),this.oDataConfig)}},{key:"createVideoBasedOnOriginalVideo",value:function(e){var t=e.id,i=e.data;return et.odata.post("".concat(this.baseURL,"/Videos('").concat(t,"')/Default.CreateVideoBasedOnOriginalVideo"),Object(n.a)({},this.oDataConfig,{data:i}))}}]),e}(),nn=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onUserVideoSearch=function(e){i.setState({searchValue:e},function(){return i.userVideoDataSource.searchAsync(i.state.searchValue,i.state.sortBySelection.id)})},i.onSortBySelect=function(e){i.setState({sortBySelection:e},function(){return i.userVideoDataSource.searchAsync(i.state.searchValue,i.state.sortBySelection.id)})},i.onPillChange=function(e){var t=e.index;i.setState({pillControlIndex:t,errors:[]})},i.onUrlChanged=function(e){i.setState({videoUrl:e.target.value})},i.onUrlSubmit=function(){i.showUiBlocker(!0);var e=i.state.videoUrl;i.videoRepository.postVideoByUrl({videoUrl:e,description:""}).then(function(t){i.setState({videoUrl:""}),i.props.onVideoPostByUrl(t,e)}).catch(function(e){i.showErrors(Ii(e,i.props.i18n))}).finally(function(){i.showUiBlocker(!1)})},i.showErrors=function(e){return i.setState({errors:e})},i.showUiBlocker=function(e){return i.setState({blockUi:e})};var n=i.props.i18n;return i.videoRepository=e.videoRepository||new tn(e.cid,e.aid,e.oDataConfig,e.activityLogger),i.userVideoDataSource=Wi({videoRepository:i.videoRepository}),i.sortBySelectionItems=[{id:p.videoSortBySelections.recentUpload.id,value:n.getString("ImageExperience_Sort_Recent_Upload")},{id:p.videoSortBySelections.description.id,value:n.getString("ImageExperience_Sort_Video_Text")}],i.pillControlItems=[{name:n.getString("ImageExperience_Existing_Videos"),href:"#",value:"existingVideos"},{name:n.getString("ImageExperience_Upload"),href:"#",value:"upload"}],i.defaultState={sortBySelection:i.sortBySelectionItems[0],blockUi:!1,errors:[],pillControlIndex:0,videoUploadUrl:"",videoUrl:"",uploadOptionKey:"upload-local-file",searchValue:""},i.state=i.defaultState,i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.isOpen||this.setState(this.defaultState),!e.isOpen&&this.props.isOpen&&0===this.state.pillControlIndex&&this.userVideoDataSource.searchAsync(null,this.state.sortBySelection.id)}},{key:"render",value:function(){var e=this,t=this.props,i=t.i18n,n=t.isReplace,a=t.isLazyLoadEnabled,r=t.onVideoSelected,o=t.videoList,s=t.shouldShowContentOnly,l=this.state,c=l.pillControlIndex,d=l.sortBySelection,u=0===c,p=1===c,g=1===c&&this.props.isVideoUploading,h={"upload-local-file":k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"upload-local-file-container"},k.a.createElement(E.TextField,{placeholder:i.getString("ImageExperience_Add_Video_File_Placeholder"),value:this.props.videoFile?this.props.videoFile.name:"",readOnly:!0,className:"file-picker-input",ariaLabel:i.getString("ImageExperience_Add_Video_File_AriaLabel")}),!g&&k.a.createElement(Ot,{onFileRead:this.props.onFileRead,showErrors:this.showErrors,i18n:i,isVideo:!0})),g&&k.a.createElement(k.a.Fragment,null,k.a.createElement(Qi,{totalBytes:this.props.videoFile.size,uploadedBytes:this.props.videoUploadedBytes,i18n:i}),k.a.createElement(E.DefaultButton,{className:"cancel-upload-button",ariaLabel:"".concat(this.props.i18n.getString("Audience_Campaign_Cancel_Label")," ").concat(this.props.i18n.getString("ImageExperience_Upload")),text:this.props.i18n.getString("Audience_Campaign_Cancel_Label"),onClick:this.props.onCancelUpload}))),"upload-from-url":k.a.createElement(Xi,{i18n:i,url:this.state.videoUrl,onUrlChanged:this.onUrlChanged,onSubmit:this.onUrlSubmit})},m=function(){return k.a.createElement("div",{className:"add-image-content-container add-video-content-container"},k.a.createElement("div",{className:"add-image-content"},k.a.createElement("div",{className:"add-image-description"},k.a.createElement("span",null,"".concat(i.getString("ImageExperience_AddVideoDescription")," ")),k.a.createElement(Ve.f,{linkText:i.getString("ImageExperience_BestPracticeHelp_Video"),topic:"app54794"})),k.a.createElement(Fe.PillControl,{className:"pill-control",defaultSelectedIndex:c,onItemChange:function(t){var i=t.name,n=t.value,a=t.index;return e.onPillChange({name:i,value:n,index:a})},items:e.pillControlItems}),k.a.createElement("div",{className:"clearfix"},u&&k.a.createElement("div",null,k.a.createElement("div",{className:"user-image-search-box"},k.a.createElement(ei,{onSearch:function(t){return e.onUserVideoSearch(t)},searchBoxPlacedHolderText:"Video names",searchBoxAriaLabel:"Video names"})),k.a.createElement("div",{className:"dropdown-selector-container"},k.a.createElement(Ne.DropdownSelector,{totalCount:2,i18n:i,selectedItem:d,onSelect:e.onSortBySelect,mode:"simple",items:e.sortBySelectionItems,dropdownMenuAriaLabel:i.getString("ImageExperience_SortBy"),enableArrowKeysSupport:!0,shouldFocusFirstFocusableItemOnMount:!0})),k.a.createElement("span",{className:"sort-by-label"},i.getString("ImageExperience_SortBy")))),u&&k.a.createElement(Gi,{showUiBlocker:e.showUiBlocker,videoRepository:e.videoRepository,showErrors:e.showErrors,userVideoDataSource:e.userVideoDataSource,onVideoSelected:r,isLazyLoadEnabled:a,i18n:i,videoList:o}),p&&k.a.createElement(E.ChoiceGroup,{className:"upload-choice-group",defaultSelectedKey:e.state.uploadOptionKey,label:i.getString("ImageExperience_Choose_Video_Description"),options:[{key:"upload-local-file",text:i.getString("ImageExperience_Add_Video_Option_Local"),ariaLabel:i.getString("ImageExperience_Add_Video_Option_Local"),onRenderField:function(t,i){return k.a.createElement(k.a.Fragment,null,i(t),"upload-local-file"===e.state.uploadOptionKey&&h[e.state.uploadOptionKey])},disabled:e.state.isVideoUploading},{key:"upload-from-url",text:i.getString("ImageExperience_Add_Video_Option_URL"),ariaLabel:i.getString("ImageExperience_Add_Video_Option_URL"),onRenderField:function(t,i){return k.a.createElement(k.a.Fragment,null,i(t),"upload-from-url"===e.state.uploadOptionKey&&h[e.state.uploadOptionKey])},disabled:e.state.isVideoUploading}],onChange:function(t,i){return e.setState({uploadOptionKey:i.key})},disabled:e.props.isVideoUploading}),e.state.errors.map(function(e,t){return k.a.createElement("div",{className:"error",key:"".concat(t)},e)}),k.a.createElement("div",{className:"add-image-button-bar"},k.a.createElement("button",{className:"add-image-cancel-button btn btn-default",onClick:e.props.onSelectionCanceled},i.getString("Audience_Campaign_Cancel_Label")))))};return s?m():k.a.createElement(Be.a,{title:n?i.getString("ImageExperience_ReplaceVideoTitle"):i.getString("ImageExperience_AddVideoTitle"),isOpen:this.props.isOpen,onClose:this.props.onSelectionCanceled,getContainer:"body",panelClassName:this.props.classes.addImageStyle,i18n:i,panelReadyAriaLabel:i.getString("Add video side panel opened")},k.a.createElement(q.UiBlocker,{blocking:this.state.blockUi,loadingText:i.getString("Loading")},m()))}}]),t}(k.a.PureComponent);nn.defaultProps={isReplace:!1,isOpen:!1,cid:"",staticImagePath:null,videoFile:null,isVideoUploading:!1,videoUploadedBytes:0,videoList:[],oDataConfig:null,activityLogger:{signal:c.a.noop},shouldShowContentOnly:!1};var an=Object(O.withDefaultStyles)(Object(A.withPerfMarker)(nn),Kt),rn=function(e){var t=e.ratio,i=e.thumbnail,n=e.containerHeight,a=e.thumbnailMode,r=n*t;return k.a.createElement("div",{className:"thumbnail-preview-container"},k.a.createElement("div",{className:"thumbnail-preview",style:{width:r,height:n,backgroundImage:"url(".concat(i,")"),backgroundPosition:"center",backgroundSize:"Automatic"===a?"contain":"cover",backgroundRepeat:"no-repeat"}}))};rn.defaultProps={thumbnail:""};Ki.a.shape(c.a.values(p.videoTypeToThumbnailType).reduce(function(e,t){return e[t]=Ki.a.instanceOf(g),e},{})),Ki.a.arrayOf(Ki.a.shape({Id:Ki.a.string,Name:Ki.a.string,Lcid:Ki.a.number.isRequired,Format:Ki.a.string.isRequired,FileExtension:Ki.a.string,File:Ki.a.instanceOf(File)}));var on=function(e){function t(){var e,i;Object(a.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=Object(S.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).onEditSelect=function(e,t){var n=t.target.parentNode.parentNode.dataset.type;switch(e){case"replace":i.props.onReplace(n);break;case"edit":i.props.onEdit(n)}},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,i=t.i18n,n=t.onCancelUpload,a=t.uploadVideo,r=t.permissions.IsVideoAdEditorEnabled,o=t.customThumbnailRecord;return k.a.createElement("div",{className:"image-list-view-content ".concat(this.props.classes.root)},k.a.createElement("div",{className:"image-list clearfix"},k.a.createElement("div",null,k.a.createElement("span",{className:"image-list-label"},this.props.i18n.getString("ImageExperience_Video_List_Label")),k.a.createElement(T.HelpPopup,{topic:"pop_BA_VideoAds_VideoSource","aria-label":this.props.i18n.getString("Click to learn more about {{item}}",{item:this.props.i18n.getString("ImageExperience_Video_List_Label")})})),k.a.createElement("div",{className:"image-list-content"},p.videoTypesWithOrder.map(function(t){var s=c.a.find(e.props.videoList,function(e){return e.Type===t}),l=!1,d=null;if(s)if(a&&a.type===s.Type)l=!0,d=k.a.createElement("div",{style:{width:Math.max(150,150*p.videoAspectRatios[s.Type].ratio),height:150,paddingTop:40}},k.a.createElement(Qi,{totalBytes:a.file.size,uploadedBytes:a.uploadedBytes,i18n:i,type:"circle"}),k.a.createElement("div",{className:"cancel-upload-button-container"},k.a.createElement(E.DefaultButton,{className:"cancel-upload-button",ariaLabel:"".concat(i.getString("Audience_Campaign_Cancel_Label")," ").concat(i.getString("ImageExperience_Upload")),text:i.getString("Audience_Campaign_Cancel_Label"),onClick:n})));else if("Active"===s.status){var u=o[p.videoTypeToThumbnailType[s.Type]],g=u&&u.ThumbnailUrl||s.ThumbnailUrl;d=k.a.createElement(rn,{ratio:p.videoAspectRatios[s.Type].ratio,thumbnail:g,containerHeight:150,thumbnailMode:u?"Manual":"Automatic"})}else"Draft"===s.status?d=k.a.createElement("div",{style:{width:Math.max(150,150*p.videoAspectRatios[s.Type].ratio),height:150}},k.a.createElement(Ri,{i18n:i,textColor:"white"})):"Unverified"===s.status?d=k.a.createElement("div",{style:{width:Math.max(150,150*p.videoAspectRatios[s.Type].ratio),height:150}},k.a.createElement(Li,{i18n:i,textColor:"white"})):"Failed"===s.status&&(d=k.a.createElement("div",{style:{width:Math.max(150,150*p.videoAspectRatios[s.Type].ratio),height:150}},k.a.createElement(Vi,{i18n:i,textColor:"white"})));else d=null;return k.a.createElement("div",{className:"image-list-item",key:t},k.a.createElement("div",{className:"image-list-item-video","data-video-id":s&&s.IdString},d,k.a.createElement(fi.Dropdown,{className:"image-edit-dropdown",onSelect:e.onEditSelect,id:"image-edit-dropdown"},k.a.createElement(fi.Dropdown.Toggle,{"aria-label":e.props.i18n.getString("ImageExperience_Edit_Video_Label",{ratio:p.videoAspectRatios[t].text})}),k.a.createElement(fi.Dropdown.Menu,{"data-type":t},k.a.createElement(fi.MenuItem,{eventKey:"replace",disabled:l},e.props.i18n.getString("ImageExperience_Replace")),r&&k.a.createElement(fi.MenuItem,{eventKey:"edit",disabled:l},e.props.i18n.getString("ImageExperience_EditVideo"))))),k.a.createElement("div",{className:"image-item-ratio-label"},e.props.i18n.getString(p.videoAspectRatios[t].stringKey)))}),k.a.createElement("button",{className:"remove-all-button",onClick:this.props.onRemoveAll,"aria-label":this.props.i18n.getString("ImageExperience_RemoveAllVideos")}))))}}]),t}(k.a.PureComponent);on.defaultProps={uploadVideo:null,permissions:{},customThumbnailRecord:{}};var sn=Object(O.withDefaultStyles)(on,function(){return{root:{"& .cancel-upload-button-container":{display:"flex",justifyContent:"center",marginTop:4,"& button":{height:24,minWidth:56,width:56}}}}}),ln=function(){function e(t,i,n,r){Object(a.a)(this,e),this.cid=t,this.aid=i,this.baseURL="".concat(n.odataPath,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/"),this.oDataConfig={oDataToken:n.odataToken,oDataTokenType:n.oDataTokenType,applicationName:n.applicationName},this.uploader=new en.AzureUploader({logger:r?{trace:r.signal,error:r.error}:{trace:c.a.noop,error:c.a.noop}})}return Object(r.a)(e,[{key:"getResourceUploadUrl",value:function(e){var t=e.fileExtension,i=e.resourceType,n=e.videoId,a="".concat(this.baseURL,"Videos('").concat(n,"')/Resources/Default.GetUploadUrl(resourceType=Enum.VideoResourceType'").concat(i,"',fileExtension='").concat(t,"')");return et.odata.get(a,this.oDataConfig)}},{key:"getResources",value:function(e){var t=e.videoId,i="".concat(this.baseURL,"Videos('").concat(t,"')/Resources");return et.odata.get(i,this.oDataConfig)}},{key:"createResourceFromBlob",value:function(e){var t=e.videoId,i=e.blobName,a=e.type,r=e.odataType,o=e.resourceParamters,s="".concat(this.baseURL,"Videos('").concat(t,"')/Resources");return et.odata.post(s,Object(n.a)({},this.oDataConfig,{urlParameters:{blobName:i},data:Object(n.a)({"@odata.type":r,Type:a},o)}))}},{key:"createResource",value:function(e){var t=this,i=e.videoId,n=e.file,a=e.fileExtension,r=e.onProgress,o=e.odataType,s=e.resourceType,l=e.resourceParamters;return this.getResourceUploadUrl({fileExtension:a,resourceType:s,videoId:i}).then(function(e){var a=e.BlobName;return t.uploader.uploadPayloadToBlob({blob:e,payload:new en.FilePayload({file:n}),onProgress:r}).then(function(){return t.createResourceFromBlob({videoId:i,blobName:a,type:s,odataType:o,resourceParamters:l})})})}},{key:"deleteResource",value:function(e){var t=e.videoId,i=e.resourceId,n="".concat(this.baseURL,"Videos('").concat(t,"')/Resources('").concat(i,"')");return et.odata.delete(n,this.oDataConfig)}}]),e}(),cn=function(){function e(t){Object(a.a)(this,e),this.videoRepository=t,this.syncIntervalMS=5e3,this.running=!1}return Object(r.a)(e,[{key:"startSync",value:function(e){var t=e.idString,i=e.shouldStop,n=e.onUpdate,a=void 0===n?c.a.noop:n,r=e.onError,o=void 0===r?c.a.noop:r;this.running=!0,this.syncTask({idString:t,shouldStop:i,onUpdate:a,onError:o})}},{key:"syncTask",value:function(e){var t=this,i=e.idString,n=e.shouldStop,a=e.onUpdate,r=void 0===a?c.a.noop:a,o=e.onError,s=void 0===o?c.a.noop:o,l=e.previousStatus,d=void 0===l?void 0:l;this.running&&this.videoRepository.getVideo({id:i}).then(function(e){t.running&&(n()||(d!==e.Status&&r(e),e.Status&&"Active"!==e.Status&&"Failed"!==e.Status&&setTimeout(function(){return t.syncTask({idString:i,shouldStop:n,onUpdate:r,previousStatus:e.Status})},t.syncIntervalMS)))}).catch(s)}},{key:"stopAll",value:function(){this.running=!1}}]),e}(),dn=function(e){var t=e.i18n,i=e.onThumbnailModeChanged,n=e.mode;return k.a.createElement("div",{className:"thumbnail-edit-container"},k.a.createElement("div",{className:"description"},t.getString("ImageExperience_ThumbnailDescription")),k.a.createElement(E.ChoiceGroup,{onChange:function(e,t){return i(t.key)},selectedKey:n,options:[{key:"Automatic",text:"".concat(t.getString("ImageExperience_AutomaticThumbnail")," - ").concat(t.getString("ImageExperience_AutomaticThumbnailDescription"))},{key:"Manual",text:t.getString("ImageExperience_ManualThumbnail")}]}))};dn.defaultProps={onThumbnailModeChanged:c.a.noop};var un=function(e){var t=e.i18n,i=e.video,a=e.perfMarker,r=e.thumbnailRecord,o=e.setThumbnailRecord,s=e.thumbnailMode,l=e.setThumbnailMode,c=e.cid,d=e.aid,u=e.staticImagePath,g=e.oDataConfig,h=e.permissions,m=e.isStockPhotoEnabled,f=k.a.useState(!1),v=Object(_.a)(f,2),b=v[0],y=v[1],S=function(e){var t=r[p.videoTypeToThumbnailType[i.Type]];t.setCropSettings(e),o(Object(n.a)({},r,Object(Q.a)({},t.Type,t)))};return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"edit-container"},k.a.createElement(dn,{i18n:t,onThumbnailModeChanged:l,mode:s})),"Manual"===s&&k.a.createElement("div",{className:"preview-container"},function(){var e=r[p.videoTypeToThumbnailType[i.Type]];return"Manual"!==s||e?k.a.createElement("div",{className:"thumbnail-cropper-container"},k.a.createElement(R,{aspectRatio:p.videoAspectRatios[i.Type].ratio,boxHeight:360,minSize:p.videoAspectRatios[i.Type].thumbnailCropSetting.minSize,imageSource:e.Src,cropSettings:e.CropSettings,onCropSettingsChanged:S})):k.a.createElement("div",{className:"preview-unavailable"},t.getString("ImageExperience_VideoNoCustomThumbnail_NoPreview"))}(),k.a.createElement(E.DefaultButton,{className:"select-image-button",text:t.getString("ImageExperience_ChooseThumbnail"),onClick:function(){return y(!0)}})),k.a.createElement(di,{isImageSelectorDisplayed:b,onSelectedImagesSet:function(e){e.setType(p.videoTypeToThumbnailType[i.Type]),o(Object(n.a)({},r,Object(Q.a)({},e.Type,e))),y(!1)},onImageSelectionCanceled:function(){return y(!1)},imageType:null,i18n:t,perfMarker:a.createChild("thumbnailPicker"),isChooseThumbnail:!0,isForVNext:!0,cid:c,aid:d,oDataConfig:g,isLazyLoadEnabled:!0,staticImagePath:u,permissions:h,isStockPhotoEnabled:m}))};un.defaultProps={oDataConfig:{},activityLogger:null,permissions:{},thumbnailRecord:{}};var pn=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).readFile=function(){var e=i.props.onFileRead;i.filePicker.fileObject&&(e(i.filePicker.fileObject),i.filePicker.removeFile())};var n=e.i18n,r=e.showErrors,o={allowedFileExtensions:[".srt"],i18n:n,isNative:!1,displayFilePath:"filename"};return i.filePicker=new Tt.FilePicker(o),i.filePicker.on("validated",i.readFile),i.filePicker.on("error.extension",function(){return r([k.a.createElement("span",null,n.getString("ImageExperience_Error_MediaFormatNotSupported"))])}),i.filePicker.render(),i.filePicker.$(".remove-file").remove(),i.filePicker.$(".file-text").hide(),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.i18n,i=e.captionFile;return k.a.createElement("div",{className:"upload-caption-file-container"},k.a.createElement(E.TextField,{placeholder:t.getString("ImageExperience_UploadCaptionFile_Placeholder"),value:i?i.name:"",readOnly:!0,className:"file-picker-input"}),k.a.createElement("div",{className:"file-picker-container"},k.a.createElement("div",{className:"file-picker-react-wrapper"},k.a.createElement(_t.BackboneInstanceWrapper,{instance:this.filePicker}))))}}]),t}(k.a.PureComponent);pn.defaultProps={captionFile:null};var gn=pn,hn=function(e){var t=e.classes,i=e.text,n=e.onRemove;return k.a.createElement("div",{className:t.root},k.a.createElement("span",{className:"text"},i),n&&k.a.createElement(E.IconButton,{iconProps:{iconName:"Cancel"},onClick:n}))};hn.defaultProps={onRemove:null};var mn=Object(O.withDefaultStyles)(hn,function(){return{root:{display:"inline-flex",alignItems:"center",height:36,paddingLeft:4,paddingRight:4,background:"#e9ebee",border:"1px solid #9cb4d8",borderRadius:"4px","& .text":{lineHeight:"32px",cursor:"default"}}}}),fn=function(e){var t=e.i18n,i=e.resourceRepository,n=e.videoId,a=e.captions,r=e.updateCaptions,o=e.errors,s=e.setErrors,l=e.block,d=e.setBlock,u=e.activityLogger,g=k.a.useState(!1),h=Object(_.a)(g,2),m=h[0],f=h[1],v=k.a.useState(""),b=Object(_.a)(v,2),y=b[0],S=b[1],w=k.a.useState(null),C=Object(_.a)(w,2),x=C[0],A=C[1],T=function(){return f(!1)};return k.a.createElement("div",{className:"edit-container caption-editor"},k.a.createElement("div",{className:"title"},t.getString("ImageExperience_EditCaptionTitle")),k.a.createElement("div",{className:"edit-caption-description"},t.getString("ImageExperience_EditCaptionDescription"),k.a.createElement(Ve.f,{linkText:t.getString("Learn more"),topic:""})),k.a.createElement("div",{className:"caption-container"},l?k.a.createElement(E.Spinner,{size:E.SpinnerSize.large,label:t.getString("Loading")}):k.a.createElement(k.a.Fragment,null,a.length>0?a.map(function(e){return k.a.createElement("div",{key:"".concat(e.Name,"-").concat(e.Lcid)},k.a.createElement(mn,{text:p.LcidToFullName(e.Lcid),onRemove:function(){return t=e.Id,f(!0),S(t),void u.signal("delete caption","video editor");var t}}))}):k.a.createElement("div",{className:"description"},t.getString("ImageExperience_NoCaptionFile")),k.a.createElement(gn,{i18n:t,showErrors:s,onFileRead:function(e){A(e);var o=function(e,t,i,n){var a=e.name,r=a.split("."),o=r.pop().toLowerCase(),s=r.pop(),l=p.TagToLcid(s);return l?t.find(function(e){return e.Lcid===l})?(n([i.getString("ImageExperience_Video_Error_DuplicateVideoResource")]),null):{Id:"",Name:a,FileExtension:".".concat(o),Lcid:l,Format:o.charAt(0).toUpperCase()+o.slice(1)}:(n([i.getString("ImageExperience_Video_Error_FileNameWrongFormat")]),null)}(e,a,t,s);o&&(d(!0),s([]),i.createResource({file:e,onProgress:c.a.noop,fileExtension:o.FileExtension,videoId:n,odataType:"#Model.VideoCaptionFile",resourceType:"Caption",resourceParamters:{Lcid:o.Lcid,Format:o.Format}}).then(function(){return u.signal("add caption: caption: ".concat(JSON.stringify(o)),"video editor"),r()}).catch(function(e){return s(Ii(e,t))}).finally(function(){return d(!1)}))},captionFile:x}))),k.a.createElement(E.Dialog,{hidden:!m,onDismiss:T,dialogContentProps:{type:E.DialogType.normal,title:t.getString("ImageExperience_DeleteCaptionTitle")},modalProps:{isBlocking:!0,className:"delete-confirm-dialog"}},k.a.createElement("div",null,t.getString("ImageExperience_DeleteCaptionDescription")),k.a.createElement(E.DialogFooter,null,k.a.createElement(E.PrimaryButton,{onClick:function(){f(!1),d(!0),s([]),A(null),i.deleteResource({videoId:n,resourceId:y}).then(function(){return r()}).catch(function(e){return s(Ii(e,t))}).finally(function(){return d(!1)})},text:t.getString("ImageExperience_Confirm")}),k.a.createElement(E.DefaultButton,{onClick:T,text:t.getString("ImageExperience_Cancel")}))),o.map(function(e){return k.a.createElement(E.MessageBar,{messageBarType:E.MessageBarType.error,isMultiline:!0,styles:{root:{marginTop:10}},key:e},e)}))};fn.defaultProps={captions:[],updateCaptions:c.a.noop,errors:[],setErrors:c.a.noop,block:!1,setBlock:c.a.noop,activityLogger:{signal:c.a.noop,error:c.a.noop}};var vn=i("GRNs"),bn=i("0GbV"),yn="Clipper",Sn="Cropper",wn="Thumbnail",Cn=function(e){var t=e.errors;return t&&t.map(function(e){return k.a.createElement("div",{className:"error",key:e.id},e.message)})};var xn=function(e){var t=e.i18n,i=e.video,a=e.errors,r=e.onCropSettingChanged,o=p.videoAspectRatios[i.Type],s=i.Height/400,l=c.a.debounce(function(e){var t=e.x,n=e.y,a=e.height,l=Math.floor(a*s),c=Math.floor(l*o.ratio);o.ratio<1&&(c=Math.ceil(l*o.ratio));var d=Math.floor(t*s),u=Math.floor(n*s),p="Crop-[".concat(c,"x").concat(l,"]@(").concat(d,",").concat(u,")").concat(i.Text?"-".concat(i.Text):"");r({x:d,y:u,width:c,height:l,name:p})},16),d=k.a.useMemo(function(){return function(e,t){var i=e.Width/e.Height;return i>=t.Width/t.Height?{Width:t.Width,Height:t.Width/i}:{Width:t.Height*i,Height:t.Height}}(i,{Height:400,Width:400*o.ratio})},[i,o.ratio]);return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"description"},t.getString("ImageExperience_CropperDescription")),k.a.createElement("div",{className:"cropper-editor crop-container"},k.a.createElement(bn.VideoControls,{width:400*o.ratio},k.a.createElement("div",{style:{height:400,width:400*o.ratio,display:"flex",justifyContent:"center",alignItems:"center",background:"black"}},k.a.createElement(vn.Cropper,{options:Object(n.a)({},o.cropSetting,{targetSetting:{height:d.Height,width:d.Width},aspectRatio:o.ratio,onCropEnd:l,onCropMove:l,onInitialize:function(e){return l(e.getValue())}})},k.a.createElement("video",{src:i.Src,poster:i.thumbnailUrl,width:d.Width,height:d.Height,controls:!1}))))),k.a.createElement(Cn,{errors:a}))};xn.defaultProps={errors:[]};var kn=i("INYr"),An=function(e){var t=e.maxWidth,i=e.height,n=e.width,a=e.ratio,r=e.src,o=e.thumbnailUrl,s=e.hideControls,l=e.isCurrent,d=e.activityLogger,u=e.onPlayStatusUpdate,p=t/a,g=k.a.useRef();return k.a.useEffect(function(){if(g.current&&r){var e=0,a=!1,o=function(){u(!0),a||(a=!0,e=Date.now())},s=Date.now(),l=function(){if(g.current&&a){var r=g.current.buffered;1===r.length&&0===r.start(0)&&r.end(0)===g.current.duration&&d.signal({duration:g.current.duration,imageOriginWidth:n,imageOriginHeight:i,playerWidth:t,playerHeight:p,timeCost:Date.now()-e},"video preview total buffer")}},h=function(e){g.current&&d.error(JSON.stringify({duration:g.current.duration,imageOriginWidth:n,imageOriginHeight:i,playerWidth:t,playerHeight:p,src:r,event:e}),"video preview error")},m=function(){u(!1)};g.current.addEventListener("canplay",function(){g.current&&d.signal({duration:g.current.duration,imageOriginWidth:n,imageOriginHeight:i,playerWidth:t,playerHeight:p,timeCost:Date.now()-s},"video preview first buffer")},{once:!0}),g.current.addEventListener("progress",l),g.current.addEventListener("play",o),g.current.addEventListener("pause",m),g.current.addEventListener("error",h);var f=g.current;return function(){f.removeEventListener("progress",l),f.removeEventListener("play",o),f.removeEventListener("pause",m),f.removeEventListener("error",h)}}return c.a.noop},[]),k.a.useEffect(function(){!l&&g.current&&g.current.pause(),l&&g.current&&setTimeout(function(){return g.current.focus()},600)},[l]),k.a.createElement("div",{className:"resized-video-view",style:{display:"flex",alignItems:"center",justifyContent:"center",width:t,height:p}},k.a.createElement("video",{width:"".concat(t,"px"),height:"".concat(p,"px"),poster:o,controls:!s,src:r,ref:g,controlsList:"nodownload nofullscreen",disablePictureInPicture:!0}))};An.defaultProps={src:null,thumbnailUrl:null,hideControls:!1,isCurrent:!1,activityLogger:{signal:c.a.noop,error:c.a.noop},onPlayStatusUpdate:c.a.noop};var Tn=function(e){var t=e.i18n,i=e.video,n=e.activityLogger,a=e.errors,r=e.onClipSettingChanged,o=e.onSelectionOutofSync,s=400*p.videoAspectRatios[i.Type].ratio,l=s<320?320:s;return k.a.createElement(k.a.Fragment,null,k.a.createElement("div",{className:"description"},t.getString("ImageExperience_ClipperDescription")),k.a.createElement("div",{className:"clipper-editor clip-container"},k.a.createElement(kn.VideoClipper,{width:l,onSelectionChanged:function(e,t){var n="Trim-[".concat(Math.floor(1e3*e),"-").concat(Math.floor(1e3*t),"]").concat(i.Text?"-".concat(i.Text):"");r({start:Math.floor(1e3*e),end:Math.min(i.Duration,Math.floor(1e3*t)),name:n})},onSelectionOutofSync:o},k.a.createElement(An,{thumbnailUrl:i.thumbnailUrl,src:i.Src,width:i.Width,height:i.Height,maxWidth:l,ratio:p.videoAspectRatios[i.Type].ratio,activityLogger:n,hideControls:!0}))),k.a.createElement(Cn,{errors:a}))};Tn.defaultProps={activityLogger:{signal:c.a.noop,error:c.a.noop},errors:[],onSelectionOutofSync:c.a.noop};var _n=1,En=function(e){return e?{position:"absolute",left:2e3,top:0}:{}},In=function(e){var t=e.classes,i=e.onDismiss,a=e.i18n,r=e.video,o=e.onSaveThumbnail,s=e.onCropped,l=e.onClipped,d=e.videoRepository,u=e.permissions,g=u.IsVideoAdEditorCropClipEnabled,h=u.IsVideoAdEditorThumbnailEnabled,m=u.IsVideoAdEditorCaptionEnabled,f=k.a.useState("Active"===r.Status&&g?yn:h?wn:null),v=Object(_.a)(f,2),b=v[0],y=v[1],S=k.a.useState([]),w=Object(_.a)(S,2),C=w[0],A=w[1],T=k.a.useState(!1),I=Object(_.a)(T,2),O=I[0],P=I[1],M=k.a.useState(!0),j=Object(_.a)(M,2),L=j[0],D=j[1],R=k.a.useState(!1),N=Object(_.a)(R,2),V=N[0],B=N[1],F=Object(x.useMemo)(function(){return C.filter(function(e){var t=e.scenario;return!t||t===yn})},[C]),U=Object(x.useMemo)(function(){return C.filter(function(e){var t=e.scenario;return!t||t===Sn})},[C]),G=function(e){var t=e.i18n,i=e.video,a=e.perfMarker,r=e.cid,o=e.aid,s=e.oDataConfig,l=e.isStockPhotoEnabled,c=e.isLazyLoadEnabled,d=e.permissions,u=e.staticImagePath,g=e.activityLogger,h=e.thumbnailRecord,m=k.a.useState(h),f=Object(_.a)(m,2),v=f[0],b=f[1],y=v[p.videoTypeToThumbnailType[i.Type]]?"Manual":"Automatic",S=k.a.useState(y),w=Object(_.a)(S,2),C=w[0],x=w[1];return{component:k.a.createElement(un,{i18n:t,perfMarker:a,cid:r,aid:o,oDataConfig:s,isStockPhotoEnabled:l,isLazyLoadEnabled:c,permissions:d,staticImagePath:u,activityLogger:g,video:i,thumbnailRecord:v,setThumbnailRecord:b,thumbnailMode:C,setThumbnailMode:x}),getData:function(){if(v===h&&C===y)return null;g.signal("update thumbnail: mode: ".concat(C),"video editor");var e=Object(n.a)({},v);return"Automatic"===C&&delete e[p.videoTypeToThumbnailType[i.Type]],e}}}(e),z=G.component,H=G.getData,W=function(e){var t=e.i18n,i=e.resourceRepository,n=e.video,a=e.activityLogger,r=k.a.useState([]),o=Object(_.a)(r,2),s=o[0],l=o[1],c=k.a.useState([]),d=Object(_.a)(c,2),u=d[0],p=d[1],g=k.a.useState(!1),h=Object(_.a)(g,2),m=h[0],f=h[1],v=k.a.useCallback(function(){return i.getResources({videoId:n.IdString}).then(function(e){return e.value?e.value.filter(function(e){return"Caption"===e.Type}):[]}).then(function(e){l(e)}).catch(function(e){return p(Ii(e,t))})},[n.IdString,i,t]);return k.a.useEffect(function(){f(!0),v().finally(function(){return f(!1)})},[v]),{component:k.a.createElement(fn,{i18n:t,resourceRepository:i,videoId:n.IdString,captions:s,updateCaptions:v,errors:u,setErrors:p,block:m,setBlock:f,activityLogger:a}),captions:s}}(e),$=W.component,K=W.captions,J=function(e){var t=e.i18n,i=e.video,n=e.errors,a=k.a.useState({}),r=Object(_.a)(a,2),o=r[0],s=r[1];return{component:k.a.createElement(xn,{i18n:t,video:i,errors:n,onCropSettingChanged:s,cropSetting:o}),getData:function(){return o}}}(Object(n.a)({},e,{errors:U})),Z=J.component,Y=J.getData,Q=function(e){var t=e.i18n,i=e.video,n=e.activityLogger,a=e.errors,r=k.a.useState({}),o=Object(_.a)(r,2),s=o[0],l=o[1],c=k.a.useState(!1),d=Object(_.a)(c,2),u=d[0],p=d[1];return{component:k.a.createElement(Tn,{i18n:t,video:i,activityLogger:n,errors:a,onClipSettingChanged:l,onSelectionOutofSync:p}),isSelectionOutofSync:u,getData:function(){return s}}}(Object(n.a)({},e,{errors:F})),X=Q.component,ee=Q.isSelectionOutofSync,te=Q.getData,ie=Object(x.useMemo)(function(){return{message:a.getString("ImageExperience_Video_UploadError_NoInternet")}},[a]),ne=Object(x.useMemo)(function(){return b===yn&&ee},[ee,b]),ae=function(e){var t=function(e,t,i){return Ii(t,i).map(function(t){return{scenario:e,message:t,id:c.a.uniqueId("edit_video_error_")}})}(b,e,a)||ie;A(t)},re=function(e,t,a){c.a.isEmpty(e)?i():(B(!0),d.createVideoBasedOnOriginalVideo({id:r.IdString,data:{CropWidth:e.width,CropHeight:e.height,CropX:e.x,CropY:e.y,StartClipTime:e.start,EndClipTime:e.end,Description:e.name}}).then(function(e){c.a.isFunction(t)&&t(e,r.Type,Object(n.a)({originalIdString:r.IdString},a))}).catch(ae).finally(function(){return B(!1)}))},oe=function(){if(b===wn){var e=H();e?o({thumbnailRecord:e}):i()}if(b===yn){var t=te();!c.a.isEmpty(t)&&K.length>0?P(!0):re(t,l,{isApplyTrimToAllAspectRatio:L})}if(b===Sn){var n=Y();re(n,s)}},se=function(){return P(!1)};return k.a.createElement(E.Panel,{isOpen:!0,onDismiss:i,type:E.PanelType.custom,hasCloseButton:!0,customWidth:1e3,className:t.root,headerText:"".concat(a.getString("ImageExperience_EditVideo")," ").concat(a.getString(p.videoAspectRatios[r.Type].stringKey)),onRenderFooterContent:function(){return k.a.createElement("div",{className:"footer-container"},k.a.createElement(E.PrimaryButton,{onClick:oe,text:a.getString("Apply"),disabled:V||ne}),k.a.createElement(E.DefaultButton,{onClick:function(){return i()},text:a.getString("Audience_Campaign_Cancel_Label")}),b===yn?k.a.createElement(E.Checkbox,{className:"apply-to-all",label:a.getString("ImageExperience_ApplyTrimAndCaptionToAllRatio",{effects:g&&m?a.getString("ImageExperience_EditVideo_Trim_And_Captions"):a.getString("ImageExperience_EditVideo_Trim_Only")}),onChange:function(){return D(!L)},checked:L}):null)},isFooterAtBottom:!0,layerProps:{eventBubblingEnabled:!0,className:"edit-video-layer"}},k.a.createElement(q.UiBlocker,{blocking:V,loadingText:a.getString("ImageExperience_Video_Status_Encoding")},k.a.createElement("div",{className:"edit-video-container"},k.a.createElement("div",{className:"edit-video-description"},a.getString("ImageExperience_Video_Editor_Description"),k.a.createElement(Ve.f,{linkText:a.getString("Learn more"),topic:""})),k.a.createElement(E.Pivot,{linkFormat:_n,onLinkClick:function(e){return y(e.props.itemKey)},selectedKey:b,headersOnly:!0},g&&k.a.createElement(E.PivotItem,{itemKey:"Clipper",headerText:a.getString("ImageExperience_EditVideo_Trim"),headerButtonProps:{disabled:"Active"!==r.Status}}),g&&k.a.createElement(E.PivotItem,{itemKey:"Cropper",headerText:a.getString("ImageExperience_EditVideo_Crop"),headerButtonProps:{disabled:"Active"!==r.Status}}),h&&k.a.createElement(E.PivotItem,{itemKey:"Thumbnail",headerText:a.getString("ImageExperience_EditVideo_Thumbnail")})),k.a.createElement("div",{style:En(!(g&&b===yn))},X,m&&$),k.a.createElement("div",{style:En(!(g&&b===Sn))},Z),k.a.createElement("div",{style:En(!(h&&b===wn))},z)),k.a.createElement(E.Dialog,{hidden:!O,onDismiss:se,dialogContentProps:{type:E.DialogType.normal,title:a.getString("ImageExperience_ApplyClipNoticeTitle")},modalProps:{isBlocking:!0,className:"apply-clip-notice-dialog"}},k.a.createElement("div",null,a.getString("ImageExperience_ApplyClipNoticeDescription")),k.a.createElement(E.DialogFooter,null,k.a.createElement(E.PrimaryButton,{onClick:function(){P(!1);var e=te();re(e,l,{isApplyTrimToAllAspectRatio:L})},text:a.getString("ImageExperience_Proceed")}),k.a.createElement(E.DefaultButton,{onClick:se,text:a.getString("ImageExperience_Cancel")})))))};In.defaultProps={onDismiss:c.a.noop,onSaveThumbnail:c.a.noop,onCropped:c.a.noop,onClipped:c.a.noop,oDataConfig:{},isLazyLoadEnabled:!0,isStockPhotoEnabled:!0,activityLogger:{signal:c.a.noop,error:c.a.noop},thumbnailRecord:{},permissions:{}};var On=Object(O.withDefaultStyles)(Object(A.withPerfMarker)(In),function(){return{root:{"& .edit-video-container":{marginTop:20,paddingBottom:45,"& .ms-Pivot-link[disabled] .ms-Pivot-text":{color:"rgba(0, 0, 0, 0.55)"},"& .edit-video-description":{marginTop:20,marginBottom:35},"& .description":{marginTop:16,marginBottom:30},"& .title":{fontSize:14,fontWeight:600},"& .edit-container":{"& .thumbnail-edit-container":{"& .select-image-button":{marginTop:10},"& .thumbnail-candidate img":{marginTop:10,border:"3px solid rgb(0, 120, 212)"}},"& .file-picker-react-wrapper":{margin:0,padding:"14px 0 0 0",width:"100%","& .file-picker-btn":{extend:Wt()[".btn-default"],display:"inline-block",float:"none",marginLeft:0}}},"& .edit-container.caption-editor":{width:700,marginTop:20,"& .react-block-ui":{height:"100%"},"& .caption-container":{marginTop:10,"& .ms-Spinner":{display:"inline-flex",marginTop:20}},"& .upload-caption-file-container":{display:"flex",marginTop:10,"& .file-picker-react-wrapper":{marginLeft:8,padding:0}}},"& .preview-container":{marginLeft:24,marginTop:20,"& .thumbnail-preview-container":{display:"flex",width:950,marginBottom:20,"& .thumbnail-preview":{backgroundColor:"black"}},"& .preview-unavailable":{fontSize:14,marginBottom:20},"& .thumbnail-cropper-container":{marginBottom:20},"& .thumbnail-cropper-container .react-image-cropper":{margin:0}},"& .cropper-editor.crop-container, & .clipper-editor.clip-container":{marginLeft:10,display:"flex",justifyContent:"center"},"& .cropper-editor.crop-container":{"& > div > div:nth-child(2), & > div > div:nth-child(2) + div":{background:"black",color:"white","& i":{marginTop:12,marginBottom:12},"& i:first-child":{marginLeft:16},"& i:last-child":{marginRight:16},"& .ms-Slider-container":{marginLeft:16,marginRight:16}}},'& div[role="tablist"]':{marginBottom:"15px","& .ms-Pivot-link":{padding:0},"& button":{height:40,width:120,background:"#F3F2F1","& .ms-Pivot-text":{color:Lt},"&:hover":{background:"#EDEBE9"}},"& button.is-selected":{background:"#EFF6FC","& .ms-Pivot-text":{color:Lt,fontWeight:600},"&:hover":{background:"#C7E0F4"}}}},"& .error":{color:"#A80000",fontSize:12,margin:"4px 0 0 0"},"& .footer-container":{display:"flex","& .ms-Button":{borderRadius:"2px",marginRight:12},"& .apply-to-all":{position:"absolute",bottom:65,paddingLeft:1,paddingBottom:10,width:"96%",background:"rgba(255, 255, 255, 1)"}},"& .ms-Panel-footer":{borderTop:"1px solid #EDEBE9"},"& .ms-ChoiceField-wrapper label":{padding:0,"& .ms-ChoiceFieldLabel":{fontWeight:400}}}}}),Pn=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onAddVideo=function(){i.setState({isVideoSelectorDisplayed:!0}),i.props.onVideoListUpdated([])},i.onVideoSelected=function(e){if(i.logToSubstrate("selected a video"),i.setState({isVideoSelectorDisplayed:!1,errors:[]}),i.state.editingVideo)i.replaceVideo(new f(Object(n.a)({},e,{type:i.state.editingVideo.Type})));else{var t=[];p.videoTypesWithOrder.forEach(function(i){t.push(new f(Object(n.a)({},e,{type:i})))}),i.props.onVideoListUpdated(t)}i.setState({editingVideo:null})},i.onSaveThumbnail=function(e){var t=e.thumbnailRecord;i.props.onSaveThumbnailAsDraft({thumbnailRecord:t}),i.props.onVideoPreviewRequested(i.state.editingVideo.Type),i.setState({isEditVideoDisplayed:!1})},i.onCropped=function(e,t){i.syncVideo(e.value,t),i.setState({isEditVideoDisplayed:!1})},i.onClipped=function(e,t,n){var a=e.value,r=n.originalIdString,o=null;n.isApplyTrimToAllAspectRatio?(o=i.props.videoList.filter(function(e){return e.IdString===r}).map(function(e){return e.Type}),i.syncVideoForMultipleTypes(a,o)):i.syncVideo(a,t),i.setState({isEditVideoDisplayed:!1})},i.onVideoSelectionCanceled=function(){i.setState({isVideoSelectorDisplayed:!1,editingVideo:null})},i.onReplaceVideo=function(e){var t=c.a.find(i.props.videoList,function(t){return t.Type===e});t&&i.setState({isVideoSelectorDisplayed:!0,editingVideo:t.clone()})},i.onEditVideo=function(e){i.logToSubstrate("edit a video");var t=c.a.find(i.props.videoList,function(t){return t.Type===e});t&&i.setState({isEditVideoDisplayed:!0,editingVideo:t.clone()})},i.onRemoveAllVideos=function(){i.state.uploadVideoForReplace&&!confirm(i.props.i18n.getString("ImageExperience_Video_RemoveAllWithUpload_Confirm"))||(i.state.uploadVideoAsyncToken&&i.state.uploadVideoAsyncToken.cancel(),i.logToSubstrate("remove all videos"),i.setState({editingVideo:null}),i.props.onVideoListUpdated([]))},i.onCancelUpload=function(){confirm(i.props.i18n.getString("ImageExperience_Video_Upload_Cancel_Confirm"))&&i.state.uploadVideoAsyncToken&&i.state.uploadVideoAsyncToken.cancel()},i.onProgress=function(e){i.setState({videoUploadedBytes:e/100*i.state.videoFileUploading.size},function(){i.state.uploadVideoForReplace&&i.setState({uploadVideoForReplace:Object(n.a)({},i.state.uploadVideoForReplace,{uploadedBytes:i.state.videoUploadedBytes})})})},i.onFileRead=function(e){var t=i.state.editingVideo&&i.state.editingVideo.Type;i.logToSubstrateAdvanced("Start FileSize=".concat(e.size),"video upload");var n=i.props.perfMarker.createChild("videoUpload"),a=n.createChild("getBlob");n.willInit(),a.willInit(),i.setState({isVideoUploading:!0,videoUploadedBytes:0,videoFileUploading:e,uploadVideoForReplace:i.state.editingVideo?{type:t,file:e,uploadedBytes:0}:null,isVideoSelectorDisplayed:!1,errors:[]},function(){i.props.onVideoUploadStatusUpdate(!0),i.videoRepository.postVideoByFile({description:e.name,file:e,onProgress:i.onProgress}).then(function(t){return a.done(),i.setState({uploadVideoAsyncToken:t}),new o.Promise(function(n,a){t.on({onSuccess:n,onError:a,onCancel:function(){i.logToSubstrateAdvanced("Canceled FileSize=".concat(e.size),"video upload"),a()}})})}).then(function(a){i.logToSubstrateAdvanced("Finish FileSize=".concat(e.size),"video upload"),n.done({fileSize:e.size}),i.syncVideo(a.value,t)}).catch(function(t){if(t){var n=Ii(t,i.props.i18n)||i.props.i18n.getString("ImageExperience_Video_UploadError_NoInternet");i.showErrors(n),i.logToSubstrateAdvanced("Failed FileSize=".concat(e.size," Error=").concat(n.join("|")," Uploaded=").concat(i.state.videoUploadedBytes),"video upload")}}).finally(function(){i.setState({isVideoUploading:!1,videoFileUploading:null,uploadVideoAsyncToken:null,uploadVideoForReplace:null}),i.props.onVideoUploadStatusUpdate(!1)})})},i.onVideoPostByUrl=function(e){i.logToSubstrate("Video upload by url"),i.setState({isVideoSelectorDisplayed:!1,errors:[]},function(){var t=i.state.editingVideo?i.state.editingVideo.Type:null;i.syncVideo(e.value,t)})},i.getImagePathFromGenericImagePath=function(e){return c.a.isString(e)?e.substr(0,e.indexOf("1.91to1.jpg")):""},i.syncVideo=function(e,t){t?i.syncVideoForType(e,t):i.syncVideoForAllTypes(e)},i.syncVideoForType=function(e,t){i.replaceVideo(b({SubType:t,Status:"Draft",Id:e})),i.videoSyncer.startSync({idString:e,shouldStop:function(){var n=i.props.videoList.find(function(e){return e.Type===t});return n&&n.IdString!==e},onUpdate:function(e){i.replaceVideo(b(Object(n.a)({},e,{SubType:t})))},onError:function(n){var a=Ii(n,i.props.i18n)||i.props.i18n.getString("ImageExperience_Video_UploadError_NoInternet");i.showErrors(a),i.replaceVideo(b({SubType:t,Status:"Failed",Id:e})),i.logToSubstrateAdvanced("Sync video failed: Error=".concat(a.join("|"),", Type=").concat(t,", Id=").concat(e),"video sync")}})},i.syncVideoForMultipleTypes=function(e,t){i.replaceSomeVideos(c.a.map(t,function(t){return b({SubType:t,Status:"Draft",Id:e})})),i.videoSyncer.startSync({idString:e,shouldStop:function(){return 0===i.props.videoList.length||i.props.videoList.every(function(t){return t.IdString!==e})},onUpdate:function(t){if(0!==i.props.videoList.length){var a=[];i.props.videoList.forEach(function(i){i.IdString===e?a.push(b(Object(n.a)({},t,{SubType:i.Type}))):a.push(i)}),i.props.onVideoListUpdated(a)}},onError:function(t){var n=Ii(t,i.props.i18n)||i.props.i18n.getString("ImageExperience_Video_UploadError_NoInternet");i.showErrors(n),i.logToSubstrateAdvanced("Sync video for all types failed: Error=".concat(n.join("|")," Id=").concat(e),"video sync")}})},i.syncVideoForAllTypes=function(e){return i.syncVideoForMultipleTypes(e,p.videoTypesWithOrder)},i.showErrors=function(e){return i.setState({errors:e})},i.defaultPreviewFields={shortHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_ShortHeadline"),longHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_LongHeadline"),description:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_Description"),businessName:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_BusinessName"),url:"https://www.bing.com"},i.videoRepository=new tn(e.cid,e.aid,e.oDataConfig,e.activityLogger),i.videoResRepository=new ln(e.cid,e.aid,e.oDataConfig,e.activityLogger),i.videoSyncer=new cn(i.videoRepository),i.onClipped=i.onClipped.bind(Object(Re.a)(Object(Re.a)(i))),i.state={isVideoSelectorDisplayed:!1,isEditVideoDisplayed:!1,editingVideo:null,isVideoUploading:!1,videoUploadedBytes:0,videoFileUploading:null,uploadVideoAsyncToken:null,errors:[],uploadVideoForReplace:null},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.videoList.forEach(function(t){"Draft"!==t.Status&&"Unverified"!==t.Status||e.syncVideo(t.IdString,t.Type)})}},{key:"componentDidUpdate",value:function(){0===this.props.videoList.length&&this.videoSyncer.stopAll()}},{key:"componentWillUnmount",value:function(){this.videoSyncer.stopAll()}},{key:"logToSubstrate",value:function(e){this.props.activityLogger&&this.props.activityLogger.signal(e,"video experience")}},{key:"logToSubstrateAdvanced",value:function(e,t){this.props.activityLogger&&this.props.activityLogger.signal(e,t)}},{key:"replaceVideo",value:function(e){this.replaceSomeVideos([e])}},{key:"replaceSomeVideos",value:function(e){var t=this,i=this.props.videoList,n=c.a.isEmpty(i)?e:Object(m.a)(i);n!==e&&n.forEach(function(i,n,a){var r=c.a.find(e,function(e){return e.Type===i.Type});r&&(t.logToSubstrate("Video replace: ".concat(r.Type)),a[n]=r)}),this.props.onVideoListUpdated(n),this.props.onVideoPreviewRequested(e[0].Type)}},{key:"videoListComponent",value:function(){var e=this.state.errors.map(function(e,t){return k.a.createElement("div",{className:"error",key:"error_".concat(t)},e)});return this.props.videoList.length>0?k.a.createElement(k.a.Fragment,null,k.a.createElement(sn,{videoList:this.props.videoList,customThumbnailRecord:this.props.customThumbnailRecord,i18n:this.props.i18n,onReplace:this.onReplaceVideo,onEdit:this.onEditVideo,onRemoveAll:this.onRemoveAllVideos,onCancelUpload:this.onCancelUpload,uploadVideo:this.state.uploadVideoForReplace,permissions:this.props.permissions}),e):k.a.createElement("div",null,k.a.createElement("div",{className:"image-section-label"},k.a.createElement("label",null,this.props.i18n.getString("ImageExperience_Video_List_Label")),k.a.createElement(T.HelpPopup,{topic:"pop_BA_VideoAds_VideoSource","aria-label":this.props.i18n.getString("Click to learn more about {{item}}",{item:this.props.i18n.getString("Import_ImportSummary_Videos")})})),this.state.isVideoUploading?k.a.createElement("div",{className:"col-sm-3"},k.a.createElement(E.TextField,{placeholder:this.props.i18n.getString("ImageExperience_Add_Video_File_Placeholder"),value:this.state.videoFileUploading?this.state.videoFileUploading.name:"",readOnly:!0,className:"file-picker-input"}),k.a.createElement(Qi,{totalBytes:this.state.videoFileUploading.size,uploadedBytes:this.state.videoUploadedBytes,i18n:this.props.i18n}),k.a.createElement(E.DefaultButton,{ariaLabel:"".concat(this.props.i18n.getString("Audience_Campaign_Cancel_Label")," ").concat(this.props.i18n.getString("ImageExperience_Upload")),text:this.props.i18n.getString("Audience_Campaign_Cancel_Label"),onClick:this.onCancelUpload})):k.a.createElement("button",{className:"add-image-button btn btn-hero",onClick:this.onAddVideo},this.props.i18n.getString("ImageExperience_LoadVideo")),e)}},{key:"render",value:function(){var e=this,t=this.props,i=t.i18n,n=t.cid,a=t.aid,r=t.isLazyLoadEnabled,o=t.perfMarker,s=t.permissions,l=t.genericImage,c=t.customThumbnailRecord,d=t.videoList;return k.a.createElement("div",{className:"image-experience-content"},this.videoListComponent(),k.a.createElement(an,{isOpen:this.state.isVideoSelectorDisplayed,isReplace:null!==this.state.editingVideo,onVideoSelected:this.onVideoSelected,onSelectionCanceled:this.onVideoSelectionCanceled,i18n:i,perfMarker:o.createChild("videoPicker"),cid:n,aid:a,videoRepository:this.videoRepository,isLazyLoadEnabled:r,videoFile:this.state.videoFileUploading,isVideoUploading:this.state.isVideoUploading,videoUploadedBytes:this.state.videoUploadedBytes,onFileRead:this.onFileRead,onCancelUpload:this.onCancelUpload,onVideoPostByUrl:this.onVideoPostByUrl,videoList:d}),s.IsVideoAdEditorEnabled&&this.state.isEditVideoDisplayed&&k.a.createElement(On,Object.assign({},this.props,{onSaveThumbnail:this.onSaveThumbnail,onCropped:this.onCropped,onClipped:this.onClipped,onDismiss:function(){return e.setState({isEditVideoDisplayed:!1})},thumbnailRecord:c,i18n:i,perfMarker:o.createChild("editVideo"),video:this.state.editingVideo,staticImagePath:this.getImagePathFromGenericImagePath(l),videoRepository:this.videoRepository,resourceRepository:this.videoResRepository})))}}]),t}(k.a.PureComponent);Pn.defaultProps={onVideoListUpdated:c.a.noop,onVideoPreviewRequested:c.a.noop,onSaveThumbnailAsDraft:c.a.noop,oDataConfig:null,isLazyLoadEnabled:!0,isStockPhotoEnabled:!0,activityLogger:{signal:c.a.noop},genericImage:null,videoList:[],customThumbnailRecord:{},onVideoUploadStatusUpdate:c.a.noop,permissions:{}};var Mn=Object(A.withPerfMarker)(Pn),jn=function(e){var t=e||{},i=t.Type,n=t.EffectSettings,a=t.CropSettings,r=t.BaseImage;return{baseImage:e,effectSettings:n,cropSettings:a,minCropSize:p.getMinimumSizeForImage(i,!0),maxCropBox:i?r.CropSettings:null}},Ln=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onAddImage=function(){i.setState({isImageSelectorDisplayed:!0}),i.state.isMMAEnabled||i.props.onImageListUpdated([])},i.onSelectedImagesSet=function(e){if(i.logToSubstrate("selected an image"),i.setState({isImageSelectorDisplayed:!1}),i.state.isMMAEnabled){var t=i.props.imageList;if(i.state.editingImage);else{var n,a=c.a.clone(t),r=c.a.isArray(e[0])?e:[e];c.a.each(r,function(e){var t=i.findImageSetIndexById({imageList:a,targetImageSet:e}),r=t.index,o=t.targetId;-1!==r?a[r]=e:a=a.concat([e]),n=o}),i.props.onImageListUpdated(a,n)}}else if(i.state.editingImage){var o=c.a.find(e,function(e){return e.Type===i.state.editingImage.Type});i.replaceImage(o)}else i.props.onImageListUpdated(e);i.setState({editingImage:null})},i.onImageSelectionCanceled=function(){i.setState({isImageSelectorDisplayed:!1,editingImage:null})},i.onReplaceImage=function(e){var t=c.a.find(i.props.imageList,function(t){return t.Type===e});i.setState({isImageSelectorDisplayed:!0,editingImage:t?t.clone():new g({type:e})})},i.onReCropImage=function(e){var t=c.a.find(i.props.imageList,function(t){return t.Type===e});i.setState({isImageEditDisplayed:!0,editingImage:t.clone()})},i.onSelectImage=function(e){i.logToSubstrate("select one image set"),i.setState({editingImage:null}),i.props.onImageSelected(e)},i.onRemoveImage=function(e){i.logToSubstrate("remove one image set"),i.setState({editingImage:null});var t=i.props.imageList,n=i.findImageSetById(e),a=c.a.without(t,n);i.props.onImageListUpdated(a)},i.onRemoveAllImages=function(){i.logToSubstrate("remove all images"),i.setState({editingImage:null}),i.props.onImageListUpdated([])},i.onSaveEditImage=function(e){if(i.props.isAdCreatorV1Enabled){var t=e.effectSettings,a=e.cropSettings,r=i.props.imageList,o=c.a.findIndex(r,function(e){return c.a.any(e,function(e){return i.props.isAdCreatorEnhancementsEnabled&&!i.state.editingImage.type?e.BaseId===i.state.editingImage.Id:e.Id===i.state.editingImage.Id})}),s=Object(m.a)(r),l=Object(m.a)(s[o]);if(i.state.editingImage.Type){var d=c.a.findIndex(l,function(e){return e.Type===i.state.editingImage.Type}),u=l[d].clone();u.setEffectSettings(t),u.setCropSettings(a),l[d]=u,s[o]=l,i.props.onImageListUpdated(s),i.props.onImagePreviewRequested(i.state.editingImage.Type)}else{var p=jn(i.state.editingImage).cropSettings;l=c.a.isEqual(a,p)?c.a.map(l,function(e){if(i.props.isAdCreatorEnhancementsEnabled){var t={isIncluded:e.IsIncluded,type:e.Type,cropSettings:e.cropSettings};return new g(c.a.defaults(t,Object(n.a)({},e.BaseImage.getBasicData(),{isIncluded:e.IsIncluded,type:e.Type,cropSettings:e.cropSettings})))}return e.clone()}):Qe({originalImageToCrop:i.state.editingImage,isMultimediaAd:!0,maxCropBox:a}),c.a.each(l,function(e){e.setEffectSettings(t),e.BaseImage.setEffectSettings(t),e.BaseImage.setCropSettings(a)}),s[o]=l,i.props.onImageListUpdated(s)}}else i.state.isMMAEnabled?i.replaceMultimediaImage(e):i.replaceImage(e);i.setState({isImageEditDisplayed:!1,editingImage:null})},i.onCancelEditImage=function(){i.setState({isImageEditDisplayed:!1,editingImage:null}),i.props.onImageEditCancelled()},i.onEditImage=function(e){i.logToSubstrate("edit image set");var t=i.findImageSetById(e);i.setState({isImageEditDisplayed:!0,editingImage:t[0].BaseImage.clone()})},i.getImagePathFromGenericImagePath=function(e){return c.a.isString(e)?e.substr(0,e.indexOf("1.91to1.jpg")):""},i.findImageSetIndexById=function(e){var t,n,a=e.imageList,r=e.baseImageId,o=e.targetImageSet;return i.props.isAdCreatorEnhancementsEnabled?(n=r||o[0].BaseId,t=c.a.findIndex(a,function(e){return e[0].BaseId.toString()===n.toString()})):(n=r||o[0].Id,t=c.a.findIndex(a,function(e){return c.a.any(e,function(e){return e.Id.toString()===n.toString()})})),{index:t,targetId:n}},i.findImageSetById=function(e){var t=i.props.imageList,n=i.findImageSetIndexById({imageList:t,baseImageId:e}).index;return i.props.imageList[n]},i.defaultPreviewFields={shortHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_ShortHeadline"),longHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_LongHeadline"),description:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_Description"),businessName:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_BusinessName"),url:"https://www.bing.com"},i.state={isImageSelectorDisplayed:!1,isImageEditDisplayed:!1,editingImage:null,isMMAEnabled:e.isMultimediaAdinMSANEnabled||e.isMultimediaAd},e.isAdCreatorV1Enabled&&Object(De.setClarityTag)({IsAdCreatorV1Enabled:!0}),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"logToSubstrate",value:function(e){this.props.activityLogger&&this.props.activityLogger.signal(e,"image experience")}},{key:"replaceImage",value:function(e){var t=this.props.imageList,i=c.a.findIndex(t,function(t){return t.Type===e.Type}),n=Object(m.a)(t);i>=0?n[i]=e:n.push(e),this.props.onImageListUpdated(n),this.props.onImagePreviewRequested(e.Type)}},{key:"replaceMultimediaImage",value:function(e){var t=this.props.imageList,i=c.a.findIndex(t,function(t){return c.a.any(t,function(t){return t.Id===e.Id})}),n=Object(m.a)(t);if(i>=0){var a=n[i],r=c.a.findIndex(a,function(t){return t.Type===e.Type});r>=0&&(a[r]=e)}this.props.onImageListUpdated(n),this.props.onImagePreviewRequested(e.Type)}},{key:"imageListComponent",value:function(){var e=0===this.props.imageList.length||!this.state.isMMAEnabled&&!c.a.some(this.props.imageList,function(e){return e.Src});return this.state.isMMAEnabled?k.a.createElement(k.a.Fragment,null,this.renderAddImage(),!e&&k.a.createElement(Ei,{imageList:this.props.imageList,i18n:this.props.i18n,onEditImage:this.onEditImage,onRemoveImage:this.onRemoveImage,onRemoveAllImages:this.onRemoveAllImages,onSelectImage:this.onSelectImage,currentSelectedImageId:this.props.currentSelectedImageId,isAdCreatorV1Enabled:this.props.isAdCreatorV1Enabled,isAdCreatorEnhancementsEnabled:this.props.isAdCreatorEnhancementsEnabled})):k.a.createElement(k.a.Fragment,null,e&&this.renderAddImage(),!e&&k.a.createElement(Ai,{imageList:this.props.imageList,i18n:this.props.i18n,onReplaceImage:this.onReplaceImage,onReCropImage:this.onReCropImage,onRemoveAllImages:this.onRemoveAllImages,isForVNext:this.props.isForVNext,isMultimediaAd:this.props.isMultimediaAd,permissions:this.props.permissions}))}},{key:"renderAddImage",value:function(){var e=!1;return this.props.isMultimediaAd&&this.props.imageList.length>=p.MMAMaximumImage&&(e=!0),this.props.isMultimediaAdinMSANEnabled&&this.props.imageList.length>=p.MAX_IMAGECOUNT_MMA_MSAN&&(e=!0),k.a.createElement("div",null,k.a.createElement("div",{className:"image-section-label"},k.a.createElement("label",null,this.props.i18n.getString("Import_ImportSummary_Images")),k.a.createElement(T.HelpPopup,{topic:this.props.isMultimediaAd?"pop_BA_CampaignCreate_MMA_Images":"pop_BA_CampaignCreate_AudAds_Images","aria-label":this.props.i18n.getString("Click to learn more about {{item}}",{item:this.props.i18n.getString("ImageExperience_Image_List_Label")})})),k.a.createElement("button",{className:"add-image-button btn btn-hero",disabled:e,onClick:this.onAddImage},this.props.i18n.getString("ImageExperience_LoadImage")))}},{key:"render",value:function(){var e={longHeadline:this.props.longHeadline.length>0?this.props.longHeadline:this.defaultPreviewFields.longHeadline,shortHeadline:this.props.shortHeadline.length>0?this.props.shortHeadline:this.defaultPreviewFields.shortHeadline,description:this.props.description.length>0?this.props.description:this.defaultPreviewFields.description,businessName:this.props.businessName.length>0?this.props.businessName:this.defaultPreviewFields.businessName,url:this.props.url.length>0?this.props.url:this.defaultPreviewFields.url,extensionHeadline:this.props.extensionHeadline},t=this.props,i=t.i18n,a=t.cid,r=t.aid,o=t.oDataConfig,s=t.isStockPhotoEnabled,l=t.isForVNext,c=t.isLazyLoadEnabled,d=t.permissions,u=t.perfMarker,g=t.isImageAdExtensionMode,h=t.isMultimediaAdinMSANEnabled,m=t.genericImage,f=t.placeHolderImages,v=t.isVideo,b=t.imageList;if(v)return k.a.createElement(Mn,Object(n.a)({},this.props,{perfMarker:u.createChild("videoExperience")}));var y=p.getMmaAspectRatios();return k.a.createElement("div",{className:"image-experience-content"},this.imageListComponent(),k.a.createElement(di,{isImageSelectorDisplayed:this.state.isImageSelectorDisplayed,onSelectedImagesSet:this.onSelectedImagesSet,onImageSelectionCanceled:this.onImageSelectionCanceled,imageType:this.state.editingImage?this.state.editingImage.Type:null,i18n:i,perfMarker:u.createChild("imagePicker"),isForVNext:l,isMultimediaAd:this.props.isMultimediaAd,cid:a,aid:r,isStockPhotoEnabled:s,oDataConfig:o,isLazyLoadEnabled:c,permissions:d,isMultimediaAdinMSANEnabled:h,staticImagePath:this.getImagePathFromGenericImagePath(this.props.genericImage),imageList:b,suggestion:this.props.suggestion,suggestionPoller:this.props.suggestionPoller,isAdCreatorV1Enabled:this.props.isAdCreatorV1Enabled,isAdCreatorEnhancementsEnabled:this.props.isAdCreatorEnhancementsEnabled,mediaRepository:this.props.mediaRepository,finalUrl:this.props.finalUrl}),this.props.isAdCreatorV1Enabled?k.a.createElement(Le,Object.assign({isOpen:this.state.isImageEditDisplayed,onDismiss:this.onCancelEditImage,onApply:this.onSaveEditImage,mediaRepository:this.props.mediaRepository,isAdCreatorEnhancementsEnabled:this.props.isAdCreatorEnhancementsEnabled,aspectRatioConfig:y},jn(this.state.editingImage))):k.a.createElement(xi,{isImageEditDisplayed:this.state.isImageEditDisplayed,image:this.state.editingImage,previewTexts:e,onSave:this.onSaveEditImage,onCancel:this.onCancelEditImage,i18n:i,perfMarker:u.createChild("imageEditor"),isForVNext:l,isImageAdExtensionMode:g,genericImage:m,placeHolderImages:f,isMultimediaAd:this.props.isMultimediaAd,permissions:d}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isMMAEnabled&&e.cropImage?{isImageEditDisplayed:!0,editingImage:e.cropImage.clone()}:null}}]),t}(k.a.PureComponent);Ln.defaultProps={longHeadline:"",shortHeadline:"",description:"",businessName:"",extensionHeadline:"",url:"https://www.bing.com",finalUrl:"",currentSelectedImageId:null,onImageEditCancelled:c.a.noop,onImageSelected:c.a.noop,onImageListUpdated:c.a.noop,onVideoListUpdated:c.a.noop,onSaveThumbnailAsDraft:c.a.noop,onImagePreviewRequested:c.a.noop,onVideoPreviewRequested:c.a.noop,isForVNext:!1,isImageAdExtensionMode:!1,isMultimediaAd:!1,genericImage:null,placeHolderImages:[],isMultimediaAdinMSANEnabled:!1,isStockPhotoEnabled:!1,oDataConfig:null,isLazyLoadEnabled:!0,activityLogger:{signal:c.a.noop},permissions:{},imageList:[],videoList:[],customThumbnailRecord:{},isVideo:!1,onVideoUploadStatusUpdate:c.a.noop,cropImage:null,suggestion:{},isAdCreatorV1Enabled:!1,mediaRepository:null,suggestionPoller:{getLandingPageSuggestions:c.a.noop,getMoreLandingPageSuggestions:c.a.noop},isAdCreatorEnhancementsEnabled:!1};var Dn=Object(A.withPerfMarker)(Ln),Rn=function(e){function t(e,i){var n;return Object(a.a)(this,t),(n=Object(S.a)(this,Object(w.a)(t).call(this,e,i))).multiLineTextRefs=[k.a.createRef(),k.a.createRef(),k.a.createRef()],n.state={play:!1,mouseIn:!1},n}return Object(C.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){this.multiLineTextRefs.forEach(function(e){e.current&&e.current.processText()})}},{key:"render",value:function(){var e=this,t="new-responsive-ad-preview-container ".concat(this.props.className),i=this.props.hideTextWhenPlay&&this.state.play&&!this.state.mouseIn,n=c.a.get(this.props.customThumbnail,"ThumbnailUrl")||this.props.video.thumbnailUrl;return k.a.createElement("div",{className:t},k.a.createElement("div",{className:"responsive-ad-preview-content",style:{height:this.props.previewContainerHeight},onMouseEnter:function(){return e.setState({mouseIn:!0})},onMouseLeave:function(){return e.setState({mouseIn:!1})}},k.a.createElement(bn.VideoControls,{width:this.props.previewContainerWidth,immersive:!0,muteByDefault:!0,showProgressText:this.props.showProgressText},k.a.createElement(An,{thumbnailUrl:n,src:this.props.video.Src,width:this.props.video.Width,height:this.props.video.Height,maxWidth:this.props.previewContainerWidth,ratio:p.videoAspectRatios[this.props.video.Type].ratio,isCurrent:this.props.isCurrent,activityLogger:this.props.activityLogger,onPlayStatusUpdate:function(t){return e.setState({play:t})},hideControls:!0})),k.a.createElement("div",{className:"text-container"},!i&&this.props.showShortHeadline&&k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[0],className:"short-headline",text:this.props.previewTexts.shortHeadline}),!i&&this.props.showLongHeadline&&k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"long-headline",text:this.props.previewTexts.longHeadline}),!i&&this.props.showUrl&&k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[1],className:"final-url",text:this.props.previewTexts.url}),!i&&this.props.showDescription&&k.a.createElement(ui.MultiLineEllipsisText,{ref:this.multiLineTextRefs[2],className:"description",text:this.props.previewTexts.description}),this.props.showBusinessName&&k.a.createElement(pi,{i18n:this.props.i18n,businessName:this.props.previewTexts.businessName}))),k.a.createElement("div",{className:"video-ad-preview-type-name"},this.props.i18n.getString("ImageExperience_Video_Ad_Preview_Type_".concat(this.props.type))),this.props.showAdditionalDisclaimer&&k.a.createElement("div",{className:"additional-disclaimer"},this.props.i18n.getString("ImageExperience_Additional_Disclaimer_Message")))}}]),t}(k.a.PureComponent);Rn.defaultProps={hideTextWhenPlay:!1,showShortHeadline:!1,showLongHeadline:!1,showDescription:!1,showAdditionalDisclaimer:!1,showProgressText:!0,additionalSetting:null,showBusinessName:!0,showUrl:!1,isCurrent:!1,activityLogger:{signal:c.a.noop,error:c.a.noop},customThumbnail:null};var Nn=function(e){function t(){return Object(a.a)(this,t),Object(S.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.isMobilePreview?"mobile-web-outlook":"web-desktop-outlook",t="".concat(e," responsive-ad-preview-content");return k.a.createElement("div",{className:"new-responsive-ad-preview-container"},k.a.createElement("a",{className:t,target:"_blank",rel:"noopener noreferrer",href:this.props.previewTexts.url},k.a.createElement("div",{className:"ad-logo"},k.a.createElement("p",null,this.props.i18n.getString("Entity_Ads"))),k.a.createElement("div",{className:"business-name"},this.props.previewTexts.businessName),!this.props.isMobilePreview&&k.a.createElement("div",{className:"down-arrow"}),k.a.createElement("div",{className:"short-headline"},this.props.previewTexts.shortHeadline),!this.props.isMobilePreview&&k.a.createElement("div",{className:"description-separator"},"*"),k.a.createElement("div",{className:"description"},this.props.previewTexts.description)),k.a.createElement("div",{className:"preview-type-string"},this.props.isMobilePreview?this.props.i18n.getString("Audience_Campaign_Ad_Preview_MobileWebOutlook"):this.props.i18n.getString("Audience_Campaign_Ad_Preview_WebDesktopOutlook")))}}]),t}(k.a.PureComponent),Vn=p.aspectRatios.Image133x100.type,Bn=p.aspectRatios.Image178x100.type,Fn=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onAddAspectRatio=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;i.props.onAddAspectRatio(t[n].type)},i.onCrop=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;(i.props.onCropImage(t[n]),i.props.isAdCreatorV1Enabled)&&Object(V.a)(i.props.instrumentation).editPlacementActivity.trace("User opened edit placement panel")},i.onRemoveAspectRatio=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;i.props.onRemoveAspectRatio(t[n].type)},i.handleSelect=function(e,t){i.setState({index:e,direction:t.direction})},i.state={index:0,direction:null,defaultImages:[],placeHolderImages:[],imageListForDisplay:[]},i.isMultimediaAd=e.isMultimediaAd,i.isMultiMediaAdsPhase2Enabled=e.permissions.IsMultiMediaAdsPhase2Enabled,i.aspectRatios=i.isMultimediaAd?p.getMmaAspectRatios():p.aspectRatios,i.aspectRatiosOrder=p.getImageTypesWithOrder(i.isMultimediaAd),i.setupImagesAsync(),i.setupAdPreviewIndexToTitlesMap(),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"setPreviewIndexByType",value:function(e){var t=this.adPreviewTypesOrdered.indexOf(e);t>=0&&this.setState({index:t})}},{key:"setupAdPreviewIndexToTitlesMap",value:function(){var e=this;this.adPreviewIndexToTitle=[],this.adPreviewTypesOrdered=[];var t=this.props.i18n.getString("ImageExperience_Ad_Preview_Title_Template",{ratio:this.props.i18n.getString(p.aspectRatios[Vn].stringKey)}),i=this.props.i18n.getString("ImageExperience_Ad_Preview_Title_Template",{ratio:this.props.i18n.getString(p.aspectRatios[Bn].stringKey)}),n=c.a.map(this.aspectRatiosOrder,function(t){return e.props.i18n.getString("ImageExperience_Ad_Preview_Title_Template",{ratio:e.props.i18n.getString(e.aspectRatios[t].stringKey)})}),a=this.props.i18n.getString("ImageExperience_Ad_Preview_Title");this.props.isImageAdExtensionMode&&!this.isMultimediaAd&&(this.adPreviewIndexToTitle.push(i),this.adPreviewIndexToTitle.push(t),this.adPreviewIndexToTitle.push(t),this.adPreviewTypesOrdered.push(p.aspectRatios.Image178x100.type),this.adPreviewTypesOrdered.push(p.aspectRatios.Image133x100.type),this.adPreviewTypesOrdered.push(p.aspectRatios.Image133x100.type)),this.adPreviewIndexToTitle=this.adPreviewIndexToTitle.concat(n),this.adPreviewTypesOrdered=this.adPreviewTypesOrdered.concat(this.aspectRatiosOrder),this.props.isImageAdExtensionMode||this.isMultimediaAd||(this.adPreviewIndexToTitle.push(a),this.adPreviewIndexToTitle.push(a))}},{key:"setupImagesAsync",value:function(){var e=this,t=[this.props.genericImage].concat(Object(m.a)(this.props.placeHolderImages)),i=c.a.map(t,function(t){return yi(t).then(function(t){var i=Qe({originalImageToCrop:t,isMultimediaAd:e.isMultimediaAd});return i=c.a.sortBy(i,function(t){return e.aspectRatiosOrder.indexOf(t.type)}),c.a.each(i,function(e){e.isIncluded=!0}),i})});s.a.all(i).then(function(t){var i=Object(_.a)(t,4),n=i[0],a=i[1],r=i[2],o=i[3];e.setState({defaultImages:n,placeHolderImages:[a||n,r||n,o||n]})})}},{key:"getAdPreviewTitle",value:function(){var e=this.state.index;return this.adPreviewIndexToTitle[e]}},{key:"getAdPreviewButtonsForAdCreator",value:function(){if(this.isMultimediaAd&&!c.a.isEmpty(this.props.imageList)){var e=this.state,t=e.imageListForDisplay[e.index],i=t&&this.aspectRatios[t.type].minimumRequirements>0&&1===this.props.totalImageListCount,n=t&&this.aspectRatios[t.type].minSize;return this.isInvalidImageSize(t,n)?null:k.a.createElement("div",{className:M()("ad-preview-actions","inline-title")},!0!==c.a.result(t,"isIncluded")?k.a.createElement("button",{className:"include-aspect-ratio-button btn btn-default",onClick:this.onAddAspectRatio},this.props.i18n.getString("ImageEditor_Include_AspectRatio")):k.a.createElement(k.a.Fragment,null,k.a.createElement("button",{className:"crop-image-button btn btn-default",onClick:this.onCrop},this.props.i18n.getString("ImageExperience_Edit_Image_Placement")),i&&k.a.createElement(E.TooltipHost,{content:this.props.i18n.getString("ImageExperience_Image_Placement_Required_Message"),calloutProps:{gapSpace:8}},k.a.createElement("button",{className:"exclude-aspect-ratio-button btn btn-default",onClick:this.onRemoveAspectRatio,disabled:!0},this.props.i18n.getString("ImageEditor_Exclude_AspectRatio"))),!i&&k.a.createElement("button",{className:"exclude-aspect-ratio-button btn btn-default",onClick:this.onRemoveAspectRatio},this.props.i18n.getString("ImageEditor_Exclude_AspectRatio"))))}return null}},{key:"getAdPreviewActions",value:function(){if(this.isMultimediaAd&&!c.a.isEmpty(this.props.imageList)){var e=this.state,t=e.imageListForDisplay[e.index],i=t&&this.aspectRatios[t.type].minSize;return k.a.createElement("div",{className:"ad-preview-actions"},!0!==c.a.result(t,"isIncluded")?k.a.createElement(k.a.Fragment,null,this.isInvalidImageSize(t,i)?k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_SizeValidationFailTemplate",{width:i[0],height:i[1]}))):!this.props.isAdCreatorV1Enabled&&k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_Include_AspectRatio_Label")),k.a.createElement("button",{className:"include-aspect-ratio-button btn btn-default",onClick:this.onAddAspectRatio},this.props.i18n.getString("ImageEditor_Include_AspectRatio")))):!this.props.isAdCreatorV1Enabled&&k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_CropImage_Label")),k.a.createElement("button",{className:"crop-image-button btn btn-default",onClick:this.onCrop},this.props.i18n.getString("ImageEditor_CropImage")),k.a.createElement("button",{className:"exclude-aspect-ratio-button btn btn-default",onClick:this.onRemoveAspectRatio},this.props.i18n.getString("ImageEditor_Exclude_AspectRatio"))))}return null}},{key:"getAdPreviewHeader",value:function(){return this.props.isAdCreatorV1Enabled&&this.isMultimediaAd?k.a.createElement("div",{className:"preview-header"},k.a.createElement("div",{className:M()("ad-preview-title","with-additional-tag")},this.getAdPreviewTitle()),k.a.createElement("div",{className:"flex-grow"}),this.getAdPreviewButtonsForAdCreator()):k.a.createElement("div",{className:"ad-preview-title"},this.getAdPreviewTitle())}},{key:"isInvalidImageSize",value:function(e,t){if(!e)return!1;var i=e.Width,n=e.Height;return this.props.isAdCreatorV1Enabled&&e.BaseImage&&e.BaseImage.CropSettings&&e.BaseImage.CropSettings.SourceWidth>0&&e.BaseImage.CropSettings.SourceHeight>0&&(i=e.BaseImage.CropSettings.SourceWidth,n=e.BaseImage.CropSettings.SourceHeight),e&&t&&(i<t[0]||n<t[1])}},{key:"render",value:function(){var e=this,t=this.state,i=t.index,n=t.direction,a=this.state.multiImageList,r=a&&a.length&&a.slice(0),o=a&&a.length&&a.slice(0),s=this.state.imageListForDisplay&&this.state.imageListForDisplay.length&&c.a.find(this.state.imageListForDisplay,function(e){return e.type===Bn});return s=s&&s.clone(),k.a.createElement("div",{className:"new-preview-carousel-container"},this.getAdPreviewHeader(),this.getAdPreviewActions(),k.a.createElement(fi.Carousel,{activeIndex:i,direction:n,onSelect:this.handleSelect,controls:!1,nextLabel:this.props.i18n.getString("ImageExperience_Ad_Preview_Next"),prevLabel:this.props.i18n.getString("ImageExperience_Ad_Preview_Previous")},a&&a.length>0&&s&&k.a.createElement(fi.Carousel.Item,null,mi(s,this.props.previewTexts,this.props.i18n,!0,"BingSingleImage")),a&&a.length>0&&k.a.createElement(fi.Carousel.Item,null,k.a.createElement(bi,{images:o,i18n:this.props.i18n,previewTexts:this.props.previewTexts,previewType:"BingDesktopImage"})),a&&a.length>0&&k.a.createElement(fi.Carousel.Item,null,k.a.createElement(bi,{images:r,i18n:this.props.i18n,previewTexts:this.props.previewTexts,previewType:"MobileMultiImage"})),this.state.imageListForDisplay.map(function(t,n){return k.a.createElement(fi.Carousel.Item,{key:t.Type},hi(t,e.props.previewTexts,e.props.i18n,i===n,e.isMultimediaAd,e.isMultiMediaAdsPhase2Enabled,e.props.isAdCreatorV1Enabled))}),!this.isMultimediaAd&&!this.props.isImageAdExtensionMode&&k.a.createElement(fi.Carousel.Item,null,k.a.createElement(Nn,{i18n:this.props.i18n,previewTexts:this.props.previewTexts,isMobilePreview:!1})),!this.isMultimediaAd&&!this.props.isImageAdExtensionMode&&k.a.createElement(fi.Carousel.Item,null,k.a.createElement(Nn,{i18n:this.props.i18n,previewTexts:this.props.previewTexts,isMobilePreview:!0}))),k.a.createElement("div",{className:"disclaimer-info"},k.a.createElement("div",{className:"disclaimer-info-inline"},this.isMultimediaAd?this.props.i18n.getString("ImagePreview_Disclaimer_Message_MultimediaAd"):this.props.i18n.getString("ImagePreview_Disclaimer_Message"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var i=c.a.map(t.defaultImages,function(t){var i=c.a.find(e.imageList,function(e){return e.Type===t.Type});return i||t}),n=[],a=t.placeHolderImages.length>0?Object(m.a)(t.placeHolderImages):[i,i];e.isImageAdExtensionMode&&[i].concat(Object(m.a)(a)).forEach(function(e,t){var i=c.a.find(e,function(e){return e.type===Vn});if(i){var a=i.clone();a.id=a.id?a.id+t:t,n.push(a)}});return{imageListForDisplay:i,multiImageList:n}}}]),t}(k.a.PureComponent);Fn.defaultProps={isImageAdExtensionMode:!1,isMultimediaAd:!1,placeHolderImages:[],onCropImage:c.a.noop,onAddAspectRatio:c.a.noop,onRemoveAspectRatio:c.a.noop,permissions:{},isAdCreatorV1Enabled:!1,instrumentation:{addScenario:c.a.noop},totalImageListCount:0};var Un=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).handleSelect=function(e,t){i.setState({index:e,direction:t.direction})},i.state={index:0,direction:null},i.setupAdPreviewIndexToTitlesMap(),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"setPreviewIndexByType",value:function(e){var t=p.videoPreviewsSettings.findIndex(function(t){return t.videoType===e});t>=0&&this.setState({index:t})}},{key:"setupAdPreviewIndexToTitlesMap",value:function(){var e=this;this.adPreviewIndexToTitle=[];var t=p.videoPreviewsSettings,i=c.a.map(t,function(t){return e.props.i18n.getString("ImageExperience_Ad_Preview_Title_Template",{ratio:e.props.i18n.getString(t.stringKey)})}),n=this.props.i18n.getString("ImageExperience_Ad_Preview_Title");this.adPreviewIndexToTitle=this.adPreviewIndexToTitle.concat(i),this.adPreviewIndexToTitle.push(n)}},{key:"getAdPreviewTitle",value:function(){var e=this.state.index;return this.props.videoList.length>0?this.adPreviewIndexToTitle[e]:c.a.last(this.adPreviewIndexToTitle)}},{key:"render",value:function(){var e=this,t=this.state,i=t.index,n=t.direction,a=this.props,r=a.videoList,o=a.i18n,s=a.previewTexts,l=a.activityLogger,d=[],u=p.videoPreviewsSettings;return c.a.each(u,function(t){var n=r.find(function(e){return e.Type===t.videoType});n&&d.push(k.a.createElement(fi.Carousel.Item,{key:t.type},function(e,t,i,n,a,r,o){var s={video:e,previewTexts:t,i18n:i,isCurrent:n,activityLogger:a,customThumbnail:o};return s=c.a.defaults(s,r),k.a.createElement(Rn,s)}(n,s,o,i===d.length,l,t,e.props.customThumbnailRecord[p.videoTypeToThumbnailType[n.Type]])))}),k.a.createElement("div",{className:"new-preview-carousel-container"},k.a.createElement("div",{className:"ad-preview-title"},this.getAdPreviewTitle()),r.length>0&&k.a.createElement(k.a.Fragment,null,k.a.createElement(fi.Carousel,{activeIndex:i,direction:n,onSelect:this.handleSelect,controls:!1,nextLabel:o.getString("ImageExperience_Ad_Preview_Next"),prevLabel:o.getString("ImageExperience_Ad_Preview_Previous")},d),k.a.createElement("div",{className:"disclaimer-info"},k.a.createElement("div",{className:"disclaimer-info-inline"},o.getString("ImagePreview_Disclaimer_Message")))))}}]),t}(k.a.PureComponent);Un.defaultProps={activityLogger:{signal:c.a.noop,error:c.a.noop},customThumbnailRecord:{}};var Gn=function(e){function t(){var e,i;Object(a.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(i=Object(S.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).onEditAd=function(e){i.logToSubstrate("click edit ad");var t=parseInt(e.currentTarget.dataset.adid,10);i.props.onEditAd(t)},i.onRemoveAd=function(e){i.logToSubstrate("click remove an ad");var t=parseInt(e.currentTarget.dataset.adid,10);i.props.onRemoveAd(t)},i.onCreateAnotherAd=function(){i.logToSubstrate("click create another ad"),i.props.onCreateAnotherAd()},i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"logToSubstrate",value:function(e){this.props.activityLogger&&this.props.activityLogger.signal(e,"image experience")}},{key:"render",value:function(){var e=this;return k.a.createElement(dt.Row,{className:"created-ad-list-container"},this.props.savedAdsList.map(function(t){var i=t.Headlines,n=t.LongHeadlines,a=t.Descriptions;return i&&"string"===typeof i&&(i=JSON.parse(i)),n&&"string"===typeof n&&(n=JSON.parse(n)),a&&"string"===typeof a&&(a=JSON.parse(a)),k.a.createElement("div",{className:"existing-ad ad-list-item".concat(e.props.isVideo&&t.ThumbnailForAdList?" ad-list-video-item":""),key:t.Id},t.ThumbnailForAdList?k.a.createElement("img",{className:"existing-ad-image",alt:"",onContextMenu:function(e){return e.preventDefault()},src:t.ThumbnailForAdList}):k.a.createElement("div",{className:"existing-ad-image unavailable-hint"},e.props.i18n.getString("Video_Preview_Unavailable")),k.a.createElement("p",null,t.Headline||c.a.get(i,["0","Text"])),k.a.createElement("p",null,t.LongHeadline||c.a.get(n,["0","Text"])),k.a.createElement("p",null,t.Text||c.a.get(a,["0","Text"])),k.a.createElement("p",null,t.BusinessName),e.props.isEditable&&k.a.createElement("div",{className:"existing-ad-options"},k.a.createElement("button",{className:"edit-ad","data-adid":t.Id,onClick:e.onEditAd},e.props.i18n.getString("Audience_Campaign_Crud_Ad_EditAd")),k.a.createElement("button",{className:"remove-ad","data-adid":t.Id,onClick:e.onRemoveAd},e.props.i18n.getString("Audience_Campaign_Crud_Ad_RemoveAd"))))}),this.props.isEditable&&k.a.createElement("div",{className:"ad-list-item"},k.a.createElement("button",{className:"create-another-ad",onClick:this.onCreateAnotherAd},this.props.i18n.getString("Audience_Campaign_Crud_Ad_Create_Another"))))}}]),t}(k.a.PureComponent);Gn.defaultProps={activityLogger:null,isVideo:!1};var zn=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(S.a)(this,Object(w.a)(t).call(this,e))).onAddAspectRatio=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;i.props.activityLogger.signal("MMA: include button clicked","responsive ad editor"),i.props.onAddAspectRatio(t[n].type)},i.onCrop=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;i.props.activityLogger.signal("MMA: re-crop clicked","responsive ad editor"),i.props.onCropImage(t[n])},i.onRemoveAspectRatio=function(){var e=i.state,t=e.imageListForDisplay,n=e.index;i.props.activityLogger.signal("MMA: exclude button clicked","responsive ad editor"),i.props.onRemoveAspectRatio(t[n].type)},i.handleSelect=function(e,t){i.setState({index:e,direction:t.direction})},i.state={index:0,direction:null,defaultImages:[],imageListForDisplay:[]},i.props.activityLogger.signal("MMA: preview opened.","responsive ad editor"),i.aspectRatios=c.a.pick(p.aspectRatios,p.multimediaAdinMSANRatios),i.aspectRatiosOrder=p.multimediaAdinMSANRatios,0===e.imageList.length&&i.setupImagesAsync(),i.setupAdPreviewIndexToTitlesMap(),i}return Object(C.a)(t,e),Object(r.a)(t,[{key:"setupAdPreviewIndexToTitlesMap",value:function(){var e=this;this.adPreviewIndexToTitle=[];var t=c.a.map(this.aspectRatiosOrder,function(t){return e.props.i18n.getString("ImageExperience_Ad_Preview_Title_Template",{ratio:e.props.i18n.getString(e.aspectRatios[t].stringKey)})});this.adPreviewIndexToTitle=this.adPreviewIndexToTitle.concat(t)}},{key:"setupImagesAsync",value:function(){var e=this,t=[this.props.genericImage],i=c.a.map(t,function(e){return yi(e).then(function(e){return Qe({originalImageToCrop:e,isMultimediaAdinMSANEnabled:!0})})});s.a.all(i).then(function(t){var i=Object(_.a)(t,1)[0];e.setState({defaultImages:i})})}},{key:"getAdPreviewTitle",value:function(){var e=this.state.index;return this.adPreviewIndexToTitle[e]}},{key:"getAdPreviewActions",value:function(){var e=this.props.totalImageListCount,t=this.state,i=t.imageListForDisplay,n=i[t.index],a=n&&this.aspectRatios[n.type].minSize,r=1===c.a.filter(i,function(e){return e.isIncluded},[]).length;return k.a.createElement("div",{className:"ad-preview-actions"},c.a.result(n,"isIncluded")?k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_CropImage_Label")),k.a.createElement("button",{className:"crop-image-button btn btn-default",onClick:this.onCrop},this.props.i18n.getString("ImageEditor_CropImage")),k.a.createElement("button",{disabled:1===e||r||this.props.isOnlyOneIncludedImage(n.type),className:"exclude-aspect-ratio-button btn btn-default",onClick:this.onRemoveAspectRatio},this.props.i18n.getString("ImageEditor_Exclude_AspectRatio"))):k.a.createElement(k.a.Fragment,null,this.isInvalidImageSize(n,a)?k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_SizeValidationFailTemplate",{width:a[0],height:a[1]}))):k.a.createElement(k.a.Fragment,null,k.a.createElement("span",{className:"action-label"},this.props.i18n.getString("ImageEditor_Include_AspectRatio_Label")),k.a.createElement("button",{className:"include-aspect-ratio-button btn btn-default",onClick:this.onAddAspectRatio},this.props.i18n.getString("ImageEditor_Include_AspectRatio")))))}},{key:"isInvalidImageSize",value:function(e,t){if(!e)return!1;var i=e.Width,n=e.Height;return e&&t&&(i<t[0]||n<t[1])}},{key:"render",value:function(){var e=this,t=this.state,i=t.index,n=t.direction,a=this.props.totalImageListCount;return k.a.createElement("div",{className:"new-preview-carousel-container"},k.a.createElement("div",{className:"ad-preview-title"},this.getAdPreviewTitle()),0!==a&&this.getAdPreviewActions(),k.a.createElement(fi.Carousel,{activeIndex:i,direction:n,onSelect:this.handleSelect,controls:!1,nextLabel:this.props.i18n.getString("ImageExperience_Ad_Preview_Next"),prevLabel:this.props.i18n.getString("ImageExperience_Ad_Preview_Previous")},this.state.imageListForDisplay.map(function(t){return k.a.createElement(fi.Carousel.Item,{key:t.Type},k.a.createElement(gi,Object.assign({image:t,previewTexts:e.props.previewTexts,i18n:e.props.i18n,opacityChangeEnabled:!0},c.a.get(e.aspectRatios,[t.type,"previewSettings"],{}))))})),k.a.createElement("div",{className:"disclaimer-info"},k.a.createElement("div",{className:"disclaimer-info-inline"},this.props.i18n.getString("ImagePreview_Disclaimer_Message_MultimediaAd"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.imageList.length>0?{imageListForDisplay:e.imageList}:{imageListForDisplay:t.defaultImages}}}]),t}(k.a.PureComponent);i.d(t,"c",function(){return g}),i.d(t,"m",function(){return b}),i.d(t,"l",function(){return y}),i.d(t,"f",function(){return zn}),i.d(t,"b",function(){return Dn}),i.d(t,"k",function(){return Qe}),i.d(t,"g",function(){return Fn}),i.d(t,"i",function(){return Un}),i.d(t,"h",function(){return Gn}),i.d(t,"j",function(){return p}),i.d(t,"d",function(){return rt}),i.d(t,"e",function(){return Ke}),i.d(t,"a",function(){return an})},"8bis":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors(),i=i+'<div class="campaign-settings-page"><div class="setting-container" data-bind="visible: dataLoaded">\x3c!--ko ifnot: isNewUI()--\x3e<h3 class="type-bold"><span>'+n.escape(null==(t=s)?"":t)+'</span></h3><hr>\x3c!--/ko--\x3e<div class="campaign-update"></div><div class="budget-settings"></div>',o?(i+='<div class="advanced-settings-section"></div>',r&&(i=i+'<h3 class="type-bold" data-bind="visible: hasStore"><span>'+n.escape(null==(t=e.get("ShoppingCampaign_ShoppingSetting_SectionTitle"))?"":t)+"</span>",a.popupHelp("pop_BA_MMA_Enable",e.get("ShoppingCampaign_ShoppingSetting_SectionTitle"),e),i+='</h3><hr data-bind="visible: hasStore"><div class="shopping-settings"></div>'),i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_CampaignTargets"))?"":t)+'</span></h3><hr><div class="campaign-targets clearfix"></div>'):i=i+'\x3c!--ko ifnot: isNewUI()--\x3e<h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_AdvancedSettings"))?"":t)+'</span></h3><hr>\x3c!--/ko--\x3e<div class="advanced-settings-section"></div>',i=i+'\x3c!--ko if: showHighLatencyAlert()--\x3e<div class="alert alert-info form-group page-alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.getString("TargetingSettings_OnSave_HighLantency_Text"))?"":t)+'</div></div>\x3c!--/ko--\x3e<div class="alert alert-info form-group page-alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.get("Campaigns_Latency"))?"":t)+'</div></div><div class="form-group"><button class="btn btn-primary btn-save" type="button">'+n.escape(null==(t=e.get("Button_Save"))?"":t)+'</button><button class="btn btn-default btn-cancel" type="button">'+n.escape(null==(t=e.get("Button_Cancel"))?"":t)+"</button></div></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isMMAForRetailEnabled"in r?r.isMMAForRetailEnabled:"undefined"!==typeof isMMAForRetailEnabled?isMMAForRetailEnabled:void 0,"isNotAudienceCampaign"in r?r.isNotAudienceCampaign:"undefined"!==typeof isNotAudienceCampaign?isNotAudienceCampaign:void 0,"title"in r?r.title:"undefined"!==typeof title?title:void 0),i}},"98nU":function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("VmV0")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=46)}({46:function(e,t,i){e.exports=i(47)},47:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(48);Object.defineProperty(t,"BackboneSchema",{enumerable:!0,get:function(){return n.BackboneSchema}})},48:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackboneSchema=function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=new n.ViewmodelSchema(e,t,i,o),l=i.indexOf("@odata.type")>=0?"#Model."+e.name:null;return(0,a.createBackboneModel)(s,e,r,l)};var n=i(49),a=i(50)},49:function(e,t){e.exports=i},50:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBackboneModel=function e(t,i,s,l){return n.default.Model.extend({constructor:function(){this.validator=new r.Validator(t,this),this.errors=this.validator.errors,this.converter=new o.Converter(t,this),this.vmSchema=t;for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];n.default.Model.apply(this,i)},defaults:function(){return a.default.mapObject(t,function(t,n){if("object"===t.prop.type){var r=l?"#Model."+i.name:null,o=e(a.default.omit(t,"prop"),i,s,r);return new o}var c=a.default.result(s,n,t.default),d=t.conversion.fromModel(c);return a.default.isUndefined(d)?"":d})},validate:function(e){return this.validator.validate(e)},parse:function(e){return this.converter.parse(e)},toJSON:function(){var e=this.converter.toJSON();return l&&(e["@odata.type"]=l),e}})};var n=s(i(8)),a=s(i(7)),r=i(51),o=i(52);function s(e){return e&&e.__esModule?e:{default:e}}},51:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(7)),r=o(i(8));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t,i,n,a){var r=this;s(this,e),this.name=t,this.validators=i.validation,this.convertors=i.conversion,this.errors=a,n.on("change:"+t,function(e,t){r.validate(t)})}return n(e,[{key:"validate",value:function(e){this.errors.unset(this.name);var t=this.convertors.toModel(e),i=a.default.pick(this.validators,function(e){return!e.isValid(t)});a.default.isEmpty(i)||this.errors.set(this.name,this.errorMessages(i,e))}},{key:"errorMessages",value:function(e,t){var i=[];return a.default.each(e,function(e){var n=a.default.isFunction(e.message)?e.message(t):e.message;a.default.isArray(n)?i=i.concat(n):i.push(n)}),i}}]),e}(),c=function(){function e(t,i){s(this,e),this.name=t,this.errors=i}return n(e,[{key:"validate",value:function(e){this.errors.unset(this.name),a.default.isEmpty(e.errors.toJSON())||this.errors.set(this.name,e.errors)}}]),e}();t.Validator=function(){function e(t,i){var n=this;s(this,e),this.errors=new r.default.Model,this.fieldValidators=a.default.mapObject(t,function(e,t){return"object"===e.prop.type?new c(t,n.errors):new l(t,e,i,n.errors)})}return n(e,[{key:"validate",value:function(e){var t=this;a.default.each(e,function(e,i){a.default.has(t.fieldValidators,i)&&t.fieldValidators[i].validate(e)});var i=this.errors.toJSON();return a.default.isEmpty(i)?null:i}}]),e}()},52:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(7),o=(n=r)&&n.__esModule?n:{default:n};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t,i,n){s(this,e),this.name=t,this.schemaField=i,this.viewModel=n}return a(e,[{key:"parse",value:function(e){this.viewModel.set(this.name,this.schemaField.conversion.fromModel(e))}},{key:"toJSON",value:function(){return this.schemaField.conversion.toModel(this.viewModel.get(this.name))}}]),e}(),c=function(){function e(t,i){s(this,e),this.name=t,this.viewModel=i}return a(e,[{key:"parse",value:function(e){this.viewModel.get(this.name).parse(e)}},{key:"toJSON",value:function(){return this.viewModel.get(this.name).toJSON()}}]),e}();t.Converter=function(){function e(t,i){s(this,e),this.fieldConverters=o.default.mapObject(t,function(e,t){return"object"===e.prop.type?new c(t,i):new l(t,e,i)})}return a(e,[{key:"parse",value:function(e){o.default.each(this.fieldConverters,function(t){return t.parse(o.default.result(e,t.name))})}},{key:"toJSON",value:function(){return o.default.mapObject(this.fieldConverters,function(e){return e.toJSON()})}}]),e}()},7:function(t,i){t.exports=e},8:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},"9Bp+":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t+='<div class="device-type-multipliers form-horizontal">',function(){var i=e.listOfTypes;if("number"==typeof i.length)for(var a=0,r=i.length;a<r;a++)i[a],t=t+"<div"+n.attr("data-ref",a.toLowerCase()+"-bid-multiplier",!0,!0)+"></div>";else for(var a in r=0,i)r++,i[a],t=t+"<div"+n.attr("data-ref",a.toLowerCase()+"-bid-multiplier",!0,!0)+"></div>"}.call(this),t+="</div>"}.call(this,"view"in i?i.view:"undefined"!==typeof view?view:void 0),t}},"9CmJ":function(e,t,i){i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t+='<div data-bind="visible: gridVisible">',t+=e?'<div class="location-bid-grid-container"></div>':'<div class="location-bid-grid advance-targeting-grid table new-advance-target-grid-container bingadsgrid"></div><div class="location-bid-pager-view"></div>',t+='</div><div data-bind="visible: excludedGridVisible"><div class="excluded-location-grid advance-targeting-grid table new-advance-target-grid-container bingadsgrid"></div><div class="excluded-location-pager-view"></div></div>'}.call(this,"isPersonalizedOffersEnabled"in i?i.isPersonalizedOffersEnabled:"undefined"!==typeof isPersonalizedOffersEnabled?isPersonalizedOffersEnabled:void 0),t}},"9E9n":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+'<span class="grid-cell-text"><a'+n.attr("href",r,!0,!0)+">"+n.escape(null==(t=o)?"":t)+"</a>",e&&(i=i+'<div class="inline-recommendation-grid-icon clickable inline-location-target-recommendation" style="margin-left:5px;font-size:10px;"'+n.attr("title",a.getString("InlineOpportunity_Bubble_TooltipText"),!0,!0)+n.attr("aria-label",a.getString("InlineOpportunity_Bubble_TooltipText"),!0,!0)+' tabindex="0" role="button"></div>'),i+="</span>"}.call(this,"hasLocationRecommendation"in a?a.hasLocationRecommendation:"undefined"!==typeof hasLocationRecommendation?hasLocationRecommendation:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0),i}},"9VxX":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+"<div"+n.attr("class",n.classes(["job-function-search-container",a?"show":"hide"],[!1,!0]),!1,!0)+'><div class="job-function-search-table" role="listbox">',function(){var a=r;if("number"==typeof a.length)for(var s=0,l=a.length;s<l;s++){var c=a[s];i=i+'<div class="job-function-item-template" role="option"'+n.attr("tabindex",0===s?"0":"-1",!0,!0)+'><div class="pull-left job-function-item-name">'+(null==(t=c.name.replace(c.caseMatchedSearchTerm,"<b>"+c.caseMatchedSearchTerm+"</b>"))?"":t)+"</div>",c.isIncluded?i=i+'<div class="pull-right">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Included_Status"))?"":t)+"</div>":c.isExcluded?i=i+'<div class="pull-right">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Excluded_Status"))?"":t)+"</div>":(i=i+'<div class="pull-right"><a class="job-function-search-include-link" href="javascript:void(0)"'+n.attr("data-id",c.id,!0,!0)+n.attr("data-name",c.name,!0,!0)+' role="button" tabindex="-1">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Include_Action"))?"":t)+"</a>",o&&(i=i+'<span class="job-function-search-separator">|</span><a class="job-function-search-exclude-link" href="javascript:void(0)"'+n.attr("data-id",c.id,!0,!0)+n.attr("data-name",c.name,!0,!0)+' role="button" tabindex="-1">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Exclude_Action"))?"":t)+"</a>"),i+="</div>"),i+='<div class="clearfix"></div></div>'}else for(var s in l=0,a)l++,c=a[s],i=i+'<div class="job-function-item-template" role="option"'+n.attr("tabindex",0===s?"0":"-1",!0,!0)+'><div class="pull-left job-function-item-name">'+(null==(t=c.name.replace(c.caseMatchedSearchTerm,"<b>"+c.caseMatchedSearchTerm+"</b>"))?"":t)+"</div>",c.isIncluded?i=i+'<div class="pull-right">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Included_Status"))?"":t)+"</div>":c.isExcluded?i=i+'<div class="pull-right">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Excluded_Status"))?"":t)+"</div>":(i=i+'<div class="pull-right"><a class="job-function-search-include-link" href="javascript:void(0)"'+n.attr("data-id",c.id,!0,!0)+n.attr("data-name",c.name,!0,!0)+' role="button" tabindex="-1">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Include_Action"))?"":t)+"</a>",o&&(i=i+'<span class="job-function-search-separator">|</span><a class="job-function-search-exclude-link" href="javascript:void(0)"'+n.attr("data-id",c.id,!0,!0)+n.attr("data-name",c.name,!0,!0)+' role="button" tabindex="-1">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Exclude_Action"))?"":t)+"</a>"),i+="</div>"),i+='<div class="clearfix"></div></div>'}.call(this),i+="</div>",r.length<1&&(i=i+'<div class="empty-result-message">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Job_Function_Search_No_Result"))?"":t)+"</div>"),i+="</div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isVisible"in a?a.isVisible:"undefined"!==typeof isVisible?isVisible:void 0,"items"in a?a.items:"undefined"!==typeof items?items:void 0,"showExclusion"in a?a.showExclusion:"undefined"!==typeof showExclusion?showExclusion:void 0),i}},"9oRK":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+"<li"+n.attr("class",n.classes(["dropdown-search-selector__option","col-sm-12",e.isSelected?"dropdown-search-selector__option--selected":""],[!1,!1,!0]),!1,!0)+"><a"+n.attr("class",n.classes(["clear","noWrap",e.isDisabled?"inactive":""],[!1,!1,!0]),!1,!0)+' role="menuitem" href="javascript:void(0)"'+n.attr("title",e.value,!0,!0)+n.attr("option-id",e.id,!0,!0)+">"+(null==(t=e.value)?"":t)+"</a></li>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0),i}},A3Bz:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<ul class="help-block error"'+n.attr("id",e.id+"-Validation",!0,!0)+' role="alert"'+n.attr("data-bind","visible:!"+e.property+".isValid(), foreach: "+e.property+".errors",!0,!0)+'><li data-bind="html: $data"></li></ul>'}.call(this,"field"in i?i.field:"undefined"!==typeof field?field:void 0),t}},ADN7:function(e,t,i){var n,a;n=[i("3afM")],void 0===(a=function(e){"use strict";return{decorate:e.decorate}}.apply(t,n))||(e.exports=a)},AKJU:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.baseSection=t=function(r,o,s){var l=this&&this.block,c=(this&&this.attributes,"text: infoText"+r);i=i+"<div"+n.attr("data-bind","visible: show"+r+"()",!0,!0)+'><div class="form-control-static"><a data-toggle="collapse"'+n.attr("data-target","#set"+r+"Settings",!0,!0)+' href="javascript:void(0);">'+n.escape(null==(t=e.get(o))?"":t)+"</a>",s&&a.popupHelp(s,e.get(o),e),i=i+'<span class="target-info"'+n.attr("data-bind",c,!0,!0)+'></span></div><div class="collapse"'+n.attr("id","set"+r+"Settings",!0,!0)+n.attr("data-section",r,!0,!0)+">",l&&l&&l(),i+="</div></div>"},i=i+'<div class="form-horizontal"><div class="form-group"><a class="col-sm-12" data-toggle="collapse" data-target="#setAdvancedSettings" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isAdvancedSettingsExpanded() ? &quot;true&quot; : &quot;false&quot;}" role="button"><span class="bedded-icon-marker spritedimagealign" data-bind="css: isAdvancedSettingsExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></span>'+n.escape(null==(t=d)?"":t)+'</a><div class="collapse" id="setAdvancedSettings" data-section="Advanced">',l?(i=i+'\x3c!--ko if: showAdSchedule()--\x3e<div class="form-group"><h5 class="control-label col-sm-2"><label>'+n.escape(null==(t=e.get("ColumnName_AdSchedule"))?"":t)+"</label>",a.popupHelp("pop_BA_Targeting_DayTime",e.get("ColumnName_AdSchedule"),e),i+='</h5><div class="col-sm-10"><div class="ad-schedule"></div></div></div>\x3c!-- /ko--\x3e'):(i=i+'\x3c!--ko if: showTargetsSection()--\x3e<div class="form-group"><h5 class="control-label col-sm-2"><label>'+n.escape(null==(t=e.get("AdGroupReview_TargetingSectionTitle"))?"":t)+'</label></h5><div class="col-sm-10"><div class="form-control-static">'+n.escape(null==(t=e.get("Targeting_AdvancedOptions_SectionDesc_New"))?"":t)+"</div>",a.baseSection.call({block:function(){i+='<div class="location-targets"></div>'}},"LocationTargets","Targeting_AdvancedOptions_LocationBidAdjustment","Page_TargetByLocation_BidAdjustment"),a.baseSection.call({block:function(){i+='<div class="ad-schedule"></div>'}},"AdSchedule","ImprovedAdScheduling_Expando_Subheading","pop_BA_Targeting_DayTime"),a.baseSection.call({block:function(){i+='<div class="device-targets"></div>'}},"DeviceTargets","Target_lblDevice","Page_NewCampaignCreate_Targeting_Device"),a.baseSection.call({block:function(){i+='\x3c!--ko if: showAgeTargets()--\x3e<div class="demographic-age-targets"></div>\x3c!-- /ko--\x3e\x3c!--ko if: showGenderTargets()--\x3e<div class="demographic-gender-targets"></div>\x3c!-- /ko--\x3e'}},"DemographicTargets","AdvancedTargeting_DemographicText","Page_TargetingSettingsPopup_TargetCustomersGenderAge"),i+="</div></div>\x3c!-- /ko--\x3e"),s?(i=i+'\x3c!--ko if: showExclusions()--\x3e<a class="camp-adg-shared-exclusions-dropdown" data-toggle="collapse" data-target="#setExclusions" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isExclusionsExpanded() ? &quot;true&quot; : &quot;false&quot;}" role="button"><span class="bedded-icon-marker spritedimagealign" data-bind="css: isExclusionsExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></span>'+n.escape(null==(t=e.getString("AdvancedSetting_ExclusionText"))?"":t)+"</a>",a.popupHelp("pop_BA_Settings_Exclusions",e.getString("AdvancedSetting_ExclusionText"),e),i=i+'<div class="collapse" id="setExclusions" data-section="ExclusionsSection"><div class="form-group"><div class="col-sm-10"><div class="camp-adg-shared-text-under-dropdown">'+n.escape(null==(t=e.getString("campaign"===c?"AdvancedSetting_ExclusionDesc":"AdvancedSetting_WebSiteExclusionDesc"))?"":t)+'</div>\x3c!-- ko: showSiteExclusion()--\x3e<div class="site-exclusion"></div>\x3c!-- /ko--\x3e\x3c!-- ko: showIPExclusion()--\x3e<div class="ip-exclusion"></div>\x3c!-- /ko--\x3e</div></div></div>\x3c!-- /ko--\x3e'):(i=i+'\x3c!--ko if: showExclusions()--\x3e<div class="form-group"><h5 class="control-label col-sm-2"><label>'+n.escape(null==(t=e.get("AdvancedSetting_ExclusionText"))?"":t)+"</label>",a.popupHelp("pop_BA_Settings_Exclusions",e.get("AdvancedSetting_ExclusionText"),e),i=i+'</h5><div class="col-sm-10"><div class="form-control-static">'+n.escape(null==(t=e.get("campaign"===c?"AdvancedSetting_ExclusionDesc":"AdvancedSetting_WebSiteExclusionDesc"))?"":t)+'</div>\x3c!-- ko: showSiteExclusion()--\x3e<div class="site-exclusion"></div>\x3c!-- /ko--\x3e\x3c!-- ko: showIPExclusion()--\x3e<div class="ip-exclusion"></div>\x3c!-- /ko--\x3e</div></div>\x3c!-- /ko--\x3e'),i=i+'\x3c!--ko if: showUrlOptions()--\x3e<div class="upgraded-url-options-settings"></div>\x3c!-- /ko--\x3e\x3c!--ko if: showOtherSettingsSection()--\x3e<div class="form-group"><h5 class="control-label col-sm-2"><label>'+n.escape(null==(t=e.get("AdvancedSetting_OtherSetting"))?"":t)+'</label></h5><div class="col-sm-10"><div class="form-control-static">'+n.escape(null==(t=e.get("campaign"===c?"AdvancedSetting_OtherSetting_Campaign_Description":"AdvancedSetting_OtherSetting_AdGroup_Description"))?"":t)+"</div>",o?a.baseSection.call({block:function(){i+='<div class="native-ads"></div>'}},"NativeAds","AdvancedTargeting_AudienceAdsText","pop_BA_NativeAd_BidAdj"):a.baseSection.call({block:function(){i+='<div class="native-ads"></div>'}},"NativeAds","NativeAdType_Header","pop_BA_NativeAd_BidAdj"),r&&a.baseSection.call({block:function(){i+='<div class="multimedia-ads"></div>'}},"MultimediaAds","AdvancedTargeting_MultimediaAdsText","pop_BA_MMA_BidAdjustment"),a.baseSection.call({block:function(){i+='<div class="ad-distribution"></div>'}},"AdDistribution","AdvancedSetting_AdDistributionText","Page_NewCampaignCreate_Distribute"),a.baseSection.call({block:function(){i+='<div class="ad-rotation"></div>'}},"AdRotation","AdvancedSetting_AdRotationText","Page_Campaign_AdRotation"),i+="</div></div>\x3c!-- /ko--\x3e</div></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isMultiMediaAdsEnabled"in r?r.isMultiMediaAdsEnabled:"undefined"!==typeof isMultiMediaAdsEnabled?isMultiMediaAdsEnabled:void 0,"isNativeAdsRebrandingEnabled"in r?r.isNativeAdsRebrandingEnabled:"undefined"!==typeof isNativeAdsRebrandingEnabled?isNativeAdsRebrandingEnabled:void 0,"isNewUI"in r?r.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0,"isNotAudienceCampaign"in r?r.isNotAudienceCampaign:"undefined"!==typeof isNotAudienceCampaign?isNotAudienceCampaign:void 0,"level"in r?r.level:"undefined"!==typeof level?level:void 0,"title"in r?r.title:"undefined"!==typeof title?title:void 0),i}},ARDw:function(e,t,i){e.exports=i.p+"static/media/1.91to1.0842ddd6.jpg"},AUXl:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="location-status-container"><h3>'+n.escape(null==(t=e.title)?"":t)+"</h3><p>"+n.escape(null==(t=e.text)?"":t)+"</p></div>"}.call(this,"statusTexts"in a?a.statusTexts:"undefined"!==typeof statusTexts?statusTexts:void 0),i}},AWtb:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i={};return i.koErrors=function(e,i){this&&this.block,this&&this.attributes,t=t+"<ul"+n.attr("class",n.classes([i||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},i.koErrors(),t+='<div class="update-container"></div>'}},Aycx:function(e,t,i){"use strict";function n(e){var t=parseInt(e)===Number(e),i=parseInt(e)>=0,n=e.toString(),a=n.length>0;return{isDecimal:t,isNotEmpty:a,isNonNegative:i,isEndingWithDigit:a&&!isNaN(parseInt(n.slice(-1)))}}i.d(t,"a",function(){return n})},BPp2:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a,r){r?t=t+'<span><div class="statuschangetask statusicondisplay statuschangehover clickable"'+n.attr("data-statusText",r,!0,!0)+n.attr("aria-label",a.getString(e),!0,!0)+' tabindex="0"><div'+n.attr("class",n.classes(["status-icon",i],[!1,!0]),!1,!0)+"></div></div></span>":t+=n.escape(" ")}.call(this,"ariaLabel"in i?i.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"classes"in i?i.classes:"undefined"!==typeof classes?classes:void 0,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"statusText"in i?i.statusText:"undefined"!==typeof statusText?statusText:void 0),t}},BWsg:function(e,t,i){"use strict";var n=i("aWzz"),a=i.n(n),r={};r.i18n=a.a.shape({formatDate:a.a.func.isRequired,formatPercent:a.a.func.isRequired,getCurrencySymbol:a.a.func.isRequired,getString:a.a.func.isRequired,isReady:a.a.func.isRequired,parseDate:a.a.func.isRequired,parseDecimal:a.a.func.isRequired}),r.instrumentationSchema=a.a.shape({scenario:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,value:a.a.any.isRequired,activity:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,value:a.a.any.isRequired})).isRequired})).isRequired}),r.reactRouterLocation=a.a.shape({pathname:a.a.string.isRequired,search:a.a.string,hash:a.a.string}),r.reactRouterMatch=a.a.shape({params:a.a.objectOf(a.a.oneOfType([a.a.string,a.a.number])).isRequired,path:a.a.string.isRequired,url:a.a.string.isRequired,isExact:a.a.bool.isRequired}),r.reactRouterHistory=a.a.shape({go:a.a.func.isRequired,goBack:a.a.func.isRequired,push:a.a.func.isRequired}),r.instrumentation=a.a.object,r.reportList=a.a.shape({reportsTree:a.a.shape({name:a.a.string.isRequired,path:a.a.string.isRequired,children:a.a.array}).isRequired,reports:a.a.object.isRequired,isValidCreateReportId:a.a.func.isRequired,isValidCategoryId:a.a.func.isRequired}),r.reportDescription=a.a.oneOfType([a.a.string.isRequired,a.a.shape({what:a.a.string.isRequired,why:a.a.string.isRequired}).isRequired]),r.reportDefinition=a.a.shape({apiKey:a.a.string.isRequired,description:r.reportDescription.isRequired,name:a.a.string.isRequired}),r.logger=a.a.shape({mark:a.a.func.isRequired,trace:a.a.func.isRequired,error:a.a.func.isRequired}),r.identityDetails=a.a.shape({user:a.a.shape({Id:a.a.number.isRequired,Name:a.a.string.isRequired,ParentCustomerId:a.a.number.isRequired}).isRequired,customer:a.a.shape({Id:a.a.number.isRequired,Name:a.a.string.isRequired}).isRequired,lcid:a.a.number.isRequired}),r.updateId=a.a.string,r.permissions=a.a.shape({}),r.reportSchema=a.a.object,r.repository=a.a.shape({getDetailsByExecutionId:a.a.func.isRequired}),r.servicesEndpoints=a.a.shape({CampaignAPI:a.a.string.isRequired,ClientCenterUIAPI:a.a.string.isRequired,Token:a.a.string.isRequired})},BlVq:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r={compact:"short",withSign:"always",minimumFractionDigits:0,maximumFractionDigits:2},o=a.EstimatedIncreaseInConversions,s=a.EstimatedIncreaseInClicks,l=a.EstimatedIncreaseInImpressions,c=e.formatDecimal(o,r),d=e.formatDecimal(s,r),u=e.formatDecimal(l,r),p=e.formatDecimal(a.SuggestedBid.SuggestBidAdjustmentMultiplier,{withSign:"always"});i=i+'<label id="ReommendationBidLabel">'+n.escape(null==(t=e.getString("AudiencesAssociationGrid_BidRecommendation_RecommendationTitle",{number:p}))?"":t)+'</label><div class="recommendation-description">'+n.escape(null==(t=e.getString("AudiencesAssociationGrid_BidRecommendation_RecommendationDescription"))?"":t)+"</div>",0!==l&&(i=i+"<div><span"+n.attr("class",n.classes(["performance_impressions",l>0?"positive-delta":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=u)?"":t)+"</span><span>"+n.escape(null==(t=e.getString("AudiencesAssociationGrid_BidRecommendation_PerformanceImpressions"))?"":t)+"</span></div>"),0!==s&&(i=i+"<div><span"+n.attr("class",n.classes(["performance_clicks",s>0?"positive-delta":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=d)?"":t)+"</span><span>"+n.escape(null==(t=e.getString("AudiencesAssociationGrid_BidRecommendation_PerformanceClicks"))?"":t)+"</span></div>"),0!==o&&(i=i+"<div><span"+n.attr("class",n.classes(["performance_conversions",o>0?"positive-delta":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=c)?"":t)+"</span><span>"+n.escape(null==(t=e.getString("AudiencesAssociationGrid_BidRecommendation_PerformanceConversions"))?"":t)+"</span></div>")}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"performanceMetric"in a?a.performanceMetric:"undefined"!==typeof performanceMetric?performanceMetric:void 0),i}},ByGw:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<span class="closeimage linked-in-target-grid__remove-col clickable" tabindex="0" role="button"'+n.attr("aria-label",e.getString("Remove"),!0,!0)+"></span>"}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},C9Ux:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){a&&(i=i+'<div class="container-fluid"><div class="form-group"><div class="form-control-static" id="LanguageSelectorDescription">'+n.escape(null==(t=a)?"":t)+"</div></div></div>"),i=i+'<select class="language form-control" data-bind="value: language, options: languageOptions, optionsText:&quot;Text&quot;, optionsValue:&quot;Value&quot;, disable: disabled"'+n.attr("aria-label",e,!0,!0)+' aria-describedby="LanguageSelectorSaveWarning LanguageSelectorDescription"></select>',r&&(i=i+'<div class="form-hint" id="LanguageSelectorSaveWarning">'+n.escape(null==(t=r)?"":t)+"</div>")}.call(this,"ChooseLanguage"in a?a.ChooseLanguage:"undefined"!==typeof ChooseLanguage?ChooseLanguage:void 0,"Description"in a?a.Description:"undefined"!==typeof Description?Description:void 0,"SaveWarning"in a?a.SaveWarning:"undefined"!==typeof SaveWarning?SaveWarning:void 0),i}},CDfN:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c){if(a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},c)var d="col-sm-4",u="col-sm-8";else d="col-sm-2",u="col-sm-4";i=i+'<div class="form-group" data-bind="visible: isVisible"><div data-bind="visible: isVisible"><label'+n.attr("class",n.classes([d,"control-label","title-container"],[!0,!1,!1]),!1,!0)+">",i=(i+=r?'<a class="link expanded" data-bind="attr: { &quot;aria-expanded&quot;: isExpanded() ? &quot;true&quot; : &quot;false&quot; }" href="javascript:void(0);"><span class="embedded-icon-marker expandedImage" data-bind="text: expanderLabel()"></span></a>':'<a class="link expander" data-bind="attr: { &quot;aria-expanded&quot;: isExpanded() ? &quot;true&quot; : &quot;false&quot; }" href="javascript:void(0);"><span class="embedded-icon-marker expanderImage" data-bind="text: expanderLabel()"></span></a>')+'</label><div class="col-sm-8 form-control-static">'+n.escape(null==(t=e.getString("UrlOptions_AdvancedSettings_Description"))?"":t)+'</div></div></div><div class="expandable" data-bind="visible: isVisible() &amp;&amp; (isExpanded() || !editMode())"><div class="form-group"><label'+n.attr("class",n.classes([d,"text-right","title-container"],[!0,!1,!1]),!1,!0)+">"+n.escape(null==(t=e.getString("TrackingTemplate_Label"))?"":t),a.popupHelp(s,e.getString("TrackingTemplate_Label"),e),i=i+"</label><div"+n.attr("class",n.classes(["tracking-template",u],[!1,!0]),!1,!0)+'></div></div><div class="form-group" data-bind="visible: isFinalURLSuffixEnabled"><label'+n.attr("class",n.classes([d,"text-right","title-container"],[!0,!1,!1]),!1,!0)+">"+n.escape(null==(t=e.getString("FinalUrlSuffix_Label"))?"":t),a.popupHelp(l,e.getString("FinalUrlSuffix_Label"),e),i=i+"</label><div"+n.attr("class",n.classes(["final-url-suffix",u],[!1,!0]),!1,!0)+'></div></div><div class="form-group"><label'+n.attr("class",n.classes([d,"text-right","title-container"],[!0,!1,!1]),!1,!0)+">"+n.escape(null==(t=e.getString("CustomParameters_Label"))?"":t),a.popupHelp(o,e.getString("CustomParameters_Label"),e),i=i+"</label><div"+n.attr("class",n.classes(["custom-parameters",u],[!1,!0]),!1,!0)+'></div></div><div class="form-group" data-bind="visible: isExpanded()"><div class="uurl-test-tool__container col-sm-8 col-sm-offset-4"></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isExpanded"in r?r.isExpanded:"undefined"!==typeof isExpanded?isExpanded:void 0,"popupHelpKeyAdParameters"in r?r.popupHelpKeyAdParameters:"undefined"!==typeof popupHelpKeyAdParameters?popupHelpKeyAdParameters:void 0,"popupHelpKeyAdTrackTemplate"in r?r.popupHelpKeyAdTrackTemplate:"undefined"!==typeof popupHelpKeyAdTrackTemplate?popupHelpKeyAdTrackTemplate:void 0,"popupHelpKeyFinalURLSuffix"in r?r.popupHelpKeyFinalURLSuffix:"undefined"!==typeof popupHelpKeyFinalURLSuffix?popupHelpKeyFinalURLSuffix:void 0,"smallContainer"in r?r.smallContainer:"undefined"!==typeof smallContainer?smallContainer:void 0),i}},CfPS:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,a="",r={},o=e||{};return function(o,s){r.previewGrid=t=function(e){this&&this.block,this&&this.attributes,a+='<div class="panel-footer" data-bind="visible: showPreview"><div data-bind="html: changeText" role="alert"></div><div class="previewTable grid" data-bind="if: results().length &gt; 0, visible: results().length &gt; 0"><table><thead>\x3c!--ko if: $root.previewGrids--\x3e<tr class="grid-header-row" data-bind="foreach: previewGrids"><th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text" data-bind="text: $data"></a></div></th></tr>\x3c!--/ko--\x3e\x3c!--ko ifnot: $root.previewGrids--\x3e<tr class="grid-header-row">',function(){var i=e;if("number"==typeof i.length)for(var r=0,o=i.length;r<o;r++){var s=i[r];a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}else for(var r in o=0,i)o++,s=i[r],a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}.call(this),a+='</tr>\x3c!--/ko--\x3e</thead><tbody data-bind="foreach: results"><tr class="grid-row" data-bind="foreach: $data.data"><td class="grid-cell">\x3c!-- ko if: $data.isHtml--\x3e<div class="grid-content-container" data-bind="html: $data.value"></div>\x3c!-- /ko--\x3e\x3c!-- ko if: !$data.isHtml--\x3e<div class="grid-content-container" data-bind="text: $data.value"></div>\x3c!-- /ko--\x3e</td></tr></tbody></table></div></div>'},r.errorsGrid=t=function(e,i){this&&this.block,this&&this.attributes,a=a+'<div class="panel-footer" data-bind="visible: showErrors() &amp;&amp; !isCampaignAdGroupCopyPasteOperation()"><div class="error" data-bind="html: errorCountString"></div><a class="errorCountLink" data-bind="html: errorCountLinkText" href="javascript:void(0)"></a><br><div class="previewTable grid" data-bind="visible: showErrorGrid"><table><thead>\x3c!--ko if: $root.errorsGrids--\x3e<tr class="grid-header-row" data-bind="foreach: errorsGrids"><th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text" data-bind="text: $data"></a></div></th>\x3c!--ko if: $index() === $parent.errorsGrids().length - 1--\x3e<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=o.getString("BulkEdit_InlineError_ErrorHeader"))?"":t)+'</a></div></th>\x3c!--/ko--\x3e</tr>\x3c!--/ko--\x3e\x3c!--ko ifnot: $root.errorsGrids--\x3e<tr class="grid-header-row">',function(){var i=e;if("number"==typeof i.length)for(var r=0,o=i.length;r<o;r++){var s=i[r];a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}else for(var r in o=0,i)o++,s=i[r],a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=s)?"":t)+"</a></div></th>"}.call(this),a=a+'<th class="grid-header-cell grid-disabledsort"><div class="grid-header-textcontainer"><a class="grid-header-text">'+n.escape(null==(t=o.getString("BulkEdit_InlineError_ErrorHeader"))?"":t)+'</a></div></th></tr>\x3c!--/ko--\x3e</thead><tbody data-bind="foreach: inlineErrors"><tr class="grid-row">\x3c!-- ko foreach: $data.data--\x3e<td class="grid-cell">\x3c!-- ko if: $data.isHtml--\x3e<div class="grid-content-container" data-bind="html: $data.value"></div>\x3c!-- /ko--\x3e\x3c!-- ko if: !$data.isHtml--\x3e<div class="grid-content-container" data-bind="text: $data.value"></div>\x3c!-- /ko--\x3e</td>\x3c!-- /ko--\x3e<td class="grid-cell"><div class="grid-content-container" role="alert">\x3c!-- ko foreach: $data.combinedErrors --\x3e',a+=i?'<span data-bind="html: $data"></span>':'<span data-bind="text: $data"></span>',a+='<br>\x3c!-- /ko --\x3e</div></td></tr></tbody></table></div></div><div class="panel-footer" data-bind="visible: showErrors() &amp;&amp; isCampaignAdGroupCopyPasteOperation()"><div class="error" data-bind="html: completedWithErrorsBulkEditResultsString"></div></div>'},r.popupHelp=t=function(e,t,i){this&&this.block,this&&this.attributes;var r=i&&i.get&&i.get("Click to learn more about {{item}}")||i&&i.getString&&i.getString("Click to learn more about {{item}}")||null;a=a+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this); event.stopPropagation();" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a=a+'<div class="panel"><div class="panel-heading" role="heading" aria-level="2"><div class="panel-title" data-bind="html: titleText"></div></div><div class="panel-body form-horizontal"><div class="form-group form-inline"><label class="col-sm-2 control-label" id="actionLabel">'+n.escape(null==(t=o.getString("BulkEdit_Action"))?"":t)+'</label><div class="col-sm-8"><select class="form-control" id="changeAdOptions" data-bind="options: actions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: selectedAction, disable: isDisabled" aria-labelledby="actionLabel"></select><span class="form-text" id="inLabel" data-bind="ifnot: showSetTextPanel()">'+n.escape(null==(t=o.getString("BulkEdit_Ad_In"))?"":t)+'</span><select class="form-control" data-bind="visible: !showSetTextPanel(), options: fields, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: selectedField" aria-labelledby="inLabel"></select></div></div>\x3c!--ko if: showFindReplacePanel--\x3e<div class="find-replace-section"><div class="form-group"><label class="col-sm-2 control-label" id="findLabel">'+n.escape(null==(t=o.getString("BulkEdit_Keyword_FindUrl"))?"":t)+'</label><div class="col-sm-5"><input class="form-control" type="text" data-bind="value: findText, valueUpdate: &quot;input&quot;, disable: isDisabled, attr: { maxLength: maxLength }" aria-labelledby="findLabel"><div data-bind="attr: { role: errorRole }"><div class="error" data-bind="html: errorMessage"></div></div><div class="checkbox"><label><input type="checkbox" value="MatchCase" data-bind="checked: findReplaceOptions, disable: isDisabled">'+n.escape(null==(t=o.getString("BulkEdit_Keyword_MatchCase"))?"":t)+'</label></div></div></div><div class="form-group"><label class="col-sm-2 control-label" id="replaceLabel">'+n.escape(null==(t=o.getString("BulkEdit_Keyword_ReplaceUrl"))?"":t)+'</label><div class="col-sm-5"><input class="form-control" type="text" data-bind="value: replaceText, disable: isDisabled, attr: { maxLength: maxLength }" aria-labelledby="replaceLabel"></div></div></div>\x3c!-- /ko--\x3e\x3c!--ko if:showAppendTextPanel--\x3e<div class="append-section"><div class="form-group"><label class="col-sm-2 control-label" id="appendLabel">'+n.escape(null==(t=o.getString("BulkEdit_Keyword_AppendUrl"))?"":t)+'</label><div class="col-sm-5"><input class="form-control" type="text" data-bind="value: appendText, valueUpdate: &quot;input&quot;, disable: isDisabled, attr: { maxLength: maxLength }" aria-labelledby="appendLabel"><div data-bind="attr: { role: errorRole }"><div class="error" data-bind="html: errorMessage"></div></div><div class="radio"><label><input type="radio" name="appendOption" value="Append" data-bind="checked: changeTextOption, disable: isDisabled">'+n.escape(null==(t=o.getString("BulkEdit_Ad_AppendText"))?"":t)+'</label></div><div class="radio"><label><input type="radio" name="appendOption" value="Prepend" data-bind="checked: changeTextOption, disable: isDisabled">'+n.escape(null==(t=o.getString("BulkEdit_Ad_PrependText"))?"":t)+"</label></div></div></div></div>\x3c!-- /ko--\x3e\x3c!--ko if: showSetTextPanel--\x3e";var l=o.getString("Input_NoChange_PlaceHolder");a=a+'\x3c!--set tracking template--\x3e<div class="form-group form-inline"><label class="col-sm-2 control-label" id="trackingLabel">'+n.escape(null==(t=o.getString("TrackingTemplate_Label"))?"":t),r.popupHelp("pop_BA_NewCampaignCreate_Ad_TrackTemplate",o.getString("TrackingTemplate_Label"),o),a=a+'</label><div class="col-sm-10"><select class="form-control" name="tracking-template-actions" data-bind="options: trackingTemplateActions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: trackingTemplateSelectedAction, disable: isDisabled"'+n.attr("aria-label",(o.getString("Select an action for {{item}}")||"").replace("{{item}}",o.getString("TrackingTemplate_Label")),!0,!0)+'></select></div></div>\x3c!--ko if: showTrackingTemplateInput--\x3e<div class="form-group"><div class="col-sm-offset-2 col-sm-5"><input class="form-control" name="tracking-template-field" type="text"'+n.attr("placeholder",l,!0,!0)+n.attr("aria-label",o.getString("TrackingTemplate_Label"),!0,!0)+' data-bind="value: trackingTemplate, valueUpdate: &quot;input&quot;, disable: isDisabled"></div></div>\x3c!-- /ko--\x3e\x3c!-- /ko--\x3e\x3c!--ko if: showFinalUrlSuffixInput--\x3e\x3c!--set final url suffix--\x3e<div class="form-group form-inline"><label class="col-sm-2 control-label" id="finalUrlSuffixLabel">'+n.escape(null==(t=o.getString("FinalUrlSuffix_Label"))?"":t),r.popupHelp("pop_BA_NewAdCreate_FinalURLSuffix",o.getString("FinalUrlSuffix_Label"),o),a=a+'</label><div class="col-sm-10"><input class="form-control" name="final-url-suffix-field" type="text"'+n.attr("placeholder",l,!0,!0)+n.attr("aria-label",o.getString("FinalUrlSuffix_Label"),!0,!0)+' data-bind="value: finalUrlSuffix, valueUpdate: &quot;input&quot;, disable: isDisabled"></div></div>\x3c!-- /ko--\x3e\x3c!--set custom parameters--\x3e<div class="form-group" data-bind="visible: showSetTextPanel"><label class="col-sm-2 control-label" id="customLabel">'+n.escape(null==(t=o.getString("CustomParameters_Label"))?"":t),r.popupHelp("pop_BA_NewCampaignCreate_Ad_Parameters",o.getString("CustomParameters_Label"),o),a=a+'</label><div class="col-sm-5"><select class="form-control custom-param__select" name="custom-parameters-actions" data-bind="options: customParametersActions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: customParametersSelectedAction, disable: isDisabled"'+n.attr("aria-label",(o.getString("Select an action for {{item}}")||"").replace("{{item}}",o.getString("CustomParameters_Label")),!0,!0)+'></select><div data-bind="visible: showCustomParamsInput"><div class="custom-parameters-container"></div><div data-bind="attr: { role: errorRole }"><div class="error" data-bind="html: errorMessage"></div></div></div></div></div></div>'+(null==(t=i("e0pX").call(this,e))?"":t)+"\x3c!--ko if: showPreview--\x3e",r.previewGrid(s.previewGrids()),r.errorsGrid(s.errorsGrids(),!0),a=a+"\x3c!--/ko--\x3e"+(null==(t=i("TyAh").call(this,e))?"":t)+"</div>"}.call(this,"i18n"in o?o.i18n:"undefined"!==typeof i18n?i18n:void 0,"viewModel"in o?o.viewModel:"undefined"!==typeof viewModel?viewModel:void 0),a}},CfRx:function(e,t,i){e.exports={Keyword:"Keyword",Ad:"AdTitle",AdGroup:"AdgroupName",Campaign:"CampaignName"}},Cle3:function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("f3PW"),o=i("GJCM"),s=i("a28/"),l=i("bgLp"),c=i("nN5v"),d=i("ePzV"),u=i("23d6"),p=i("Pb1Y"),g=i("Vwpy"),h=function(){function e(t){Object(c.a)(this,e),this.propertySchema=t}return Object(d.a)(e,[{key:"internalValidate",value:function(){throw new Error("internalValidate Not implemented")}},{key:"enableCheck",value:function(){return!a.a.isUndefined(this.propertySchema[this.requiredField])}},{key:"validate",value:function(){return!this.enableCheck()||this.internalValidate.apply(this,arguments)}},{key:"requiredField",get:function(){throw new Error("requiredField Not implemented")}},{key:"config",get:function(){return{ignoreInvalidProperty:!1}}}]),e}(),m={object:function(e){return a.a.isObject(e)},number:function(e,t){var i=Number(e);if(a.a.isNaN(i))return!1;var n=t.minimum,r=t.maximum;return(a.a.isUndefined(n)||i>=n)&&(a.a.isUndefined(n)||i<=r)},string:function(e){return a.a.isString(e)&&e.length>0}},f=function(e){var t=Number(e);return!a.a.isNaN(t)&&(t>=0&&t<=255)};var v={color:function(e){var t=e.split(",");return 3===a.a.size(t)&&a.a.every(t,f)}},b=[function(e){function t(e){var i;Object(c.a)(this,t),i=Object(u.a)(this,Object(p.a)(t).call(this,e));var n=e.type,a=e.minimum,r=e.maximum;return i.type=n,i.minimum=a,i.maximum=r,i}return Object(g.a)(t,e),Object(d.a)(t,[{key:"internalValidate",value:function(e){var t=m[this.type];if(!t)throw new Error("There are no configured validateFunc for this type: ".concat(this.type));return t(e,this.propertySchema)}},{key:"requiredField",get:function(){return"type"}}]),t}(h),function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(u.a)(this,Object(p.a)(t).call(this,e))).enum=e.enum,i}return Object(g.a)(t,e),Object(d.a)(t,[{key:"internalValidate",value:function(e){return a.a.contains(this.enum,e)}},{key:"requiredField",get:function(){return"enum"}}]),t}(h),function(e){function t(e){var i;Object(c.a)(this,t),i=Object(u.a)(this,Object(p.a)(t).call(this,e));var n=e.custom;return a.a.isString(n)&&(i.validateFunc=v[n]),i}return Object(g.a)(t,e),Object(d.a)(t,[{key:"internalValidate",value:function(e){if(!this.validateFunc)throw new Error("Invalid value for custom key");return this.validateFunc(e)}},{key:"requiredField",get:function(){return"custom"}}]),t}(h),function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(u.a)(this,Object(p.a)(t).call(this,e))).effectKey=e.effectKey,i}return Object(g.a)(t,e),Object(d.a)(t,[{key:"internalValidate",value:function(e,t){return a.a.contains(this.effectKey,t)}},{key:"requiredField",get:function(){return"effectKey"}},{key:"config",get:function(){return{ignoreInvalidProperty:!0}}}]),t}(h)],y={type:"object",name:"ImageAssetSerializeSchema",properties:{effectSettings:{type:"object",alias:"effect",nullable:!1,properties:{effectKey:{type:"string",alias:"key",name:"EffectKey",nullable:!1,enum:[r.EffectChoiceKey.DesignerEffects,r.EffectChoiceKey.BackgroundBlur,r.EffectChoiceKey.BackgroundSolidColor]},effectOptions:{type:"object",alias:"ops",name:"EffectOptions",nullable:!1,properties:{designerEffect:{type:"string",alias:"dsgEft",name:"DesignerEffectName",effectKey:[r.EffectChoiceKey.DesignerEffects],nullable:!0},backgroundBlur:{type:"number",alias:"bgBlur",name:"BackgroundBlurAmount",minimum:1,maximum:100,effectKey:[r.EffectChoiceKey.BackgroundBlur],nullable:!0},backgroundColor:{type:"string",alias:"bgColor",name:"BackgroundColorValue",custom:"color",effectKey:[r.EffectChoiceKey.BackgroundSolidColor],nullable:!0}}}}}}},S={type:"object",name:"ImageAssetDeserializeSchema",properties:function e(t){return a.a.reduce(t,function(t,i,n){var a=i.alias,r={alias:n};return i.properties&&(r.properties=e(i.properties)),Object(l.a)({},t,Object(s.a)({},a,r))},{})}(y.properties)},w=function e(t){var i=t.obj,n=t.schema,r=t.validatePropertyFunc,o=r({propertyValue:i,propertySchema:n}),c=o.result,d=o.ignoreInvalidProperty;if(!c&&!d)throw new Error("Validate property ".concat(n.name||n.alias," failed"));return c?a.a.isObject(i)?a.a.reduce(i,function(t,i,o){var c=n.properties[o],d=c.alias;if(!d)throw new Error("Unsupported! please add metadata to schema for key: ".concat(o));var u=e({obj:i,schema:c,validatePropertyFunc:r});if(function e(t){return a.a.isObject(t)?!a.a.some(t,function(t){return!e(t)}):a.a.isNull(t)||a.a.isUndefined(t)}(u)){if(!c.nullable)throw new Error("the value for key ".concat(o," is empty, but from schema, nullable is not allowed"));return t}return Object(l.a)({},t,Object(s.a)({},d,u))},{}):i:null},C=function(e){var t=e.obj,i=e.effectKey;return w({obj:t,schema:y,validatePropertyFunc:function(e){return function(e){var t=e.propertyValue,i=e.propertySchema,n=e.effectKey,r=!0,o=!1;if(a.a.isUndefined(t))r=!!i.nullable;else for(var s=0;s<b.length;s+=1){var l=new(0,b[s])(i),c=l.validate(t,n);if(!c&&!l.config.ignoreInvalidProperty){r=!1,o=!1;break}!c&&l.config.ignoreInvalidProperty&&(r=!1,o=!0)}return{result:r,ignoreInvalidProperty:o}}(Object(l.a)({},e,{effectKey:i}))}})},x=function(e){var t={},i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).effectSettings||{},t=e.effectKey,i=e.effectOptions,n=void 0===i?{}:i;return t&&t!==r.EffectChoiceKey.None?C({obj:{effectSettings:{effectKey:t,effectOptions:n}},effectKey:t}):null}(e);return a.a.isEmpty(i)||a.a.extend(t,i),t},k=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(a.a.isEmpty(e))return"";var i=x(e);if(a.a.isEmpty(i))return"";var n=Object(o.stringifySync)(i);return t?n.replace(/,/g,encodeURIComponent(",")):n},A=function(e){if(e){var t=e.replace(new RegExp(encodeURIComponent(","),"g"),","),i=Object(o.parseSync)(t);if(!a.a.isEmpty(i))return function(e){var t=e.obj;return w({obj:t,schema:S,validatePropertyFunc:function(){return{result:!0}}})}({obj:i})}return null};i.d(t,"b",function(){return k}),i.d(t,"a",function(){return A})},Cwtd:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'\x3c!-- ko if: editMode()--\x3e<input class="form-control" type="text" name="TrackingTemplate" data-bind="value: trackingTemplate, attr: {class: inputClass, maxlength: maxLength, &quot;aria-invalid&quot;: errorMessages().length &gt; 0}"'+n.attr("aria-label",e.getString("TrackingTemplate_Label"),!0,!0)+' aria-describedby="TrackingTemplateErrors TrackingTemplateExample"><div class="uurl-test-tool__container"></div><div class="charactersRemaining"><span id="TrackingTemplateExample">'+n.escape(null==(t=e.getString("TrackingTemplate_Example"))?"":t)+'</span></div><div class="font-error"><ul id="TrackingTemplateErrors" data-bind="foreach:errorMessages" role="alert"><li><span class="is-error" data-bind="html: $data"></span></li></ul></div><div class="uurl-test-info__container"></div>\x3c!-- /ko--\x3e<span class="control-label" data-bind="visible: !editMode(), text: trackingTemplate"></span><div data-bind="visible: showNone()"><span class="control-label">'+n.escape(null==(t=e.getString("UrlOptions_None"))?"":t)+"</span></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},D1rb:function(e,t,i){var n,a;n=[i("UT4o"),i("yiZA")],void 0===(a=function(e,t){var i=window.globalLegacySchema.get("CalloutAdExtension"),n=t.default;return n.extend({initialize:function(t){t=e.extend(t||{},{schema:i,fields:[{property:"Text",showHint:!0}]}),n.prototype.initialize.call(this,t)}})}.apply(t,n))||(e.exports=a)},D4tT:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+="<div></div>"}},D7xH:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.popupHelp=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i=i+'<div data-bind="visible: !hide()"><div class="checkbox"><label><input type="checkbox" data-bind="checked: copySetting">'+n.escape(null==(t=e.get("AdGroup_CopySettings"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Keywords_UseAnotherAdGroup",e.get("AdGroup_CopySettings"),e),i+='</div><div class="form-control-static copy-settings" data-bind="visible: copySetting"></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},DCAU:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d,u){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.adGroupOverrideInformation=t=function(e){this&&this.block,this&&this.attributes,i=i+'<div class="alert alert-info form-group" data-bind="visible: showAdGroupOverrideInformation" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line1",e))?"":t)+'</div><div class="alert-info-inline indent">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line2",e))?"":t)+'&nbsp;<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=r.getString("Learn_more_link_text"))?"":t)+"</a></div></div>"},a.koErrors(),i+="\x3c!--ko if: level === 'adgroup'--\x3e",a.adGroupOverrideInformation(r.getString("Target_Settings_Override_Device_Target")),i=i+'\x3c!--ko if: isForVNext()--\x3e<label class="control-label">'+n.escape(null==(t=r.getString("TargetingSettings_Devices"))?"":t)+'</label>\x3c!-- /ko--\x3e<label class="type-normal" id="base-use-campaign-settings">'+n.escape(null==(t=r.get("CreationWorkflowsInheritanceFlagLabel"))?"":t)+'</label><div class="toggle-campaign-settings-switch form-control-static" data-bind="checked: useCampaignSettings"></div>\x3c!-- /ko--\x3e<div class="form-control-static">'+n.escape(null==(t=l)?"":t)+'</div><table class="advance-targeting-grid table new-advance-target-grid-container"'+n.attr("target-type",u,!0,!0)+' data-bind="css: {showCashbackPercent:supportCashbackSettings}"><thead><tr><th class="col-sm-4">'+n.escape(null==(t=c)?"":t)+'</th><th class="col-sm-3" colspan="2">'+n.escape(null==(t=e)?"":t),d&&a.popupHelp(d,e,r),i=i+'</th>\x3c!-- ko if: $root.supportCashbackSettings()--\x3e<th class="cashback-percent-head" colspan="2">'+n.escape(null==(t=r.getString("Campaign_Maximum_Cashback_Offer"))?"":t)+"</th>\x3c!-- /ko--\x3e</tr></thead><tbody>",function(){var e=s;if("number"==typeof e.length)for(var l=0,c=e.length;l<c;l++){var d=e[l];i=i+"<tr"+n.attr("data-index",l+1,!0,!0)+"><td><span>"+n.escape(null==(t=d.targetName)?"":t)+'</span></td><td><select class="form-control"'+n.attr("data-bind","options: rows["+l+'].bidAdjustmentOptions, optionsText: "text", optionsValue: "value", value: rows['+l+"].selectedBidAdjustmentOption, disable: rows["+l+'].readonly ? "true" : readonlyBid',!0,!0)+n.attr("aria-label",r.getString("BidAdjustment_Options"),!0,!0)+'></select></td><td><input class="form-control display-inline bidBoost-percentValue" type="text"'+n.attr("data-bind","value: rows["+l+'].bidAdjustmentValue, valueUpdate: "input", disable: readonlyBid, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "BID"}',!0,!0)+n.attr("aria-label",r.getString("BidAdjustment_BidMultiplier"),!0,!0)+'><span class="bidBoost-percent">'+n.escape(null==(t=o)?"":t)+'</span></td>\x3c!-- ko if: $root.supportCashbackSettings()--\x3e<td class="cashback-option-select-col"><select class="cashback-option-select form-control"'+n.attr("data-bind","options: rows["+l+'].cashbackOptions, optionsText:"text", optionsValue: "value", value: rows['+l+"].selectedCashbackOption, disable: readonlyBid",!0,!0)+'></select></td><td class="cashback-value-col"><span class="inherit-cashback-value"'+n.attr("data-bind","visible: rows["+l+'].selectedCashbackOption() === "inherit"',!0,!0)+'><input class="form-control display-inline cashback-percent-value" type="text"'+n.attr("data-bind","value: rows["+l+'].cashbackInheritValue, valueUpdate: "input", disable: true, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "CASHBACK"}',!0,!0)+n.attr("aria-label",r.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=r.get("Campaign_Discount"))?"":t)+'</span></span><span class="cashback-input-container"'+n.attr("data-bind","visible: rows["+l+'].selectedCashbackOption() === "override"',!0,!0)+'><input class="form-control display-inline cashback-percent-value" type="text"'+n.attr("data-bind","value: rows["+l+'].cashbackPercentValue, valueUpdate: "input", disable: readonlyBid, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "CASHBACK"}',!0,!0)+n.attr("aria-label",r.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=r.get("Campaign_Discount"))?"":t)+"</span></span></td>\x3c!-- /ko--\x3e</tr>",d.tipText&&(i=i+'<tr class="table-row__tip-text"><td></td><td colspan="2"><span class="row-tip">'+n.escape(null==(t=d.tipText)?"":t)+"</span></td></tr>"),i+='<tr><td colspan="3">',a.koValidationError(d.koErrorObservable),i+="</td></tr>"}else for(var l in c=0,e)c++,d=e[l],i=i+"<tr"+n.attr("data-index",l+1,!0,!0)+"><td><span>"+n.escape(null==(t=d.targetName)?"":t)+'</span></td><td><select class="form-control"'+n.attr("data-bind","options: rows["+l+'].bidAdjustmentOptions, optionsText: "text", optionsValue: "value", value: rows['+l+"].selectedBidAdjustmentOption, disable: rows["+l+'].readonly ? "true" : readonlyBid',!0,!0)+n.attr("aria-label",r.getString("BidAdjustment_Options"),!0,!0)+'></select></td><td><input class="form-control display-inline bidBoost-percentValue" type="text"'+n.attr("data-bind","value: rows["+l+'].bidAdjustmentValue, valueUpdate: "input", disable: readonlyBid, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "BID"}',!0,!0)+n.attr("aria-label",r.getString("BidAdjustment_BidMultiplier"),!0,!0)+'><span class="bidBoost-percent">'+n.escape(null==(t=o)?"":t)+'</span></td>\x3c!-- ko if: $root.supportCashbackSettings()--\x3e<td class="cashback-option-select-col"><select class="cashback-option-select form-control"'+n.attr("data-bind","options: rows["+l+'].cashbackOptions, optionsText:"text", optionsValue: "value", value: rows['+l+"].selectedCashbackOption, disable: readonlyBid",!0,!0)+'></select></td><td class="cashback-value-col"><span class="inherit-cashback-value"'+n.attr("data-bind","visible: rows["+l+'].selectedCashbackOption() === "inherit"',!0,!0)+'><input class="form-control display-inline cashback-percent-value" type="text"'+n.attr("data-bind","value: rows["+l+'].cashbackInheritValue, valueUpdate: "input", disable: true, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "CASHBACK"}',!0,!0)+n.attr("aria-label",r.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=r.get("Campaign_Discount"))?"":t)+'</span></span><span class="cashback-input-container"'+n.attr("data-bind","visible: rows["+l+'].selectedCashbackOption() === "override"',!0,!0)+'><input class="form-control display-inline cashback-percent-value" type="text"'+n.attr("data-bind","value: rows["+l+'].cashbackPercentValue, valueUpdate: "input", disable: readonlyBid, css: {"validation-error": !'+d.koErrorObservable+".isValid() && "+d.koErrorType+'() === "CASHBACK"}',!0,!0)+n.attr("aria-label",r.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=r.get("Campaign_Discount"))?"":t)+"</span></span></td>\x3c!-- /ko--\x3e</tr>",d.tipText&&(i=i+'<tr class="table-row__tip-text"><td></td><td colspan="2"><span class="row-tip">'+n.escape(null==(t=d.tipText)?"":t)+"</span></td></tr>"),i+='<tr><td colspan="3">',a.koValidationError(d.koErrorObservable),i+="</td></tr>"}.call(this),i+="</tbody></table>"}.call(this,"bidAdjustmentHeader"in r?r.bidAdjustmentHeader:"undefined"!==typeof bidAdjustmentHeader?bidAdjustmentHeader:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"percentSymbol"in r?r.percentSymbol:"undefined"!==typeof percentSymbol?percentSymbol:void 0,"rows"in r?r.rows:"undefined"!==typeof rows?rows:void 0,"targetDescription"in r?r.targetDescription:"undefined"!==typeof targetDescription?targetDescription:void 0,"targetHeader"in r?r.targetHeader:"undefined"!==typeof targetHeader?targetHeader:void 0,"targetPopupId"in r?r.targetPopupId:"undefined"!==typeof targetPopupId?targetPopupId:void 0,"targetType"in r?r.targetType:"undefined"!==typeof targetType?targetType:void 0),i}},DUzX:function(e,t,i){var n,a;n=[i("UT4o"),i("Glrc"),i("syDw")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=378)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},2:function(e,t){e.exports=i},378:function(e,t,i){e.exports=i(379)},379:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(380);Object.defineProperty(t,"RemainingCharsHint",{enumerable:!0,get:function(){return n.RemainingCharsHint}})},380:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemainingCharsHint=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=s(i(2)),r=s(i(0)),o=s(i(381));function s(e){return e&&e.__esModule?e:{default:e}}t.RemainingCharsHint=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.View),n(t,[{key:"initialize",value:function(e){var t=this;if(this.i18n=e.i18n,this.model=e.model,this.field=e.field,!r.default.has(this.model.vmSchema,this.field))throw new Error("The schema does not contain the field "+this.field+".");if(!r.default.has(this.model.attributes,this.field))throw new Error("The model does not contain the field "+this.field+".");if(this.maxSize=this.model.vmSchema[this.field].prop.maxLength,"number"!==typeof this.maxSize)throw new Error("The 'maxLength' of '"+this.field+"' is not a number.");this.model.on("change:"+this.field,function(){return t.updateHint()})}},{key:"render",value:function(){return this.$el.html((0,o.default)({hint:this.getHintString()})),this.hintText=this.$(".remaining-chars-hint"),this}},{key:"getHintString",value:function(){var e=this.model.get(this.field).length-this.maxSize;return e>0?1===e?this.i18n.getString("RemainingCharsHint_ExceededBy_Character",{count:e.toString()}):this.i18n.getString("RemainingCharsHint_ExceededBy_Characters",{count:e.toString()}):1===(e=Math.abs(e))?this.i18n.getString("RemainingCharsHint_CharacterRemaining",{count:e.toString()}):this.i18n.getString("RemainingCharsHint_CharactersRemaining",{count:e.toString()})}},{key:"updateHint",value:function(){this.hintText.text(this.getHintString())}}]),t}()},381:function(e,t,i){"use strict";var n=i(1);e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<p class="remaining-chars-hint">'+n.escape(null==(t=e)?"":t)+"</p>"}.call(this,"hint"in a?a.hint:"undefined"!==typeof hint?hint:void 0),i}}})}.apply(t,n))||(e.exports=a)},"Dbz+":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="location-manage-box" style="min-width: 900px" data-bind="css: { &quot;location-manage-box-border-top&quot;: wholeBoderVisible() }"><div class="left-panel col-sm-5"><div class="location-search"></div><div class="location-target-grid bingadsgrid"></div><div class="recommend-location-grid"></div><div class="excluded-location-target-grid bingadsgrid"></div></div><div class="right-panel col-sm-7"><div class="map"></div></div></div>'}},"EA/1":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a){var r=a.id,o=a.property,s="value:"+o+".text";a.valueUpdate&&(s+=", valueUpdate:"+e.stringify(a.valueUpdate)),t=t+'<textarea class="form-control"'+n.attr("id",a.id,!0,!0)+n.attr("required",a.required,!0,!0)+n.attr("aria-labelledby",r+"-Label",!0,!0)+n.attr("aria-required",i(a.required),!0,!0)+n.attr("rows",i(a.rows),!0,!0)+n.attr("data-bind",s+", hasFocus: "+o+".editing, attr: { placeholder: "+o+".placeholder, title: "+o+".label, 'aria-describedby': "+o+".strDescribedby }",!0,!0)+"></textarea>"}.call(this,"JSON"in i?i.JSON:"undefined"!==typeof JSON?JSON:void 0,"String"in i?i.String:"undefined"!==typeof String?String:void 0,"field"in i?i.field:"undefined"!==typeof field?field:void 0),t}},EJXN:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="itemTemplate-text"><span>#:data.Text#</span></div>'}},ERQU:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("5iHu"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("7XbR"),f=i.n(m),v=function e(t){var i=this,a=t.items,r=t.selectedIndex;Object(n.a)(this,e),this.items=a,this.selectedIndex=f.a.observable(r),this.selected=f.a.computed(function(){return i.items[i.selectedIndex()]})},b=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.template,a=void 0===n?"button-group":n,r=e.items,o=void 0===r?[]:r,s=e.selectedIndex,l=void 0===s?0:s,c=e.viewModel,d=e.templateOptions,u=void 0===d?{}:d;this.template=a,this.templateOptions=u,this.viewModel=c||new v({items:t.normalizeItems(o),selectedIndex:l}),this.viewModel.selected.subscribe(function(e){i.trigger("select",e,i.viewModel.selectedIndex())})}},{key:"render",value:function(){return this.delegateEvents(),this.$el.html(this.template(this.templateOptions)),f.a.applyBindings(this.viewModel,this.el),this}},{key:"remove",value:function(){f.a.cleanNode(this.el),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"_itemClicked",value:function(e){this.viewModel.selectedIndex(Number(p()(e.currentTarget).attr("data-index")))}},{key:"events",get:function(){return{"click .action-list__item":"_itemClicked"}}}],[{key:"normalizeItems",value:function(e){return h.a.map(e,function(e){return h.a.isString(e)?{text:e}:e})}}]),t}(d.a.View),y=function(e){function t(e){var i,a=e.items,s=e.selectedIndex,l=e.selectedTemplate;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{items:a,selectedIndex:s}))).selectedText=f.a.computed(function(){return l(i.selected())}),i}return Object(l.a)(t,e),t}(v),S=i("oFK3"),w=i.n(S),C=i("v0gy"),x=i.n(C);i("CE5c");i.d(t,"default",function(){return T});var k=window.globalLegacyI18n.get("component/i18n/loader!component/picker");function A(e){return x()({text:k.get("Picker_Selected",{view:k.get("Picker_Selected_View"),item:e.text})})}var T=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=e.items,n=void 0===i?[]:i,a=e.selectedIndex,r=void 0===a?0:a,l=e.selectedTemplate,c=void 0===l?A:l,d=e.template,u=void 0===d?w.a:d,p=e.useHash,g=void 0===p||p,h=new y({items:b.normalizeItems(n),selectedIndex:r,selectedTemplate:c}),m={useHash:g};Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{template:u,items:n,selectedIndex:r,viewModel:h,templateOptions:m})}}]),t}(b)},EcZa:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s){i=i+'<form class="form-inline pagination-control"><div class="text"><span>'+n.escape(null==(t=r)?"":t)+'</span></div><select class="form-control page-size-selector" data-bind="options: availablePageSizes, value: pageSizeInput"'+n.attr("aria-label",r,!0,!0)+'></select><div class="pager" data-bind="visible: pageCount() &gt; 1"><button class="btn btn-default btn-flat nav-button prev" data-bind="click: decPageNumber, enable: pageNumber() &gt; 0" type="button"'+n.attr("aria-label",o,!0,!0)+'><div class="glyphicon glyphicon-triangle-left"></div></button><div class="text"><span>'+n.escape(null==(t=a)?"":t)+'</span></div><input class="form-control page-number-input" data-bind="value: pageNumberText, attr: { size: pageNumberSize, maxlength: pageNumberSize, disabled: !enableRandomPage() }, event: { keypress: onKeyPress }" type="text"'+n.attr("aria-label",a,!0,!0)+'><div class="text"><span>'+n.escape(null==(t=s)?"":t)+'</span><span>&nbsp;</span><span data-bind="text: pageCount"></span></div><button class="btn btn-default btn-flat nav-button next" data-bind="click: incPageNumber, enable: pageNumber() &lt; pageCount() - 1" type="button"'+n.attr("aria-label",e,!0,!0)+'><div class="glyphicon glyphicon-triangle-right"></div></button></div></form>'}.call(this,"nextPageText"in a?a.nextPageText:"undefined"!==typeof nextPageText?nextPageText:void 0,"pageNumberLabelText"in a?a.pageNumberLabelText:"undefined"!==typeof pageNumberLabelText?pageNumberLabelText:void 0,"pageSizeText"in a?a.pageSizeText:"undefined"!==typeof pageSizeText?pageSizeText:void 0,"previousPageText"in a?a.previousPageText:"undefined"!==typeof previousPageText?previousPageText:void 0,"totalPageCountText"in a?a.totalPageCountText:"undefined"!==typeof totalPageCountText?totalPageCountText:void 0),i}},"EfI/":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("/xyZ"),c=i.n(l),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("jQIp"),m=i.n(h),f=i("xAPU"),v=i.n(f),b=i("UT4o"),y=i.n(b),S=i("5iHu"),w=i.n(S);function C(e){return w()(e).is("a[href], area[href], button, details, input, iframe, select, textarea, [tabindex], [onclick], [data-inline=1], .grid-editable-cell")}var x=function(e){return e("assisted-selection",["gridView"],function(e){var t={name:"assisted-selection",handler:function(t){var i=this,n=e.get("selection");if(!1===n||y.a.isObject(n)&&!1===n.enabled)return t;var a={"click tbody tr[data-key]":function(t){var a=w()(t.target).parentsUntil("tr");y.a.find(y.a.union(y.a.toArray(a),[t.target]),function(e){return C(e)})||setTimeout(function(){if(window.getSelection().isCollapsed){var a=i.keyOfElement(t.target);y.a.isNull(a)||(y.a.contains(e.selectedKeys(),a)?n.single||e.deselectRow(a):e.selectRow(a))}},100)}};return y.a.defaults(a,t.events),y.a.defaults({events:a},t)},defaults:{}};e.pipeContentProjections(t)})};var k=i("sLkA"),A=i.n(k),T=i("Q5Xd"),_=i("5C8L"),E=i.n(_),I=i("ni8S"),O="individual",P=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this.options=i,this.sharedBudgetSwitch=g.a.observable(O),this.hasSharedBudgets=g.a.observable(!0),this.hasSelectedBudget=g.a.observable(!0),this.noApplyBudgetFromSharedLibrary=i.noApplyBudgetFromSharedLibrary,this.isEditMode=g.a.observable(!0),this.isCPSSelected=g.a.observable(!1),this.sharedBudgetIsNotAllowedWarning=g.a.observable("Shared budget is not allowed..."),E.a.properties(this,T.Budget,["Id","Name","Amount"],{}),this.budgetDetailLink=g.a.computed(function(){return I.a.getBudgetLink(t.Id())}),this.sharedBudgetSwitch.subscribe(function(e){t.options.activityLogger&&t.options.activityLogger.signal("budget option switched: ".concat(e),"shared budget switch editor")})}return Object(a.a)(e,[{key:"updateFromModel",value:function(e){this.Id(e.Id),this.Name(e.Name),this.Amount(e.Amount)}},{key:"isIndividualBudgetSelected",value:function(){return this.sharedBudgetSwitch()===O}},{key:"isSharedBudgetSelected",value:function(){return"shared"===this.sharedBudgetSwitch()}},{key:"showIndividualBudget",value:function(){this.sharedBudgetSwitch(O)}},{key:"showSharedBudget",value:function(){this.sharedBudgetSwitch("shared")}}]),e}(),M=i("+PqR"),j=i.n(M),L=i("nlAS"),D=i.n(L),R=i("Jqi9"),N=i.n(R),V=i("2YJl"),B=i.n(V),F=i("xQcn"),U=i.n(F),G=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shared-budget"),z=[{name:"Status",sortable:"Status",filterable:!1,locked:!0,title:G.get("ColumnName_Status"),html:B()(),template:function(e){return U()({model:{Status:e.value,i18n:G}})}},{name:"Name",title:G.get("SharedBudget_SummaryPage_Column_Budget"),sortable:"Name",bodyClasses:"cell-budget-name"},{name:"Budget",sortable:"Amount",property:function(e){return j.a.fromFloatToString(e.Amount)},title:G.get("SharedBudget_SummaryPage_Column_Amount"),template:function(e){return"".concat(N()({value:j.a.fromFloatToString(e.value,2),align:"right"})).concat(G.get("SharedBudget_DetailPage_PerDay"))},bodyClasses:"cell-budget-amount"},{name:"CampaignCount",sortable:"AssociationCount",property:"AssociationCount",title:G.get("SharedBudget_SummaryPage_Column_CampaignCount")}],H=function e(t){var i=t.view;Object(n.a)(this,e),y.a.extend(this,{name:"shared-budget-switch-editor-grid",el:i.$(".shared-budget-switch-editor-grid"),dataSource:{type:"jsdata",entity:D.a.Budget,primaryKey:"Id",query:{startDate:null,endDate:null,$select:"Id,Status,Name,Amount,AssociationCount"},options:{cacheResponse:!1},orderby:[{key:"Name",direction:1}]},tableClasses:["table","table-hover","grid"],scrolling:{virtualized:!0},selection:{single:!0,bodyClasses:"cell-selection"},columns:z,plugins:{pagination:{el:i.$(".grid-pager.pager"),pageSize:20,availablePageSizes:[10,20,50,100]}}})},W=i("ZEPV"),q=i("nPji"),$=i("SxBh"),K=i.n($),J=i("BPWY"),Z=i.n(J),Y=i("ZhOl"),Q=i.n(Y);i.d(t,"default",function(){return ee});var X=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shared-budget"),ee=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.perfMarker&&(this.showSharedBudgetMarker=e.perfMarker.createChild("Show_Shared_Budget"),this.showSharedBudgetMarker.willInit()),this.options=m.a.defaults({},e,{showInitialUiBlocker:!0}),this.model={},this.viewModel=new P(e),e.model&&e.model.Id>0?this.individualOptions=m.a.defaults({model:{}},e):this.individualOptions=e}},{key:"events",value:function(){return{"click .shared-budget-switch-editor-selected-budget-edit":"enableEditMode"}}},{key:"enableEditMode",value:function(){this.viewModel.isEditMode(!0)}},{key:"render",value:function(){var e=this;this.showSharedBudgetMarker&&this.showSharedBudgetMarker.willRender(),this.$el.html(K()({i18n:X})),g.a.applyBindings(this.viewModel,this.el);var t=this.$(".individual-budget-editor"),i=new H({view:this});this.budgetView=new this.options.IndividualBudgetFactory(m.a.extend({},this.individualOptions,{el:t})).render();var n,a=this.$el,r=!0;return this.options.showInitialUiBlocker&&(n=A.a.block(a)),this.grid=v.a.factory({vnext:!0}).use(W.a).use(x).use(q.a11yPlugin).create(i),this.initialLoadTask=new c.a(function(t){e.grid.gridView.once("didReload",function(){t(),e.showSharedBudgetMarker&&e.showSharedBudgetMarker.done()})}),this.listenTo(this.grid.gridView,"willUpdate",function(t){if(!r){if(m.a.isObject(t)){var i=m.a.keys(t);if(1===i.length&&"selection"===i[0])return}r=!0,(e.options.showInitialUiBlocker||e.initialLoadTask.isFulfilled())&&(n=A.a.block(a)),e.viewModel.hasSharedBudgets(!0)}}),this.listenTo(this.grid.gridView,"didUpdate",function(){r=!1,n&&(A.a.unblock(a,n),n=null);var t=e.grid.gridView.countRows>0;e.viewModel.hasSharedBudgets(t)}),this.listenTo(this.budgetView,"budget.updated",function(t){return e.trigger("budget.updated",t)}),this.grid.gridView.render(),this.update(this.options.model),this}},{key:"validate",value:function(){var e=!1,t=!1;return this.viewModel.isIndividualBudgetSelected()?(e=this.budgetView.validate())||(t=!0):this.viewModel.isSharedBudgetSelected()&&(e=!!this.getSharedBudgetSelection(),this.viewModel.hasSelectedBudget(e),e=e&&!this.viewModel.isCPSSelected()),!(e=!!e)&&t&&(this.options.activityLogger?this.options.activityLogger.signal("budget is not valid","shared budget switch editor"):Z.a.logMessage([Q.a.LOGCATEGORY.SUBSTRATE],Q.a.LOGLEVEL.INFO,"shared budget switch editor","budget is not valid")),e}},{key:"getValues",value:function(e){var t=null;return this.viewModel.isIndividualBudgetSelected()?(t=this.budgetView.getValues()).Id=null:this.viewModel.isSharedBudgetSelected()&&(t=this.getSharedBudgetSelection()),t&&"Id"in t&&(e.BudgetId=t.Id),t}},{key:"update",value:function(e){this.model=e,e&&e.Id>0?(this.viewModel.updateFromModel(e),this.viewModel.isEditMode(!1),this.viewModel.showSharedBudget(),this.grid.gridView.selectRow(e.Id)):(this.budgetView.update(e),this.viewModel.showIndividualBudget())}},{key:"getSharedBudgetSelection",value:function(){var e=null,t=this.grid.gridView.selectedItems();return(e=t&&t[0]?t[0]:this.model)&&e.Id>0?e:null}},{key:"useSuggestedBudget",value:function(){return m.a.isFunction(this.budgetView.useSuggestedBudget)?this.budgetView.useSuggestedBudget():void 0}},{key:"updateSuggestedBudget",value:function(e,t){return m.a.isFunction(this.budgetView.updateSuggestedBudget)?this.budgetView.updateSuggestedBudget(e,t):void 0}},{key:"enough",value:function(){return!m.a.isFunction(this.budgetView.enough)||this.budgetView.enough()}},{key:"getSuggestedBudget",value:function(){return m.a.isFunction(this.budgetView.getSuggestedBudget)?this.budgetView.getSuggestedBudget():void 0}}],[{key:"newFactory",value:function(e){return function(i){var n=t;return i.IndividualBudgetFactory=e,new n(i)}}}]),t}(u.a.View)},Ek7f:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="bmc_redirect_page"><h1 class="bmc_redirect_header"><span>'+n.escape(null==(t=e.getString("ShoppingCampaign_Header_Title"))?"":t)+"</span></h1><span>"+n.escape(null==(t=e.getString("ShoppingCampaign_NoBMCAccount_Message"))?"":t)+"</span><span>"+n.escape(null==(t=" ")?"":t)+'</span><a class="bmc_url_link"><span>'+n.escape(null==(t=e.getString("ShoppingCampaign_BmcURL_Text"))?"":t)+"</span></a>",a.isEnabledForDynamicFeedCampaign&&(i=i+"<span>"+n.escape(null==(t=" or ")?"":t)+'</span><a class="feed_url_link"><span>'+n.escape(null==(t=e.getString("AudienceShoppingCampaign_UploadFeed_Text"))?"":t)+"</span></a>"),i=i+'<div class="bmc_save_bar"><input class="btn-cancel btn btn-default" type="button"'+n.attr("value",e.getString("Audience_Campaign_Cancel_Label"),!0,!0)+"></div></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"options"in a?a.options:"undefined"!==typeof options?options:void 0),i}},El24:function(e,t,i){"use strict";i.d(t,"a",function(){return y});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("UT4o"),u=i.n(d),p=i("/8uS"),g=i("sqeS"),h=i("5SfK"),m=i.n(h),f=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextensions"),v=Object(g.a)().DropdownSearchSelector;function b(e){var t=e.searchString,i=void 0===t?"":t,n=e.Language,a=e.reserveActionType,r=Object(p.b)({Language:n,reserveActionType:a}),o=u.a.chain(r).map(function(e,t){return u.a.isEmpty(i)||(n=e,a=i,u.a.isString(n)&&u.a.isString(a)&&n.toLowerCase().indexOf(a.toLowerCase())>=0)?{id:t,value:e}:null;var n,a}).compact().sortBy("value").value();return{totalCount:u.a.size(o),options:o}}var y=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.observable,i=e.viewModel,n=e.entity,a=void 0===n?null:n,r=e.field,o=void 0===r?null:r,s=e.isMultimediaAd,l=void 0!==s&&s,d=e.callback,g=void 0===d?void 0:d;if(this.observable=t,u.a.isEmpty(this.observable())||"Unknown"===this.observable()?l||this.observable(Object(p.c)({Language:i.Language()})):this.observable(Object(p.e)(this.observable())),this.viewModel=i,this.isMultimediaAd=l,this.isMultimediaAd){if(!(a instanceof c.a.Model))throw new Error("entity should be a backbone model");if(u.a.isEmpty(o))throw new Error("field is required");this.field=o,this.entity=a,this.callback=g}}},{key:"setDropdownSearchSelector",value:function(){var e=this;this.dropdownSearchSelector&&this.dropdownSearchSelector.remove();var t=this.viewModel.Language(),i=Object(p.a)({Language:t,ActionType:this.observable()})?this.observable():Object(p.c)({Language:t}),n={id:i,value:Object(p.a)({Language:t,ActionType:i})};this.isMultimediaAd&&(u.a.isEmpty(t)?n.value=f.getString("ActionAdExtension_ActionText_Placeholder"):u.a.isEmpty(this.observable())&&(n=null)),this.dropdownSearchSelector=new v({selectOption:n,dataSource:function(e){return b(u.a.extend({},e,{Language:t,reserveActionType:i}))},pageSize:1024,i18n:f,forceEnableSearch:!0,invokeSearchOnChange:!0,placeholder:f.getString("ActionAdExtension_ActionText_Search"),isDisabled:this.isMultimediaAd&&u.a.isEmpty(t)}).render(),this.callback&&n&&this.callback(n),this.dropdownSearchSelector.on("option-selected",function(t){e.observable(t.id),e.callback&&e.callback(t)}),this.$(".actionextension-search-dropdown-container").append(this.dropdownSearchSelector.el)}},{key:"render",value:function(){var e=this;return this.$el.html(m()()),this.viewModel.Language.subscribe(function(){e.setDropdownSearchSelector()}),this.setDropdownSearchSelector(),this}}]),t}(c.a.View)},EsEL:function(e,t,i){"use strict";i.r(t),i.d(t,"getCampaignData",function(){return p}),i.d(t,"getAdgroupData",function(){return g});var n=i("UT4o"),a=i.n(n),r=i("YK3D"),o=i.n(r),s=i("nlAS"),l=i.n(s),c=i("fE/Z"),d=10,u=6;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r={$select:"Id, Name, Status",$skip:t*i,$top:i,$filter:"contains(Name, '".concat(e,"') and (CampaignType ne Enum.CampaignType'Smart')")};return n&&(r.$filter+=" and ".concat(n)),l.a.Campaign.findAll({query:r}).then(function(e){return function(e){if(!e||!a.a.isArray(e))return[];var t=e.map(function(e){return{Id:e.Id,name:e.Name,status:e.Status}});return{totalCount:e.totalCount,items:t}}(e)})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,n=arguments.length>3?arguments[3]:void 0,r={$expand:"Campaign($select=Id,Name,CampaignType)",$select:a.a.compact(["Id","Name","Status",o.a.Permissions.IsPersonalizedOffersEnabled&&"AdGroupCashback"]).join(", "),$skip:t*i,$top:i,$count:!0,$filter:"contains(Name, '".concat(e,"')")};return n&&(r.entitySet=c.default.currentAccount.Campaigns.$withKey(Number(n.Id)).AdGroups.toJSON()),l.a.AdGroup.findAll({query:r}).then(function(e){return function(e){if(!e||!a.a.isArray(e))return[];var t=e.map(function(e){return{Id:e.Id,name:e.Name,status:e.Status,campaignId:e.Campaign.Id,campaignName:e.Campaign.Name}});return{totalCount:e.totalCount,items:t}}(e)})}},EwHi:function(e,t,i){var n,a;n=[i("syDw"),i("/xyZ"),i("UT4o"),i("7XbR"),i("ERkP"),i("7nmT"),i("YK3D"),i("NkAx"),i("hIFU"),i("OliZ"),i("LQ/w"),i("IbLZ"),i("J3Zd"),i("0e0T"),i("DXRr"),i("nlAS"),i("fE/Z"),i("FDu0"),i("1EwD"),i("2wXG"),i("L/dA"),i("HVug"),i("NuBH"),i("gyJX"),i("BPWY"),i("ZhOl"),i("EfI/"),i("UOZx"),i("TNmU"),i("Q3lO"),i("ImwW"),i("Q5Xd"),i("+Bp1"),i("yN9e"),i("U65n"),i("Kn9t"),i("+PqR"),i("ORPc")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u,p,g,h,m,f,v,b,y,S,w,C,x,k,A,T,_,E,I,O,P,M,j,L,D,R,N){"use strict";var V=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),B=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/campaign-creation-advanced"),F=P.AdGroup,U=P.CampaignCriterion,G=P.DisclaimerAdExtension,z=w.default,H=f.default,W=y.default,q=u.default,$=_.default,K=E.default,J=T.default,Z=C.MultiLanguageSelector,Y=x.AdsCampaignDisclaimers,Q=O.ExperimentBudgetAlert,X=M.default,ee=L.default,te=p.CashbackSettings,ie=N.ImpressionTrackingUrlOptions,ne={CampaignName:"pop_BA_CampaignCreate_Settings_CampaignName",Language:"pop_BA_CampaignCreate_Settings_AdLanguage",MultiLanguage:"pop_BA_CampaignCreate_Settings_LanguageTargeting",TargetingSource:"pop_BA_DSA_TargetingSource"};return e.View.extend({initialize:function(e){if(this.options=i.defaults({},e,{scenario:"creation-workflow",showLanguage:!0,Languages:[],showInitialUiBlocker:!0,hideBidStrategy:!1,deps:{},IsAdsGlobalizationPhase1Enabled:o.Permissions.IsAdsGlobalizationPhase1Enabled,IsAdsGlobalizationPhase2Enabled:o.Permissions.IsAdsGlobalizationPhase2Enabled}),this.popupIds=i.defaults({},this.options.popupIds,ne),this.shouldShowCashbackSettings=g.isPersonalizedOfferAvailable(o.Permissions,this.options.campaignType,this.options.campaignSubType),this.isAudienceCampaign="Audience"===this.options.campaignType,this.isAudienceVideoAdsCampaign="AudienceVideoAds"===this.options.campaignSubType,this.isEnabledForVerifiedImpressionTracking=this.isAudienceCampaign&&this.isAudienceVideoAdsCampaign&&o.Permissions.IsEnabledForVerifiedImpressionTrackingAtCampaignLevel,this.isSignUpPage="signup-creation-workflow"===this.options.scenario,this.eventDelegator=i.result(this.options.deps,"eventDelegator",new z),this.ko_model=new l(i.extend({},this.options,{isExperiment:this.isExperiment,isDisclaimerAdsEnabled:this.isDisclaimerAdsEnabled.bind(this),shouldShowCashbackSettings:this.shouldShowCashbackSettings})),this.isVideo="AudienceVideoAds"===this.options.CampaignSubType,"campaign-settings"===this.options.scenario){if(i.contains(["search"],I.default()))this.biddingStrategyView=new K({entityType:"Campaign",biddingStrategyType:this.options.BiddingScheme.Type,bidStrategyName:this.options.BidStrategyName,maxCpc:this.options.BiddingScheme.MaxCpc?this.options.BiddingScheme.MaxCpc.Amount:null,targetCpa:this.options.BiddingScheme.TargetCpa,targetRoas:this.options.BiddingScheme.TargetRoas,targetAdPosition:this.options.BiddingScheme.TargetAdPosition,targetImpressionShare:this.options.BiddingScheme.TargetImpressionShare,campaignType:I.default(),activityLogger:this.options.activityLogger,i18nNewDesign:this.options.deps.i18nNewDesign,shouldSupportCashbackSettings:g.shouldSupportCashbackSettings(this.options)});else if(i.contains(["shopping"],I.default()))this.biddingStrategyView=new K(i.extend({entityType:"Campaign",biddingStrategyType:this.options.BiddingScheme.Type,bidStrategyName:this.options.BidStrategyName,maxCpc:this.options.BiddingScheme.MaxCpc?this.options.BiddingScheme.MaxCpc.Amount:null,targetCpa:this.options.BiddingScheme.TargetCpa,targetRoas:this.options.BiddingScheme.TargetRoas,costPerSale:this.options.BiddingScheme.TargetCostPerSale,campaignType:"shopping",isAfterSave:this.ko_model.isAfterSave(),activityLogger:this.options.activityLogger,i18nNewDesign:this.options.deps.i18nNewDesign,shouldSupportCashbackSettings:g.shouldSupportCashbackSettings(this.options)},o.Permissions.IsManualBiddingDeprecationEnabled?{campaignSubType:this.options.CampaignSubType}:{}));else if(i.contains(["audience"],I.default())&&(o.Permissions.IsManualCpmEnabled&&(this.biddingStrategyView=new K({entityType:"Campaign",biddingStrategyType:this.options.BiddingScheme.Type,bidStrategyName:this.options.BidStrategyName,campaignSubType:this.options.CampaignSubType,campaignType:I.default(),activityLogger:this.options.activityLogger,i18nNewDesign:this.options.deps.i18nNewDesign,shouldSupportCashbackSettings:g.shouldSupportCashbackSettings(this.options)})),this.isEnabledForVerifiedImpressionTracking)){var t="";i.isArray(this.options.CampaignSettings)&&this.options.CampaignSettings.length>0&&i.isArray(this.options.CampaignSettings[0].VerifiedTrackingSettings)&&this.options.CampaignSettings[0].VerifiedTrackingSettings.length>0&&i.isArray(this.options.CampaignSettings[0].VerifiedTrackingSettings[0].VerifiedTrackingData)&&this.options.CampaignSettings[0].VerifiedTrackingSettings[0].VerifiedTrackingData.length>0&&(t=this.options.CampaignSettings[0].VerifiedTrackingSettings[0].VerifiedTrackingData[0].Data.Values),this.ImpressionTrackingView=new ie({i18n:V,isEnabledForVerifiedImpressionTrackingAtCampaignLevel:this.isEnabledForVerifiedImpressionTracking,initialIASImpressionTrackingUrlValue:t,isImpressionTrackingUrlSectionVisible:!1});var r=this;this.ImpressionTrackingView.on("IASInputChange",function(e){null===e||i.isString(e)&&0===e.length?r.IASTrackingInfo="delete_value":r.IASTrackingInfo=e})}}else if("shopping-creation-workflow"===this.options.scenario)this.biddingStrategyView=new K(i.extend({entityType:"Campaign",isInitialize:!0,isCreation:!0,isAfterSave:this.ko_model.isAfterSave(),campaignType:"shopping",activityLogger:this.options.activityLogger,i18nNewDesign:this.options.deps.i18nNewDesign,shouldSupportCashbackSettings:g.shouldSupportCashbackSettings(this.options)},this.options.hideBidStrategy?{}:{biddingStrategyType:j.enhancedCPC}));else if("smart-shopping-campaign-creation-workflow"===this.options.scenario){var s=this.options.BiddingScheme||{};this.biddingStrategyView=new K({entityType:"Campaign",maxCpc:s.MaxCpc?s.MaxCpc.Amount:null,targetCpa:s.TargetCpa,targetRoas:s.TargetRoas,isInitialize:!0,isCreation:!0,campaignType:"shopping",campaignSubType:"ShoppingSmartAds",biddingStrategyType:j.maxConversionValue,activityLogger:this.options.activityLogger,shouldSupportCashbackSettings:g.shouldSupportCashbackSettings(this.options)})}this.isSignUpPage||"creation-workflow"===this.options.scenario||this.initBudgetView(this.options.Budget),this.initDSASettingsView(),this.initCashbackSettings(),this.isMultipleLanguageEnabledIncampaign()?this.initMultiLangaugeSelector():this.language=new W(i.pick(this.options,"i18nStrings","enableAdsGlobalizationPhase1")),n.computed(function(){this.isMultipleLanguageEnabledIncampaign||this.language.koModel.disabled(this.ko_model.isAfterSave()),this.dsaSettingsView&&this.dsaSettingsView.setValues({campaignId:this.ko_model.Id()})},this),this.isCreationScenario()&&!this.isSignUpPage&&"smart-shopping-campaign-creation-workflow"!==this.options.scenario&&(this.copySettings=new $({scenario:this.options.scenario,activityLogger:this.options.activityLogger}),this.copySettings.on("copy.campaign",this.copyFromCampaign.bind(this)),this.copySettings.on("copy.errors",function(e){n.observableArray.fn.push.apply(this.ko_model.errors,e)}.bind(this))),this.hasDisclaimer()&&(this.disclaimerRepository=new X({schema:G,skipExtensionCache:!0}),this.disclaimer=a.createRef(),this.disclaimerProps={ref:this.disclaimer,i18n:B,campaignId:0,DisclaimerAdsEnabled:!1,schema:G,repository:this.disclaimerRepository,resetSelectedDisclaimer:function(){delete this.disclaimerProps.selectedDisclaimer,this.renderDisclaimerUI()}.bind(this),usePanel:e&&e.usePanel})},inCampaignEditing:function(){return this.options.Id>0},isExperiment:function(){return i.result(o.CurrentCampaign,"ExperimentId")>0},isMultipleLanguageEnabledIncampaign:function(){return this.options.showLanguage&&!i.contains(["shopping"],I.default())},hasDisclaimer:function(){return o.Permissions.IsDisclaimerAdsEnabled&&("creation-workflow"===this.options.scenario&&"search"===this.options.campaignType||"campaign-settings"===this.options.scenario&&"search"===I.default())},getAssocaitedDisclaimer:function(e){return e?this.disclaimerRepository.association.findAll({where:{campaignId:e}}).then(function(e){return e&&e.length>0?e[0]:null}):t.resolve(null)},renderDisclaimerUI:function(){r.render(a.createElement(Y,this.disclaimerProps),this.$(".disclaimer__container")[0])},toggleDisclaimerUI:function(e){null!=this.disclaimerProps&&(this.disclaimerProps=i.extend({},this.disclaimerProps,{DisclaimerAdsEnabled:!e&&void 0,isDisclaimerCheckboxDisabled:e}),this.renderDisclaimerUI())},isDisclaimerAdsEnabled:function(){return i.isObject(this.options.context)&&i.result(this.options.context.get("Draft.Disclaimer"),"DisclaimerAdsEnabled",!1)||i.result(i.find(this.options.CampaignSettings,function(e){return"#Model.DisclaimerSetting"===e["@odata.type"]}),"DisclaimerAdsEnabled",!1)},initDisclaimerUI:function(){this.hasDisclaimer()?(this.disclaimerProps.campaignId=this.ko_model.Id()||0,this.disclaimerProps.DisclaimerAdsEnabled=this.isDisclaimerAdsEnabled(),this.ko_model.isMixedDSACampaignCreate()&&(this.disclaimerProps.onDisclaimerCheckboxChange=function(e){this.ko_model.enableMixedModeDSASettings(!e),this.ko_model.isMixedModeDSASettingsChecked()&&e&&this.ko_model.isMixedModeDSASettingsChecked(!1)}.bind(this),this.ko_model.isMixedModeDSASettingsChecked.subscribe(function(e){this.toggleDisclaimerUI(e)}.bind(this))),this.disclaimerProps.DisclaimerAdsEnabled?this.getAssocaitedDisclaimer(this.disclaimerProps.campaignId).then(function(e){e&&(this.disclaimerProps.selectedDisclaimer=e),this.renderDisclaimerUI()}.bind(this)):this.renderDisclaimerUI()):this.$(".disclaimer__container").empty()},setBidStrategyForPersonalizedOffersV2:function(e){g.setBidStrategyForPersonalizedOffers.bind(this)(e)},initCashbackSettings:function(){var e=this;if(this.shouldShowCashbackSettings){var t=i.result(this.options,"CampaignCashback")||{};this.cashbackSettingsView=new te({PersonalizedOffersEnabled:t.PersonalizedOffersEnabled,CashbackMonthlyBudget:t.MonthlyBudget,CashbackPercent:t.Percent,CashbackScope:t.Scope,CouponsEnabled:t.CouponsEnabled,isCashbackScopeReadonly:"shopping"!==this.options.campaignType,deps:{i18n:V,pageContext:o,decimal:R},showCoupon:"shopping"===this.options.campaignType&&this.options.isNotAudienceCampaign,isCreationScenario:this.isCreationScenario(),isReadOnly:g.shouldPersonalizedOffersReadOnly(this.ko_model.isAfterSave(),this.biddingStrategyView)}),g.setupCommonCashbackObserver(this),o.Permissions.IsCostPerSaleEnabled&&this.biddingStrategyView&&"shopping"===this.options.campaignType&&(this.ko_model.isAfterSave.subscribe(function(t){e.biddingStrategyView.viewModel.isAfterSave(t),e.cashbackSettingsView&&e.cashbackSettingsView.viewModel.isReadOnly(g.shouldPersonalizedOffersReadOnly(t,e.biddingStrategyView)),e.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked()&&t&&e.setBidStrategyForPersonalizedOffersV2(!0)}),this.budget&&(this.budget.viewModel.isCPSSelected(this.biddingStrategyView.viewModel.selectedBidStrategy()===j.costPerSale),this.budget.viewModel.sharedBudgetIsNotAllowedWarning(V.getString("CPS_NotAllowedSharedBudget")||"Shared budget is not allowed if CPS is selected"),this.biddingStrategyView.viewModel.selectedBidStrategy.subscribe(function(t){e.budget.viewModel.isCPSSelected(t===j.costPerSale),e.budget.viewModel.sharedBudgetIsNotAllowedWarning(V.getString("CPS_NotAllowedSharedBudget")||"Shared budget is not allowed if CPS is selected")})))}},validateMultipleLanguage:function(){var e=!0;return e=this.inCampaignEditing()&&i.isEmpty(this.options.Languages)||!i.isEmpty(this.language.getSelectedLanguages()),this.updateLanguageErrorMessage(e),e},updateLanguageErrorMessage:function(e){e?this.ko_model.languageError(""):this.ko_model.languageError(V.getString("Campaign_Validation_LanguageSelectionRequired"))},logActivity:function(e,t){t=t||this.options.scenario,this.options.activityLogger&&this.options.activityLogger.signal(e,t)},initMultiLangaugeSelector:function(){var e={languages:i.sortBy(i.without(F.properties.Language.enum,"None")),inEditMode:!0,selectedLanguages:[S.get()],i18n:V};o.Permissions.IsArabicLanguageEnabledInMultipleLanguage||(e.languages=i.without(e.languages,"Arabic")),o.Permissions.IsSimplifiedChineseLanguageEnabledInMultipleLanguage||(e.languages=i.without(e.languages,"SimplifiedChinese")),o.Permissions.IsAdsGlobalizationPhase1Enabled||(e.languages=i.without(e.languages,"Greek","Polish","Bulgarian","Croatian","Czech","Estonian","Hungarian","Latvian","Lithuanian","Maltese","Romanian","Slovak","Slovenian")),o.Permissions.IsAdsGlobalizationPhase2Enabled||(e.languages=i.without(e.languages,"Turkish","Serbian","Bosnian","Albanian","Macedonian","Icelandic","Japanese")),this.inCampaignEditing()&&(e.selectedLanguages=this.options.Languages||[]),e.activityLogger=this.options.activityLogger,e.scenario=this.options.scenario,this.language=new Z(e),this.language.on("selectedLanguages:changed",function(){this.validateMultipleLanguage()},this)},instantiateLocationTargetsView:function(){var e={scenario:this.options.scenario,campaignId:Number(this.options.Id),hideAudience:this.ko_model.isAudienceCampaignCreate(),popupIds:this.options.popupIds,campaign:this.options,showInitialUiBlocker:this.options.showInitialUiBlocker,activityLogger:this.options.activityLogger,deps:{eventDelegator:this.eventDelegator},isForVNext:this.options.isForVNext,supportCashbackSettings:g.shouldSupportCashbackSettings(this.options)};this.isMultipleLanguageEnabledIncampaign()?e.languageSelector=this.language:e.campaignLanguage=this.language.koModel.language(),this.locationTargetsView=new q(e)},willShow:function(){this.options&&this.options.perfMarker&&(this.showCampaignSettingMarker=this.options.perfMarker.createChild("Show_Campaign_Setting",{autoEnd:!0}),this.showCampaignSettingMarker.willInit()),window.scrollTo(0,0);var e=this.options.context.get("Campaign");i.isEmpty(e)||this.ko_model.Id(e.Id);var t=this.options.context.get("Draft.Budget");this.initBudgetView(i.isEmpty(t)?this.options.Budget:t),this.budget&&this.$(".budget").empty().append(this.budget.render().$el),i.isEmpty(t)||this.budget&&this.budget.update(t),this.initDisclaimerUI(),this.ko_model.hasChanges(!1),e&&e.DomainName&&this.dsaSettingsView&&(this.ko_model.enableMixedModeDSASettings(!1),this.ko_model.isMixedModeDSASettingsChecked(!0),this.dsaSettingsView.setValues({disabled:!0,DomainLanguage:i.result(e,"Language"),DomainName:i.result(e,"DomainName"),Source:i.result(e,"Source"),campaignId:e.Id,targetingSourceCampaignId:e.Id,dynamicDescriptionEnabled:i.result(e,"DynamicDescriptionEnabled",!1)}))},isNotAudienceCampaign:function(){return i.contains(["campaign-settings","shopping-creation-workflow"],this.options.scenario)&&"audience"!==I.default()},greyOutBudgetIfExperiment:function(){"campaign-settings"===this.options.scenario&&(i.result(o.CurrentCampaign,"ExperimentId")?(this.$(".budget input").attr("disabled",!0),this.experimentBudgetAlert=new Q({experimentId:o.CurrentCampaign.ExperimentId}),this.$(".budget-alert").html(this.experimentBudgetAlert.el)):o.Permissions.IsExperimentsEnabled&&"search"===I.default()&&m.Experiment.findAll({query:{$select:"Id",$filter:"(Status eq Enum.ExperimentStatus'Active' or Status eq Enum.ExperimentStatus'Scheduled')",$top:1,$count:!0}},{entitySet:H.currentCampaign.Experiments}).then(function(e){e.totalCount&&(this.experimentBudgetAlert=new Q({campaignId:o.CurrentCampaign.Id}),this.$(".budget-alert").html(this.experimentBudgetAlert.el))}.bind(this)))},initDSASettingsView:function(){if(this.ko_model.isMixedDSACampaignCreate()||this.ko_model.isMixedDSACampaignRecommendation){var e=i.first(this.options.CampaignSettings),t=!!e&&!!e.DomainName,n=D.get("DSACampaignDefaultWebsite")||"";this.dsaSettingsView=new ee({DomainLanguage:i.result(e,"Language","English"),DomainName:i.result(e,"DomainName",n),Source:i.result(e,"Source","SystemIndex"),campaignId:this.ko_model.Id(),logActivity:this.logActivity.bind(this),popupIds:this.popupIds,disabled:!this.ko_model.isMixedDSACampaignRecommendation&&t,isCampaignSettingsScenario:"campaign-settings"===this.options.scenario,dynamicDescriptionEnabled:!t||i.result(e,"DynamicDescriptionEnabled",!1),isMixedDSACampaignRecommendation:this.ko_model.isMixedDSACampaignRecommendation}),this.ko_model.enableMixedModeDSASettings(!t),this.ko_model.isMixedModeDSASettingsChecked(t)}},render:function(){return this.$el.html(c({i18n:V,isSignUpPage:this.isSignUpPage,showLanguage:this.options.showLanguage,IsCampaignMultipleLanguageEnabled:this.isMultipleLanguageEnabledIncampaign(),isExperiment:this.isExperiment(),popupIds:this.popupIds})),n.applyBindings(this.ko_model,this.el),this.budget&&this.$(".budget").empty().append(this.budget.render().$el),this.dsaSettingsView&&(this.ko_model.isMixedDSACampaignCreate()?this.$(".dsa-settings-container").empty().append(this.dsaSettingsView.render().$el):this.$(".dsa-container").empty().append(this.dsaSettingsView.render().$el)),this.cashbackSettingsView&&this.$(".cashback-settings-container").empty().append(this.cashbackSettingsView.render().$el),this.ImpressionTrackingView&&this.$(".audienceSettings__container").empty().append(this.ImpressionTrackingView.render().$el),this.greyOutBudgetIfExperiment(),this.$(".language-setting").empty().html(this.language.render().el),this.biddingStrategyView&&!this.options.hideBidStrategy&&this.$(".bidding-strategy__container").empty().html(this.biddingStrategyView.render().el),"smart-shopping-campaign-creation-workflow"!==this.options.scenario&&(this.locationTargetsPromise=m.Intermediate.refresh("CampaignCriterion",[]).then(function(){this.instantiateLocationTargetsView(),this.isNotAudienceCampaign()||this.$(".location-targets").empty().append(this.locationTargetsView.render().$el)}.bind(this))),this.copySettings&&this.$(".copy-campaign-settings").empty().append(this.copySettings.render().$el),this.$(".campaign-settings__container")[0].addEventListener("change",function(){this.ko_model.hasChanges(!0)}.bind(this),!1),m.Intermediate.subscribe("CampaignCriterion",function(){this.ko_model.hasChanges(!0)}.bind(this)),this.initDisclaimerUI(),this.trigger("didMount"),this},hasChanges:function(){return this.ko_model.hasChanges()},copyFromCampaign:function(e){if(i.isArray(e)){if(!i.isEmpty(e[0])){var t=e[0];if(("DailyStandard"===t.Budget.Type||"DailyAccelerated"===t.Budget.Type||t.Budget.Id>0)&&this.budget&&this.budget.update(t.Budget),this.BiddingScheme=t.BiddingScheme,this.trigger("copy.campaign",t),this.ko_model.isMixedDSACampaignCreate()){var n=i.result(t.CampaignSettings[0],"DomainName",null),a=i.result(t.CampaignSettings[0],"Language",null),r=i.result(t.CampaignSettings[0],"Source",null),o=i.result(t.CampaignSettings[0],"DynamicDescriptionEnabled",!1);this.dsaSettingsView&&this.ko_model.isMixedDSACampaignCreate()&&this.ko_model.enableMixedModeDSASettings()&&(n?(this.ko_model.isMixedModeDSASettingsChecked(!0),this.dsaSettingsView.setValues({DomainName:n,DomainLanguage:a,Source:r,dynamicDescriptionEnabled:o,targetingSourceCampaignId:t.Id})):this.ko_model.isMixedModeDSASettingsChecked(!1))}if(this.isMultipleLanguageEnabledIncampaign()&&!i.isEmpty(t.Languages)&&this.language.koModel.selectedLanguages(t.Languages),this.hasDisclaimer()&&(this.disclaimerProps.DisclaimerAdsEnabled=i.result(i.find(t.CampaignSettings,function(e){return"#Model.DisclaimerSetting"===e["@odata.type"]}),"DisclaimerAdsEnabled",!1)),this.cashbackSettingsView){var s=i.chain(t).result("CampaignCashback").result("Percent").value(),l=i.chain(t).result("CampaignCashback").result("Scope").value(),c=i.chain(t).result("CampaignCashback").result("MonthlyBudget").value(),d=i.chain(t).result("CampaignCashback").result("PersonalizedOffersEnabled").value(),u=i.chain(t).result("CampaignCashback").result("CouponsEnabled").value();this.cashbackSettingsView.setValues({PersonalizedOffersEnabled:d,CashbackPercent:s,CashbackScope:l,CashbackMonthlyBudget:c,CouponsEnabled:u})}}if(!i.isEmpty(e[1])&&i.isArray(e[1])){var p=e[1];p=i.map(p,function(e){return i.omit(e,"Id","Campaign")}),this.locationTargetsView.setLocationData(p,"campaign",!0,!0)}this.hasDisclaimer()&&!i.isEmpty(e[2])&&i.isArray(e[2])&&e[2].length>0&&(this.disclaimerProps.selectedDisclaimer=e[2][0]),this.hasDisclaimer()&&this.renderDisclaimerUI()}},isCreationScenario:function(){return"creation-workflow"===this.options.scenario||"shopping-creation-workflow"===this.options.scenario},validateViewModel:function(){var e=this.ko_model.validate();return e||i.each(this.ko_model.campaignProps,function(e){this.ko_model[e].isValid()||this.logActivity("campaign field invalid: "+e)},this),e},isDSASettingsAvailable:function(){return this.dsaSettingsView&&(this.ko_model.isMixedDSACampaignRecommendation||this.ko_model.isMixedDSACampaignCreate()&&this.ko_model.isMixedModeDSASettingsChecked())},validate:function(){return i.reduce([this.validateViewModel(),!this.isDSASettingsAvailable()||this.dsaSettingsView.validate(),!this.budget||this.budget.validate(),!this.locationTargetsView||this.locationTargetsView.validate(),!this.biddingStrategyView||this.biddingStrategyView.validate(),!this.isMultipleLanguageEnabledIncampaign()||this.validateMultipleLanguage(),!this.disclaimer||this.disclaimer.current.validate(),!this.cashbackSettingsView||this.cashbackSettingsView.validate(),this.validateVerifiedImpressionTracking()],function(e,t){return e&&t},!0)},shouldCancel:function(){return this.save()},shouldNext:function(){return this.save()},getPropertyValidationErrors:function(){var e=this.ko_model,t=e.campaignProps,n={};return t.forEach(function(t){var i=e[t]&&e[t].errors?e[t].errors():[];n[t]=i}),this.budget&&!this.budget.validate()&&(n=i.defaults({},n,{budget:["Budget invalid"]})),this.biddingStrategyView&&!this.biddingStrategyView.validate()&&(n=i.defaults({},n,this.biddingStrategyView.getErrorMessages())),n},getAllLocations:function(){if(!this.locationTargetsView)return null;var e=this.ko_model.toObject(),t=this.locationTargetsView.getValues({},{keepAllLocations:!0,populateParentField:!0,removeNegativeId:!0,campaignId:this.ko_model.Id()||e.Id,campaignName:e.Name});return t.locations.concat(t.intent||[])},getData:function(){if(this.ImpressionTrackingView&&this.ImpressionTrackingView.IASInputChange(),!this.validate())return!1;this.ko_model.errors.clear(h.isCampaignApiError);var e=this.ko_model.toObject(),t=this.isDSASettingsAvailable()?this.dsaSettingsView.getValues():{};if(e=i.extend(e,t),this.budget&&(e.Budget=this.budget.getValues(e)),this.ko_model.Id()&&(e.Id=this.ko_model.Id()),"campaign-settings"===this.options.scenario||"smart-shopping-campaign-creation-workflow"===this.options.scenario?(e=i.omit(e,"TimeZone","Language"),this.biddingStrategyView&&(e.BiddingScheme=this.biddingStrategyView.getValues())):"creation-workflow"===this.options.scenario&&(e.AdScheduleUseSearcherTimeZone=!1),this.isMultipleLanguageEnabledIncampaign()&&(e.Languages=this.language.getSelectedLanguages()),this.targetingSource&&(e.Source=this.ko_model.TargetingSourceSetting().Source),this.locationTargetsView){var n=this.locationTargetsView.getValues({},{populateParentField:!0,removeNegativeId:!0,campaignId:e.Id,campaignName:e.Name});e.CampaignCriterions="audience"!==I.default()?n.deletedLocations.concat(n.locations).concat(n.intent):n.deletedLocations.concat(n.locations),e.CampaignCriterions=i.map(e.CampaignCriterions,function(e){return i.pick(e,i.keys(U.properties))})}if(this.disclaimer){var a=this.disclaimer.current.getValues(e.Name);i.defaults(e,a),a.AdExtensionAssociations&&a.AdExtensionAssociations.length>0&&this.ko_model.hasChanges(!0)}return this.cashbackSettingsView&&(e=i.extend(e,this.cashbackSettingsView.getValues()),(o.Permissions.IsPersonalizedOffersV2Enabled||o.Permissions.IsPersonalizedOffersV3Enabled)&&!this.biddingStrategyView&&this.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked()&&(e.BiddingScheme={Type:g.getBidStrategyByCampaignTypeWhenPersonalizedOffersEnabled({campaignType:this.options.campaignType,i18n:V}).targetBidStrategy})),this.ImpressionTrackingView&&(e=i.extend(e,{VerifiedTrackingData:this.IASTrackingInfo})),e},getLocationRecommendationsStatus:function(){return this.locationTargetsView?this.locationTargetsView.getLocationRecommendationsStatus():{}},handleCampaignResponse:function(e,n,a){this.ko_model.Id(e.Id),this.setContext(e.Id,a);var r={};for(var o in i.each(e.CampaignCriterions,function(e){if("LocationIntentCriterion"!==e.CriterionType&&e.Id>0){var t=("Active"===e.Status?"create":"delete")+e.SelectionStatus+e.CriterionType+"Targets",n=r[t];r[t]=(i.isUndefined(n)?0:n)+1}}),r){var s=r[o];s>0&&k.logMessage([A.LOGCATEGORY.TRACE],A.LOGLEVEL.INFO,o,s)}this.copySettings&&this.copySettings.hide(),n||this.locationTargetsView.clearAllErrors(),this.locationTargetsView.setCampaignId(e.Id);var l=this.locationTargetsView.refreshLocationData().then(function(){return this.locationTargetsView.clearDeletedLocationsList(),!0}.bind(this)),c=this.saveTargetingSource(e.Id);return t.all([l,c]).then(function(){return this.saveCampaignMarker&&this.saveCampaignMarker.done(),i.constant(!0)}.bind(this))},errorElements:function(){return this.$(".campaign-settings__container .error, .campaign-settings__container .alert-danger").filter(":visible")},saveTargetingSource:function(e){return(e&&this.dsaSettingsView&&this.dsaSettingsView.targetingSource?this.dsaSettingsView.targetingSource.save(e):t.resolve()).then(function(t){return i.result(o.CurrentCampaign,"Id")===e&&i.size(o.CurrentCampaign.CampaignSettings)>0&&this.targetingSource&&(o.CurrentCampaign.CampaignSettings[0].Source=this.targetingSource.koModel.source()),t}.bind(this))},validateVerifiedImpressionTracking:function(){return!this.isEnabledForVerifiedImpressionTracking||("error"!==this.IASTrackingInfo||(this.ImpressionTrackingView.setErrors([V.getString("IASImpressionTracking_Invalid")],"VerifiedImpressionTracking_IAS"),!1))},save:function(){var e=this.getData();return e?(this.options&&this.options.perfMarker&&(this.saveCampaignMarker=this.options.perfMarker.createChild("Save_Campaign"),this.saveCampaignMarker.willInit()),m.Campaign.create(e,{adapter:"bulk",cacheResponse:!1}).then(function(t){if(i.isFinite(t.Id)){var n=this.isCreationScenario()&&!this.ko_model.isAfterSave(),a=n?"createCampaign":"updateCampaign";return k.logMessage([A.LOGCATEGORY.TRACE],A.LOGLEVEL.INFO,n?"createCampaign":"updateCampaign","1"),this.logActivity(a),g.logCampaignPersonalizedOffers(this.shouldShowCashbackSettings,this.logActivity.bind(this),t,"".concat(a,".")),s.getContext("/campaign/NewCampaign/Create?"),this.eventDelegator&&this.eventDelegator.trigger("campaignReload"),this.handleCampaignResponse(t,!1,e)}return this.handleApiErrors(),v.scrollAndCenter(this.errorElements()),!1}.bind(this)).catch(function(e){if(e&&e.entity){var t={},n=e&&!i.isUndefined(e.errors),a=!1,r=e&&e.entity&&!i.isUndefined(e.entity.Id);n&&(a=(t=this.separateErrors(e.errors)).location.length>0),r&&this.handleCampaignResponse(e.entity,a),n?t.campaign.length?this.getAndHandleApiErrors(t.campaign):this.locationTargetsView.handleApiErrors(t.location):this.handleApiErrors()}else this.ko_model.errors.add(e?h.getODataErrors(e.errors):void 0);return this.scrollToErrors(),!1}.bind(this)).finally(b())):(v.scrollAndCenter(this.errorElements()),!1)},setContext:function(e,t){var n=this.ko_model.getValues(),a=this.isDSASettingsAvailable()?this.dsaSettingsView.getValues(!0):{};if(i.extend(n,{Id:e},a),i.isUndefined(n.Language)&&(this.isMultipleLanguageEnabledIncampaign()||i.extend(n,{Language:this.language.koModel.language()})),this.isMultipleLanguageEnabledIncampaign()&&i.extend(n,{Languages:this.language.getSelectedLanguages()}),this.budget&&(n.Budget=this.budget.getValues(n)),this.BiddingScheme&&(n.BiddingScheme=this.BiddingScheme),i.isObject(this.options.context)){var r={Campaign:n,CampaignParams:t};this.budget&&(r["Draft.Budget"]=i.extend({},n.Budget)),this.disclaimer?r["Draft.Disclaimer"]=i.pick(this.disclaimer.current.getValues(n.Name),"DisclaimerAdsEnabled"):delete r["Draft.Disclaimer"],this.options.context.set(r)}if(this.cashbackSettingsView){var o=this.cashbackSettingsView.getValues();n.CampaignCashback={Percent:-1===o.CashbackPercent?null:o.CashbackPercent,MonthlyBudget:o.CashbackMonthlyBudget,Scope:o.CashbackScope,PersonalizedOffersEnabled:o.PersonalizedOffersEnabled,CouponsEnabled:o.CouponsEnabled}}},separateErrors:function(e){var t=i.partition(e,function(e){return"Campaign Error"===e.Type});return{campaign:t[0],location:t[1]}},handleApiErrors:function(e){if(this.dsaSettingsView){var t=i.filter(e,function(e){return"DomainName"===e.property});e=i.filter(e,function(e){return"DomainName"!==e.property}),this.dsaSettingsView.handleApiErrors(t)}this.ko_model.errors.add(e),this.ko_model.isAfterSave()&&this.locationTargetsView&&(this.locationTargetsView.setCampaignId(this.ko_model.Id()),this.locationTargetsView.handleApiErrorsForCampaignLevel().then(function(){this.locationTargetsView.clearDeletedLocationsList()}.bind(this)))},getBulkApiErrors:function(e){return h.getBulkApiErrors(e)},getAndHandleApiErrors:function(e){this.handleApiErrors(this.getBulkApiErrors(e)),i.chain(e).map(function(e){return e.Error}).uniq().each(function(e){this.logActivity(e,"campaign creation api errors")},this)},scrollToErrors:function(){v.scrollAndCenter(this.errorElements())},clearApiErrors:function(){this.ko_model.errors.clear(h.isCampaignApiError)},remove:function(){this.locationTargetsView&&this.locationTargetsView.remove(),this.targetingSource&&this.targetingSource.remove(),this.experimentBudgetAlert&&this.experimentBudgetAlert.remove(),this.disclaimer&&(this.disclaimer=null),e.View.prototype.remove.apply(this,arguments)},disableLanguage:function(){this.isMultipleLanguageEnabledIncampaign()||this.language.koModel.disabled(!0)},events:{"change input.name":"campaignNameChange"},campaignNameChange:function(){this.logActivity("crud campaign campaign name change.")},initBudgetView:function(e){var t=J.newFactory(d);this.budget=t({model:e,accountCurrencyCode:o.AccountCurrencyCode,showInitialUiBlocker:this.options.showInitialUiBlocker,perfMarker:this.showCampaignSettingMarker,noApplyBudgetFromSharedLibrary:"smart-shopping-campaign-creation-workflow"===this.options.scenario,activityLogger:this.options.activityLogger})},updateBidStrategy:function(e){if(this.biddingStrategyView){if(!e&&this.cashbackSettingsView&&this.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked())return void this.setBidStrategyForPersonalizedOffersV2({enabled:!0});this.biddingStrategyView.updateBidStrategy(e)}}})}.apply(t,n))||(e.exports=a)},ExPG:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="success-dialog"><div class="success-dialog__header"><h2>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_AddPaymentMethod_Title"))?"":t)+'</h2></div><div class="success-dialog__content"><h4>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_AddPaymentMethod_DescriptionLine1"))?"":t)+"</h4><h4>"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_AddPaymentMethod_DescriptionLine2"))?"":t)+'</h4><div class="dialog-diagram"><div class="dialog-diagram__bar"><span class="campaign-creation-status-icon-active"></span><div class="horizontal-line-1of3rd horizontal-line-success"></div><span class="campaign-creation-status-icon-warning"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span></div><div class="dialog-diagram__row"><span class="dialog-diagram__row__cell campaign-creation-status-text-active">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_CreateCampaign"))?"":t)+'</span><span class="dialog-diagram__row__cell campaign-creation-status-text-warning">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_AddPaymentMethod"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_InReview"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_Approved"))?"":t)+'</span></div></div><div class="dialog-form"><div class="dialog-form__row"><div class="dialog-form__row__cell"></div><div class="dialog-form__row__cell"><a class="btn btn-default button-add-payment-method"'+n.attr("href",e,!0,!0)+">"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Button_AddPaymentMethod"))?"":t)+'</a></div><div class="dialog-form__row__cell"></div></div></div></div><div class="success-dialog__footer"></div></div>'}.call(this,"hrefAddPaymentMethod"in a?a.hrefAddPaymentMethod:"undefined"!==typeof hrefAddPaymentMethod?hrefAddPaymentMethod:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},F1I4:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="bid-multipliers-panel"><div class="form-group"><ul class="btn-group col-sm-12"><li'+n.attr("class",n.classes(["deviceType"===e.selectedMultiplierType?"ui-tabs-selected":""],[!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_DeviceType_Multipliers_Label"),!0,!0))+' data-type="deviceType" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_DeviceType_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["dateType"===e.selectedMultiplierType?"ui-tabs-selected":"",e.isPayPerStay?"hide":""],[!0,!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_DateType_Multipliers_Label"),!0,!0))+' data-type="dateType" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_DateType_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["siteType"===e.selectedMultiplierType?"ui-tabs-selected":"",e.isPayPerStay?"hide":""],[!0,!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_SiteType_Multipliers_Label"),!0,!0))+' data-type="siteType" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_SiteType_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["userCountry"===e.selectedMultiplierType?"ui-tabs-selected":""],[!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_UserCountry_Multipliers_Label"),!0,!0))+' data-type="userCountry" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_UserCountry_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["lengthOfStay"===e.selectedMultiplierType?"ui-tabs-selected":"",e.isPayPerStay?"hide":""],[!0,!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_LengthOfStay_Multipliers_Label"),!0,!0))+' data-type="lengthOfStay" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_LengthOfStay_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["checkInDay"===e.selectedMultiplierType?"ui-tabs-selected":"",e.isPayPerStay?"hide":""],[!0,!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_CheckinDay_Multipliers_Label"),!0,!0))+' data-type="checkInDay" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_CheckinDay_Multipliers_Label"))?"":t)+"</span></li><li"+n.attr("class",n.classes(["advancedBooking"===e.selectedMultiplierType?" ui-tabs-selected":"",e.isPayPerStay?"hide":""],[!0,!0]),!1,!0)+"><span"+(n.attr("class",n.classes(["btn","btn-default","clickable",e.isUseParent?"disabled":""],[!1,!1,!1,!0]),!1,!0)+n.attr("title",a.i18n.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_Label"),!0,!0))+' data-type="advancedBooking" tabindex="0">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_Label_Short"))?"":t)+'</span></li></ul></div><div class="form-group bid-multipliers-content"><div class="col-sm-12"><div'+n.attr("class",n.classes(["device-type-multipliers-containter","deviceType"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="device-type-multipliers"></div></div><div'+n.attr("class",n.classes(["device-type-multipliers-containter","dateType"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="date-type-multipliers"></div></div><div'+n.attr("class",n.classes(["device-type-multipliers-containter","siteType"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="site-type-multipliers"></div></div><div'+n.attr("class",n.classes(["user-country-multipliers-containter","userCountry"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="user-country-multipliers"></div></div><div'+n.attr("class",n.classes(["length-of-stay-multipliers-containter","lengthOfStay"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="length-of-stay-multipliers"></div></div><div'+n.attr("class",n.classes(["check-in-day-multipliers-containter","checkInDay"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="check-in-day-multipliers"></div></div><div'+n.attr("class",n.classes(["advanced-booking-multipliers-containter","advancedBooking"===e.selectedMultiplierType?"show":"hide"],[!1,!0]),!1,!0)+'><div data-ref="advanced-booking-multipliers"></div></div></div></div>',a.showUseParent&&(i=i+'<div class="bid-multipliers-use-parent"><label><input'+n.attrs(n.merge([{type:"checkbox",checked:n.escape(!0===e.isUseParent)},e.isPayPerStay&&!e.isPayPerStayPhase2Pilot?{disabled:"disabled"}:{}]),!0)+">"+n.escape(null==(t=a.i18n.getString("HotelCenter_Overview_Multipliers_UseParent_Label"))?"":t)+"</label></div>"),i=i+"<div"+n.attr("class",n.classes(["bid-multipliers-errors","font-error",e.errors.length?"show":"hide"],[!1,!1,!0]),!1,!0)+' role="alert">',function(){var a=e.errors;if("number"==typeof a.length)for(var r=0,o=a.length;r<o;r++){var s=a[r];i=i+'<div class="bid-multipliers-error">'+n.escape(null==(t=s)?"":t)+"</div>"}else for(var r in o=0,a)o++,s=a[r],i=i+'<div class="bid-multipliers-error">'+n.escape(null==(t=s)?"":t)+"</div>"}.call(this),i+="</div></div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},F1Wi:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="btn-toolbar" data-bind="visible: !hideToolbar()"><div class="btn-group chartToggle" data-bind="visible: !hideToggleIcon()"><button class="btn btn-square" id="bi-chartToggle" type="button" title="Show graph" data-bind="click: onShowChartButtonClick"><div class="chart-icon"></div></button></div></div><div class="chart-container" data-bind="visible: showChart()" chart-iteration="0"><table class="cbTable" id="chartTable" data-bind="visible: !isChartLoading()"><tbody><tr><td class="chartDropdowns" id="chartDropdowns" colspan="2"><div class="chart_ctc_title chart_biz"><span id="chartTitle" data-bind="text: chartTitle"></span></div><a class="helpbutton chart_viz" id="chart-helpicon" data-bind="attr: { \'aria-label\': learnMoreLabel}" type="helppopup" topic="Page_Campaigns_AccountPerformance" onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);" aria-labelledby="chart-helpicon chartTitle"></a><div class="inline-block metricVsSpan" data-bind="visible: (isPopOn() || isMovingAverageOn()) &amp;&amp; isComparisonDataMissing()"><span data-bind="comparisonDataMissingText()"></span></div><div class="dropdown-inline inline-block"><div id="bi_ctc_dropdowns"><span class="metricColorLine primary-line"></span><span class="metricColorLine primary-comparison-line" data-bind="visible: isPopOn()"></span><div class="dropdown-container" id="main-primary-dropdown"></div><span class="metricVsSpan">vs</span><span class="metricColorLine secondary-line"></span><span class="metricColorLine secondary-comparison-line" data-bind="visible: isPopOn()"></span><div class="dropdown-container" id="main-secondary-dropdown"></div><div class="dropdown-container" id="granularity-dropdown-container" data-bind="visible: isGranularityShowing()"><div class="dropdown-container" id="granularity-dropdown"></div></div></div><div class="inline-block" id="bi-moving-average" data-bind="visible: isMovingAverageVisible()"><input class="ma-checkbox" type="checkbox" data-bind="checked: isMovingAverageOn(), click: onMovingAverageClick, attr: {\'aria-label\': showMovingAverageText, \'aria-checked\': isMovingAverageOn() ? \'true\' : \'false\'}"><span id="ShowMovingAverageLabel" data-bind="text: showMovingAverageText"></span><a class="helpbutton" id="chart-helpicon-PMA" type="helppopup" topic="pop_BA_PerformanceMovingAverage" onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);" aria-labelledby="chart-helpicon-PMA ShowMovingAverageLabel" data-bind="attr: { \'aria-label\': learnMoreLabel}"></a></div></div></td></tr><tr id="chartMainArea"><td class="chartTableColumn1" data-bind="visible: isDataAvailable()"><div id="highcharts-container" style="height: 105px;"></div><div id="charts-label"><div class="row"><div class="col-md-4"><span class="xAxisLabelLeft primary-date" data-bind="text: xAxisStartValue()"></span></div><div class="col-md-4 col-md-offset-4"><span class="xAxisLabelRight primary-date" data-bind="text: xAxisEndValue()"></span></div></div><div class="row" data-bind="if: isPopOn()"><div class="col-md-4"><span class="xAxisLabelLeft compared-date" data-bind="text: comparedXAxisStartValue()"></span></div><div class="col-md-4 col-md-offset-4"><span class="xAxisLabelRight compared-date" data-bind="text: comparedXAxisEndValue()"></span></div></div></div></td></tr></tbody></table><div class="spinner" data-bind="visible: isChartLoading()"><div class="spinner-icon"></div></div><div class="chart-no-data-container" data-bind="visible: !isChartLoading() &amp;&amp; !isDataAvailable()"><div class="chart-no-data-label"><span data-bind="html: noDataText()"></span></div></div></div>'}},FBIO:function(e,t,i){var n,a;n=[i("UT4o"),i("7XbR"),i("6mWt"),i("RibF"),i("5C8L"),i("i/gc"),i("YK3D"),i("+PqR")],void 0===(a=function(e,t,i,n,a,r,o,s){"use strict";var l=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),c=i.default||i,d=function(t,i){return!(1!=t&&-1!=t||!e.isFinite(i))&&t*i},u=function(t){return{Id:t.Id,Day:t.Day(),StartHour:t.StartHour(),StartMinute:t.StartMinute(),EndHour:t.EndHour(),EndMinute:t.EndMinute(),BidAdjustmentType:e.isUndefined(t.BidAdjustmentType())?1:t.BidAdjustmentType(),BidAdjustmentAmount:e.isUndefined(t.BidAdjustmentAmount())?0:t.BidAdjustmentAmount(),CashbackPercent:e.isUndefined(t.CashbackPercent())?null:t.CashbackPercent()}},p=e.once(function(){this.activityLogger&&this.activityLogger.signal("campaign day time range changed","ad schedule")},this),g=function(i,n){var a=e.extend({},{Id:"",Day:"Sunday",StartHour:0,StartMinute:"ZERO",EndHour:24,EndMinute:"ZERO",BidAdjustmentType:1,BidAdjustmentAmount:0,CashbackPercent:null},i),o=r.getCashbackInheritOptions({readonly:n,CashbackPercent:a.CashbackPercent,viewContext:{currentAdGroup:this.currentAdGroup,currentCampaign:this.currentCampaign},i18n:l}),c=t.observable({Id:"",Day:t.observable(a.Day),StartHour:t.observable(a.StartHour),StartMinute:t.observable(a.StartMinute),EndHour:t.observable(a.EndHour),EndMinute:t.observable(a.EndMinute),BidAdjustmentType:t.observable(a.BidAdjustmentType),BidAdjustmentAmount:t.observable(a.BidAdjustmentAmount),CashbackPercent:t.observable(a.CashbackPercent),InheritCashbackPercentValue:t.observable("-"===o.inheritValue?"-":s.fromFloatToString(o.inheritValue,2)),CashbackPercentOptions:t.observable(o.options),CashbackPercentSelectedOption:t.observable(o.selected),CashbackPercentSnapShot:t.observable(a.CashbackPercent)});c().CashbackPercentSelectedOption.subscribe(function(e){"override"===e&&c().CashbackPercentSnapShot(c().CashbackPercent())},c(),"beforeChange"),c().CashbackPercentSelectedOption.subscribe(function(e){"inherit"===e?c().CashbackPercent(null):"override"===e?c().CashbackPercent(c().CashbackPercentSnapShot()):"noCashback"===e&&c().CashbackPercent("0.00")},c()),c().scheduleInRowError=t.computed(this.conditionScheduleError,c()),c().isDayTimeEditable=t.computed(this.conditionDayTimeEditable,c());var d=this;return c().Day.subscribe(function(){p.call(d)}),c().StartHour.subscribe(function(){p.call(d)}),c().StartMinute.subscribe(function(){p.call(d)}),c().EndHour.subscribe(function(){p.call(d)}),c().EndMinute.subscribe(function(){p.call(d)}),c().BidAdjustmentType.subscribe(function(){p.call(d)}),c().BidAdjustmentAmount.subscribe(function(){p.call(d)}),c},h=function(t,i,n){var a=[],r=["Monday","Tuesday","Wednesday","Thursday","Friday"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.each(t,function(t){(function(e,t){var i=e();return"AllDays"===i.Day()&&0==i.StartHour()&&"ZERO"===i.StartMinute()&&24==i.EndHour()&&"ZERO"===i.EndMinute()&&0==i.BidAdjustmentAmount()&&(!t||""===i.CashbackPercent()||null===i.CashbackPercent()||void 0===i.CashbackPercent())})(t,n)&&i||("AllDays"===t().Day()?e.each(o,function(i){a.push(e.extend(u(t()),{Day:i}))}):"MondayToFriday"===t().Day()?e.each(r,function(i){a.push(e.extend(u(t()),{Day:i}))}):a.push(u(t())))}),a},m=function(i,u,p,m,f,v,b,y){this.model=i,this.isForVNext=t.observable(m),this.activityLogger=f,this.currentAdGroup=y||o.CurrentAdGroup,this.currentCampaign=b||o.CurrentCampaign,this.supportCashbackSettings=t.observable(!!v),a.properties(this),this.timeDisplayType=t.observable("12-hour"),c.initialize().then(function(){var t=c.findByName("WebApp.CampaignUI.isTwelveHourDisplay"),i=t&&t.Data;this.timeDisplayType(e.isUndefined(i)||i?"12-hour":"24-hour")}.bind(this)),this.timeDisplayTypeEdit=t.computed({read:function(){return this.timeDisplayType()},write:function(e){this.timeDisplayType(e),c.setAtUserLevel({Name:"WebApp.CampaignUI.isTwelveHourDisplay",Data:"12-hour"===e})}},this);var S=n.dayOptions,w=n.hourOptions;e.each(w,function(e){e.twentyFourHourDisplay=e.val<10?"0"+e.val:e.val.toString(),e.optionsText=t.computed(function(){return"12-hour"===this.timeDisplayType()?e.twelveHourDisplay:e.twentyFourHourDisplay},this)},this);var C=n.minuteOptions,x=n.bidAdjustmentOptions,k=n.bidAdjustmentRange,A=n.minuteToSaveMap,T=function(e,t){return 60*e+A[t]},_=function(e,t){if(e.Day!==t.Day)return!1;var i=T(e.StartHour,e.StartMinute),n=T(e.EndHour,e.EndMinute),a=T(t.StartHour,t.StartMinute);return!(i>=T(t.EndHour,t.EndMinute)||n<=a)},E=this;this.conditionScheduleError=function(){if(24===this.EndHour()&&"ZERO"!==this.EndMinute())return n.errors.endTimeBeyondEOD;if(t=this.StartHour(),i=this.StartMinute(),a=this.EndHour(),o=this.EndMinute(),!(t<a||t===a&&A[i]<A[o]))return n.errors.startTimeEarlierThanEndTime;var t,i,a,o,c=this.BidAdjustmentAmount(),u=d(this.BidAdjustmentType(),c);if(u&&(u>k.maxBid||u<k.minBid))return n.errors.bidExceedLimitation;if(0===e.size(c.toString()))return n.errors.bidEmpty;if(!e.isFinite(c)||parseInt(c)!==Number(c))return n.errors.bidIncorrectFormat;var p=this.CashbackPercent();return E.supportCashbackSettings()&&!r.isCashbackPercentValid(p,s)?{message:r.getCashbackPercentValidationError(p,l,s),type:"ERROR_CASHBACK_PERCENT"}:""},this.conditionDayTimeEditable=function(){return!e.isFinite(this.Id)},this.level=t.observable("adgroup"===u?u:"campaign"),this.useCampaignSettingsChecked=t.observable(!0),this.useCampaignSettings=t.computed(function(){return"adgroup"===this.level()&&this.useCampaignSettingsChecked()},this),this.showAdGroupOverrideInformation=t.observable(!1),this.dayOptions=t.observableArray(S),this.fromHourOptions=t.observableArray(w.slice(0,24)),this.toHourOptions=t.observableArray(w),this.minuteOptions=t.observableArray(C),this.bidAdjustmentOptions=t.observableArray(x),this.dayTimeRanges=t.observableArray([]),this.campaignDayTimeRanges=t.observableArray([]),e.isEmpty(p)?this.campaignDayTimeRanges([g.call(this,{Day:"AllDays"},!0)]):this.campaignDayTimeRanges(e.map(p,function(e){return g.call(this,e,!0)}.bind(this))),this.update(this.model),this.schedulingRowsErrorMessage=t.computed(function(){for(var e=h(this.dayTimeRanges(),!1,this.supportCashbackSettings()),t={Sunday:0,Monday:0,Tuesday:0,Wednesday:0,Thursday:0,Friday:0,Saturday:0},i=0,n=e.length;i<n;i++){var a=e[i];if(++t[a.Day]>7)return l.get("ImprovedAdScheduling_CannotHaveMoreThanSevenPerDay");for(var r=i+1;r<n;r++){var o=e[r];if(_(a,o))return l.get("ImprovedAdScheduling_Overlapping_Schedule")}}return""},this).extend({notify:"always"}),this.onRemovingSchedulingRow=function(e){this.dayTimeRanges.splice(e,1)},this.addTimeRow=function(){this.dayTimeRanges.push(g.apply(this))},this.timeZoneText=this.model.timeZoneText,this.adScheduleUseSearcherTimeZone=t.observable(this.useCampaignSettings()?!!this.model.campaignAdScheduleUseSearcherTimeZone:this.model.adScheduleUseSearcherTimeZone),this.adScheduleUseSearcherTimeZoneEdit=t.computed({read:function(){return this.adScheduleUseSearcherTimeZone().toString()},write:function(e){this.adScheduleUseSearcherTimeZone("true"===e)}},this),this.disableAdScheduleTimeZoneEdit=t.computed(function(){return this.useCampaignSettings()},this)};return m.prototype.validate=function(){var t=!0;return this.dayTimeRanges().forEach(function(i){e.isEmpty(i().scheduleInRowError())||(t=!1)}),!(t=t&&e.isEmpty(this.schedulingRowsErrorMessage()))&&this.activityLogger&&this.activityLogger.signal("schedule is not valid","ad schedule"),t},m.prototype.getCriterions=function(){var t=n.minuteToSaveMap,i=h(this.dayTimeRanges(),"campaign"===this.level(),this.supportCashbackSettings()),a=this;return e.map(this.useCampaignSettings()?[]:i,function(e){return{CashbackPercent:a.supportCashbackSettings()?r.getRealCashbackPercentValue(e.CashbackPercent,s):void 0,BidAdjustment:d(e.BidAdjustmentType,e.BidAdjustmentAmount),DayTimeCriterion:{Id:e.Id,Day:e.Day,FromHour:e.StartHour,FromMinute:t[e.StartMinute],ToHour:e.EndHour,ToMinute:t[e.EndMinute]},Type:"DayTime"}})},m.prototype.getDeletedItems=function(){var t=n.minuteToSaveMap,i=[],a=[];e.each(this.dayTimeRanges(),function(t){var n=t().Id;e.isFinite(n)&&i.push(n)}),e.each(this.model.dayTimeRanges,function(t){e.isFinite(t.Id)&&-1==e.indexOf(i,t.Id)&&a.push(t)});var o=this;return e.map(a,function(e){return{BidAdjustment:d(e.BidAdjustmentType,e.BidAdjustmentAmount),CashbackPercent:o.supportCashbackSettings()?r.getRealCashbackPercentValue(e.CashbackPercent,s):void 0,DayTimeCriterion:{Id:e.Id,Day:e.Day,FromHour:e.StartHour,FromMinute:t[e.StartMinute],ToHour:e.EndHour,ToMinute:t[e.EndMinute]},Type:"DayTime"}})},m.prototype.update=function(t){this.model=e.extend(this.model,t),e.isEmpty(this.model.dayTimeRanges)?this.dayTimeRanges([g.call(this,{Day:"AllDays"})]):(this.useCampaignSettingsChecked(!1),this.dayTimeRanges(e.map(t.dayTimeRanges,function(e){return g.call(this,e)}.bind(this))))},m.prototype.getConvertedDayTimeRanges=function(e){return h(this.dayTimeRanges(),e,this.supportCashbackSettings())},m.prototype.resetCashbackInheritStatus=function(t){var i=this.dayTimeRanges(),n=this.campaignDayTimeRanges(),a=this;if(null!=t){var o=t.value,c=t.level;"AdGroup"===c?a.currentAdGroup=e.extend({},a.currentAdGroup,{AdGroupCashback:e.extend({},a.currentAdGroup?a.currentAdGroup.AdGroupCashback:{},{Percent:o})}):"Campaign"===c&&(a.currentCampaign=e.extend({},a.currentCampaign,{CampaignCashback:e.extend({},a.currentCampaign?a.currentCampaign.CampaignCashback:{},{Percent:o})}))}e.forEach(i,function(e){var t=r.getCashbackInheritOptions({readonly:!1,CashbackPercent:e.CashbackPercent,viewContext:{currentAdGroup:a.currentAdGroup,currentCampaign:a.currentCampaign},i18n:l}),i="-"===t.inheritValue?"-":s.fromFloatToString(t.inheritValue,2);e().InheritCashbackPercentValue(i),e().CashbackPercentOptions(t.options)}),e.forEach(n,function(e){var t=r.getCashbackInheritOptions({readonly:!0,CashbackPercent:e.CashbackPercent,viewContext:{currentAdGroup:a.currentAdGroup,currentCampaign:a.currentCampaign},i18n:l}),i="-"===t.inheritValue?"-":s.fromFloatToString(t.inheritValue,2);e().InheritCashbackPercentValue(i),e().CashbackPercentOptions(t.options)})},m}.apply(t,n))||(e.exports=a)},FDu0:function(e,t,i){"use strict";i.r(t),i.d(t,"scrollTo",function(){return l}),i.d(t,"scrollAndCenter",function(){return c});var n=i("5iHu"),a=i.n(n),r=i("UT4o"),o=i.n(r);function s(e){var t=a()(e);if(t&&!(t.length<1)){var i=t[0];o.a.isFunction(i.scrollIntoView)&&i.scrollIntoView(!1)}}function l(e){s(e);var t=a()(e),i=a()(".navbar-fixed-top");if(!(!t||t.length<1||!i||i.length<1)){var n=t.offset();if(n){var r="absolute"===i.css("position")?0:i.outerHeight(),o=n.top-r,l=o<0?0:o;window.scrollTo(0,l)}}}function c(e){s(e);var t=a()(e);if(t&&t.length>=1){var i,n=t.offset().top,r=t.height(),o=a()(window).height();i=r<o?n-(o/2-r/2):n,window.scrollTo(0,i)}else window.scrollTo(0,0)}},"FF1+":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){var a=e.get("CampaignCreationSuccessDialog_InReview_DescriptionLine3",{adsApprovalLink:'<a href="https://go.microsoft.com/fwlink/?linkid=845462">'+e.getString("CampaignCreationSuccessDialog_Link_AdsApproval")+"</a>",adsIsRunningLink:'<a href="https://go.microsoft.com/fwlink/?linkid=845464">'+e.getString("CampaignCreationSuccessDialog_Link_AdsIsRunning")+"</a>",performanceDataLink:'<a href="https://go.microsoft.com/fwlink/?linkid=845465">'+e.getString("CampaignCreationSuccessDialog_Link_PerformanceData")+"</a>",trackSalesLink:'<a href="https://go.microsoft.com/fwlink/?linkid=845466">'+e.getString("CampaignCreationSuccessDialog_Link_TrackSales")+"</a>",trackAnalyticsLink:'<a href="https://go.microsoft.com/fwlink/?linkid=845467">'+e.getString("CampaignCreationSuccessDialog_Link_TrackAnalytics")+"</a>"});i=i+'<div class="success-dialog"><div class="success-dialog__header"><h2>'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_InReview_Title"))?"":t)+'</h2></div><div class="success-dialog__content"><h4>'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_InReview_DescriptionLine1"))?"":t)+"</h4><h4>"+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_InReview_DescriptionLine2"))?"":t)+'</h4><div class="dialog-diagram"><div class="dialog-diagram__bar"><span class="campaign-creation-status-icon-active"></span><div class="horizontal-line-1of2rd horizontal-line-success"></div><span class="campaign-creation-status-icon-active"></span><div class="horizontal-line-1of2rd"></div><span class="campaign-creation-status-icon-inactive"></span></div><div class="dialog-diagram__row"><span class="dialog-diagram__row__cell campaign-creation-status-text-active">'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_Progress_CreateCampaign"))?"":t)+'</span><span class="dialog-diagram__row__cell campaign-creation-status-text-active">'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_Progress_InReview"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_Progress_Approved"))?"":t)+'</span></div></div><div class="dialog-form"><div class="dialog-form__row"><div class="dialog-form__row__cell"></div><div class="dialog-form__row__cell"><button class="btn btn-default got-it">'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_Button_GotIt"))?"":t)+'</button></div><div class="dialog-form__row__cell"><div class="checkbox dont-show"><label><input type="checkbox" data-bind="checked: doNotShowAgain">'+n.escape(null==(t=e.getString("CampaignCreationSuccessDialog_CheckBox_DoNotShowAgain"))?"":t)+'</label></div></div></div></div></div><div class="success-dialog__footer"><p>'+(null==(t=a)?"":t)+"</p></div></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},FqJy:function(e,t,i){var n;void 0===(n=function(){return function(e){var t,i="",n=e.UrlCustomParametersJson||e.UrlCustomParameters;try{t=JSON.parse(n.replace(/&quot;/g,'"'))}catch(r){t=n}if(t&&t.Parameters&&Array.isArray(t.Parameters))for(var a=0;a<t.Parameters.length;a++)i+=" <div> <span>{_</span><span>"+t.Parameters[a].Key+"</span><span>} = </span><span>"+t.Parameters[a].Value+"</span> </div>";else"string"==typeof t&&(i+=" <span>"+t+"</span>");return i}}.call(t,i,t,e))||(e.exports=n)},G8kH:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.popupHelp=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i=i+'<div class="campaign-targeting"><div class="location-targets-container"></div><div class="adschedule-targets-container"><div class="form-group"><label class="control-label col-sm-2">'+n.escape(null==(t=e.getString("ColumnName_AdSchedule"))?"":t),a.popupHelp("pop_BA_Targeting_DayTime",e.getString("ColumnName_AdSchedule"),e),i+='</label><div class="col-sm-10"><div class="ad-schedule"></div></div></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},GCjq:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="settings-view"><div id="settings-container" data-ref="settings-container"></div></div>'}},GHnE:function(e,t,i){"use strict";i.r(t),i.d(t,"weekly2Monthly",function(){return n}),i.d(t,"weekly2MonthlyInt",function(){return a});var n=function(e){return 30.4*e/7},a=function(e){return Math.round(n(e))}},GRNs:function(e,t,i){var n,a;n=[i("ERkP"),i("UT4o"),i("aWzz")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=230)}({10:function(e,t){e.exports=i},230:function(e,t,i){e.exports=i(231)},231:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Cropper",{enumerable:!0,get:function(){return n.Cropper}});var n=i(232)},232:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cropper=void 0;var n=s(i(3)),a=s(i(10)),r=s(i(9));i(233);var o=s(i(237));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=d(this,u(t).call(this,e))).cropper=null,i.videoId=r.default.uniqueId("video-cropper-video-"),i}var i,a,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n.default.PureComponent),i=t,(a=[{key:"componentDidMount",value:function(){this.cropper=new o.default("#".concat(this.videoId),this.props.options)}},{key:"componentDidUpdate",value:function(e){r.default.isEqual(e.options.targetSetting,this.props.options.targetSetting)&&r.default.isEqual(e.options.handlerMode,this.props.options.handlerMode)&&r.default.isEqual(e.options.aspectRatio,this.props.options.aspectRatio)&&r.default.isEqual(e.options.minSize,this.props.options.minSize)&&r.default.isEqual(e.options.maxSize,this.props.options.maxSize)&&r.default.isEqual(e.options.startSize,this.props.options.startSize)||(this.cropper.destroy(),this.cropper=new o.default("#".concat(this.videoId),this.props.options))}},{key:"componentWillUnmount",value:function(){this.cropper&&this.cropper.destroy()}},{key:"reset",value:function(){this.cropper&&this.cropper.reset()}},{key:"moveTo",value:function(e,t){this.cropper&&this.cropper.moveTo(e,t)}},{key:"resizeTo",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];this.cropper&&this.cropper.resizeTo(e,t,i)}},{key:"scaleBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];this.cropper&&this.cropper.scaleBy(e,t)}},{key:"render",value:function(){return n.default.createElement("div",{className:"video-cropper-container"},n.default.createElement("div",{id:this.videoId},this.props.children))}}])&&c(i.prototype,a),s&&c(i,s),t}();t.Cropper=g,g.propTypes={options:a.default.shape({aspectRatio:a.default.number,targetSetting:a.default.shape({width:a.default.number,height:a.default.number}).isRequired,maxSize:a.default.shape({width:a.default.number,height:a.default.number,unit:a.default.string}),minSize:a.default.shape({width:a.default.number,height:a.default.number,unit:a.default.string}),startSize:a.default.shape({width:a.default.number,height:a.default.number,unit:a.default.string}),onCropStart:a.default.func,onCropMove:a.default.func,onCropEnd:a.default.func,onInitialize:a.default.func,handlerMode:a.default.oneOf(["quadra","octo"])}).isRequired,children:a.default.element.isRequired}},233:function(e,t,i){var n=i(234);"string"===typeof n&&(n=[[e.i,n,""]]);i(236)(n,{});n.locals&&(e.exports=n.locals)},234:function(e,t,i){(e.exports=i(235)(!1)).push([e.i,".video-cropper-container video {\r\n  display: block;\r\n}",""])},235:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"===typeof btoa){var a=(o=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[i].concat(r).concat([a]).join("\n")}var o;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,i){"string"===typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var r=this[a][0];"number"===typeof r&&(n[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"===typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},236:function(e,t){var i={},n=function(e){var t;return function(){return"undefined"===typeof t&&(t=e.apply(this,arguments)),t}},a=n(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),r=n(function(){return document.head||document.getElementsByTagName("head")[0]}),o=null,s=0,l=[];function c(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=i[a.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](a.parts[o]);for(;o<a.parts.length;o++)r.parts.push(h(a.parts[o],t))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(h(a.parts[o],t));i[a.id]={id:a.id,refs:1,parts:s}}}}function d(e){for(var t=[],i={},n=0;n<e.length;n++){var a=e[n],r=a[0],o={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(o):t.push(i[r]={id:r,parts:[o]})}return t}function u(e,t){var i=r(),n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),l.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function p(e){e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement("style");return t.type="text/css",u(e,t),t}function h(e,t){var i,n,a;if(t.singleton){var r=s++;i=o||(o=g(t)),n=f.bind(null,i,r,!1),a=f.bind(null,i,r,!0)}else e.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa?(i=function(e){var t=document.createElement("link");return t.rel="stylesheet",u(e,t),t}(t),n=function(e,t){var i=t.css,n=t.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(a),r&&URL.revokeObjectURL(r)}.bind(null,i),a=function(){p(i),i.href&&URL.revokeObjectURL(i.href)}):(i=g(t),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),a=function(){p(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!==typeof DEBUG&&DEBUG&&"object"!==typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");"undefined"===typeof(t=t||{}).singleton&&(t.singleton=a()),"undefined"===typeof t.insertAt&&(t.insertAt="bottom");var n=d(e);return c(n,t),function(e){for(var a=[],r=0;r<n.length;r++){var o=n[r];(s=i[o.id]).refs--,a.push(s)}e&&c(d(e),t);for(r=0;r<a.length;r++){var s;if(0===(s=a[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var m=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}();function f(e,t,i,n){var a=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=m(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}},237:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(238);var n,a=(n=i(239))&&n.__esModule?n:{default:n};i(246);var r=a.default;t.default=r},238:function(e,t){!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+a)},a);return e=n+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},239:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=i(240))&&n.__esModule?n:{default:n};function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,i){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var i,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a.default),i=t,(n=[{key:"getValue",value:function(e){return l(c(t.prototype),"getValue",this).call(this,e)}},{key:"destroy",value:function(){return l(c(t.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(e,t){return this.box.move(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(e,t,i),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}])&&o(i.prototype,n),r&&o(i,r),t}();t.default=u},240:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(241)),a=s(i(243)),r=s(i(244)),o=i(242);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){c(e,t,i[t])})}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p={quadra:[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"}],octo:[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}]},g=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=e.parseOptions(i||{}),this.HANDLE_CONFIGS=p[this.options.handlerMode];var n=document.querySelector(t);this.initialized=!1,this.restore={parent:n.parentNode,element:n},this.initialize(n)}var t,i,s;return t=e,s=[{key:"parseOptions",value:function(e){var t=null,i={width:null,height:null},n={width:null,height:null},a={width:50,height:50,unit:"%"},r=null,o=null,s=null,c=null,d=null;"number"===typeof e.aspectRatio&&(d=1/e.aspectRatio);var u=null;e.maxSize&&(u=l({},e.maxSize,{unit:e.maxSize.unit||"px"}));var p=null;e.minSize&&(p=l({},e.minSize,{unit:e.minSize.unit||"px"}));var g=null;e.startSize&&(g=l({},e.startSize,{unit:e.startSize.unit||"%"}));var h=null;"function"===typeof e.onInitialize&&(h=e.onInitialize);var m=null;"function"===typeof e.onCropStart&&(m=e.onCropStart);var f=null;"function"===typeof e.onCropEnd&&(f=e.onCropEnd);var v=null;"function"===typeof e.onCropMove&&(v=e.onCropMove);var b=function(e,t){return null!==e?e:t};return l({aspectRatio:b(d,t),maxSize:b(u,i),minSize:b(p,n),startSize:b(g,a),onInitialize:b(h,r),onCropStart:b(m,o),onCropMove:b(v,s),onCropEnd:b(f,c),handlerMode:e.handlerMode||"quadra",zIndexOffest:e.zIndexOffest||0,convertToPixels:function(e){for(var t=e.offsetWidth,i=e.offsetHeight,n=["maxSize","minSize","startSize"],a=0;a<n.length;a+=1){var r=n[a];null!==this[r]&&("%"===this[r].unit&&(null!==this[r].width&&(this[r].width=this[r].width/100*t),null!==this[r].height&&(this[r].height=this[r].height/100*i)),delete this[r].unit)}}},e.targetSetting)}}],(i=[{key:"initialize",value:function(e){this.createDOM(e),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this.initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(e){this.containerEl=document.createElement("div"),this.containerEl.className="cropper-container",this.eventBus=this.containerEl,(0,r.default)(this.containerEl),this.containerEl.style.width="".concat(this.options.width,"px"),this.containerEl.style.height="".concat(this.options.height,"px"),this.cropperEl=document.createElement("div"),this.cropperEl.className="cropper",this.maskLeftEl=document.createElement("div"),this.maskTopEl=document.createElement("div"),this.maskRightEl=document.createElement("div"),this.maskBottomEl=document.createElement("div"),this.maskLeftEl.className="cropper-mask",this.maskTopEl.className="cropper-mask",this.maskRightEl.className="cropper-mask",this.maskBottomEl.className="cropper-mask",this.regionEl=document.createElement("div"),this.regionEl.className="cropper-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="cropper-overlay";var t=document.createElement("div");t.className="cropper-handleContainer",this.handles=[];for(var i=0;i<this.HANDLE_CONFIGS.length;i+=1){var a=new n.default(this.HANDLE_CONFIGS[i].position,this.HANDLE_CONFIGS[i].constraints,this.HANDLE_CONFIGS[i].cursor,this.eventBus);this.handles.push(a),t.appendChild(a.el)}var o=e.parentElement;this.cropperEl.appendChild(e.cloneNode(!0)),this.cropperEl.appendChild(this.maskLeftEl),this.cropperEl.appendChild(this.maskTopEl),this.cropperEl.appendChild(this.maskRightEl),this.cropperEl.appendChild(this.maskBottomEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(t),this.containerEl.appendChild(this.cropperEl),o.removeChild(e),o.appendChild(this.containerEl)}},{key:"destroy",value:function(){this.restore.parent.replaceChild(this.restore.element,this.containerEl)}},{key:"initializeBox",value:function(e){var t=e.startSize,i=t.width,n=t.height,r=new a.default(0,0,i,n);r.constrainToRatio(e.aspectRatio,[.5,.5]);var o=e.minSize,s=e.maxSize;r.constrainToSize(s.width,s.height,o.width,o.height,[.5,.5],e.aspectRatio);var l=this.cropperEl.offsetWidth,c=this.cropperEl.offsetHeight;r.constrainToBoundary(l,c,[.5,.5]);var d=this.cropperEl.offsetWidth/2-r.width()/2,u=this.cropperEl.offsetHeight/2-r.height()/2;return r.move(d,u),r}},{key:"redraw",value:function(){var e=this,t=Math.round(this.box.width()),i=Math.round(this.box.height()),n=Math.round(this.box.x1),a=Math.round(this.box.y1),r=Math.round(this.box.x2),o=Math.round(this.box.y2);window.requestAnimationFrame(function(){e.regionEl.style.transform="translate(".concat(n,"px, ").concat(a,"px)"),e.regionEl.style.width="".concat(t,"px"),e.regionEl.style.height="".concat(i,"px");var s=e.containerEl.style;e.maskLeftEl.style.clip="rect(".concat(0,"px, ",n,"px, ").concat(s.height,", ",0,"px)"),e.maskRightEl.style.clip="rect(".concat(0,"px, ",s.width,", ").concat(s.height,", ").concat(r,"px)"),e.maskTopEl.style.clip="rect(".concat(0,"px, ",r,"px, ").concat(a,"px, ").concat(n,"px)"),e.maskBottomEl.style.clip="rect(".concat(o,"px, ").concat(r,"px, ").concat(s.height,", ").concat(n,"px)");for(var l=e.box.getAbsolutePoint([.5,.5]),c=l[0]-e.cropperEl.offsetWidth/2>>31,d=l[1]-e.cropperEl.offsetHeight/2>>31,u=-2*((c^d)+d+d+4)+8,p=0;p<e.handles.length;p+=1){var g=e.handles[p],h=g.el.offsetWidth,m=g.el.offsetHeight,f=n+t*g.position[0]-h/2,v=a+i*g.position[1]-m/2;g.el.style.transform="translate(".concat(Math.round(f),"px, ").concat(Math.round(v),"px)"),g.el.style.zIndex=e.options.zIndexOffest+(u===p?5:4)}})}},{key:"attachHandlerEvents",value:function(){var e=this.eventBus;e.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),e.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),e.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var e=this.eventBus;function t(t){t.stopPropagation(),e.dispatchEvent(new o.CustomEvent("regionmove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function i(n){n.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",t),e.dispatchEvent(new o.CustomEvent("regionend",{detail:{mouseX:n.clientX,mouseY:n.clientY}}))}this.regionEl.addEventListener("mousedown",function(n){n.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",t),e.dispatchEvent(new o.CustomEvent("regionstart",{detail:{mouseX:n.clientX,mouseY:n.clientY}}))}),e.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),e.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),e.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var e=4,t=this,i=null;function n(e){e.stopPropagation(),t.eventBus.dispatchEvent(new o.CustomEvent("handlemove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function r(e){e.stopPropagation(),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",n),1!==t.box.width()||1!==t.box.height()?t.eventBus.dispatchEvent(new o.CustomEvent("handleend",{detail:{mouseX:e.clientX,mouseY:e.clientY}})):t.box=i}this.overlayEl.addEventListener("mousedown",function(s){s.stopPropagation(),document.addEventListener("mouseup",r),document.addEventListener("mousemove",n);var l=t.cropperEl.getBoundingClientRect(),c=s.clientX-l.left,d=s.clientY-l.top;i=t.box,t.box=new a.default(c,d,c+1,d+1),t.eventBus.dispatchEvent(new o.CustomEvent("handlestart",{detail:{handle:t.handles[e]}}))})}},{key:"onHandleMoveStart",value:function(e){var t=e.detail.handle;if(t){var i=[1-t.position[0],1-t.position[1]],n=d(this.box.getAbsolutePoint(i),2),a=n[0],r=n[1];this.activeHandle={handle:t,originPoint:i,originX:a,originY:r},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}}},{key:"onHandleMoveMoving",value:function(e){if(this.activeHandle){var t=e.detail,i=t.mouseX,n=t.mouseY,r=this.cropperEl.getBoundingClientRect();i-=r.left,n-=r.top,i<0?i=0:i>r.width&&(i=r.width),n<0?n=0:n>r.height&&(n=r.height);var o=this.activeHandle.originPoint.slice(),s=this.activeHandle,l=s.originX,c=s.originY,d=s.handle,u=1===d.constraints[0],p=1===d.constraints[1],g=1===d.constraints[2],h=1===d.constraints[3],m=(h||p)&&(u||g),f=h||p?l:this.box.x1,v=h||p?l:this.box.x2,b=u||g?c:this.box.y1,y=u||g?c:this.box.y2;f=h?i:f,v=p?i:v,b=u?n:b,y=g?n:y;var S=!1,w=!1;if((h||p)&&(S=h?i>l:i<l),(u||g)&&(w=u?n>c:n<c),S){var C=f;f=v,v=C,o[0]=1-o[0]}if(w){var x=b;b=y,y=x,o[1]=1-o[1]}var k=new a.default(f,b,v,y);if(this.options.aspectRatio){var A=this.options.aspectRatio,T=!1;m?T=n>k.y1+A*k.width()||n<k.y2-A*k.width():(u||g)&&(T=!0);var _=T?"width":"height";k.constrainToRatio(A,o,_)}var E=this.options.minSize,I=this.options.maxSize;k.constrainToSize(I.width,I.height,E.width,E.height,o,this.options.aspectRatio);var O=this.cropperEl.offsetWidth,P=this.cropperEl.offsetHeight;k.constrainToBoundary(O,P,o),this.box=k,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}}},{key:"onHandleMoveEnd",value:function(){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(e){var t=e.detail,i=t.mouseX,n=t.mouseY,a=this.cropperEl.getBoundingClientRect();i-=a.left,n-=a.top,this.currentMove={offsetX:i-this.box.x1,offsetY:n-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(e){var t=e.detail,i=t.mouseX,n=t.mouseY,a=this.currentMove,r=a.offsetX,o=a.offsetY,s=this.cropperEl.getBoundingClientRect();i-=s.left,n-=s.top,this.box.move(i-r,n-o),this.box.x1<0&&this.box.move(0,null),this.box.x2>s.width&&this.box.move(s.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>s.height&&this.box.move(null,s.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}])&&u(t.prototype,i),s&&u(t,s),e}();t.default=g},241:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(242);t.default=function e(t,i,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=this;function s(e){e.stopPropagation(),o.eventBus.dispatchEvent(new n.CustomEvent("handlemove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}function l(e){e.stopPropagation(),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",s),o.eventBus.dispatchEvent(new n.CustomEvent("handleend",{detail:{handle:o}}))}this.position=t,this.constraints=i,this.cursor=a,this.eventBus=r,this.el=document.createElement("div"),this.el.className="cropper-handle",this.el.style.cursor=a,this.el.addEventListener("mousedown",function(e){e.stopPropagation(),document.addEventListener("mouseup",l),document.addEventListener("mousemove",s),o.eventBus.dispatchEvent(new n.CustomEvent("handlestart",{detail:{handle:o}}))})}},242:function(e,t,i){"use strict";function n(e,t){var i=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEvent=n,n.prototype=window.Event.prototype},243:function(e,t,i){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,i,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x1=t,this.y1=i,this.x2=n,this.y2=a}var t,i,r;return t=e,(i=[{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],n=this.x1+this.width()*i[0],a=this.y1+this.height()*i[1];return this.x1=n-e*i[0],this.y1=a-t*i[1],this.x2=this.x1+e,this.y2=this.y1+t,this}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=this.width()*e,n=this.height()*e;return this.resize(i,n,t),this}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.width(),n=this.height();return e=null===e?this.x1:e,t=null===t?this.y1:t,this.x1=e,this.y1=t,this.x2=e+i,this.y2=t+n,this}},{key:"getAbsolutePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0];return[this.x1+this.width()*e[0],this.y1+this.height()*e[1]]}},{key:"constrainToRatio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==e){switch(i){case"height":this.resize(this.width(),this.width()*e,t);break;case"width":this.resize(1*this.height()/e,this.height(),t);break;default:this.resize(this.width(),this.width()*e,t)}return this}}},{key:"constrainToBoundary",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=n(this.getAbsolutePoint(i),2),r=a[0],o=a[1],s=r,l=o,c=e-r,d=t-o,u=-2*i[0]+1,p=-2*i[1]+1,g=null,h=null;switch(u){case-1:g=s;break;case 0:g=2*Math.min(s,c);break;case 1:g=c}switch(p){case-1:h=l;break;case 0:h=2*Math.min(l,d);break;case 1:h=d}if(this.width()>g){var m=g/this.width();this.scale(m,i)}if(this.height()>h){var f=h/this.height();this.scale(f,i)}return this}},{key:"constrainToSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(r&&(r>1?(e=1*t/r,n*=r):r<1&&(t=e*r,i=1*n/r)),e&&this.width()>e){var o=e,s=null===r?this.height():t;this.resize(o,s,a)}if(t&&this.height()>t){var l=null===r?this.width():e,c=t;this.resize(l,c,a)}if(i&&this.width()<i){var d=i,u=null===r?this.height():n;this.resize(d,u,a)}if(n&&this.height()<n){var p=null===r?this.width():i,g=n;this.resize(p,g,a)}return this}}])&&a(t.prototype,i),r&&a(t,r),e}();t.default=r},244:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.addEventListener("touchstart",a),e.addEventListener("touchend",a),e.addEventListener("touchmove",a)};var n=i(245);function a(e){e.preventDefault();var t=e.changedTouches[0];t.target.dispatchEvent(new n.MouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],{bubbles:!0,cancelable:!0,view:window,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY}))}},245:function(e,t,i){"use strict";function n(e,t){var i=t||{bubbles:!1,cancelable:!1},n=document.createEvent("MouseEvent");return n.initMouseEvent(e,i.bubbles,i.cancelable,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n}Object.defineProperty(t,"__esModule",{value:!0}),t.MouseEvent=n,n.prototype=Event.prototype},246:function(e,t,i){var n=i(247);"string"===typeof n&&(n=[[e.i,n,""]]);i(236)(n,{});n.locals&&(e.exports=n.locals)},247:function(e,t,i){(e.exports=i(235)(!1)).push([e.i,".cropper-container * {\r\n  user-select: none;\r\n  -moz-user-select: none;\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n  box-sizing: border-box;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n}\r\n\r\n.cropper {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.cropper-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n  cursor: crosshair;\r\n}\r\n\r\n.cropper-region {\r\n  border: 1px solid rgba(255, 255, 255);\r\n  position: absolute;\r\n  z-index: 3;\r\n  cursor: move;\r\n  top: 0;\r\n}\r\n\r\n.cropper-mask{\r\n  background: rgba(255, 255, 255, 0.5);\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 2;\r\n  pointer-events: none;\r\n}\r\n\r\n.cropper-handle {\r\n  border: 1px solid black;\r\n  background-color: white;\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 8px;\r\n  position: absolute;\r\n  z-index: 4;\r\n  top: 0;\r\n}",""])},3:function(t,i){t.exports=e},9:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},Gt6W:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i+='<div class="fieldRowAd">',s||(i=i+'\x3c!--final url form-group--\x3e<div class="form-group"><label class="col-sm-4 control-label"'+n.attr("id",e+"LandingPageLabel",!0,!0)+' data-bind="visible: showTitles()">'+n.escape(null==(t=r.get("LandingPage_Label"))?"":t),a.popupHelp(o,r.get("LandingPage_Label"),r),i=i+'</label><div class="fieldItemAd" data-bind="css: {\'col-sm-8\': showTitles(), \'col-sm-12\': !showTitles()}"><div class="final-url" role="radiogroup"'+n.attr("aria-labelledby",e+"LandingPageLabel",!0,!0)+"></div></div></div>"),i+='\x3c!--url form-group--\x3e<div class="form-group">',s&&(i=i+'<label class="col-sm-4 control-label"'+n.attr("id",e+"FinalUrlLabel",!0,!0)+">"+n.escape(null==(t=r.get("Ad_FinalUrl"))?"":t),a.popupHelp("pop_BA_NewAdCreate_FinalURL",r.get("Ad_FinalUrl"),r),i+="</label>"),i=i+'\x3c!--offset by 4 because the url does not have title--\x3e<div class="fieldItemAd" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="url"></div></div></div>\x3c!--ko if: showUpgradeWarning--\x3e<div class="form-group"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="alert alert-warning"><div class="alert-image"></div><span>'+n.escape(null==(t=r.get("BulkEdit_UrlOptions_UpgradeWarning"))?"":t)+'</span><a class="HelpTopic" query="help:app51230" href="javascript:void(0);">'+n.escape(null==(t=r.get("LearnMore"))?"":t)+'</a></div></div></div>\x3c!-- /ko--\x3e<div class="form-group" id="LandingPageUrlErrors" data-bind="visible: landingPageUrlErrorMessages().length &gt; 0" role="alert"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="font-error container-fluid"><ul data-bind="foreach:landingPageUrlErrorMessages"><li><span class="is-error" data-bind="html: $data"></span></li></ul></div></div></div>\x3c!--mobile url form-group--\x3e<div class="form-group" data-bind="visible: mobileUrlVisible"><div><label class="col-sm-4 control-label"'+n.attr("id",e+"MobileUrlLabel",!0,!0)+' data-bind="visible: showTitles()">'+n.escape(null==(t=r.get("MobileFinalUrl_Label"))?"":t),a.popupHelp("pop_BA_NewCampaignCreate_Ad_MobileURL",r.get("MobileFinalUrl_Label"),r),i+='</label><div class="fieldItemAd" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="mobile-url"></div></div></div></div><div class="form-group" id="MobileUrlErrors" data-bind="visible: mobileUrlVisible() &amp;&amp; errorMessages().length &gt; 0" role="alert"><div class="div" data-bind="css: {\'col-sm-offset-4\': showTitles()}"><div class="font-error container-fluid"><ul data-bind="foreach:errorMessages"><li><span class="is-error" data-bind="html: $data"></span></li></ul></div></div></div><div data-bind="visible: urlOptionsVisible"><div class="advanced-options"></div></div></div>'}.call(this,"ariaPrefix"in r?r.ariaPrefix:"undefined"!==typeof ariaPrefix?ariaPrefix:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"popupHelpKeyAdLandingPage"in r?r.popupHelpKeyAdLandingPage:"undefined"!==typeof popupHelpKeyAdLandingPage?popupHelpKeyAdLandingPage:void 0,"showOnlyFinalUrl"in r?r.showOnlyFinalUrl:"undefined"!==typeof showOnlyFinalUrl?showOnlyFinalUrl:void 0),i}},Gxem:function(e,t,i){"use strict";i.r(t),i.d(t,"formatCost",function(){return l});var n=i("AQBV"),a=i.n(n),r=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/competition-tab"),o={compact:"short",minimumFractionDigits:2,maximumFractionDigits:2},s=a.a.get("AccountCurrencyCode"),l=function(e){return r.formatCurrency(e,s,o)}},H4cX:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("ijv9"),p=i.n(u),g=i("YK3D"),h=i.n(g),m=i("ORPc"),f=i("OvMV"),v=i("iH9I"),b=i("/xyZ"),y=i.n(b),S=i("+9/h"),w=i("nlAS"),C=i.n(w),x=i("Q5Xd"),k=i("1gQY"),A=i.n(k),T=i("DXRr"),_=i("Td3X"),E=i.n(_),I=i("KOFP"),O=i.n(I),P=i("wL7j"),M=i.n(P),j=i("aezm"),L=i("P0Lv"),D=i("fE/Z"),R=i("AQBV"),N=i.n(R),V=i("dnaR"),B=i("El24"),F=i("6mWt"),U=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/audience-campaign");S.a.set("component/js-data-campaign/index",C.a),S.a.set("$/schema!campaign/ResponsiveAd",x.ResponsiveAd),S.a.set("component/i18n/loader!campaignui/feature/audience-campaign",U),S.a.set("component/url-input/view/url-input",M.a),S.a.set("component/api-errors-campaign/index",T),S.a.set("component/upgraded-url/view/urlOptionsV2",j.default),S.a.set("component/upgraded-url/service/testUurl",L),S.a.set("component/state/index",A.a),S.a.set("component/http/channel/odata",E.a),S.a.set("component/config/index",N.a),S.a.set("Constants",O.a),S.a.set("component/edm-campaign/index",D.default),S.a.set("campaignui/feature/adextension/actionlink/view/language-adapter",V.a),S.a.set("campaignui/feature/adextension/actionlink/view/action-type-adapter",B.a),S.a.set("campaignui/feature/instrumentation/index",f.default),S.a.set("component/preference/service/index",F.default);var G=null;i.d(t,"a",function(){return z});var z=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.default.addScenario(m.schema);var n={logScenario:t.model?f.default.aimAdEdit.create():f.default.aimAdCreation.create(),isGridDisplay:!0,viewContext:{currentAdGroup:{get Id(){return t.scope().adGroupId}},currentCampaign:{Id:t.scope().campaignId,CampaignType:t.scope().campaignType}},isForVNext:t.isForVNext,isMultimediaAd:t.isMultimediaAd||!1,isVideo:t.isVideo,isMobileUrlEnabled:t.isMobileUrlEnabled,isImpressionTrackingUrlsEnabled:t.isImpressionTrackingUrlsEnabled,newI18n:t.newI18n,pageContext:h.a,hasWebsiteImageOptedInObservable:t.hasWebsiteImageOptedInObservable};t.model&&(n.isUpdate=!0,n.ad=t.model),n.perfMarker=v.PerfMarkerFactory.createMarker("CrudAudienceAdNew",{autoEnd:!0}),this.loadAdEditorPromise=(G||(G=new y.a(function(e){Promise.resolve().then(i.bind(null,"YzTP")).then(function(t){e(t.ResponsiveAdEditor)})})),G).then(function(t){e.audienceAd=new t(n)})}},{key:"remove",value:function(){this.audienceAd&&this.audienceAd.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"render",value:function(){var e=this;return this.loadAdEditorPromise.then(function(){e.$el.html(e.audienceAd.render().el)}),this}},{key:"saveAdAsync",value:function(e){var t=this;return this.loadAdEditorPromise.then(function(){return t.audienceAd.saveAdAsync().then(function(t){return t?e(t,t.Id,"Responsive"):t})})}},{key:"saveAndCreateAnotherAsync",value:function(e){var t=this;return this.loadAdEditorPromise.then(function(){return t.audienceAd.saveAdAsync().then(function(i){return i?(t.audienceAd.onCreateAnother(),e(i,i.Id,"Responsive")):i})})}},{key:"saveToClient",value:function(e){var t=this;return this.loadAdEditorPromise.then(function(){return t.audienceAd.saveToClient().then(function(t){return t?(t.Id||(t.Id=p.a.v4()),e(t,t.Id,"Responsive")):t})})}},{key:"saveToClientAndCreateAnother",value:function(e){var t=this;return this.loadAdEditorPromise.then(function(){return t.audienceAd.saveToClient().then(function(i){return i?(t.audienceAd.onCreateAnother(),e(i,i.Id,"Responsive")):i})})}}]),t}(d.a.View)},"H6w+":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("ERkP"),c=i.n(l),d=i("K3Cp"),u=i("eHSY"),p=function(e){function t(){var e,i;Object(n.a)(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(i=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).handleClickOutside=i.props.hideColorPicker,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return c.a.createElement(u.ColorPicker,this.props)}}]),t}(c.a.PureComponent),g=Object(d.default)(p);i.d(t,"a",function(){return g})},HR8k:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="settings-view"><div id="settings-container" data-ref="settings-container"></div></div>'}},HVWX:function(e,t,i){var n;n=function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=764)}({1:function(t,i){t.exports=e},6:function(e,i){e.exports=t},764:function(e,t,i){e.exports=i(765)},765:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(766);Object.defineProperty(t,"NavigationContainer",{enumerable:!0,get:function(){return n.NavigationContainer}})},766:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationContainer=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(6),o=i(767),s=(n=o)&&n.__esModule?n:{default:n};t.NavigationContainer=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.DeterministicView),a(t,[{key:"initialize",value:function(e){var t=this,i=e.selector,n=e.sections;if(!i||!n)throw new Error("Selector view and sections are required");this.setChild("selector",i),this.sections=n,i.on("selectionChanged",function(e){return t.setState(e)})}},{key:"setState",value:function(e){var t=e.selected,i="section-"+t,n=this.sections[t];return r.helpers.updateView(this.getChild("selector"),{selected:t}),n&&r.helpers.ensureChildView(this,i,n),this.model.set({sectionRef:i}),this}},{key:"className",get:function(){return"navigation-container"}},{key:"template",get:function(){return s.default}}]),t}()},767:function(e,t,i){"use strict";var n=i(1);e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="navigation-container__selector"><div data-ref="selector"></div></div><div class="navigation-container__section"><div'+n.attr("data-ref",e.sectionRef,!0,!0)+"></div></div>"}.call(this,"model"in i?i.model:"undefined"!==typeof model?model:void 0),t}}})},e.exports=n(i("Glrc"),i("muKe"))},HcQT:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="radio"><label><input class="radio-final-url" type="radio" name="isFinalUrl" value="true" data-bind="checked:isFinalUrl.Editing">'+n.escape(null==(t=e.getString("FinalUrl_Label"))?"":t)+'</label></div><div class="radio"><label><input class="radio-destination-url" type="radio" name="isFinalUrl" value="false" data-bind="checked:isFinalUrl.Editing">'+n.escape(null==(t=e.getString("Ad_DestinationUrl"))?"":t)+"</label></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},Hqm8:function(e,t,i){var n,a;n=[i("UT4o"),i("AQBV"),i("+uOd"),i("CfPS"),i("Rjc0"),i("P2fB"),i("dQEW"),i("sZCf"),i("CfRx"),i("Vr0g"),i("C4VE"),i("Sweh"),i("FqJy"),i("sbat"),i("Vrot"),i("6Ux2"),i("GJCM"),i("uxIr"),i("OvMV"),i("+eNk")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u,p,g,h,m,f,v,b,y){var S=window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),w=["Campaign","AdGroup","Keyword","Ad"],C=function(t,i){var n=f.parseSync(t);return e.isEmpty(n)?i:(n=e.map(n,function(t){var i=f.parseSync(t);return e.each(i,function(e,t){i[t]=v.escape(e)}),i}),p({UrlCustomParametersJson:JSON.stringify({Parameters:n})}))};return d.extend({initialize:function(e){var t="bulkEditUrlOptions"+e.entityType,a=b.default[t].create()[t].create();a.start(),e.activity=a,d.prototype.initialize.call(this,e),this.model.set("Entity",e.entityType),this.ko_model=new i(this.model,{entityType:e.entityType}),this.template=n,this.entityType=e.entityType},render:function(){return d.prototype.render.apply(this,arguments),this.ko_model.customParametersSelectedAction.subscribe(function(e){switch(this.ko_model.showCustomParamsInput(e!==o.removeAll),e){case o.add:case o.replaceAll:this.customParams.goToAddReplaceMode();break;case o.removeContaining:case o.removeExact:this.customParams.goToRemoveMode()}},this),this.customParams=new m.CustomParametersView({i18n:S,permissions:t.get("Permissions")||{},bulkEditMode:!0,entityType:this.entityType,bulkEditShowAddLabel:!0,bulkEditShowMatchCase:!1}).render(),this.$(".custom-parameters-container").html(this.customParams.$el),this.ko_model.isDisabled.subscribe(function(e){this.customParams.setDisabled(e)},this),this},createBaseActionObject:function(e,t,i){return{"@odata.type":e,Property:t,ActionType:i}},setAction:function(){var t={Actions:[]},i=this.ko_model.selectedAction(),n=this.customParams.getValues(!0),l=0;switch(i){case a.set:if(this.ko_model.trackingTemplateSelectedAction()!==r.remove&&e.isEmpty(this.ko_model.trackingTemplate().trim())||(t.Actions[l]=this.createBaseActionObject("#Model.TextAction",g.trackingTemplate,r.set),e.extend(t.Actions[l],{Value:this.ko_model.trackingTemplateSelectedAction()===r.set?this.ko_model.trackingTemplate().trim():"",Options:h.None}),l++),e.isEmpty(this.ko_model.finalUrlSuffix().trim())||(t.Actions[l]=this.createBaseActionObject("#Model.TextAction",g.finalUrlSuffix,s.set),e.extend(t.Actions[l],{Value:this.ko_model.finalUrlSuffix().trim(),Options:h.None}),l++),this.ko_model.customParametersSelectedAction()===o.removeAll||n.params.length>0){var c=h.None,d=[],u="Remove";switch(d=e.map(n.params,function(e){return JSON.stringify(e)}),this.ko_model.customParametersSelectedAction()){case o.add:u="Add";break;case o.removeAll:u="Set",d=[];break;case o.replaceAll:u="Set";break;case o.removeContaining:c=n.matchCase?h.MatchCase:h.None;break;case o.removeExact:c=n.matchCase?h.MatchWholeWord+","+h.MatchCase:h.MatchWholeWord}t.Actions[l]=this.createBaseActionObject("#Model.ListAction",g.customParameters,u),e.extend(t.Actions[l],{Value:d,MatchOptions:c}),l++}break;case a.findReplace:var p=this.ko_model.findText().trim(),m=this.ko_model.replaceText().trim(),f=this.ko_model.selectedField(),v=(y=this.ko_model.findReplaceOptions())&&y.length?y.join():h.None;e.isEmpty(p)||(t.Actions[l]=this.createBaseActionObject("#Model.TextAction",f,i),e.extend(t.Actions[l],{SearchString:p,Value:m,Options:v}),l++);break;case a.append:var b=this.ko_model.appendText().trim(),y=(f=this.ko_model.selectedField(),this.ko_model.changeTextOption());e.isEmpty(b)||(t.Actions[l]=this.createBaseActionObject("#Model.TextAction",f,y),e.extend(t.Actions[l],{SearchString:"",Value:b,Options:h.None}),l++)}this.model.set("BatchAction",t)},getIdFilter:function(){var t={};return e.contains(w,this.entityType)&&(t=u.getIdFilter(this.grid,this.entityType)),t},getProgressText:function(){return S.getString(c[this.entityType].ProgressText)||""},formatGridResults:function(t){var i=[],n=[],a={trackingTemplate:!1,finalUrlSuffix:!1,customParameters:!1},r=this.model.get("BatchAction").Actions;r.length>0&&(i.push(this.ko_model.entityHeaderName()),n.push(this.ko_model.entityHeaderName()));for(var o=0;o<r.length;o++){var s=r[o].Property;s===g.trackingTemplate?(i.push(S.getString("BulkEdit_UrlOptions_CurrentTrackingTemplate")),i.push(S.getString("BulkEdit_UrlOptions_NewTrackingTemplate")),n.push(S.getString("BulkEdit_UrlOptions_CurrentTrackingTemplate")),n.push(S.getString("BulkEdit_UrlOptions_AttemptedNewTrackingTemplate")),a.trackingTemplate=!0):s===g.finalUrlSuffix?(i.push(S.getString("BulkEdit_UrlOptions_CurrentFinalUrlSuffix")),i.push(S.getString("BulkEdit_UrlOptions_NewFinalUrlSuffix")),n.push(S.getString("BulkEdit_UrlOptions_CurrentFinalUrlSuffix")),n.push(S.getString("BulkEdit_UrlOptions_AttemptedNewFinalUrlSuffix")),a.finalUrlSuffix=!0):s&&s.indexOf(g.customParameters)>-1&&(i.push(S.getString("BulkEdit_UrlOptions_CurrentCustomParameters")),i.push(S.getString("BulkEdit_UrlOptions_NewCustomParameters")),n.push(S.getString("BulkEdit_UrlOptions_CurrentCustomParameters")),n.push(S.getString("BulkEdit_UrlOptions_AttemptedNewCustomParameters")),a.customParameters=!0)}if(i.length>0&&(this.ko_model.previewGrids(i),this.ko_model.errorsGrids(n),this.ko_model.showPreview(!0)),r.length>0){var d=r.length,u=null,p=[];e.each(t,function(t){t.Changes.length<d?p.push(t):u||(u=e.map(t.Changes,function(e){return e.Property}))}),p.length>0&&e.each(p,function(t){var i=e.reduce(t.Changes,function(e,t){return e[t.Property]=t,e},{}),n=[];e.each(u,function(e){i[e]?n.push(i[e]):n.push({Property:e,NewValue:null,OriginalValue:null})}),t.Changes=n})}return function(t,i,n){return t?(e.each(t,function(t){var a,r,o,s,d,u,p;r=o=s=d=u=p="--",t.data=[];var g={};e.each(t.EntityKey,function(e){g[e.Key]=e.Value});var h={value:"",isHtml:!1};"Ad"===i?h=y.getAdEntityPreviewCell(g,S):(a=e.find(t.EntityKey,function(e){return e.Key===l[i]}),h.value=a?a.Value:""),t.data.push(h),e.each(t.Changes,function(e){e.Property===c[i].TrackingTemplateProperty?(r=e.OriginalValue||"--",o=e.NewValue||"--",n.trackingTemplate&&(t.data.push({value:r,isHtml:!1}),t.data.push({value:o,isHtml:!1}))):e.Property===c[i].FinalUrlSuffixProperty?(u=e.OriginalValue||"--",p=e.NewValue||"--",n.finalUrlSuffix&&(t.data.push({value:u,isHtml:!1}),t.data.push({value:p,isHtml:!1}))):(s=C(e.OriginalValue,"--"),d=C(e.NewValue,"--"),n.customParameters&&(t.data.push({value:s,isHtml:!0}),t.data.push({value:d,isHtml:!0})))})}),t):null}(t,this.entityType,a)},formatPreviewResults:function(e){return this.formatGridResults(e)},formatErrors:function(e){return this.formatGridResults(e)},transformErrors:function(t){t&&e.each(t,function(e){"TooMuchText"===e.Error&&(e.message=e.message.replace("{0}",S.getString("BulkEdit_Property_DestinationUrl")).replace("{1}",1024))})}})}.apply(t,n))||(e.exports=a)},IFAf:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<span class="glyphicon glyphicon-remove dismiss-recommendation itemAction-remove clickable" tabindex="0" role="button"'+n.attr("title",e.getString("LocationGrid_Column_TD_Dimiss"),!0,!0)+n.attr("aria-label",e.getString("LocationGrid_Column_TD_Dimiss"),!0,!0)+"></span>"}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},IMjj:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="sidebar__right-bracket"></div><div class="sidebar__content sidebar__content_aggregate-length"><span data-bind="text: remaining, css: {error: remaining() &lt; 0}"></span><span class="sr-only"'+n.attr("id",e,!0,!0)+' data-bind="text: remainingChar" role="status" aria-live="polite"></span></div>'}.call(this,"srId"in i?i.srId:"undefined"!==typeof srId?srId:void 0),t}},INYr:function(e,t,i){var n,a;n=[i("ERkP"),i("eHSY"),i("UT4o"),i("aWzz"),i("faId")],void 0===(a=function(e,t,i,n,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=995)}({10:function(e,t){e.exports=n},1000:function(e,t,i){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){a=function(e,t){return new c(e,t)};var i=r(RegExp),o=RegExp.prototype,l=new WeakMap;function c(e,t){var n=i.call(this,e);return l.set(n,t),n}function d(e,t){var i=l.get(t);return Object.keys(i).reduce(function(t,n){return t[n]=e[i[n]],t},Object.create(null))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,i),c.prototype.exec=function(e){var t=o.exec.call(this,e);return t&&(t.groups=d(t,this)),t},c.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var i=l.get(this);return o[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+i[t]}))}if("function"===typeof t){var a=this;return o[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==n(e[e.length-1])&&e.push(d(e,a)),t.apply(this,e)})}return o[Symbol.replace].call(this,e,t)},a.apply(this,arguments)}function r(e){var t="function"===typeof Map?new Map:void 0;return(r=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function o(e,t,i){return(o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return i&&s(a,i.prototype),a}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return Math.round("".concat(+e,"e").concat(t))/Math.pow(10,t)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=parseFloat(e),n=Math.floor(i/60),a=i-60*n;return n<10&&(n="0".concat(n)),a="".concat(c(a,t)<10?"0":"").concat(a.toFixed(t)),"".concat(n,":").concat(a)}function u(e){return/^\d+:\d+(\.\d{1,3})?$/g.test(e)}function p(e){var t=a(/^(\d+):(\d+)(\.(\d{1,3}))?$/g,{minute:1,second:2,millisec:4}).exec(e);if(!t)return 0;var i=t.groups,n=i.minute,r=void 0===n?0:n,o=i.second,s=void 0===o?0:o,l=i.millisec,d=void 0===l?0:l;return c(60*(r=parseInt(r,10))+(s=parseInt(s,10))+(d=parseInt(d,10))/1e3,3)}Object.defineProperty(t,"__esModule",{value:!0}),t.round=c,t.FormatTime=d,t.FormatTimeTo3Decimals=function(e){return d(e,3)},t.IsValidTime=u,t.ConvertTimeFrom3Decimals=p,t.getValidClipperTime=void 0;t.getValidClipperTime=function(e){var t=u(e);return{isValidTime:t,timeValue:t?p(e):void 0}}},1001:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultVideoVolume=t.TimeDisplayOffset=t.IconOffset=void 0;t.IconOffset=80;t.TimeDisplayOffset=140;t.DefaultVideoVolume=30},3:function(t,i){t.exports=e},35:function(e,t){e.exports=a},5:function(e,i){e.exports=t},9:function(e,t){e.exports=i},995:function(e,t,i){e.exports=i(996)},996:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"VideoClipper",{enumerable:!0,get:function(){return n.VideoClipper}});var n=i(997)},997:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoClipper=void 0;var n=p(i(3)),a=p(i(10)),r=p(i(9)),o=i(35),s=i(5),l=i(998),c=i(999),d=i(1e3),u=i(1001);function p(e){return e&&e.__esModule?e:{default:e}}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){h(e,t,i[t])})}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e){var t=e.children,i=e.width,a=e.onSelectionChanged,o=e.onDurationChanged,l=e.onCurrentChanged,p=e.onSelectionOutofSync,h=e.timeErrorString,f=e.classes,v=n.default.useRef(r.default.uniqueId("video-clipper-video-")).current,b=m(n.default.useState(!1),2),y=b[0],S=b[1],w=m(n.default.useState(null),2),C=w[0],x=w[1],k=m(n.default.useState(!0),2),A=k[0],T=k[1],_=m(n.default.useState(0),2),E=_[0],I=_[1],O=m(n.default.useState(0),2),P=O[0],M=O[1],j=m(n.default.useState((0,d.FormatTimeTo3Decimals)(0)),2),L=j[0],D=j[1],R=m(n.default.useState((0,d.FormatTimeTo3Decimals)(0)),2),N=R[0],V=R[1],B=m(n.default.useState({start:0,end:P}),2),F=B[0],U=B[1],G=m(n.default.useState(!1),2),z=G[0],H=G[1],W=n.default.useCallback(function(e){C&&(C.currentTime=e,H(!0))},[C]);n.default.useEffect(function(){var e=document.querySelector("#".concat(v)).querySelector("video");if(null==e)throw new Error("Unable to find video element.");e.volume=u.DefaultVideoVolume/100,x(e)},[v]),n.default.useEffect(function(){C&&(C.onloadedmetadata=function(e){M(e.target.duration),o(e.target.duration),V((0,d.FormatTimeTo3Decimals)(e.target.duration))},C.onplay=function(){T(!1)},C.onpause=function(){T(!0)},C.ontimeupdate=function(e){if(z)H(!1);else{var t=e.target.currentTime;t>=F.end&&(t=F.start,C.pause(),W(t)),I(t),l(t)}})},[C,o,l,F,E,W,z]),n.default.useEffect(function(){U({start:0,end:P})},[P]);var q=function(e){return e<0||e>F.end},$=function(e){return e<F.start||e>P},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,d.getValidClipperTime)(e),n=i.isValidTime,a=i.timeValue;return!n||t&&q(a)||!t&&$(a)?(p(!0),h):(U(g({},F,t?{start:a}:{end:a})),p(!1),"")},J=i||(C?C.style.width||C.clientWidth||C.videoWidth:0);return n.default.createElement("div",null,n.default.createElement("div",{id:v},t),C&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"video-clipper-container ".concat(f.container),style:{width:J}},n.default.createElement(s.Icon,{className:"video-clipper-play-control ".concat(f.controlIcon),iconName:A?"Play":"Pause",onClick:function(){return A?C.play():C.pause()}}),n.default.createElement("div",{className:"video-clipper-time-display ".concat(f.timeDisplay)},n.default.createElement(s.Text,null,(0,d.FormatTime)(E)),n.default.createElement(s.Text,null," / "),n.default.createElement(s.Text,null,(0,d.FormatTime)(P))),n.default.createElement(c.ClipSelector,{startTime:F.start,endTime:F.end,width:J-u.IconOffset-u.TimeDisplayOffset,duration:P,currentTime:E,onCurrentTimeChange:function(e){W(e),I(e),l(e)},onSelectionChanged:function(e,t){U({start:e,end:t}),a(e,t),D((0,d.FormatTimeTo3Decimals)(e)),V((0,d.FormatTimeTo3Decimals)(t))}}),n.default.createElement(s.Icon,{className:"video-clipper-volume-control ".concat(f.controlIcon," ").concat(f.volumeIcon," volume"),iconName:"Volume3",onClick:function(){return S(!y)}})),n.default.createElement("div",{className:f.selectionContainer,style:{width:J}},n.default.createElement(s.TextField,{inputClassName:"video-clipper-start-input",className:"".concat(f.selectionText),value:L,onChange:function(e,t){D(t);var i=(0,d.getValidClipperTime)(t),n=i.isValidTime,r=i.timeValue;n&&!q(r)&&a(r,F.end)},onGetErrorMessage:function(e){return K(e,!0)}}),n.default.createElement("span",{className:f.selectionText},"To"),n.default.createElement(s.TextField,{inputClassName:"video-clipper-end-input",className:"".concat(f.selectionText),value:N,onChange:function(e,t){V(t);var i=(0,d.getValidClipperTime)(t),n=i.isValidTime,r=i.timeValue;n&&!$(r)&&a(F.start,r)},onGetErrorMessage:function(e){return K(e,!1)}})),n.default.createElement(s.Callout,{className:"".concat(f.videoVolume),gapSpace:0,target:".".concat(f.volumeIcon,".volume"),onDismiss:function(){return S(!1)},hidden:!y,isBeakVisible:!1,directionalHint:s.DirectionalHint.topCenter},n.default.createElement(s.Slider,{className:"video-clipper-volume-slider ".concat(f.volumeSlider),min:0,max:100,vertical:!0,defaultValue:u.DefaultVideoVolume,onChange:function(e){C&&(C.volume=e/100)},showValue:!1}))))}f.propTypes={onSelectionChanged:a.default.func,onCurrentChanged:a.default.func,onDurationChanged:a.default.func,onSelectionOutofSync:a.default.func,timeErrorString:a.default.string,width:a.default.number,children:a.default.element.isRequired,classes:a.default.shape({container:a.default.string,controlIcon:a.default.string,timeDisplay:a.default.string,selectionContainer:a.default.string,selectionText:a.default.string,videoVolume:a.default.string,volumeIcon:a.default.string,volumeSlider:a.default.string})},f.defaultProps={onSelectionChanged:r.default.noop,onCurrentChanged:r.default.noop,onDurationChanged:r.default.noop,onSelectionOutofSync:r.default.noop,timeErrorString:"Invalid time.",width:0,classes:{}};var v=(0,o.withDefaultStyles)(f,l.getClipperStyles);t.VideoClipper=v},998:function(e,t,i){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){a(e,t,i[t])})}return e}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getClipSelectorStyles=t.getClipperStyles=void 0;t.getClipperStyles=function(){return{container:{display:"flex",alignItems:"center",justifyContent:"space-around","& i":{cursor:"pointer"},height:64,userSelect:"none",backgroundColor:"#000000"},controlIcon:{fontSize:20,color:"#ffffff"},timeDisplay:{color:"#ffffff"},volumeIcon:{},selectionContainer:{display:"flex",justifyContent:"center",alignItems:"baseline",userSelect:"none",marginTop:15},selectionText:{fontFamily:"Segoe UI",marginLeft:10,fontSize:14,maxWidth:100},videoVolume:{boxShadow:"none","& .ms-Callout-main":{backgroundColor:"rgba(0, 0, 0, 0)"}},volumeSlider:{height:120}}};var r={display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffffff",width:16,height:40,cursor:"col-resize",position:"relative"};t.getClipSelectorStyles=function(){return{root:{borderRadius:0,height:40,display:"inline-flex",background:"#a19f9d",position:"relative"},selection:{position:"relative",backgroundColor:"#edebe9",cursor:"move",borderTop:"4px solid #ffffff",borderBottom:"4px solid #ffffff"},starter:n({},r,{borderRadius:"".concat(0,"px 0px 0px ").concat(0,"px"),marginLeft:-16,"&.dragging":{filter:"brightness(70%)"}}),ender:n({},r,{borderRadius:"0px ".concat(0,"px ").concat(0,"px 0px"),marginRight:-16,"&.dragging":{filter:"brightness(70%)"}}),boundaryIcon:{fontSize:12,color:"#000000"},cursor:{},progress:{},background:{position:"absolute",borderRadius:0,height:40},pin:{position:"absolute",height:56,bottom:8,cursor:"col-resize","& .head":{height:10,width:10,marginLeft:-4,borderRadius:5,background:"black",display:"none"},"& .body":{height:44,width:4,marginTop:22,background:"#0078D4",borderRadius:4},"&.dragging":{filter:"opacity(50%)"}}}}},999:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClipSelector=void 0;var n=d(i(3)),a=d(i(10)),r=d(i(9)),o=i(5),s=i(35),l=i(998),c=i(1e3);function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v=function(e){function t(e){var i,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=g(t).call(this,e),i=!o||"object"!==u(o)&&"function"!==typeof o?h(a):o,f(h(i),"onMouseUp",function(){i.setState({isStartMoving:!1,isEndMoving:!1,isPinMoving:!1,isSelectionMoving:!1})}),f(h(i),"onMouseMove",r.default.throttle(function(e){var t=i.state,n=t.videoTrackWidth,a=t.isStartMoving,r=t.isEndMoving,o=t.isPinMoving,s=t.isSelectionMoving,l=t.moveStart,d=i.props,u=d.startTime,p=d.endTime,g=d.duration,h=d.onCurrentTimeChange,m=d.onSelectionChanged,f=(0,c.round)(n*u/g,3),v=(0,c.round)(n*p/g,3),b=a||r||o||s?i.ref.current.getBoundingClientRect().left:0;if(a)m(Math.min(Math.max(e.clientX-b,0),v)*g/n,p);else if(r){m(u,Math.max(Math.min(e.clientX-b,n),f)*g/n)}else if(o){h(Math.min(Math.max(e.clientX-b,f),v)/n*g)}else if(s){var y=v-f,S=Math.min(Math.max(e.clientX-l,0),n-y);m((S=S<0?0:S)*g/n,(S+y)*g/n)}},16)),f(h(i),"onStarterMouseDown",function(e){0===e.button&&i.setState({isStartMoving:!0,moveStart:e.clientX})}),f(h(i),"onEnderMouseDown",function(e){0===e.button&&i.setState({isEndMoving:!0,moveStart:e.clientX-10})}),f(h(i),"onSelectionMouseDown",function(e){if(0===e.button){var t=i.state.videoTrackWidth*i.props.startTime/i.props.duration;i.setState({isSelectionMoving:!0,moveStart:e.clientX-t})}}),f(h(i),"onPinMouseDown",function(e){0===e.button&&i.setState({isPinMoving:!0,moveStart:e.clientX})}),i.state={videoTrackWidth:e.width,isStartMoving:!1,isEndMoving:!1,isPinMoving:!1,isSelectionMoving:!1,moveStart:0},i.ref=n.default.createRef(),i}var i,a,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n.default.Component),i=t,(a=[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.onMouseMove,{capture:!0}),document.addEventListener("mouseup",this.onMouseUp,{capture:!0})}},{key:"componentDidUpdate",value:function(e){if(e.width!==this.props.width&&this.setState({videoTrackWidth:this.props.width}),e.startTime!==this.props.startTime||e.endTime!==this.props.endTime||e.duration!==this.props.duration||e.width!==this.props.width){var t=this.props,i=t.startTime,n=t.endTime,a=t.duration,r=t.currentTime,o=t.onCurrentTimeChange,s=this.state.videoTrackWidth,l=s*r/a,c=s*i/a,d=s*n/a;l<c?o(c/s*a):l>d&&o(d/s*a)}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.startTime,i=e.endTime,a=e.width,r=e.classes,s=e.currentTime,l=e.duration,c=this.state,d=c.videoTrackWidth,u=c.isStartMoving,p=c.isEndMoving,g=c.isPinMoving,h=d*s/l,m=d*t/l,f=d*i/l;return l>0?n.default.createElement("div",{className:"clipper-selector-container ".concat(r.root),style:{width:a},ref:this.ref},this.ref.current&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:r.background,style:{width:d}}),n.default.createElement("div",{className:"clipper-selector-start ".concat(r.starter," ").concat(u?"dragging":""),style:{left:m},onMouseDown:this.onStarterMouseDown},n.default.createElement(o.Icon,{className:r.boundaryIcon,iconName:"ChevronLeftSmall"})),n.default.createElement("div",{className:r.selection,style:{width:f-m,left:m},onMouseDown:this.onSelectionMouseDown}),n.default.createElement("div",{className:"clipper-selector-ender ".concat(r.ender," ").concat(p?"dragging":""),style:{left:m},onMouseDown:this.onEnderMouseDown},n.default.createElement(o.Icon,{className:r.boundaryIcon,iconName:"ChevronRightSmall"})),n.default.createElement("div",{className:"clipper-selector-pin ".concat(r.pin," ").concat(g?"dragging":""),style:{left:h},onMouseDown:this.onPinMouseDown},n.default.createElement("div",{className:"head"}),n.default.createElement("div",{className:"body"})),n.default.createElement("div",{className:r.progress}),n.default.createElement("div",{className:r.cursor}))):null}}])&&p(i.prototype,a),s&&p(i,s),t}();v.propTypes={startTime:a.default.number.isRequired,endTime:a.default.number.isRequired,duration:a.default.number.isRequired,currentTime:a.default.number.isRequired,width:a.default.number.isRequired,onCurrentTimeChange:a.default.func,onSelectionChanged:a.default.func,classes:a.default.shape({root:a.default.string,selector:a.default.string,starter:a.default.string,ender:a.default.string,boundaryIcon:a.default.string,progress:a.default.string,cursor:a.default.string,background:a.default.string})},v.defaultProps={onCurrentTimeChange:r.default.noop,onSelectionChanged:r.default.noop,classes:{}};var b=(0,s.withDefaultStyles)(v,l.getClipSelectorStyles);t.ClipSelector=b}})}.apply(t,n))||(e.exports=a)},IbLZ:function(e,t,i){"use strict";i.r(t);var n=i("6e2+"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("/xyZ"),m=i.n(h),f=i("7XbR"),v=i.n(f),b=i("YK3D"),y=i.n(b),S=i("1gQY"),w=i.n(S),C=i("AQBV"),x=i.n(C),k=i("HVug"),A=i("zrPx"),T=i("3X1n"),_=i("Z4Ty"),E=i("5C8L"),I=i.n(E),O=i("t7Tx"),P=i("DXRr"),M=i("rWao"),j=i("zeBw"),L=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/location-targets"),D=function e(t){var i=this;Object(a.a)(this,e),I.a.properties(this),this.scenario=t.scenario,this.level=v.a.observable(t.level),this.bidMode=v.a.observable("campaign-settings"===t.scenario||"adgroup-create"===t.scenario||"adgroup-settings"===t.scenario),this.editLinkVisible=v.a.computed(function(){return"adgroup"===i.level()||"campaign-settings"===i.scenario||"shopping-creation-workflow"===i.scenario}),this.targetOption=v.a.observable(t.targetOption),this.searchBoxVisible=v.a.computed(function(){return i.targetOption()===T.a.specific}),this.hideAudience=t.hideAudience,this.deletedLocations=[],this.bundleLocations=[],this.bundleLocationCriterions=v.a.observable([]),this.languageBundleString=v.a.observable(""),this.updateLanguageBundleString=function(e,t){var n=_.a(e,t),a=!0,r=[];i.bundleLocations=[];var o=[];if(!n){n=[];var s=_.d(t);g.a.isUndefined(s)&&(s={Country:"US",LocationId:190}),n.push(s),a=!1}g.a.each(n,function(e){var t=L.getString("PublisherCountry_".concat(e.Country));i.bundleLocations.push({name:t,locationId:e.LocationId}),r.push(t)}),i.languageBundleString(r.join(", "));var l=g.a.pluck(n,"LocationId");return M.a(l,{expand:"ParentLocations",lcid:y.a.CultureLcid}).then(function(e){if(e.message)throw new Error(e.message);g.a.each(e,function(e){o.push(j.buildLocationCriterionFromSearchResult(e.data,{mode:"location",status:O.Included}))}),i.bundleLocationCriterions(o)}),a},this.updateLanguageBundle=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=i.updateLanguageBundleString(e,t);"specific"===i.targetOption()||n||i.targetOption(a||!i.showEverywhereOption()?"bundle":"everywhere")},this.shouldBundleModeBeSelected=function(e){var t=i.bundleLocations;if(!t)return!1;if(t.length!==e.length)return!1;for(var n=function(i){var n=e[i];return"Radius"===n.Criterion.Type||n.SelectionStatus===O.Excluded?{v:!1}:g.a.find(t,function(e){return e.locationId===n.Criterion.LocationCriterion.LocationId})?void 0:{v:!1}},a=0;a<e.length;a++){var r=n(a);if("object"===typeof r)return r.v}return!0},this.conflictError=v.a.observable(!0).extend({validate:[]}),this.validate=function(e){var t=M.b(e),n=g.a.filter(t,function(e){return"Location"===e.Criterion.Type}),a=[];if(!i.checkConflict(n))return a.push({Error:"CampaignServiceConflictWithLocationExclusion",ErrorNumber:"2822",Property:"conflictError"}),a=Object(P.getBulkApiErrors)(a),i.errors.add(a),!1;i.conflictError(!1);var r=g.a.filter(i.errors(),function(e){return"conflictError"!==e.Property});return i.errors(r),!0},this.checkConflict=function(e){var t=[],i=[];return g.a.each(e,function(e){e.SelectionStatus===O.Included?t.push(e):e.SelectionStatus===O.Excluded&&i.push(e)}),g.a.every(t,function(e){return g.a.every(e.Criterion.LocationCriterion.EnclosingLocationIds,function(e){return g.a.isUndefined(g.a.find(i,function(t){return t.Criterion.LocationCriterion.LocationId===e}))})})},this.gridNoData=v.a.observable(!1),this.noDataMessage=v.a.observable(""),this.useCampaignSettings=v.a.observable(!0),this.editScenario=v.a.observable("campaign-settings"===t.scenario||"adgroup-settings"===t.scenario),this.adGroupScenario=v.a.observable("adgroup-create"===t.scenario||"adgroup-settings"===t.scenario),this.showAdGroupOverrideInformation=v.a.observable(!1),this.showCampaignSettingsToggleView=v.a.computed(function(){return i.adGroupScenario()}),this.showEverywhereOption=v.a.computed(function(){return!i.adGroupScenario()}),this.showTargetOptions=v.a.computed(function(){return!i.adGroupScenario()}),this.showTargetLableAndTitle=v.a.observable("audience-dashboard"!==t.scenario),this.isForVNext=v.a.observable(t.isForVNext),this.showUI=v.a.observable(!this.editScenario()),this.bidModeKeepTopMargin=v.a.computed(function(){return i.editLinkVisible()||i.gridNoData()},this),this.targetEverywhere=v.a.computed(function(){return i.targetOption()===T.a.everywhere}),t.hasLocationRecommendations&&(g.a.extend(this,new A.BaseLocationRecommendationModel({deps:{i18n:L}})),this.locationRecommendationDescription=v.a.computed(function(){return L.getString("Inline_Location_Recommendation_Description",{trafficGain:i.locationTrafficGain(),impressionGain:i.locationImpressionGain()})}),this.locationRecommendationBanner=v.a.computed(function(){return L.getString("Inline_Location_Recommendation_Setting_Banner_BI",{trafficGain:i.locationTrafficGain(),impressionGain:i.locationImpressionGain()})}),this.showLocationRecommendationBanner=v.a.computed(function(){return g.a.size(i.locationRecommendations())>0}))},R=i("YJ6k"),N=i.n(R),V=i("Qnnq"),B=i.n(V);function F(e){this.searchBoxVisible=v.a.observable(e.searchBoxVisible),this.advancedTargetingLinkVisible=v.a.observable(e.advancedTargetingLinkVisible),this.wholeBoderVisible=v.a.observable("audience-dashboard"===e.scenario),this.includedLocations=[],this.excludedLocations=[],this.newLocations=[],this.allLocations=[]}var U=i("Dbz+"),G=i.n(U),z=i("5iHu"),H=i.n(z),W=i("G9ZQ"),q=function(){function e(t){var i=this;Object(a.a)(this,e),this.rows=v.a.observableArray([]),this.i18n=t.i18n,this.locations={included:[],excluded:[],new:[]},this.scenario=t.scenario,this.showResult=v.a.observable(t.showResult),this.hideExclude=v.a.observable(t.hideExclude),this.excludeAllowed=v.a.observable(t.excludeAllowed),this.titleClickable=v.a.observable(t.titleClickable),this.showPrompt=v.a.pureComputed(function(){return!i.showResult()}),this.currentAction="",this.currentItem=null}return Object(r.a)(e,[{key:"load",value:function(e){var t=this,i=g.a.map(e,function(e){return{entity:e,i18n:t.i18n,selectionStatusObsv:v.a.observable(e.SelectionStatus||"New"),isSmartCampaign:v.a.observable(t.scenario===W.SMART_CAMPAIGN_SCENARIO),nameToShow:"Location"===e.Criterion.Type?e.Criterion.LocationCriterion.NameTypeCombo:e.Criterion.RadiusCriterion.NameTypeCombo,locationId:"Location"===e.Criterion.Type?e.Criterion.LocationCriterion.LocationId:e.Criterion.RadiusCriterion.LocationId,hideExclude:t.hideExclude()}});this.rows(i)}},{key:"getEntityById",value:function(e){var t=e;return g.a.isString(e)&&(t=parseInt(e)),g.a.find(this.rows(),function(e){return e.locationId===t})}}]),e}(),$=i("qK2J"),K=i.n($),J=i("P6o6"),Z=i.n(J),Y=i("doHi"),Q=i("l1+f"),X=i.n(Q),ee=i("nlAS"),te=i.n(ee),ie=i("UcGB"),ne=i("1EwD"),ae=i.n(ne),re=i("KyoS"),oe=i.n(re),se=i("yB/V"),le=i.n(se),ce=i("ITOZ"),de=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),ue=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=g.a.defaults(t,{showResult:!1,radius:25,level:"campaign",unit:"miles",i18n:de}),this.viewmodel=new q(this.options),this.viewmodel.showResult.subscribe(this.onShowResultChange,this),this.searchbox=new Z.a({autoSearch:this.options.scenario===W.SMART_CAMPAIGN_SCENARIO,defaultText:de.get(this.options.hideExclude?"LocationTargeting_SearchBoxWatermark_Include":"LocationTargeting_SearchBoxWatermark"),searchButtonAriaLabel:de.get("Search by location name"),searchIputDescriptionId:"LocationTargetingSearchBoxPrompt"}),this.searchbox.on("search",this.onSearch.bind(this)),ie.default.on("level:changed",function(t){e.options.level=t,e.onCriterionChange()},this),te.a.Intermediate.subscribe("CampaignCriterion",function(){e.onCriterionChange()}),te.a.Intermediate.subscribe("AdGroupCriterion",function(){e.onCriterionChange()}),te.a.Intermediate.subscribe("Location",function(t){var i=g.a.deepClone(t);e.viewmodel.showResult(!1),e.viewmodel.load(i);var n=g.a.deepClone(M.b(e.resourceName));e.updateSelectionStatus(n),e.viewmodel.showResult(!0)})}},{key:"onCriterionChange",value:function(){var e=this.options.hideExclude?[]:g.a.deepClone(M.b(this.resourceName));this.viewmodel.showResult(!1),this.updateSelectionStatus(e)}},{key:"onShowResultChange",value:function(e){var t=this;e?(H()(window).click(this.clickHandling.bind(this)),H()(".new-location-targeting-result .new-location-targeting-include-link").length?H()(".new-location-targeting-result").one("focusout",function(){H()(window).on("focusin",t.clickHandling.bind(t))}):H()(window).on("focusin",this.clickHandling.bind(this))):(H()(window).off("click",this.clickHandling.bind(this)),H()(window).off("focusin"))}},{key:"clickHandling",value:function(e){0===H()(e.target).closest(".new-location-targeting-result").length&&this.viewmodel.showResult(!1)}},{key:"updateState",value:function(e){var t=e.radius,i=e.unit;this.options.radius=t,this.options.unit=i}},{key:"render",value:function(){return this.$el.html(K()({i18n:de})),v.a.applyBindings(this.viewmodel,this.el),this.searchbox.render(),this.$(".searchbox").append(this.searchbox.$el),this.options.preloadedLocationData&&this.searchbox.ko_model.value(this.options.preloadedLocationData.Name),this}},{key:"logActivity",value:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,this.options.scenario)}},{key:"onInclude",value:function(e){var t=this;this.logActivity("location search add location target"),this.options.scenario!==W.SMART_CAMPAIGN_SCENARIO||this.options.locationOnly||te.a.Intermediate.destroyAll("CampaignCriterion"),e.stopPropagation();var i=this.viewmodel.getEntityById(H()(e.target).closest("tr").data().id),n=null;"Location"===i.entity.Criterion.Type&&"audience-dashboard"!==this.options.scenario&&!this.options.hideExclude&&X.a.isRadiusTargetingAllowedForLocationType(i.entity.Criterion.LocationCriterion.LocationType)?n=j.convertLocationToRadiusCriterion(i.entity,this.options.radius,this.options.unit):"Radius"===(n=i.entity).Criterion.Type&&n.Criterion.RadiusCriterion.LocationId<0&&(n.Criterion.RadiusCriterion.LocationId=""),n.SelectionStatus=O.Included,n.Order=Y.default.index++;var a=this.options.hideExclude?n.Criterion["".concat(n.Criterion.Type,"Criterion")].Name:"";this.options.onLocationChanged&&this.options.onLocationChanged(n.Criterion["".concat(n.Criterion.Type,"Criterion")]),this.searchbox.ko_model.value(a),te.a.Intermediate.create(this.resourceName,n).then(function(){t.trigger("LocationsListChanged")})}},{key:"onExclude",value:function(e){var t=this;this.logActivity("location search exclude location target"),e.stopPropagation();var i=this.viewmodel.getEntityById(H()(e.target).closest("tr").data().id).entity;"Radius"===i.CriterionType&&(i=j.convertRadiusToLocationCriterion(i)),i.SelectionStatus=O.Excluded,i.CriterionType="NegativeLocation",i.Order=Y.default.index++,this.searchbox.ko_model.value(""),te.a.Intermediate.create(this.resourceName,i).then(function(){t.trigger("LocationsListChanged")})}},{key:"getLocationsFromMtApi",value:function(e){var t=this;return te.a.Location.findAll({query:{$search:e,$expand:"ParentLocations"}},{cacheResponse:!1,headers:{lcid:y.a.CultureLcid}}).then(function(e){if(!e||!e.length)return m.a.resolve([]);var i=g.a.map(e,function(e){var i="audience-dashboard"!==t.options.scenario&&!t.options.hideExclude&&X.a.isRadiusTargetingAllowedForLocationType(e.Type)?"radius":"location",n=t.options.locationOnly?"location":"radius",a=g.a.isUndefined(t.options.locationOnly)?i:n;return j.buildLocationCriterionFromSearchResult(e,{mode:a,radius:t.options.radius,unit:t.options.unit})}),n=t.filterResultByCountryCode(i);return m.a.resolve(t.options.scenario===W.SMART_CAMPAIGN_SCENARIO?n:i)})}},{key:"getLocationsFromBingMapsApi",value:function(e,t){var i=this;return new m.a(function(n){oe.a.searchLocationAtBingMaps(e,function(e,t){var a=[];if(t&&g.a.isArray(t.resourceSets)&&t.resourceSets.length){var r=0;g.a.each(t.resourceSets[0].resources,function(e){X.a.isRadiusTargetingAllowedForBingMapsLocationTypes(e.entityType)&&a.push(j.buildRadiusCriterionFromBingMaps(e,--r,i.options.radius,i.options.unit))})}if(i.options.scenario===W.SMART_CAMPAIGN_SCENARIO){a=i.filterResultByCountryCode(a);var o=t.resourceSets[0].resources.length,s=a.length;o>0&&0===s&&i.options.instrumentationService&&g.a.each(t.resourceSets[0].resources,function(e){i.options.instrumentationService.logTrace("Searched address not in target country. Address searched: ".concat(e.address.formattedAddress))})}n(a)},t)})}},{key:"updateSelectionStatus",value:function(e){g.a.each(this.viewmodel.rows(),function(t){var i=g.a.find(e,function(e){return"Location"===e.Criterion.Type&&"Radius"===t.entity.Criterion.Type&&"Excluded"===e.SelectionStatus?t.locationId===e.Criterion.LocationCriterion.LocationId:"Radius"!==e.Criterion.Type&&"Radius"!==t.entity.Criterion.Type&&t.locationId===e.Criterion.LocationCriterion.LocationId}),n=g.a.find(e,function(e){if("Location"===e.Criterion.Type||"Location"===t.entity.Criterion.Type)return!1;var i=e.Criterion.RadiusCriterion.Latitude,n=e.Criterion.RadiusCriterion.Longitude,a=e.Criterion.RadiusCriterion.Radius,r=t.entity.Criterion.RadiusCriterion.Latitude,o=t.entity.Criterion.RadiusCriterion.Longitude,s=t.entity.Criterion.RadiusCriterion.Radius;return i===r&&n===o&&a===s}),a=!g.a.isUndefined(i)||!g.a.isUndefined(n),r=O.New;a&&(r=i?i.SelectionStatus:n.SelectionStatus),t.selectionStatusObsv(r)})}},{key:"onSearch",value:function(e){var t,i=this;if(this.searchTask&&this.searchTask.cancel(),!e||g.a.isEmpty(e.replace(/\s+/g,"")))return m.a.resolve();this.logActivity("location search search for location target: ".concat(e));var n=le.a.isLatLongCoordinates(e);if(n){if("audience-dashboard"===this.options.scenario)return m.a.resolve([]);t=this.getLocationsFromBingMapsApi(e,n)}else t=this.getLocationsFromMtApi(e).then(function(t){return!g.a.isEmpty(t)||"audience-dashboard"===i.options.scenario||i.options.locationOnly?t:i.getLocationsFromBingMapsApi(e,n)});return new m.a(function(e){i.searchTask=Object(ce.createAsyncToken)(t).on({onSuccess:function(t){e(t)}})}).then(function(e){return te.a.Intermediate.refresh("Location",e)}).finally(ae()(H()(".location-manage-box .left-panel")))}},{key:"remove",value:function(){var e;ie.default.off(null,null,this),this.searchbox.remove();for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(l.a)(Object(s.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"filterResultByCountryCode",value:function(e){var t=this;return g.a.filter(e,function(e){var i=t.options.targetOption,n=e.Criterion["".concat(e.CriterionType,"Criterion")].CountryCode;return g.a.contains(i,n)})}},{key:"resourceName",get:function(){return"campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion"}},{key:"events",get:function(){return{"click a.new-location-targeting-include-link":"onInclude","click .new-search-result-row.selectable":"onInclude","click a.new-location-targeting-exclude-link":"onExclude"}}}]),t}(u.a.View),pe=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets");function ge(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.gridData=v.a.observableArray([]),this.gridVisible=v.a.observable(!1),this.gridRemoveAllVisible=v.a.observable(!0),this.removeAllInGridTitleVisible=v.a.observable(!0),this.gridNoDataMessageVisible=v.a.observable(!0),this.gridNoDataMessage=pe.get("LocationTargeting_NoGridData"),this.popupEditorVisible=v.a.observable(!1),this.popupEditorLeftValue=v.a.observable(t.topValue),this.popupEditorTopValue=v.a.observable(t.leftValue),this.popupEditorLeftValuePixel=v.a.computed(function(){return e.popupEditorLeftValue()+"px"},this),this.popupEditorTopValuePixel=v.a.computed(function(){return e.popupEditorTopValue()+"px"},this),this.selectedLocationId=v.a.observable(),this.hideRemoveAllLink=v.a.computed(function(){return!e.gridVisible()&&e.gridNoDataMessageVisible()},this)}var he=i("mIKf"),me=i.n(he),fe=i("T4os"),ve=i.n(fe),be=i("Z7kg"),ye=i.n(be),Se=i("LWtK"),we=i.n(Se),Ce=i("5A7a"),xe=i.n(Ce),ke=i("kWnt"),Ae=i.n(ke),Te=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets");function _e(e){var t=this;I.a.properties(this),this.mode=v.a.observable(e.mode),this.locationName=v.a.observable(),this.isRadius=v.a.computed(function(){return"Radius"===t.mode()},this),this.radius=v.a.observable(e.radius),this.radiusUnits=v.a.observableArray([{value:"miles",text:Te.get("Targeting_Proximity_RadiusMiles")},{value:"km",text:Te.get("Location_Target_Proximity_RadiusKilometer")}]),this.selectedUnit=v.a.observable(),this.radiusOptionEnabled=v.a.observable(!0),this.locationOptionEnabled=v.a.observable(!0),this.radiusError=v.a.observable(!0).extend({validate:[]}),this.radius.subscribe(function(){t.validate()},this),this.selectedUnit.subscribe(function(){t.validate()},this),this.mode.subscribe(function(){t.validate()},this),this.validate=function(){var e=[];return t.isRadius()?((g.a.isNaN(Number(t.radius()))||parseInt(t.radius())!==Number(t.radius())||t.radius()<=0||"miles"===t.selectedUnit()&&t.radius()>500||"km"===t.selectedUnit()&&t.radius()>800)&&e.push({Error:"CampaignServiceInvalidTargetRadius",ErrorNumber:"1457",Property:"radiusError"}),e.length?(e=Object(P.getBulkApiErrors)(e),t.errors.add(e),!1):(t.radiusError(!1),t.errors.clear(),!0)):(t.radiusError(!1),t.errors.clear(),!0)}}var Ee=i("ijv9"),Ie=i.n(Ee),Oe=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),Pe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=g.a.defaults(e,{mode:""}),this.viewmodel=new _e(e)}},{key:"events",value:function(){return{"click .location-edit-btn-done":"onCreate"}}},{key:"render",value:function(){return this.$el.html(Ae()({i18n:Oe,uuid:Ie.a})),v.a.applyBindings(this.viewmodel,this.el),this}},{key:"onCreate",value:function(){if(this.viewmodel.validate()){var e={mode:this.viewmodel.mode()};this.viewmodel.isRadius()&&(e.radius=parseInt(this.viewmodel.radius()),e.unit=this.viewmodel.selectedUnit()),this.trigger("targetTypeSaved",e)}}},{key:"setMode",value:function(e){this.viewmodel.mode(e)}},{key:"setLocationName",value:function(e){this.viewmodel.locationName(e)}},{key:"setRadius",value:function(e){this.viewmodel.radius(e)}},{key:"setRadiusUnit",value:function(e){this.viewmodel.selectedUnit(e)}},{key:"setRadiusOptionEnable",value:function(e){this.viewmodel.radiusOptionEnabled(e)}},{key:"setLocationOptionEnable",value:function(e){this.viewmodel.locationOptionEnabled(e)}}]),t}(u.a.View),Me=i("B4kl"),je=i("OXuN"),Le=i("K+MZ"),De=i("i9nW"),Re=i.n(De),Ne=i("xAPU"),Ve=i.n(Ne),Be=i("ZEPV"),Fe=i("ca1b"),Ue=i("ZhOl"),Ge=i.n(Ue),ze=i("BPWY"),He=i.n(ze),We=i("E7/f"),qe=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),$e=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.a.defaults(t,{level:"campaign",type:O.Included});var i="audience-dashboard"===t.scenario||t.isForVNext;this.viewmodel=new ge,this.viewmodel.gridRemoveAllVisible(this.options.type===O.Included&&!i),this.viewmodel.gridNoDataMessageVisible(this.options.type===O.Included),this.viewmodel.popupEditorVisible.subscribe(this.onPopupEditorVisibleChange,this),this.viewmodel.removeAllInGridTitleVisible(i),this.locationPopupEditor=new Pe,this.locationPopupEditor.on("targetTypeSaved",this.editTarget.bind(this));var n=Object(We.focusLockInstanceDecorator)(this.locationPopupEditor,{onExit:function(){return e.viewmodel.popupEditorVisible(!1)},lockRegionAriaLabel:t.lockRegionAriaLabel,focusFirstItemOnMount:!0},{managed:!0});this.focusLockLocationPopupEditor=new n,ie.default.on("level:changed",function(t){e.options.level=t,e.onCriterionChange()},this),te.a.Intermediate.subscribe("CampaignCriterion",function(){e.onCriterionChange()}),te.a.Intermediate.subscribe("AdGroupCriterion",function(){e.onCriterionChange()}),this.options.locationCriterions&&(te.a.Intermediate.destroyAll("CampaignCriterion"),g.a.isArray(this.options.locationCriterions)?g.a.each(this.options.locationCriterions,function(e){te.a.Intermediate.create("CampaignCriterion",e)}):te.a.Intermediate.create("CampaignCriterion",this.options.locationCriterions))}},{key:"logActivity",value:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,this.options.scenario)}},{key:"removeAllLocations",value:function(){this.options.onLocationChanged&&this.options.onLocationChanged("all",!0),te.a.Intermediate.destroyAll(this.resourceName),this.trigger("removeAllLocations"),this.logActivity("location target grid remove all locations")}},{key:"onCriterionChange",value:function(){var e=g.a.deepClone(M.b(this.resourceName)),t=X.a.sortLocationsByType(e);this.viewmodel.gridData(this.options.type===O.Included?t.included:t.excluded),this.viewmodel.gridNoDataMessageVisible(this.options.type===O.Included&&0===e.length),this.refreshGridSource()}},{key:"onPopupEditorVisibleChange",value:function(e){e?H()(window).click(this.clickHandling.bind(this)):H()(window).off("click",this.clickHandling.bind(this))}},{key:"clickHandling",value:function(e){0===H()(e.target).closest(".popup-editor").length&&this.viewmodel.popupEditorVisible(!1)}},{key:"editTarget",value:function(e){var t=this;this.viewmodel.popupEditorVisible(!1);var i=g.a.find(this.viewmodel.gridData(),function(e){return e.Id===t.viewmodel.selectedLocationId()}),n=i.Criterion.Type,a=this.resourceName,r=e.mode,o=null;"Radius"===n&&"Location"===r?(o=j.convertRadiusToLocationCriterion(i),te.a.Intermediate.destroy(a,i.Id),te.a.Intermediate.create(a,o)):"Location"===n&&"Radius"===r?(o=j.convertLocationToRadiusCriterion(i,e.radius,e.unit),te.a.Intermediate.destroy(a,i.Id),te.a.Intermediate.create(a,o)):"Radius"===n&&((o=g.a.omit(H.a.extend(!0,{},i),["Id"])).Criterion.RadiusCriterion.Radius=e.radius,o.Criterion.RadiusCriterion.RadiusUnit=e.unit,o.Criterion.RadiusCriterion.NameTypeCombo=Me.radiusTargetNameTypeComboGenerator(e.radius,e.unit,o.Criterion.RadiusCriterion.Name),te.a.Intermediate.destroy(a,i.Id),te.a.Intermediate.create(a,o))}},{key:"updatePagination",value:function(e){g.a.isUndefined(e)||this.paginationView.ko_model.page_number(0),this.paginationView.ko_model.item_count(this.viewmodel.gridData().length)}},{key:"refreshGridSource",value:function(){this.viewmodel.gridVisible(0!==this.viewmodel.gridData().length),this.grid&&this.grid.gridView&&this.grid.gridView.patch({dataSource:{data:this.viewmodel.gridData()}})}},{key:"render",value:function(){return this.$el.html(me()({i18n:qe})),v.a.applyBindings(this.viewmodel,this.el),this.renderGrid(),this.locationPopupEditor.render(),this.$(".location-popup-editor").append(this.focusLockLocationPopupEditor.render().$el),this}},{key:"mouseOverItem",value:function(e){var t=this.grid.gridView.itemOfElement(e.target);return this.trigger("mouseover:location",t),!1}},{key:"mouseOutItem",value:function(e){var t=this.grid.gridView.itemOfElement(e.target);return this.trigger("mouseout:location",t),!1}},{key:"getRadiusCriterionTitle",value:function(e,t){var i=qe.getString("LocationTargeting_RadiusTarget_Distance",e.Radius,"miles"===e.RadiusUnit.toLowerCase()?qe.getString("Location_Target_RadiusUnit_Mi"):qe.getString("Location_Target_RadiusUnit_Km")),n=g.a.isEmpty(e.Name)?j.getNameForRadiusLocation(e.Latitude,e.Longitude):e.Name,a=qe.getString("LocationTargeting_RadiusTarget_GridTitle",i,n),r=t?we()({linkText:i,ariaLabel:a}):i;return qe.getString("LocationTargeting_RadiusTarget_GridTitle",r,n)}},{key:"getLocationCriterionTitle",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=qe.getString("Location_Target_PopupEditor_CurrentLocation"),a="audience-dashboard"===this.options.scenario?e.Name:qe.getString("LocationTargeting_Column_Within",n,e.Name),r=t?we()({linkText:n,ariaLabel:a}):n;return("audience-dashboard"===this.options.scenario?e.Name:qe.getString("LocationTargeting_Column_Within",r,e.Name))+(Object(je.a)(e)?xe()({text:i.warning}):"")}},{key:"renderGrid",value:function(){var e=this;this.grid=Ve.a.factory({vnext:!0}).use(Be.a).create({tableClasses:["table","table--no-border","grid"],dataSource:{type:"memory",data:this.viewmodel.gridData(),primaryKey:"Id"},rows:{bodyRows:[{type:"data-rows",classes:["location-target-grid__area-row"]}]},columns:[Object(Fe.bingadsGridColumn)({i18n:qe,name:"title",title:this.getLocationTitle(),template:function(t){var i=t.value.Criterion.LocationCriterion||t.value.Criterion.RadiusCriterion,n=W.deprecatedTextMapping[i.LocationStatus]||"",a="tr[data-key='".concat(t.value.Id,"'] .location-map-item .location-cell-status"),r=H()(".location-targets, .location-targets-section, .location-setting-controller, .locations-editor-form, .location-manage"),o="";return o="Radius"===i.Type?e.getRadiusCriterionTitle(i,!0):e.getLocationCriterionTitle(i,!0,n),e.options.isForVNext&&r.on("mouseover",a,function(e){Object(Le.a)(e,n,a,!0)}),r.on("click",a,function(t){Object(Le.a)(t,n,a,e.options.isForVNext)}),ve()({i18n:qe,value:o,selectionStatus:t.value.SelectionStatus,showPinIcon:"audience-dashboard"!==e.options.scenario||e.options.isForVNext,showWarningIcon:Object(je.a)(t.value.Criterion.LocationCriterion),warningText:n.warning})},property:function(e){return e},html:"audience-dashboard"!==this.options.scenario||this.options.isForVNext?"":"<span class=".concat(this.options.type===O.Included?"map-icon__pin--included":"map-icon__pin--excluded","></span><span>").concat(qe.getString(this.getLocationTitle()),"<span>")}),Object(Fe.bingadsGridColumn)({i18n:qe,title:this.viewmodel.removeAllInGridTitleVisible()?"Location_Target_Grid_RemoveColumn":"",name:"remove",template:function(t){var i=t.value.Criterion.LocationCriterion||t.value.Criterion.RadiusCriterion,n="";return n="Radius"===i.Type?e.getRadiusCriterionTitle(i,!1):e.getLocationCriterionTitle(i,!1),n="".concat(qe.getString("LocationTargeting_IncludedRemove")," ").concat(n),ye()({i18n:qe,areaName:n})},property:function(e){return e},headClasses:this.viewmodel.removeAllInGridTitleVisible()?["location-target-grid__removeall-header","text-right"]:["location-target-grid__remove-body"],bodyClasses:["text-right"],html:this.viewmodel.removeAllInGridTitleVisible()?"<a href='javascript:void(0)' role='button' class='clickable'><span>".concat(qe.get("Location_Target_Grid_RemoveColumn"),"</span></a>"):""})],events:{"click .location-target-grid__title-column":function(t){e.locationTitleClicked(t)},"click .location-target-grid__remove-col":function(t){e.removeLocation(t)},"click .location-target-grid__removeall-header":function(t){e.removeLocations(t)},"mouseover tbody":g.a.bind(this.mouseOverItem,this),"mouseout tbody":g.a.bind(this.mouseOutItem,this)},plugins:{pagination:{el:this.$(".pagination_host"),pageSize:5,template:Re.a,enableRandomPage:!1}}}),this.$(".target-grid").html(this.grid.gridView.render().el)}},{key:"getLocationId",value:function(e){return"Location"===e.Criterion.Type?e.Criterion.LocationCriterion.LocationId:e.Criterion.RadiusCriterion.LocationId}},{key:"getLocationName",value:function(e){return"Location"===e.Criterion.Type?e.Criterion.LocationCriterion.Name:e.Criterion.RadiusCriterion.Name}},{key:"getLocationTitle",value:function(){return this.options.type===O.Included?"Location_Target_Grid_TargetedLocationColumn":"Location_Target_Grid_ExcludedLocationColumn"}},{key:"removeLocations",value:function(e){var t=this;e.stopPropagation();var i=g.a.deepClone(M.b(this.resourceName)),n=X.a.sortLocationsByType(i),a=this.options.type===O.Included?n.included:n.excluded;m.a.all(g.a.map(a,function(e){return te.a.Intermediate.destroy(t.resourceName,e.Id)})).then(function(){t.trigger("LocationsListChanged")})}},{key:"removeLocation",value:function(e){var t=this;e.stopPropagation();var i=this.grid.gridView.indexOfElement(e.target),n=this.grid.gridView.itemAt(i),a=g.a.result(n,"Id");if(this.options.onLocationChanged&&this.options.onLocationChanged(n.Criterion["".concat(n.CriterionType,"Criterion")].Name,!0),n&&n.isRecommendedLocation&&this.trigger("remove:recommendedlocation",n),!this.grid.gridView.itemOfElement(e.target)){var r=this.$(".location-target-grid__remove-col"),o=this.grid.gridView.keyOfElement(e.target),s=H()(e.target).closest("tr"),l="Location id is not valid. V3 Log.\n      Location: ".concat(JSON.stringify(n),"\n      Selected row: ").concat(0===s.length?null:s[0].outerHTML,"\n      Index of element: ").concat(i,"\n      Item of element: ").concat(JSON.stringify(this.grid.gridView.itemAt(i)),"\n      Key of element: ").concat(o,"\n      Item with key: ").concat(JSON.stringify(this.grid.gridView.itemWithKey(o)),"\n      Chain data: ").concat(JSON.stringify(this.grid.gridView._chainData),"\n      Number of remove icons: ").concat(r.length,"\n      Count rows: ").concat(this.grid.gridView.countRows,"\n      Total count rows: ").concat(this.grid.gridView.totalCountRows,"\n      Total elements: ").concat(this.grid.gridView.getItemCount(),"\n      Grid items array: ").concat(JSON.stringify(this.grid.gridView.itemArray),"\n      Current URL: ").concat(document.location.href);He.a.logMessage([Ge.a.LOGCATEGORY.TRACE],Ge.a.LOGLEVEL.INFO,"/locationTargetGrid/removeLocation",l)}if(g.a.isString(a)||g.a.isNumber(a))te.a.Intermediate.destroy(this.resourceName,a).then(function(){t.trigger("LocationsListChanged")});else{var c=H()(e.target).closest("tr"),d="Location id is not valid. V3 Log.\n      Location: ".concat(JSON.stringify(n),"\n      Selected row: ").concat(0===c.length?null:c[0].outerHTML,"\n      Index of element: ").concat(i,"\n      Item of element: ").concat(JSON.stringify(this.grid.gridView.itemAt(i)),"\n      Chain data: ").concat(JSON.stringify(this.grid.gridView._chainData),"\n      Count rows: ").concat(this.grid.gridView.countRows,"\n      Grid items array: ").concat(JSON.stringify(this.grid.gridView.itemArray),"\n      Current URL: ").concat(document.location.href);He.a.logError("/locationTargetGrid/removeLocation",d)}this.logActivity("location target grid remove a location")}},{key:"locationTitleClicked",value:function(e){e.stopPropagation();var t=this.grid.gridView.itemOfElement(e.target);if(t){this.viewmodel.selectedLocationId(g.a.result(t,"Id"));var i=this.getLocationName(t);this.locationPopupEditor.setMode(t.Criterion.Type),this.locationPopupEditor.setLocationName(i),this.locationPopupEditor.setRadiusOptionEnable(!0),"Location"===t.Criterion.Type&&(X.a.isRadiusTargetingAllowedForLocationType(t.Criterion.LocationCriterion.LocationType)||this.locationPopupEditor.setRadiusOptionEnable(!1),t.SelectionStatus===O.Excluded&&this.locationPopupEditor.setRadiusOptionEnable(!1)),"Radius"===t.Criterion.Type&&(!g.a.isUndefined(t.Criterion.RadiusCriterion)&&t.Criterion.RadiusCriterion.LocationId?this.locationPopupEditor.setLocationOptionEnable(!0):this.locationPopupEditor.setLocationOptionEnable(!1),this.locationPopupEditor.setRadius(t.Criterion.RadiusCriterion.Radius),this.locationPopupEditor.setRadiusUnit(t.Criterion.RadiusCriterion.RadiusUnit)),this.viewmodel.popupEditorVisible(!0),this.viewmodel.popupEditorTopValue(H()(e.target).position().top),this.viewmodel.popupEditorLeftValue(H()(e.target).position().left),this.focusLockLocationPopupEditor.$('[tabIndex="0"]:first-child').focus()}}},{key:"remove",value:function(){var e;ie.default.off(null,null,this),this.grid&&this.grid.gridView&&(this.grid.gridView.remove(),this.grid.pagination.remove()),this.locationPopupEditor&&(this.focusLockLocationPopupEditor.remove(),this.locationPopupEditor.remove());for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(l.a)(Object(s.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"events",get:function(){return{"click .target-grid-remove-all-locations a":"removeAllLocations"}}},{key:"resourceName",get:function(){return"campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion"}}]),t}(u.a.View),Ke=i("AYHa"),Je=i("Sk7q"),Ze=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/location-targets"),Ye=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this,{deps:{i18n:Ze}}))).selectedItems=v.a.observableArray([]),e.isTargetButtonEnabled=v.a.computed(function(){return g.a.size(e.selectedItems())>0}),e.isRecommendGridVisible=v.a.computed(function(){return g.a.size(e.locationRecommendations())>0}),e.description=v.a.computed(function(){return Ze.getString("Inline_Location_Recommendation_Description",{trafficGain:e.locationTrafficGain(),impressionGain:e.locationImpressionGain()})}),e}return Object(c.a)(t,e),t}(A.BaseLocationRecommendationModel),Qe=i("865U"),Xe=i.n(Qe),et=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/location-targets"),tt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=g.a.defaults({},t,{level:"campaign"}),this.model=new Ye,this.locationRecommendationGrid=new Je.a(g.a.defaults({},t,{deps:{i18n:et},hasPagination:!1,tableClasses:["table table--no-border"],columnOverrider:{Impression:{title:"ColumnName_EstimatedImpressions_Abbrevated"}},columns:["Location","Impression","Dismiss"],selectAllByDefault:!0,gridRemoveAll:this.options.gridRemoveAll})),this.locationRecommendationGrid.on("selectChanged",function(t){return e.model.selectedItems(t)}),this.locationRecommendationGrid.on("dismiss",function(t){e.trigger("dismiss:recommendations",[t])}),this.locationRecommendationGrid.on("mouseover:recommendation",function(t){e.trigger("mouseover:recommendation",t)}),this.locationRecommendationGrid.on("mouseout:recommendation",function(t){e.trigger("mouseout:recommendation",t)}),this.locationRecommendationGrid.on("display:recommendations",function(e){g.a.each(e,function(e){var t=e.OpportunityId,i=e.Campaign,n=void 0===i?{}:i;He.a.logMessage([Ge.a.LOGCATEGORY.TRACE],Ge.a.LOGLEVEL.INFO,"Recommendations",{type:"NewLocationTargetOpportunity",typeId:216,id:t,campaignId:n.Id,isClick:!1,channel:"campaignsetting"})})}),this.options.gridRemoveAll&&this.locationRecommendationGrid.on("removeAllRecommendation",function(){e.trigger("removeAllRecommendation")}),this.on("set:recommendations",function(t){e.model.locationRecommendations(g.a.deepClone(t)),e.locationRecommendationGrid.trigger("update:data",g.a.deepClone(t))})}},{key:"targetRecommendations",value:function(){this.trigger("target:recommendations",this.model.selectedItems()),this.model.selectedItems([])}},{key:"render",value:function(){return this.$el.html(Xe()({i18n:et})),v.a.applyBindings(this.model,this.el),this.locationRecommendationGrid.render(),this.$(".location-recommend-grid-container").append(this.locationRecommendationGrid.el),this}},{key:"events",get:function(){return{"click input.target":"targetRecommendations"}}}]),t}(u.a.View),it=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),nt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.a.defaults(t,{advancedTargetingLinkVisible:!0,searchBoxVisible:!1}),this.options=t,this.viewmodel=new F(t);var i=x.a.get("IsNewUI"),n=g.a.omit(t,"el");this.searchView=new ue(n),this.mapView=new Ke.default(n),this.gridView=new $e({level:n.level,type:O.Included,scenario:this.options.scenario,onLocationChanged:this.options.onLocationChanged,isForVNext:i,lockRegionAriaLabel:it.getString("Location_Target_OpenTargetedLocationPopupEditor"),activityLogger:this.options.activityLogger}),this.excludedGridView=new $e({level:n.level,type:O.Excluded,scenario:this.options.scenario,isForVNext:i,lockRegionAriaLabel:it.getString("Location_Target_OpenExcludedLocationPopupEditor"),activityLogger:this.options.activityLogger});var a=function(t){var i=(t||{}).Id;i&&e.mapView.trigger("entity:highlight",i)},r=function(t){var i=(t||{}).Id;i&&e.mapView.trigger("entity:reset",i)};if(this.gridView.on("mouseover:location",a),this.gridView.on("mouseout:location",r),this.excludedGridView.on("mouseover:location",a),this.excludedGridView.on("mouseout:location",r),this.gridView.on("LocationsListChanged",function(){e.trigger("LocationsListChanged")}),this.searchView.on("LocationsListChanged",function(){e.trigger("LocationsListChanged")}),t.hasLocationRecommendations){this.dismissedLocationRecommendations=[],this.targetedLocationRecommendations=[],this.locationRecommendGrid=new tt({scope:{campaignId:this.options.campaignId},level:n.level,isForVNext:n.isForVNext,gridRemoveAll:i});var o=function(){e.trigger("update:locationRecommendations",g.a.deepClone(e.locationRecommendations)),e.locationRecommendGrid.trigger("set:recommendations",g.a.deepClone(e.locationRecommendations)),e.mapView.updateRecommendedLocations(e.locationRecommendations)},s=function(t){e.locationRecommendations=g.a.reject(e.locationRecommendations,function(e){return!!g.a.findWhere(t,{Id:e.Id})}),o()};this.on("set:locationRecommendations",function(t){var i=t.recommendations,n=t.locationRecommendationsStatus,a=n.dismissedLocationRecommendations,r=void 0===a?[]:a,s=n.targetedLocationRecommendations,l=void 0===s?[]:s;e.originLocationRecommendations=g.a.deepClone(i),e.locationRecommendations=g.a.deepClone(i),e.locationRecommendGrid.trigger("set:recommendations",i),e.dismissedLocationRecommendations=r,e.targetedLocationRecommendations=l,o()});var l=function(t){s(t),g.a.each(t,function(t){return e.mapView._onIncludeMapHandler(t)}),e.targetedLocationRecommendations=e.targetedLocationRecommendations.concat(t)},c=function(t){s(t),e.dismissedLocationRecommendations=e.dismissedLocationRecommendations.concat(t)},d=function(t){e.targetedLocationRecommendations=g.a.reject(e.targetedLocationRecommendations,function(e){return e.Id===t.Id}),e.locationRecommendations.push(t),o()};this.locationRecommendGrid.on("target:recommendations",l),this.locationRecommendGrid.on("dismiss:recommendations",c),this.locationRecommendGrid.on("mouseover:recommendation",a),this.locationRecommendGrid.on("mouseout:recommendation",r),this.locationRecommendGrid.on("removeAllRecommendation",function(){e.dismissedLocationRecommendations=g.a.deepClone(e.originLocationRecommendations),e.targetedLocationRecommendations=[],s(e.originLocationRecommendations)}),this.gridView.on("removeAllLocations",function(){e.dismissedLocationRecommendations=g.a.deepClone(e.originLocationRecommendations),e.targetedLocationRecommendations=[],s(e.originLocationRecommendations)}),this.gridView.on("remove:recommendedlocation",d),this.mapView.on("target:recommendation",function(e){return l([e])}),this.mapView.on("dismiss:recommendation",function(e){return c([e])}),this.mapView.on("remove:recommendedlocation",d)}}},{key:"render",value:function(){return this.$el.html(G()({i18n:it})),v.a.applyBindings(this.viewmodel,this.el),this.searchView.render(),this.$(".location-search").append(this.searchView.el),this.gridView.render(),this.$(".location-target-grid").append(this.gridView.el),this.locationRecommendGrid&&(this.locationRecommendGrid.render(),this.$(".recommend-location-grid").append(this.locationRecommendGrid.el)),this.excludedGridView.render(),this.$(".excluded-location-target-grid").append(this.excludedGridView.el),this.mapView.render(),this.$(".map").append(this.mapView.el),this}},{key:"getValues",value:function(){}},{key:"remove",value:function(){var e;this.searchView.remove(),this.mapView.remove(),this.gridView.remove(),this.excludedGridView&&this.excludedGridView.remove(),this.locationRecommendGrid&&this.locationRecommendGrid.remove();for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(l.a)(Object(s.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"events",get:function(){return{}}}]),t}(u.a.View),at={PeopleIn:"PeopleIn",PeopleSearchingForOrViewingPages:"PeopleSearchingForOrViewingPages",PeopleInOrSearchingForOrViewingPages:"PeopleInOrSearchingForOrViewingPages"},rt=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets");function ot(e){var t=this;this.peopleInLocation=v.a.observable(),this.peopleSearchingForLocation=v.a.observable(),this.peopleInOrSerachingForLocation=v.a.computed(function(){return t.peopleInLocation()&&t.peopleSearchingForLocation()}),this.intentId=e.intentId,this.setIntent=function(e){switch(e){case at.PeopleIn:t.peopleInLocation(!0),t.peopleSearchingForLocation(!1);break;case at.PeopleSearchingForOrViewingPages:t.peopleSearchingForLocation(!0),t.peopleInLocation(!1);break;case at.PeopleInOrSearchingForOrViewingPages:t.peopleInLocation(!0),t.peopleSearchingForLocation(!0)}},this.setIntent(e.physicalIntent),this.validate=function(){return t.peopleInLocation()||t.peopleSearchingForLocation()?(t.intentError(!1),!0):(t.intentError(rt.get("LocationTarget_Intent_NotSelected")),!1)},this.intentError=v.a.observable(!0).extend({validate:[]}),this.logActivity=function(t){e.activityLogger?e.activityLogger.signal(t,e.scenario):He.a.logMessage([Ge.a.LOGCATEGORY.SUBSTRATE],Ge.a.LOGLEVEL.INFO,e.scenario,t)},this.peopleInLocation.subscribe(function(e){t.validate(),t.logActivity("location target physical intent change: peopleInLocation ".concat(e))},this),this.peopleSearchingForLocation.subscribe(function(e){t.validate(),t.logActivity("location target physical intent change: peopleSearchingForLocation ".concat(e))},this)}var st=i("qS/x"),lt=i.n(st),ct=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),dt={PhysicalIntentOn:"pop_BA_CampaignCreate_Settings_PhysicalIntentOn",PhysicalIntentOnly:"pop_BA_CampaignCreate_Settings_PhysicalIntentOnly"},ut=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.viewmodel=new ot(e),this.popupIds=g.a.defaults({},this.options.popupIds,dt),this.on("stuff",this.stuff)}},{key:"render",value:function(){return this.$el.html(lt()({i18n:ct,popupIds:this.popupIds})),v.a.applyBindings(this.viewmodel,this.el),this}},{key:"validate",value:function(){return this.viewmodel.validate()}},{key:"setIntent",value:function(e){this.viewmodel.setIntent(e.Criterion.IntentOption),this.viewmodel.intentId=e.Id}},{key:"getValues",value:function(){var e="";return this.viewmodel.peopleInOrSerachingForLocation()?e=at.PeopleInOrSearchingForOrViewingPages:this.viewmodel.peopleInLocation()?e=at.PeopleIn:this.viewmodel.peopleSearchingForLocation()&&(e=at.PeopleSearchingForOrViewingPages),e?{Id:this.viewmodel.intentId||"",CriterionType:"LocationIntentCriterion",Criterion:{Type:"LocationIntentCriterion",LocationIntentCriterion:{IntentOption:e}}}:{}}}]),t}(u.a.View),pt=i("qqpG"),gt=i("SxtD"),ht=i("b172"),mt=i("8DqV"),ft=i("kLlV"),vt=i("UP37"),bt=i("AXVV"),yt=i("i/gc"),St=i("+PqR");i.d(t,"default",function(){return xt});var wt=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),Ct={Location:"pop_BA_CampaignCreate_Settings_LocationTargeting"},xt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.perfMarker&&(this.perfMarker=t.perfMarker.createChild("Show_Location_Targets"),this.perfMarker.willInit(),this.perfMarkerDone=!1),this.options=g.a.defaults(t,{targetOption:T.a.bundleOrDefaultMarket,physicalIntent:at.PeopleInOrSearchingForOrViewingPages,scenario:"creation-workflow",campaignId:"",adgroupId:"",level:"campaign",campaignLanguage:"English",showPhysicalIntentView:!0,editCriterions:[],showBidMode:!0,fromSettingsGrid:!1,campaign:{},languageSelector:null,showInitialUiBlocker:!0,supportCashbackSettings:!1,currentCampaign:y.a.CurrentCampaign,currentAdGroup:y.a.CurrentAdGroup}),this.supportCashbackSettings=t.supportCashbackSettings&&!y.a.Permissions.IsPersonalizedOffersV3Enabled,this.popupIds=g.a.defaults({},this.options.popupIds,Ct),this.eventDelegator=g.a.result(this.options.deps,"eventDelegator",new k.default),this.singlePageWorkflow="shopping-creation-workflow"===this.options.scenario,this.hasLocationRecommendations="campaign-settings"===t.scenario,this.viewmodel=new D(g.a.defaults({},t,{hasLocationRecommendations:this.hasLocationRecommendations})),this.isForVNext=t.isForVNext;var i=g.a.omit(t,"el");ie.default.off("level:changed"),ie.default.off("location-bid-cell:bidChanged"),ie.default.off("loadBingMap"),ie.default.off("zoomToAll"),this.locationManageView=new nt(g.a.defaults({},i,{hasLocationRecommendations:this.hasLocationRecommendations})),this.physicalIntentView=new ut(i),this.locationTargetBidView=new pt.a(i),this.locationTargetBidView.on("location-target-bid-grid:onDataChange",function(t){t&&(e.singlePageWorkflow||"campaign-settings"===e.options.scenario||"adgroup-settings"===e.options.scenario&&e.viewmodel.useCampaignSettings()||"adgroup-create"===e.options.scenario&&e.viewmodel.useCampaignSettings())&&e.viewmodel.noDataMessage(wt.get("LocationTargeting_TargetEverywhere")),e.viewmodel.gridNoData(t)},this),this.toggleView=new gt.a({toggleText:{on:wt.getString("Toggle_On"),off:wt.getString("Toggle_Off")},labelledbyId:"location-use-campaign-settings"}),this.toggleView.setToggleState("on"),this.options&&this.options.deps&&this.options.deps.onLocationTargetsChange&&"adgroup-settings"===this.options.scenario&&g.a.delay(function(){var t=M.b("CampaignCriterion");e.options.deps.onLocationTargetsChange(t).finally(ae()(e.el))},1e3),this.listenTo(this.toggleView,"change",function(t){var i,n="on"===t;e.viewmodel.useCampaignSettings()!==n&&(e.viewmodel.useCampaignSettings(n),e.options&&e.options.deps&&e.options.deps.onLocationTargetsChange&&(i=n?M.b("CampaignCriterion"):M.b("AdGroupCriterion"),e.options.deps.onLocationTargetsChange(i).finally(ae()(e.el))))},this),this.viewmodel.useCampaignSettings.subscribe(function(e){var t=e?"campaign":"adgroup";ie.default.trigger("level:changed",t)},this),this.viewmodel.bundleLocationCriterions.subscribe(function(){e.trigger("bundleLocationCriterions:changed")},this),this.viewmodel.bidMode.subscribe(function(t){if(t)e.viewmodel.adGroupScenario()?g.a.isEmpty(e.currentLevelLocations)&&e.viewmodel.useCampaignSettings(!0):e.options.showBidMode=!0;else{var i=e.currentLevelLocations;e.setTargetOptions(i)}ie.default.trigger("location-targets:modeChanged",t)},this),ie.default.on("level:changed",function(t){if(e.options.level=t,e.viewmodel.level(t),e.toggleView&&e.toggleView.setToggleState("campaign"===t?"on":"off"),"adgroup"!==t||e.viewmodel.useCampaignSettings())"campaign"===t&&e.viewmodel.useCampaignSettings()&&e.viewmodel.bidMode(!0);else if(e.viewmodel.showAdGroupOverrideInformation(!1),!M.b("AdGroupCriterion").length){e.saveSnapshot(!0);var i=Object(ce.cloneDeep)(M.b("CampaignCriterion"));g.a.map(i,function(e){return e.Campaign=null,delete e.Id,e}),te.a.Intermediate.refresh("AdGroupCriterion",i,{destroyAll:!0}).then(function(){e.setTargetOptions(i),e.viewmodel.bidMode()&&(e.options.showBidMode?e.locationTargetBidView.refresh():(e.viewmodel.bidMode(!1),e.options.showBidMode=!0))})}},this),this.options.showBidMode||this.viewmodel.bidMode(!1),this.viewmodel.updateLanguageBundle(t.campaignLanguage,y.a.CurrentUser.Market,t.targetOption===T.a.everywhere),this.options.languageSelector?this.options.languageSelector.on("selectedLanguages:changed",function(){var t=e.options.languageSelector.getSelectedLanguages();g.a.isEmpty(t)||e.viewmodel.updateLanguageBundle(t,y.a.CurrentUser.Market)}):ie.default.on("language:changed",function(t){e.options.campaignLanguage=t,e.viewmodel.updateLanguageBundle(t,y.a.CurrentUser.Market)},this),this.onTargetOptionChanged(),this.viewmodel.targetOption.subscribe(function(t){e.onTargetOptionChanged(),e.logActivity("target option change: ".concat(t))}),this.on("end:refresh",function(){e.viewmodel.showAdGroupOverrideInformation(e.options.fromSettingsGrid&&"adgroup-settings"===e.options.scenario&&e.viewmodel.useCampaignSettings()),e.viewmodel.showUI(!0),e.perfMarker&&e.perfMarker.done()}),"campaign-settings"===this.options.scenario||"adgroup-create"===this.options.scenario||"adgroup-settings"===this.options.scenario||"smart-shopping-campaign"===this.options.scenario&&this.options.campaignId?(this.perfMarker&&this.perfMarker.willFetchData(),this.perfMarkerDone=!0,this.initialLoadTask=this.refreshLocationData().finally(function(){e.saveSnapshot(),e.trigger("end:refresh")}),this.options.showInitialUiBlocker&&null!=this.initialLoadTask.withUiBlock&&this.initialLoadTask.withUiBlock(this.$el)):this.singlePageWorkflow&&(this.locationTargetBidView.refresh(),this.saveSnapshot()),te.a.Intermediate.subscribeOnAction("CampaignCriterion",["destroy","destroyAll"],function(t,i){e.onEntityDeleted(t,i)}),te.a.Intermediate.subscribeOnAction("AdGroupCriterion",["destroy","destroyAll"],function(t,i){e.onEntityDeleted(t,i)}),te.a.Intermediate.subscribe("CampaignCriterion",function(){e.validate()}),te.a.Intermediate.subscribe("AdGroupCriterion",function(){e.validate()}),this.locationManageView.on("LocationsListChanged",function(){var t=e.currentLevelLocations;e.options&&e.options.deps&&e.options.deps.onLocationTargetsChange&&e.options.deps.onLocationTargetsChange(t).finally(ae()(e.el))}),this.on("locationTargetOptionChanged",function(t){e.options&&e.options.deps&&e.options.deps.onLocationTargetsChange&&e.options.deps.onLocationTargetsChange(t).finally(ae()(e.el))}),this.hasLocationRecommendations&&(this.locationRecommendationsStatus={},Object(mt.getRecommendations)({deps:{httpUtils:vt,odataOptions:{host:y.a.BingAdsAdInsightWebApiUri,oDataToken:y.a.Token,SessionId:g.a.result(x.a.get("Omniture"),"SessionId"),params:{customer_id:w.a.get("advertisercustomer_id"),account_id:w.a.get("account_id")}}},scope:{customerId:w.a.get("advertisercustomer_id"),accountId:w.a.get("account_id"),campaignId:this.options.campaignId},oppType:"NewLocationTargetOpportunity",channel:"campaignsetting",top:5,skip:0}).then(function(t){e.originLocationRecommendations=g.a.deepClone(t.value),e.locationManageView.trigger("set:locationRecommendations",{recommendations:g.a.deepClone(t.value),locationRecommendationsStatus:{}}),e.viewmodel.locationRecommendations(t.value)}),this.locationManageView.on("update:locationRecommendations",function(t){e.viewmodel.locationRecommendations(t)}))}},{key:"toggleCashbackPercentColumns",value:function(e,t){this.supportCashbackSettings=e&&!y.a.Permissions.IsPersonalizedOffersV3Enabled,this.locationTargetBidView.toggleCashbackPercentColumns(e,t)}},{key:"logActivity",value:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,this.options.scenario)}},{key:"onTargetOptionChanged",value:function(){var e=this.viewmodel.targetOption(),t=[];"specific"===e?(t=this.currentLevelLocations,y.a.Permissions.IsBingMapV8Enabled&&ie.default.trigger("loadBingMap")):"bundle"===e&&(t=this.viewmodel.bundleLocationCriterions()),ie.default.trigger("change:locationTargetOption",{locations:t,level:this.options.level}),this.trigger("locationTargetOptionChanged",t)}},{key:"refreshLocationDataForAdGroupSettings",value:function(){var e=this;return m.a.all([ht.load(this.options.campaignId,"",["LocationCriterion","RadiusCriterion","LocationIntentCriterion"]),ht.load(this.options.campaignId,this.options.adgroupId,["LocationCriterion","RadiusCriterion","LocationIntentCriterion"])]).then(function(t){var i=Object(n.a)(t,2),a=i[0],r=i[1];return e.campaignCriterions=a,e.refreshLocationDataFromCampaignAndAdGroup(a,r)}).then(function(){e.viewmodel.bidMode()&&e.locationTargetBidView.refresh()})}},{key:"refreshLocationDataFromCampaignAndAdGroup",value:function(e,t){var i=this,n=0===g.a.filter(t,function(e){return"LocationIntentOption"!==e.Criterion.Type}).length;return n?ie.default.trigger("level:changed","campaign"):this.options.showBidMode=!0,m.a.all([this.setLocationData(e,"campaign",!1,!1),this.setLocationData(t,"adgroup",!0,!0)]).then(function(){i.viewmodel.useCampaignSettings(n)})}},{key:"refreshLocationDataFromOtherAdGroup",value:function(e){var t=this;ht.load(this.options.campaignId,"",["LocationCriterion","RadiusCriterion","LocationIntentCriterion"]).then(function(i){return t.refreshLocationDataFromCampaignAndAdGroup(i,e)}).then(function(){t.viewmodel.bidMode()&&t.locationTargetBidView.refresh()})}},{key:"handleApiErrorsForAdGroupLevel",value:function(e){var t=this;ht.load(this.options.campaignId,e,["LocationCriterion","RadiusCriterion"]).then(function(e){t.setLocationData(e,"adgroup",!1,!1)})}},{key:"handleApiErrorsForCampaignLevel",value:function(){var e=this;return ht.load(this.options.campaignId,"",["LocationCriterion","RadiusCriterion"]).then(function(t){return e.setLocationData(t,"campaign",!1,!1)})}},{key:"refreshLocationData",value:function(){var e=this;return"adgroup-settings"===this.options.scenario?this.refreshLocationDataForAdGroupSettings():this.singlePageWorkflow?new m.a(function(t){e.viewmodel.useCampaignSettings(!0),e.viewmodel.bidMode()&&e.locationTargetBidView.refresh(),t()}):ht.load(this.options.campaignId,this.options.adgroupId,["LocationCriterion","RadiusCriterion","LocationIntentCriterion"]).then(function(t){return m.a.all([e.setLocationData(t,"campaign",!0,!0),e.setLocationData([],"adgroup",!1,!1)])}).then(function(){e.viewmodel.useCampaignSettings(!0),e.viewmodel.bidMode()&&e.locationTargetBidView.refresh()})}},{key:"setCampaignId",value:function(e){this.options.campaignId=e}},{key:"setAdGroupId",value:function(e){this.options.adgroupId=e}},{key:"setLocationData",value:function(e,t,i,n){var a=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?e:g.a.chain(e).filter(function(e){return"Radius"===e.Criterion.Type||"Location"===e.Criterion.Type}).map(function(e){return j.buildLocationCriterionFromBiddableCampaignCriterion(e,t,"campaign"===t?a.options.campaignId:a.options.adgroupId)}).value();if(r=X.a.sortLocationsForEdit(r,this.options.editCriterions),i){var o=g.a.find(e,function(e){return"LocationIntentOption"===e.Criterion.Type});o&&this.physicalIntentView.setIntent(o)}return n&&this.setTargetOptions(r),te.a.Intermediate.refresh("campaign"===t?"CampaignCriterion":"AdGroupCriterion",r,{destroyAll:!0}).then(function(){a.clearDeletedLocationsList(),a.locationTargetBidView.refresh()})}},{key:"setTargetOptions",value:function(e){this.options.showBidMode&&"adgroup-create"!==this.options.scenario&&"adgroup-settings"!==this.options.scenario||"smart-shopping-campaign"===this.options.scenario?this.viewmodel.shouldBundleModeBeSelected(e)?this.viewmodel.targetOption(T.a.bundleOrDefaultMarket):e&&e.length>0?this.viewmodel.targetOption(T.a.specific):this.viewmodel.showEverywhereOption()?this.viewmodel.targetOption(T.a.everywhere):this.viewmodel.targetOption(T.a.bundleOrDefaultMarket):this.viewmodel.targetOption(T.a.specific)}},{key:"isCountryIncluded",value:function(e,t){return!g.a.isUndefined(g.a.find(e,function(e){return"Location"===e.Criterion.Type&&e.Criterion.LocationCriterion.LocationId===t}))}},{key:"clearDeletedLocationsList",value:function(){this.viewmodel.deletedLocations=[]}},{key:"onEntityDeleted",value:function(e,t){var i=this;if("destroy"===e){var n=t;n.Id>0&&(g.a.find(this.viewmodel.deletedLocations,function(e){return Number(e.Id)===Number(n.Id)})||this.viewmodel.deletedLocations.push(n))}else"destroyAll"===e&&g.a.each(t,function(e){e.Id>0&&(g.a.find(i.viewmodel.deletedLocations,function(t){return Number(t.Id)===Number(e.Id)})||i.viewmodel.deletedLocations.push(e))})}},{key:"onTargetEverywhere",value:function(){this.physicalIntentView.viewmodel.setIntent(at.PeopleInOrSearchingForOrViewingPages)}},{key:"changeMode",value:function(){this.validate()&&(this.saveSnapshot(),this.setBidMode(!1),this.logActivity("location target click change mode"))}},{key:"setBidMode",value:function(e){this.viewmodel.bidMode(e),e?this.locationTargetBidView.refresh():ie.default.trigger("zoomToAll")}},{key:"saveSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.snapshot=this.getValues({},{keepAllLocations:!0}),this.snapshot.targetOption=this.viewmodel.targetOption(),this.snapshot.useCampaignSettings=e}},{key:"isSnapShotExisting",value:function(){return!!this.snapshot}},{key:"restoreSnapshot",value:function(){if(!this.snapshot)return He.a.logError("/locationTargets/restoreSnapshot","Restore snapshot without saving first. CurrentURL: ".concat(document.location.href)),m.a.resolve(!1);var e="campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion";if(this.snapshot.useCampaignSettings&&this.viewmodel.useCampaignSettings(!0),this.snapshot.intent){var t=g.a.find(this.snapshot.intent,function(e){return"LocationIntentCriterion"===e.Criterion.Type});t&&this.physicalIntentView.setIntent({Id:t.Id,Criterion:{IntentOption:t.Criterion.LocationIntentCriterion.IntentOption}})}return this.viewmodel.targetOption(this.snapshot.targetOption),this.viewmodel.deletedLocations=this.snapshot.deletedLocations,te.a.Intermediate.refresh(e,this.snapshot.locations,{destroyAll:!1})}},{key:"checkIMAReachAndSave",value:function(){var e=this,t=m.a.resolve(!1);if(!this.validate())return!1;var i=this.getValues({},{keepAllLocations:!0});if(i.locations=g.a.filter(i.locations,function(e){return"Deleted"!==e.Status}),0===i.locations.length&&this.campaignCriterions&&this.campaignCriterions.length>0){var n=Object(ft.c)(this.campaignCriterions);g.a.extend(i,n)}var a=i.locations.concat(i.intent);if(y.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&this.isForVNext&&a.length>0){var r=Object(ft.b)(a),o=this.options.currentCampaign&&this.options.currentCampaign.CampaignType;t=Object(ft.e)({locationsInfo:r,onYes:function(){e.save(),e.trigger("closeLocationEditor")},deliveryChannel:8===o||"Audience"===o?"AIM":"BingAds",campaignId:this.options.campaignId,adGroupId:this.options.adgroupId||null,i18n:wt,aid:y.a.CurrentAccount.Id,cid:y.a.CurrentAccount.AdvertiserCustomerID})}return t.then(function(t){return!t&&e.save()})}},{key:"save",value:function(){var e=this;if(this.logActivity("location target click save"),!this.validate())return!1;if(this.hasLocationRecommendations&&(this.originLocationRecommendations=this.viewmodel.locationRecommendations(),this.locationRecommendationsStatus=g.a.deepClone(this.getLocationRecommendationsStatus())),"adgroup-create"===this.options.scenario){var t=this.getValues({resourceName:"AdGroupCriterion"},{keepAllLocations:!0}).locations;t.length||this.viewmodel.useCampaignSettings(!0);var i=function(){e.viewmodel.deletedLocations=g.a.filter(e.viewmodel.deletedLocations,function(e){return e.Id&&e.Id>0}),e.setBidMode(!0)};return this.checkDeprecatedLocations(t)?(this.showDeprecatedLocationDialog(t,"AdGroupCriterion",i),!1):(te.a.Intermediate.refresh("AdGroupCriterion",t).then(function(){i()}),!1)}if(this.singlePageWorkflow){var n=this.getValues({},{keepAllLocations:!0}).locations;return te.a.Intermediate.refresh("CampaignCriterion",n).then(function(){e.viewmodel.deletedLocations=g.a.filter(e.viewmodel.deletedLocations,function(e){return e.Id&&e.Id>0}),e.setBidMode(!0)}),!1}if(this.viewmodel.bidMode()||"smart-shopping-campaign"===this.options.scenario){var a="campaign"===this.options.level&&"adgroup-create"!==this.options.scenario&&"adgroup-settings"!==this.options.scenario,r=this.getValues({level:a?"campaign":"adgroup"}),o=r.deletedLocations.concat(r.locations).concat(r.intent),s=a?"Campaign":"AdGroup",l=a?this.options.campaignId:this.options.adgroupId,c=a?{Id:this.options.campaignId,CampaignCriterions:o}:{Id:this.options.adgroupId,Campaign:{Id:this.options.campaignId},AdGroupCriterions:o},d=g.a.chain(o).groupBy(function(e,t){return Math.floor(t/1e3)}).toArray().value(),u={reqs:g.a.map(d,function(e){return{Id:l,data:a?g.a.extend({},c,{CampaignCriterions:e}):g.a.extend({},c,{AdGroupCriterions:e})}})},p=this.options.scenario;return te.a[s].update(l,u,{adapter:"bulk",batch:!0,overrideResponse:!0,processResponse:function(e){if(a){var t=g.a.reduce(e,function(e,t){return e.concat(t.CampaignCriterions)},[]);return g.a.extend({},g.a.first(e),{CampaignCriterions:t})}var i=g.a.reduce(e,function(e,t){return e.concat(t.AdGroupCriterions)},[]);return g.a.extend({},g.a.first(e),{AdGroupCriterions:i})}}).then(function(t){e.refreshLocationData().then(function(){e.viewmodel.deletedLocations=[],e.setBidMode(!0)}),"campaign-settings"===p&&e.eventDelegator.trigger("campaignUpdated",{data:[{Id:t.Id}]})}).catch(function(t){e.handleApiErrors(t.errors)}).finally(ae()(this.$el))}var h=this.getValues({},{keepAllLocations:!0}),m="campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion";return this.checkDeprecatedLocations(h.locations)?(this.showDeprecatedLocationDialog(h.locations,m,function(){e.setBidMode(!0)}),!1):te.a.Intermediate.refresh(m,h.locations,{destroyAll:!1}).then(function(){e.setBidMode(!0)})}},{key:"validate",value:function(){var e=g.a.reduce([this.viewmodel.validate(this.resourceName),this.locationTargetBidView.validate(),this.physicalIntentView.validate()],function(e,t){return e&&t},!0);return e||this.logActivity("location target is not valid"),e}},{key:"checkDeprecatedLocations",value:function(e){return e&&e.length&&g.a.some(e,function(e){return e.Criterion&&Object(je.a)(e.Criterion.LocationCriterion)})}},{key:"showDeprecatedLocationDialog",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=new(function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.$el.html("<div>".concat(wt.getString("Location_Target_Deprecate_Alert_Body"),"</div>")),this}}]),t}(u.a.View));this.dialog=(new bt.Dialog).setContent(l).setState({title:wt.getString("Location_Target_Deprecate_Alert_Title"),buttons:[{text:wt.getString("Location_Target_Deprecate_Alert_Remove_Button_Text"),name:"confirm",class:"btn-primary"},{text:wt.getString("Cancel"),name:"cancel"}]}),this.dialog.on("clickedButton",function(a){var r=e;"confirm"===a&&(r=g.a.reject(e,function(e){return Object(je.a)(e.Criterion.LocationCriterion)})),i.dialog.remove(),i.dialog=null,te.a.Intermediate.refresh(t,r,{destroyAll:!1}).then(function(){g.a.isFunction(n)&&n()})}),this.dialog.$el.appendTo(document.body),this.dialog.show(),this.dialog.$(".modal").addClass("deprecated-location-remove-dialog")}},{key:"resotreLocationRecommendations",value:function(){this.hasLocationRecommendations&&(this.viewmodel.locationRecommendations(this.originLocationRecommendations),this.locationManageView.trigger("set:locationRecommendations",{recommendations:g.a.deepClone(this.originLocationRecommendations),locationRecommendationsStatus:this.locationRecommendationsStatus}))}},{key:"cancel",value:function(){var e=this;this.logActivity("location target click cancel"),this.restoreSnapshot().then(function(){e.viewmodel.bidMode(!0),e.resotreLocationRecommendations()})}},{key:"reloadLocationView",value:function(e){if(y.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&this.isForVNext&&this.options.deps.isAudienceCreationWorkflow){var t=this.$(".ima-reach-warning-container").get(0),i=this.options.adgroupId;"creation-workflow"!==this.options.scenario||i||(i=1),t&&Object(ft.f)({containerDOM:t,adGroupId:i?Number(i):null,i18n:wt,audienceAssociations:e})}}},{key:"render",value:function(){return this.perfMarker&&this.perfMarker.willRender(),this.isForVNext?this.$el.html(B()({i18n:wt,popupIds:this.popupIds,hasLocationRecommendations:this.hasLocationRecommendations,uuid:Ie.a})):this.$el.html(N()({i18n:wt,popupIds:this.popupIds,hasLocationRecommendations:this.hasLocationRecommendations,uuid:Ie.a})),v.a.applyBindings(this.viewmodel,this.el),this.toggleView.render(),this.$(".toggle-campaign-settings-switch").append(this.toggleView.el),this.locationManageView.render(),this.$(".location-manage").append(this.locationManageView.el),this.options.showPhysicalIntentView&&(this.physicalIntentView.render(),this.$(".location-target-physical-intent").append(this.physicalIntentView.el)),this.locationTargetBidView.render(),this.$(".location-target-bid-container").append(this.locationTargetBidView.el),y.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&this.isForVNext&&("campaign-settings"===this.options.scenario||"adgroup-settings"===this.options.scenario)&&Object(ft.f)({containerDOM:this.$(".ima-reach-warning-container").get(0),campaignId:this.options.campaignId,adGroupId:this.options.adgroupId||null,i18n:wt,aid:y.a.CurrentAccount.Id,cid:y.a.CurrentAccount.AdvertiserCustomerID}),this.perfMarker&&!this.perfMarkerDone&&(this.perfMarkerDone=!0,this.perfMarker.done()),this}},{key:"populateLocationParentIds",value:function(e){var t=[],i="campaign"===this.options.level&&"adgroup-create"!==this.options.scenario&&"adgroup-settings"!==this.options.scenario?{Campaign:{Id:this.options.campaignId}}:{AdGroup:{Id:this.options.adgroupId}};return g.a.each(e,function(e){var n=g.a.extendOwn({},e);n.Id<0&&(n=g.a.omit(n,"Id")),g.a.extendOwn(n,i),t.push(n)}),t}},{key:"getValues",value:function(e,t){var i=this,n=e&&e.resourceName||this.resourceName,a=e&&e.level||this.options.level,r=t&&t.campaignName||"",o=t&&t.adgroupName||"",s=t&&t.campaignId||"",l=t&&t.adgroupId||"",c=t&&t.populateParentField,d=t&&t.removeNegativeId,u=t&&t.keepAllLocations;if("adgroup-create"===this.options.scenario&&this.viewmodel.useCampaignSettings())return{intent:[],locations:[],deletedLocations:[]};var p=[],h=[],m=[],f=[];if("specific"===this.viewmodel.targetOption())p=g.a.deepClone(M.b(n));else if("bundle"===this.viewmodel.targetOption()){var v=g.a.deepClone(M.b(n));g.a.each(this.viewmodel.bundleLocationCriterions(),function(e){var t=g.a.find(v,function(t){return"Location"===t.Criterion.Type&&t.Criterion.LocationCriterion.LocationId===e.Criterion.LocationCriterion.LocationId});t?h.push(t):h.push(e)}),g.a.each(v,function(e){e.Id>0&&(g.a.find(i.viewmodel.bundleLocationCriterions(),function(t){return"Location"===e.Criterion.Type&&e.Criterion.LocationCriterion.LocationId===t.Criterion.LocationCriterion.LocationId})||m.push(g.a.extendOwn(e,{})))}),p=h}else if("everywhere"===this.viewmodel.targetOption()){var b=g.a.deepClone(M.b(n));g.a.each(b,function(e){f.push(g.a.extendOwn(e,{}))})}var y="campaign"===a?"Campaign":"AdGroup",S="campaign"===a?this.options.campaignId:this.options.adgroupId;p=g.a.map(p,function(e){var t=e;return"Radius"===t.Criterion.Type?(t.CriterionType=t.Criterion.Type,t.Criterion.RadiusCriterion.IsOriginalNameEmpty&&(t.Criterion.RadiusCriterion.Name=null)):t.CriterionType=t.SelectionStatus===O.Included?"Location":"NegativeLocation",t.Id<0&&(t=g.a.omit(t,"Id")),(t=g.a.omit(t,["Campaign","AdGroup"]))[y]={Id:S},t});var w=this.physicalIntentView.getValues();g.a.isEmpty(w)||((w=g.a.omit(w,["Campaign","AdGroup"]))[y]={Id:S}),"adgroup-settings"===this.options.scenario&&this.viewmodel.useCampaignSettings()&&(p=g.a.chain(p).filter(function(e){return e.Id>0}).map(function(e){return g.a.extendOwn(e,{Status:"Deleted"})}).value(),g.a.isEmpty(w)||(w.Criterion.LocationIntentCriterion.IntentOption=at.PeopleInOrSearchingForOrViewingPages));var C=g.a.filter(this.viewmodel.deletedLocations.concat(m).concat(f),function(e){return e.Id&&e.Id>0}),x=this.populateLocationParentIds(C);return g.a.each(x,function(e){e.Status="Deleted","Radius"===e.Criterion.Type&&e.Criterion.RadiusCriterion.IsOriginalNameEmpty&&(e.Criterion.RadiusCriterion.Name=null)}),"adgroup-create"===this.options.scenario&&(p=g.a.map(p,function(e){var t=e.Id>0?["Campaign"]:["Campaign","Id"];return g.a.omit(g.a.extend(e,{CampaignName:r,AdGroupName:o}),t)}),g.a.isEmpty(w)||(w=g.a.omit(g.a.extend(w,{CampaignName:r,AdGroupName:o}),["Campaign","Id"]))),c&&(p=g.a.map(p,function(e){return i.populateParentField(e,a,s,r,l,o,d)}),x=g.a.map(x,function(e){return i.populateParentField(e,a,s,r,l,o,d)}),g.a.isEmpty(w)||(w=this.populateParentField(w,a,s,r,l,o,d))),u||(p=this.filterUnchangedLocations(p,a)),{intent:g.a.isEmpty(w)?[]:[w],locations:p,deletedLocations:x}}},{key:"isBundleLocationSelected",value:function(e){return"bundle"===this.viewmodel.targetOption()||"specific"===this.viewmodel.targetOption()&&this.viewmodel.shouldBundleModeBeSelected(e)}},{key:"getLanguageBundleString",value:function(){return this.viewmodel.languageBundleString()}},{key:"getLocationRecommendationsStatus",value:function(){return this.hasLocationRecommendations?{dismissedLocationRecommendations:this.locationManageView.dismissedLocationRecommendations,targetedLocationRecommendations:this.locationManageView.targetedLocationRecommendations}:{}}},{key:"filterUnchangedLocations",value:function(e,t){var i=this;return g.a.filter(e,function(e){if(!e.Id||e.Id<0)return!0;if("Deleted"===e.Status)return!0;var t=e.Criterion.BidAdjustment!==e.Criterion.OriginalBidAdjustment,n=!!i.supportCashbackSettings&&Object(yt.getRealCashbackPercentValue)(e.Criterion.CashbackPercent,St)!==Object(yt.getRealCashbackPercentValue)(e.Criterion.OriginalCashbackPercent,St);return t||n})}},{key:"populateParentField",value:function(e,t,i,n,a,r,o){var s={},l="campaign"===t?"Campaign":"AdGroup",c="campaign"===t?n:r,d="campaign"===t?"CampaignName":"AdGroupName",u="campaign"===t?i:a;s=g.a.omit(e,[l]),o&&s.Id<0&&(s=g.a.omit(s,"Id"));var p={};return u?p[l]={Id:u}:p[d]=c,s=g.a.extend(s,p)}},{key:"handleApiErrors",value:function(e){if(e.length){var t=Object(P.getBulkApiErrors)(e);this.viewmodel.errors.add(t)}}},{key:"clearAllErrors",value:function(){this.viewmodel.errors.clear()}},{key:"remove",value:function(){var e;this.off(),ie.default.off(null,null,this),te.a.Intermediate.clearSubscribers("CampaignCriterion"),te.a.Intermediate.clearSubscribers("AdGroupCriterion"),te.a.Intermediate.clearSubscribers("Location"),this.locationManageView.remove(),this.locationTargetBidView.remove(),this.physicalIntentView.remove(),this.toggleView&&this.toggleView.remove();for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(l.a)(Object(s.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"currentLevelLocations",get:function(){return g.a.deepClone(M.b("campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion"))}},{key:"resourceName",get:function(){return"adgroup-settings"===this.options.scenario?"AdGroupCriterion":"CampaignCriterion"}},{key:"bundleLocations",get:function(){return this.viewmodel.bundleLocations}},{key:"events",get:function(){return{"click .change-mode-link":this.changeMode,"click button.location-target-done":this.save,"click button.location-target-cancel":this.cancel,"click .target-every-where":this.onTargetEverywhere,"click .view-location-recommendations":this.changeMode}}}]),t}(u.a.View)},ImwW:function(e,t,i){"use strict";i.r(t);var n=i("nlAS"),a=i.n(n),r=i("1gQY"),o=i.n(r),s=i("suma"),l=i("nN5v"),c=i("ePzV"),d=i("23d6"),u=i("Pb1Y"),p=i("Vwpy"),g=i("muKe"),h=i("Svh1"),m=i.n(h);i.d(t,"ExperimentBudgetAlert",function(){return f});var f=function(e){var t=e.i18n,i=e.jsdata,n=e.appState,a=e.legacyRouter;return function(e){function r(){return Object(l.a)(this,r),Object(d.a)(this,Object(u.a)(r).apply(this,arguments))}return Object(p.a)(r,e),Object(c.a)(r,[{key:"initialize",value:function(e){var a=this,r=e.experimentId,o=e.campaignId;this.i18n=t,this.appState=n,r?(this.setState({isLoading:!0}),i.Experiment.find(r,{bypassCache:!1,cacheResponse:!0}).then(function(e){a.setState({isLoading:!1,baseCampaign:{Id:e.BaseCampaignId,Name:e.BaseCampaignName}})})):o&&this.setState({campaignId:o})}},{key:"template",get:function(){return m.a}},{key:"events",get:function(){var e=this;return{"click .base-campaign-settings-link":function(){return a.navigateToRoute("campaign_edit",{campaign_id:e.getState().baseCampaign.Id})},"click .all-experiments-link":function(){return a.navigateToRoute("campaign_experiments",{campaign_id:e.getState().campaignId})}}}}]),r}(g.DeterministicView)}({i18n:window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/experiments-tab"),jsdata:a.a,appState:o.a,legacyRouter:s.legacyRouter})},IvCx:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("kwR5"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("7XbR"),h=i.n(g),m=i("5iHu"),f=i.n(m),v=function(){function e(t){var i=this;Object(n.a)(this,e);var a=d.a.isNumber(t.defaultOption)?t.defaultOption:0;this.options=t,this.dropDownOptions=t.dropDownOptions,d.a.each(this.dropDownOptions,function(e){e.menuItemId=d.a.isUndefined(e.menuItemId)?null:e.menuItemId,e.disabled=!!e.disabled}),this.selectedItem=h.a.observable(this.getItemById(a)),this.htmlContent=h.a.observable(),this.showDiff=h.a.observable(),d.a.bindAll(this,"selectItem","triggerShowDifference"),this.selectedItem.subscribe(function(e){i.options.onDropDownChanged(e,i.options.el)}),this.showDiff.subscribe(function(){i.triggerShowDifference()}),this.selectItem(this.getItemById(a))}return Object(a.a)(e,[{key:"triggerShowDifference",value:function(){if(this.showDiff()){var e=this.options.onPopEnabled(this.selectedItem());this.htmlContent(e)}}},{key:"selectItem",value:function(e){e&&!e.disabled&&(this.selectedItem(e),this.showDiff()?this.htmlContent(this.options.onPopEnabled(this.selectedItem())):this.htmlContent(""))}},{key:"getItemById",value:function(e){if(d.a.isUndefined(e)||d.a.isNull(e))return this.dropDownOptions[0];var t=this.dropDownOptions;return f.a.grep(t,function(t){return t.id===e})[0]}}]),e}(),b=i("qBoJ"),y=i.n(b);i.d(t,"a",function(){return S});var S=function(e){function t(e){var i;return Object(n.a)(this,t),i=Object(r.a)(this,Object(o.a)(t).call(this,e)),d.a.bindAll(Object(l.a)(Object(l.a)(i)),"render","selectedItem"),i.render(),i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){this.$el.html(y()()),this.koModel=new v(this.options),h.a.applyBindings(this.koModel,this.el)}},{key:"selectItemById",value:function(e){var t=this.koModel.dropDownOptions,i=f.a.grep(t,function(t){return t.id===e});this.koModel.selectItem(i[0])}},{key:"selectItemByIndex",value:function(e){this.koModel.selectItem(this.koModel.dropDownOptions[e])}},{key:"selectedItem",value:function(){return this.koModel.selectedItem()}}]),t}(p.a.View)},"Jb+r":function(e,t,i){e.exports={set:"Set",findReplace:"FindReplace",append:"Append",prepend:"Prepend",toTitleCase:"ToTitleCase",toLowerCase:"ToLowerCase",toSentenceCase:"ToSentenceCase"}},Jb0L:function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("5iHu"),o=i.n(r),s=i("f2GW"),l=i("0m79"),c="button-chart-toggle";t.a=function(e){return e("inlineChart",["gridView","config","toolbar","filterState","filter","dateFilter"],function(e,t,i,n,r,d){var u=a.a.result(t.plugins,"inlineChart",{});if(!u.chartContainer)throw new Error("charContainer not found.");o()("#nav-tab-bi").hide();var p={};if(u.isNewInlineChart)u.ignoreFilter||(u.filter=n.getAllFilters()),p=new l.a(u).render();else{var g={isUsingVnextGrid:!0,tab:u.tab,entityType:u.entityType,hideChartToolbar:u.hideChartToolbar};u.ignoreFilter||(g.filter=n.getAllFilters()),p=new s.a(g)}u.toggleInToolbar&&i.gridToolbarGroup.toolbarWithItem(c).update({type:"button",id:c,classes:["btn","chart-icon"],onClick:function(){u.isNewInlineChart?p.toggleView():p.inlineChartViewModel.onShowChartButtonClick()}});if(u.ignoreFilter||(u.isNewInlineChart?n.on("filterUpdated",p.filterUpdated):n.on("filterUpdated",p._onGridPageLoadingNewGrid)),e.on("didUpdate",function t(){var i=a.a.isUndefined(u.viewRoot)?o()(u.chartContainer):u.viewRoot.$(u.chartContainer);1===i.length&&(i.append(p.$el),e.off("didUpdate",t))}),a.a.isUndefined(u.isNewInlineChart)&&(p.inlineChartViewModel.hideToolbar(Boolean(u.hideChartToolbar)),d.events.on("dateChange",function(){p._onGridPageLoadingNewGrid(u.ignoreFilter?null:n.getAllFilters())})),u.isNewInlineChart){var h=function(){var e=o()(".campaignContentContainer section.page-title");if(e&&e.length>0){var t=o()(".campaign-inline-chart"),i=e.width()+parseFloat(e.css("marginLeft"))+parseFloat(e.css("marginRight"))+parseFloat(e.css("paddingLeft"))+parseFloat(e.css("paddingRight"))+parseFloat(e.css("border-left-width"))+parseFloat(e.css("border-right-width"))-20;return t&&t.length>0&&t.width(i),i}return 0};p.resizeChart(h());var m=a.a.debounce(function(){p.resizeChart(h())},50);window.addEventListener("resize",m,!1)}return p})}},"Jl/D":function(e,t,i){"use strict";i.d(t,"e",function(){return m}),i.d(t,"b",function(){return b}),i.d(t,"a",function(){return y}),i.d(t,"d",function(){return S}),i.d(t,"c",function(){return w});var n=i("UT4o"),a=i.n(n),r=i("1gQY"),o=i.n(r),s=i("nlAS"),l=i.n(s),c=i("UgQD"),d=i.n(c),u=i("fE/Z"),p=i("eiR/"),g=i("YKsG"),h=i("DXRr");function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(p.queryify)("/Campaign/NewCampaign/GetProductScope",{aid:o.a.get("account_id"),cid:o.a.get("customer_id"),uid:o.a.get("user_id")});e&&(t="".concat(t,"&storeTypes=placeholder"));var i={url:t,adapter:"legacy",bypassCache:e,cacheResponse:!e};return l.a.Product.find("MetaData",i).then(function(e){return a.a.extend({},e,{ProductCollectionAccounts:e.ProductCollectionAccounts.filter(function(e){return!e.IsCoOpStore})})})}var f="Ad group #1";function v(e,t){var i=[];e.adScheduleModel&&(i=e.adScheduleModel.dayTimeRanges);var n=[],r=[];e.locationTargets&&(n=e.locationTargets.locations,r=e.locationTargets.deletedLocations);var o=i;return(o=o.concat(n).concat(r).map(function(e){return a.a.extend({},e,{CampaignName:t})})).sort(function(e,t){return"Delete"===t.Status?1:-1})}function b(e){var t=e.model,i=e.campaignId,n=void 0===i?null:i,r=e.adgroupId,o=void 0===r?null:r,s=d.a.getAccountTimeZone(),c=t.campaignTargeting.adScheduleModel.adScheduleUseSearcherTimeZone,u=t.campaignSetting.Name,p=v(t.campaignTargeting,u),m=t.campaignTargeting&&t.campaignTargeting.adScheduleModel?t.campaignTargeting.adScheduleModel.startDate:null,b=t.campaignTargeting&&t.campaignTargeting.adScheduleModel?t.campaignTargeting.adScheduleModel.endDate:null,y=a.a.extend({},t.campaignSetting,t.shoppingSetting,{AdScheduleUseSearcherTimeZone:c,CampaignCriterions:p,TimeZone:s,CampaignType:"Shopping",CampaignSubType:"ShoppingSmartAds",Priority:"Highest",Languages:["All"]});y=a.a.omit(y,["BudgetId"]);var S=function(e){var t=e.campaignName,i=e.adgroupId,n=e.campaignId,a=e.startDate,r=e.endDate;return{Campaign:{Id:n},Id:i,SearchBid:null==i?Object(g.defaultBidForShoppingCampaign)():null,CampaignName:t,Name:f,Status:"Active",StartDate:a,EndDate:r}}({campaignName:u,adgroupId:o,campaignId:n,startDate:m,endDate:b});return y=a.a.extend({},y,{AdGroups:[S],ProductAds:[function(e){return{CampaignName:e,AdGroupName:f,PromotionalText:""}}(u)],ProductPartitions:[function(e){return{BidAmount:Object(g.defaultBidForShoppingCampaign)(),ProductCondition:"All",ProductValue:"",CampaignName:e,AdGroupName:f,IsExcluded:!1,IsLeaf:"Unit",Status:"Paused"}}(u)],Id:n}),null!=o&&(y=a.a.omit(y,["ProductAds","ProductPartitions"])),l.a.ShoppingCampaign.create(y,{adapter:"bulk",cacheResponse:!1}).then(function(e){return{campaignId:e.Id,adgroupId:e.AdGroups&&e.AdGroups.length?e.AdGroups[0].Id:"",createdCampaign:e,campaignName:e.Name}}).catch(function(e){throw h.getPartial(e,["AdGroups","CampaignProductScope","CampaignCriterions"],"newcampaign"),e})}function y(e){var t=e.campaignId,i=e.model,n=(i.adScheduleModel||{}).adScheduleUseSearcherTimeZone,r=a.a.omit(a.a.extend({},i,{CampaignType:"Shopping",CampaignSubType:"ShoppingSmartAds",Priority:"Highest",Languages:["All"],Id:t,AdScheduleUseSearcherTimeZone:n}),["locationTargets","adScheduleModel"]),o=v(i,r.Name);return r.CampaignCriterions=o,l.a.ShoppingCampaign.create(r,{adapter:"bulk",cacheResponse:!1}).catch(function(e){throw h.getPartial(e,["AdGroups","CampaignProductScope","CampaignCriterions"],"newcampaign"),e})}function S(e){var t={queryParameters:{entitySet:u.default.currentAccount.Campaigns,expand:["Budget"]},bypassCache:!0};return l.a.Campaign.find(e,t)}function w(e){return l.a.AdGroup.create({Name:f,Campaign:{Id:e.Id},SearchBid:Object(g.defaultBidForShoppingCampaign)(),Status:"Active",ProductAds:[{CampaignName:e.Name?e.Name:e.name,AdGroupName:f,PromotionalText:""}]},{adapter:"bulk",cacheResponse:!1})}},Jqi9:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){var o=[];e&&o.push(e),"integer"==a||"number"==a?o.push("grid-cell-number"):o.push("grid-cell-text"),o=o.join(" "),i=i+"<div"+n.attr("class",n.classes([o],[!0]),!1,!0)+">"+n.escape(null==(t=r)?"":t)+"</div>"}.call(this,"className"in a?a.className:"undefined"!==typeof className?className:void 0,"type"in a?a.type:"undefined"!==typeof type?type:void 0,"value"in a?a.value:"undefined"!==typeof value?value:void 0),i}},Jvlg:function(e,t,i){"use strict";i.d(t,"a",function(){return m});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("eRoi"),u=i("adHW"),p=i("N/2k"),g=i.n(p),h=window.globalLegacyI18n.get("$/schema-i18n!campaign"),m=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).BidOption;return this.form=new u.SimpleForm({schema:{name:"CoOpSetting",type:"object",properties:{BidOption:{type:"string",enum:["BidValue","BidBoost"],helpId:"pop_BA_CampaignCreate_Settings_AdGroupType"}}},fields:[{property:"BidOption",control:c.a.isEmpty(t)?"radios":"static"}],model:{BidOption:t},s$i18n:h,showButtons:!1,template:g.a}),this.form.on("change:BidOption",function(t){e.trigger("change:BidOption",t)},this),this.form.on("clickHelpIcon",function(e){window.PopupController.PopupJsClick(e.target)}),this.form}},{key:"isValid",value:function(){return this.form.validate()}},{key:"getState",value:function(){return c.a.pick(this.form.currentModel(),"BidOption")}},{key:"className",get:function(){return"adgroup-bid-type-view"}}]),t}(d.DeterministicWrapperView)},"K+MZ":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var n=i("UT4o"),a=i.n(n),r=i("5iHu"),o=i.n(r),s=i("Oro1"),l=i("AUXl"),c=i.n(l);function d(e,t,i){s.show(a.a.extend({},{positioningMethod:"fixed",positioningOptions:{location:"right",positionAttribute:"fixed"},classes:a.a.compact(["popup-location-status","popover","right"]),template:function(){return c()({statusTexts:t})}},{container:o()(i),anchor:o()(e.target)})),a.a.defer(function(){o()(".popup__contents .arrow").length||o()(".popup__contents").append(o()('<div class="arrow"></div>'))})}},KQWZ:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="pager">\x3c!-- ko if: features.pageSizeSelector === true --\x3e<div class="pager-sizeselector" data-bind="visible: features.pageSizeSelector === true"><span>'+n.escape(null==(t=e.getString("Grid_ShowRows"))?"":t)+'</span><select data-bind="options: pageSizes, value: pageSize"'+n.attr("aria-label",e.getString("Grid_ShowRows"),!0,!0)+'></select></div>\x3c!-- /ko --\x3e\n\x3c!-- ko if: pageCount() > 1 --\x3e<div class="pager-page"><div class="spritedimage clickable" data-bind="click: prevPage, css:{&quot;pager-previous&quot;: !isFirstPage(), &quot;pager-previous-disabled&quot;: isFirstPage()}, attr:{&quot;tabindex&quot;: isFirstPage() ? &quot;-1&quot; : &quot;0&quot;}" role="button"'+n.attr("aria-label",e.getString("Component_Pagination_PreviousPage"),!0,!0)+"></div>"+n.escape(null==(t=e.getString("Grid_Page")+":")?"":t)+'\x3c!-- ko if: (enablePageJump === true) && (features.usePageInput !== true) --\x3e<select class="pager-input" data-bind="options: pages, value: currentPage"'+n.attr("aria-label",e.getString("Grid_Page"),!0,!0)+'></select>\x3c!-- /ko --\x3e\n\x3c!-- ko if: (enablePageJump !== true) || (features.usePageInput === true) --\x3e<input class="grid-pager-input" data-bind="value: currentPage, enable: enablePageJump, event: { keypress: onKeyPress }" type="text">\x3c!-- /ko --\x3e'+n.escape(null==(t=e.getString("Grid_PageOf"))?"":t)+'<span class="pager-totalCount" data-bind="text:pageCount"></span><div class="spritedimage clickable" data-bind="click: nextPage, css:{&quot;pager-next&quot;: !isLastPage(), &quot;pager-next-disabled&quot;: isLastPage()}, attr:{&quot;tabindex&quot;: isLastPage() ? &quot;-1&quot; : &quot;0&quot;}" role="button"'+n.attr("aria-label",e.getString("Component_Pagination_NextPage"),!0,!0)+"></div></div>\x3c!-- /ko --\x3e</div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},Ktte:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i+='<ul class="dropdown-search-selector__options">',e.options.length>0?function(){var t=e.options;if("number"==typeof t.length)for(var a=0,r=t.length;a<r;a++){var o=t[a];i=i+"<div"+n.attr("data-ref","option-"+o.id,!0,!0)+"></div>"}else for(var a in r=0,t)r++,o=t[a],i=i+"<div"+n.attr("data-ref","option-"+o.id,!0,!0)+"></div>"}.call(this):i=i+'<div class="empty-result-message">'+n.escape(null==(t=a.nodataPlaceholder)?"":t)+"</div>",i+="</ul>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},"LQ/w":function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("7XbR"),i("YK3D"),i("NLLx"),i("Vgl9"),i("nlAS"),i("f35g"),i("BavY"),i("GHnE")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c){"use strict";var d=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),u=s.getBudgetSuggestion,p=l.logBudgetView,g=c.weekly2MonthlyInt;function h(t){return e.reduce(function(t){return e.map(t,g)}(t),function(e,t){return e+t},0)}return t.View.extend({initialize:function(t){t=t||{},this.options=t,this.ko_model=new r({budget:this.model,accountCurrencyCode:n.AccountCurrencyCode,activityLogger:this.options.activityLogger}),this.initBudget=t.initBudget,this.haveBudgetSuggestion=t.haveBudgetSuggestion,this.languages=t.languages,this.campaignId=t.campaignId,this.activity=t.activity,this.isForVNext=t.isForVNext,this.isDailyStandardName=e.uniqueId("isDailyStandard_")},events:{"click .expander-dailyType":"toggleDailyType","click .use-suggested-budget":"useSuggestedBudget","change input.budget-amount":"budgetChanged"},render:function(){return this.$el.html(a({i18n:d,accountCurrencyCode:n.AccountCurrencyCode,isForVNext:this.isForVNext,isDailyStandardName:this.isDailyStandardName})),this.ko_model.dailyBudget.subscribe(function(e){this.ko_model.budgetInvalid()||this.trigger("budget.updated",e)}.bind(this)),i.applyBindings(this.ko_model,this.el),this},validate:function(){var t=e.isEmpty(this.ko_model.budgetError()),i=this.ko_model.validate()&&t;return i||this.options.activityLogger&&this.options.activityLogger.signal("budget is not valid","budget"),i},update:function(e){this.ko_model.update(e)},toggleDailyType:function(){this.ko_model.isDailyBudgetExpanded(!this.ko_model.isDailyBudgetExpanded()),this.$("#AdvancedBudgetOptions").toggleClass("displayNone")},useSuggestedBudget:function(){this.ko_model.useSuggestedBudget()},budgetChanged:function(){this.options.activityLogger&&this.options.activityLogger.signal("budget change","budget")},getValues:function(){return this.ko_model.toObject()},enough:function(){return this.ko_model.enough()},getSuggestedBudget:function(){return this.ko_model.suggestedBudget()},updateSuggestedBudget:function(e,t){var i=this;t=!!t,this.validate()?this.haveBudgetSuggestion&&e.length>0&&!(t&&i.ko_model.Amount()>=i.ko_model.suggestedBudget())&&u({locations:o.Intermediate.getAll("CampaignCriterion"),adGroup:e,budget:this.ko_model.dailyBudget(),initBudget:this.initBudget,languages:this.languages},{onSuccess:function(e){if(e&&e.value&&e.value.length){var t=h(e.value[0].EstimatedAdGroupClicksAsSuggestedBudget),n=h(e.value[0].EstimatedAdGroupClicksAsCurrentBudget),a=e.value[0].EstimatedAmountAsSuggestedBudget,r=t-n,o=Math.ceil(a.Amount);i.ko_model.updateSuggestedBudget(o,r),i.ko_model.showSuggestedBudget()&&p({Id:i.campaignId,suggestedBudget:i.ko_model.suggestedBudget(),initBudget:i.initBudget,budget:i.ko_model.dailyBudget()},i.activity)}else i.ko_model.updateSuggestedBudget(0,0)},onRequestError:function(){i.ko_model.updateSuggestedBudget(0,0)}},{}):i.ko_model.updateSuggestedBudget(0,0)}})}.apply(t,n))||(e.exports=a)},LQKM:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){r?i=i+'<span class="statusExcluded_icon"></span><span class="targeting-status">'+n.escape(null==(t=e)?"":t)+"</span>":o&&(i=i+'<span class="statusEnabled_icon"></span><span class="targeting-status">'+n.escape(null==(t=a)?"":t)+"</span>")}.call(this,"excludedString"in a?a.excludedString:"undefined"!==typeof excludedString?excludedString:void 0,"includedString"in a?a.includedString:"undefined"!==typeof includedString?includedString:void 0,"isExcluded"in a?a.isExcluded:"undefined"!==typeof isExcluded?isExcluded:void 0,"isIncluded"in a?a.isIncluded:"undefined"!==typeof isIncluded?isIncluded:void 0),i}},LWtK:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<a class="location-target-grid__title-column clickable" tabindex="0" href="javascript:void(0);" role="button"'+n.attr("aria-label",e,!0,!0)+">"+n.escape(null==(t=a)?"":t)+"</a>"}.call(this,"ariaLabel"in a?a.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"linkText"in a?a.linkText:"undefined"!==typeof linkText?linkText:void 0),i}},Lk9k:function(e,t,i){var n,a;n=[i("5iHu"),i("r3sL")],void 0===(a=function(e,t){"use strict";return t.extend({defaults:e.extend({},t.prototype.defaults,{Entity:"",BatchAction:{Actions:[{"@odata.type":"#Model.TextAction",Property:"TrackingUrlTemplate",ActionType:"Set",Value:"",SearchString:"",Options:"None"}]}})})}.apply(t,n))||(e.exports=a)},"LrQ+":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("YK3D"),m=i.n(h),f=i("LQ/w"),v=i.n(f),b=i("crxU"),y=i.n(b),S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Amount:"",isEditing:!1,AccountCurrencyCode:""};Object(n.a)(this,e),this.amount=g.a.observable(t.Amount),this.accountCurrencyCode=t.AccountCurrencyCode,this.isEditing=g.a.observable(t.isEditing)},w=i("+PqR"),C=i.n(w);i.d(t,"default",function(){return k});var x=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),k=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;t.options=e,t.koModel=new S({Amount:t.model.Amount,AccountCurrencyCode:m.a.AccountCurrencyCode,isEditing:!1}),t.budgetView=new v.a({model:t.model,initBudget:e.initBudget,haveBudgetSuggestion:e.haveBudgetSuggestion,languages:e.languages,campaignId:e.campaignId,activity:e.activity,isForVNext:e.isForVNext,activityLogger:e.activityLogger}),t.budgetView.on("budget.updated",function(e){t.trigger("budget.updated",e)})}},{key:"render",value:function(){return this.$el.html(y()({i18n:x})),g.a.applyBindings(this.koModel,this.el),this.$(".budget-editor").empty().append(this.budgetView.render().el),this}},{key:"update",value:function(e){c.a.isUndefined(e.Amount)?c.a.isUndefined(this.koModel.amount())&&this.koModel.isEditing(!0):this.koModel.amount(C.a.fromFloatToString(e.Amount)),this.budgetView.update(e)}},{key:"updateSuggestedBudget",value:function(e,t){this.budgetView.updateSuggestedBudget(e,t)}},{key:"validate",value:function(){return this.budgetView.validate()}},{key:"getValues",value:function(){return this.budgetView.ko_model.toObject()}},{key:"expandEditor",value:function(){this.koModel.isEditing(!0)}},{key:"enough",value:function(){return this.budgetView.enough()}},{key:"getSuggestedBudget",value:function(){return this.budgetView.getSuggestedBudget()}},{key:"events",get:function(){return{"click .link-edit > a":"expandEditor"}}}]),t}(u.a.View)},LvSV:function(e,t,i){"use strict";var n,a={scenario:[{name:"adCreatorScenario",value:"Ad Creator Scenario",activity:[{name:"fileUpload",value:"FileUpload"},{name:"websiteSuggestion",value:"WebsiteSuggestion"},{name:"smartEffect",value:"SmartEffect"},{name:"editImage",value:"EditImage"},{name:"editPlacement",value:"EditPlacement"},{name:"saveAd",value:"SaveAd"},{name:"smartCrop",value:"SmartCrop"},{name:"manualCrop",value:"ManualCrop"},{name:"teachingBubble",value:"TeachingBubble"}]}]};function r(e){return e.adCreatorScenario||e.addScenario(a),n||(n=e.adCreatorScenario.create()),{fileUploadActivity:n.fileUpload.create(),smartEffectActivity:n.smartEffect.create(),editImageActivity:n.editImage.create(),editPlacementActivity:n.editPlacement.create(),saveAdActivity:n.saveAd.create(),websiteSuggestionActivity:n.websiteSuggestion.create(),smartCropActivity:n.smartCrop.create(),manualCropActivity:n.manualCrop.create(),teachingBubbleActivity:n.teachingBubble.create(),adCreatorScenario:n}}var o=i("UT4o"),s=(i("GJCM"),i("f3PW"));function l(e){return Object(o.keys)(Object(o.reduce)(e,function(e,t){var i=t.effectSettings;if(i){var n=i.effectKey;n===s.EffectChoiceKey.None||e[n]||(e[n]=!0)}return e},{}))}i.d(t,"a",function(){return r}),i.d(t,"b",function(){return l})},MQpz:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="query-group-container" data-bind="visible: isEditing()"><div class="query-list"></div><div class="col-sm-12"><a class="addNewQuery" data-bind="visible: showAddNewButton" href="javascript:void(0);" role="button"><span class="glyphicon glyphicon-plus"></span>'+n.escape(null==(t=e.get("ShoppingCampaign_Add_AnotherQuery"))?"":t)+'</a></div><div class="col-sm-12 text-right"><input class="btn-apply btn btn-primary" type="button"'+n.attr("value",e.get("ShoppingCampaign_Apply"),!0,!0)+'></div></div><div class="query-summary-item" data-bind="visible: !isEditing()"><a class="pull-right edit-query" href="javascript:void(0);" role="button"><span>'+n.escape(null==(t=e.get("ShoppingCampaign_Edit"))?"":t)+'</span></a>\x3c!--ko foreach: queries--\x3e<div class="query-item" data-bind="text: Operand + &quot; = &quot; + Attribute + ( $parent.isLastQuery($index) ? &quot;&quot; : &quot; &amp; &quot; )"></div>\x3c!-- /ko--\x3e</div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},MTPe:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+"<span"+n.attr("class",n.classes(["grid-cell-text","text-nowrap",e?"grid-disabled":""],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=a)?"":t)+"</span>"}.call(this,"inherited"in a?a.inherited:"undefined"!==typeof inherited?inherited:void 0,"multiplier"in a?a.multiplier:"undefined"!==typeof multiplier?multiplier:void 0),i}},"N/2k":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i={},a=e||{};return function(e){i["single-group"]=function(e){this&&this.block,this&&this.attributes,t=t+'<div class="form-group"'+n.attr("data-property",e,!0,!0)+n.attr("data-bind","visible: "+e+".visible, css: { 'has-error': !"+e+".isValid() }",!0,!0)+'><div class="form-label-container col-sm-2"'+n.attr("data-property",e,!0,!0)+'></div><div class="col-sm-4"><div class="form-input-container"'+n.attr("data-property",e,!0,!0)+'></div><div class="form-validation-container"'+n.attr("data-property",e,!0,!0)+"></div></div></div>"},function(){var t=e;if("number"==typeof t.length)for(var n=0,a=t.length;n<a;n++){var r=t[n];i["single-group"](r.property)}else for(var n in a=0,t)a++,r=t[n],i["single-group"](r.property)}.call(this)}.call(this,"fields"in a?a.fields:"undefined"!==typeof fields?fields:void 0),t}},N2WN:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a){var r;if(i)switch(e){case"Deleted":r=i.getString("EntityStatus_Deleted");break;case"Paused":r=i.getString("EntityStatus_Paused");break;default:r=i.getString("EntityStatus_Active")}t+='<div class="grid-cell">',e?"Deleted"===e?t=t+'<div class="statusicondisplay"'+n.attr("aria-label",r,!0,!0)+'><div class="statusDeleted_icon"></div></div>':a?(t=t+'<div class="statusicondisplay"'+n.attr("aria-label",r,!0,!0)+">",t+="Paused"===e?'<div class="statusPaused_icon"></div>':'<div class="statusEnabled_icon"></div>',t+="</div>"):(t=t+'<div class="statuschangehover statusicondisplay clickable" tabindex="0" role="button"'+n.attr("aria-label",r,!0,!0)+">",t+="Paused"===e?'<div class="statusPaused_icon"></div>':'<div class="statusEnabled_icon"></div>',t+="</div>"):t+='<div class="statusHeader_icon clickable" tabindex="0"></div>',t+="</div>"}.call(this,"Status"in i?i.Status:"undefined"!==typeof Status?Status:void 0,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"noHover"in i?i.noHover:"undefined"!==typeof noHover?noHover:void 0),t}},N4Lt:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="searchbox-container"><div class="search-result-view-container"><div class="search-result live-region sr-only" role="status" aria-live="polite" aria-atomic></div></div></div>'}},NAjQ:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="itemTemplate-text"><span>#:data.Name#</span></div>'}},NLLx:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},i=i+'<div class="container-budget"><div class="row"><div class="col-sm-3" role="presentation"><div class="input-group" role="presentation"><input class="budget-amount form-control" type="text" data-bind="textInput: Amount.string, hasFocus: Amount.editing, attr: {placeholder: budgetAmountPlaceholder, &quot;aria-invalid&quot;: budgetInvalid, &quot;aria-label&quot;: budgetLabel}, css: {&quot;validation-error&quot;: budgetInvalid}" aria-required="true" aria-describedby="budgetError"><span class="input-group-addon">'+n.escape(null==(t=e)?"":t)+'</span></div></div><div class="col-sm-3 form-control-static"><span>'+n.escape(null==(t=r.get("Control_CampaignBudgetControl_DailyBudgetOption"))?"":t)+'</span></div></div><div class="row"><div class="col-sm-12">',a.koError("budgetError"),a.koValidationError("Amount","Campaigns_InlineValidBudgetInputMsg"),i+='</div></div><div class="row" data-bind="visible: showSuggestedBudget()"><div class="col-sm-12"><div class="budget-suggestion-container alert-info">',i+=s?'<span class="iconba iconba-Lightbulb"></span>':'<span class="infomark"></span>',i+='<span class="budget-suggestion" data-bind="text: budgetSuggestion()"></span>',i=(i=s?i+'<button class="btn use-suggested-budget">'+n.escape(null==(t=r.get("Creation_Workflow_Use_Budget_Suggestion"))?"":t)+"</button>":i+'<a class="link use-suggested-budget" href="javascript:void(0);" role="button">'+n.escape(null==(t=r.get("Creation_Workflow_Use_Budget_Suggestion"))?"":t)+"</a>")+'</div></div></div><div class="row" id="MonthlyBudgetChangeWarning" data-bind="visible: BudgetScope() === &quot;Month&quot;"><div class="col-sm-12"><div class="infomark spritedimage"></div>'+n.escape(null==(t=r.get("MonthlyBudgetChange_WarningInfo"))?"":t)+'</div></div><div class="row" data-bind="visible: BudgetScope() === &quot;Day&quot;"><div class="col-sm-12"><a class="link expander expander-dailyType" id="CampaignSettings_AdvancedBudgetOptions_Label" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isDailyBudgetExpanded() ? &quot;true&quot; : &quot;false&quot;}" role="button">'+n.escape(null==(t=r.get("CampaignSettings_AdvancedBudgetOptions"))?"":t)+'</a></div><div class="col-sm-12 expandable displayNone" id="AdvancedBudgetOptions" role="radiogroup" aria-labelledby="CampaignSettings_AdvancedBudgetOptions_Label"><div class="radio"><label><input type="radio"'+n.attr("name",o,!0,!0)+' value="true" data-bind="checked:isDailyStandard.forEditing">'+n.escape(null==(t=r.get("BudgetDistribution_Standard"))?"":t)+'</label></div>\x3c!-- ko ifnot: hideAcceleratedBudgetOption() --\x3e<div class="radio"><label><input type="radio"'+n.attr("name",o,!0,!0)+' value="false" data-bind="checked:isDailyStandard.forEditing">'+n.escape(null==(t=r.get("BudgetDistribution_Accelerated"))?"":t)+"</label></div>\x3c!-- /ko --\x3e</div></div></div>"}.call(this,"accountCurrencyCode"in r?r.accountCurrencyCode:"undefined"!==typeof accountCurrencyCode?accountCurrencyCode:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isDailyStandardName"in r?r.isDailyStandardName:"undefined"!==typeof isDailyStandardName?isDailyStandardName:void 0,"isForVNext"in r?r.isForVNext:"undefined"!==typeof isForVNext?isForVNext:void 0),i}},NaGR:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o){a.collapse=t=function(e,a){var r=this&&this.block,o=(this&&this.attributes,e.text),s=e.property,l=e.id,c=e.className||"scheduling-form",d=a||"col-sm-4";i=i+"<div"+n.attr("class",n.classes(["form-group",c],[!1,!0]),!1,!0)+"><label"+n.attr("class",n.classes(["control-label",d,"collapse-toggle-label"],[!1,!0,!1]),!1,!0)+'><a data-toggle="collapse"'+n.attr("data-target","#"+l,!0,!0)+n.attr("data-bind",'attr: {"aria-expanded": '+s+'.observable() ? "true" : "false"}, click: '+s+".click",!0,!0)+' href="javascript:void(0)"><span class="spritedimage spritedimagealign"'+n.attr("data-bind","css: "+s+'.observable() ? "expandedImage" : "expanderImage"',!0,!0)+"></span>"+n.escape(null==(t=o)?"":t)+"</a></label></div><div"+n.attr("data-bind","attr: {id: "+s+".id}, css: "+s+'.observable() ? "in" : "collapse"',!0,!0)+">",r&&r&&r(),i+="</div>"},a["single-group"]=t=function(e){this&&this.block,this&&this.attributes,i=i+'<div class="form-group"'+n.attr("data-property",e,!0,!0)+n.attr("data-bind","visible: "+e+".visible, css: { 'has-error': !"+e+".isValid() }",!0,!0)+">",i=o?i+'<div class="form-label-container col-sm-4"'+n.attr("data-property",e,!0,!0)+'></div><div class="col-sm-8"><div class="form-input-container"'+n.attr("data-property",e,!0,!0)+'></div><div class="form-validation-container"'+n.attr("data-property",e,!0,!0)+"></div></div>":i+'<div class="col-sm-12"><div class="form-input-container"'+n.attr("data-property",e,!0,!0)+'></div><div class="form-validation-container"'+n.attr("data-property",e,!0,!0)+"></div></div>",i+="</div>"},a["render-fields"]=t=function(e){this&&this.block,this&&this.attributes,function(){var t=e;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++)(r=t[i]).hasSubFields?"collapse"===r.type&&a.collapse.call({block:function(){a["render-fields"](r.fields)}},r):a["single-group"](r.property);else for(var i in n=0,t){var r;n++,(r=t[i]).hasSubFields?"collapse"===r.type&&a.collapse.call({block:function(){a["render-fields"](r.fields)}},r):a["single-group"](r.property)}}.call(this)},i+='<form class="form-horizontal"><div class="form-group"><div class="col-sm-offset-4 col-sm-8"><div class="form-validation-container" data-property="$overall"></div></div></div>',a["render-fields"](e),r&&(i+='<div class="form-input-container" data-property="$buttons"></div>'),i+="</form>"}.call(this,"fields"in r?r.fields:"undefined"!==typeof fields?fields:void 0,"hasButtons"in r?r.hasButtons:"undefined"!==typeof hasButtons?hasButtons:void 0,"hasLabels"in r?r.hasLabels:"undefined"!==typeof hasLabels?hasLabels:void 0),i}},Nrh9:function(e,t,i){i("4y7W");e.exports=function(e){var t,i="",n=e||{};return function(e){(function(){var n=e;if("number"==typeof n.length)for(var a=0,r=n.length;a<r;a++){var o=n[a];i=i+'<div class="uurl-result-entity">'+(null==(t=o)?"":t)+"</div>"}else for(var a in r=0,n)r++,o=n[a],i=i+'<div class="uurl-result-entity">'+(null==(t=o)?"":t)+"</div>"}).call(this)}.call(this,"resultList"in n?n.resultList:"undefined"!==typeof resultList?resultList:void 0),i}},NyBB:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a["multipliers-bid-list"]=t=function(e,a,o,s,l){this&&this.block,this&&this.attributes,i=i+'<div class="col-sm-4 control-label"><label>'+n.escape(null==(t=e)?"":t)+'</label></div><div class="col-sm-4"><select'+(n.attr("class",n.classes(["form-control","select-strategy",a],[!1,!1,!0]),!1,!0)+n.attr("disabled",!0===l,!0,!0))+'><option value="increase"'+n.attr("selected","increase"===o,!0,!0)+">"+n.escape(null==(t=r.i18n.getString("HotelCenter_Overview_Multipliers_BidIncrease_Label"))?"":t)+'</option><option value="decrease"'+n.attr("selected","decrease"===o,!0,!0)+">"+n.escape(null==(t=r.i18n.getString("HotelCenter_Overview_Multipliers_BidDecrease_Label"))?"":t)+'</option></select></div><div class="col-sm-4"><div'+n.attr("data-ref",s,!0,!0)+"></div></div>"},i+='<div class="form-group">',a["multipliers-bid-list"](r.text,r.value,e.strategy,"factor-input",e.isUseParent),i+="</div>"}.call(this,"model"in r?r.model:"undefined"!==typeof model?model:void 0,"view"in r?r.view:"undefined"!==typeof view?view:void 0),i}},O3qA:function(e,t,i){"use strict";i.r(t);var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("UT4o"),u=i.n(d),p=i("+9/h"),g=i("ORPc"),h=i("syDw"),m=i.n(h),f=i("pMz2"),v=i.n(f),b=i("UyEP"),y=i("ITOZ"),S=i("pC4H"),w=i.n(S),C=i("WzTB"),x=i.n(C),k=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=u.a.defaults(t,{level:"adgroup",targetType:"All"}),this.isolated="All"!==this.options.targetType,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.vm={i18n:this.i18n,gridData:[],targetType:this.options.targetType,removeAllVisibleClass:this.isolated?"hide":""},this.grid=null,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.listenTo(this.currentLevelTargetInfo,"".concat(this.currentLevelTargetInfo.resourceName).concat(this.options.type,"Changed"),function(){return e.onCriterionChange()})}},{key:"render",value:function(){return this.$el.html(w()(this.vm)),this.initializeAndRenderGrid(),this}},{key:"onCriterionChange",value:function(){var e=this;if(this.isolated){var t=Object(y.cloneDeep)(this.currentLevelTargetInfo.getAllByType(this.options.type)),i=u.a.partition(t,function(t){return t.CriterionType===e.options.type});this.vm.gridData="Included"===this.options.targetType?i[0]:i[1]}else this.vm.gridData=Object(y.cloneDeep)(this.currentLevelTargetInfo.getAllByType(this.options.type));this.refreshGridSource(),0===this.vm.gridData.length?this.$(".linked-in-target-grid-view.".concat(this.options.targetType)).addClass("hide"):this.$(".linked-in-target-grid-view.".concat(this.options.targetType)).removeClass("hide")}},{key:"refreshGridSource",value:function(){this.grid&&this.grid.gridView&&this.grid.gridView.patch({dataSource:{data:this.vm.gridData}})}},{key:"initializeAndRenderGrid",value:function(){var e=this;this.commonGridConfig={tableClasses:["table","table--no-border","grid"],dataSource:{type:"memory",data:[],primaryKey:"Id"},rows:{bodyRows:[{type:"data-rows",classes:["linked-in-target-grid__area-row"]}]},events:{"click .linked-in-target-grid__remove-col":function(t){return e.removeSearchBasedTarget(t)},"click .linked-in-target-grid__removeall-header":function(t){return e.removeSearchBasedTargets(t)}},plugins:{pagination:{pageSize:this.isolated?5:10,availablePageSizes:this.isolated?[5]:[10,20,50,100],enableRandomPage:!1,template:this.isolated?x.a:void 0,pageNumberLabelText:this.i18n.getString("GridPage_Colon"),pageSizeText:this.i18n.getString("Grid_ShowRows"),totalPageCountText:this.i18n.getString("Grid_PageOf")}}};var t=this.isolated?this.options.gridConfig(this.options.targetType):this.options.gridConfig;this.grid=v.a.factory({vnext:!0}).use(b.paginationPlugin).create(u.a.defaults(t,this.commonGridConfig)),this.$(".target-grid").html(this.grid.gridView.render().el),this.grid.gridView.on("didUpdate",function(){if(e.isolated){var t=e.grid.gridView.$el.find("th span.targeting-status");t.text(t.text().replace(/\d+|\{\{count\}\}/,e.grid.gridView.totalCountRows))}}),this.onCriterionChange()}},{key:"removeSearchBasedTarget",value:function(e){e.stopPropagation();var t=u.a.result(this.grid.gridView.itemOfElement(e.target),"Id");return this.currentLevelTargetInfo.destroyAsync(t)}},{key:"removeSearchBasedTargets",value:function(e){var t=this;if(this.isolated){var i=Object(y.cloneDeep)(this.currentLevelTargetInfo.getAllByType(this.options.type)),n=u.a.partition(i,function(e){return e.CriterionType===t.options.type}),a="Included"===this.options.targetType?n[0]:n[1];e.stopPropagation(),u.a.each(a,function(e){t.currentLevelTargetInfo.destroyAsync(e.Id)})}}},{key:"onRemoveAllTargets",value:function(e){return e.stopPropagation(),this.currentLevelTargetInfo.destroyTargetTypeAsync(this.options.type)}},{key:"events",get:function(){return{"click .target-grid-remove-all-container a":"onRemoveAllTargets"}}}]),t}(m.a.View),A=i("0BNN"),T=i.n(A),_=i("ByGw"),E=i.n(_),I=i("LQKM"),O=i.n(I),P=function(e){return{name:"removeAll",template:function(){return E()({i18n:e})},headClasses:["linked-in-target-grid__removeall-header","text-right"],bodyClasses:["text-right"],html:"<a href='javascript:void(0)'><span>".concat(e.getString("Audience_Campaign_Target_Setting_Company_Grid_Column_Remove_All"),"</span></a>")}},M=function(e){return{name:"Status",template:function(){return O()({isIncluded:"Included"===e,isExcluded:"Excluded"===e,includedString:"",excludedString:""})},property:u.a.identity}},j=function(e){return{template:function(t){return t.value.Criterion[e].Name},property:u.a.identity}},L=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.showBidOnlyNote=e.showBidOnlyNote,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.decimal=p.a.get("component/humanize/decimal");var t=e.isolatedGrid?u.a.defaults({targetType:"Included"},e):e;this.searchBasedTargetGridView=new k(t),e.isolatedGrid&&(this.excludedSearchBasedTargetGridView=new k(u.a.defaults({targetType:"Excluded"},e)))}},{key:"render",value:function(){return this.$el.html(T()(this)),this.searchView.render(),this.$(".linked-in-target-search-container").append(this.searchView.$el),this.searchBasedTargetGridView.render(),this.$(".linked-in-target-grid-container").append(this.searchBasedTargetGridView.$el),this.options.isolatedGrid&&(this.excludedSearchBasedTargetGridView.render(),this.$(".linked-in-excluded-grid-container").append(this.excludedSearchBasedTargetGridView.$el)),this}},{key:"isTargeted",value:function(){return u.a.clone(this.currentLevelTargetInfo.getAllByType(this.options.type)).length>0}},{key:"setDefaultCashbackPercent",value:function(e){this.searchView.setDefaultCashbackPercent(e)}}]),t}(m.a.View),D=i("c0nf"),R=i("/xyZ"),N=i.n(R),V=i("5iHu"),B=i.n(V),F=i("vvFZ"),U=i.n(F),G=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:0,this.defaultCashbackPercent=e.defaultCashbackPercent,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.items=[],this.isVisible=!1}},{key:"updateState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;u.a.isUndefined(t)||(this.isVisible=t),this.items=e,B()(document).off("click.company-name-result"),this.isVisible&&B()(document).on("click.company-name-result",this.clickHandling.bind(this)),this.render()}},{key:"render",value:function(){this.$el.html(U()(this));var e=this.items.length<1?this.i18n.getString("Audience_Campaign_Target_Setting_Company_Search_No_Result"):this.i18n.getString("Found {{totalCount}} Results",{totalCount:this.items.length});return this.$el.closest(".search-result-view-container").find(".search-result.live-region").text(e),this}},{key:"clickHandling",value:function(e){B()(e.target).hasClass("search-box__icon")||0!==B()(e.target).closest(".search-result-view-container").length||this.updateState([],!1)}},{key:"setDefaultCashbackPercent",value:function(e){this.defaultCashbackPercent=e}},{key:"onInclude",value:function(e){if(e.stopPropagation(),!e.target)return N.a.resolve(!1);var t=u.a.first(u.a.filter(this.items,function(t){return t.id===parseInt(e.target.dataset.id,10)})),i=g.criterionHelper.buildLinkedInCriterion("CompanyName",t,!0,this.defaultBidAdjustment,this.defaultCashbackPercent);return this.currentLevelTargetInfo.createAsync(i)}},{key:"onExclude",value:function(e){if(e.stopPropagation(),!e.target)return N.a.resolve(!1);var t=u.a.first(u.a.filter(this.items,function(t){return t.id===parseInt(e.target.dataset.id,10)})),i=g.criterionHelper.buildLinkedInCriterion("CompanyName",t,!1,this.defaultBidAdjustment);return this.currentLevelTargetInfo.createAsync(i)}},{key:"events",get:function(){return{"click a.company-search-include-link":"onInclude","click a.company-search-exclude-link":"onExclude"}}}]),t}(m.a.View),z=i("9u7Z"),H=i("N4Lt"),W=i.n(H);function q(e){"search-box__icon glyphicon glyphicon-search"===e.target.className&&e.stopPropagation()}var $=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.criterionType=e.criterionType,this.searchBox=new z.SearchBox({placeholder:this.i18n.getString("Audience_Campaign_Target_Setting_".concat(this.criterionType,"_Search_Placeholder")),maxLength:this.options.maxLength,value:"",iconClasses:["glyphicon","glyphicon-search"]})}},{key:"render",value:function(){return this.$el.html(W()(this)),this.searchBox.render(),this.$(".searchbox-container").prepend(this.searchBox.$el),this.searchResultView.render(),this.$(".search-result-view-container").append(this.searchResultView.$el),this}},{key:"onSearchResultReseted",value:function(){this.searchBox.viewModel.value("")}},{key:"events",get:function(){return{"click .searchbox-container":q}}}]),t}(m.a.View),K=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var i=this;Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e),this.searchBox.on("search",function(e){return i.onSearch(e)}),this.searchResultView=new G(this.options),this.listenTo(this.searchResultView,"searchResultReseted",this.onSearchResultReseted),this.listenTo(this.currentLevelTargetInfo,"".concat(this.currentLevelTargetInfo.resourceName,"CompanyNameChanged"),function(){return i.onCriterionChange()})}},{key:"setDefaultCashbackPercent",value:function(e){this.searchResultView.setDefaultCashbackPercent(e)}},{key:"onSearch",value:function(e){var t=this;if(!e)return null;var i=encodeURIComponent(e),n=p.a.get("component/http/channel/odata"),a=p.a.get("audienceCampaignPageContext"),r="Customers(".concat(a.CurrentCustomerId,")/Accounts(").concat(a.CurrentAccount.Id,")/Demographics/"),o="Model.Company?$search=".concat(i,"&$top=20");return n.get(r+o).then(function(e){t.searchData=e.value,t.setSearchResult(!0)}).finally(Object(D.withUiBlock)(this.$el,this.i18n.getString("Loading")))}},{key:"setSearchResult",value:function(e){var t=u.a.clone(this.currentLevelTargetInfo.getAllByType("CompanyName")),i=u.a.map(t,function(e){return"CompanyName"===e.CriterionType?parseInt(e.Criterion.CompanyNameCriterion.Target,10):-1}),n=u.a.map(t,function(e){return"NegativeCompanyName"===e.CriterionType?parseInt(e.Criterion.CompanyNameCriterion.Target,10):-1}),a=u.a.map(this.searchData,function(e){return{id:e.Id,name:e.Name,logoUrl:e.LogoUrl,industry:e.Industry,size:Object(g.companySizeEnumToString)(e.Size),isIncluded:u.a.contains(i,e.Id),isExcluded:u.a.contains(n,e.Id)}});this.searchResultView.updateState(a,e)}},{key:"onCriterionChange",value:function(){this.setSearchResult()}}]),t}($),J=i("ME2r"),Z=(i("n2Lw"),function(){var e=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign");return{percentage:0,availableOptions:[{key:"inc",text:e.getString("Audience_Campaign_Settings_BidAdjustment_Increase")},{key:"dec",text:e.getString("Audience_Campaign_Settings_BidAdjustment_Decrease")}],selectedOption:"inc"}}),Y=function(e){var t=!1;return e.Status&&"Excluded"===e.Status&&(t=!0),e.SelectionStatus&&"Excluded"===e.SelectionStatus&&(t=!0),e.CriterionType&&e.CriterionType.indexOf("Negative")>=0&&(t=!0),t},Q=function(e,t,i){var n=e.$(t.target).parent(),a=t.target.id||n.children("input")[0].id,r=n.children("input").val(),o=n.children("select").val(),s=e.currentLevelTargetInfo.criterionsByType[i],l=function(e,t){var i=Number(e),n=Z(),a=u.a.find(n.availableOptions,function(e){return e.text===t});return"dec"===u.a.result(a,"key")?-i:i}(r,o),c=s.find(function(e){return e.Criterion[i]?e.Criterion[i]===a:e.Criterion.Name===a});c&&c.Criterion&&(c.Criterion.BidAdjustment=l)},X=function(e){return B()(".criterion-setting-".concat(e," .toggle.toggle-off")).length>0},ee=function(e,t){return{i18n:t,name:"CashbackPercent",property:function(e){return e},bodyClasses:["cashback-percent-cell-wrap"],title:"Campaign_Maximum_Cashback_Offer",template:function(t){var i=e,n=t.value;if(Y(t.value))return"-";var a=null;null!=n.Criterion.CashbackAdjustment&&(a=n.Criterion.CashbackAdjustment),null!=n.Criterion.CashbackPercent&&(a=n.Criterion.CashbackPercent),X(n.CriterionType)?i.readonly=!1:i.readonly=!0;var r=new J.a({viewContext:e.options.viewContext,i18n:e.i18n,decimal:e.decimal,CashbackPercent:a,isParentLevel:i.readonly}),o=n.Criterion[n.CriterionType]?n.Criterion[n.CriterionType]:n.Criterion.Name;return setTimeout(function(){var i=t.value.Id,n=e.$("tr[data-key='".concat(i,"']"));e.$(n).find(".cashback-percent-cell-wrap").empty().append(r.render().$el),r.on("change",function(t,i){e.onCashbackPercentChange(e,t,i,o,e.criterionName)})}),""}}},te=function(e){return{i18n:e,name:"targetName",title:"Audience_Campaign_Target_Setting_Company_Grid_Column_Companies",template:function(t){var i=t.value.Criterion.CompanyNameCriterion,n={name:i.Name,logoUrl:i.LogoUrl,industry:i.Industry,size:i.Size,i18n:e};return Object(g.companyTargetItemTemplate)({item:n,i18n:e})},property:u.a.identity}},ie=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.i18nKeys={titleKey:"Audience_Campaign_Target_Setting_Company_Title",helpKey:"pop_BA_CampaignCreate_AudTargets_Company",descriptionKey:"Audience_Campaign_Target_Setting_Company_Description"},this.criterionName="CompanyName",this.currentLevelTargetInfo=e.currentLevelTargetInfo;var i=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),a=p.a.get("component/bingads-grid/shared/column"),r=p.a.get("audienceCampaignPageContext");this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup||r.isFilterCriterionLevelAdGroup,this.supportCashbackSettings=e.supportCashbackSettings;var o={columns:[a({name:"isIncludedOrExcluded",title:this.showExclusion?i.getString("Audience_Campaign_Target_Setting_Company_Grid_Column_Target"):"",template:function(e){var t=e.value.CriterionType;return O()({isIncluded:"CompanyName"===t,isExcluded:"NegativeCompanyName"===t,includedString:i.getString("Audience_Campaign_Target_Setting_Included_Status"),excludedString:i.getString("Audience_Campaign_Target_Setting_Excluded_Status")})},property:u.a.identity}),a(te(i))].concat(Object(n.a)("adgroup"===e.currentLevel&&(this.options.showBidOnlyNote||this.options.showExclusion)&&this.isFilterCriterionLevelAdGroup&&this.supportCashbackSettings?[a(ee(this,i))]:[]),[a({name:"removeAll",template:function(){return E()({i18n:i})},headClasses:["linked-in-target-grid__remove-body"],bodyClasses:["text-right"]})])};this.options.isolatedGrid?this.options.isForVNext?this.options.gridConfig=function(e){return{columns:[{name:"CompanyNameTarget",property:u.a.identity,html:"<span>".concat(i.getString("Audience_Campaign_Target_Setting_Company_".concat(e,"_Grid_Title")),"</span>"),columns:[a(u.a.extend({},M(e),{headClasses:"hide"})),a(u.a.extend({},te(i),{headClasses:"hide"}))]},a(P(i))]}}:this.options.gridConfig=function(e){return{columns:[{name:"CompanyNameTarget",property:u.a.identity,html:O()({isIncluded:"Included"===e,isExcluded:"Excluded"===e,includedString:i.getString("Audience_Campaign_Target_Setting_Company_".concat(e,"_Status")),excludedString:i.getString("Audience_Campaign_Target_Setting_Company_".concat(e,"_Status"))}),columns:[a(u.a.extend({},j("CompanyNameCriterion"),{name:"CompanyName",headClasses:"hide"})),a({name:"CompanyType",headClasses:"hide",template:function(e){return e.value.Criterion.CompanyNameCriterion.Industry},property:u.a.identity}),a({name:"CompanyEmplyee",headClasses:"hide",template:function(e){var t=e.value.Criterion.CompanyNameCriterion;return"".concat(t.Size," ").concat(i.getString("Audience_Campaign_Target_Setting_Company_Employee_Count"))},property:u.a.identity})]},a(P(i))]}}:this.options.gridConfig=o,this.searchView=new K(this.options),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}}]),t}(L),ne=i("bgLp"),ae=i("i/gc"),re=i("T0sE"),oe=i.n(re),se=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.isLabelHidden=e.isLabelHidden,this.isTargetAndBid=e.isTargetAndBid}},{key:"render",value:function(){return this.$el.html(oe()(this)),this.isTargetAndBid?this.$(".target-and-bid-radio-check").prop("checked",!0):this.$(".bid-only-radio-check").prop("checked",!0),this}},{key:"setIsTargetAndBid",value:function(e){this.isTargetAndBid=e,this.isTargetAndBid?this.$(".target-and-bid-radio-check").prop("checked",!0):this.$(".bid-only-radio-check").prop("checked",!0)}},{key:"getIsTargetAndBid",value:function(){return!!this.$(".target-and-bid-radio-check").is(":checked")}},{key:"onTargetSettingChanged",value:function(){this.trigger("targetSettingChanged")}},{key:"events",get:function(){var e=this;return{"change input[type=radio]":function(){return e.onTargetSettingChanged()}}}}]),t}(m.a.View),le=i("zj4z"),ce=i.n(le),de=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showTargetSelection:!1,showBidAdjustment:!1,showTargetOrBid:!1,enableLevelToggle:!1,activityLogger:null,supportCashbackSettings:!1};this.decimal=p.a.get("component/humanize/decimal"),this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.currentLevelTargetInfo=i.currentLevelTargetInfo,this.parentLevelTargetInfo=i.parentLevelTargetInfo,this.viewContext=i.viewContext||{},this.isAudienceCampaign=i.isAudienceCampaign,this.isTargetAndBid=i.isTargetAndBid,this.activityLogger=i.activityLogger,this.supportCashbackSettings=i.supportCashbackSettings,this.showTargetSelection=i.showTargetSelection,this.showBidAdjustment=i.showBidAdjustment,this.showTargetOrBid=i.showTargetOrBid,this.showLevelToggle=i.enableLevelToggle&&"adgroup"===this.viewContext.level,this.isTargetSelectionViewValid=!0,this.hideTitleLabel=i.hideTitleLabel,this.target=(e=this.i18n,{Age:e.getString("Demographic_Grid_Override_Age"),Gender:e.getString("Demographic_Grid_Override_Gender"),CompanyName:e.getString("Demographic_Grid_Override_Company"),Industry:e.getString("Demographic_Grid_Override_Industry"),JobFunction:e.getString("Demographic_Grid_Override_JobFunction"),Device:e.getString("Demographic_Grid_Override_Device")})[this.criterionType],this.scenario=i.scenario,this.getInitializePromise=i.getInitializePromise||N.a.resolve(!0),this.showBidAdjustment&&this.initializeBidAdjustmentGrid(),this.showTargetOrBid&&this.initializeTargetOrBidSelector(),this.showLevelToggle&&(this.initializeLevelToggle(),this.showBidAdjustment&&!u.a.isEmpty(this.parentLevelTargetInfo)&&this.initializeParentLevelBidAdjustmentGrid()),this.currentLevelTargetInfo&&this.listenTo(this.currentLevelTargetInfo,"".concat(this.currentLevelTargetInfo.resourceName).concat(this.criterionType,"Changed"),function(){return t.changeVisibility(!0)})}},{key:"initializeLevelToggle",value:function(){var e=p.a.get("component/toggle/view/index"),t=this.isUsingCampaignSettings();this.levelToggle=new e({toggleText:{},labelledbyId:"criterion-use-campaign-settings"}),this.levelToggle.setToggleState(t?"on":"off"),this.currentLevelTargetInfo.setParentLevelToggle(this.criterionType,t),this.showAdGroupOverrideInformation=t,this.listenTo(this.levelToggle,"change",this.onLevelToggleChange)}},{key:"isUsingCampaignSettings",value:function(){var e=this.currentLevelTargetInfo.getAllByType(this.criterionType);return"adgroup"===this.viewContext.level&&(0===e.length||e.length>0&&u.a.every(e,function(e){return e.Id<0}))}},{key:"setAdGroupInfoVisibility",value:function(){this.showAdGroupOverrideInformation?this.$(".adgroup-override-info").show():this.$(".adgroup-override-info").hide()}},{key:"onLevelToggleChange",value:function(e){var t="on"===e;this.showAdGroupOverrideInformation=t,this.setAdGroupInfoVisibility(),this.currentLevelTargetInfo.setParentLevelToggle(this.criterionType,t),t?(this.closeTargetEditView(),this.$(".target-edit-container").addClass("hide"),this.$(".current-level-bid-adjustment-grid").addClass("hide"),this.$(".parent-level-bid-adjustment-grid").removeClass("hide")):(this.copyParentCriterionsAsync().catch(function(){throw new Error("Failure in copying parent criterions")}),this.$(".target-edit-container").removeClass("hide"),this.$(".current-level-bid-adjustment-grid").removeClass("hide"),this.$(".parent-level-bid-adjustment-grid").addClass("hide"),this.$(".target-edit-container .bid-adjustment-target-column .form-inline .form-control").removeAttr("disabled"))}},{key:"changeVisibility",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.criterionType&&(this.getInitializePromise&&"function"===typeof this.getInitializePromise?this.getInitializePromise().then(function(){e.changeVisAction(t)}):this.changeVisAction(t))}},{key:"changeVisAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.currentLevelTargetInfo.parentLevelTogglesByType[this.criterionType]?this.parentLevelTargetInfo&&this.parentLevelTargetInfo.getAllByType(this.criterionType).length>0:this.currentLevelTargetInfo.getAllByType(this.criterionType).length>0;this.levelToggle&&"adgroup"===this.viewContext.level&&this.currentLevelTargetInfo.getAllByType(this.criterionType).length>0&&e&&("AdGroup"===this.currentLevelTargetInfo.getAllByType(this.criterionType)[0].LevelOfDetails?this.levelToggle.setToggleState("off"):u.a.any(this.currentLevelTargetInfo.getAllByType(this.criterionType),function(e){return"Campaign"!==e.LevelOfDetails})||this.levelToggle.setToggleState("on")),this.showBidAdjustment&&(t?(this.$(".bid-adjustment-grids-container").show(),this.$(".no-target-exist-edit-label").hide()):(this.$(".bid-adjustment-grids-container").hide(),this.$(".no-target-exist-edit-label").show())),this.showTargetOrBid&&(t?this.$(".bid-or-target-and-bid-selector").show():this.$(".bid-or-target-and-bid-selector").hide())}},{key:"copyParentCriterionsAsync",value:function(){var e=this;if(this.currentLevelTargetInfo.getAllByType(this.criterionType).length>0)return N.a.resolve(!1);var t=this.parentLevelTargetInfo.getAllByType(this.criterionType),i=[];return u.a.each(t,function(t){var n=u.a.pick(Object(y.cloneDeep)(t),"AdGroup","Criterion","CriterionType");i.push(e.currentLevelTargetInfo.createAsync(n))}),N.a.all(i)}},{key:"initializeBidAdjustmentGrid",value:function(){this.bidAdjustmentGrid=new ae.BidAdjustment({currentLevelTargetInfo:this.currentLevelTargetInfo,parentLevelTargetInfo:this.parentLevelTargetInfo,criterionTypes:this.criterionTypes?this.criterionTypes:[this.criterionType],isAudienceCampaign:this.isAudienceCampaign,showExclusion:this.showExclusion,activityLogger:this.activityLogger,campaignId:this.viewContext.currentCampaign?this.viewContext.currentCampaign.Id:"",adgroupId:this.viewContext.currentAdGroup?this.viewContext.currentAdGroup.Id:"",level:this.viewContext.level,scenario:this.scenario,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext})}},{key:"initializeParentLevelBidAdjustmentGrid",value:function(){this.parentLevelBidAdjustmentGrid=new ae.BidAdjustment({currentLevelTargetInfo:this.parentLevelTargetInfo,criterionTypes:this.criterionTypes?this.criterionTypes:[this.criterionType],readonly:!0,showExclusion:this.showExclusion,campaignId:this.viewContext.currentCampaign?this.viewContext.currentCampaign.Id:"",adgroupId:this.viewContext.currentAdGroup?this.viewContext.currentAdGroup.Id:"",level:this.viewContext.level,scenario:this.scenario,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext})}},{key:"initializeTargetOrBidSelector",value:function(){this.targetOrBidSelector=new se({isTargetAndBid:this.isTargetAndBid})}},{key:"validate",value:function(){return(!this.bidAdjustmentGrid||this.bidAdjustmentGrid.getState().isValid)&&this.isTargetSelectionViewValid&&this.isCashbackPercentValid}},{key:"onEditTargetShowButtonClicked",value:function(){this.validate()&&(this.targetSelectionView&&this.targetSelectionView.saveSnapshot&&this.targetSelectionView.saveSnapshot(),this.$(".target-selection-container").removeClass("hide"),this.$(".current-level-bid-adjustment-grid").addClass("hide"),this.$(".edit-target-show-button-container").addClass("hide"),this.$(".done-editing-target-button").removeClass("hide"),this.$(".bid-only-note-container").addClass("hide"))}},{key:"onEditTargetDoneButtonClicked",value:function(){this.validate()&&(this.targetSelectionView&&this.targetSelectionView.updateCriterionDataAsync?this.targetSelectionView.updateCriterionDataAsync():this.targetSelectionView&&this.targetSelectionView.searchBasedTargetGridView&&this.bidAdjustmentGrid&&this.bidAdjustmentGrid.onCriterionChanged(),this.closeTargetEditView())}},{key:"closeTargetEditView",value:function(){this.$(".target-selection-container").addClass("hide"),this.$(".current-level-bid-adjustment-grid").removeClass("hide"),this.$(".edit-target-show-button-container").removeClass("hide"),this.$(".done-editing-target-button").addClass("hide"),this.$(".bid-only-note-container").removeClass("hide")}},{key:"resetSupportCashbackSettings",value:function(e,t){if(this.supportCashbackSettings=e,this.bidAdjustmentGrid&&(this.bidAdjustmentGrid.remove(),this.initializeBidAdjustmentGrid()),this.parentLevelBidAdjustmentGrid&&(this.parentLevelBidAdjustmentGrid.remove(),this.initializeParentLevelBidAdjustmentGrid()),null!=t){var i=t.value;if("AdGroup"===t.level){var n=u.a.chain(this.viewContext).result("currentAdGroup").result("AdGroupCashback",{}).value();this.viewContext.currentAdGroup=Object(ne.a)({},u.a.result(this.viewContext,"currentAdGroup",{}),{AdGroupCashback:Object(ne.a)({},n,{Percent:i})})}else{var a=u.a.chain(this.viewContext).result("currentCampaign").result("CampaignCashback",{}).value();this.viewContext.currentCampaign=Object(ne.a)({},u.a.result(this.viewContext,"currentCampaign",{}),{CampaignCashback:Object(ne.a)({},a,{Percent:i})})}}this.renderGrids()}},{key:"renderGrids",value:function(){this.bidAdjustmentGrid&&(this.bidAdjustmentGrid.render(),this.$(".current-level-bid-adjustment-grid").empty().append(this.bidAdjustmentGrid.$el)),this.parentLevelBidAdjustmentGrid&&(this.parentLevelBidAdjustmentGrid.render(),this.$(".parent-level-bid-adjustment-grid").empty().append(this.parentLevelBidAdjustmentGrid.$el)),this.supportCashbackSettings?this.$(".criterion-setting-container").addClass("show-cashback-percent"):this.$(".criterion-setting-container").removeClass("show-cashback-percent")}},{key:"render",value:function(){return this.$el.html(ce()(this)),this.$(".criterion-setting-container").addClass("criterion-setting-".concat(this.criterionType)),this.targetSelectionView&&(this.targetSelectionView.render(),this.$(".target-selection-container").empty().append(this.targetSelectionView.$el)),this.renderGrids(),this.targetOrBidSelector&&(this.targetOrBidSelector.render(),this.$(".bid-or-target-and-bid-selector").empty().append(this.targetOrBidSelector.$el)),this.levelToggle&&(this.levelToggle.render(),this.$(".level-toggle").empty().append(this.levelToggle.$el),this.currentLevelTargetInfo.getParentLevelToggle(this.criterionType)&&(this.$(".target-edit-container").addClass("hide"),this.$(".current-level-bid-adjustment-grid").addClass("hide"),this.$(".parent-level-bid-adjustment-grid").removeClass("hide"))),this.changeVisibility(),this.setAdGroupInfoVisibility(),this}},{key:"getIsTargetAndBid",value:function(){return this.targetOrBidSelector.getIsTargetAndBid()}},{key:"isCashbackPercentValid",get:function(){if(this.supportCashbackSettings){var e=[".bid-adjustment-grid .table-container td[data-Column=CashbackPercent] .error",".target-grid .table-container td[data-Column=CashbackPercent] .error"].join(","),t=this.$el.find(e);return u.a.every(t,function(e,i){return""===t.eq(i).text()})}return!0}},{key:"events",get:function(){return{"change .bid-adj-col":"onBidAdjChange",'change select[aria-label="Bid adjustment options"]':"onBidAdjChange","click .edit-target-show-button":"onEditTargetShowButtonClicked","click .done-editing-target-button":"onEditTargetDoneButtonClicked"}}}]),t}(m.a.View),ue=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="CompanyName",this.type="CompanyName",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.showBidOnlyNote=e.showBidOnlyNote,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:null,this.viewContext=e.viewContext||{},this.supportCashbackSettings=e.supportCashbackSettings,this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"onBidAdjChange",value:function(e){Q(this,e,"CompanyName")}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new ie({currentLevelTargetInfo:this.currentLevelTargetInfo,criterionType:this.criterionType,type:this.type,showBidOnlyNote:this.showBidOnlyNote,showExclusion:this.showExclusion,defaultBidAdjustment:this.defaultBidAdjustment,currentLevel:this.viewContext.level,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext,isFilterCriterionLevelAdGroup:this.isFilterCriterionLevelAdGroup})}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Company_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Company"}}]),t}(de),pe=i("9VxX"),ge=i.n(pe),he=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:0,this.defaultCashbackPercent=e.defaultCashbackPercent,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.items=[],this.isVisible=!0}},{key:"setResults",value:function(e,t){return this.items=u.a.map(e,function(e){var i=e,n=i.name.toLowerCase().indexOf(t.toLowerCase());if(n>=0){var a=n+t.length;i.caseMatchedSearchTerm=i.name.substring(n,a)}return i}),this.render()}},{key:"render",value:function(){this.$el.html(ge()(this));var e=this.items.length<1?this.i18n.getString("Audience_Campaign_Target_Setting_Company_Search_No_Result"):this.i18n.getString("Found {{totalCount}} Results",{totalCount:this.items.length});return this.$el.closest(".search-result-view-container").find(".search-result.live-region").text(e),this}},{key:"setDefaultCashbackPercent",value:function(e){this.defaultCashbackPercent=e}},{key:"onInclude",value:function(e){if(e.stopPropagation(),!e.target)return N.a.resolve(!1);var t=u.a.first(u.a.filter(this.items,function(t){return t.id===parseInt(e.target.dataset.id,10)})),i=g.criterionHelper.buildLinkedInCriterion("JobFunction",t,!0,this.defaultBidAdjustment,this.defaultCashbackPercent);return this.currentLevelTargetInfo.createAsync(i)}},{key:"onExclude",value:function(e){if(e.stopPropagation(),!e.target)return N.a.resolve(!1);var t=u.a.first(u.a.filter(this.items,function(t){return t.id===parseInt(e.target.dataset.id,10)})),i=g.criterionHelper.buildLinkedInCriterion("JobFunction",t,!1,this.defaultBidAdjustment);return this.currentLevelTargetInfo.createAsync(i)}},{key:"events",get:function(){return{"click a.job-function-search-include-link":"onInclude","click a.job-function-search-exclude-link":"onExclude"}}}]),t}(m.a.View),me=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var i=this;Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e),this.initializeSearchDataTask=this.initializeSearchData(),this.searchBox.on("search",function(e){return i.onSearch(e)}),this.searchResultView=new he(this.options),this.searchTerm="",this.listenTo(this.currentLevelTargetInfo,"".concat(this.currentLevelTargetInfo.resourceName,"JobFunctionChanged"),function(){return i.onCriterionChange()})}},{key:"initializeSearchData",value:function(){var e=this,t=p.a.get("component/http/channel/odata"),i=p.a.get("audienceCampaignPageContext"),n="Customers(".concat(i.CurrentCustomerId,")/Accounts(").concat(i.CurrentAccount.Id,")/Demographics/");return t.get(n+"Model.JobFunction").then(function(t){e.searchData=t.value,e.setSearchResult()})}},{key:"onSearch",value:function(e){var t=this;return this.initializeSearchDataTask.then(function(){t.searchTerm=e,t.setSearchResult()})}},{key:"onCriterionChange",value:function(){this.setSearchResult()}},{key:"setDefaultCashbackPercent",value:function(e){this.searchResultView.setDefaultCashbackPercent(e)}},{key:"setSearchResult",value:function(){var e=this.currentLevelTargetInfo.getAllByType("JobFunction"),t=u.a.map(e,function(e){return"JobFunction"===e.CriterionType?parseInt(e.Criterion.JobFunctionCriterion.Target,10):-1}),i=u.a.map(e,function(e){return"NegativeJobFunction"===e.CriterionType?parseInt(e.Criterion.JobFunctionCriterion.Target,10):-1}),n=this.searchTerm.toLowerCase(),a=this.searchData;this.searchTerm.length>0&&(a=u.a.filter(this.searchData,function(e){return e.Name.toLowerCase().indexOf(n)>-1}));var r=u.a.map(a,function(e){return{id:e.Id,name:e.Name,isIncluded:u.a.contains(t,e.Id),isExcluded:u.a.contains(i,e.Id)}});this.searchResultView.setResults(r,this.searchTerm)}}]),t}($),fe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.i18nKeys={titleKey:"Audience_Campaign_Target_Setting_Job_Function_Title",helpKey:"pop_BA_CampaignCreate_AudTargets_JobFunction",descriptionKey:"Audience_Campaign_Target_Setting_Job_Function_Description"},this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.criterionName="JobFunction";var i=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),a=p.a.get("component/bingads-grid/shared/column"),r=p.a.get("audienceCampaignPageContext");this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup||r.isFilterCriterionLevelAdGroup,this.supportCashbackSettings=e.supportCashbackSettings;var o={columns:[a({name:"isIncludedOrExcluded",title:this.showExclusion?i.getString("Audience_Campaign_Target_Setting_Job_Function_Grid_Column_Target"):"",template:function(e){var t=e.value.CriterionType;return O()({isIncluded:"JobFunction"===t,isExcluded:"NegativeJobFunction"===t,includedString:i.getString("Audience_Campaign_Target_Setting_Included_Status"),excludedString:i.getString("Audience_Campaign_Target_Setting_Excluded_Status")})},property:u.a.identity}),a(u.a.extend({},j("JobFunctionCriterion"),{i18n:i,name:"name",title:"Audience_Campaign_Target_Setting_Job_Function_Grid_Column_Job_Functions"}))].concat(Object(n.a)("adgroup"===e.currentLevel&&(this.options.showBidOnlyNote||this.options.showExclusion)&&this.isFilterCriterionLevelAdGroup&&this.supportCashbackSettings?[a(ee(this,i))]:[]),[a({name:"removeAll",template:function(){return E()({i18n:i})},headClasses:["linked-in-target-grid__remove-body"],bodyClasses:["text-right"]})])};this.options.isolatedGrid?this.options.isForVNext?this.options.gridConfig=function(e){return{columns:[{name:"JobFuncitonTarget",property:u.a.identity,html:"<span>".concat(i.getString("Audience_Campaign_Target_Setting_Job_Function_".concat(e,"_Grid_Title")),"</span>"),columns:[a(u.a.extend({},M(e),{headClasses:"hide"})),a(u.a.extend({},j("JobFunctionCriterion"),{name:"name",headClasses:"hide"}))]},a(P(i))]}}:this.options.gridConfig=function(e){return{columns:[a(u.a.extend({},j("JobFunctionCriterion"),{name:"name",html:O()({isIncluded:"Included"===e,isExcluded:"Excluded"===e,includedString:i.getString("Audience_Campaign_Target_Setting_Job_Function_".concat(e,"_Status")),excludedString:i.getString("Audience_Campaign_Target_Setting_Job_Function_".concat(e,"_Status"))})})),a(P(i))]}}:this.options.gridConfig=o,this.searchView=new me(this.options),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}}]),t}(L),ve=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="JobFunction",this.type="JobFunction",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.showBidOnlyNote=e.showBidOnlyNote,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:null,this.viewContext=e.viewContext||{},this.supportCashbackSettings=e.supportCashbackSettings,this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"onBidAdjChange",value:function(e){Q(this,e,"JobFunction")}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new fe({currentLevelTargetInfo:this.currentLevelTargetInfo,criterionType:this.criterionType,type:this.type,showBidOnlyNote:this.showBidOnlyNote,showExclusion:this.showExclusion,defaultBidAdjustment:this.defaultBidAdjustment,currentLevel:this.viewContext.level,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext,isFilterCriterionLevelAdGroup:this.isFilterCriterionLevelAdGroup})}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Job_Function_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_JobFunction"}}]),t}(de),be=i("nhz9"),ye=i("ahWh"),Se=i.n(ye),we=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this;this.options=e,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:0,this.listenTo(this.currentLevelTargetInfo,"".concat(this.currentLevelTargetInfo.resourceName,"IndustryChanged"),function(){return t.onCriterionChange()}),this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.searchTreeInitializationPromise=this.initializeSearchTree(),this.defaultCashbackPercent=e.defaultCashbackPercent,this.refreshTargetedStates()}},{key:"render",value:function(){var e=this;return this.$el.html(Se()(this)),this.searchTreeInitializationPromise.then(function(){e.treeView.render(),e.$(".search-result-view-container").append(e.treeView.$el)}),this}},{key:"setDefaultCashbackPercent",value:function(e){this.defaultCashbackPercent=e}},{key:"onInclude",value:function(e){var t=g.criterionHelper.buildLinkedInCriterion("Industry",e,!0,this.defaultBidAdjustment,this.defaultCashbackPercent);return this.currentLevelTargetInfo.createAsync(t)}},{key:"onExclude",value:function(e){var t=g.criterionHelper.buildLinkedInCriterion("Industry",e,!1,this.defaultBidAdjustment);return this.currentLevelTargetInfo.createAsync(t)}},{key:"initializeSearchTree",value:function(){var e=this,t=p.a.get("component/http/channel/odata"),i=p.a.get("audienceCampaignPageContext"),n="Customers(".concat(i.CurrentCustomerId,")/Accounts(").concat(i.CurrentAccount.Id,")/Demographics/");return t.get(n+"Model.Industry").then(function(t){return e.processIndustryRowData(t.value)}).then(function(t){var i={i18n:e.i18n,actions:function(){var t=[];return e.showExclusion&&t.push({title:e.i18n.getString("Audience_Campaign_Target_Setting_Exclude_Action"),callback:function(t){return e.onExclude(t.data)}}),t.push({title:e.i18n.getString("Audience_Campaign_Target_Setting_Include_Action"),callback:function(t){return e.onInclude(t.data)}}),t}(),setLeafState:function(t){var i={shouldSetState:!1,stateValue:""};return u.a.contains(e.targetedIndustryIds,t.Id)?(i.shouldSetState=!0,i.stateValue=e.i18n.getString("Audience_Campaign_Target_Setting_Included_Status")):u.a.contains(e.excludedIndustryIds,t.Id)&&(i.shouldSetState=!0,i.stateValue=e.i18n.getString("Audience_Campaign_Target_Setting_Excluded_Status")),i},placeHolderText:e.i18n.getString("Audience_Campaign_Target_Setting_Industry_Search_Placeholder")};e.treeView=new be.Treeview(t,i)})}},{key:"updateSearchResult",value:function(){this.treeView&&this.treeView.updateView()}},{key:"processIndustryRowData",value:function(e){var t={children:[]};return u.a.each(e,function(e){var i={title:e.Name,data:e};u.a.some(t.children,function(t){return t.title===e.IndustryGroupName})||t.children.push({title:e.IndustryGroupName,children:[]}),u.a.findWhere(t.children,{title:e.IndustryGroupName}).children.push(i)}),t}},{key:"onCriterionChange",value:function(){this.refreshTargetedStates(),this.updateSearchResult()}},{key:"refreshTargetedStates",value:function(){var e=this.currentLevelTargetInfo.getAllByType("Industry");this.targetedIndustryIds=u.a.map(e,function(e){return"Industry"===e.CriterionType?parseInt(e.Criterion.IndustryCriterion.Target,10):-1}),this.excludedIndustryIds=u.a.map(e,function(e){return"NegativeIndustry"===e.CriterionType?parseInt(e.Criterion.IndustryCriterion.Target,10):-1})}}]),t}(m.a.View),Ce=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.i18nKeys={titleKey:"Audience_Campaign_Target_Setting_Industry_Title",helpKey:"pop_BA_CampaignCreate_AudTargets_Industry",descriptionKey:"Audience_Campaign_Target_Setting_Industry_Description"},this.criterionName="Industry",this.currentLevelTargetInfo=e.currentLevelTargetInfo;var i=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),a=p.a.get("component/bingads-grid/shared/column"),r=p.a.get("audienceCampaignPageContext");this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup||r.isFilterCriterionLevelAdGroup,this.supportCashbackSettings=e.supportCashbackSettings;var o={columns:[a({name:"isIncludedOrExcluded",title:this.showExclusion?i.getString("Audience_Campaign_Target_Setting_Industry_Grid_Column_Target"):"",template:function(e){var t=e.value.CriterionType;return O()({isIncluded:"Industry"===t,isExcluded:"NegativeIndustry"===t,includedString:i.getString("Audience_Campaign_Target_Setting_Included_Status"),excludedString:i.getString("Audience_Campaign_Target_Setting_Excluded_Status")})},property:u.a.identity}),a(u.a.extend({},j("IndustryCriterion"),{i18n:i,name:"name",title:"Audience_Campaign_Target_Setting_Industry_Grid_Column_Industries"}))].concat(Object(n.a)("adgroup"===e.currentLevel&&(this.options.showBidOnlyNote||this.options.showExclusion)&&this.isFilterCriterionLevelAdGroup&&this.supportCashbackSettings?[a(ee(this,i))]:[]),[a({name:"removeAll",template:function(){return E()({i18n:i})},headClasses:["linked-in-target-grid__remove-body"],bodyClasses:["text-right"]})])};this.options.isolatedGrid?this.options.isForVNext?this.options.gridConfig=function(e){return{columns:[{name:"IndustryTarget",property:u.a.identity,html:"<span>".concat(i.getString("Audience_Campaign_Target_Setting_Industry_".concat(e,"_Grid_Title")),"</span>"),columns:[a(u.a.extend({},M(e),{headClasses:"hide"})),a(u.a.extend({},j("IndustryCriterion"),{name:"IndustryName",headClasses:"hide"}))]},a(P(i))]}}:this.options.gridConfig=function(e){return{columns:[a({name:"IndustryName",template:function(e){return e.value.Criterion.IndustryCriterion.Name},property:u.a.identity,html:O()({isIncluded:"Included"===e,isExcluded:"Excluded"===e,includedString:i.getString("Audience_Campaign_Target_Setting_Industry_".concat(e,"_Status")),excludedString:i.getString("Audience_Campaign_Target_Setting_Industry_".concat(e,"_Status"))})}),a(P(i))]}}:this.options.gridConfig=o,this.searchView=new we(this.options),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}}]),t}(L),xe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="Industry",this.type="Industry",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.showBidOnlyNote=e.showBidOnlyNote,this.showExclusion=!u.a.has(e,"showExclusion")||e.showExclusion,this.defaultBidAdjustment=u.a.has(e,"defaultBidAdjustment")?e.defaultBidAdjustment:null,this.supportCashbackSettings=e.supportCashbackSettings,this.viewContext=e.viewContext||{},this.isFilterCriterionLevelAdGroup=e.isFilterCriterionLevelAdGroup,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"onBidAdjChange",value:function(e){Q(this,e,"Industry")}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new Ce({currentLevelTargetInfo:this.currentLevelTargetInfo,criterionType:this.criterionType,type:this.type,showBidOnlyNote:this.showBidOnlyNote,showExclusion:this.showExclusion,defaultBidAdjustment:this.defaultBidAdjustment,currentLevel:this.viewContext.level,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext,isFilterCriterionLevelAdGroup:this.isFilterCriterionLevelAdGroup})}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Industry_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Industry"}}]),t}(de),ke=i("5vAe"),Ae=i.n(ke),Te=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this;this.options=u.a.defaults(e,{campaignId:"",adgroupId:"",level:"adGroup"}),this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.titleKey=e.titleKey,this.helpKey=e.helpKey,this.descriptionKey=e.descriptionKey,this.errorsView=new g.AudienceCampaignErrorsView,this.selections=e.selections,this.hasSavedSelections=!1,u.a.each(this.selections,function(i){i.isSelected=!1,e.savedSelections&&e.savedSelections.length>0&&(t.hasSavedSelections=!0,u.a.contains(e.savedSelections,i.id)&&(i.isSelected=!0))})}},{key:"saveSnapshot",value:function(){this.selectionsSnapshot=Object(y.cloneDeep)(this.selections),this.criterionsSnapshot=Object(y.cloneDeep)(this.currentLevelTargetInfo.getAllByType(this.options.criterionType)),this.hasSavedSelections||(this.onSelectAll(),this.hasSavedSelections=!0)}},{key:"updateCriterionDataAsync",value:function(){var e=this;if(u.a.isEqual(this.selectionsSnapshot,this.selections))return N.a.resolve();var t=[];return u.a.each(this.selectionsSnapshot,function(i,n){if(!i.isSelected&&e.selections[n].isSelected){var a=Object(g.createCriterion)(e.options.criterionType,n),r=e.deleteSameCriterionIfExistsAsync(a).then(function(){return e.currentLevelTargetInfo.createAsync(a)});t.push(r)}else if(i.isSelected&&!e.selections[n].isSelected){var o=e.getSavedCriterionByKey(n),s=e.currentLevelTargetInfo.destroyAsync(o.Id).then(function(){var t=Object(g.createCriterion)(e.options.criterionType,n);return t.CriterionType="Negative".concat(t.CriterionType),e.currentLevelTargetInfo.createAsync(t)});t.push(s)}}),N.a.resolve(t)}},{key:"getConfigs",value:function(){return{Age:Object(g.ageSettingOptionsFactory)(!0),Gender:Object(g.genderSettingOptionsFactory)(!0),Device:g.deviceSettingOptions}}},{key:"deleteSameCriterionIfExistsAsync",value:function(e){var t=this,i=this.currentLevelTargetInfo.getAllByType(e.Criterion.Type),n=this.getConfigs();return u.a.each(i,function(i){return i.Criterion["".concat(i.Criterion.Type,"Criterion")][n[i.Criterion.Type].criterionTypeTarget]===e.Criterion["".concat(e.Criterion.Type,"Criterion")][n[e.Criterion.Type].criterionTypeTarget]?t.currentLevelTargetInfo.destroyAsync(i.Id):N.a.resolve(!0)}),N.a.resolve()}},{key:"getSavedCriterionByKey",value:function(e){var t=this,i=this.currentLevelTargetInfo.getAllByType(this.options.criterionType);return u.a.find(i,function(i){return i.Criterion["".concat(t.options.criterionType,"Criterion")]["".concat(t.options.criterionTypeTarget)]===e})}},{key:"render",value:function(){return this.$el.html(Ae()(this)),this.$(".errors-container").append(this.errorsView.render().$el),this}},{key:"onSelectAll",value:function(){var e=!this.isAllSelected();this.$(":checkbox").prop("checked",e),u.a.each(this.selections,function(t){t.isSelected=e}),this.onTargetUpdated()}},{key:"onCheckboxClicked",value:function(e){var t=B()(e.target),i=t.is(":checked");this.selections[t[0].id].isSelected=i,this.onTargetUpdated()}},{key:"isAllSelected",value:function(){var e=u.a.pluck(this.selections,"isSelected"),t=u.a.every(e,function(e){return e});return t}},{key:"isNoneSelected",value:function(){var e=u.a.pluck(this.selections,"isSelected"),t=u.a.every(e,function(e){return!e});return t}},{key:"onTargetUpdated",value:function(){var e=this;this.errorsView.removeErrors(),this.isAllSelected()?this.$(".select-all-button").text(this.i18n.getString("Audience_Campaign_Target_Setting_Deselect_All_Label")):(this.$(".select-all-button").text(this.i18n.getString("Audience_Campaign_Target_Setting_Select_All_Label")),this.isNoneSelected()&&this.errorsView.setErrorMessage(this.i18n.getString("Audience_Campaign_Target_Setting_No_Selection_Error"))),this.options.isLiveUpdateEnabled&&this.updateCriterionDataAsync().then(function(){e.saveSnapshot()})}},{key:"validate",value:function(){return!this.isNoneSelected()}},{key:"events",get:function(){return{"click .select-all-button":"onSelectAll","click :checkbox":"onCheckboxClicked"}}}]),t}(m.a.View),_e=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var i=!u.a.has(e,"isAudienceCampaign")||e.isAudienceCampaign;this.options=Object(g.ageSettingOptionsFactory)(i),u.a.extend(this.options,e);var n=this.options.currentLevelTargetInfo.getAllByType(this.options.criterionType),a=u.a.filter(n,function(e){return"Age"===e.CriterionType}),r=[];a.length>0&&(r=u.a.map(a,function(e){return e.Criterion.AgeCriterion.Target})),this.options.savedSelections=r,Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}}]),t}(Te),Ee=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="Age",this.type="Age",this.isLiveUpdateEnabled=!!e.isLiveUpdateEnabled&&e.isLiveUpdateEnabled,this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.isAudienceCampaign=!u.a.has(e,"isAudienceCampaign")||e.isAudienceCampaign,this.shouldValidate=this.isAudienceCampaign,this.isEditDisabled=!this.isAudienceCampaign,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new _e({isAudienceCampaign:this.isAudienceCampaign,currentLevelTargetInfo:this.currentLevelTargetInfo,isLiveUpdateEnabled:this.isLiveUpdateEnabled})}},{key:"saveSnapshot",value:function(){this.targetSelectionView.saveSnapshot()}},{key:"updateCriterionDataAsync",value:function(){this.targetSelectionView.updateCriterionDataAsync()}},{key:"validate",value:function(){return(!this.shouldValidate||!this.targetSelectionView||this.targetSelectionView.validate())&&Object(l.a)(Object(s.a)(t.prototype),"validate",this).call(this)}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Age_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Age"}}]),t}(de),Ie=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=g.deviceSettingOptions,u.a.extend(this.options,e);var i=this.options.currentLevelTargetInfo.getAllByType(this.options.criterionType),n=[];i.length>0&&(n=u.a.map(i,function(e){return e.Criterion.DeviceCriterion.DeviceName})),this.options.savedSelections=n,this.hasSavedBefore=!1,Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}},{key:"isTargeted",value:function(){return!0}}]),t}(Te),Oe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="Device",this.type="Device",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.isLiveUpdateEnabled=!!e.isLiveUpdateEnabled&&e.isLiveUpdateEnabled,this.isEditDisabled=!0,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new Ie({viewContext:this.viewContext,currentLevelTargetInfo:this.currentLevelTargetInfo,isLiveUpdateEnabled:this.isLiveUpdateEnabled})}},{key:"saveSnapshot",value:function(){this.targetSelectionView.saveSnapshot()}},{key:"updateCriterionDataAsync",value:function(){this.targetSelectionView.updateCriterionDataAsync()}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Device_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Device"}}]),t}(de),Pe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var i=!u.a.has(e,"isAudienceCampaign")||e.isAudienceCampaign;this.options=Object(g.genderSettingOptionsFactory)(i),u.a.extend(this.options,e);var n=this.options.currentLevelTargetInfo.getAllByType(this.options.criterionType),a=u.a.filter(n,function(e){return"Gender"===e.CriterionType}),r=[];a.length>0&&(r=u.a.map(a,function(e){return e.Criterion.GenderCriterion.Target})),this.options.savedSelections=r,Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,this.options)}}]),t}(Te),Me=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.criterionType="Gender",this.type="Gender",this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.isLiveUpdateEnabled=!!e.isLiveUpdateEnabled&&e.isLiveUpdateEnabled,this.isAudienceCampaign=!u.a.has(e,"isAudienceCampaign")||e.isAudienceCampaign,this.shouldValidate=this.isAudienceCampaign,this.isEditDisabled=!this.isAudienceCampaign,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new Pe({isAudienceCampaign:this.isAudienceCampaign,currentLevelTargetInfo:this.currentLevelTargetInfo,isLiveUpdateEnabled:this.isLiveUpdateEnabled})}},{key:"saveSnapshot",value:function(){this.targetSelectionView.saveSnapshot()}},{key:"updateCriterionDataAsync",value:function(){this.targetSelectionView.updateCriterionDataAsync()}},{key:"validate",value:function(){return(!this.shouldValidate||!this.targetSelectionView||this.targetSelectionView.validate())&&Object(l.a)(Object(s.a)(t.prototype),"validate",this).call(this)}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Gender_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Gender"}}]),t}(de),je=i("iH9I"),Le=i("7K8j"),De=i.n(Le),Re=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.i18n=p.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.isTitleLabelHidden=e.isTitleLabelHidden,this.audienceTargetInfo=e.currentLevelTargetInfo,this.audienceAssociationView=this.audienceTargetInfo.aimAudienceAssociationView}},{key:"render",value:function(){return this.$el.html(De()(this)),this.$(".audience-association-view-container").html(this.audienceAssociationView.$el),this}},{key:"reloadAudienceData",value:function(e){return this.audienceTargetInfo.reloadAudienceData(e)}},{key:"setOnAudiencesTargetChangeCallback",value:function(e){this.audienceTargetInfo.setOnAudiencesTargetChangeCallback(e)}}]),t}(m.a.View),Ne=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.criterionType="Audience",this.perfMarker=e.perfMarker,this.viewContext=e.viewContext,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new Re({currentLevelTargetInfo:this.currentLevelTargetInfo})}},{key:"reloadAudienceData",value:function(e){return this.targetSelectionView?this.targetSelectionView.reloadAudienceData(e):N.a.resolve(!1)}},{key:"setOnAudiencesTargetChangeCallback",value:function(e){this.targetSelectionView&&this.targetSelectionView.setOnAudiencesTargetChangeCallback(e)}},{key:"render",value:function(){var e=this;return Object(je.asyncFunctionWithPerfMarker)(this.perfMarker.createChild("getAdGroupCriterions"),this.currentLevelTargetInfo.initializeWithAdGroupAsync,this.currentLevelTargetInfo)(this.viewContext.currentCampaign.Id,this.viewContext.currentAdGroup.Id).then(function(){console.log(e.currentLevelTargetInfo.getAllNoneEmptyTypeKeys()),Object(l.a)(Object(s.a)(t.prototype),"render",e).call(e)}),this}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Audience_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Audience"}}]),t}(de),Ve=i("wKMv"),Be=i.n(Ve),Fe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.viewContext=this.options.viewContext,this.supportCashbackSettings=e.supportCashbackSettings,this.defaultCashbackPercent=e.defaultCashbackPercent,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo}},{key:"render",value:function(){var e=this;return this.$el.html(Be()()),this.isAudienceCampaign?(p.a.get("component/js-data-campaign/index").Intermediate.refresh(this.currentLevelTargetInfo.resourceName,[]).then(function(){e.initializeLocationTargetsView(),e.$(".location-setting-controller").empty().append(e.locationTargetsView.render().$el)}),this):this}},{key:"initializeLocationTargetsView",value:function(){var e=this;if(this.isAudienceCampaign){var t=p.a.get("campaignui/feature/location-targets/view/locationTargets"),i=u.a.contains(["adgroup-settings","campaign-settings"],this.options.scenario),n={level:this.viewContext.level,showPhysicalIntentView:!1,targetOption:"everywhere",campaignId:this.viewContext.currentCampaign?this.viewContext.currentCampaign.Id:"",adgroupId:this.viewContext.currentAdGroup?this.viewContext.currentAdGroup.Id:"",deps:this.options.deps||{},supportCashbackSettings:this.supportCashbackSettings,defaultCashbackPercent:this.defaultCashbackPercent,isForVNext:!!this.options.deps&&this.options.deps.isNewUI};i&&(n.scenario=this.options.scenario),"adgroup-creation"===this.options.scenario&&(n.scenario="adgroup-settings"),this.locationTargetsView=new t(n),p.a.get("component/event-dispatcher/index").on("level:changed",function(t){var i="campaign"===t;e.currentLevelTargetInfo.setParentLevelToggle("Radius",i),e.currentLevelTargetInfo.setParentLevelToggle("Location",i),e.currentLevelTargetInfo.setParentLevelToggle("NegativeLocation",i)},this.locationTargetsView),i||(this.onLocationTargetOptionChanged(this.locationTargetsView.getValues().locations),this.locationTargetsView.on("locationTargetOptionChanged",function(t){return e.onLocationTargetOptionChanged(t)}))}}},{key:"getCampaignLocationCriterions",value:function(){return this.isAudienceCampaign?this.locationTargetsView.campaignCriterions:[]}},{key:"getAllLocations",value:function(){return this.isAudienceCampaign?this.locationTargetsView.getValues({level:this.viewContext.level},{keepAllLocations:!0}):{}}},{key:"getData",value:function(){return this.isAudienceCampaign?this.locationTargetsView.getValues({level:this.viewContext.level}):{}}},{key:"onLocationTargetOptionChanged",value:function(e){var t=this,i=[];return i.push(this.currentLevelTargetInfo.destroyTargetTypeAsync("Radius")),i.push(this.currentLevelTargetInfo.destroyTargetTypeAsync("Location")),i.push(this.currentLevelTargetInfo.destroyTargetTypeAsync("NegativeLocation")),N.a.all(i).then(function(){u.a.each(e,function(e){return t.currentLevelTargetInfo.createAsync(e)})})}},{key:"reloadLocationView",value:function(e){this.locationTargetsView&&this.locationTargetsView.reloadLocationView(e)}},{key:"isAudienceCampaign",get:function(){return"audience"===Object(g.getCampaignType)(this.viewContext.currentCampaign)}}]),t}(m.a.View),Ue=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.criterionTypes=["Location","Radius"],this.viewContext=e.viewContext,this.scenario=e.scenario,this.deps=e.deps||{},this.supportCashbackSettings=e.supportCashbackSettings,e.showTargetSelection&&this.initializeTargetSelectionView(),Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e)}},{key:"initializeTargetSelectionView",value:function(){this.targetSelectionView=new Fe({currentLevelTargetInfo:this.currentLevelTargetInfo,viewContext:this.viewContext,scenario:this.scenario,deps:this.deps,supportCashbackSettings:this.supportCashbackSettings})}},{key:"validate",value:function(){return!!Object(l.a)(Object(s.a)(t.prototype),"validate",this).call(this)&&(!this.targetSelectionView||!this.targetSelectionView.locationTargetsView||this.targetSelectionView.locationTargetsView.viewmodel.validate("AdGroupCriterion"))}},{key:"getCampaignLocationCriterions",value:function(){return this.targetSelectionView?this.targetSelectionView.getCampaignLocationCriterions():[]}},{key:"getAllLocations",value:function(){return this.targetSelectionView?this.targetSelectionView.getAllLocations():{}}},{key:"getData",value:function(){return this.targetSelectionView?this.targetSelectionView.getData():{}}},{key:"reloadLocationView",value:function(e){this.targetSelectionView&&this.targetSelectionView.reloadLocationView(e)}},{key:"resetSupportCashbackSettings",value:function(e,i){if(this.targetSelectionView){this.targetSelectionView.supportCashbackSettings=e;var n=this.targetSelectionView.locationTargetsView;n&&n.toggleCashbackPercentColumns(e,i)}else Object(l.a)(Object(s.a)(t.prototype),"resetSupportCashbackSettings",this).call(this,e,i)}},{key:"titleKey",get:function(){return"Audience_Campaign_Target_Setting_Location_Title"}},{key:"helpKey",get:function(){return"pop_BA_CampaignCreate_AudTargets_Location"}}]),t}(de);i.d(t,"CompanyNameTargetSetting",function(){return ie}),i.d(t,"CompanyNameCriterionSetting",function(){return ue}),i.d(t,"JobFunctionCriterionSetting",function(){return ve}),i.d(t,"JobFunctionTargetSetting",function(){return fe}),i.d(t,"IndustryCriterionSetting",function(){return xe}),i.d(t,"IndustryTargetSetting",function(){return Ce}),i.d(t,"AgeCriterionSetting",function(){return Ee}),i.d(t,"DeviceCriterionSetting",function(){return Oe}),i.d(t,"GenderCriterionSetting",function(){return Me}),i.d(t,"AudienceCriterionSetting",function(){return Ne}),i.d(t,"LocationCriterionSetting",function(){return Ue}),i.d(t,"TargetOrBidSelector",function(){return se})},"ONI+":function(e,t,i){var n,a;n=[i("UT4o"),i("Glrc"),i("muKe"),i("CE5c")],void 0===(a=function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=25)}([,,,,,,,,function(t,i){t.exports=e},,,,,function(e,i){e.exports=t},,,,,,function(e,t){e.exports=i},,,,,,function(e,t,i){e.exports=i(26)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AlertCenter",{enumerable:!0,get:function(){return a.default}});var n,a=(n=i(27))&&n.__esModule?n:{default:n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(i(8)),a=i(19),r=l(i(28)),o=l(i(33)),s=l(i(36));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=["Error","Warning","Info","Confirmation"],m="Confirmation";function f(e){return e||m}function v(e,t){return e.getChild("level(".concat(f(t),")"))}function b(e,t){for(var i=this,n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];this.toastId=this.show.apply(this,[{message:e,level:t,dismissible:!0},this.toastId].concat(a)),this.once("rendered",function(){window.scrollTo(0,0)}),clearTimeout(this.toastTimerId),this.toastTimerId=setTimeout(function(){i.dismiss(i.toastId)},1e4)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var i,l,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.DeterministicView),i=t,(l=[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.useCarouselForErrors,a=void 0!==i&&i,s=t.i18n;n.default.each(h,function(t){var i=function(e,t,i){return new("Error"===e&&t?o.default:r.default)({level:e,i18n:i})}(t,a,s);e.setChild("level(".concat(t,")"),i),e.listenTo(i,"ignore",function(t){e.trigger("ignore",t)})})}},{key:"newAlertId",value:function(){return r.default.newId()}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.newAlertId();return this.model.set(t,f(e.level)),v(this,e.level).show(e,t)}},{key:"dismiss",value:function(e){v(this,this.model.get(e)).dismiss(e)}},{key:"dismissAll",value:function(){var e=this;n.default.each(h,function(t){return v(e,t).dismissAll()})}},{key:"showError",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];return this.show.apply(this,[{message:e,level:"Error"},t].concat(n))}},{key:"showWarning",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];return this.show.apply(this,[{message:e,level:"Warning"},t].concat(n))}},{key:"showInfo",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];return this.show.apply(this,[{message:e,level:"Info"},t].concat(n))}},{key:"showConfirmation",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];return this.show.apply(this,[{message:e,level:"Confirmation"},t].concat(n))}},{key:"toastError",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];b.call.apply(b,[this,e,"Error"].concat(i))}},{key:"toastWarning",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];b.call.apply(b,[this,e,"Warning"].concat(i))}},{key:"toastInfo",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];b.call.apply(b,[this,e,"Info"].concat(i))}},{key:"toastConfirmation",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];b.call.apply(b,[this,e,"Confirmation"].concat(i))}},{key:"template",get:function(){return function(){return(0,s.default)({levels:h})}}}])&&d(i.prototype,l),c&&d(i,c),t}();t.default=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(8)),a=i(19),r=s(i(29)),o=s(i(32));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,i){return(u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=a.helpers.updateView,m=a.helpers.ensureChildView,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var i,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.DeterministicView),i=t,l=[{key:"newId",value:function(){return n.default.uniqueId("alert-")}}],(s=[{key:"initialize",value:function(e){var t=e.level;this.$el.attr({"data-level":t}),this.setState()}},{key:"setState",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.alertIds,o=void 0===a?[]:a,s=i.alerts,l=void 0===s?{}:s;return n.default.each(o,function(t){m(e,"alert(".concat(t,")"),r.default,{},{ignore:function(){e.trigger("ignore",{id:t,alert:l[t]}),e.dismiss(t)}}).setState(l[t])}),u(p(t.prototype),"setState",this).call(this,{alertIds:o})}},{key:"getState",value:function(){var e=this,i=u(p(t.prototype),"getState",this).call(this).alertIds,a=void 0===i?[]:i;return{alertIds:a,alerts:n.default.object(a,n.default.map(a,function(t){return e.getChild("alert(".concat(t,")")).getState()}))}}},{key:"show",value:function(e,t){var i,a,r,o=this.getState(),s=o.alertIds,l=o.alerts;return this.setState({alertIds:n.default.union(s,[t]),alerts:n.default.defaults((i={},a=t,r=e,a in i?Object.defineProperty(i,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[a]=r,i),l)}),t}},{key:"dismiss",value:function(e){var t=this.getState().alertIds;h(this,{alertIds:n.default.without(t,e)})}},{key:"dismissAll",value:function(){var e=this,t=this.getState().alertIds;n.default.each(t,function(t){return e.dismiss(t)})}},{key:"className",get:function(){return"alert-center__level"}},{key:"attributes",get:function(){return{role:"group"}}},{key:"tagName",get:function(){return"ol"}},{key:"template",get:function(){return o.default}}])&&c(i.prototype,s),l&&c(i,l),t}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(8)),a=i(19),r=s(i(30)),o=s(i(31));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,i){return(u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h={Error:"alert-danger",Warning:"alert-warning",Confirmation:"alert-success",Info:"alert-info"},m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var i,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.DeterministicView),i=t,(s=[{key:"remove",value:function(){this.$el.slideUp(),u(p(t.prototype),"remove",this).call(this)}},{key:"attributes",get:function(){return{role:"listitem"}}},{key:"tagName",get:function(){return"li"}},{key:"events",get:function(){var e=this;return{"click .alert__action":function(){return e.getState().action.callback()},"click .alert-ignore":function(){e.trigger("ignore"),e.remove()}}}},{key:"template",get:function(){return function(e){var t=e.model,i=t.level,a=void 0===i?"Confirmation":i,s=t.hasIcon,l=void 0!==s&&s,c=t.customCssClass,d=t.icon,u=void 0===d?o.default:d,p=t.dismissible,g=void 0===p?"Error"!==a:p,m=t.message,f=t.action,v=c||h[a];return(0,r.default)({cssClass:v,level:a,hasIcon:l,icon:n.default.isFunction(u)?u(t):u,dismissible:g,message:m,action:f})}}}])&&c(i.prototype,s),l&&c(i,l),t}();t.default=m},function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l){i=i+"<div"+n.attr("class",n.classes(["alert",a],[!1,!0]),!1,!0)+' role="alert">',o&&(i+=null==(t=s)?"":t),i=i+'<div class="alert__content"><span class="alert__message">'+(null==(t=l)?"":t)+"</span>",e&&(i=i+'<button class="btn btn-default alert__action" type="button">'+n.escape(null==(t=e.message)?"":t)+"</button>"),i+="</div>",r&&(i+='<button class="close alert-ignore clickable" type="button" tabindex="0"></button>'),i+="</div>"}.call(this,"action"in a?a.action:"undefined"!==typeof action?action:void 0,"cssClass"in a?a.cssClass:"undefined"!==typeof cssClass?cssClass:void 0,"dismissible"in a?a.dismissible:"undefined"!==typeof dismissible?dismissible:void 0,"hasIcon"in a?a.hasIcon:"undefined"!==typeof hasIcon?hasIcon:void 0,"icon"in a?a.icon:"undefined"!==typeof icon?icon:void 0,"message"in a?a.message:"undefined"!==typeof message?message:void 0),i}},function(e,t,i){"use strict";i(13);e.exports=function(e){var t="";return t+='<span class="alert__icon" aria-hidden="true"></span>'}},function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t="",i=e||{};return function(e){(function(){var i=e.alertIds;if("number"==typeof i.length)for(var a=0,r=i.length;a<r;a++){var o=i[a];t=t+"<div"+n.attr("data-ref","alert("+o+")",!0,!0)+"></div>"}else for(var a in r=0,i)r++,o=i[a],t=t+"<div"+n.attr("data-ref","alert("+o+")",!0,!0)+"></div>"}).call(this)}.call(this,"model"in i?i.model:"undefined"!==typeof model?model:void 0),t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(34);var n=o(i(8)),a=o(i(28)),r=o(i(35));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,i){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var i,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.default),i=t,(o=[{key:"initialize",value:function(e){var i=e.level,a=e.i18n;this.i18n=a,this.carouselId=n.default.uniqueId("alert-carousel-"),d(u(t.prototype),"initialize",this).call(this,{level:i})}},{key:"template",get:function(){return r.default}}])&&l(i.prototype,o),s&&l(i,s),t}();t.default=g},function(e,t){e.exports=n},function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){if(1===a.alertIds.length)i=i+"<div"+n.attr("data-ref","alert("+a.alertIds[0]+")",!0,!0)+"></div>";else if(a.alertIds.length>1){var o="#"+r.carouselId,s=a.alertIds.slice().reverse();i=i+'<div class="carousel slide"'+n.attr("id",r.carouselId,!0,!0)+' data-ride="carousel" data-interval="false"><div class="alert-center__pager"><a class="left carousel-control"'+n.attr("href",o,!0,!0)+' role="button" data-slide="prev"'+n.attr("aria-label",r.i18n.getString("Alert_CarouselPagination_Previous"),!0,!0)+'><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span></a><ol class="carousel-indicators">',function(){var a=s;if("number"==typeof a.length)for(var l=0,c=a.length;l<c;l++)a[l],i=i+"<li"+(n.attr("class",n.classes([0===l?"active":""],[!0]),!1,!0)+n.attr("data-target",o,!0,!0)+n.attr("data-slide-to",e(l),!0,!0))+">"+n.escape(null==(t=r.i18n.getString("Alert_CarouselPagination",{page:l+1,total:s.length}))?"":t)+"</li>";else for(var l in c=0,a)c++,a[l],i=i+"<li"+(n.attr("class",n.classes([0===l?"active":""],[!0]),!1,!0)+n.attr("data-target",o,!0,!0)+n.attr("data-slide-to",e(l),!0,!0))+">"+n.escape(null==(t=r.i18n.getString("Alert_CarouselPagination",{page:l+1,total:s.length}))?"":t)+"</li>"}.call(this),i=i+'</ol><a class="right carousel-control"'+n.attr("href",o,!0,!0)+' role="button" data-slide="next"'+n.attr("aria-label",r.i18n.getString("Alert_CarouselPagination_Next"),!0,!0)+'><span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a></div><div class="carousel-inner" role="listbox">',function(){var e=s;if("number"==typeof e.length)for(var t=0,a=e.length;t<a;t++){var r=e[t];i=i+"<div"+n.attr("class",n.classes(["item",0===t?"active":""],[!1,!0]),!1,!0)+"><div"+n.attr("data-ref","alert("+r+")",!0,!0)+"></div></div>"}else for(var t in a=0,e)a++,r=e[t],i=i+"<div"+n.attr("class",n.classes(["item",0===t?"active":""],[!1,!0]),!1,!0)+"><div"+n.attr("data-ref","alert("+r+")",!0,!0)+"></div></div>"}.call(this),i+="</div></div>"}}.call(this,"String"in a?a.String:"undefined"!==typeof String?String:void 0,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t="",i=e||{};return function(e){t+='<div class="alert-center"><ol role="list">',function(){var i=e;if("number"==typeof i.length)for(var a=0,r=i.length;a<r;a++){var o=i[a];t=t+'<li role="listitem"><div'+n.attr("data-ref","level("+o+")",!0,!0)+"></div></li>"}else for(var a in r=0,i)r++,o=i[a],t=t+'<li role="listitem"><div'+n.attr("data-ref","level("+o+")",!0,!0)+"></div></li>"}.call(this),t+="</ol></div>"}.call(this,"levels"in i?i.levels:"undefined"!==typeof levels?levels:void 0),t}}])}.apply(t,n))||(e.exports=a)},OUI5:function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("/xyZ"),o=i.n(r),s=i("G59r"),l=i.n(s),c=i("1gQY"),d=i.n(c),u=i("fE/Z"),p=i("nV5I"),g=i("SIz0"),h=i("vGzO"),m=i("Bxqc"),f=function(e){return l.a.format(e,"M/d/yyyy")},v=function(e){return l.a.format(e,"yyyy-MM-dd")};t.a=function(e){var t=e.name;return o.a.all([d.a.getPromise("$daterange"),Object(m.fetchPaginationConfig)(t,50),Object(g.getCustomColumnsPreference)(e.name),Object(p.getSegPreference)(e.name)]).spread(function(t,i){var n,r=i.pageSize,o=i.orderbyInfo,s=i.sortableHeader;if((e=a.a.defaults(e,{pageable:{}})).isDataFetchManagerSource?(e.query=e.query||{},n=e.query):n=e.dataSource,n.query=n.query||{},a.a.chain(e.plugins).result("columnChooser").result("customColumn").result("enabled",!1).value()){var l={CustomColumns:[],DateRange:{StartDate:v(t.start),EndDate:v(t.end)}};t.compared&&(l.ComparisonDateRange={StartDate:v(t.compared.start),EndDate:v(t.compared.end)});var c=u.default.currentAccount.Campaigns["Default.GridData"].$call({gridDataParameters:l});e.dataSource.options.entitySet=c,n.query.entitySet=c.toJSON()}e.pageable.pageSize=r,e.plugins&&e.plugins.pagination&&(e.plugins.pagination.pageSize=r),n.query.endDate=f(t.end),n.query.startDate=f(t.start),t.compared&&(n.query.endDate2=f(t.compared.end),n.query.startDate2=f(t.compared.start),n.query.comparisonEndDate=f(t.compared.end),n.query.comparisonStartDate=f(t.compared.start));var d=Object(p.getSegType)(e.name);d&&"None"!==d.segmentationType&&h.a.isTimeRangeValid(d.segmentationType)&&(n.query.SegmentationTypes=d.segmentationType),o&&o.length>0&&(n.orderby=o,e.sortableHeader=a.a.defaults(a.a.pick(s,"name","directionIndex"),e.sortableHeader))})}},OXuN:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("YK3D"),a=i.n(n),r=i("G9ZQ"),o=function(e){return!(!e||"Location"!==e.Type)&&(a.a.Permissions.IsLocationDeprecationEnabled&&(e.LocationStatus===r.LocationStatus.PendingDeprecation||e.LocationStatus===r.LocationStatus.Deprecated))}},OiEU:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="dropdown-search-selector__dropdown"><button class="row btn btn-default dropdown-toggle" type="button" role="menu" tabindex="0"'+n.attr("disabled",e.isDisabled,!0,!0)+'><div class="text-left col-xs-10"><div class="floatLeftContainer truncated"'+n.attr("option-id",e.selectOption.id,!0,!0)+">"+n.escape(null==(t=e.selectOption.value)?"":t)+'</div></div><div class="icon-right glyphicon glyphicon-chevron-down"></div></button><ul class="dropdown-menu">',function(){var e=a.customOptions;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var o=e[t];i=i+"<div"+n.attr("data-ref",o.id+"-container",!0,!0)+"></div>"}else for(var t in r=0,e)r++,o=e[t],i=i+"<div"+n.attr("data-ref",o.id+"-container",!0,!0)+"></div>"}.call(this),i+='<div data-ref="search-container"></div><div data-ref="selector-container"></div><div data-ref="pagination-container"></div></ul></div>'}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},OliZ:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koCharactersRemaining=t=function(e,t){this&&this.block,this&&this.attributes,i=i+'<div class="remaining-hint help-block"><span'+(n.attr("data-bind","text:"+e+".char_rem",!0,!0)+n.attr("id",t||e+"_CharactersRemaining",!0,!0))+' role="status" aria-live="polite"></span></div>'},a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},i+='<div class="form-horizontal campaign-settings__container"><input id="CampaignId" type="hidden" data-bind="value: Id"><div class="form-group">',a.koErrors(),i=i+'</div><div class="form-group"><h5 class="col-sm-2 control-label"><label id="Campaign_Name_Label">'+n.escape(null==(t=o?r.get("Experiment_Name"):r.get("Campaign_Name"))?"":t)+"</label>",a.popupHelp(l.CampaignName,r.get("Campaign_Name"),r),i=i+'</h5><div class="col-sm-4" role="presentation"><input class="name form-control" data-bind="value: Name, valueUpdate: &quot;input&quot;, attr: {&quot;aria-invalid&quot;: !Name.isValid()}, css: {&quot;validation-error&quot;: !Name.isValid()}"'+n.attr("placeholder",r.get("CampaignSetting_Placeholder_Name"),!0,!0)+' type="text" aria-required="true" aria-describedby="CampaignNameErrors Name_CharactersRemaining" aria-labelledby="Campaign_Name_Label">',a.koCharactersRemaining("Name"),i+='<div class="clear">',a.koValidationError("Name","CampaignNameErrors"),i=i+'<div class="copy-campaign-settings"></div></div></div></div><div data-bind="if: showTimeZoneText()"><div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=r.get("Campaign_TimeZone"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Settings_TimeZone",r.get("Campaign_TimeZone"),r),i+='</h5><div class="col-sm-4 form-control-static"><span data-bind="text: timeZoneText"></span></div></div></div>',s||(i+='<div class="form-group"><h5 class="col-sm-2 control-label">',o?i=i+"<label>"+n.escape(null==(t=r.get("Label_Experiment_Budget"))?"":t)+"</label>":(i=i+"<label>"+n.escape(null==(t=r.get("Label_Budget"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Budget_SharedBudget",r.get("Label_Budget"),r)),i+='</h5><div class="col-sm-8"><div class="budget-alert"></div><div class="budget"></div></div></div>'),i+='\x3c!-- ko if: isMixedDSACampaignRecommendation--\x3e<div class="dsa-container"></div>\x3c!-- /ko--\x3e',c&&!e&&(i=i+'<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=r.get("Campaign_Language"))?"":t)+"</label>",a.popupHelp(l.Language,r.get("Campaign_Language"),r),i+='</h5><div class="col-sm-4 language-setting"></div></div>'),i+='<div class="bidding-strategy__container"></div><div class="location-targets"></div>',c&&e&&(i=i+'<div class="form-group language-container"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=r.get("Campaign_Language"))?"":t)+"</label>",a.popupHelp(l.MultiLanguage,r.get("Campaign_Language"),r),i+='</h5><div class="col-sm-8 language-setting"></div></div><div class="form-group language-error-container" data-bind="css: { hide: !languageError() }"><div class="col-sm-2"></div><div class="error col-sm-8" data-bind="text: languageError" role="alert"></div></div>'),i=i+'<div class="disclaimer__container"></div>\x3c!-- ko if: isMixedDSACampaignCreate--\x3e<div class="mixed-mode-dsa-settings-container"><div class="form-group mixed-mode-dsa-settings-form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=r.get("Campaign_Mixed_Mode_DSA_Settings_Name"))?"":t)+"</label>",a.popupHelp("pop_BA_DSA_DynamicSearchAds",r.get("Campaign_Mixed_Mode_DSA_Settings_Name"),r),i=i+'</h5><div class="col-sm-8 mixed-model-dsa-settings-panel"><div class="dsa-switch-container"><div class="form-control-static description">'+n.escape(null==(t=r.get("Campaign_Mixed_Mode_DSA_Settings_Text"))?"":t)+'<a class="HelpTopic" href="javascript:void(0);" query="help:56794">'+n.escape(null==(t=r.getString("LearnMoreLinkText"))?"":t)+'</a></div><label class="checkbox-inline"><input class="dsa-switch" type="checkbox" data-bind="checked: isMixedModeDSASettingsChecked, enable: enableMixedModeDSASettings()"><div class="text">'+n.escape(null==(t=r.get("EnableMixedModeDSASettings"))?"":t)+'</div></label></div></div></div></div><div class="dsa-settings-container" data-bind="visible: isMixedModeDSASettingsChecked"></div>\x3c!-- /ko--\x3e\x3c!-- ko if: shouldShowCashbackSettings--\x3e<div class="cashback-settings-container"></div>\x3c!-- /ko--\x3e<div class="audienceSettings__container impression-tracking-urls"></div></div>'}.call(this,"IsCampaignMultipleLanguageEnabled"in r?r.IsCampaignMultipleLanguageEnabled:"undefined"!==typeof IsCampaignMultipleLanguageEnabled?IsCampaignMultipleLanguageEnabled:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isExperiment"in r?r.isExperiment:"undefined"!==typeof isExperiment?isExperiment:void 0,"isSignUpPage"in r?r.isSignUpPage:"undefined"!==typeof isSignUpPage?isSignUpPage:void 0,"popupIds"in r?r.popupIds:"undefined"!==typeof popupIds?popupIds:void 0,"showLanguage"in r?r.showLanguage:"undefined"!==typeof showLanguage?showLanguage:void 0),i}},OyVy:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="inline-location-recommendation-container form-group" style="margin-left: -7.5px"><div class="col-sm-6"><div class="form-group inline-location-recommendation-description" style="margin-top: 20px; margin-bottom: 20px;"><span data-bind="text: description"></span></div><div class="form-group"><div class="location-recommendation-grid-container"></div></div><div class="form-group" style="padding-top: 10px"><input class="apply btn btn-primary" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Apply"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"><input class="cancel btn btn-default" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Cancel"),!0,!0)+'></div></div><div class="col-sm-6" style="margin-bottom: 10px"><div class="location-recommendation-map-container"></div></div></div>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},P0Lv:function(e,t,i){"use strict";i.r(t),i.d(t,"uurlLevels",function(){return u}),i.d(t,"testUurl",function(){return p});var n=i("UT4o"),a=i.n(n),r=i("5iHu"),o=i.n(r),s=i("BPWY"),l=i.n(s),c=i("ZhOl"),d=i.n(c),u={Unknown:"Unknown",Account:"Account",Campaign:"Campaign",AdGroup:"AdGroup",Ad:"Ad",AdExtension:"AdExtension",Keyword:"Keyword"};function p(e,t,i,n,r){var s=t.isParallelTracking,c=t.accountFinalUrlSuffix,p=t.isInline,g=t.level,h=n.customerId,m=n.userId,f=n.accountId,v=n.campaignId,b=n.adGroupId,y=n.entityId,S=r.apiInLog,w="/Campaign/TestUurl/".concat(p?"TestUURLInline":"TestUURL","?cid=").concat(h,"&uid=").concat(m,"&aid=").concat(f,"&cmpid=").concat(v,"&adgid=").concat(b,"&adid=").concat(y,"&__adcenterAJAX=true"),C=a.a.pick.apply(a.a,[i].concat(["FinalUrls","TrackingUrlTemplate","UrlCustomParameters","FinalUrlSuffix"])),x=C.TrackingUrlTemplate;C.AccountFinalUrlSuffix=c,C.isParallelTracking=s,C.entityId=y,C.level=g,i.AutotagMsclkId&&(C.autotagMsclkId=!0),a.a.forEach(["TrackingUrlTemplate","UrlCustomParameters","FinalUrlSuffix"],function(e){"delete_value"===C[e]&&(C[e]="UrlCustomParameters"===e?[]:"")}),l.a.logMessage([d.a.LOGCATEGORY.TRACE],d.a.LOGLEVEL.INFO,S,"RequestUrl: ".concat(w," Payload: ").concat(C)),o.a.advertiser.ajaxPost({url:w,data:C,contentType:"application/json; charset=utf-8",ignoreBeforeAjax:!0,timeout:6e4,success:function(i,n){var r=i;if(i&&a.a.isArray(i)&&i.length)"Account"!==g&&"Campaign"!==g||(r.Result=7),l.a.logMessage([d.a.LOGCATEGORY.TRACE],d.a.LOGLEVEL.INFO,S,"Result: ".concat(i.Result," Status:").concat(n));else{var o="",c=4;i&&i.Errors&&i.Errors.length&&(o=i.Errors[0].Message,c=i.Errors[0].Code>0?i.Errors[0].Code:c),l.a.logMessage([d.a.LOGCATEGORY.TRACE],d.a.LOGLEVEL.INFO,S,"Unknown Result: ".concat(i," Error: ").concat(o," Status:").concat(n)),r=a.a.defaults({},{Result:c},i)}r.isParallelTracking=!!s,r.isMultipleResult=g===u.Account||g===u.Campaign,r.resultListTrackingTemplate=x,e.call(t,r)},error:function(i,n){var a;"timeout"===n?(l.a.logMessage([d.a.LOGCATEGORY.TRACE],d.a.LOGLEVEL.INFO,S,"Timeout: after ".concat(6e4,"ms Status:").concat(n)),a={Result:3}):(l.a.logMessage([d.a.LOGCATEGORY.TRACE],d.a.LOGLEVEL.INFO,S,"Unknown error: ".concat(i.responseText," Status:").concat(n)),a={Result:4}),a.isParallelTracking=!!s,e.call(t,a)}})}},P2fB:function(e,t,i){e.exports={set:"Set",remove:"Remove"}},P8Y4:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.adGroupOverrideInformation=t=function(a){this&&this.block,this&&this.attributes,i=i+'<div class="alert alert-info form-group" data-bind="visible: showAdGroupOverrideInformation" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.getString("Target_Settings_Override_Information_Line1",a))?"":t)+'</div><div class="alert-info-inline indent">'+n.escape(null==(t=e.getString("Target_Settings_Override_Information_Line2",a))?"":t)+'&nbsp;<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=e.getString("Learn_more_link_text"))?"":t)+"</a></div></div>"},i+="\x3c!--ko if: level === 'adgroup'--\x3e",a.adGroupOverrideInformation(e.getString("Target_Settings_Override_DeviceOS_Target")),i=i+'\x3c!--ko if: isForVNext()--\x3e<label class="control-label">'+n.escape(null==(t=e.getString("TargetingSettings_Devices"))?"":t)+"</label>\x3c!-- /ko--\x3e",!0===o&&(i=i+'<label class="type-normal" id="base-use-campaign-settings">'+n.escape(null==(t=e.get("CreationWorkflowsInheritanceFlagLabel"))?"":t)+'</label><div class="toggle-campaign-settings-switch form-control-static" data-bind="checked: useCampaignSettings"></div>'),i=i+"\x3c!-- /ko--\x3e\x3c!--ko if: level === 'campaign'--\x3e\x3c!--ko if: isForVNext()--\x3e<label class=\"control-label\">"+n.escape(null==(t=e.getString("TargetingSettings_Devices"))?"":t)+'</label>\x3c!-- /ko--\x3e\x3c!-- /ko--\x3e<div class="form-control-static">'+n.escape(null==(t=e.get("DeviceType_Description"))?"":t)+'</div><table class="advance-targeting-grid table new-advance-target-grid-container"'+n.attr("target-type",s,!0,!0)+'><thead><tr><th class="col-sm-4">'+n.escape(null==(t=e.get("DeviceType_Header"))?"":t)+'</th><th class="col-sm-3" colspan="2">'+n.escape(null==(t=e.get("Target_ColumnHeaderBidAdjustment"))?"":t),a.popupHelp("pop_BA_TargetingSettingsPopup_TargetTablet",e.get("Target_ColumnHeaderBidAdjustment"),e),i=i+'</th></tr></thead><tbody data-bind="foreach: devices"><tr class="deviceSettings target" data-bind="attr:{\'data-index\': $index()+1}"><td><div class="checkbox"><span class="checkbox-label" data-bind="text: displayName"></span><input class="targetDevice target" type="checkbox" data-bind="checked: isSelected, click: onClick, disable: readonlyBid"></div><div><span class="OSDisplayName" data-bind="text: osSelected"></span><span class="device-separator">'+n.escape(null==(t=" | ")?"":t)+"</span><a class=\"link expander2 collapsed\" data-bind=\"attr:{'data-target':'#os'+$index(),'data-toggle':'collapse'}, click: changeText, text: expandLinkText\"></a><div class=\"advanced-targeting-section OSBox collapse\" data-bind=\"attr:{id:'os'+$index()}\"><span class=\"item-description type-bold\">"+n.escape(null==(t=e.get("Targeting_TargetOSTitle"))?"":t)+'</span><div class="OSList"><div data-bind="foreach: operatingSystems"><div class="checkbox checkbox-label" data-bind="attr:{name: name}"><span data-bind="text: displayName"></span><input type="checkbox" data-bind="checked: isSelected, click: onClick, disable: $parent.readonlyBid"></div></div></div></div></div></td><td><select class="form-control" data-bind="options: bidAdjustmentOptions, optionsText: &quot;text&quot;, optionsValue: &quot;value&quot;, value: selectedBidAdjustmentOption, disable: readonlyBid"'+n.attr("aria-label",e.getString("BidAdjustment_Options"),!0,!0)+'></select></td><td><input class="form-control display-inline bidBoost-percentValue" type="text" data-bind="value: bidAdjustmentValue, valueUpdate: &quot;input&quot;, disable: readonlyBid"'+n.attr("aria-label",e.getString("BidAdjustment_BidMultiplier"),!0,!0)+'><span class="bidBoost-percent">'+n.escape(null==(t=r)?"":t)+'</span></td></tr><tr><td colspan="3">',a.koError("error"),i+="</td></tr></tbody></table>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"percentSymbol"in r?r.percentSymbol:"undefined"!==typeof percentSymbol?percentSymbol:void 0,"showLevelToggle"in r?r.showLevelToggle:"undefined"!==typeof showLevelToggle?showLevelToggle:void 0,"targetType"in r?r.targetType:"undefined"!==typeof targetType?targetType:void 0),i}},P9GN:function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("Td3X"),o=i.n(r),s=i("1EwD"),l=i.n(s),c=i("AQBV"),d=i.n(c),u=i("hkGT"),p=i("axE2"),g=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),h=100;t.a=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/Customers(:advertisercustomer_id)/Accounts(:account_id)/Default.CampaignTrafficEstimate",r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=d.a.get("adinsight.odata.url"),m=Object(p.getSupportedLocationIds)(e.locations);if(m.supportedCount>2e3&&a.a.isFunction(t.onServiceNotSupported))t.onServiceNotSupported("",s);else if(m.supportedCount>0){m.supportedCount<m.totalCount&&a.a.isFunction(t.onNotAllSupported)&&t.onNotAllSupported(m.supportedCount,m.totalCount);var f=Object(u.getTrafficEstimationOp)(e.adGroup,e.bid,e.budget,m.items,e.languages);if(a.a.sumBy(f.data.CampaignTrafficEstimate.AdGroupTrafficEstimateParameters,function(e){return e.KeywordTrafficEstimateParameters.length})>=1e3)a.a.isFunction(t.onServiceNotSupported)&&t.onServiceNotSupported(g.get("Budget_TrafficEstimation_MoreKeywordRequestsThanServiceAllowed"),s);else if(function(e){return a.a.some(e.data.CampaignTrafficEstimate.AdGroupTrafficEstimateParameters,function(e){return a.a.some(e.KeywordTrafficEstimateParameters,function(e){return e&&e.Text&&e.Text.length>=h})})}(f))a.a.isFunction(t.onServiceNotSupported)&&t.onServiceNotSupported(g.get("Budget_TrafficEstimation_MoreKeywordLengthRequestsThanServiceAllowed"),s);else{a.a.isFunction(r)&&(f=r(f,e));var v=a.a.chain(f).result("data").result("CampaignTrafficEstimate").result("AdGroupTrafficEstimateParameters").value()||[],b=a.a.result(d.a.get("Permissions"),"IsDSAMixedModeCampaignEnabled",!1);0===v.length&&b&&"search"===e.campaignType?t.onSuccess([{value:[]}],s):o.a.post(n,a.a.extend(f,{host:c})).then(function(){if(a.a.isFunction(t.onSuccess)){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.onSuccess.apply(t,i.concat([s]))}}).catch(function(){if(a.a.isFunction(t.onRequestError)){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.onRequestError.apply(t,i.concat([s]))}}).finally(i.spinner?l()(i.spinner):a.a.noop)}}else a.a.isFunction(t.onNonSupported)&&t.onNonSupported(m.totalCount,s)}},PZhF:function(e,t,i){e.exports={set:"Set",findReplace:"FindReplace",append:"Append",changeCase:"ChangeCase",add:"Add",remove:"Remove",pin:"Pin"}},"Pm+J":function(e,t,i){i("4y7W");e.exports=function(e){var t,n="";return n=n+'<div class="container-fluid">'+(null==(t=i("owKP").call(this,e))?"":t)+"</div>"}},"Pm8+":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="update-container"></div>'}},"Pp/5":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("UT4o"),a=i.n(n);function r(e){return a.a.extend({enabled:!0,headClasses:["text-center"],bodyClasses:["text-center"]},e)}},Q2ca:function(e,t,i){"use strict";i.r(t);var n=i("AXVV"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("8Elc"),p=i.n(u),g=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e}},{key:"_ok",value:function(){this.trigger("ok")}},{key:"render",value:function(e){var t=e.i18n,i=e.messageDetails,n=e.learnMoreId,a=void 0===n?"":n;return this.$el.html(p()({i18n:t,messageDetails:i,learnMoreId:a})),this}},{key:"events",get:function(){return{"click input.btn-default":"_ok"}}}]),t}(d.a.View);i.d(t,"showAlert",function(){return m});var h=Object(n.decorate)(g);function m(e){var t=e.i18n,i=e.title,n=void 0===i?"":i,a=e.messageDetails,r=e.learnMoreId,o=new h({dialogOptions:{title:n,maxWidth:658},i18n:t,messageDetails:a,learnMoreId:void 0===r?"":r}).render();o.center(),o.bind("ok",function(){o.destroy(),o=null})}},Q3mn:function(e,t,i){var n,a;n=[i("UT4o"),i("ERkP"),i("aWzz"),i("O94r")],void 0===(a=function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=194)}({194:function(e,t,i){e.exports=i(195)},195:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"InlineAlert",{enumerable:!0,get:function(){return n.InlineAlert}}),Object.defineProperty(t,"InlineInfoAlert",{enumerable:!0,get:function(){return n.InlineInfoAlert}}),Object.defineProperty(t,"InlineWarningAlert",{enumerable:!0,get:function(){return n.InlineWarningAlert}}),Object.defineProperty(t,"InlineDangerAlert",{enumerable:!0,get:function(){return n.InlineDangerAlert}}),Object.defineProperty(t,"InlineSuccessAlert",{enumerable:!0,get:function(){return n.InlineSuccessAlert}}),Object.defineProperty(t,"InlineCollapsibleAlert",{enumerable:!0,get:function(){return n.InlineCollapsibleAlert}}),Object.defineProperty(t,"AlertType",{enumerable:!0,get:function(){return n.AlertType}});var n=i(196)},196:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineAlert=f,t.InlineInfoAlert=v,t.InlineWarningAlert=b,t.InlineDangerAlert=y,t.InlineSuccessAlert=S,t.InlineCollapsibleAlert=t.AlertType=void 0;var n=s(i(4)),a=s(i(3)),r=s(i(5)),o=s(i(25));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var m={info:"info",warning:"warning",danger:"danger",success:"success",collapsible:"collapsible"};function f(e){return n.default.createElement("div",{className:(0,o.default)("alert-spacing",e.className)},n.default.createElement("div",{className:(0,o.default)("alert","alert-".concat(e.type))},n.default.createElement("div",{className:"alert-image"}),n.default.createElement("div",{className:"alert-content"},e.children)))}function v(e){return n.default.createElement(f,h({},e,{type:m.info}))}function b(e){return n.default.createElement(f,h({},e,{type:m.warning}))}function y(e){return n.default.createElement(f,h({},e,{type:m.danger}))}function S(e){return n.default.createElement(f,h({},e,{type:m.success}))}t.AlertType=m,f.propTypes={type:r.default.string.isRequired,className:r.default.string,children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]).isRequired},f.defaultProps={className:void 0};var w=function(e){function t(e){var i,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=d(t).call(this,e),i=!a||"object"!==l(a)&&"function"!==typeof a?u(n):a,g(u(i),"onCollapseLinkClick",function(){return i.setState({isCollapsed:!i.state.isCollapsed},function(){return i.props.collapseCallback()})}),g(u(i),"onDismissLinkClick",function(){return i.props.dismissCallback()}),i.state={isCollapsed:e.isCollapsed},i}var i,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n.default.Component),i=t,(a=[{key:"render",value:function(){var e=this.props,t=e.dismissLinkText,i=e.children;return n.default.createElement(f,{type:m.collapsible},n.default.createElement("div",{role:"link",className:"collapsible-link",onClick:this.onCollapseLinkClick,onKeyPress:this.onCollapseLinkClick},n.default.createElement("div",{className:this.state.isCollapsed?"expanderImage":"expandedImage"}),i),t&&n.default.createElement("a",{className:"dismiss-link",onClick:this.onDismissLinkClick,onKeyPress:this.onDismissLinkClick,"aria-label":"dismiss-link","aria-labelledby":"dismiss-link",href:"javascript:void(0);"},t))}}])&&c(i.prototype,a),r&&c(i,r),t}();t.InlineCollapsibleAlert=w;var C={children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]).isRequired,className:r.default.string},x={className:void 0};v.propTypes=C,v.defaultProps=x,b.propTypes=C,b.defaultProps=x,y.propTypes=C,y.defaultProps=x,S.propTypes=C,S.defaultProps=x,w.defaultProps={isCollapsed:!1,collapseCallback:a.default.noop,dismissLinkText:"",dismissCallback:a.default.noop},w.propTypes={isCollapsed:r.default.bool,collapseCallback:r.default.func,dismissLinkText:r.default.string,dismissCallback:r.default.func,children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node]).isRequired}},25:function(e,t){e.exports=n},3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},5:function(e,t){e.exports=i}})}.apply(t,n))||(e.exports=a)},Q93t:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("7XbR"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("/xyZ"),m=i.n(h),f=function e(){Object(n.a)(this,e),this.selectedCampaigns=u.a.observable(),this.selectedAdgroups=u.a.observable(),this.copySetting=u.a.observable(!1),this.hide=u.a.observable(!1)},v=i("D7xH"),b=i.n(v),y=i("nlAS"),S=i.n(y),w=i("fE/Z"),C=i("DXRr"),x=i("b172"),k=i("1EwD"),A=i.n(k),T=i("pVNP"),_=i("EsEL"),E=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/campaign-adgroup-selector"),I=function(){function e(t){var i=t.onAdGroupSelect,a=void 0===i?g.a.noop:i;Object(n.a)(this,e),this.onAdGroupSelect=a}return Object(a.a)(e,[{key:"fecthCampaignData",value:function(e,t){var i=e.query,n=void 0===i?"":i,a=e.pageNumber,r=void 0===a?0:a,o=e.pageSize,s=void 0===o?10:o,l=t&&t.$(".dropdown-menu");return Object(_.getCampaignData)(n,r,s).finally(A()(l))}},{key:"fecthAdgroupData",value:function(e,t){var i=e.query,n=void 0===i?"":i,a=e.pageNumber,r=void 0===a?0:a,o=e.pageSize,s=void 0===o?10:o,l=e.scopeParentItem,c=void 0===l?null:l,d=t&&t.$(".dropdown-menu");return Object(_.getAdgroupData)(n,r,s,c).finally(A()(d))}},{key:"getAdgroupSelectorView",value:function(){var e=this,t=new T.b({campaign:{pageSize:10,onFetch:function(i){return e.fecthCampaignData(i,t)},ariaLabel:E.getString("Campaign_List")},adgroup:{pageSize:6,onFetch:function(i){return e.fecthAdgroupData(i,t)},ariaLabel:E.getString("Adgroup_List")},i18n:E});return t.on("selected-adgroup",function(t){e.onAdGroupSelect(t)}),t}}]),e}();i.d(t,"a",function(){return P});var O=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),P=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.viewModel=new f,this.blockedElement=t,this.adgroupSelectorProxy=new I({onAdGroupSelect:function(t){e.onAdGroupSelect(t)}}),this.adgroupSelector=this.adgroupSelectorProxy.getAdgroupSelectorView()}},{key:"onAdGroupSelect",value:function(e){g.a.has(e,"Id")?this.loadAdGroupAndTargets(e.Id,e.campaignId):console.warn("empty selectedItem")}},{key:"render",value:function(){return this.$el.empty().append(b()({i18n:O})),this.$(".copy-settings").empty().append(this.adgroupSelector.render().$el),u.a.applyBindings(this.viewModel,this.el),this}},{key:"loadAdGroupAndTargets",value:function(e,t){var i=this;return m.a.join(S.a.AdGroup.find(e,{entitySet:w.default.currentAccount.Campaigns.$withKey(Number(t)).AdGroups,bypassCache:!0}),x.load(t,e,["LocationCriterion","RadiusCriterion","LocationIntentCriterion","AgeCriterion","GenderCriterion","JobFunctionCriterion","IndustryCriterion","AudienceCriterion","CompanyNameCriterion","LocationCriterion","RadiusCriterion"])).then(function(e){i.trigger("copy.adgroup",e)}).catch(function(e){var t=e.errors;i.trigger("copy.errors",Object(C.getODataErrors)(t))}).finally(A()(this.blockedElement||this.$el.parent()))}},{key:"hide",value:function(){this.viewModel.hide(!0)}}]),t}(c.a.View)},Qnnq:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'};var l=s.v4(),c=s.v4(),d=s.v4();i=i+'<div class="form-horizontal"><div class="form-group"><div class="col-sm-10" data-bind="visible: showUI()"><div class="alert alert-info form-group" data-bind="visible: showAdGroupOverrideInformation" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line1",r.getString("Target_Settings_Override_Location_Target")))?"":t)+'</div><div class="alert-info-inline indent">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line2",r.getString("Target_Settings_Override_Location_Target")))?"":t)+'&nbsp;<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=r.getString("Learn_more_link_text"))?"":t)+'</a></div></div>\x3c!--ko if: showTargetLableAndTitle()--\x3e<h5 class="control-label"><label id="location-target-header-title">'+n.escape(null==(t=r.get("Location_Target_Header_Title"))?"":t)+"</label>",a.popupHelp(o.Location,r.get("Location_Target_Header_Title"),r),i=i+'</h5>\x3c!-- /ko--\x3e<div class="locations-editor-form" data-bind="attr:{&quot;data-property&quot;: !bidMode() &amp;&amp; showUI() &amp;&amp; scenario !== &quot;creation-workflow&quot; &amp;&amp; scenario !== &quot;signup-creation-workflow&quot; &amp;&amp; scenario !== &quot;audience-dashboard&quot; &amp;&amp; scenario !== &quot;smart-campaign&quot; ? &quot;buttonMode&quot; : &quot;&quot;}">\x3c!--ko if: showCampaignSettingsToggleView()--\x3e<div class="form-control-static"><label class="type-normal" id="location-use-campaign-settings">'+n.escape(null==(t=r.get("CreationWorkflowsInheritanceFlagLabel"))?"":t)+'</label><div class="toggle-campaign-settings-switch" data-bind="checked: useCampaignSettings"></div></div>\x3c!-- /ko--\x3e\x3c!--ko if: !bidMode()--\x3e<div role="radiogroup" aria-labelledby="location-target-header-title" aria-describedby="location-target-title">\x3c!--ko if: !showTargetOptions()--\x3e<div class="form-control-static" id="location-target-title">'+n.escape(null==(t=r.get("Location_Target_AdGroup_Title"))?"":t)+'</div>\x3c!-- /ko--\x3e\x3c!--ko if: showTargetOptions()--\x3e\x3c!--ko if: showTargetLableAndTitle()--\x3e<div class="form-control-static" id="location-target-title">'+n.escape(null==(t=r.get("Location_Target_Title"))?"":t)+'</div>\x3c!-- /ko--\x3e<div class="radio"><label><input type="radio" name="targetOptions" value="bundle" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;bundle&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio"><span data-bind="text: languageBundleString"></span></label></div>\x3c!--ko if: showEverywhereOption--\x3e<div class="radio"><label><input class="target-every-where" type="radio" name="targetOptions" value="everywhere" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;everywhere&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio">'+n.escape(null==(t=r.get("Location_Target_Options_Everywhere"))?"":t)+'</label></div>\x3c!-- /ko--\x3e<div class="radio"><label><input type="radio" name="targetOptions" value="specific" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;specific&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio">'+n.escape(null==(t=r.get("Location_Target_Options_Specific"))?"":t)+'</label></div>\x3c!-- /ko--\x3e</div>\x3c!-- /ko--\x3e<div data-bind="visible: bidMode()"><div data-bind="css: {&quot;form-control-static&quot;: bidModeKeepTopMargin()}">',e&&(i+='<div class="alert alert-recommendation" data-bind="visible: showLocationRecommendationBanner" style="line-height: 15px; border: 1px solid;"><div class="alert-info-inline view-location-recommendations" style="display: flex;flex-direction: row;"><div style="display: inline-flex;flex-direction: column;padding-right: 10px;"><div style="flex-grow: 1"></div><span class="recommendation-light-bulb"></span><div style="flex-grow: 1"></div></div><span data-bind="html: locationRecommendationBanner"></span></div></div>'),i=i+'\x3c!--ko if: gridNoData--\x3e<span class="location-bid-grid-message" data-bind="text: noDataMessage"></span>\x3c!-- /ko--\x3e<a class="change-mode-link clickable" tabindex="0" data-bind="visible: editLinkVisible()">'+n.escape(null==(t=r.get("LocationTargeting_EditLocationTargets"))?"":t)+'</a><div class="location-target-bid-container"></div><div class="col-sm-offset-0">',a.koValidationError("conflictError",c),i+='</div></div></div><div data-bind="visible: !bidMode() &amp;&amp; showUI()"><div class="form-group" data-bind="visible: searchBoxVisible()">\x3c!--ko if: showTargetLableAndTitle()--\x3e<div class="col-sm-2 control-label"></div>\x3c!-- /ko--\x3e<div class="location-manage col-sm-10"></div><div class="form-group"></div></div><div class="col-sm-offset-0">',a.koValidationError("conflictError",d),i=i+'</div><div data-bind="visible: !targetEverywhere() &amp;&amp; !hideAudience"><div class="location-target-physical-intent"></div></div><div class="ima-reach-warning-container"></div>\x3c!--ko if: scenario !== "creation-workflow" && scenario !== \'signup-creation-workflow\' && scenario !== "audience-dashboard" && scenario !== \'smart-campaign\' && scenario !== \'smart-shopping-campaign\'--\x3e<div class="form-group"><div class="col-sm-2 control-label"></div><button class="btn btn-primary location-target-done" type="button">'+n.escape(null==(t=r.get("Button_Done"))?"":t)+'</button><button class="btn btn-default location-target-cancel" type="button">'+n.escape(null==(t=r.get("Button_Cancel"))?"":t)+'</button></div>\x3c!-- /ko--\x3e</div></div></div></div><div class="form-group" data-bind="visible: errors().length &gt; 0"><div class="col-sm-offset-2">',a.koErrors(l),i+="</div></div></div>"}.call(this,"hasLocationRecommendations"in r?r.hasLocationRecommendations:"undefined"!==typeof hasLocationRecommendations?hasLocationRecommendations:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"popupIds"in r?r.popupIds:"undefined"!==typeof popupIds?popupIds:void 0,"uuid"in r?r.uuid:"undefined"!==typeof uuid?uuid:void 0),i}},QoK2:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){e&&e.length>0?(i+='<div class="parameters">',function(){var a=e;if("number"==typeof a.length)for(var r=0,o=a.length;r<o;r++)(s=a[r]).Key&&(i=i+"<div><span>"+n.escape(null==(t="{_")?"":t)+"</span><span>"+n.escape(null==(t=s.Key)?"":t)+"</span><span>"+n.escape(null==(t="} = ")?"":t)+"</span><span>"+n.escape(null==(t=s.Value)?"":t)+"</span></div>");else for(var r in o=0,a){var s;o++,(s=a[r]).Key&&(i=i+"<div><span>"+n.escape(null==(t="{_")?"":t)+"</span><span>"+n.escape(null==(t=s.Key)?"":t)+"</span><span>"+n.escape(null==(t="} = ")?"":t)+"</span><span>"+n.escape(null==(t=s.Value)?"":t)+"</span></div>")}}.call(this),i+="</div>"):i+='<span class="grid-cell-text"></span>'}.call(this,"value"in a?a.value:"undefined"!==typeof value?value:void 0),i}},Qt1U:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},i=i+'<div class="form-group"><h5 class="col-sm-2 control-label"><label id="Campaign_DomainName_Label">'+n.escape(null==(t=e.getString("Campaign_Settings_DomainName"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Settings_Website",e.getString("Campaign_Settings_DomainName"),e),i+='</h5><div class="col-sm-4"><input class="dsa-domainname-input form-control" data-bind="value:DomainName, disable: disabled" aria-describedby="Campaign_Website_Tip" aria-labelledby="Campaign_DomainName_Label">',a.koValidationError("DomainName"),i=i+'<div class="pull-left form-hint" id="Campaign_Website_Tip">'+n.escape(null==(t=e.getString("Dsa_Campaign_Website_Tip"))?"":t)+'</div></div></div><div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.getString("Campaign_Settings_DomainLanguage_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Settings_WebsiteLanguage",e.getString("Campaign_Settings_DomainLanguage_Label"),e),i=i+'</h5><div class="col-sm-4"><div class="form-control-static website-language-setting">'+n.escape(null==(t=e.getString("Language_English"))?"":t)+'</div></div></div>\x3c!--ko if: isTargetingSourceEnabled--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.getString("Campaign_TargetingSource"))?"":t)+"</label>",a.popupHelp(r.TargetingSource,e.getString("Campaign_TargetingSource"),e),i=i+'</h5><div class="col-sm-10 dsa-targeting-source"></div></div>\x3c!-- /ko--\x3e\x3c!--ko if: isDynamicDescriptionPhase1Enabled--\x3e<label class="checkbox-inline"><input class="dynamic-description-switch" type="checkbox" data-bind="checked: isDynamicDescriptionChecked">'+n.escape(null==(t=e.getString("DynamicDescriptionEnabled"))?"":t),a.popupHelp("pop_BA_DSA_DynamicDescriptions",e.getString("DynamicDescriptionEnabled"),e),i+="</label>\x3c!-- /ko--\x3e"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"popupIds"in r?r.popupIds:"undefined"!==typeof popupIds?popupIds:void 0),i}},RD4a:function(e,t,i){var n,a;n=[i("ERkP"),i("eHSY"),i("UT4o"),i("aWzz"),i("O94r"),i("SjL2"),i("aSrn")],void 0===(a=function(e,t,i,n,a,r,o){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=825)}({10:function(e,t){e.exports=n},11:function(e,t){e.exports=a},283:function(e,t){e.exports=o},29:function(e,t){e.exports=r},3:function(t,i){t.exports=e},5:function(e,i){e.exports=t},825:function(e,t,i){e.exports=i(826)},826:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"StepContainer",{enumerable:!0,get:function(){return a.StepContainer}}),Object.defineProperty(t,"Step",{enumerable:!0,get:function(){return r.Step}}),Object.defineProperty(t,"StepsContext",{enumerable:!0,get:function(){return o.StepsContext}}),t.VerticalSeparatedLayout=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(827));t.VerticalSeparatedLayout=n;var a=i(839),r=i(843),o=i(841)},827:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(828);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var a=i(832);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var r=i(830);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=i(829);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=i(835);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=i(836);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var c=i(838);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})})},828:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepContainer=c;var n=l(i(11)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),r=l(i(10)),o=i(829),s=i(830);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.children,i=e.currentPath,r=e.className,l=e.id,c=(0,a.useContext)(s.StepsContext),d=a.default.createElement("div",{id:l,className:(0,n.default)("step-container",r)},t);return c?d:a.default.createElement(o.StepsContextProvider,{currentPath:i,stepContainerChildren:t},d)}c.propTypes={currentPath:r.default.string,children:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]).isRequired},c.defaultProps={currentPath:null}},829:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepsContextProvider=d;var n,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),r=(n=i(10))&&n.__esModule?n:{default:n},o=i(830),s=i(831),l=i(834);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){var t=e.currentPath,i=e.children,n=e.stepContainerChildren,r=(0,a.useMemo)(function(){if(n)return n;var e=function(e,t){var i=[];for(a.default.Children.forEach(e,function(e){i.push(e)});i.length>0;){var n=i.shift();if(t(n))return n;n.props&&n.props.children&&a.default.Children.forEach(n.props.children,function(e){i.push(e)})}return null}(i,s.isInstanceOfStepContainer);return e&&e.props&&e.props.children},[i,n]),d=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){c(e,t,i[t])})}return e}({currentPath:t},(0,l.getStepsTree)(r,t));return a.default.createElement(o.StepsContext.Provider,{value:d},i)}d.propTypes={currentPath:r.default.string.isRequired,stepContainerChildren:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]),children:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]).isRequired},d.defaultProps={stepContainerChildren:null}},830:function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StepsContext=void 0;var a=((n=i(3))&&n.__esModule?n:{default:n}).default.createContext(null);t.StepsContext=a},831:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceOfStep=function(e){return r(e,a.Step)},t.isInstanceOfStepContainer=function(e){return r(e,n.StepContainer)};var n=i(828),a=i(832);function r(e,t){if(null!=e&&null!=e.type){if(e.type===t)return!0;if("ProxyFacade"===e.type.name&&e.type.displayName===t.name)return!0}return!1}},832:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step=c;var n=l(i(11)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),r=l(i(10)),o=i(830),s=i(833);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=((0,a.useContext)(o.StepsContext)||{}).currentPath,i=e.path,r=e.title,s=e.description,l=e.enabled,c=e.id,d=e.className,u=e.children,p=(0,a.useMemo)(function(){return l&&new RegExp("^".concat(i.replace(/\./g,"\\$&"),"\\b"))},[i,l]);return(0,a.useMemo)(function(){return l&&p.test(t)},[l,p,t])?a.default.createElement("div",{id:c,className:(0,n.default)("step",d),"data-step-path":i,"data-step-title":r,"data-step-desc":s},u):null}c.propTypes={path:s.pathPropType.isRequired,title:r.default.string,enabled:r.default.bool,description:r.default.string,id:r.default.string,className:r.default.string,children:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]).isRequired},c.defaultProps={enabled:!0,id:null,description:null,className:null,title:null}},833:function(e,t,i){"use strict";function n(e){return function(t,i,n){var a=t[i];return null==a&&e?new Error("The prop ".concat(i," is marked as required in ").concat(n,", but its value is ").concat(a,".")):null==a||/^[A-Za-z][\w-]*(\.[\w-]+)*$/.test(t[i])?null:new Error("Invalid prop ".concat(i," supplied to ").concat(n,". Validation failed."))}}Object.defineProperty(t,"__esModule",{value:!0}),t.pathPropType=void 0;var a=n(!1);t.pathPropType=a,a.isRequired=n(!0)},834:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStepsTree=function e(t,i){if(a.default.isEmpty(t)||a.default.isEmpty(i))return null;var n={steps:[],containsSelected:!1,currentStep:null};a.default.each(a.default.isArray(t)?t:[t],function(t){if((0,r.isInstanceOfStep)(t)&&t.props.enabled){var a={path:t.props.path,title:t.props.title,description:t.props.description,isSelected:t.props.path===i,containsSelected:!1,renderTitle:t.props.renderTitle,renderGlyph:t.props.renderGlyph,renderDescription:t.props.renderDescription};a.isSelected&&(n.currentStep=a,n.containsSelected=!0);var o=t.props.children;if((0,r.isInstanceOfStepContainer)(o)){var s=e(o.props.children,i);null!=s&&(n.currentStep=n.currentStep||s.currentStep,n.containsSelected=n.containsSelected||s.containsSelected,a.steps=s.steps,a.containsSelected=a.containsSelected||s.containsSelected)}n.steps.push(a)}});return n};var n,a=(n=i(9))&&n.__esModule?n:{default:n},r=i(831)},835:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepBreadcrumbs=p;var n=l(i(9)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),r=l(i(10)),o=i(283),s=i(827);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e){return{key:e.path,text:e.title}}function p(e){var t=e.initialItems,i=(0,a.useContext)(s.StepsContext).steps,r=(0,a.useMemo)(function(){for(var e=d(t),n=!1,a=i||[],r=0;!n&&r<a.length;){var o=a[r];o.containsSelected?(e.push(u(o)),a=o.steps,r=0):(o.isSelected&&(e.push(u(o)),n=!0),r+=1)}return e},[t,i]),l=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){c(e,t,i[t])})}return e}({},n.default.omit(e,t),{items:r});return a.default.createElement(o.Breadcrumbs,l)}p.propTypes={initialItems:r.default.arrayOf(r.default.shape({key:r.default.string.isRequired}))},p.defaultProps={initialItems:[]}},836:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepProgressList=g;var n=d(i(9)),a=d(i(11)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),o=d(i(10)),s=i(29),l=i(827),c=i(837);function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t,i,o){var l=!1;return n.default.map(e,function(e){if(!e.title)return null;var d=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){u(e,t,i[t])})}return e}({},e,{isBehind:!e.containsSelected&&!e.isSelected&&!l,isAhead:!e.containsSelected&&!e.isSelected&&l}),g=[{"step-progress-list-item":!0,"step-progress-list-item-selected":d.isSelected,"step-progress-list-item-contains-selected":d.containsSelected,"step-progress-list-item-behind":d.isBehind,"step-progress-list-item-ahead":d.isAhead}];(d.isSelected||d.containsSelected)&&(l=!0);var h=n.default.isFunction(t)?t(d):null,m=n.default.isFunction(i)?i(d):null,f=n.default.isFunction(e.renderGlyph),v=n.default.isFunction(e.renderTitle),b=n.default.isFunction(e.renderDescription),y=(0,c.getStepStatusAriaLabel)(d,o);return r.default.createElement("li",{key:e.path,"data-step-path":e.path,className:(0,a.default)(g,h),"aria-label":y},f&&e.renderGlyph(e)||m&&r.default.createElement(s.Glyphicon,{className:"step-progress-list-item-glyphicon",glyph:m}),v&&e.renderTitle(e)||r.default.createElement("span",{className:"step-progress-list-item-title"},e.title),b&&e.renderDescription(e)||e.description&&r.default.createElement("span",{className:"step-progress-list-item-description"},e.description),e.containsSelected&&r.default.createElement("ol",{className:"step-progress-list-item-list"},p(e.steps,t,i,o)))})}function g(e){var t=(0,r.useContext)(l.StepsContext).steps,i=e.id,n=e.className,a=e.getItemClassName,o=e.getItemGlyphicon,s=e.ariaI18n;return t?r.default.createElement("div",{id:i,className:n},r.default.createElement("ol",{className:"step-progress-list"},p(t,a,o,s))):null}g.propTypes={id:o.default.string,className:o.default.string,getItemClassName:o.default.func,getItemGlyphicon:o.default.func,ariaI18n:o.default.shape({getString:o.default.func.isRequired})},g.defaultProps={id:null,className:null,getItemClassName:null,getItemGlyphicon:null,ariaI18n:null}},837:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStepStatusAriaLabel=void 0;var n="Previous step",a="Current step",r="Next step",o=function(e,t){return e&&e.getString(t)||t};t.getStepStatusAriaLabel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.isBehind?o(t,n):e.isSelected||e.containsSelected?o(t,a):o(t,r)}},838:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVerticalStepWizardStyles=t.verticalStepWizardStyle=t.progressList=t.getStepProgressItemGlyphicon=void 0;var n=i(5),a="#0078d4",r="#0078d4",o="#c0def6",s="#ebebeb",l="#edebe9",c="#fff",d="#e1dfdd",u="ba-RadioBtnOn",p="ba-CompletedSolid",g="ba-RadioBullet",h="ba-RadioBtnOff";t.getStepProgressItemGlyphicon=function(e){return e.path.indexOf(".")>=0?g:e.isSelected||e.containsSelected?u:e.isBehind?p:h};var m={width:"256px",paddingLeft:28,paddingTop:45,paddingBottom:"32px",overflow:"auto",position:"fixed",height:"100%","& ol":{margin:0,padding:0,listStyle:"none"},"& .step-progress-list-item":{borderLeft:"".concat("2px"," solid ").concat(a),"&.step-progress-list-item-ahead":{borderLeftColor:s}},"& ol.step-progress-list>.step-progress-list-item":{paddingTop:"24px","&:first-child":{borderLeftColor:c,paddingTop:"0px"},"&>.step-progress-list-item-glyphicon":{marginLeft:"-8px",marginRight:"8px",background:c,paddingTop:"5px",paddingBottom:"4px",verticalAlign:"middle"}},"& ol.step-progress-list-item-list>.step-progress-list-item":{lineHeight:"16px",paddingTop:"24px",marginLeft:"-".concat("2px"),"&>.step-progress-list-item-glyphicon":{marginLeft:"-8px",marginRight:"12px",background:c,paddingBottom:"1px",verticalAlign:"middle"}},"& .step-progress-list-item-title":{display:"inline-block",verticalAlign:"middle",width:200},"& .step-progress-list-item-selected":{fontWeight:"600"},"& .step-progress-list-item-behind .step-progress-list-item-glyphicon":{color:r},"& .step-progress-list-item-selected .step-progress-list-item-glyphicon, & .step-progress-list-item-contains-selected>.step-progress-list-item-glyphicon":{color:o},"& .step-progress-list-item-ahead .step-progress-list-item-glyphicon":{color:l}};t.progressList=m;var f={wizardContainer:{display:"flex",fontSize:"14px",lineHeight:"20px",fontFamily:"Segoe UI",height:"100%","& .step-container":{borderLeft:"1px solid ".concat(d),display:"flex",flex:"auto",height:"100%",marginLeft:m.width,overflow:"auto","& .step":{display:"flex",flex:"auto",flexDirection:"column",minWidth:550}}},stepContent:function(e){var t=e.palette;return{flex:"auto",marginLeft:"32px",marginRight:"20px","& .step-title":{fontSize:"20px",fontWeight:n.FontWeights.semibold,marginTop:"32px"},"& .step-description":{color:t.neutralSecondary,marginTop:"14px",marginBottom:"36px"}}},progressList:m,footer:{paddingTop:"15px",paddingBottom:"15px",height:"64px",borderTop:"1px solid #e1dfdd","& .btn":{marginLeft:"32px","& + .btn":{marginLeft:"12px"},"&.btn-exit":{marginLeft:"48px"}}}};t.verticalStepWizardStyle=f;t.getVerticalStepWizardStyles=function(e,t){var i=t.palette;return{wizardContainer:f.wizardContainer,stepContent:f.stepContent({palette:void 0===i?{}:i}),progressList:f.progressList,footer:f.footer}}},839:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepContainer=void 0;var n=d(i(3)),a=d(i(9)),r=d(i(10)),o=d(i(11)),s=i(840),l=i(841),c=i(842);function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v=function(e){function t(){var e,i,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,d=new Array(l),p=0;p<l;p++)d[p]=arguments[p];return a=this,r=(e=g(t)).call.apply(e,[this].concat(d)),i=!r||"object"!==u(r)&&"function"!==typeof r?h(a):r,f(h(i),"getRelativePath",function(e,t){if(!t)return e.split(s.PATH_DELIMITER)[0];var i=e.replace("".concat(t,"."),"").split(s.PATH_DELIMITER)[0];return"".concat(t).concat(s.PATH_DELIMITER).concat(i)}),f(h(i),"renderGroup",function(e){var t=i.props.currentPath||e.fullPath,a=i.props.currentPath?"":e.parentPath;if(!t)throw new Error("currentPath is required as either a prop or through a context provider");var r=i.props.layout||e.layout;if(!r)throw new Error("layout is required as either a prop or through a context provider");return n.default.createElement("div",{className:(0,o.default)("step-container",r)},n.default.createElement(c.StepGroupView,{relativePath:i.getRelativePath(t,a),parentPath:a,fullPath:t,layout:r},i.props.children))}),i}var i,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n.default.PureComponent),i=t,(a=[{key:"render",value:function(){return n.default.createElement(l.StepsContext.Consumer,null,this.renderGroup)}}])&&p(i.prototype,a),r&&p(i,r),t}();t.StepContainer=v,f(v,"propTypes",{children:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]).isRequired,currentPath:r.default.string,layout:r.default.oneOf(a.default.values(s.VIEW_LAYOUT))}),f(v,"defaultProps",{currentPath:void 0,layout:void 0})},840:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PATH_DELIMITER=t.VIEW_LAYOUT=void 0;t.VIEW_LAYOUT={VERTICAL:"vertical",HORIZONTAL:"horizontal"};t.PATH_DELIMITER="."},841:function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StepsContext=void 0;var a=((n=i(3))&&n.__esModule?n:{default:n}).default.createContext("");t.StepsContext=a},842:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepGroupView=void 0;var n=c(i(3)),a=c(i(9)),r=c(i(10)),o=i(843),s=i(840),l=i(841);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(e){function t(){var e,i,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,o=(e=p(t)).call.apply(e,[this].concat(c)),i=!o||"object"!==d(o)&&"function"!==typeof o?g(r):o,m(g(i),"getPath",function(e,t){return e&&e.props&&(a.default.isFunction(e.props.path)?e.props.path(t):e.props.path)}),m(g(i),"findCurrentStep",function(e,t,n){return a.default.findIndex(e,function(e){return i.getPath(e,t)===n})}),m(g(i),"renderStepContent",function(e){return e?n.default.createElement("div",{className:"step-content"},n.default.createElement(l.StepsContext.Provider,{value:{parentPath:i.props.relativePath,fullPath:i.props.fullPath,layout:i.props.layout}},e.props.children)):null}),i}var i,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,n.default.PureComponent),i=t,(r=[{key:"render",value:function(){var e=this,t=n.default.Children.toArray(this.props.children),i=this.findCurrentStep(t,this.props.parentPath,this.props.relativePath),a=t[i];return n.default.createElement("div",{className:"step-group"},n.default.createElement("ol",null,n.default.Children.map(this.props.children,function(t,r){return function(e){return null!=e&&(Object.prototype.isPrototypeOf.call(o.Step,e.type)||o.Step===e.type)}(t)?n.default.createElement("li",{style:{listStyle:"none",display:e.props.layout===s.VIEW_LAYOUT.HORIZONTAL&&"inline-block"}},n.default.createElement(l.StepsContext.Provider,{value:{isActive:r===i,isPrevious:r<i}},t),e.props.layout===s.VIEW_LAYOUT.VERTICAL&&r===i&&e.renderStepContent(a)):t})),this.props.layout===s.VIEW_LAYOUT.HORIZONTAL&&this.renderStepContent(a))}}])&&u(i.prototype,r),c&&u(i,c),t}();t.StepGroupView=f,m(f,"propTypes",{children:r.default.oneOfType([r.default.node,r.default.arrayOf(r.default.node)]).isRequired,relativePath:r.default.string.isRequired,parentPath:r.default.string.isRequired,fullPath:r.default.string.isRequired,layout:r.default.oneOf(a.default.values(s.VIEW_LAYOUT)).isRequired})},843:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Step=void 0;var n=s(i(3)),a=s(i(9)),r=s(i(10)),o=i(841);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=function(e){function t(){var e,i,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return n=this,r=(e=d(t)).call.apply(e,[this].concat(s)),i=!r||"object"!==l(r)&&"function"!==typeof r?u(n):r,g(u(i),"renderTitle",function(e){if(!a.default.isBoolean(e.isActive)||!a.default.isBoolean(e.isPrevious))throw new Error("Steps Context not found. <Step /> should only be rendered within <StepContainer />");var t=i.props.title;return a.default.isFunction(t)?t({isActive:e.isActive,isPrevious:e.isPrevious}):t}),i}var i,r,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n.default.PureComponent),i=t,(r=[{key:"render",value:function(){return n.default.createElement(o.StepsContext.Consumer,null,this.renderTitle)}}])&&c(i.prototype,r),s&&c(i,s),t}();t.Step=h,g(h,"propTypes",{title:r.default.oneOfType([r.default.element,r.default.string,r.default.number,r.default.func]),path:r.default.oneOfType([r.default.string,r.default.func]).isRequired}),g(h,"defaultProps",{title:null})},9:function(e,t){e.exports=i}})}.apply(t,n))||(e.exports=a)},"RH6/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t=t+'<select class="form-control flex-row-fixed url-protocol" id="protocolOptions" data-bind="options: protocols, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: protocol, disable: isDisabled"'+n.attr("aria-labelledby",e,!0,!0)+'></select><input class="form-control url-field"'+n.attr("placeholder",i,!0,!0)+' type="text" data-bind="value: urlWithoutProtocol, valueUpdate: &quot;input&quot;, attr: { maxlength: maxLength, &quot;aria-describedby&quot;: errorContainer, &quot;aria-invalid&quot;: errorMessage().length &gt; 0 }, disable: isDisabled, css: {error: hasErrors}"'+n.attr("aria-labelledby",e,!0,!0)+'>\x3c!--ko if: errorMessage().length > 0--\x3e<div class="error is-error" data-bind="html: errorMessage"></div>\x3c!-- /ko--\x3e'}.call(this,"ariaLabelledby"in i?i.ariaLabelledby:"undefined"!==typeof ariaLabelledby?ariaLabelledby:void 0,"urlPlaceholder"in i?i.urlPlaceholder:"undefined"!==typeof urlPlaceholder?urlPlaceholder:void 0),t}},Rdlq:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+="<div></div>"}},RibF:function(e,t,i){var n,a;n=[i("UT4o")],void 0===(a=function(e){"use strict";var t=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),i=[{index:0,minuteName:"00",val:"ZERO"},{index:1,minuteName:"15",val:"FIFTEEN"},{index:2,minuteName:"30",val:"THIRTY"},{index:3,minuteName:"45",val:"FORTY_FIVE"}],n={minBid:-90,maxBid:900},a={ZERO:0,FIFTEEN:15,THIRTY:30,FORTY_FIVE:45};return{dayOptions:[{val:"AllDays",name:t.get("Globalization_Day_All_Days")},{val:"Sunday",name:t.get("Globalization_Day_Sunday")},{val:"Monday",name:t.get("Globalization_Day_Monday")},{val:"Tuesday",name:t.get("Globalization_Day_Tuesday")},{val:"Wednesday",name:t.get("Globalization_Day_Wednesday")},{val:"Thursday",name:t.get("Globalization_Day_Thursday")},{val:"Friday",name:t.get("Globalization_Day_Friday")},{val:"Saturday",name:t.get("Globalization_Day_Saturday")},{val:"MondayToFriday",name:t.get("Globalization_Day_Monday_To_Friday")}],hourOptions:[{val:0,twelveHourDisplay:t.get("Globalization_Time_12AM_Start_Of_Day")},{val:1,twelveHourDisplay:t.get("Globalization_Time_1AM")},{val:2,twelveHourDisplay:t.get("Globalization_Time_2AM")},{val:3,twelveHourDisplay:t.get("Globalization_Time_3AM")},{val:4,twelveHourDisplay:t.get("Globalization_Time_4AM")},{val:5,twelveHourDisplay:t.get("Globalization_Time_5AM")},{val:6,twelveHourDisplay:t.get("Globalization_Time_6AM")},{val:7,twelveHourDisplay:t.get("Globalization_Time_7AM")},{val:8,twelveHourDisplay:t.get("Globalization_Time_8AM")},{val:9,twelveHourDisplay:t.get("Globalization_Time_9AM")},{val:10,twelveHourDisplay:t.get("Globalization_Time_10AM")},{val:11,twelveHourDisplay:t.get("Globalization_Time_11AM")},{val:12,twelveHourDisplay:t.get("Globalization_Time_12PM")},{val:13,twelveHourDisplay:t.get("Globalization_Time_1PM")},{val:14,twelveHourDisplay:t.get("Globalization_Time_2PM")},{val:15,twelveHourDisplay:t.get("Globalization_Time_3PM")},{val:16,twelveHourDisplay:t.get("Globalization_Time_4PM")},{val:17,twelveHourDisplay:t.get("Globalization_Time_5PM")},{val:18,twelveHourDisplay:t.get("Globalization_Time_6PM")},{val:19,twelveHourDisplay:t.get("Globalization_Time_7PM")},{val:20,twelveHourDisplay:t.get("Globalization_Time_8PM")},{val:21,twelveHourDisplay:t.get("Globalization_Time_9PM")},{val:22,twelveHourDisplay:t.get("Globalization_Time_10PM")},{val:23,twelveHourDisplay:t.get("Globalization_Time_11PM")},{val:24,twelveHourDisplay:t.get("Globalization_Time_12AM_End_Of_Day")}],minuteOptions:i,minuteOptionsMap:{0:i[0],15:i[1],30:i[2],45:i[3]},bidAdjustmentRange:n,bidAdjustmentOptions:[{val:-1,text:t.get("BidAdjustment_DecreaseText")},{val:1,text:t.get("BidAdjustment_IncreaseText")}],minuteToSaveMap:a,minuteToReadMap:e.invert(a),errors:{endTimeBeyondEOD:{message:t.get("ImprovedAdScheduling_End_Time_Beyond_EOD"),type:"ERROR_TIME"},startTimeEarlierThanEndTime:{message:t.get("ImprovedAdScheduling_Start_Time_Later_Than_End_Time"),type:"ERROR_TIME"},bidExceedLimitation:{message:t.get("Row_Error_InvalidBidAdjustment").replace("{0}",-1*n.minBid).replace("{1}",n.maxBid),type:"ERROR_BID"},bidEmpty:{message:t.get("AdvancedTargeting_Error_BidValueMustNotBeEmpty"),type:"ERROR_BID"},bidIncorrectFormat:{message:t.get("AdvancedTargeting_Error_BidValueMustBeDecimal"),type:"ERROR_BID"}}}}.apply(t,n))||(e.exports=a)},Rjc0:function(e,t,i){e.exports={set:"Set",findReplace:"FindReplace",append:"Append"}},S7uP:function(e,t,i){var n,a;n=[i("7XbR")],void 0===(a=function(e){"use strict";return function(t){this.mobileUrlVisible=e.observable(t.isFinal&&!t.isMobilePreferred),this.urlOptionsVisible=e.observable(t.isFinal&&t.urlOptionsEnabled),this.showTitles=e.observable(t.showTitles),this.editMode=e.observable(!1),this.errorMessages=e.observableArray(),this.landingPageUrlErrorMessages=e.observableArray(),this.showUpgradeWarning=e.observable(!1)}}.apply(t,n))||(e.exports=a)},SJk2:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={Unset:"Unset",Single:"Single",Multi:"Multi",SingleAndMulti:"SingleAndMulti"}},SKMo:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t+='<div class="location-recommendation-container form-group" data-bind="visible: hasRecommendation">',i&&(t+='<div class="row"><div class="col-sm-12"><div class="location-recommendation-map-container"></div></div></div>'),t=t+'<div class="alert alert-recommendation" style="line-height: 10px"><div class="alert-info-inline collapsed" data-toggle="collapse" data-target="#location-recommendation-body-container" data-bind="click: clickCollapse"><a class="spritedimagealign" data-bind="css: isExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></a><span class="recommendation-icon">&nbsp;</span><span class="clickable" tabindex="0" data-bind="html: banner"></span></div></div><div class="location-recommendation-body collapse" id="location-recommendation-body-container"><div class="form-group row"><div class="col-sm-12"><input class="apply btn btn-primary" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Apply"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"><input class="dismiss btn btn-default" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Dismiss"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"></div></div><div class="form-group row"><div class="col-sm-6"><div class="location-recommendation-grid-container" style="min-width: 1020px"></div></div></div></div></div>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"showMap"in i?i.showMap:"undefined"!==typeof showMap?showMap:void 0),t}},SfTZ:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i.n(r),s=i("/xyZ"),l=i.n(s),c=i("UP37"),d=function(e,t){if(o.a.isEmpty(e))return[];var i=o.a.map(e,function(e){return function(e,t){var i,n,a;o.a.isString(e)?i=e:(i=e.url,n=e.metadata,a=e.baseId);var r=i.replace(/,/g,encodeURIComponent(","));return"Image,Active,GenericImage,,,".concat(t,",").concat(r,",").concat(a||"",",").concat(n||"")}(e,t)});return o.a.flatten(["Type,Status,Sub Type,Id, Name,Parent Id,Url,Base id,Metadata","Format Version,,,,6,,,,",i])},u=function(e){var t=-1,i=-1,n=e[0];if(o.a.each(n,function(e,n){"Id"===e&&(i=n),"Error"===e&&(t=n)}),i<0)return[];var a=[],r=e.slice(2);return o.a.each(r,function(e){-1!==t&&e[t]?a.push({code:e[t]}):a.push(e[i])}),a},p=function(){function e(t,i,a){var r=this;Object(n.a)(this,e),this.bulkSaveImagesByUrl=function(e){var t="".concat(r.baseURL,"/Default.BulkUpsert"),i=d(e,r.aid);return o.a.isEmpty(i)?l.a.resolve([]):c.odata.post(t,o.a.defaults({data:{CsvRows:i}},r.oDataConfig)).then(function(e){return o.a.isEmpty(e)?[]:u(e)})},this.cid=t,this.aid=i,this.baseURL="".concat(a.odataPath,"/Customers(").concat(this.cid,")/Accounts(").concat(this.aid,")/"),this.orderByDefault="UploadedTime",this.orderDefault="desc",this.oDataConfig={oDataToken:a.odataToken,oDataTokenType:a.oDataTokenType,applicationName:a.applicationName}}return Object(a.a)(e,[{key:"getExistingImages",value:function(e){var t=e.sortQuery,i=e.searchTerm,n=e.pageNumber,a=e.pageSize,r=a,s=n*a,l="";i&&i.length>0&&(l="&$filter=contains(Text, '".concat(i,"')"));var d="".concat(this.baseURL,"/Images?mediaenabledentityfilter=ResponsiveAd&").concat(t).concat(l),u={$top:r,$skip:s,count:!0};return c.odata.get(d,o.a.extend({data:u},this.oDataConfig))}},{key:"getImageByIdAsync",value:function(e){var t="".concat(this.baseURL,"Images(").concat(e,")");return c.odata.get(t,this.oDataConfig)}},{key:"uploadImageAsync",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i){var n=JSON.stringify(e).substr(0,100);i.trace(JSON.stringify(n))}var a,r=e.indexOf("base64,");a=r>-1?e.substr(r+"base64,".length):e;var s="".concat(this.baseURL,"Images"),l={Data:a,Type:"GenericImage"};return c.odata.post(s,o.a.extend({data:l},this.oDataConfig)).then(function(e){return{imageId:e.value,errors:[]}},function(e){return t.processUploadSingleImageRejection(e,i)})}},{key:"updateImageAsync",value:function(e){var t="".concat(this.baseURL,"Images(").concat(e.Id,")"),i={Text:e.Text};return c.odata.patch(t,o.a.extend({data:i},this.oDataConfig))}},{key:"deleteImageAsync",value:function(e){var t="".concat(this.baseURL,"Images(").concat(e.IdString,")");return c.odata.delete(t,this.oDataConfig)}},{key:"processUploadSingleImageRejection",value:function(e,t){return t&&t.error(JSON.stringify(e)),e.body.value}}]),e}();i.d(t,"a",function(){return p})},"Sk/Z":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("UT4o"),u=i.n(d),p=i("nlAS"),g=i.n(p),h=i("fE/Z"),m=i("2ndk"),f=i("7XbR"),v=i.n(f),b=(i("CE5c"),i("YK3D")),y=i.n(b),S=i("rm/4"),w=i("SxtD"),C=i("kwR5"),x=i("5C8L"),k=i.n(x),A=i("Tq7U"),T=i("Aycx"),_=i("DXRr"),E=i("+PqR"),I=i("i/gc"),O=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),P=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this.options=i,this.targetTypePrefix=i.targetTypePrefix,this.targetRowKeys=i.targetRowKeys,this.criterionType=i.criterionType,this.criterionTypeTarget=i.criterionTypeTarget,this.MTBidAdjustmentErrorCode=i.MTBidAdjustmentErrorCode,this.MTBidAdjustmentErrorNumber=i.MTBidAdjustmentErrorNumber,this.targetPopupId=i.targetPopupId,this.rowExtenders=i.rowExtenders,this.targetDescription=O.get("".concat(this.targetTypePrefix,"_Description")),this.targetHeader=O.get("".concat(this.targetTypePrefix,"_Header")),this.bidAdjustmentHeader=O.get("Target_ColumnHeaderBidAdjustment"),this.level=i.level,this.useCampaignSettings=v.a.observable(!1),this.useCampaignSettings.subscribe(this.onCampaignSettingsCheckChange,this),this.showAdGroupOverrideInformation=v.a.observable(!1),this.isForVNext=v.a.observable(i.isForVNext),this.readonlyBid=v.a.computed(this.computeReadonlyBid,this),this.rows=[],this.targetTypeToErrorProperty={},this.logInteraction=u.a.once(function(){t.options.activityLogger&&t.options.activityLogger.signal("".concat(t.options.targetType," bid adjustment changed"),"".concat(t.options.targetType," target"))}),this.supportCashbackSettings=v.a.observable(i.supportCashbackSettings&&!y.a.Permissions.IsPersonalizedOffersV3Enabled),this.currentCampaign=i.currentCampaign,this.currentAdGroup=i.currentAdGroup,this.populateRows(i)}return Object(a.a)(e,[{key:"populateRows",value:function(e){var t=this;u.a.each(u.a.keys(e),function(i){u.a.has(t.options,i)&&(t.options[i]=e[i])}),u.a.each(this.targetRowKeys,function(i){var n;t["".concat(t.targetTypePrefix).concat(i,"Row")]=n={targetKey:i,targetName:O.get("".concat(t.targetTypePrefix,"_").concat(i)),bidAdjustmentOptions:"MultimediaAdType"===t.targetTypePrefix?S.a.multimediaBidAdjustmentOptions:S.a.bidAdjustmentOptions,selectedBidAdjustmentOption:v.a.observable(t.getSelectedBidAdjustmentOption(i,e)),bidAdjustmentValue:v.a.observable(t.getBidAdjustmentValue(i,e)),koErrorObservable:"".concat(t.targetTypePrefix).concat(i,"ErrorObservable"),cashbackPercentValue:v.a.observable(t.getCashbackPercentValue(i,e)),koErrorType:"".concat(t.targetTypePrefix).concat(i,"ErrorType")},n.bidAdjustmentValue.subscribe(function(){t.validate(),t.logInteraction()},t),n.selectedBidAdjustmentOption.subscribe(function(){t.validate(),t.logInteraction()},t),n.cashbackPercentValue.subscribe(function(){t.validate(),t.logInteraction()});var a=e["".concat(t.targetTypePrefix).concat(i,"CampaignCashbackPercent")],r=e["".concat(t.targetTypePrefix).concat(i,"AdGroupCashbackPercent")];t["original".concat(t.targetTypePrefix).concat(i,"CampaignBidAdjustmentValue")]=e["".concat(t.targetTypePrefix).concat(i,"CampaignBidAdjustment")],t["original".concat(t.targetTypePrefix).concat(i,"AdgroupBidAdjustmentValue")]=e["".concat(t.targetTypePrefix).concat(i,"AdgroupBidAdjustment")],t["original".concat(t.targetTypePrefix).concat(i,"CampaignCashbackPercentValue")]=a,t["original".concat(t.targetTypePrefix).concat(i,"AdgroupCashbackPercentValue")]=r,t["".concat(t.targetTypePrefix).concat(i,"CampaignBidId")]=e["".concat(t.targetTypePrefix).concat(i,"CampaignBidId")],t["".concat(t.targetTypePrefix).concat(i,"AdgroupBidId")]=e["".concat(t.targetTypePrefix).concat(i,"AdgroupBidId")],t["".concat(t.targetTypePrefix).concat(i,"CampaignCashbackPercentValue")]=a,t["".concat(t.targetTypePrefix).concat(i,"AdGroupCashbackPercentValue")]=r,t["".concat(t.targetTypePrefix).concat(i,"ErrorObservable")]=v.a.observable(!0).extend({validate:[]}),t["".concat(t.targetTypePrefix).concat(i,"ErrorType")]=v.a.observable(null);var o=t["".concat(t.targetTypePrefix).concat(i,"Row")];u.a.has(t.rowExtenders,i)&&(o=u.a.extend(o,t.rowExtenders[i])),t.rows.push(o),t.targetTypeToErrorProperty["".concat(i)]="".concat(t.targetTypePrefix).concat(i,"ErrorObservable")});var i=u.a.some(this.targetRowKeys,function(e){var i=!1;if("adgroup"===t.options.level)if("adgroup-create"===t.options.scenario){if("MultimediaAdsBids"===e)return!1;var n=t["".concat(t.targetTypePrefix).concat(e,"Row")];i=0!==n.bidAdjustmentValue()||!t.isCashbackValueEmpty(n.cashbackPercentValue())}else"adgroup-settings"===t.options.scenario&&(i="NativeAdsBids"===e?!u.a.isNull(t.options["".concat(t.targetTypePrefix).concat(e,"AdgroupBidAdjustment")])||!t.isCashbackValueEmpty(t.options["".concat(t.targetTypePrefix).concat(e,"AdGroupCashbackPercent")]):"MultimediaAdsBids"===e?!u.a.isNull(t.options["".concat(t.targetTypePrefix).concat(e,"AdgroupBidAdjustment")]):t["".concat(t.targetTypePrefix).concat(e,"AdgroupBidId")]>0);return i});"adgroup"!==this.options.level||i||(this.useCampaignSettings(!0),this.setShowAdGroupOverrideInformation()),this.setupCashbackValuesForAllRows(),this.useCampaignSettings.subscribe(function(){t.resetCashbackInheritInfoInAllRows()})}},{key:"setupCashbackValuesForAllRows",value:function(){var e=this,t=this.options;u.a.each(this.targetRowKeys,function(i){var n=e["".concat(e.targetTypePrefix).concat(i,"Row")],a=t["".concat(e.targetTypePrefix).concat(i,"CampaignCashbackPercent")],r=t["".concat(e.targetTypePrefix).concat(i,"AdGroupCashbackPercent")];e.setCashbackInheritInfo({campaignCashbackPercent:a,adGroupCashbackPercent:r,targetRowKey:i,row:n,dataset:t}),n.cashbackOptions=v.a.observable(e.getCashbackOptions(i,t)),n.selectedCashbackOption=v.a.observable(e.getSelectedCashbackOption(i,t)),n.cashbackInheritValue=v.a.observable(e.getCashbackInheritValue(i,t)),n.snapshotOverrideCashbackPercent=v.a.observable(n.cashbackPercentValue()),n.selectedCashbackOption.subscribe(function(e){"override"===e&&n.snapshotOverrideCashbackPercent(n.cashbackPercentValue())},n,"beforeChange"),n.selectedCashbackOption.subscribe(function(e){"override"===e?n.cashbackPercentValue(n.snapshotOverrideCashbackPercent()):"noCashback"===e?n.cashbackPercentValue(0):n.cashbackPercentValue(null)})})}},{key:"findTargetKey",value:function(e){switch(e.CriterionType){case A.default.Device:return e.Criterion.DeviceCriterion.DeviceName;case A.default.Age:return e.Criterion.AgeCriterion.Target;case A.default.Gender:return e.Criterion.GenderCriterion.Target}return""}},{key:"setData",value:function(e){var t=this,i=this.findTargetKey(e),n="campaign"===this.level?"Campaign":"Adgroup",a="".concat(this.targetTypePrefix).concat(i).concat(n,"BidId");"Deleted"!==e.Status?e.CriterionType!==A.default.Device||"Computers"!==i?u.a.each(this.rows,function(n){n.targetKey===i&&(t[a]=t.options[a]=e.Id)}):this[a]=this.options[a]=e.Id:this[a]=this.options[a]=""}},{key:"setLevel",value:function(e){this.options.level=this.level=e}},{key:"computeReadonlyBid",value:function(){return"adgroup"===this.level&&this.useCampaignSettings()}},{key:"onCampaignSettingsCheckChange",value:function(){var e=this;u.a.each(this.targetRowKeys,function(t){e["".concat(e.targetTypePrefix).concat(t,"Row")].selectedBidAdjustmentOption(e.getSelectedBidAdjustmentOption(t,e.options)),e["".concat(e.targetTypePrefix).concat(t,"Row")].bidAdjustmentValue(e.getBidAdjustmentValue(t,e.options)),e["".concat(e.targetTypePrefix).concat(t,"Row")].snapshotOverrideCashbackPercent&&e["".concat(e.targetTypePrefix).concat(t,"Row")].snapshotOverrideCashbackPercent(e.getCashbackPercentValue(t,e.options)),e["".concat(e.targetTypePrefix).concat(t,"Row")].cashbackPercentValue(e.getCashbackPercentValue(t,e.options))})}},{key:"getSelectedBidAdjustmentOption",value:function(e,t){return"campaign"===this.options.level||this.useCampaignSettings()?t["".concat(this.targetTypePrefix).concat(e,"CampaignBidAdjustment")]>=0?S.a.bidAdjustmentIncreaseValue:S.a.bidAdjustmentDecreaseValue:t["".concat(this.targetTypePrefix).concat(e,"AdgroupBidAdjustment")]>=0?S.a.bidAdjustmentIncreaseValue:S.a.bidAdjustmentDecreaseValue}},{key:"getBidAdjustmentValue",value:function(e,t){return"campaign"===this.options.level||this.useCampaignSettings()?Math.abs(t["".concat(this.targetTypePrefix).concat(e,"CampaignBidAdjustment")]):"MultimediaAdsBids"===e?Math.abs(t["".concat(this.targetTypePrefix).concat(e,"AdgroupBidAdjustment")]?t["".concat(this.targetTypePrefix).concat(e,"AdgroupBidAdjustment")]:S.a.multimediaAdDefaultBid):Math.abs(t["".concat(this.targetTypePrefix).concat(e,"AdgroupBidAdjustment")])}},{key:"getCashbackPercentValue",value:function(e,t){return"campaign"===this.options.level||this.useCampaignSettings()?t["".concat(this.targetTypePrefix).concat(e,"CampaignCashbackPercent")]:t["".concat(this.targetTypePrefix).concat(e,"AdGroupCashbackPercent")]}},{key:"getCashbackOptions",value:function(e,t){return"campaign"===this.options.level||this.useCampaignSettings()?t["".concat(this.targetTypePrefix).concat(e,"CampaignCashbackOptions")]:t["".concat(this.targetTypePrefix).concat(e,"AdGroupCashbackOptions")]}},{key:"getSelectedCashbackOption",value:function(e,t){return"campaign"===this.options.level||this.useCampaignSettings()?t["".concat(this.targetTypePrefix).concat(e,"CampaignCashbackSelectedOption")]:t["".concat(this.targetTypePrefix).concat(e,"AdGroupCashbackSelectedOption")]}},{key:"getCashbackInheritValue",value:function(e,t){var i;return("campaign"===this.options.level||this.useCampaignSettings())&&(i=t["".concat(this.targetTypePrefix).concat(e,"CampaignCashbackInheritValue")]),"-"===(i=t["".concat(this.targetTypePrefix).concat(e,"AdGroupCashbackInheritValue")])?i:E.fromFloatToString(i,2)}},{key:"getValues",value:function(){var e=this,t=[];if("adgroup-create"===this.options.scenario&&this.useCampaignSettings())return t;if("adgroup-settings"===this.options.scenario&&this.useCampaignSettings())return u.a.each(this.targetRowKeys,function(i){if(e["".concat(e.targetTypePrefix).concat(i,"AdgroupBidId")]>0){var n={Type:e.criterionType};n["".concat(e.criterionType,"Criterion")]={},n["".concat(e.criterionType,"Criterion")]["".concat(e.criterionTypeTarget)]=i,t.push({Id:e["".concat(e.targetTypePrefix).concat(i,"AdgroupBidId")],CriterionType:e.criterionType,Criterion:n,Status:"Deleted"})}}),t;var i="campaign"===this.options.level||this.useCampaignSettings()?"Campaign":"Adgroup",n=this.findIfThereIsAnyDeviceChange(i);return u.a.each(this.targetRowKeys,function(a){var r=e["".concat(e.targetTypePrefix).concat(a,"Row")],o=Number(r.bidAdjustmentValue())*r.selectedBidAdjustmentOption(),s=r.cashbackPercentValue(),l=!1;if(l=e["".concat(e.targetTypePrefix).concat(a).concat(i,"BidId")]?!("adgroup"!==e.options.level||!e.useCampaignSettings())||(o!==e["original".concat(e.targetTypePrefix).concat(a).concat(i,"BidAdjustmentValue")]||e.isCashbackValuesEqual(s,e["original".concat(e.targetTypePrefix).concat(a).concat(i,"CashbackPercentValue")])):"adgroup"===e.options.level&&!e.useCampaignSettings()||(0!==o||!e.isCashbackValueEmpty(s)),"Device"===e.criterionType&&n&&(l=!0),l){var c={Type:e.criterionType,BidAdjustment:o};e.supportCashbackSettings()&&(c.CashbackPercent=s),c["".concat(e.criterionType,"Criterion")]={},c["".concat(e.criterionType,"Criterion")]["".concat(e.criterionTypeTarget)]=a,t.push({Id:e["".concat(e.targetTypePrefix).concat(a).concat(i,"BidId")]||"",CriterionType:e.criterionType,Criterion:c})}}),t}},{key:"findIfThereIsAnyDeviceChange",value:function(e){var t=this,i=!1;return"Device"===this.criterionType&&u.a.each(this.targetRowKeys,function(n){var a=t["".concat(t.targetTypePrefix).concat(n,"Row")],r=Number(a.bidAdjustmentValue())*a.selectedBidAdjustmentOption(),o=a.cashbackPercentValue();i=t["".concat(t.targetTypePrefix).concat(n).concat(e,"BidId")]?!("adgroup"!==t.options.level||!t.useCampaignSettings())||(i||r!==t["original".concat(t.targetTypePrefix).concat(n).concat(e,"BidAdjustmentValue")]||o!==t["original".concat(t.targetTypePrefix).concat(n).concat(e,"CashbackPercentValue")]):"adgroup"===t.options.level&&!t.useCampaignSettings()||(i||0!==r||""!==o)}),i}},{key:"isInRange",value:function(e,t){return"MultimediaAdsBids"===t?this["".concat(this.targetTypePrefix).concat(t,"Row")].selectedBidAdjustmentOption()===S.a.bidAdjustmentIncreaseValue&&e<=S.a.maximumBid["".concat(this.targetTypePrefix,"_").concat(t)]&&e>=S.a.minimumBid["".concat(this.targetTypePrefix,"_").concat(t)]:e>=0&&(this["".concat(this.targetTypePrefix).concat(t,"Row")].selectedBidAdjustmentOption()===S.a.bidAdjustmentIncreaseValue?e<=S.a.maximumBid["".concat(this.targetTypePrefix,"_").concat(t)]:e<=S.a.minimumBid["".concat(this.targetTypePrefix,"_").concat(t)])}},{key:"validate",value:function(){var e=this;if(!this.errors)return!0;var t=[],i=[],n=!0;return u.a.each(this.targetRowKeys,function(a){var r=e["".concat(e.targetTypePrefix).concat(a,"Row")],o=r.bidAdjustmentValue(),s=e.isInRange(o,a),l=Object(T.a)(o),c=l.isNotEmpty,d=l.isDecimal,u=l.isNonNegative,p=l.isEndingWithDigit,g=c&&s&&d&&u&&p,h=r.cashbackPercentValue(),m=!e.supportCashbackSettings()||Object(I.isCashbackPercentValid)(h,E);if(n=n&&g&&m,e["".concat(e.targetTypePrefix).concat(a,"ErrorObservable")](g),n?e["".concat(e.targetTypePrefix).concat(a,"ErrorType")](null):e["".concat(e.targetTypePrefix).concat(a,"ErrorType")](m?"BID":"CASHBACK"),c?d&&u&&p?s||t.push({Error:e.MTBidAdjustmentErrorCode,ErrorNumber:e.MTBidAdjustmentErrorNumber,Property:"".concat(e.targetTypePrefix).concat(a,"ErrorObservable")}):t.push({Error:O.get("Validation_InvalidBidAdjustment"),ErrorNumber:"",Property:"".concat(e.targetTypePrefix).concat(a,"ErrorObservable")}):t.push({Error:O.get("AdvancedTargeting_Error_BidValueMustNotBeEmpty"),ErrorNumber:"",Property:"".concat(e.targetTypePrefix).concat(a,"ErrorObservable")}),!m){var f=Object(I.getCashbackPercentValidationError)(h,O,E);i.push({Error:f,ErrorNumber:"",Property:"".concat(e.targetTypePrefix).concat(a,"ErrorObservable")})}}),t=t.concat(i),t=Object(_.getBulkApiErrors)(t),t=this.populateErrorMessageConstants(t),this.errors.add(t),n}},{key:"isCashbackValueEmpty",value:function(e){return null==e||""===e||!this.supportCashbackSettings()}},{key:"isCashbackValuesEqual",value:function(e,t){return null==e&&(e=""),null==t&&(t=""),!this.supportCashbackSettings()||e===t}},{key:"resetCashbackInheritInfoInAllRows",value:function(e){var t=this;if(null!=e){var i=e.value,n=e.level;"AdGroup"===n?this.currentAdGroup=u.a.extend({},this.currentAdGroup,{AdGroupCashback:u.a.extend({},this.currentAdGroup?this.currentAdGroup.AdGroupCashback:{},{Percent:i})}):"Campaign"===n&&(this.currentCampaign=u.a.extend({},this.currentCampaign,{CampaignCashback:u.a.extend({},this.currentCampaign?this.currentCampaign.CampaignCashback:{},{Percent:i})}))}u.a.each(this.targetRowKeys,function(e){var i=t["".concat(t.targetTypePrefix).concat(e,"Row")],n=null,a=null;"campaign"===t.options.level||t.useCampaignSettings()?n=i.cashbackPercentValue():(n=i.cashbackInheritValue(),a=i.cashbackPercentValue());var r=t.options;t.setCashbackInheritInfo({campaignCashbackPercent:n,adGroupCashbackPercent:a,dataset:t.options,row:i,targetRowKey:e}),i.cashbackInheritValue(t.getCashbackInheritValue(e,r)),i.cashbackOptions(t.getCashbackOptions(e,r)),i.selectedCashbackOption(t.getSelectedCashbackOption(e,r))})}},{key:"setCashbackInheritInfo",value:function(e){var t=e.campaignCashbackPercent,i=e.adGroupCashbackPercent,n=e.dataset,a=e.targetRowKey,r=Object(I.getCashbackInheritOptions)({viewContext:{currentAdGroup:this.currentAdGroup,currentCampaign:this.currentCampaign},i18n:O,readonly:this.readonlyBid(),CashbackPercent:t}),o=Object(I.getCashbackInheritOptions)({viewContext:{currentAdGroup:this.currentAdGroup,currentCampaign:this.currentCampaign},i18n:O,readonly:this.readonlyBid(),CashbackPercent:i});n["".concat(this.targetTypePrefix).concat(a,"CampaignCashbackOptions")]=r.options,n["".concat(this.targetTypePrefix).concat(a,"AdGroupCashbackOptions")]=o.options,n["".concat(this.targetTypePrefix).concat(a,"CampaignCashbackInheritValue")]=r.inheritValue,n["".concat(this.targetTypePrefix).concat(a,"AdGroupCashbackInheritValue")]=o.inheritValue,n["".concat(this.targetTypePrefix).concat(a,"CampaignCashbackSelectedOption")]=r.selected,n["".concat(this.targetTypePrefix).concat(a,"AdGroupCashbackSelectedOption")]=o.selected}},{key:"populateErrorMessageConstants",value:function(e){var t=this,i=[];return u.a.each(e,function(e){e.message=e.message.replace("{0}",S.a.minimumBid["".concat(t.targetTypePrefix,"_").concat(t.targetRowKeys[0])]).replace("{1}",S.a.maximumBid["".concat(t.targetTypePrefix,"_").concat(t.targetRowKeys[0])]),i.push(e)}),i}},{key:"extractTargetingErrors",value:function(e){var t=this,i=e.errors,n=[],a=[];return u.a.map(i,function(i){if(i.Error===t.MTBidAdjustmentErrorCode){var r=u.a.find(e.entity.CampaignCriterions,function(e){return e["Client Id"]===i["Client Id"]});r&&(i.Property=t.targetTypeToErrorProperty[r.Criterion["".concat(t.criterionType,"Criterion")]["".concat(t.criterionTypeTarget)]]),a.push(i)}else n.push(i)}),{criterionErrors:a,remainingErrors:n}}},{key:"handleErrors",value:function(e){var t=this.extractTargetingErrors(e),i=t.criterionErrors,n=Object(_.getBulkApiErrors)(i);return n=this.populateErrorMessageConstants(n),this.errors.add(n),t.remainingErrors}},{key:"setShowAdGroupOverrideInformation",value:function(){}}]),e}(),M=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),j=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,u.a.defaults({targetTypePrefix:"DeviceType",targetRowKeys:S.a.rowKeys.Device,criterionType:"Device",criterionTypeTarget:"DeviceName",MTBidAdjustmentErrorCode:"CampaignServiceInvalidDeviceTargetBidAdjustment",MTBidAdjustmentErrorNumber:"2934",targetPopupId:"pop_BA_TargetingSettingsPopup_TargetTablet"},{},i))),k.a.properties(Object(C.a)(Object(C.a)(e))),e}return Object(s.a)(t,e),Object(a.a)(t,[{key:"isInRange",value:function(e,t){return e>=0&&(this["".concat(this.targetTypePrefix).concat(t,"Row")].selectedBidAdjustmentOption()===S.a.bidAdjustmentIncreaseValue?e<=S.a.maximumBid["".concat(this.targetTypePrefix,"_").concat(t)]:e<=S.a.minimumBid["".concat(this.targetTypePrefix,"_").concat(t)])}},{key:"populateErrorMessageConstants",value:function(e){var t=this,i={DeviceTypeComputersErrorObservable:"DeviceType_Computers",DeviceTypeTabletsErrorObservable:"DeviceType_Tablets",DeviceTypeSmartphonesErrorObservable:"DeviceType_Smartphones"};return u.a.map(e,function(e){var n="DeviceTypeComputersErrorObservable"===e.property&&e.ErrorNumber===t.MTBidAdjustmentErrorNumber?M.get("ErrorNumber_BidAdjustment_OutOfRange"):e.message;return e.message=n.replace("{0}",S.a.minimumBid[i[e.property]]).replace("{1}",S.a.maximumBid[i[e.property]]),e})}},{key:"onCampaignSettingsCheckChange",value:function(e){Object(m.a)(Object(o.a)(t.prototype),"onCampaignSettingsCheckChange",this).call(this,e),this.showAdGroupOverrideInformation(!1)}},{key:"setShowAdGroupOverrideInformation",value:function(){this.showAdGroupOverrideInformation(this.options.fromSettingsGrid)}}]),t}(P),L=function(e,t,i,n){return"campaign"===i||n?t["".concat(e,"CampaignBidAdjustment")]>=0?S.a.bidAdjustmentIncreaseValue:S.a.bidAdjustmentDecreaseValue:t["".concat(e,"AdgroupBidAdjustment")]>=0?S.a.bidAdjustmentIncreaseValue:S.a.bidAdjustmentDecreaseValue},D=function(e,t,i,n){return"campaign"===i||n?Math.abs(t["".concat(e,"CampaignBidAdjustment")]):Math.abs(t["".concat(e,"AdgroupBidAdjustment")])},R=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),N=window.globalLegacyI18n.get("component/i18n/loader!component/api-errors-campaign");v.a.subscribable.fn.subscribeChanged=function(e,t){var i;t.subscribe(function(e){i=e},void 0,"beforeChange"),t.subscribe(function(t){e(t,i)})};var V=function e(t,i){var a=this;Object(n.a)(this,e),this.key="DeviceType".concat(t.key),this.name=t.key,this.displayName=t.name,this.bidAdjustmentOptions=S.a.bidAdjustmentOptions,this.error=v.a.observable(""),this.expandLinkText=v.a.observable(R.get("EditLink")),this.readonlyBid=v.a.computed(function(){return"adgroup"===i.level&&i.useCampaignSettings()||!i.options.showLevelToggle&&i.options.isParentView}),this.selectedBidAdjustmentOption=v.a.observable(L(this.key,i.options,i.level,i.useCampaignSettings())),this.selectedBidAdjustmentOption.subscribe(function(){i._validateBid(a)},this),this.bidAdjustmentValue=v.a.observable(D(this.key,i.options,i.level,i.useCampaignSettings())),this.bidAdjustmentValue.subscribe(function(){i._validateBid(a)},this),this.originalCampaignBidAdjustmentValue=i.options["".concat(this.key,"CampaignBidAdjustment")],this.originalAdgroupBidAdjustmentValue=i.options["".concat(this.key,"AdgroupBidAdjustment")],this.CampaignBidId=i.options["".concat(this.key,"CampaignBidId")],this.AdgroupBidId=i.options["".concat(this.key,"AdgroupBidId")],this.selectedOsCount=v.a.observable(0),this.isSelected=v.a.observable(),this.isSelected.subscribeChanged(function(e,t){!t&&e?i.selectedDeviceCount++:t&&!e&&i.selectedDeviceCount--},this.isSelected),this.isSelected(i._shouldSelectTarget(this.key)),this.onClick=function(){return a.isSelected()||0!==i.selectedDeviceCount?u.a.each(a.operatingSystems,function(e){e.isSelected(a.isSelected())}):a.isSelected(!0),!0},this.changeText=function(e,t){t.currentTarget.className.indexOf("collapsed")>-1?e.expandLinkText(R.get("EditLink_Hide")):e.expandLinkText(R.get("EditLink"))},this.operatingSystems=u.a.map(t.operatingSystems,function(e){var t=v.a.observable();t.subscribeChanged(function(e,t){!t&&e?(a.isSelected(!0),a.selectedOsCount(a.selectedOsCount()+1)):t&&!e&&a.selectedOsCount(a.selectedOsCount()-1)},t),t(i._shouldSelectTarget(a.key)||i._shouldSelectTarget("".concat(a.key).concat(e)));var n={name:e,displayName:R.get("Targeting_Device_OperatingSystem_".concat(e)),parentName:a.name,CampaignBidId:i.options["".concat(a.key).concat(e,"CampaignBidId")],AdgroupBidId:i.options["".concat(a.key).concat(e,"AdgroupBidId")],originalCampaignBidAdjustmentValue:i.options["".concat(a.key).concat(e,"CampaignBidAdjustment")],originalAdgroupBidAdjustmentValue:i.options["".concat(a.key).concat(e,"AdgroupBidAdjustment")],selectedBidAdjustmentOption:v.a.computed(function(){return a.selectedBidAdjustmentOption()},a),bidAdjustmentValue:v.a.computed(function(){return a.bidAdjustmentValue()},a),isSelected:t,onClick:function(){return t()||0!==a.selectedOsCount()||t(!0),!0}};return("Campaign"===i.levelPrefix()&&n.CampaignBidId>0||"Adgroup"===i.levelPrefix()&&n.AdgroupBidId>0)&&(a.selectedBidAdjustmentOption(L("".concat(a.key).concat(e),i.options,i.level,i.useCampaignSettings())),a.bidAdjustmentValue(D("".concat(a.key).concat(e),i.options,i.level,i.useCampaignSettings()))),n}),this.osSelected=v.a.computed(function(){return a.selectedOsCount()===a.operatingSystems.length?R.get("Targeting_TargetOSAllOS"):a.selectedOsCount()<a.operatingSystems.length&&a.selectedOsCount()>0?u.a.chain(a.operatingSystems).filter(function(e){return e.isSelected()}).pluck("displayName").value().join(","):""},this)},B=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this.options=i,this.level=i.level,this.useCampaignSettings=v.a.observable(!1),this.isForVNext=v.a.observable(i.isForVNext),this.useCampaignSettings.subscribe(this._onCampaignSettingsCheckChange,this),this.showAdGroupOverrideInformation=v.a.observable(!1),this.devices=[],this.selectedDeviceCount=0,this.levelPrefix=v.a.computed(function(){return"campaign"===t.options.level||t.useCampaignSettings()?"Campaign":"Adgroup"},this),this._populatedevices()}return Object(a.a)(e,[{key:"_ifAnyAdgroupBidAdjustment",value:function(e){var t=!1;return"adgroup-settings"===this.options.scenario&&(t=e.AdgroupBidId>0),t}},{key:"_populatedevices",value:function(){var e=this,t=!1;u.a.each(S.a.rowKeys.Device,function(i){var n=new V({key:i,name:R.get("DeviceType_".concat(i)),operatingSystems:S.a.osNames[i]},e);e.devices.push(n),"adgroup"===e.options.level&&((t=t||e._ifAnyAdgroupBidAdjustment(n))||(t=t||u.a.some(n.operatingSystems,function(t){return e._ifAnyAdgroupBidAdjustment(t)})))}),"adgroup"===this.options.level&&!t&&this.options.showLevelToggle?(this.useCampaignSettings(!0),this.showAdGroupOverrideInformation(this.options.fromSettingsGrid)):0===this.selectedDeviceCount&&this._selectAll()}},{key:"_onCampaignSettingsCheckChange",value:function(){var e=this;u.a.each(this.devices,function(t){var i=e._shouldSelectTarget(t.key);t.isSelected(!1),t.isSelected(i),t.selectedBidAdjustmentOption(L(t.key,e.options,e.level,e.useCampaignSettings())),t.bidAdjustmentValue(D(t.key,e.options,e.level,e.useCampaignSettings())),u.a.each(t.operatingSystems,function(n){var a=e._shouldSelectTarget("".concat(t.key).concat(n.name));n.isSelected(!1),n.isSelected(i||a),a&&(t.selectedBidAdjustmentOption(L("".concat(t.key).concat(n.name),e.options,e.level,e.useCampaignSettings())),t.bidAdjustmentValue(D("".concat(t.key).concat(n.name),e.options,e.level,e.useCampaignSettings())))})}),0===this.selectedDeviceCount&&this._selectAll(),this.showAdGroupOverrideInformation(!1)}},{key:"_selectAll",value:function(){u.a.each(this.devices,function(e){e.isSelected(!0),u.a.each(e.operatingSystems,function(e){e.isSelected(!0)})})}},{key:"_shouldSelectTarget",value:function(e){var t=this.useCampaignSettings();return"creation-workflow"===this.options.scenario||("adgroup-create"===this.options.scenario?!t||this.options["".concat(e,"CampaignBidId")]>0:"campaign-settings"===this.options.scenario?this.options["".concat(e,"CampaignBidId")]>0:"targeting-settings-inherited-copy-over"===this.options.subScenario?this.options["".concat(e,"CampaignBidId")]>0:t?this.options["".concat(e,"CampaignBidId")]>0:this.options["".concat(e,"AdgroupBidId")]>0)}},{key:"_getCriterion",value:function(e,t,i,n,a){var r={Id:e,CriterionType:"Device",Criterion:{Type:"Device",DeviceCriterion:{DeviceName:t}}};return n&&(r.Criterion.BidAdjustment=n),i&&(r.Criterion.DeviceCriterion.OSName=i),a&&(r.Status="Deleted"),r}},{key:"_deleteCriterionWhenAppropriate",value:function(e,t,i){var n=this.levelPrefix(),a=t||e;return!!(a["".concat(n,"BidId")]>0&&(!a.isSelected()||t&&e.selectedOsCount()===e.operatingSystems.length||!t&&e.selectedOsCount()<e.operatingSystems.length))&&(i.push(this._getCriterion(a["".concat(n,"BidId")],a.parentName?a.parentName:a.name,a.parentName?a.name:null,null,!0)),!0)}},{key:"_addOrUpdateCriterion",value:function(e,t){var i=Number(e.bidAdjustmentValue())*e.selectedBidAdjustmentOption(),n=this.levelPrefix(),a=e.isSelected();(e["".concat(n,"BidId")]?a&&i!==e["original".concat(n,"BidAdjustmentValue")]:a)&&t.push(this._getCriterion(e["".concat(n,"BidId")],e.parentName?e.parentName:e.name,e.parentName?e.name:null,i))}},{key:"_validateBid",value:function(e){var t,i,n,a,r=e.bidAdjustmentValue();t=r>=0&&(e.selectedBidAdjustmentOption()===S.a.bidAdjustmentIncreaseValue?r<=S.a.maximumBid.DeviceType_Smartphones:"Smartphones"===e.name&&100===Number(r)||r<=S.a.minimumBid.DeviceType_Smartphones),i=parseInt(r)===Number(r),n=r.toString().length>0,a=r>=0;var o=n&&t&&i&&a;if(o)e.error("");else if(n)if(i&&a){if(!t){var s="Smartphones"===e.name?R.get("EnhancedCampaign_Mobile_Validation"):N.get("Error_Campaign_API_InvalidDeviceTargetBidAdjustment");e.error(s.replace("{0}",S.a.minimumBid.DeviceType_Smartphones).replace("{1}",S.a.maximumBid.DeviceType_Smartphones))}}else e.error(R.get("Validation_InvalidBidAdjustment"));else e.error(R.get("AdvancedTargeting_Error_BidValueMustNotBeEmpty"));return o}},{key:"setLevel",value:function(e){this.options.level=this.level=e}},{key:"validate",value:function(){var e=this,t=!0;return u.a.each(this.devices,function(i){t=t&&e._validateBid(i)},this),t}},{key:"getValues",value:function(){var e=this,t=[];return"adgroup-create"===this.options.scenario&&this.useCampaignSettings()?t:"adgroup-settings"===this.options.scenario&&this.useCampaignSettings()?(u.a.each(this.devices,function(i){i.AdgroupBidId>0?t.push(e._getCriterion(i.AdgroupBidId,i.name,null,null,!0)):u.a.each(i.operatingSystems,function(n){n.AdgroupBidId>0&&t.push(e._getCriterion(n.AdgroupBidId,i.name,n.name,null,!0))})}),t):(u.a.each(this.devices,function(i){e._deleteCriterionWhenAppropriate(i,null,t)||i.selectedOsCount()!==i.operatingSystems.length||e._addOrUpdateCriterion(i,t),u.a.each(i.operatingSystems,function(n){!e._deleteCriterionWhenAppropriate(i,n,t)&&i.selectedOsCount()<i.operatingSystems.length&&e._addOrUpdateCriterion(n,t)},e)},this),t)}},{key:"setData",value:function(e){if(e.Id&&!e.errors){var t=e.Criterion.DeviceCriterion.DeviceName,i=e.Criterion.DeviceCriterion.OSName,n=u.a.find(this.devices,function(e){return e.name===t});n&&(n.error(""),i&&(n=u.a.find(n.operatingSystems,function(e){return e.name===i}))),n&&("Deleted"===e.Status?n["".concat(this.levelPrefix(),"BidId")]="":n["".concat(this.levelPrefix(),"BidId")]=e.Id)}}},{key:"handleErrors",value:function(e){var t=this,i=[],n=Object(_.getBulkApiErrors)(e.errors),a="campaign"===this.options.level?e.entity.CampaignCriterions:e.entity.AdGroupCriterions;return u.a.map(e.errors,function(e){var r=u.a.find(a,function(t){return t["Client Id"]===e["Client Id"]});if(r){var o=u.a.find(t.devices,function(e){return r.Criterion.DeviceCriterion&&e.name===r.Criterion.DeviceCriterion.DeviceName});if(o){var s=u.a.find(n,function(t){return t.code===e.Error});o.error(s.message)}else i.push(e)}else i.push(e)}),i}}]),e}(),F=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,u.a.defaults({targetTypePrefix:"AgeType",targetRowKeys:S.a.rowKeys.Age,criterionType:"Age",criterionTypeTarget:"Target",MTBidAdjustmentErrorCode:"CampaignServiceInvalidAgeTargetBidAdjustment",MTBidAdjustmentErrorNumber:"2936"},i))),k.a.properties(Object(C.a)(Object(C.a)(e))),e}return Object(s.a)(t,e),t}(P),U=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,u.a.defaults({targetTypePrefix:"GenderType",targetRowKeys:S.a.rowKeys.Gender,criterionType:"Gender",criterionTypeTarget:"Target",MTBidAdjustmentErrorCode:"CampaignServiceInvalidGenderTargetBidAdjustment",MTBidAdjustmentErrorNumber:"2937"},i))),k.a.properties(Object(C.a)(Object(C.a)(e))),e}return Object(s.a)(t,e),t}(P),G=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),z=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,u.a.defaults({targetTypePrefix:"NativeAdType",targetRowKeys:S.a.rowKeys.NativeAd,criterionType:"NativeAd",criterionTypeTarget:"Target",MTBidAdjustmentErrorCode:"CampaignServiceInvalidAgeTargetBidAdjustment",MTBidAdjustmentErrorNumber:"2936",targetPopupId:"pop_BA_NativeAd_BidAdj"},i))),k.a.properties(Object(C.a)(Object(C.a)(e))),e.options.isNativeAdsRebrandingEnabled&&(e.targetHeader=G.getString("AdvancedTargeting_AudienceAdsText"),e.rows&&e.rows.length>0&&(e.rows[0].targetName=G.getString("AdvancedTargeting_AudienceAdsBids"))),e}return Object(s.a)(t,e),Object(a.a)(t,[{key:"getValues",value:function(){return{NativeBidAdjustment:"adgroup-create"!==this.options.scenario&&"adgroup-settings"!==this.options.scenario||!this.useCampaignSettings()?Number(this.NativeAdTypeNativeAdsBidsRow.bidAdjustmentValue())*this.NativeAdTypeNativeAdsBidsRow.selectedBidAdjustmentOption():null}}}]),t}(P),H=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),W=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,u.a.defaults({targetTypePrefix:"MultimediaAdType",targetRowKeys:S.a.rowKeys.MultimediaAd,criterionType:"MultimediaAd",criterionTypeTarget:"Target",MTBidAdjustmentErrorCode:"CampaignServiceInvalidAgeTargetBidAdjustment",MTBidAdjustmentErrorNumber:"2942",targetPopupId:"pop_BA_MMA_BidAdjustment"},i))),k.a.properties(Object(C.a)(Object(C.a)(e))),e.targetHeader=H.getString("AdvancedTargeting_MultimediaAdsText"),e.rows&&e.rows.length>0&&(e.rows[0].targetName=H.getString("AdvancedTargeting_MultimediaAdsBids")),e}return Object(s.a)(t,e),Object(a.a)(t,[{key:"getValues",value:function(){return{MultimediaAdBidAdjustment:"adgroup-create"!==this.options.scenario&&"adgroup-settings"!==this.options.scenario||!this.useCampaignSettings()?Number(this.MultimediaAdTypeMultimediaAdsBidsRow.bidAdjustmentValue())*this.MultimediaAdTypeMultimediaAdsBidsRow.selectedBidAdjustmentOption():null}}}]),t}(P),q=i("DCAU"),$=i.n(q),K=i("P8Y4"),J=i.n(K),Z=i("AQBV"),Y=i.n(Z),Q=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),X={Device:j,OriginalDevice:B,Age:F,Gender:U,NativeAd:z,MultimediaAd:W},ee={Device:$.a,OriginalDevice:J.a,Age:$.a,Gender:$.a,NativeAd:$.a,MultimediaAd:$.a};function te(e,t){return new X[e](t)}var ie=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,u.a.defaults(this.options,{campaignId:"",adgroupId:"",level:"campaign",scenario:"creation-workflow",targetType:A.default.Device,DeviceTypeTabletsCampaignBidAdjustment:0,DeviceTypeTabletsAndroidCampaignBidAdjustment:0,DeviceTypeTabletsBlackBerryCampaignBidAdjustment:0,DeviceTypeTabletsiOSCampaignBidAdjustment:0,DeviceTypeTabletsWindowsCampaignBidAdjustment:0,DeviceTypeTabletsOtherCampaignBidAdjustment:0,DeviceTypeSmartphonesAndroidCampaignBidAdjustment:0,DeviceTypeSmartphonesBlackBerryCampaignBidAdjustment:0,DeviceTypeSmartphonesiOSCampaignBidAdjustment:0,DeviceTypeSmartphonesCampaignBidAdjustment:0,DeviceTypeSmartphonesWindowsCampaignBidAdjustment:0,DeviceTypeSmartphonesOtherCampaignBidAdjustment:0,DeviceTypeComputersCampaignBidAdjustment:0,DeviceTypeComputersWindowsCampaignBidAdjustment:0,AgeTypeEighteenToTwentyFiveCampaignBidAdjustment:0,AgeTypeTwentyFiveToThirtyFiveCampaignBidAdjustment:0,AgeTypeThirtyFiveToFiftyCampaignBidAdjustment:0,AgeTypeFiftyToSixtyFiveCampaignBidAdjustment:0,AgeTypeSixtyFiveAndAboveCampaignBidAdjustment:0,GenderTypeMaleCampaignBidAdjustment:0,GenderTypeFemaleCampaignBidAdjustment:0,DeviceTypeTabletsAdgroupBidAdjustment:0,DeviceTypeTabletsAndroidAdgroupBidAdjustment:0,DeviceTypeTabletsBlackBerryAdgroupBidAdjustment:0,DeviceTypeTabletsiOSAdgroupBidAdjustment:0,DeviceTypeTabletsWindowsAdgroupBidAdjustment:0,DeviceTypeTabletsOtherAdgroupBidAdjustment:0,DeviceTypeSmartphonesAdgroupBidAdjustment:0,DeviceTypeSmartphonesAndroidAdgroupBidAdjustment:0,DeviceTypeSmartphonesBlackBerryAdgroupBidAdjustment:0,DeviceTypeSmartphonesiOSAdgroupBidAdjustment:0,DeviceTypeSmartphonesWindowsAdgroupBidAdjustment:0,DeviceTypeSmartphonesOtherAdgroupBidAdjustment:0,DeviceTypeComputersAdgroupBidAdjustment:0,DeviceTypeComputersWindowsAdgroupBidAdjustment:0,AgeTypeEighteenToTwentyFiveAdgroupBidAdjustment:0,AgeTypeTwentyFiveToThirtyFiveAdgroupBidAdjustment:0,AgeTypeThirtyFiveToFiftyAdgroupBidAdjustment:0,AgeTypeFiftyToSixtyFiveAdgroupBidAdjustment:0,AgeTypeSixtyFiveAndAboveAdgroupBidAdjustment:0,GenderTypeMaleAdgroupBidAdjustment:0,GenderTypeFemaleAdgroupBidAdjustment:0,NativeAdTypeNativeAdsBidsCampaignBidAdjustment:0,NativeAdTypeNativeAdsBidsAdgroupBidAdjustment:0,MultimediaAdTypeMultimediaAdsBidsCampaignBidAdjustment:S.a.multimediaAdDefaultBid,MultimediaAdTypeMultimediaAdsBidsAdgroupBidAdjustment:S.a.multimediaAdDefaultBid,fromSettingsGrid:!1,showLevelToggle:!0,isNativeAdsRebrandingEnabled:y.a.Permissions.IsNativeAdsRebrandingEnabled,currentCampaign:y.a.CurrentCampaign,currentAdGroup:y.a.CurrentAdGroup}),y.a.Permissions.IsPersonalizedOffersEnabled&&this.populateCashbackProperties(this.options),this.viewmodel=new te(this.options.targetType,t),this.toggleView=new w.a({toggleText:{on:Q.getString("Toggle_On"),off:Q.getString("Toggle_Off")},labelledbyId:"base-use-campaign-settings"}),this.toggleView.setToggleState(this.viewmodel.useCampaignSettings()?"on":"off"),this.listenTo(this.toggleView,"change",function(t){e.viewmodel.useCampaignSettings("on"===t)},this)}},{key:"populateCashbackProperties",value:function(e){Object.keys(e).forEach(function(t){if(-1!==t.search("DeviceType")||-1!==t.search("NativeAdType")){var i=t.replace(/BidAdjustment$/,"CashbackPercent"),n=e[i];e[i]=null==n?"":e[i]}})}},{key:"render",value:function(){return this.$el.html(ee[this.options.targetType]({i18n:Q,level:this.options.level,targetDescription:this.viewmodel.targetDescription,targetHeader:this.viewmodel.targetHeader,bidAdjustmentHeader:this.viewmodel.bidAdjustmentHeader,rows:this.viewmodel.rows,percentSymbol:Y.a.get("globalization.number.percentSymbol"),targetType:this.options.targetType,targetPopupId:this.viewmodel.targetPopupId,showLevelToggle:this.options.showLevelToggle})),v.a.applyBindings(this.viewmodel,this.el),this.toggleView.render(),this.$(".toggle-campaign-settings-switch").append(this.toggleView.el),this}},{key:"getValues",value:function(){return this.viewmodel.getValues()}},{key:"validate",value:function(){return this.viewmodel.validate()}},{key:"setLevel",value:function(e){this.options.level=e,this.viewmodel.setLevel(e)}},{key:"handleErrors",value:function(e){return this.viewmodel.handleErrors(e)}},{key:"remove",value:function(){var e;this.toggleView&&this.toggleView.remove();for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(m.a)(Object(o.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}}]),t}(c.a.View),ne=i("Pm8+"),ae=i.n(ne);i.d(t,"default",function(){return re});var re=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=u.a.defaults(e,{targetType:A.default.Device,campaignId:"",adgroupId:"",level:"campaign",fromSettingsGrid:!1,showLevelToggle:!0})}},{key:"render",value:function(){return this.$el.html(ae()()),this.targetsView=new ie(this.options),this.$(".update-container").html(this.targetsView.render().el),this}},{key:"toggleCashbackPercentColumns",value:function(e,t){this.targetsView.viewmodel.supportCashbackSettings(e&&!y.a.Permissions.IsPersonalizedOffersV3Enabled),this.targetsView.viewmodel.resetCashbackInheritInfoInAllRows(t),this.targetsView.viewmodel.validate()}},{key:"getCriterionFilter",value:function(){switch(this.options.targetType){case A.default.Device:case A.default.OriginalDevice:return"isof(Criterion,DeviceCriterion)";case A.default.Age:return"isof(Criterion,AgeCriterion)";case A.default.Gender:return"isof(Criterion,GenderCriterion)";default:return""}}},{key:"getCriterions",value:function(){return g.a.CampaignCriterion.findAll({query:{$filter:this.getCriterionFilter()}},{entitySet:h.default.currentAccount.Campaigns.$withKey(Number(this.options.campaignId)).CampaignCriterions,cacheResponse:!1})}},{key:"getViewOptions",value:function(e,t,i){var n={targetType:i,campaignId:this.options.campaignId,adgroupId:this.options.adgroupId,level:this.options.level};return u.a.each(t,function(t){var a=u.a.find(e,function(e){return e.Criterion["".concat(S.a.targetTypeToFilterProperty[i])]===t});n["".concat(i,"Type").concat(t,"BidId")]=a?a.Id:"",n["".concat(i,"Type").concat(t,"BidAdjustment")]=a?a.CriterionBid.Multiplier:""}),n}},{key:"getValues",value:function(){return this.targetsView?this.targetsView.getValues():[]}},{key:"setData",value:function(e){this.targetsView.viewmodel.setData(e)}},{key:"setLevel",value:function(e){this.options.level=e,this.targetsView.setLevel(e)}},{key:"handleErrors",value:function(e){return this.targetsView.handleErrors(e)}},{key:"validate",value:function(){var e=this.targetsView.validate();return!e&&this.options.activityLogger&&this.options.activityLogger.signal("".concat(this.options.targetType," bid adjustment is not valid"),"".concat(this.options.targetType," target")),e}}]),t}(c.a.View)},Sk7q:function(e,t,i){"use strict";var n={};i.r(n),i.d(n,"Location",function(){return I}),i.d(n,"Impression",function(){return O}),i.d(n,"Dismiss",function(){return j}),i.d(n,"Campaign",function(){return L});var a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("pMz2"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("k51a"),f=i("ZLaj"),v=i("wXYX"),b=i("juSC"),y=i("UyEP"),S=i("nPji"),w=i("C0ZD"),C=i("9pTc"),x=i("Y/tC"),k=i.n(x),A=i("bgLp"),T=i("ZILi"),_=i.n(T);function E(e){var t=e.i18n,i=e.criterion;return"Location"===i.Type?i.LocationCriterion.Name:t.getString("Inline_Location_Radius_Formatter",{lat:t.formatDecimalToFixed(i.RadiusCriterion.Latitude),long:t.formatDecimalToFixed(i.RadiusCriterion.Longitude)})}var I=function(e){function t(e){var i,n=e.deps,r=e.columnOverrider,l=e.isForVNext;Object(a.a)(this,t);var c=n.i18n.getString("LocationGrid_Column_Header_Recommended_Location");return(i=Object(o.a)(this,Object(s.a)(t).call(this,Object(A.a)({name:"Location",property:"Criterion",title:"LocationGrid_Column_Header_Recommended_Location",i18n:n.i18n,bodyClasses:["text-left"],helpId:"",sortable:function(e){var t=e.Criterion;return E({i18n:n.i18n,criterion:t})},helpAriaLabel:n.i18n.getString("Click to learn more about {{item}}",{item:c})},r.Location)))).i18n=n.i18n,i.isForVNext=l,i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"template",value:function(e){var t=e.value;return _()({Name:E({i18n:this.i18n,criterion:t}),isForVNext:this.isForVNext})}}]),t}(C.ProjectionGridBaseColumn),O=function(e){function t(e){var i=e.deps,n=e.columnOverrider;Object(a.a)(this,t);var r=i.i18n.getString("LocationGrid_Column_Header_Estate_Impression");return Object(o.a)(this,Object(s.a)(t).call(this,Object(A.a)({name:"Impression",type:"number",property:"EstimatedIncreaseInImpressions",format:"integer",title:"LocationGrid_Column_Header_Estate_Impression",i18n:i.i18n,helpId:"pop_BA_LocationTargeting_EstImpr",sortable:!0,helpAriaLabel:i.i18n.getString("Click to learn more about {{item}}",{item:r})},n.Impression)))}return Object(l.a)(t,e),t}(C.ProjectionGridBaseColumn),P=i("IFAf"),M=i.n(P),j=function(e){function t(e){var i,n=e.deps,r=e.columnOverrider,l=e.gridRemoveAll;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,Object(A.a)({name:"Dismiss",property:"Performance",title:l?"Location_Target_Grid_RemoveColumn":" ",i18n:n.i18n,headClasses:l?["recommendation-target-grid__removeall-header","text-right"]:[""],bodyClasses:["text-right"],colClasses:["col-selection"],html:l?"<a href='javascript:void(0)'><span>".concat(n.i18n.getString("Location_Target_Grid_RemoveColumn"),"</span></a>"):""},r.Dismiss)))).deps=n,i}return Object(l.a)(t,e),Object(r.a)(t,[{key:"template",value:function(){return M()({i18n:this.deps.i18n})}}]),t}(C.ProjectionGridBaseColumn),L=function(e){function t(e){var i=e.deps,n=e.scope;return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).call(this,{i18n:i.i18n,scope:n,routeTemplate:function(e){var t=e.cid,i=e.aid,n=e.cmpid;return"#customer/".concat(t,"/account/").concat(i,"/campaign/").concat(n,"/edit/locations")},isForVNext:i.isForVNext}))}return Object(l.a)(t,e),t}(i("5p5O").e),D=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.deps,i=e.columns,a=void 0===i?["Campaign","Location","Impression","Dismiss"]:i,r=e.columnOverrider,o=void 0===r?{}:r,s=e.hasPagination,l=void 0===s||s,c=e.hasSelection,d=void 0===c||c,u=e.dataSource,p=void 0===u?{type:"memory",primaryKey:"OpportunityId",data:[]}:u,g=e.pageSize,m=void 0===g?10:g,f=e.scope,v=void 0===f?{}:f,b=e.selectAllByDefault,y=void 0!==b&&b,S=e.tableClasses,w=void 0===S?["table","table-bordered","table-hover"]:S,x=e.isForVNext,k=e.gridRemoveAll;this.tableClasses=w,this.selectAllByDefault=y,this.deps=t,this.hasPagination=l,this.hasSelection=d,this.dataSource=p,this.pageSize=m,this.isForVNext=x,this.columns=h.a.chain(a).map(function(e){return n[e]}).compact().value(),this.columns=Object(C.mapColumnsConfig)(this.columns,{deps:t,scope:v,columnOverrider:o,isForVNext:x,gridRemoveAll:k}),this.gridRemoveAll=k}},{key:"onRemoveAllRecommendationClick",value:function(){this.trigger("removeAllRecommendation")}},{key:"onDismissClick",value:function(e){var t=this.grid.gridView.itemOfElement(e.target);return this.trigger("dismiss",t),!1}},{key:"mouseOverItem",value:function(e){var t=this.grid.gridView.itemOfElement(e.target);return this.trigger("mouseover:recommendation",t),!1}},{key:"mouseOutItem",value:function(e){var t=this.grid.gridView.itemOfElement(e.target);return this.trigger("mouseout:recommendation",t),!1}},{key:"render",value:function(){var e=this;this.$el.html(k()({hasPagination:this.hasPagination,isForVNext:this.isForVNext}));var t=p.a.factory({vnext:!0}).use(v.placeholderPlugin).use(b.uiBlockerPlugin).use(S.a11yPlugin).use(w.assistedSelectionPlugin),i=["column-header-rows"];return this.hasPagination&&(t=t.use(y.paginationPlugin).use(f.crossPageSelectAllPlugin),i.unshift(Object(f.crossPageSelectHeadRow)())),this.deps.isForVNext&&(t=t.use(m.a)),this.grid=t.create({name:"location-recommendation-grid",el:this.$(".location-grid-container"),dataSource:this.dataSource,tableClasses:this.tableClasses,rows:{headRows:i},events:this.gridRemoveAll?{"mouseover tbody":h.a.bind(this.mouseOverItem,this),"mouseout tbody":h.a.bind(this.mouseOutItem,this),"click .recommendation-target-grid__removeall-header a":h.a.bind(this.onRemoveAllRecommendationClick,this)}:{"mouseover tbody":h.a.bind(this.mouseOverItem,this),"mouseout tbody":h.a.bind(this.mouseOutItem,this)},columns:this.columns,plugins:{a11y:{i18n:this.deps.i18n},crossPageSelectAll:{i18n:this.deps.i18n},placeholder:{container:this.$(".placeholder-container"),text:this.deps.i18n.getString("LocationGrid_Content_No_Recommendation")},pagination:{el:this.$(".grid-pager.pager"),pageSize:this.pageSize,availablePageSizes:[10,20,50,100],enableRandomPage:!1},projectionGridScopeNavigator:this.deps.scope},query:{orderby:[{direction:-1,key:"EstimatedIncreaseInImpressions"}]},i18n:this.deps.i18n,sortableHeader:{name:"Impression",directionIndex:1},selection:!!this.hasSelection&&{enabled:!0,headClasses:["text-center"],bodyClasses:["text-center"]}}),this.grid.gridView.render(),this.selectAllByDefault&&this.grid.gridView.once("didReload",function(){h.a.delay(function(){return e.grid.gridView.selectAll()},10)}),this.grid.gridView.on("didSelect",function(){e.trigger("selectChanged",e.grid.gridView.selectedItems()),e.trigger("isAllSelected",!(!e.grid.crossPageSelectAll||!e.grid.crossPageSelectAll.isAllSelected))}),this.grid.gridView.on("didReload",function(){h.a.delay(function(){e.trigger("display:recommendations",e.grid.gridView.itemArray)},10)}),this.on("update:data",function(t){e.grid.dataSource.data=t,e.selectAllByDefault?e.grid.gridView.once("didReload",function(){h.a.delay(function(){return e.grid.gridView.selectAll()},10)}):e.grid.gridView.once("didReload",function(){h.a.delay(function(){e.grid.gridView.selectAll(),e.grid.gridView.deselectAll()},10)}),e.grid.gridView.refresh(!0)}),this}},{key:"events",get:function(){return{"click span.dismiss-recommendation":h.a.bind(this.onDismissClick,this)}}}]),t}(d.a.View);i.d(t,"a",function(){return D})},Svh1:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.i18n,o=a.appState;if(o.get("customer_id"),o.get("account_id"),!e.isLoading){i+='<div class="experiment-budget-alert"><div class="alert alert-info form-group page-alert"><div class="alert-image"></div><div class="alert-info-inline" style="overflow: hidden; text-overflow: ellipsis;">';var s=e.baseCampaign;s?i=i+(n.escape(null==(t=r.getString("Experiment_BudgetReadonlyAlert").split("{{name}}")[0])?"":t)+'<a class="base-campaign-settings-link" href="javascript:void(0);">')+n.escape(null==(t=s.Name)?"":t)+"</a>"+n.escape(null==(t=r.getString("Experiment_BudgetReadonlyAlert").split("{{name}}")[1])?"":t):e.campaignId&&(i=i+n.escape(null==(t=r.getString("Experiment_BudgetAlert_BaseCampaign1"))?"":t)+n.escape(null==(t=" ")?"":t)+'<a class="all-experiments-link" href="javascript:void(0);">'+n.escape(null==(t=r.getString("Experiment_BudgetAlert_BaseCampaign2"))?"":t)+"</a>"),i+="</div></div></div>"}}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},SxBh:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="radio shared-budget-switch-editor-radio"><label><input type="radio" name="sharedBudgetSwitch" value="individual" data-bind="checked: sharedBudgetSwitch">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Label_IndividualBudget"))?"":t)+'</label><div class="individual-budget-editor-wrapper" data-bind="visible: sharedBudgetSwitch() == \'individual\'"><div class="individual-budget-editor margin-bt-five"></div></div></div><div class="radio shared-budget-switch-editor-radio" data-bind="visible: !noApplyBudgetFromSharedLibrary"><label><input type="radio" name="sharedBudgetSwitch" value="shared" data-bind="checked: sharedBudgetSwitch">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Label_SharedBudget"))?"":t)+'</label><div class="shared-budget-switch-editor-grid-wrapper margin-tp-five" data-bind="visible: sharedBudgetSwitch() == \'shared\'"><div class="shared-budget-switch-editor-selected-budget" data-bind="visible: !isEditMode()"><a data-bind="attr: {href: budgetDetailLink}"><span class="margin-rt-five shared-budget-switch-editor-selected-budget-name" data-bind="text: Name"></span></a>(<span class="shared-budget-switch-editor-selected-budget-amount" data-bind="text: Amount.string"></span><span>'+n.escape(null==(t=e.get("SharedBudget_DetailPage_PerDay"))?"":t)+'</span><span class="margin-rt-five">)</span><a class="shared-budget-switch-editor-selected-budget-edit" href="javascript:void(0);">'+n.escape(null==(t=e.get("SharedBudget_DetailPage_BudgetEdit_Link"))?"":t)+'</a></div><div class="shared-budget-switch-editor-grid-innner-wrapper" data-bind="visible: isEditMode() &amp;&amp; hasSharedBudgets()"><div class="shared-budget-switch-editor-budget-warning">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Warning_SharedBudgetAmountLargeEnough"))?"":t)+'</div><div class="shared-budget-switch-editor-grid"></div><div class="grid-pager pager"></div></div><div class="shared-budget-warnings" data-bind="visible: !isCPSSelected()"><div class="shared-budget-no-budget-warning" data-bind="visible: !hasSharedBudgets()"><span class="margin-rt-five">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Warning_NoSharedBudgets"))?"":t)+'</span></div><div class="error shared-budget-no-selected-budget-warning" data-bind="visible: !hasSelectedBudget() &amp;&amp; hasSharedBudgets()" role="alert">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Warning_NoSelectedSharedBudget"))?"":t)+'</div><div class="error shared-budget-no-selected-budget-warning" data-bind="visible: !hasSelectedBudget() &amp;&amp; !hasSharedBudgets()" role="alert">'+n.escape(null==(t=e.get("SharedBudget_SwitchEditor_Warning_NoBudgetsToSelect"))?"":t)+'</div></div><div class="error shared-budget-is-not-allowed-warning" data-bind="visible: isCPSSelected(), text: sharedBudgetIsNotAllowedWarning()" role="alert"></div></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},SxtD:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("syDw"),u=i.n(d),p={on:"on",indeterminate:"indeterminate",off:"off"},g={default:"default",triState:"triState"},h={default:{on:"off",indeterminate:"on",off:"on"},triState:{on:"indeterminate",indeterminate:"off",off:"on"}},m=function(){function e(t){var i=t.mode,a=void 0===i?g.default:i,r=t.state,o=void 0===r?p.off:r,s=t.enabled,l=void 0===s||s,d=t.onchange,u=void 0===d?c.a.noop:d;Object(n.a)(this,e),this.reset({mode:a,state:o,enabled:l}),this.onchange=u}return Object(a.a)(e,[{key:"toggle",value:function(){this.enabled&&(this.state=h[this.mode][this.state],this.onchange(this.state))}},{key:"setToggleState",value:function(e){c.a.has(p,e)&&this.state!==e&&(this.state=e,this.onchange(this.state))}},{key:"reset",value:function(e){var t=e.mode,i=void 0===t?this.mode:t,n=e.state,a=void 0===n?this.state:n,r=e.enabled,o=void 0===r?this.enabled:r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.noop;this.mode=i,this.state=a,this.enabled=o,s()}}]),e}(),f=i("vdrl"),v=i.n(f);i.d(t,"a",function(){return w});var b={on:"true",indeterminate:"mixed",off:"false"},y={on:"On",indeterminate:"Indeterminate",off:"Off"};function S(){var e=this;c.a.each(p,function(t){return e.$el.removeClass("toggle-".concat(t))}),this.$el.addClass("toggle-".concat(this.viewModel.state)),this.viewModel.enabled?this.$el.removeClass("disabled"):this.$el.addClass("disabled"),this.$el.attr("aria-pressed",b[this.viewModel.state]),this.$el.attr("aria-labelledby",this.labelledbyId),this.$(".toggle-text").text(this.toggleText[this.viewModel.state])}var w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.viewModel=new m(c.a.extend({},this.options,{onchange:function(){e.trigger("change",e.viewModel.state),S.call(e)}})),this.template=this.options.template||v.a,this.toggleText=this.options.toggleText||y,this.labelledbyId=this.options.labelledbyId||""}},{key:"render",value:function(){return this.$el.addClass("toggle"),this.$el.html(this.template()),S.call(this),this}},{key:"toggle",value:function(){this.viewModel.toggle()}},{key:"setToggleState",value:function(e){this.viewModel.setToggleState(e)}},{key:"setMode",value:function(e){this.viewModel.reset({mode:e},S.bind(this))}},{key:"enable",value:function(){this.viewModel.reset({enabled:!0},S.bind(this))}},{key:"disable",value:function(){this.viewModel.reset({enabled:!1},S.bind(this))}},{key:"tagName",get:function(){return"a"}},{key:"attributes",get:function(){return{href:"javascript:;",role:"button"}}},{key:"events",get:function(){return{click:this.toggle}}}]),t}(u.a.View)},"SzE/":function(e,t,i){var n,a;n=[i("UT4o"),i("7XbR"),i("AQBV"),i("5shv"),i("6mWt"),i("UgQD")],void 0===(a=function(e,t,i,n,a,r){"use strict";var o=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared"),s=a.default||a;function l(e,i,n,a,r){this.days=t.observable(e),this.startHour=t.observable(i),this.startMinute=t.observable(n),this.endHour=t.observable(a),this.endMinute=t.observable(r),this.endHour.subscribe(function(e){24==e&&this.endMinute(0)},this),this.endMinute.subscribe(function(e){24==this.endHour()&&0!=e&&this.endHour(0)},this),this.schedulingRowErrorMessage=t.computed(function(){return u(this.startHour(),this.startMinute())>=u(this.endHour(),this.endMinute())?o.get("AdExtensions_Scheduling_Error_InvalidTimeRange")||"AdExtensions_Scheduling_Error_InvalidTimeRange":""},this)}var c=!1;function d(t){var i=e.isDate(t)?t:e.isEmpty(t)?null:new Date(t);return i&&isNaN(i.getTime())&&(i=null),i}function u(e,t){return 60*e+t}function p(t){var i=d(t);if(e.isNull(i)||e.isUndefined(i))return null;var n=i.getTimezoneOffset();return new Date(i.getTime()+6e4*n)}function g(t){if(!e.isDate(t))return null;var i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return new Date(i).toISOString()}return s.initialize().then(function(){var e=s.findByName("WebApp.CampaignUI.adExtensionScheduling")||{Data:{}};c=e&&e.Data&&e.Data.use24HourDisplay||!1}),function(a){var h=this;a||(a={});var m=e.indexBy(n.dayOptions,"val"),f=e.indexBy(n.minuteOptions,"val"),v=e.indexBy(n.minuteOptions,"stringVal");this.isExpanded=t.observable(!e.isEmpty(a)),this.timeDisplayType=t.observable(c?"24-hour":"12-hour");var b={use24HourDisplay:c};function y(i){return e.map(i,function(i){var n=e.extend({},i);return n.displayName=t.computed(function(){return"12-hour"===h.timeDisplayType()?this.twelveHourDisplay:this.twentyFourHourDisplay},n),n})}this.timeDisplayType.subscribe(function(e){b={use24HourDisplay:c="24-hour"==e},s.setAtUserLevel({Name:"WebApp.CampaignUI.adExtensionScheduling",Data:b})}),this.dayOptions=n.dayOptions,this.startHourOptions=y(n.fromHourOptions),this.endHourOptions=y(n.toHourOptions),this.minuteOptions=n.minuteOptions,this.culture=i.get("culture")||"en-US",this.format=i.get("globalization.datetime.shortDatePattern")||"M/d/yyyy",this.accountTimeZone=r.getTimeZoneText(i.get("AccountTimeZone")),this.startDate=t.observable(p(a.StartDate)),this.endDate=t.observable(p(a.EndDate)),this.useSearcherTimeZone=t.observable(a.UseSearcherTimeZone||!1),this.dayTimeRanges=t.observableArray(e.map(a.DayTimeRanges,function(e){var t=v[e.StartMinute],i=v[e.EndMinute];return new l(e.Day,e.StartHour,t.val,e.EndHour,i.val)})),this.flattenedDayTimeRanges=t.computed(function(){return function(t){var i,a=[],r=e.chain(t).flatten().map(function(t){u(t.startHour,t.startMinute);var i=e.indexOf(n.days,t.day),a=24*i*60;return e.extend({weeklyStartTime:a+u(t.startHour,t.startMinute),weeklyEndTime:a+u(t.endHour,t.endMinute)},t)}).sortBy("weeklyStartTime").value();return e.each(r,function(e){i&&e.day==i.day&&e.weeklyStartTime<=i.weeklyEndTime?e.weeklyEndTime>i.weeklyEndTime&&(i.endHour=e.endHour,i.endMinute=e.endMinute,i.weeklyEndTime=e.weeklyEndTime):(i=e,a.push(e))}),a}(e.chain(h.dayTimeRanges()).map(function(t){var i=m[t.days()],n={startHour:t.startHour(),startMinute:t.startMinute(),endHour:t.endHour(),endMinute:t.endMinute()};return e.map(i.days,function(t){return e.extend({day:t},n)})}).flatten().value())},this),this.schedulingRowsErrorMessage=t.computed(function(){for(var t=h.flattenedDayTimeRanges(),i=e.reduce(n.days,function(e,t){return e[t]=0,e},{}),a=0;a<t.length;a++)if(++i[t[a].day]>7)return o.get("AdExtensions_Scheduling_Error_CannotHaveMoreThanSevenPerDay")||"AdExtensions_Scheduling_Error_CannotHaveMoreThanSevenPerDay";return""},this),this.dateRangeErrorMessages=t.computed(function(){var t=[],i=h.startDate(),n=d(i),a=h.endDate(),r=d(a);return r&&n&&n>r&&t.push(o.get("AdExtensions_Scheduling_Error_InvalidDateRange")||"AdExtensions_Scheduling_Error_InvalidDateRange"),e.isString(i)&&i.length>0&&t.push(o.get("AdExtension_Scheduling_StartDateInvalid")||"AdExtension_Scheduling_StartDateInvalid"),e.isString(a)&&a.length>0&&t.push(o.get("AdExtension_Scheduling_EndDateInvalid")||"AdExtension_Scheduling_EndDateInvalid"),t},this),this.toObject=function(){var t=e.map(this.flattenedDayTimeRanges(),function(e){return{Day:e.day,StartHour:e.startHour,StartMinute:f[e.startMinute].stringVal,EndHour:e.endHour,EndMinute:f[e.endMinute].stringVal}}),i=d(this.startDate()),n=d(this.endDate());return i||n||t.length?{StartDate:g(i),EndDate:g(n),UseSearcherTimeZone:this.useSearcherTimeZone(),DayTimeRanges:t}:{}},this.onRemovingSchedulingRow=function(e){this.dayTimeRanges.splice(e(),1)},this.addDayTimeRange=function(){this.dayTimeRanges.push(new l(this.dayOptions[0].val,0,0,24,0))},this.validate=function(){return 0===this.dateRangeErrorMessages().length&&""===this.schedulingRowsErrorMessage()&&this.dayTimeRanges().every(function(e){return""===e.schedulingRowErrorMessage()})},this.originalModelJSON=JSON.stringify(this.toObject()),this.modelChanged=function(){return JSON.stringify(this.toObject())!==this.originalModelJSON}}}.apply(t,n))||(e.exports=a)},T0sE:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="target-or-bid-selector-content"><label'+n.attr("class",n.classes(["control-label",a?"hide":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=e.getString("Audience_Campaign_Targeting_Setting"))?"":t)+'</label><form><label class="radio-inline"><input class="bid-only-radio-check" type="radio" name="bid-only-or-target"><div>'+n.escape(null==(t=e.getString("Audience_Campaign_Bid_Only"))?"":t)+"</div></label><p>"+n.escape(null==(t=e.getString("Audience_Campaign_Bid_Only_Description"))?"":t)+'</p><label class="radio-inline"><input class="target-and-bid-radio-check" type="radio" name="bid-only-or-target"><div>'+n.escape(null==(t=e.getString("Audience_Campaign_Target_And_Bid"))?"":t)+"</div></label><p>"+n.escape(null==(t=e.getString("Audience_Campaign_Target_And_Bid_Description"))?"":t)+"</p></form></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isLabelHidden"in a?a.isLabelHidden:"undefined"!==typeof isLabelHidden?isLabelHidden:void 0),i}},T4os:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l){i+='<span class="location-map-item">',r&&(i=o?i+'<span class="alert-icon warning" role="alert"'+n.attr("title",l,!0,!0)+n.attr("aria-label",l,!0,!0)+"></span>":"Included"===a?i+'<span class="map-icon__pin--included"'+n.attr("title",e.get("Targeting_LocationAction_IncludedState"),!0,!0)+n.attr("aria-label",e.get("Targeting_LocationAction_IncludedState"),!0,!0)+"></span>":i+'<span class="map-icon__pin--excluded"'+n.attr("title",e.get("Targeting_LocationAction_ExcludedState"),!0,!0)+n.attr("aria-label",e.get("Targeting_LocationAction_ExcludedState"),!0,!0)+"></span>"),i=i+"<span>"+(null==(t=s)?"":t)+"</span></span>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"selectionStatus"in a?a.selectionStatus:"undefined"!==typeof selectionStatus?selectionStatus:void 0,"showPinIcon"in a?a.showPinIcon:"undefined"!==typeof showPinIcon?showPinIcon:void 0,"showWarningIcon"in a?a.showWarningIcon:"undefined"!==typeof showWarningIcon?showWarningIcon:void 0,"value"in a?a.value:"undefined"!==typeof value?value:void 0,"warningText"in a?a.warningText:"undefined"!==typeof warningText?warningText:void 0),i}},TDDF:function(e,t,i){"use strict";var n=i("5iHu"),a=i.n(n),r=i("UT4o"),o=i.n(r),s=function(e,t,i){var n=o.a.isFunction(t)?t:o.a.noop,r=o.a.isFunction(i)?i:o.a.noop,s=function(){return(o.a.isString(e)?a()(e):e).get(0)},l=a.a.contains(document.body,s()),c=new MutationObserver(function(){a.a.contains(document.body,s())?l||(l=!0,n()):l&&(l=!1,c.disconnect(),r())});c.observe(document.body,{childList:!0,subtree:!0})};i.d(t,"a",function(){return s})},Tq7U:function(e,t,i){"use strict";i.r(t),t.default={Age:"Age",Gender:"Gender",Demographic:"Demographic",Device:"Device",Location:"Location",MultimediaAd:"MultimediaAd",NativeAd:"NativeAd",OriginalDevice:"OriginalDevice"}},TqQS:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("jQIp"),c=i.n(l),d=i("nlAS"),u=i.n(d),p=i("fE/Z"),g=i("89Mx"),h=i("UT4o"),m=i.n(h),f=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"setEntityIds",value:function(e,t){e.entitySet=e.entitySet.Campaigns.$withKey(t.campaignId)}},{key:"generateDestroyRequest",value:function(e,t){return[{adExtensionAssociations:this.getBatchRequest(e,t)}]}},{key:"generateUpdateRequest",value:function(e,t){var i=this;return[{adExtensionAssociations:m.a.chain(t).map(function(t){return i.getBatchRequest(e,t)}).flatten(!0).value()}]}},{key:"getBatchRequest",value:function(e,t){return m.a.map(e,function(e){return{Type:"Campaign",CampaignId:t.campaignId,AdGroupId:t.adGroupId,AdExtensionId:e}})}}]),e}(),v=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"setEntityIds",value:function(e,t){e.entitySet=e.entitySet.Campaigns.$withKey(t.campaignId),e.entitySet=e.entitySet.AdGroups.$withKey(t.adGroupId)}},{key:"generateDestroyRequest",value:function(e,t){return[{adExtensionAssociations:this.getBatchRequest(e,t)}]}},{key:"generateUpdateRequest",value:function(e,t){var i=this;return[{adExtensionAssociations:m.a.chain(t).map(function(t){return i.getBatchRequest(e,t)}).flatten(!0).value()}]}},{key:"getBatchRequest",value:function(e,t){return m.a.map(e,function(e){return{Type:"AdGroup",CampaignId:t.campaignId,AdGroupId:t.adGroupId,AdExtensionId:e}})}}]),e}(),b=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"setEntityIds",value:function(){}},{key:"generateDestroyRequest",value:function(e){return[{adExtensionAssociations:this.getBatchRequest(e)}]}},{key:"generateUpdateRequest",value:function(e){return[{adExtensionAssociations:this.getBatchRequest(e)}]}},{key:"getBatchRequest",value:function(e){return m.a.map(e,function(e){return{Type:"Account",AdExtensionId:e}})}}]),e}();i.d(t,"a",function(){return y});var y=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,e)))._schema=e.schema,i.dataFormatter=e.associationsDataFormatter,i.afterChangeComitted=e.afterChangeComitted,i.requestFactory=new f,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"createRequestFactory",value:function(e){this.requestFactory="adgroup"===e?new v:"campaign"===e?new f:new b}},{key:"processBatchResponse",value:function(e,t){var i=/^adExtensionAssociations\[(\d+)]/,n=c.a.chain(t).reject(function(e){return 200===e.status||204===e.status}).pluck("data").pluck("value").flatten().value(),a={},r={};if(c.a.each(n,function(t){if(t.Property&&c.a.isString(t.Property)){var n=c.a.last(t.Property.match(i));n&&Number(n)<e.length&&(a[t.Property]=e[Number(n)])}}),r.value=a,r.failCount=c.a.uniq(c.a.values(a)).length,r.successCount=e.length-r.failCount,!c.a.isEmpty(n))throw{errors:n,type:"odata",associations:r}}},{key:"scopeParams",value:function(e){return{campaignId:c.a.get(e,"where.campaignId"),adGroupId:c.a.get(e,"where.adGroupId")}}},{key:"findAll",value:function(e){var t=this.scopeParams(e),i={entitySet:p.default.currentAccount,cacheResponse:!1};this.requestFactory.setEntityIds(i,t),i.entitySet=i.entitySet.AdExtensionAssociations,i.headers=c.a.extend(i.headers||{},{"x-ms-refreshcampaigncache":"true"}),c.a.extend(i,{bypassCache:!0}),(e=this.adaptParams(e)).where={"AdExtension.Status":{$eq:"Enum.AdExtensionStatus'Active'"}};e.query={adextensiontype:this._schema.name,startdate:"9/30/2015",enddate:"9/30/2015"},e.associationType&&(e.query.adextassociationtype=e.associationType);var n="ImageAdExtension"===this._schema.name?"($expand=Model.ImageAdExtension/Images)":"";return e.expand=["AdExtension".concat(n)],u.a.AdExtensionAssociation.findAll(e,i).then(this.dataFormatter)}},{key:"destroyAll",value:function(e){var t=this.scopeParams(e),i=c.a.get(e,"where.id.in"),n=this.requestFactory.generateDestroyRequest(i,t);return u.a.AdExtensionAssociation.destroyAll({reqs:n},{cast:"Default.Disassociate",action:"Post",cacheResponse:!1,batchURL:this.batchURL}).tap(this.afterChangeComitted).tap(c.a.partial(this.processBatchResponse,n[0].adExtensionAssociations))}},{key:"destroyAllByOdata",value:function(e){var t=this,i=[];return c.a.each(e,function(e){var n=t.scopeParams(e),a=c.a.get(e,"where.id.in"),r=t.requestFactory.generateDestroyRequest(a,n);i=i.concat(r[0].adExtensionAssociations)}),u.a.AdExtensionAssociation.create({adExtensionAssociations:i},{cast:"Default.Disassociate",action:"Post",cacheResponse:!1}).tap(this.afterChangeComitted)}},{key:"updateAll",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[this.scopeParams(t)];return this._updateAll(e,t,i)}},{key:"_updateAll",value:function(e,t,i){var n=c.a.map(i,function(e){return c.a.pick(e,"campaignId","adGroupId")}),a=c.a.get(t,"where.id.in"),r=this.requestFactory.generateUpdateRequest(a,n);return u.a.AdExtensionAssociation.updateAll(e,{reqs:r},{cast:"Default.Associate",action:"Post",cacheResponse:!1,batchURL:this.batchURL}).tap(this.afterChangeComitted).tap(c.a.partial(this.processBatchResponse,r[0].adExtensionAssociations))}}]),t}(g.a)},U65n:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("7XbR"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("AQBV"),f=i.n(m),v=i("Q5Xd"),b=i.n(v),y=i("5C8L"),S=i.n(y),w=function e(t){var i=t.campaignId,a=void 0===i?null:i,r=t.DomainName,o=void 0===r?"":r,s=t.DomainLanguage,l=void 0===s?"":s,c=t.Source,d=void 0===c?"":c,u=t.disabled,g=void 0!==u&&u,m=t.dynamicDescriptionEnabled,v=void 0===m||m,y=t.isMixedDSACampaignRecommendation,w=void 0!==y&&y;Object(n.a)(this,e);var C=f.a.get("Permissions");this.isTargetingSourceEnabled=p.a.computed(function(){return h.a.result(C,"IsDynamicSearchAdsPageFeedEnabled")},this),this.isDynamicDescriptionPhase1Enabled=p.a.computed(function(){return h.a.result(C.dynamic,"DSADynamicDescriptionPhase1")&&!w},this),this.TargetingSourceSetting=p.a.observable(),this.DomainName=p.a.observable(o),this.LanguageCode=p.a.observable(l),this.isTargetingSourceEnabled()&&this.TargetingSourceSetting({Source:d||"SystemIndex"}),this.Id=p.a.observable(a),this.disabled=p.a.observable(g),this.isDynamicDescriptionPhase1Enabled()&&(this.isDynamicDescriptionChecked=p.a.observable(v)),this.campaignProps=["DomainName","LanguageCode","Source"],S.a.properties(this,b.a.Campaign,this.campaignProps,{Source:d,DomainName:o,LanguageCode:l})},C=i("2wXG"),x=i("/xyZ"),k=i.n(x),A=i("nlAS"),T=i.n(A),_=i("fE/Z"),E=i("1EwD"),I=i.n(E),O=i("NAjQ"),P=i.n(O),M=i("BPWY"),j=i.n(M),L=i("ZhOl"),D=i.n(L),R=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/auto-targets"),N=function(){function e(t){var i=this,a=t.source,r=t.campaignId,o=t.loadSource;Object(n.a)(this,e),this.radioList=[{value:"SystemIndex",text:R.get("Campaign_TargetingSource_Bing_Index")},{value:"AdvertiserSuppliedUrls",text:R.get("Campaign_TargetingSource_Page_Feed")},{value:"All",text:R.get("Campaign_TargetingSource_Both_Index_Feed")}],this.originSelectedFeeds=p.a.observableArray([]),this.source=p.a.observable(a||this.radioList[0].value),this.selectedFeeds=p.a.observableArray([]),this.allFeeds=o,this.itemTemplate=P.a,this.showPagefeedSelector=p.a.computed(function(){return h.a.contains(["AdvertiserSuppliedUrls","All"],i.source())}),this.campaignId=p.a.observable(r),this.targetingSource=p.a.computed(function(){return{source:i.source(),selectedFeeds:i.selectedFeeds()}}),this.updateSelectedFeedsByCampaignId(this.campaignId(),!0),this.campaignId.subscribe(function(e){return i.updateSelectedFeedsByCampaignId(e)}),this.associateList=p.a.computed(function(){var e=h.a.pluck(i.originSelectedFeeds(),"Id"),t=h.a.pluck(i.selectedFeeds(),"Id");return h.a.difference(t,e)}),this.originSelectedIdList=p.a.computed(function(){return h.a.pluck(i.originSelectedFeeds(),"Id")}),this.selectedIdList=p.a.computed(function(){return h.a.pluck(i.selectedFeeds(),"Id")}),this.errors=p.a.computed(function(){var e=[];return"SystemIndex"!==i.source()&&0===h.a.size(i.selectedFeeds())&&e.push(R.get("Campaign_TargetingSource_Page_Select_At_Least_One")),e})}return Object(a.a)(e,[{key:"updateSelectedFeedsByCampaignId",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&T.a.FeedAssociation.findAll({skip:0,limit:100},{entitySet:_.default.currentAccount.Campaigns.$withKey(e).FeedAssociations,cacheResponse:!1,"x-ms-refreshcampaigncache":"true"}).then(function(e){j.a.logMessage([D.a.LOGCATEGORY.TRACE],D.a.LOGLEVEL.INFO,"GetFeedAssociation","1");var n=h.a.map(e,function(e){return{Id:e.FeedId,Name:e.FeedName}});t.selectedFeeds(n),i&&t.originSelectedFeeds(n)}).catch(function(e){return j.a.logMessage([D.a.LOGCATEGORY.ERROR],D.a.LOGLEVEL.VERBOSE,"GetFeedAssociation",e),null})}}]),e}(),V=i("kywK"),B=i.n(V),F=(i("7Mx6"),window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/auto-targets")),U=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.koModel=new N(h.a.defaults({},t,{loadSource:this.loadSource.bind(this)})),this.koModel.targetingSource.subscribe(function(t){e.logActivity("target source changed: ".concat(t.source)),e.trigger("update",t)}),this.on("set",function(t){var i=t.source,n=t.campaignId;e.koModel.source(i),e.koModel.campaignId(n)})}},{key:"logActivity",value:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,"target source")}},{key:"render",value:function(){return this.$el.html(B()({i18n:F})),p.a.applyBindings(this.koModel,this.el),this}},{key:"validate",value:function(){return 0===h.a.size(this.koModel.errors())}},{key:"loadSource",value:function(e,t){var i={where:{Name:{$contains:e.filterText},FeedCategoryFilter:{$eq:"Enum.FeedCategory'PageFeed'"},Status:{$eq:"Enum.FeedStatus'Active'"}},offset:e.skip,limit:e.take};T.a.Feed.findAll(i,{entitySet:_.default.currentAccount.Feeds,cacheResponse:!1,"x-ms-refreshcampaigncache":"true",filterOptions:{odata:{custom:{FeedCategoryFilter:function(){return"FeedCategories/any(c:c eq Enum.FeedCategory'PageFeed')"}}}}}).then(function(e){return t(null,{items:h.a.map(e,function(e){return{Id:e.Id,Name:e.Name}}),total:e.totalCount})}).finally(I()(this.$el))}},{key:"save",value:function(e){var t=this,i=String(e);if("SystemIndex"===this.koModel.source())return k.a.resolve();var n=h.a.difference(this.koModel.originSelectedIdList(),this.koModel.selectedIdList()),a=h.a.difference(this.koModel.selectedIdList(),this.koModel.originSelectedIdList()),r=h.a.map(a,function(e){return{"@odata.type":"#Model.FeedAssociation",FeedId:e,EntityId:i,AssociationType:"Campaign",Status:"Active"}});return r=r.concat(h.a.map(n,function(e){return{"@odata.type":"#Model.FeedAssociation",FeedId:e,EntityId:i,AssociationType:"Campaign",Status:"Deleted"}})),0===h.a.size(r)?k.a.resolve():T.a.FeedAssociation.create({Associations:r},{cacheResponse:!1,"x-ms-refreshcampaigncache":"true",cast:"Default.Associate"}).then(function(e){return j.a.logMessage([D.a.LOGCATEGORY.TRACE],D.a.LOGLEVEL.INFO,"CreateFeedAssociation","1"),t.logActivity("feed association created"),e}).then(function(){return t.koModel.updateSelectedFeedsByCampaignId(e,!0)}).catch(function(e){return j.a.logMessage([D.a.LOGCATEGORY.ERROR],D.a.LOGLEVEL.VERBOSE,"CreateFeedAssociation",e),null})}}]),t}(d.a.View),G=i("Qt1U"),z=i.n(G);i.d(t,"default",function(){return W});var H=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/campaign-creation-advanced"),W=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.campaignId,n=void 0===i?null:i,a=t.DomainName,r=void 0===a?"":a,o=t.DomainLanguage,s=void 0===o?"English":o,l=t.Source,c=void 0===l?"SystemIndex":l,d=t.logActivity,u=void 0===d?h.a.noop:d,p=t.popupIds,g=void 0===p?{CampaignName:"pop_BA_CampaignCreate_Settings_CampaignName",Language:"pop_BA_CampaignCreate_Settings_AdLanguage",MultiLanguage:"pop_BA_CampaignCreate_Settings_LanguageTargeting",TargetingSource:"pop_BA_DSA_TargetingSource"}:p,m=t.disabled,f=void 0!==m&&m,v=t.dynamicDescriptionEnabled,b=void 0===v||v,y=t.isMixedDSACampaignRecommendation,S=void 0!==y&&y;this.popupIds=g,this.viewModel=new w({campaignId:n,DomainName:r,DomainLanguage:s,Source:c,disabled:f,dynamicDescriptionEnabled:b,isMixedDSACampaignRecommendation:S}),this.logActivity=u,this.campaignId=n,this.viewModel.DomainName.subscribe(function(){e.trigger("change")}),this.viewModel.LanguageCode.subscribe(function(){e.trigger("change")}),this.viewModel.TargetingSourceSetting.subscribe(function(){e.trigger("change")}),this.viewModel.isDynamicDescriptionPhase1Enabled()&&this.viewModel.isDynamicDescriptionChecked.subscribe(function(){e.trigger("change")})}},{key:"onDomainNameChange",value:function(){this.trigger("change.domainName",this.viewModel.DomainName())}},{key:"onLanguageChange",value:function(){this.trigger("change.language",this.viewModel.LanguageCode())}},{key:"handleApiErrors",value:function(e){this.viewModel.errors.add(e)}},{key:"setValues",value:function(e){var t=e.DomainName,i=e.DomainLanguage,n=e.Source,a=e.campaignId,r=e.targetingSourceCampaignId,o=e.disabled,s=e.dynamicDescriptionEnabled;null!=a&&this.viewModel.Id(a),null!=o&&(this.viewModel.disabled(o),this.webSiteLanguage&&this.webSiteLanguage.koModel.disabled(o)),null!=t&&this.viewModel.DomainName(t),null!=i&&(this.viewModel.LanguageCode(i),this.webSiteLanguage&&this.webSiteLanguage.trigger("language:set",this.viewModel.LanguageCode())),null!=n&&(this.viewModel.TargetingSourceSetting({Source:n}),this.targetingSource&&this.targetingSource.trigger("set",{source:n,campaignId:r}),this.viewModel.isDynamicDescriptionPhase1Enabled()&&this.viewModel.isDynamicDescriptionChecked(s))}},{key:"initWebSiteLanguage",value:function(){var e=this,t=h.a.result(f.a.get("permissions"),"IsDynamicSearchAdsV1EnabledInFRAndDE"),i=h.a.result(f.a.get("permissions"),"IsEnabledForDSAInCHandNLandITandESandSE"),n=h.a.result(f.a.get("permissions"),"IsDSAEnabledInPLandPTandTRandGR"),a=h.a.result(f.a.get("permissions"),"IsDSAEnabledInDKandFIandNO"),r=h.a.result(f.a.get("permissions"),"dynamic",{}).DSAEUPhase2;if(t||i||n||a||r){var o=["English"];t&&(o=o.concat(["French","German"])),i&&(o=o.concat(["Spanish","Italian","Dutch","Swedish"])),n&&(o=o.concat(["Polish","Portuguese","Czech","Romanian","Hungarian","Greek","Slovak","Bulgarian","Croatian","Lithuanian","Slovenian","Estonian","Latvian","Maltese"])),a&&(o=o.concat(["Danish","Finnish","Norwegian"])),r&&(o=o.concat(["Turkish","Serbian","Bosnian","Albanian","Macedonian","Icelandic"])),this.webSiteLanguage=new C.default({i18nStrings:{Description:"",SaveWarning:""},language:this.viewModel.LanguageCode(),languages:o,IsAdsGlobalizationPhase1Enabled:h.a.result(f.a.get("permissions"),"IsAdsGlobalizationPhase1Enabled"),IsAdsGlobalizationPhase2Enabled:h.a.result(f.a.get("permissions"),"IsAdsGlobalizationPhase2Enabled")}),this.webSiteLanguage.on("language:changed",function(t){e.viewModel.LanguageCode(t),e.logActivity("website language changed"),e.onLanguageChange()},this)}}},{key:"initTargetSource",value:function(){var e=this;this.targetingSource&&(this.targetingSource.remove(),this.targetingSource=null),this.viewModel.isTargetingSourceEnabled()&&(this.targetingSource=new U({source:this.viewModel.TargetingSourceSetting().Source,campaignId:this.campaignId,activityLogger:this.options.activityLogger}),this.targetingSource.on("update",function(t){e.viewModel.TargetingSourceSetting({Source:t.source})},this))}},{key:"validate",value:function(){var e=!this.targetingSource||this.targetingSource.validate();return this.viewModel.validate()&&e}},{key:"render",value:function(){this.$el.html(z()({i18n:H,popupIds:this.popupIds})),p.a.applyBindings(this.viewModel,this.el),this.initWebSiteLanguage(),this.initTargetSource();var e=h.a.result(f.a.get("permissions"),"IsDynamicSearchAdsV1EnabledInFRAndDE"),t=h.a.result(f.a.get("permissions"),"IsEnabledForDSAInCHandNLandITandESandSE"),i=h.a.result(f.a.get("permissions"),"IsDSAEnabledInPLandPTandTRandGR"),n=h.a.result(f.a.get("permissions"),"IsDSAEnabledInDKandFIandNO"),a=e||t||i||n;if(null!=this.campaignId&&this.options.isCampaignSettingsScenario&&this.options.DomainName){var r=H.getString("Language_".concat(this.viewModel.LanguageCode()))||this.viewModel.LanguageCode();this.$(".website-language-setting").empty().append(r)}else a&&this.$(".website-language-setting").empty().append(this.webSiteLanguage.render().el);return this.viewModel.isTargetingSourceEnabled()&&this.$(".dsa-targeting-source").empty().append(this.targetingSource.render().el),this}},{key:"getValues",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return h.a.extend({},this.viewModel.toObject(),this.viewModel.isTargetingSourceEnabled()?{Source:this.viewModel.TargetingSourceSetting().Source}:{},this.viewModel.isDynamicDescriptionPhase1Enabled()?{DynamicDescriptionEnabled:this.viewModel.isDynamicDescriptionChecked()}:{});var e={},t=this.viewModel.DomainName().trim().toLowerCase();return t=(t=t.replace(new RegExp("^http(s)?://"),"")).replace(new RegExp("^w{3}."),""),this.viewModel.DomainName(t),e.DomainName=this.viewModel.DomainName(),e.Language=this.viewModel.LanguageCode(),e.DomainLanguage=this.viewModel.LanguageCode(),this.viewModel.isTargetingSourceEnabled()&&(e.TargetingSource=this.viewModel.TargetingSourceSetting().Source,e.Source=this.viewModel.TargetingSourceSetting().Source),this.viewModel.isDynamicDescriptionPhase1Enabled()&&(e.DynamicDescriptionEnabled=this.viewModel.isDynamicDescriptionChecked()),e}},{key:"remove",value:function(){this.webSiteLanguage&&this.webSiteLanguage.remove(),this.targetingSource&&this.targetingSource.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"events",get:function(){return{"blur .dsa-domainname-input":"onDomainNameChange"}}}]),t}(d.a.View)},UDFB:function(e,t,i){var n,a;n=[i("Glrc"),i("muKe"),i("Wcm+")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=496)}({1:function(t,i){t.exports=e},4:function(e,i){e.exports=t},496:function(e,t,i){e.exports=i(497)},497:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(498);Object.defineProperty(t,"TimePicker",{enumerable:!0,get:function(){return n.TimePicker}})},498:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimePicker=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(4);i(499);var r,o=i(500),s=(r=o)&&r.__esModule?r:{default:r};t.TimePicker=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.DeterministicView),n(t,[{key:"renderTrunk",value:function(){var e=this;(function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderTrunk",this).call(this);var i=this.$(".time-picker-component"),n=this.getState().time;i.kendoTimePicker({value:n,change:function(t){var i=t.sender.value();i?(e.setState({time:i}),e.trigger("timeChanged",{time:i})):t.sender.value(e.getState().time)}}),this.$(".k-timepicker .k-select").hide(),this.timePicker=i.data("kendoTimePicker")}},{key:"events",get:function(){var e=this;return{"click .time-picker-component":function(){return e.timePicker.open()}}}},{key:"template",get:function(){return s.default}}]),t}()},499:function(e,t){e.exports=i},500:function(e,t,i){"use strict";i(1);e.exports=function(e){var t="";return t+='<input class="time-picker-component">'}}})}.apply(t,n))||(e.exports=a)},UOZx:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("7XbR"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("/xyZ"),m=i.n(h),f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.scenario,a=t.activityLogger;Object(n.a)(this,e),this.selectedCampaigns=u.a.observable(),this.selectedAdgroups=u.a.observable(),this.copySetting=u.a.observable(!1),this.hide=u.a.observable(!1),this.copySetting.subscribe(function(e){a&&a.signal("copy campaign settings value change: ".concat(e),i)})},v=i("X1RG"),b=i.n(v),y=i("nlAS"),S=i.n(y),w=i("fE/Z"),C=i("DXRr"),x=i("b172"),k=i("1EwD"),A=i.n(k),T=i("1suL"),_=i("Q5Xd"),E=i("+Bp1");i.d(t,"default",function(){return O});var I=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),O=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.scenario,n=void 0===i?"copy-campaign-setttings":i,a=t.activityLogger;this.viewModel=new f({scenario:n,activityLogger:a}),this.scenario=n,this.activityLogger=a,this.campaignSelectorProxy=new T.a({onEventTrigger:function(t,i){e.onCampaignSelectorEventTrigger(t,i)}}),this.campaignSelector=this.campaignSelectorProxy.getCampaignSelectorView()}},{key:"onCampaignSelectorEventTrigger",value:function(e,t){g.a.isEqual(e,"selected-campaign")&&g.a.has(t,"Id")&&this.loadCampaignAndTargets(t.Id)}},{key:"render",value:function(){return this.$el.empty().append(b()({i18n:I})),this.$(".copy-settings").empty().append(this.campaignSelector.render().$el),u.a.applyBindings(this.viewModel,this.el),this}},{key:"loadCampaignAndTargets",value:function(e){var t=this,i={queryParameters:{entitySet:w.default.currentAccount.Campaigns,expand:["Budget"]},bypassCache:!0},n=new E.default({schema:_.DisclaimerAdExtension,skipExtensionCache:!0});m.a.join(S.a.Campaign.find(e,i),x.load(e,"",["LocationCriterion","RadiusCriterion","LocationIntentCriterion"]),n.association.findAll({where:{campaignId:e}})).then(function(e){t.trigger("copy.campaign",e),t.activityLogger&&t.activityLogger.signal("select campaign to copy campaign settings",t.scenario)}).catch(function(e){var i=e.errors;t.trigger("copy.errors",Object(C.getODataErrors)(i)),t.activityLogger&&g.a.each(i,function(e){e&&e.Code&&t.activityLogger.signal("copy campaign settings error ".concat(e.Code),t.scenario)})}).finally(A()())}},{key:"hide",value:function(){this.viewModel.hide(!0)}}]),t}(c.a.View)},UShG:function(e,t,i){var n,a;n=[i("ERkP"),i("aWzz"),i("O94r"),i("faId")],void 0===(a=function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=67)}({3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},5:function(e,t){e.exports=i},67:function(e,t,i){e.exports=i(68)},68:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Progress",{enumerable:!0,get:function(){return n.Progress}}),Object.defineProperty(t,"RadialProgress",{enumerable:!0,get:function(){return a.RadialProgress}});var n=i(69),a=i(70)},69:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Progress=void 0;var n=r(i(3)),a=r(i(4));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.progressPercentage,i={width:"".concat(100*t,"%")};return n.default.createElement("div",{className:"progress"},n.default.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",style:i}))};t.Progress=o,o.propTypes={progressPercentage:a.default.number},o.defaultProps={progressPercentage:.2}},7:function(e,t){e.exports=n},70:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadialProgress=t.RadialProgressUnthemed=void 0;var n=l(i(3)),a=l(i(4)),r=l(i(5)),o=i(7),s=i(71);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.progressPercentage,i=e.size,a=e.stroke,o=e.strokeWidth,s=e.classes,l=e.className,c=i/2-o/2,d=2*Math.PI*c,u="".concat(i,"px");return n.default.createElement("div",{className:(0,r.default)("radial-progress",s.container,l),style:{width:u,height:u}},n.default.createElement("svg",{className:s.svg,width:i,height:i,viewBox:"0 0 ".concat(i," ").concat(i)},n.default.createElement("circle",{className:s.circle,cx:"".concat(i/2),cy:"".concat(i/2),r:"".concat(c),style:{strokeWidth:o}}),n.default.createElement("circle",{className:(0,r.default)(s.circle,s.primary),cx:"".concat(i/2),cy:"".concat(i/2),r:"".concat(c),style:{stroke:a,strokeWidth:o,strokeDasharray:"".concat(t*d," ").concat(d)}})),n.default.createElement("div",{className:(0,r.default)("radial-progress-text",s.text),style:{width:u,height:u,lineHeight:u}},"".concat(parseInt(100*t,10),"%")))};t.RadialProgressUnthemed=c,c.propTypes={progressPercentage:a.default.number.isRequired,size:a.default.number,strokeWidth:a.default.number,stroke:a.default.string,className:a.default.string,classes:a.default.shape({}).isRequired},c.defaultProps={size:128,stroke:"#107C10",strokeWidth:14,className:null};var d=(0,o.withDefaultStyles)(c,s.getStyles);t.RadialProgress=d},71:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStyles=void 0;t.getStyles=function(e,t){var i=t.palette,n=void 0===i?{}:i;return{container:{position:"relative"},svg:{position:"absolute",left:0,top:0,transform:"rotate(270deg)"},circle:{fill:"transparent",strokeDashoffset:"0",strokeLinecap:"round",stroke:n.neutralLight},primary:{stroke:n.green},text:{position:"absolute",left:0,top:0,textAlign:"center"}}}}})}.apply(t,n))||(e.exports=a)},UzAQ:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"on",value:function(){}},{key:"trigger",value:function(){}},{key:"off",value:function(){}}]),e}();i.d(t,"a",function(){return r})},Uzgs:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a,r){r?t=t+'<span><div class="statuschangetask statusicondisplay statuschangehover clickable"'+n.attr("data-statusText",r,!0,!0)+n.attr("aria-label",a.getString(e),!0,!0)+' tabindex="0"><div'+n.attr("class",n.classes(["status-icon",i],[!1,!0]),!1,!0)+"></div></div></span>":t+=n.escape(" ")}.call(this,"ariaLabel"in i?i.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"classes"in i?i.classes:"undefined"!==typeof classes?classes:void 0,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"statusText"in i?i.statusText:"undefined"!==typeof statusText?statusText:void 0),t}},V34t:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("7XbR"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("/xyZ"),f=i.n(m),v=i("YK3D"),b=i.n(v),y=i("AQBV"),S=i.n(y),w=i("yN9e"),C=i.n(w),x=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).configSchema(),e.hasStore=Object(u.observable)(!1),e.dataLoaded=Object(u.observable)(!1),e.isStoreValid=Object(u.observable)(!1),e}return Object(l.a)(t,e),t}(i("YMJb").a),k=i("4I68"),A=i("EwHi"),T=i.n(A),_=i("z8dk"),E=i.n(_),I=i("DXRr"),O=i("nlAS"),P=i.n(O),M=i("1EwD"),j=i.n(M),L=i("3rRK"),D=i.n(L),R=i("1gQY"),N=i.n(R),V=i("eiR/"),B=i("NkAx"),F=i.n(B),U=i("0cl2"),G=i("UgQD"),z=i("h5F/"),H=i("0e0T"),W=i("OvMV"),q=i("kLlV"),$=i("+PqR");i.d(t,"a",function(){return ee});var K=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),J=new D.a(K.get("Browser_Reload_AlertMessage")),Z=b.a&&b.a.Permissions&&b.a.Permissions.IsCPGForBSCEnabled,Y=b.a&&b.a.Permissions&&b.a.Permissions.IsSPAv2Enabled,Q=b.a&&b.a.Permissions&&b.a.Permissions.IsEnabledForDynamicFeedCampaign,X=b.a&&b.a.Permissions&&b.a.Permissions.IsBSCSmartImportEnabled,ee=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.campaign,n=void 0===i?{}:i,a=t.deps,r=void 0===a?{}:a,o=t.feed,s=void 0===o?null:o;this.campaign=n,this.setting=h.a.first(n.CampaignSettings)||{},this.editMode=h.a.isFinite(n.Id),this.scenario=this.editMode?"campaign-settings":"shopping-creation-workflow",this.defaultAdGroupCreated=this.editMode,this.campaignType=h.a.result(n,"CampaignType","Shopping"),this.campaignSubType=h.a.result(n,"CampaignSubType"),this.isSponsoredCampaign=Y&&"SponsoredShoppingCampaign"===S.a.get("CampaignObjective")||"ShoppingSponsoredProductAd"===this.campaignSubType,this.isNewUI=h.a.result(r,"isNewUI",!1),this.feedData=s,this.isAudienceDynamicFeedBasedCampaign="Audience"===this.campaignType&&"AudienceDynamicFeedBased"===this.campaignSubType,this.shouldShowPlaceholderStoreIfExists=X&&this.editMode;var l=h.a.result(r,"router",{});if(this.navigateToRoute=l.navigateToRoute||h.a.noop,this.deps=r,this.viewModel=new x,this.viewModel.isNextButtonEnabled=p.a.computed(function(){return e.viewModel.isStoreValid()&&!b.a.Permissions.IsReadOnlyUser&&!b.a.CurrentAccountInActive}),this.editMode){var c=W.default.shoppingCampaignEdit.create();this.activity=c.shoppingCampaignEdit.create()}else{var d=W.default.shoppingCampaignCreation.create();this.activity=d.shoppingCampaignCreation.create(),this.durationActivity=d.duration.create()}this.activity.start()}},{key:"initModalManager",value:function(){J.on(),window.App&&window.App.router_new.on("route",function(){J.active&&J.off()})}},{key:"redirect2BMC",value:function(){this.editMode||(this.activity.signal("store creation link click",this.scenario),this.durationActivity.stopSignal("creationEnd")),this.navigateToRoute("bing_merchant_center")}},{key:"redirect2Brands",value:function(){this.navigateToRoute("brands")}},{key:"isNotAudienceCampaign",value:function(){return"Audience"!==this.campaignType}},{key:"renderCampaignTargets",value:function(e){var t=this;if(!this.isNotAudienceCampaign())return f.a.resolve();var i=new z.AudienceTargetInfo({resourceName:"CampaignCriterion",listenToLocationCriterion:!1,useLocationControl:!1,initAudienceAssociationView:!1}),n="campaign-settings"===this.scenario?i.fetchCriterions(e.Id):f.a.resolve();n.then(function(){return t.campaignTargetsView=new z.AudienceAdvancedTargetSettings({viewContext:{accountCurrencyCode:b.a.AccountCurrencyCode,currentCampaign:e,level:"campaign"},scenario:t.scenario,currentLevelTargetInfo:i,supportCashbackSettings:Object(H.shouldSupportCashbackSettings)(e)}),t.$(".campaign-targets").append(t.campaignTargetsView.render().el),f.a.resolve(h.a.result(t.campaignSettings,"locationTargetsPromise"))}).then(function(){return h.a.has(t.campaignSettings,"locationTargetsView")?(t.campaignTargetsView.$(".location-setting-controller").append(t.campaignSettings.locationTargetsView.render().el),t.campaignSettings.locationTargetsView.initialLoadTask):null});var a=h.a.result(this.campaignSettings.budget,"initialLoadTask");return f.a.all([n,a])}},{key:"render",value:function(){var e=this;return this.$el.html(E()({i18n:K,editMode:this.editMode||!1,isNotAudienceCampaign:this.isNotAudienceCampaign(),isNewUI:this.isNewUI,isSponsoredCampaign:this.isSponsoredCampaign})),p.a.applyBindings(this.viewModel,this.el),f.a.resolve(this.getProductData(this.campaign.Id,this.setting)).then(function(t){e.viewModel.dataLoaded(!0);var i=!h.a.isEmpty(t)&&!h.a.isEmpty(t.ProductCollectionAccounts)||Q&&e.isAudienceDynamicFeedBasedCampaign;i&&Y?e.isSponsoredCampaign?e.viewModel.hasStore(e.editMode||h.a.findIndex(t.ProductCollectionAccounts,function(e){return e.IsGlobalStore||e.IsCoOpStore})>=0):e.viewModel.hasStore(e.editMode||h.a.findIndex(t.ProductCollectionAccounts,function(e){return!e.IsGlobalStore&&!e.IsCoOpStore})>=0):e.viewModel.hasStore(i);var n=!Z||!e.editMode||e.checkIfStoreValid(t);return Q&&e.isAudienceDynamicFeedBasedCampaign&&e.editMode&&(n=!0),e.viewModel.isStoreValid(n),e.viewModel.hasStore()?e.renderSubViews(t):(e.editMode||e.activity.signal("have no store",e.scenario),null)}).finally(j()()),this.editMode||(this.durationActivity.startSignal(),this.activity.signal("shopping campaign creation view rendered",this.scenario)),this}},{key:"checkIfStoreValid",value:function(e){var t=h.a.result(this.setting,"ProviderId");return h.a.some(e.ProductCollectionAccounts,function(e){return Number(e.Value)===t})}},{key:"onEnablePersonalizedOffersCheckboxChange",value:function(e){this.campaignTargetsView&&this.campaignTargetsView.toggleCashbackPercentColumns(e),this.campaignSettings.locationTargetsView&&this.campaignSettings.locationTargetsView.toggleCashbackPercentColumns(e),this.advancedSettingsView.adScheduleView&&this.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(e),this.advancedSettingsView.deviceTargetsUpdateView&&this.advancedSettingsView.deviceTargetsUpdateView.toggleCashbackPercentColumns(e)}},{key:"onCashbackPercentChange",value:function(e){if(this.campaignSettings.cashbackSettingsView.viewModel.validateCashbackPercent(e)){var t={level:"Campaign",value:""===e||null==e?null:$.fromLocalToFloat(e)};this.campaignTargetsView&&this.campaignTargetsView.toggleCashbackPercentColumns(!0,t),this.campaignSettings.locationTargetsView&&this.campaignSettings.locationTargetsView.toggleCashbackPercentColumns(!0,t),this.advancedSettingsView.adScheduleView&&this.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(!0,t),this.advancedSettingsView.deviceTargetsUpdateView&&this.advancedSettingsView.deviceTargetsUpdateView.toggleCashbackPercentColumns(!0,t)}}},{key:"renderSubViews",value:function(e){var t=this;this.campaignProductScopeId=e.CampaignCriterionsData&&e.CampaignCriterionsData.Id;var i=this.campaignSubType;this.isSponsoredCampaign&&(i="ShoppingSponsoredProductAd"),this.campaignSettings=new T.a(h.a.extend(this.campaign,{scenario:this.scenario,showLanguage:!1,showInitialUiBlocker:!this.isNotAudienceCampaign(),hideBidStrategy:this.isSponsoredCampaign,activityLogger:this.editMode?void 0:this.activity,deps:this.deps,campaignType:"shopping",isNotAudienceCampaign:this.isNotAudienceCampaign(),campaignSubType:i,isForVNext:this.isNewUI},this.editMode?{popupIds:{Location:"pop_BA_Settings_LocationTargeting"}}:{})).render(),this.$(".campaign-settings").append(this.campaignSettings.$el),this.campaignSettings.on("copy.campaign",this.copyFromCampaign.bind(this)),this.shoppingSettings=new k.a({data:e,feedData:this.feedData,model:this.setting,campaignType:this.campaignType,campaignSubType:this.campaignSubType,campaignId:h.a.result(this.campaign,"Id"),isStoreValid:this.viewModel.isStoreValid(),activityLogger:this.editMode?void 0:this.activity,isSponsoredSettings:{isSponsoredCampaign:this.isSponsoredCampaign,isSponsoredPilotEnabled:Y},bidStrategyUpdater:this.campaignSettings.updateBidStrategy.bind(this.campaignSettings),shouldShowPlaceholderStoreIfExists:this.shouldShowPlaceholderStoreIfExists,deps:this.deps}).render(),this.$(".shopping-settings").append(this.shoppingSettings.$el),this.shoppingSettings.on("storeChanged",function(e){t.onStoreChanged(e)}),b.a.Permissions.IsCostPerSaleEnabled&&this.campaignSettings.biddingStrategyView&&(this.shoppingSettings.viewModel.isCPSSelected(this.campaignSettings.biddingStrategyView.viewModel.selectedBidStrategy()===C.a.costPerSale),this.campaignSettings.biddingStrategyView.viewModel.selectedBidStrategy.subscribe(function(e){t.shoppingSettings.viewModel.isCPSSelected(e===C.a.costPerSale)})),this.advancedSettingsView=new U.default({campaignId:h.a.result(this.campaign,"Id"),level:"campaign",scenario:this.scenario,TimeZone:G.getAccountTimeZone(),model:this.campaign,nativeAdsCampaignBid:h.a.result(this.campaign,"NativeBidAdjustment")||0,campaignType:"shopping",campaignSubType:this.isSponsoredCampaign?"ShoppingSponsoredProductAd":null,collapseAdvancedSettings:this.isSponsoredCampaign,isNewUI:this.isNewUI,activityLogger:this.editMode?void 0:this.activity,supportCashbackSettings:Object(H.shouldSupportCashbackSettings)(this.campaign)}),this.$(".advanced-settings-section").html(this.advancedSettingsView.render().el),this.initModalManager();var n=e.ProductCollectionAccounts[0];return this.onStoreChanged(n),this.campaignSettings.cashbackSettingsView&&(this.campaignSettings.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked.subscribe(function(e){t.onEnablePersonalizedOffersCheckboxChange(e)}),this.campaignSettings.cashbackSettingsView.viewModel.CashbackPercent.subscribe(function(e){t.onCashbackPercentChange(e)})),this.renderCampaignTargets(this.campaign)}},{key:"onStoreChanged",value:function(e){this.campaignSettings.cashbackSettingsView&&(e.IsCoOpStore?(this.campaignSettings.cashbackSettingsView.viewModel.isEnablePersonalizedOffersDisabled(!0),this.campaignSettings.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked(!1)):this.campaignSettings.cashbackSettingsView.viewModel.isEnablePersonalizedOffersDisabled(!1))}},{key:"copyFromCampaign",value:function(e){var t=this;"Shopping"===h.a.result(e,"CampaignType")&&this.getProductData(h.a.result(e,"Id"),h.a.first(e.CampaignSettings)).then(function(i){t.shoppingSettings.refreshData(e,i)}).finally(j()())}},{key:"getProductData",value:function(e,t){var i=this,n=Object(V.queryify)("/Campaign/NewCampaign/GetProductScope",{aid:N.a.get("account_id"),cid:N.a.get("customer_id"),uid:N.a.get("user_id")}),a=this.shouldShowPlaceholderStoreIfExists,r=!this.shouldShowPlaceholderStoreIfExists;if(e){var o={campaignId:e,salesCountry:h.a.result(t,"SalesCountry")};n=Object(V.queryify)(n,o),this.shouldShowPlaceholderStoreIfExists&&(n="".concat(n,"&storeTypes=placeholder")),a=!0,r=!1}var s={url:n,adapter:"legacy",bypassCache:a,cacheResponse:r};return P.a.Product.find("MetaData",s).catch(function(){i.viewModel.errors.add()})}},{key:"validate",value:function(){return h.a.reduce([this.campaignSettings.validate(),this.shoppingSettings.validate(),this.advancedSettingsView.validate(),!this.campaignTargetsView||this.campaignTargetsView.validate()],function(e,t){return e&&t},!0)}},{key:"getAdGroup",value:function(){var e={CampaignName:this.campaignName,Name:"Ad group #1",Medium:"Search",PricingModel:"CPC",Status:"Active",SearchBid:this.shoppingSettings.getSearchBid()};return this.campaign.Id&&(e.Campaign={Id:this.campaign.Id}),e}},{key:"getProductPartition",value:function(){return{BidAmount:this.shoppingSettings.getSearchBid(),ProductCondition:"All",ProductValue:"",CampaignName:this.campaignName,AdGroupName:"Ad group #1",IsExcluded:!1,IsLeaf:"Unit",Status:"Active"}}},{key:"getAd",value:function(){return{CampaignName:this.campaignName,AdGroupName:"Ad group #1",PromotionalText:""}}},{key:"getAdvancedSettingsValue",value:function(e){var t=this.advancedSettingsView.getValues(),i=t.deviceTargets.concat(t.ageTargets).concat(t.genderTargets).concat(t.scheduling);return h.a.each(i,function(t){t.Status=h.a.isEmpty(t)?"Active":t.Status,e.Id?t.Campaign={Id:e.Id}:t.CampaignName=e.Name}),e.CampaignCriterions=e.CampaignCriterions.concat(i),h.a.extend(e,t.nativeAds,t.urlOptions),h.a.has(e,"AdGroups")&&h.a.size(e.AdGroups)>0&&h.a.extend(e.AdGroups[0],t.netWorkOptions),this.advancedSettingsView.adScheduleView&&(e.AdScheduleUseSearcherTimeZone=h.a.result(this.advancedSettingsView.adScheduleView,"getAdScheduleUseSearcherTimeZone")),e}},{key:"getLocationTargets",value:function(e){var t=this.campaignSettings.locationTargetsView.getValues({},{populateParentField:!0,removeNegativeId:!0,campaignId:e.Id,campaignName:e.Name});return t.deletedLocations.concat(t.locations).concat(t.intent)}},{key:"getCriterions",value:function(e){if(e.CampaignCriterions=[],e=this.getAdvancedSettingsValue(e),e=this.shoppingSettings.getCriterions(e),this.isNotAudienceCampaign()){var t=this.campaignTargetsView&&this.campaignTargetsView.getData(),i=h.a.result(t,"CampaignCriterions",[]);"shopping-creation-workflow"===this.scenario&&(i=h.a.map(i,function(t){return e.Id?h.a.defaults({Campaign:{Id:e.Id}},t):h.a.defaults({CampaignName:e.Name},h.a.omit(t,"Campaign"))})),e.CampaignCriterions=e.CampaignCriterions.concat(i)}var n=this.getLocationTargets(e);return e.CampaignCriterions=e.CampaignCriterions.concat(n),e}},{key:"getValues",value:function(){var e=this.campaignSettings.ko_model.toObject();if(this.campaignName=e.Name,h.a.extend(e,this.shoppingSettings.viewModel.toObject(),{CampaignType:this.campaignType,Budget:this.campaignSettings.budget.getValues(e)}),this.campaignSettings.cashbackSettingsView&&h.a.extend(e,this.campaignSettings.cashbackSettingsView.getValues()),this.shoppingSettings.isEnabledDynamicFeedCampaign&&this.shoppingSettings.isDynamicDataFeedBasedCampaign&&this.editMode){var t=e.ProviderId;e.FeedId=t,delete e.ProviderId}return this.campaignSettings.biddingStrategyView&&h.a.extend(e,{BiddingScheme:this.campaignSettings.biddingStrategyView.getValues()}),this.shoppingSettings.hasFilteredProducts()&&(e.CampaignProductScope=h.a.defaults(this.shoppingSettings.getProductScope(),{CampaignName:e.Name}),this.campaignProductScopeId&&(e.CampaignProductScope.Id=this.campaignProductScopeId)),this.campaign.Id&&(e.Id=this.campaign.Id),this.defaultAdGroupCreated||this.shoppingSettings.isCoOpStoreSelected()&&!this.isSponsoredCampaign||(e.AdGroups=[this.getAdGroup()],e.ProductAds=[this.getAd()],e.ProductPartitions=[this.getProductPartition()],e.BiddingScheme&&e.BiddingScheme.Type===C.a.costPerSale&&(e.AdGroups[0].SearchBid=void 0,e.ProductPartitions[0].BidAmount=void 0)),this.getCriterions(e)}},{key:"cancel",value:function(){this.editMode?this.navigateToCampaignSummaryPage(this.campaign.Id):(this.activity.signal("cancel clicked",this.scenario),this.durationActivity.stopSignal("creationEnd"),this.navigateToCampaignSummaryPage())}},{key:"getAllLocationCriterions",value:function(){var e=this.campaignSettings&&this.campaignSettings.locationTargetsView&&this.campaignSettings.locationTargetsView.getValues({},{populateParentField:!1,keepAllLocations:!0}),t=e&&e.locations.concat(e.intent);if(this.isNotAudienceCampaign()){var i=this.campaignTargetsView&&this.campaignTargetsView.getAllLocations()||[];t=h.a.union(t,i)}return t}},{key:"checkIMAReachAndSave",value:function(){var e=this;this.validate()&&(this.clearApiErrors(),f.a.resolve(this.campaignSettings&&this.campaignSettings.locationTargetsPromise).then(function(){var t=e.getValues(),i=t&&t.CampaignCriterions&&h.a.filter(t.CampaignCriterions,function(e){return e&&("Location"===e.CriterionType||"Radius"===e.CriterionType)});return i&&i.length>0}).then(function(t){var i=e.getAllLocationCriterions();if(t&&b.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&e.isNewUI&&i.length>0&&"campaign-settings"===e.scenario){var n=Object(q.b)(i);return Object(q.e)({locationsInfo:n,onYes:function(){return e.save()},deliveryChannel:e.isNotAudienceCampaign()?"BingAds":"AIM",campaignId:h.a.result(e.campaign,"Id"),i18n:K,aid:b.a.CurrentAccount.Id,cid:b.a.CurrentAccount.AdvertiserCustomerID})}return f.a.resolve(!1)}).then(function(t){t||e.save()}))}},{key:"save",value:function(){var e=this;this.editMode||this.activity.signal("save clicked. isCoOpStoreSelected: ".concat(this.shoppingSettings.isCoOpStoreSelected()," isSponsoredCampaign: ").concat(this.isSponsoredCampaign),this.scenario),this.validate()&&(this.clearApiErrors(),f.a.resolve(this.campaignSettings&&this.campaignSettings.locationTargetsPromise).then(function(){var t=e.getValues();return f.a.join(P.a.ShoppingCampaign.create(t,{adapter:"bulk",cacheResponse:!1}),e.destroyProductScoeIfNeed())}).then(function(t){return t&&t.length>0&&(e.advancedSettingsView.setData(t[0]),Object(H.logCampaignPersonalizedOffers)(e.campaignSettings.cashbackSettingsView,e.activity.signal.bind(e.activity),t[0])),e.editMode?e.advancedSettingsView.saveExtensions():t}).then(function(t){var i=e.editMode?e.campaign.Id:h.a.propertyOf(h.a.first(t))("Id");e.navigateToCampaignSummaryPage(i),e.editMode||(e.activity.signal("shopping campaign creation succeeded",e.scenario),e.durationActivity.stopSignal("creationEnd")),e.activity.stop()}).catch(function(t){e.handleApiErrors(t)}).finally(j()(this.$el)))}},{key:"clearApiErrors",value:function(){this.viewModel.errors.clear(I.isCampaignApiError),this.campaignSettings.clearApiErrors(),this.shoppingSettings.clearApiErrors(),this.advancedSettingsView.clearApiErrors()}},{key:"handleApiErrors",value:function(e){var t=this;if(e&&"exclusion error"!==e)if(!e.errors||e.entity){this.editMode||this.campaignSettings.copySettings.hide(),I.getPartial(e,["AdGroups","CampaignProductScope","CampaignCriterions"],"newcampaign"),e.entity&&e.entity.Id&&(this.campaign.Id=e.entity.Id,this.campaignSettings.ko_model.Id(e.entity.Id),this.advancedSettingsView.setData(e),this.advancedSettingsView.handleErrors(e),this.shoppingSettings.handleApiErrors(e)),e.entity&&e.entity.CampaignProductScope&&e.entity.CampaignProductScope.Id&&(this.campaignProductScopeId=e.entity.CampaignProductScope.Id),h.a.isArray(e.entity.AdGroups)&&(this.defaultAdGroupCreated=h.a.isEmpty(h.a.first(e.entity.AdGroups).errors));var i=h.a.reject(e.entity.errors,function(e){return h.a.contains(["TrackingUrlTemplate","UrlCustomParameters"],e.property)});this.campaignSettings.handleApiErrors(i||[]),this.campaignTargetsView&&this.campaignTargetsView.fillCriterionsWithId(h.a.result(e.entity,"CampaignCriterions")),this.editMode||h.a.chain(e.errors).map(function(e){return e.Error}).uniq().each(function(e){t.activity.signal("campaign creation odata error: ".concat(e),t.scenario)}),this.activity.signal("campaign creation odata call failed",this.scenario)}else this.viewModel.errors.add(I.getBulkApiErrors(e.errors))}},{key:"destroyProductScoeIfNeed",value:function(){this.campaignProductScopeId&&!this.shoppingSettings.hasFilteredProducts()&&P.a.CampaignProductScope.destroy(this.campaignProductScopeId,{adapter:"bulk",parentId:this.campaign.Id})}},{key:"navigateToCampaignSummaryPage",value:function(e){J.off(),this.editMode?this.navigateToRoute("campaign_adgroup",{campaign_id:e}):this.navigateToRoute("campaign"),e&&(F.a.getContext("/campaign/NewCampaign/Create?"),this.deps.eventDelegator&&this.deps.eventDelegator.trigger(this.editMode?"campaignUpdated":"campaignCreated",{data:[{Id:Number(e),Name:this.campaignName,AccountId:b.a.CurrentAccount.Id,CampaignType:2,CampaignSubType:this.shoppingSettings.isCoOpStoreSelected()?10:null}]}))}},{key:"remove",value:function(){this.campaignSettings&&this.campaignSettings.remove(),this.campaignTargetsView&&this.campaignTargetsView.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"events",get:function(){return{"click .btn-save":"checkIMAReachAndSave","click .btn-cancel":"cancel","click .bmc_url_link":"redirect2BMC","click .brands_url_link":"redirect2Brands"}}}]),t}(d.a.View)},VOz2:function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("+HGQ"),i("Ra9r"),i("C4VE"),i("Sweh"),i("dge9"),i("+PqR"),i("6fFq")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d){var u=window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),p=function(e){return e&&t.each(e,function(e){e.data=[],e.EntityKeyObject={},t.each(e.EntityKey,function(t){e.EntityKeyObject[t.Key]=t.Value}),e.data.push({value:e.EntityKeyObject.CampaignName,isHtml:!1}),e.data.push({value:e.EntityKeyObject.AdgroupName,isHtml:!1});var i=function(e){var t="";if(e.hasOwnProperty("AgeRange")){var i=e.AgeRange;t=u.getString("Schema_Enum_AgeRange_"+i)}else e.hasOwnProperty("GenderType")?t=e.GenderType:e.hasOwnProperty("ProfileType")&&(t=e.ProfileName);return t}(e.EntityKeyObject);if(e.data.push({value:i,isHtml:!1}),e.Changes&&e.Changes.length){var n=e.Changes[0].OriginalValue;e.data.push({value:""===n||-1===+n?u.getString("Campaign_Cashback_Offer_Scope_InheritFromParent"):c.fromFloatToPercentString(e.Changes[0].OriginalValue,2),isHtml:!1});var a,r=e.Changes[0].NewValue;a=-1===+r||""===r?u.getString("Campaign_Cashback_Offer_Scope_InheritFromParent"):c.fromFloatToPercentString(e.Changes[0].NewValue,2),e.data.push({value:a,isHtml:!1})}else e.data.push({value:"",isHtml:!1}),e.data.push({value:"",isHtml:!1})}),e},g=function(i){return t.map(i.selectedItems(),function(i){var n=i.Campaign?i.Campaign.Id:e.advertiser.getUrlParameter("cmpid");return t.compact(["CampaignId="+n,i.AdGroup&&"AdGroupId="+i.AdGroup.Id,"TargetGroupDetailId="+i.Id]).join(",")})};return o.extend({initialize:function(e){this.options=e||{},o.prototype.initialize.apply(this,arguments),this.template=a,this.entity=e.entity,this.isForVNext=this.options.isForVNext,this.ko_model=new r({}),t.extend(this,e)},render:function(){return o.prototype.render.apply(this,arguments),this},setAction:function(e){var t;this.model.unset("PreviewEntityIds"),this.model.unset("PreviewCompositeIds"),e&&this.grid.pgridPlugins.crossPageSelectAll.isAllSelected&&this.model.set("PreviewCompositeIds",g(this.grid.gridView));var i=this.ko_model.getCashbackPercentValueByAction();t={Actions:[{"@odata.type":"#Model.NumericAction",Property:"CashbackAdjustment",ActionType:l.setAmount,Value:i}]},this.model.set("BatchAction",t)},getIdFilter:function(){return{FilterExpressions:[{SelectedColumn:"IdString",SelectedOperator:"Equal",Values:g(this.grid.gridView)}]}},getFilterURLParam:function(e,i){var n,a=this.grid.filterService.getCombinedFilter().odataV4();if(e.idBased){var r=t.filter(e.FilterExpressions,function(e){return"IdString"===e.SelectedColumn}),o=d.convert(r,i).$filter;n=a.match(/isof\(Criterion, 'Model.[\w]+Criterion'\)/)[0]+" and "+o}else n=a;return"$filter=("+encodeURIComponent(n)+")"},formatErrors:function(e){return p(e)},formatPreviewResults:function(e){return p(e)},getProgressText:function(){return u.getString("BulkEdit_Campaigns_ProgressText")}})}.apply(t,n))||(e.exports=a)},VSwD:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d,u){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"};var p=e+"ExclusionSettings",g="site"===e,h=g?"pop_BA_CampaignExclusionSettingsPopup_WebsitesToExclude":"Page_CampaignExclusionSettingsPopup_IPAddressToExclude",m=g?"camp-adg-shared-label-websites":"camp-adg-shared-label-ipexclusions";c?(i=i+'<div class="camp-adg-shared-label-spacing"><span class="camp-adg-shared-label"'+n.attr("id",m,!0,!0)+">"+n.escape(null==(t=d)?"":t)+"</span>",a.popupHelp(h,d,r),i=i+"<div"+n.attr("id",p,!0,!0)+">",g?(i=(i=l?(i=s?i+'<div class="row">'+n.escape(null==(t=r.getString("Adg_Settings_Sel_Description"))?"":t)+"</div>":i+'<div class="row">'+n.escape(null==(t=r.getString("Camp_Settings_Sel_Description"))?"":t)+"</div>")+'<div class="row camp-adg-shared-instruction-spacing"><a'+n.attr("href",u,!0,!0)+' id="siteExclusionListLink"><span><u>'+n.escape(null==(t=r.getString("Camp_Adg_Settings_Sel_Link"))?"":t)+'</u></span></a></div><div class="row">'+n.escape(null==(t=r.getString("Camp_Adg_Settings_Sel_Instructions"))?"":t)+"</div>":s?i+'<div class="row" id="camp-adg-shared-website-textareas-adgroup-instructions">'+n.escape(null==(t=r.getString("Camp_Adg_Settings_Sel_AdGroup_Instructions"))?"":t)+"</div>":i+'<div class="row" id="camp-adg-shared-website-textareas-adgroup-instructions">'+n.escape(null==(t=o)?"":t)+"</div>")+'<div class="row camp-adg-shared-first-textarea-spacing"><textarea'+(n.attr("class",n.classes(["camp-adg-shared-textarea",e+"-exclusions"],[!1,!0]),!1,!0)+n.attr("aria-labelledby",m,!0,!0))+' aria-describedby="camp-adg-shared-website-textareas-adgroup-instructions" cols="60" rows="10" data-bind="textInput: exclusions"></textarea></div><div data-bind="foreach: errors"><div class="entity-errors"><ul><div data-bind="foreach: Value"><li><div data-bind="html: $data + &quot;:&quot;"></div><div class="error" data-bind="html: $parent.Key"></div></li></div></ul></div></div>',s&&(i=i+'<div class="row camp-adg-shared-spacing-between-textareas" id="camp-adg-shared-website-textareas-campaign-instructions">'+n.escape(null==(t=r.getString("Camp_Adg_Settings_Sel_Campaign_Instructions"))?"":t)+'</div><div class="row camp-adg-shared-first-textarea-spacing"><textarea class="camp-adg-shared-disabled-textarea camp-adg-shared-textarea"'+n.attr("aria-labelledby",m,!0,!0)+' aria-describedby="camp-adg-shared-website-textareas-campaign-instructions" cols="60" rows="10" data-bind="textInput: campaignExclusions"'+n.attr("disabled",!0,!0,!0)+"></textarea></div>")):i=i+'<div class="row" id="camp-adg-shared-ipexclusions-textareas-instructions">'+n.escape(null==(t=o)?"":t)+'</div><div class="row camp-adg-shared-first-textarea-spacing"><textarea'+(n.attr("class",n.classes(["camp-adg-shared-textarea",e+"-exclusions"],[!1,!0]),!1,!0)+n.attr("aria-labelledby",m,!0,!0))+' aria-describedby="camp-adg-shared-ipexclusions-textareas-instructions" cols="60" rows="10" data-bind="textInput: exclusions"></textarea></div><div data-bind="foreach: errors"><div class="entity-errors"><div class="error" data-bind="html: Key"></div><ul><div data-bind="foreach: Value"><li data-bind="html: $data"></li></div></ul></div></div>',i+="</div></div>"):(i=i+'<div class="form-control-static"><a data-toggle="collapse"'+n.attr("data-target","#"+p,!0,!0)+"><span>"+n.escape(null==(t=d)?"":t)+"</span></a>",a.popupHelp(h,d,r),i=i+'<span class="target-info" data-bind="visible: !isExpanded(), text: numbersExcluded"></span></div><div class="collapse"'+n.attr("id",p,!0,!0)+'><div class="row"><div class="col-sm-5"><textarea'+n.attr("class",n.classes([e+"-exclusions"],[!0]),!1,!0)+' cols="60" rows="10" data-bind="textInput: exclusions"></textarea>',s&&(i=i+'<div class="pull-right">'+n.escape(null==(t=r.getString("Page_EditAdGroup_AdGroupLevelExclusions"))?"":t)+"</div>"),i=i+'</div><div class="col-sm-3">'+n.escape(null==(t=o)?"":t)+'</div></div><div data-bind="foreach: errors"><div class="entity-errors"><div class="error" data-bind="html: Key"></div><ul><div data-bind="foreach: Value"><li data-bind="html: $data"></li></div></ul></div></div>',s&&(i=i+'<div class="row"><div class="col-sm-5"><textarea cols="60" rows="10" data-bind="textInput: campaignExclusions" disabled></textarea><div class="pull-right">'+n.escape(null==(t=r.getString("Page_EditAdGroup_CampaignLevelExclusions"))?"":t)+"</div></div></div>"),i+="</div>")}.call(this,"exclusionType"in r?r.exclusionType:"undefined"!==typeof exclusionType?exclusionType:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"instruction"in r?r.instruction:"undefined"!==typeof instruction?instruction:void 0,"isAdGroupLevel"in r?r.isAdGroupLevel:"undefined"!==typeof isAdGroupLevel?isAdGroupLevel:void 0,"isInSiteExclusionListPilot"in r?r.isInSiteExclusionListPilot:"undefined"!==typeof isInSiteExclusionListPilot?isInSiteExclusionListPilot:void 0,"isNewUI"in r?r.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0,"labelText"in r?r.labelText:"undefined"!==typeof labelText?labelText:void 0,"siteExclusionListHref"in r?r.siteExclusionListHref:"undefined"!==typeof siteExclusionListHref?siteExclusionListHref:void 0),i}},Vb2v:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="uurl-test-info" data-bind="visible: showTesting()"><span class="loading-image"></span><span class="loading-text">'+n.escape(null==(t=e.getString("UURLTestTool_Test_Inprogress"))?"":t)+'</span></div><div class="uurl-test-info" data-bind="visible: resultString()"><span class="status-icon" data-bind="visible: resultType() == 0"><div class="glyph-status-ok page-found-icon"></div></span><span class="status-icon" data-bind="visible: resultType() != 0"><div class="status_warning"></div></span>',a?i=i+'<span class="resultString clickable" data-bind="text: resultString()"'+n.attr("aria-label",e.getString("UURLTestTool_Result_ShowDetails"),!0,!0)+' role="button" tabindex="0"></span>':i+='<span class="resultString" data-bind="text: resultString()"></span>',i=i+'<span class="resultDetails status_icon detail-icon clickable" data-bind="visible: resultType() &lt; 3"'+n.attr("title",e.getString("UURLTestTool_Result_ShowDetails"),!0,!0)+' tabindex="0"></span></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isForVNext"in a?a.isForVNext:"undefined"!==typeof isForVNext?isForVNext:void 0),i}},Vgl9:function(e,t,i){var n,a;n=[i("UT4o"),i("7XbR"),i("YK3D"),i("+PqR"),i("UySe"),i("5C8L"),i("Gxem"),i("jQIp")],void 0===(a=function(e,t,i,n,a,r,o){"use strict";var s=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),l=window.globalLegacySchema.get("Budget"),c=o.formatCost,d=i.BudgetRange,u="Monthly",p="DailyStandard",g="DailyAccelerated",h=i.Permissions.IsDefaultBudgetExperimentationEnabled?25:20,m=i.Permissions.IsDeprecateAcceleratedBudgetEnabled,f=(i.Permissions.IsDeprecateAcceleratedBudgetOptoutEnabled,function(o){var f=this,v=i.AccountCurrencyCode&&"USD"===i.AccountCurrencyCode?h:d.DailyRange.FloorValue>20?d.DailyRange.FloorValue:20,b=e.defaults({},o.budget,{Amount:v,Type:p});this.suggestedBudget=t.observable(0),this.clicksIncrease=t.observable(0),this.isDailyBudgetExpanded=t.observable(!1),this.BudgetScopeOptions=[{value:"Day",text:s.get("BudgetLimitType_Daily")},{value:"Month",text:s.get("BudgetLimitType_Monthly")}],this.budgetAmountPlaceholder=s.get("CampaignSetting_Placeholder_Budget").replace("{0}",n.fromLocalToString(v)),r.properties(this,l,["Amount","Type"],b),this.BudgetScope=t.observable(b.Type===u?"Month":"Day"),this.isDailyStandard=t.observable(b.Type===p),this.hideAcceleratedBudgetOption=t.computed(function(){return m&&b.Type===p}),this.showSuggestedBudget=t.computed(function(){return this.Amount()<this.suggestedBudget()&&this.clicksIncrease()>0},this),this.budgetSuggestion=t.computed(function(){return s.get("Creation_Workflow_Budget_Suggestion_Per_Month",{increasedClicks:a.format(this.clicksIncrease()),budget:c(this.suggestedBudget())})},this),this.isDailyStandard.forEditing=t.computed({read:function(){return this.isDailyStandard().toString()},write:function(e){return this.isDailyStandard("true"===e)}},this),this.DailyBudgetType=t.computed(function(){return this.isDailyStandard()?p:g},this),this.budgetLimit=t.computed(function(){if(!e.isEmpty(d))return"Day"===this.BudgetScope()?d.DailyRange:d.MonthlyRange},this),t.computed(function(){this.Type("Month"===this.BudgetScope()?u:this.DailyBudgetType())},this);var y=e.result(this.Amount.validators,"type");y&&(y.message=s.get("Campaigns_InlineValidBudgetInputMsg"));var S=e.result(this.Amount.validators,"decimalLength");S&&(S.message=s.get("Campaigns_InlineValidBudgetInputMsg")),this.computeBudgetError=function(){var t=this.Amount(),i=this.budgetLimit().FloorValue,a=this.budgetLimit().CeilingValue;return e.isNil(t)?s.get("CampaignBudget_Validation_RequiredField"):e.isEmpty(d)?"":this.Amount.isValid()&&(t<i||t>a)?"Day"===this.BudgetScope()?s.get("Budget_InputValueError_Daily").replace("{0}",o.accountCurrencyCode).replace("{1}",n.fromFloatToString(this.budgetLimit().FloorValue,2)):s.get("Budget_InputValueError_Monthly").replace("{0}",o.accountCurrencyCode).replace("{1}",n.fromFloatToString(this.budgetLimit().FloorValue,2)).replace("{2}",o.accountCurrencyCode).replace("{3}",n.fromFloatToString(this.budgetLimit().CeilingValue,2)):""},this.useSuggestedBudget=function(){this.Amount(this.suggestedBudget())},this.budgetError=t.computed(this.computeBudgetError,this),this.Amount.subscribe(function(){f.Amount.validate()}),this.budgetInvalid=t.computed(function(){return!e.isEmpty(this.budgetError())||!this.Amount.isValid()},this),this.dailyBudget=t.computed(function(){return this.Type()===u?this.Amount()/30:this.Amount()},this),this.budgetLabel=t.computed(function(){return this.budgetInvalid()?s.get("Label_Budget"):s.get("Campaign budget per day by {{unit}}").replace("{{unit}}",o.accountCurrencyCode)},this)});return f.prototype.updateSuggestedBudget=function(e,t){this.suggestedBudget(e||0),this.clicksIncrease(t||0)},f.prototype.update=function(t){e.isObject(t)&&(this.Amount(t.Amount),"Monthly"===t.Type?this.BudgetScope("Month"):"DailyAccelerated"!==t.Type&&"DailyStandard"!==t.Type||(this.BudgetScope("Day"),this.isDailyStandard("DailyStandard"===t.Type)))},f.prototype.enough=function(){return this.Amount()>=this.suggestedBudget()},f}.apply(t,n))||(e.exports=a)},ViT6:function(e,t,i){var n,a;n=[i("7XbR"),i("5iHu"),i("UT4o"),i("Srkz")],void 0===(a=function(e,t,i){return e.bindingHandlers.datePicker={init:function(n,a,r){var o=a(),s=r(),l=s.culture,c=s.format,d=s.enabled,u=s.disabled;if(i.isUndefined(d)&&!i.isUndefined(u)&&(d=e.isObservable(u)?e.computed(function(){return!u()}):!u),!e.isObservable(o))throw new Error("Value accessor for date picker should be observable");t(n).kendoDatePicker({culture:l,format:c,animation:!1,footer:!1,max:new Date(9999,11,31),value:o(),change:function(){var e=this.value();null==e&&t(n).val()&&(e=t(n).val()),o(e)},open:function(){p&&p.dateView&&p.dateView.calendar&&p.dateView.calendar.setOptions&&p.dateView.calendar.setOptions({animation:!1})}}),t(n).addClass("form-control");var p=t(n).data("kendoDatePicker");p&&(i.isFunction(p.open)&&t(n).click(p.open.bind(p)),i.isFunction(p.value)&&o.subscribe(function(e){p.value()!=e&&p.value(e)}),e.isObservable(d)?(p.enable(d()),d.subscribe(function(e){p.enable(e),t(n).removeAttr("aria-readonly")})):i.isUndefined(d)||p.enable(d)),t(n).removeAttr("aria-readonly")}},e.bindingHandlers.datePicker}.apply(t,n))||(e.exports=a)},Vr0g:function(e,t,i){e.exports={Ad:{ProgressText:"BulkEdit_Ads_ProgressText",EmptySetTextError:"BulkEdit_Ads_EmptySetTextError",TrackingTemplateProperty:"AdTrackingTemplate",FinalUrlSuffixProperty:"AdFinalUrlSuffix"},Keyword:{ProgressText:"BulkEdit_Keywords_ProgressText",EmptySetTextError:"BulkEdit_Keyword_EmptySetTextError",TrackingTemplateProperty:"KeywordTrackingTemplate",FinalUrlSuffixProperty:"KeywordFinalUrlSuffix"},AdGroup:{ProgressText:"BulkEdit_AdGroups_ProgressText",EmptySetTextError:"BulkEdit_AdGroup_EmptySetTextError",TrackingTemplateProperty:"AdGroupTrackingUrlTemplate",FinalUrlSuffixProperty:"AdGroupFinalUrlSuffix"},Campaign:{ProgressText:"BulkEdit_Campaigns_ProgressText",EmptySetTextError:"BulkEdit_Campaign_EmptySetTextError",TrackingTemplateProperty:"CampaignTrackingUrlTemplate",FinalUrlSuffixProperty:"CampaignFinalUrlSuffix"}}},Vrot:function(e,t,i){e.exports={None:"None",MatchCase:"MatchCase",MatchWholeWord:"MatchWholeWord",PreserveCapitalization:"PreserveCapitalization",StartsWith:"StartsWith"}},VrzL:function(e,t,i){var n,a;n=[i("UT4o"),i("f9Pu"),i("Y+22"),i("5I0q")],void 0===(a=function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=61)}({61:function(e,t,i){e.exports=i(62)},62:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(63);t.default=n.ODataAdapter},63:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ODataAdapter=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(7),o=(n=r)&&n.__esModule?n:{default:n},s=i(64),l=i(65),c=i(66);t.ODataAdapter=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.ODataBaseAdapter),a(t,[{key:"convertQuery",value:function(e){var t=e.filterOptions,i=void 0===t?{}:t,n=e.where,a=void 0===n?{}:n,r=c.odataQuery.convert(e),l=a["*"];(l=void 0===l?{}:l).contains;if(!o.default.isString(a)||o.default.isEmpty(a)){var d=o.default.omit(a,"*");if(!o.default.isEmpty(d)){var u=new s.FilterEntity(d,i).odataV4();o.default.isEmpty(u)||(r.$filter=u)}}return r}}]),t}()},64:function(e,i){e.exports=t},65:function(e,t){e.exports=i},66:function(e,t){e.exports=n},7:function(t,i){t.exports=e}})}.apply(t,n))||(e.exports=a)},VvTQ:function(e,t,i){var n,a;n=[i("5iHu"),i("syDw"),i("UT4o"),i("0XzA"),i("ADN7"),i("+Bp1"),i("D1rb"),i("EJXN"),i("bWDH"),i("tYu0")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c){var d=window.globalLegacySchema.get("CalloutAdExtension"),u=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextensions"),p=r.default,g=c.panelDecorator,h={position:"center",maxWidth:1e3},m={title:"AdExtensions_Callout_Editor_Title",subtitle:["NewCampaign_CalloutAdExtension_Subtitle"],library_title:"AdExtensions_Callout_Editor_Available",selected_title:"AdExtensions_Callout_Editor_Selected",create_link:"AdExtensions_Callout_Editor_CreateNew",create_title:"AdExtensions_Callout_Dialog_Title_Add",delete_btn:"AdExtensions_Callout_Editor_Delete",delete_confirm:"AdExtensions_Callout_Delete_Warning",edit_btn:"AdExtensions_Callout_Editor_Edit",edit_title:"AdExtensions_Callout_Dialog_Title_Edit",inlineAlert:"AdExtensions_Callout_Max_Select_Notification"},f=function(e){var t=e.schema,n=e.updateContext;return new p({schema:t,afterChangeComitted:function(){i.isFunction(n)&&n(["AccountAdExtensionsGrid","CampaignAdExtensionsGrid","AdGroupAdExtensionsGrid"])}})};return n.extend({initialize:function(e){var t=e&&e.usePanel?g(o,{i18n:u,panelReadyAriaLabel:u.getString("Association editor side panel opened")}):a.decorate(o,h),r=e.repositoryFactory||f;i.extend(e,{idField:"Id",data:r({schema:d,updateContext:e.updateContext}),template:{preview:s,rowTemplate:l},extensionType:"CalloutExtension",maxSelectedItemsCount:e.maxSelectedItemsCount||20,CreateForm:t,EditForm:t,i18nKeys:i.extend({},m,e.i18nKeys||{})}),n.prototype.initialize.apply(this,[e])}})}.apply(t,n))||(e.exports=a)},W1RS:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a,r,o){var s=a.id,l=a.property,c="value:"+l+".text";a.valueUpdate&&(c+=", valueUpdate:"+e.stringify(a.valueUpdate)),o?t=t+'<div class="text-form-hint-inline"><div class="input-group"><input class="form-control" type="text"'+n.attr("id",a.id,!0,!0)+n.attr("required",a.required,!0,!0)+n.attr("aria-required",i(a.required),!0,!0)+n.attr("data-bind",c+", hasFocus: "+l+".editing, attr: { placeholder: "+l+".placeholder, title: "+l+".label, 'aria-label': "+l+".ariaLabel, 'aria-labelledby': "+l+".labelledBy, 'aria-describedby': "+l+".strDescribedby }",!0,!0)+'><span class="input-group-addon" data-bind="text: &quot; + property + &quot;.remaining"></span></div></div>':(t=t+'<input class="form-control input" type="text"'+n.attr("id",a.id,!0,!0)+n.attr("required",a.required,!0,!0)+n.attr("aria-required",i(a.required),!0,!0)+n.attr("data-bind",c+", hasFocus: "+l+".editing, attr: { placeholder: "+l+".placeholder, title: "+l+".label, 'aria-label': "+l+".ariaLabel, 'aria-labelledby': "+l+".labelledBy, 'aria-describedby': "+l+".strDescribedby }",!0,!0)+">",r&&(t=t+'<div class="remaining-hint help-block"'+n.attr("data-bind","text: "+l+".char_rem",!0,!0)+n.attr("id",s+"-Remaining",!0,!0)+' role="status" aria-live="polite"></div>'))}.call(this,"JSON"in i?i.JSON:"undefined"!==typeof JSON?JSON:void 0,"String"in i?i.String:"undefined"!==typeof String?String:void 0,"field"in i?i.field:"undefined"!==typeof field?field:void 0,"hasLengthHint"in i?i.hasLengthHint:"undefined"!==typeof hasLengthHint?hasLengthHint:void 0,"hasLengthHintInline"in i?i.hasLengthHintInline:"undefined"!==typeof hasLengthHintInline?hasLengthHintInline:void 0),t}},WLWg:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={BingYahooAndSearchPartners:"BingYahooAndSearchPartners",BingYahooOnly:"BingYahooOnly",SearchPartnersOnly:"SearchPartnersOnly",InHousePromotion:"InHousePromotion"}},WfQX:function(e,t,i){var n,a;n=[i("UT4o"),i("ERkP"),i("aWzz"),i("7nmT"),i("DfB3")],void 0===(a=function(e,t,i,n,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=157)}({157:function(e,t,i){e.exports=i(158)},158:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={FloatingBanner:!0};Object.defineProperty(t,"FloatingBanner",{enumerable:!0,get:function(){return r.FloatingBanner}});var a=i(159);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var r=i(161)},159:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toastConfirmation=t.toastInfo=t.toastWarning=t.toastError=t.dismiss=t.showConfirmation=t.showInfo=t.showWarning=t.showError=t.show=t.dismissAll=t.newAlertId=t.setConfig=void 0;var n=s(i(4)),a=s(i(160)),r=i(161),o=i(163);function s(e){return e&&e.__esModule?e:{default:e}}var l,c=".floating-banner-container",d=0;t.setConfig=function(e){var t=e.selector,i=e.dismissTime,n=e.logInstrumentation;c=t||c,d=i||d,l=n};t.newAlertId=function(){};var u=function(e){document.querySelector(c)&&a.default.render(n.default.createElement(r.FloatingBanner,{alert:e,autoDismissTime:d,logInstrumentation:l,key:(0,o.getUniqueAlertId)()}),document.querySelector(c))},p=function(){return u()};t.dismissAll=function(){p()};t.dismiss=function(){p()};var g=function(e){return u(e)};t.show=g;t.showError=function(e){return g({message:e,level:"Error"})};t.showWarning=function(e){return g({message:e,level:"Warning"})};t.showInfo=function(e){return g({message:e,level:"Info"})};t.showConfirmation=function(e){return g({message:e,level:"Confirmation"})};t.toastError=function(e){u({message:e,level:"Error"})};t.toastWarning=function(e){u({message:e,level:"Warning"})};t.toastInfo=function(e){u({message:e,level:"Info"})};t.toastConfirmation=function(e){u({message:e,level:"Confirmation"})}},160:function(e,t){e.exports=n},161:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingBanner=void 0;var n=l(i(3)),a=l(i(4)),r=l(i(5)),o=i(162),s=i(163);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f="floatingBanner",v={message:"message",action:"action",dismiss:"dismiss"},b=function(e){function t(e){var i,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=p(t).call(this,e),i=!o||"object"!==c(o)&&"function"!==typeof o?g(r):o,m(g(i),"logTrace",function(e,t){var a="".concat(f,":").concat(e),r=n.default.reduce(t,function(e,t){return"".concat(e,":").concat(t)},"".concat(i.props.alert.level,":").concat(n.default.isString(i.props.alert.message)?i.props.alert.message:"ReactElement"));i.props.logInstrumentation.trace(a,r)}),m(g(i),"afterUpdate",function(){i.state.showBanner&&(i.logTrace(v.message),i.timerId&&clearTimeout(i.timerId),i.props.autoDismissTime>0&&(i.timerId=setTimeout(function(){i.dismiss(!1)},i.props.autoDismissTime)))}),m(g(i),"dismiss",function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&i.logTrace(v.dismiss),i.setState({showBanner:!1})}),m(g(i),"actionClicked",function(e){i.logTrace(v.action,[e])});var s=i.props.alert&&i.props.alert.message;return i.state={showBanner:n.default.isString(s)||a.default.isValidElement(s)},i}var i,r,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.default.Component),i=t,(r=[{key:"componentDidMount",value:function(){this.afterUpdate()}},{key:"componentDidUpdate",value:function(){this.afterUpdate()}},{key:"componentWillUnmount",value:function(){this.timerId&&clearTimeout(this.timerId)}},{key:"render",value:function(){return a.default.createElement("div",null,this.state.showBanner&&a.default.createElement("div",{className:"floating-banner"},a.default.createElement(o.Alert,d({},(0,s.mapAlertLevel)(this.props.alert),{onDismiss:this.dismiss,onActionClicked:this.actionClicked}))))}}])&&u(i.prototype,r),l&&u(i,l),t}();t.FloatingBanner=b,b.propTypes={alert:r.default.shape({message:r.default.oneOfType([r.default.string,r.default.element]),level:r.default.string}),autoDismissTime:r.default.number,logInstrumentation:r.default.shape({trace:r.default.func})},b.defaultProps={alert:{message:void 0,level:"Confirmation"},autoDismissTime:0,logInstrumentation:{trace:n.default.noop}}},162:function(e,t){e.exports=a},163:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueAlertId=t.mapAlertLevel=void 0;var n,a=(n=i(3))&&n.__esModule?n:{default:n};var r={Error:"Warning",Warning:"Warning",Confirmation:"Confirmation",Info:"Confirmation"};t.mapAlertLevel=function(e){return a.default.extend(e,{level:r[e.level||"Confirmation"]})};t.getUniqueAlertId=function(){return a.default.uniqueId("floating-banner-")}},3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},5:function(e,t){e.exports=i}})}.apply(t,n))||(e.exports=a)},WkF7:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=function e(){Object(n.a)(this,e)},m=i("r+5x"),f=i.n(m),v=i("7JQq"),b=i("Xhun");i.d(t,"a",function(){return S});var y=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),S=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.showTrafficEstimation,n=void 0!==i&&i,a=e.budget,r=void 0===a?0:a,o=e.getKeywordsCb,s=void 0===o?function(){return[]}:o,l=e.adgroup,c=void 0===l?void 0:l,d=e.languages,u=void 0===d?[]:d,p=e.campaign,g=void 0===p?void 0:p,m=e.bidStatusEnabled,f=void 0!==m&&m,b=e.isInKeywordCreationWorkflow,S=void 0!==b&&b,w=e.inputLabel,C=void 0===w?y.get("Bids_SearchNetworkBid_New"):w,x=e.isForVNext,k=void 0!==x&&x;return this.searchBidView=new v.default({adgroup:c,getKeywordsCb:s,budget:r,showTrafficEstimation:n,languages:u,bidStatusEnabled:f,isInKeywordCreationWorkflow:S,inputLabel:C,isForVNext:k}),this.viewModel=new h,this.setCampaignAutoBiddingBoolean(g),this.searchBidView.on("bid:clicked-bid-landscape",function(e){t.trigger("bid:clicked-bid-landscape",e)}),this}},{key:"render",value:function(){return this.$el.append(f()()),g.a.applyBindings(this.viewModel,this.el),this.$(".search-bid__container").append(this.searchBidView.render().el),this}},{key:"bidEditable",value:function(){return!(this.searchBidView.viewModel.disableSearchBid()||this.searchBidView.viewModel.isAutoBidding())}},{key:"validate",value:function(){return this.searchBidView.validate()}},{key:"getValues",value:function(){return c.a.defaults({},this.searchBidView.getValues())}},{key:"resetSearchBidStatus",value:function(e){this.searchBidView.viewModel.disableSearchBid(!e)}},{key:"resetIsAutoBidding",value:function(e){this.searchBidView.viewModel.isAutoBidding(this.isCampaignAutoBidding&&!c.a.isEmpty(e)&&"InheritFromParent"===e)}},{key:"setCampaignAutoBiddingBoolean",value:function(e){this.isCampaignAutoBidding=e&&e.BiddingScheme&&e.BiddingScheme.Type&&c.a.contains(["MaxClicks","MaxConversions","TargetCpa","TargetRoas","MaxConversionValue","TargetImpressionShare","CostPerSale"],e.BiddingScheme.Type)}},{key:"updateBidLandscapeAvailability",value:function(e){this.searchBidView.updateBidLandscapeAvailability(e)}},{key:"updateAdGroupMedium",value:function(e){this.searchBidView.viewModel.updateAdGroupMedium(e)}},{key:"setModel",value:function(e){e.Medium!==b.a.Content&&(this.searchBidView.viewModel.setModel({SearchBid:0}),this.searchBidView.viewModel.setModel(e),e&&e.BiddingScheme&&this.resetIsAutoBidding(e.BiddingScheme.Type))}},{key:"bid",get:function(){return this.searchBidView.viewModel.SearchBid}},{key:"suggestedBid",get:function(){return this.searchBidView.viewModel.suggestedBid()}},{key:"isNKW",get:function(){return this.searchBidView.isNKW}},{key:"viewedSuggestion",get:function(){return this.searchBidView.viewedSuggestion}},{key:"bidStatusEnabled",get:function(){return this.searchBidView.bidStatusEnabled}}]),t}(u.a.View)},WzTB:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+'<form class="form-inline pagination-control"><div class="pager" data-bind="visible: pageCount() &gt; 1"><button class="btn btn-default btn-flat nav-button prev" data-bind="click: decPageNumber, enable: pageNumber() &gt; 0" type="button"'+n.attr("aria-label",r,!0,!0)+'><div class="glyphicon glyphicon-triangle-left"></div></button><div class="text"><span>'+n.escape(null==(t=a)?"":t)+'</span></div><input class="form-control page-number-input" data-bind="value: pageNumberText, attr: { size: pageNumberSize, maxlength: pageNumberSize, disabled: !enableRandomPage() }" type="text"'+n.attr("aria-label",a,!0,!0)+'><div class="text"><span>'+n.escape(null==(t=o)?"":t)+'</span><span>&nbsp;</span><span data-bind="text: pageCount"></span></div><button class="btn btn-default btn-flat nav-button next" data-bind="click: incPageNumber, enable: pageNumber() &lt; pageCount() - 1" type="button"'+n.attr("aria-label",e,!0,!0)+'><div class="glyphicon glyphicon-triangle-right"></div></button></div></form>'}.call(this,"nextPageText"in a?a.nextPageText:"undefined"!==typeof nextPageText?nextPageText:void 0,"pageNumberLabelText"in a?a.pageNumberLabelText:"undefined"!==typeof pageNumberLabelText?pageNumberLabelText:void 0,"previousPageText"in a?a.previousPageText:"undefined"!==typeof previousPageText?previousPageText:void 0,"totalPageCountText"in a?a.totalPageCountText:"undefined"!==typeof totalPageCountText?totalPageCountText:void 0),i}},X1RG:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.popupHelp=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i=i+'<div data-bind="visible: !hide()"><div class="checkbox checkbox-copy"><label><input type="checkbox" data-bind="checked: copySetting">'+n.escape(null==(t=e.get("Campaign_CopySettings"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_Settings_UseAnother",e.get("Campaign_CopySettings"),e),i+='</div><div class="form-control-static copy-settings" data-bind="visible: copySetting"></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},XGx8:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="panel-component"><div class="panel-body"><div class="form-group"><div class="col-sm-6"><div class="col-sm-1"><div class="glyphicon glyphicon-arrow-left cursor-pointer clickable" role="button" tabindex="0"></div></div><div class="col-sm-8"><div class="col-sm-5"><h3 class="type-normal margin-zero">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Filter_HotelGroup_Label"))?"":t)+'</h3></div><div class="col-sm-7"><h3 class="type-bold margin-zero truncated">'+n.escape(null==(t=e.hotelGroup.Name)?"":t)+'</h3></div></div><div class="col-sm-1"><div class="glyphicon glyphicon-remove hotel-group-information-remove__glyphicon cursor-pointer clickable" role="button" tabindex="0"></div></div></div></div></div></div>'}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},XMQU:function(e,t,i){var n,a;n=[i("syDw"),i("Glrc"),i("7XbR")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=406)}({13:function(e,i){e.exports=t},406:function(e,t,i){e.exports=i(407)},407:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PillControl",{enumerable:!0,get:function(){return n.PillControl}});var n=i(408)},408:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PillControl=void 0;var n=s(i(9)),a=s(i(57)),r=s(i(409)),o=s(i(410));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,i){return(u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){this.viewModel.selectedIndex(Number(e.currentTarget.dataset.index))}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var i,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n.default.View),i=t,(s=[{key:"initialize",value:function(e){var t=this,i=e.items,n=e.selectedIndex,a=void 0===n?0:n,o=e.tabPanelId,s=void 0===o?"child-page":o;this.viewModel=new r.default({items:i,selectedIndex:a,tabPanelId:s}),this.viewModel.selected.subscribe(function(e){t.trigger("select",{item:e,index:t.viewModel.selectedIndex()})})}},{key:"render",value:function(){return this.$el.html((0,o.default)()),a.default.applyBindings(this.viewModel,this.el),this}},{key:"remove",value:function(){a.default.cleanNode(this.el),u(p(t.prototype),"remove",this).call(this)}},{key:"events",get:function(){return{"click .pill-control a":h}}}])&&c(i.prototype,s),l&&c(i,l),t}();t.PillControl=m},409:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=i(57))&&n.__esModule?n:{default:n};t.default=function e(t){var i=this,n=t.items,r=t.selectedIndex,o=t.tabPanelId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=n,this.tabPanelId=o,this.selectedIndex=a.default.observable(r),this.selected=a.default.computed(function(){return i.items[i.selectedIndex()]})}},410:function(e,t,i){"use strict";i(13);e.exports=function(e){var t="";return t+="<ul class=\"pill-control nav nav-pills\" data-bind=\"foreach: items\" role=\"tablist\"><li data-bind=\"css:{ 'active': $data == $root.selected() }\" role=\"presentation\"><a class=\"clickable\" data-bind=\"text: text, attr: { 'data-index': $index, 'data-value': $data.value,       'data-id': $data.id, 'aria-selected': $data == $root.selected() ? 'true' : 'false',       'tabindex': $data == $root.selected() ? '0' : '-1', 'aria-setsize': $parent.items.length,       'aria-posinset': $index() + 1, 'aria-controls': $parent.tabPanelId }\" data-href=\"#\" role=\"tab\" href=\"javascript:;\"></a></li></ul>"}},57:function(e,t){e.exports=i},9:function(t,i){t.exports=e}})}.apply(t,n))||(e.exports=a)},XNtw:function(e,t,i){"use strict";var n=i("6e2+"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("UT4o"),u=i.n(d),p=i("zKVV"),g=i.n(p),h=i("Jl/D"),m=i("UgQD"),f=i.n(m),v=i("0cl2"),b=i("1EwD"),y=i.n(b),S=i("YK3D"),w=i.n(S),C=i("/xyZ"),x=i.n(C),k=i("syDw"),A=i.n(k),T=i("EwHi"),_=i.n(T),E=i("4I68"),I=i("rO3q"),O=i("NkAx"),P=i.n(O),M=i("FDu0"),j=i("suma"),L=i("3rRK"),D=i.n(L),R=i("DXRr"),N=i("d21t"),V=w.a&&w.a.Permissions&&w.a.Permissions.IsBSCSmartImportEnabled,B=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),F=new D.a(B.get("Browser_Reload_AlertMessage")),U=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=e.deps;this.deps=t,this.template=g.a,this.campaignSettingsView=null,this.shoppingSettingsView=null,this.campaignTargetingView=null,this.cachedModel={campaignSettings:{},shoppingSettings:{},campaignTargeting:{locationTargets:{},adScheduleModel:{}}},this.navigateToRoute=j.legacyRouter.navigateToRoute,this.campaignId=null,this.adgroupId=null,this.campaignName=null,this.initModalManager()}},{key:"initModalManager",value:function(){F.on(),window.App&&window.App.router_new.on("route",function(){F.active&&F.off()})}},{key:"renderSubViews",value:function(e,t,i){this.campaignSettingsPlaceholder=this.$el.find(".campaign-settings"),this.shoppingSettingsPlaceholder=this.$el.find(".shopping-settings"),this.campaignTargetingPlaceholder=this.$el.find(".campaign-targeting"),this.campaignSettingsView=this.renderCampaignSettingsView(),this.campaignSettingsPlaceholder.empty().append(this.campaignSettingsView.$el),this.shoppingSettingsView=this.renderShoppingSettingsView(e,t),this.shoppingSettingsPlaceholder.empty().append(this.shoppingSettingsView.$el),this.campaignTargetingView=this.renderCampaignTargetingView(t,i),this.campaignTargetingPlaceholder.empty().append(this.campaignTargetingView.$el)}},{key:"renderCampaignSettingsView",value:function(){return new _.a(u.a.extend({scenario:"smart-shopping-campaign-creation-workflow",showLanguage:!1},this.cachedModel.campaignSettings)).render()}},{key:"renderShoppingSettingsView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new E.a({data:e,campaignType:"Shopping",campaignSubType:"ShoppingSmartAds",model:this.cachedModel.shoppingSettings,editMode:t,shouldShowPlaceholderStoreIfExists:V&&t,deps:{gmcToMMCGridDeps:N}}).render()}},{key:"renderCampaignTargetingView",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).AdScheduleUseSearcherTimeZone;return this.cachedModel.campaignTargeting.adScheduleModel.adScheduleUseSearcherTimeZone=t,new I.a({deps:{eventDelegator:this.deps.eventDelegator},model:this.cachedModel.campaignTargeting,campaignId:this.campaignId,adgroupId:this.adgroupId,showDateSettings:!e}).render()}},{key:"navigateToCampaignSummaryPage",value:function(e){F.off();var t=this.campaignId,i=this.campaignName;t?(e?this.navigateToRoute("campaign_adgroup",{campaign_id:t}):this.navigateToRoute("campaign"),P.a.getContext("/campaign/NewCampaign/Create?"),this.deps.eventDelegator&&this.deps.eventDelegator.trigger(e?"campaignUpdated":"campaignCreated",{data:[{Id:Number(t),Name:i,AccountId:w.a.CurrentAccount.Id,CampaignType:2,CampaignSubType:12}]})):this.navigateToRoute("campaign")}},{key:"refreshCampaignTargetingView",value:function(){this.campaignTargetingView.remove(),this.campaignTargetingView=this.renderCampaignTargetingView(),this.campaignTargetingPlaceholder.empty().append(this.campaignTargetingView.el)}},{key:"handleApiErrors",value:function(e){if(!e||"exclusion error"===e)return null;var t=u.a.chain(e.errors).map(function(e){return e.Error}).uniq().value();e.entity&&e.entity.Id&&(this.campaignId=e.entity.Id,this.campaignSettingsView.ko_model.Id(e.entity.Id));var i=u.a.reject(e.entity.errors,function(e){return u.a.contains(["TrackingUrlTemplate","UrlCustomParameters"],e.property)});if(i.length)this.campaignSettingsView.handleApiErrors(i);else{var n=R.getBulkApiErrors(e.errors),a=n&&n[0]&&n[0].message?n[0].message:document.querySelector("#internalErrorMsg").value;window.App.views.alertCenter.showError(a)}return t}},{key:"getValue",value:function(){var e=this.campaignSettingsView.getData(),t=this.shoppingSettingsView.viewModel.toObject(),i=this.campaignTargetingView.getValue();return!!(e&&t&&i)&&{campaignSetting:e,shoppingSetting:t,campaignTargeting:i}}},{key:"scrollToErrors",value:function(){var e=this.$(".error, .is-error").filter(":visible");e=e.filter(function(t){return""!==e.eq(t).text()}),M.scrollAndCenter(e)}},{key:"remove",value:function(){this.campaignSettingsView&&this.campaignSettingsView.remove(),this.campaignTargetingView&&this.campaignTargetingView.remove(),this.shoppingSettingsView&&this.shoppingSettingsView.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}}]),t}(A.a.View),G=i("OvMV"),z=function(){function e(){Object(a.a)(this,e);var t=G.default.oldUISmartShoppingCampaignCreationScenario.create();this.activity=t.SSCCreationActivity.create()}return Object(r.a)(e,[{key:"signal",value:function(e){try{var t=JSON.stringify(e);this.activity.signal(t)}catch(i){console.log(i.stack)}}},{key:"sendEnterPageLog",value:function(){this.signal({messageType:"ENTER_PAGE"})}},{key:"sendCreateCampaignSucceededLog",value:function(e){this.signal({messageType:"CAMPAIGN_CREATED",campaignId:e})}},{key:"sendCreateCampaignErrorLog",value:function(e){var t=this;this.signal({messageType:"CAMPAIGN_CREATION_FAILED"}),e.forEach(function(e){t.signal({messageType:"CAMPAIGN_CREATION_ERROR",error:e})})}},{key:"sendValidationErrorLog",value:function(e){var t=this;this.signal({messageType:"CAMPAIGN_CREATION_VALIDATION_FAILED"}),Object.keys(e).forEach(function(i){var n=e[i];n&&n.length&&n.forEach(function(e){e&&t.signal({messageType:"CAMPAIGN_CREATION_VALIDATION_ERROR",property:i,error:e})})})}},{key:"sendCancelCreationLog",value:function(){this.signal({messageType:"CANCEL"})}},{key:"sendPageError",value:function(e){this.signal({messageType:"PAGE_ERROR",stack:e})}}]),e}();i.d(t,"a",function(){return q});var H=w.a&&w.a.Permissions&&w.a.Permissions.IsBSCSmartImportEnabled,W=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/shopping-campaign"),q=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,e),this.campaignId=e.campaignId,this.sscInstrumentation=new z}},{key:"render",value:function(){var e=this,t=y()(this.$el),i=H;return x.a.all([Object(h.d)(this.campaignId),Object(h.e)(i)]).then(function(i){var a=Object(n.a)(i,2),r=a[0],o=a[1];t(),e.cachedModel=u.a.extend(e.cachedModel,{campaignSettings:u.a.pick(r,["Name","BiddingScheme","Budget"]),shoppingSettings:u.a.extend({},u.a.result(r,"CampaignSettings",[{}])[0],{CampaignSubType:"ShoppingSmartAds"})}),e.campaign=r,e.campaignName=r.Name,e.$el.html(g()({i18n:W,isStoreNotValid:!1})).addClass("smart-shopping-settings"),e.renderSubViews(o,!0,r),e.advancedSettingsViewPlaceholder=e.$el.find(".advanced-settings"),e.advancedSettingsView=e.renderAdvancedSettingsView(r),e.advancedSettingsViewPlaceholder.empty().append(e.advancedSettingsView.$el)}).catch(function(t){e.sscInstrumentation.sendPageError(t.stack);var i=document.querySelector("#internalErrorMsg").value;throw window.App.views.alertCenter.showError(i),t}),this}},{key:"renderAdvancedSettingsView",value:function(e){return new v.default({campaignId:this.campaignId,level:"campaign",scenario:"smart-shopping-campaign",TimeZone:f.a.getAccountTimeZone(),model:e,nativeAdsCampaignBid:u.a.result(this.campaign,"NativeBidAdjustment")||0,campaignType:"shopping",collapseAdvancedSettings:this.isSponsoredCampaign}).render()}},{key:"validate",value:function(){return Object(l.a)(Object(s.a)(t.prototype),"getValue",this).call(this)&&this.advancedSettingsView.validate()}},{key:"getValue",value:function(){if(this.validate()){var e=Object(l.a)(Object(s.a)(t.prototype),"getValue",this).call(this),i=u.a.extend({},e.campaignSetting,e.shoppingSetting,e.campaignTargeting),n=this.advancedSettingsView.getValues();return i=u.a.extend(i,n.urlOptions)}return!1}},{key:"handleApiErrors",value:function(e){Object(l.a)(Object(s.a)(t.prototype),"handleApiErrors",this).call(this,e),e.entity&&e.entity.Id&&(this.advancedSettingsView.setData(e),this.advancedSettingsView.handleErrors(e))}},{key:"save",value:function(){var e=this,t=this.getValue();if(t){var i=y()();Object(h.a)({campaignId:this.campaignId,model:t}).then(function(t){i(),e.campaignName=t.Name,e.advancedSettingsView.setData(t),e.navigateToCampaignSummaryPage(!0)}).catch(function(t){i(),e.handleApiErrors(t),e.scrollToErrors()})}else this.scrollToErrors()}},{key:"cancel",value:function(){this.navigateToCampaignSummaryPage(!0)}},{key:"remove",value:function(){Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this),this.advancedSettingsView&&this.advancedSettingsView.remove()}},{key:"events",get:function(){return{"click .btn-save":"save","click .btn-cancel":"cancel"}}}]),t}(U)},XUdy:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'},a.syndicationTypeNote=t=function(n){this&&this.block,this&&this.attributes,i=i+'<div><li class="infomark spritedimage"></li><span>'+(null==(t=e(r.get(n),"app50028"))?"":t)+"</span></div>"},i=i+'<div role="radiogroup" aria-labelledby="advancedSettingAdDistributionDesc"><div class="form-control-static" id="advancedSettingAdDistributionDesc">'+n.escape(null==(t=r.get("AdvancedSetting_AdDistributionDesc"))?"":t)+'</div><div data-bind="visible: showSynd"><div class="radio"><label><input type="radio" name="SyndicationType" value="BingYahooAndSearchPartners" data-bind="checked: AdDistribution, enable: enableSynd()">',i+=o?n.escape(null==(t=r.get("SyndicationType_BingAOLYahooAndSearchPartners_WithInHousePromotion"))?"":t):n.escape(null==(t=r.get("SyndicationType_BingAOLYahooAndSearchPartners"))?"":t),i+="</label>",s&&(i+="<div>",a.syndicationTypeNote("NativeAdsAllSearchNetworksDisclaimer"),i+="</div>"),i=i+'</div><div class="radio"><label><input type="radio" name="SyndicationType" value="BingYahooOnly" data-bind="checked: AdDistribution, enable: enableSynd()">'+n.escape(null==(t=r.get("SyndicationType_BingAOLYahooOnly"))?"":t)+"</label>",s?(i+="<div>",a.syndicationTypeNote("NativeAdsBingYahooSearchDisclaimerNonUS"),i+="</div>"):a.syndicationTypeNote("SyndicationType_Note"),i=i+'</div><div class="radio"><label><input type="radio" name="SyndicationType" value="SearchPartnersOnly" data-bind="checked: AdDistribution, enable: enableSynd()">'+n.escape(null==(t=r.get("SyndicationType_BingAOLYahooSearchPartnersOnly"))?"":t)+"</label>",a.syndicationTypeNote("SyndicationType_Note"),i=i+'</div></div><div data-bind="visible: showInHouse"><div class="radio"><label><input type="radio" name="SyndicationType" value="InHousePromotion" data-bind="checked: AdDistribution">'+n.escape(null==(t=r.get("Network_Distribution_InHousePromotion"))?"":t)+"</label></div></div></div>",a.koValidationError("AdDistribution"),a.koValidationError("Medium")}.call(this,"appendLearnMoreLink"in r?r.appendLearnMoreLink:"undefined"!==typeof appendLearnMoreLink?appendLearnMoreLink:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isSponsoredCampaign"in r?r.isSponsoredCampaign:"undefined"!==typeof isSponsoredCampaign?isSponsoredCampaign:void 0,"nativeAdsAllowed"in r?r.nativeAdsAllowed:"undefined"!==typeof nativeAdsAllowed?nativeAdsAllowed:void 0),i}},Xhun:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={Mixed:"SearchAndContent",Search:"Search",Content:"Content",Audience:"Audience"}},"Xs1+":function(e,t,i){"use strict";i.d(t,"a",function(){return C});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("gRuz"),p=i.n(u),g=i("3ry4"),h=i.n(g),m=i("JEN6"),f=i.n(m),v=i("xoov"),b=i("Q3lO"),y=i("EjcH"),S=i("YK3D"),w=i.n(S),C=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=e.campaignId,n=void 0===i?null:i,a=e.adGroupId,r=void 0===a?null:a,l=e.isShoppingCampaign,c=void 0!==l&&l,d=e.customizedTemplates,u=void 0===d?{}:d,p=e.deps,g=void 0===p?{}:p,m=e.isForVNext,y=void 0!==m&&m,S=e.perfMarker,w=void 0===S?null:S,C=e.isAudienceCreationWorkflow,x=void 0!==C&&C,k=e.isFromAudienceDashboard,A=void 0!==k&&k;this.campaignId=n,this.adGroupId=r,Object(s.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{campaignType:b.types.audience,associationType:v.a.Aim,refreshOnInitialize:!0,shouldShowUiBlockOnRender:!1,customizedTemplates:u,deps:g,isNewUI:y,perfMarker:w,isAudienceCreationWorkflow:x,isFromAudienceDashboard:A,isAIMAudienceAssociationView:!0}),this.canExpandAssociation=!0,this.canExpandExclusion=!0,this.resetSelectionListBox(),c&&this.doubleListBoxViewModel.setSelectedCategory(f.a.Product),this.doubleListBoxViewModel.selectedBidType(h.a.TargetAndBid)}},{key:"cleanup",value:function(){this.remove()}},{key:"getAudienceCriterion",value:function(){var e=this,t=this.getLists(),i=t.associationList,n=t.exclusionList,a=function(t,i){var n=d.a.map(e.doubleListBoxViewModel.originalAssociations,function(e){return d.a.defaults({},e,{Criterion:e.AudienceCriterion})}),a=d.a.find(n,function(e){return t.Id===e.Criterion.AudienceId}),r=d.a.chain(a).result("Criterion").result("BidMultiplier",0).value(),o=d.a.chain(a).result("Criterion").result("CashbackAdjustment").value(),s=d.a.result(a,"Id",null),l=i?p.a.Active:p.a.Excluded;i&&d.a.result(a,"Status")===p.a.Paused&&(l=p.a.Paused);var c={BidType:e.doubleListBoxViewModel.selectedBidType(),Status:l,Id:s,Criterion:{AudienceId:t.Id,AudienceName:t.Name,AudienceType:t.Type,BidMultiplier:r,Type:"Audience"}};return w.a.Permissions.IsPersonalizedOffersEnabled&&(c.Criterion.CashbackPercent=o),c};return d.a.union(d.a.map(i,function(e){return a(e,!0)}),d.a.map(n,function(e){return a(e,!1)}))}},{key:"updateContext",value:function(e,t){this.campaignId=parseInt(e),this.adGroupId=parseInt(t)}},{key:"getSelectedEntity",value:function(){return{selectedAdgroupId:this.adGroupId,selectedCampaignId:this.campaignId,selectedAdgroupName:null,selectedCampaignName:null}}}]),t}(y.a)},"Y/tC":function(e,t,i){i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t+='<div class="location-recommendation-grid-container bingadsgrid"><div class="location-grid-container"></div><div class="placeholder-container"></div>',e&&(t+='<div class="grid-pager pager"></div>'),t+="</div>"}.call(this,"hasPagination"in i?i.hasPagination:"undefined"!==typeof hasPagination?hasPagination:void 0),t}},YDtG:function(e,t,i){var n,a;n=[i("ERkP"),i("aWzz"),i("UT4o")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=17)}([,,,function(t,i){t.exports=e},function(e,i){e.exports=t},,,,,function(e,t){e.exports=i},,,,,,,,function(e,t,i){e.exports=i(18)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MultiLineEllipsisText",{enumerable:!0,get:function(){return n.MultiLineEllipsisText}});var n=i(19)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiLineEllipsisText=void 0;var n=o(i(3)),a=o(i(9)),r=o(i(4));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e,i){var r,o,l,u,p,g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,l=c(t).call(this,e,i),r=!l||"object"!==s(l)&&"function"!==typeof l?d(o):l,u=d(r),p="processText",g=a.default.debounce(function(){if(r.hiddenTextRef&&r.hiddenTextRef.current){r.hiddenTextRef.current.style.maxWidth="".concat(r.containerRef.current.clientWidth,"px"),r.hiddenTextRef.current.style.position="absolute";var e=r.props.text.split(" "),t="".concat(e.join(" "));for(r.hiddenTextRef.current.innerText=t;r.hiddenTextRef.current.scrollHeight>r.containerRef.current.offsetHeight&&(e.pop(),t="".concat(e.join(" "),"..."),r.hiddenTextRef.current.innerText!==t);)r.hiddenTextRef.current.innerText=t;r.setState({processedText:"".concat(t)})}},100),p in u?Object.defineProperty(u,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):u[p]=g,r.state={processedText:""},r.hiddenTextRef=n.default.createRef(),r.containerRef=n.default.createRef(),r}var i,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n.default.PureComponent),i=t,(r=[{key:"componentDidMount",value:function(){this.processText()}},{key:"componentDidUpdate",value:function(){this.processText()}},{key:"render",value:function(){return n.default.createElement("div",{className:"multi-line-ellipsis-text-component ".concat(this.props.className),style:this.props.style,ref:this.containerRef},n.default.createElement("div",{className:"multi-line-hidden-text",style:{opacity:0,zIndex:-2},ref:this.hiddenTextRef}),n.default.createElement("div",{className:"multi-line-processed-text"},this.state.processedText))}}])&&l(i.prototype,r),o&&l(i,o),t}();t.MultiLineEllipsisText=p,p.propTypes={text:r.default.string,className:r.default.string,style:r.default.oneOfType([r.default.object,r.default.array])},p.defaultProps={className:void 0,style:void 0,text:""}}])}.apply(t,n))||(e.exports=a)},YJ6k:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'};var l=s.v4(),c=s.v4(),d=s.v4();i=i+'<div class="form-horizontal"><div class="form-group">\x3c!--ko if: showTargetLableAndTitle()--\x3e<h5 class="col-sm-2 control-label"><label id="location-target-header-title">'+n.escape(null==(t=r.get("Location_Target_Header_Title"))?"":t)+"</label>",a.popupHelp(o.Location,r.get("Location_Target_Header_Title"),r),i=i+'</h5>\x3c!-- /ko--\x3e<div class="col-sm-10" data-bind="visible: showUI()"><div class="alert alert-info form-group" data-bind="visible: showAdGroupOverrideInformation" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line1",r.getString("Target_Settings_Override_Location_Target")))?"":t)+'</div><div class="alert-info-inline indent">'+n.escape(null==(t=r.getString("Target_Settings_Override_Information_Line2",r.getString("Target_Settings_Override_Location_Target")))?"":t)+'&nbsp;<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=r.getString("Learn_more_link_text"))?"":t)+'</a></div></div>\x3c!--ko if: showCampaignSettingsToggleView()--\x3e<div class="form-control-static"><label class="type-normal" id="location-use-campaign-settings">'+n.escape(null==(t=r.get("CreationWorkflowsInheritanceFlagLabel"))?"":t)+'</label><div class="toggle-campaign-settings-switch" data-bind="checked: useCampaignSettings"></div></div>\x3c!-- /ko--\x3e\x3c!--ko if: !bidMode()--\x3e<div role="radiogroup" aria-labelledby="location-target-header-title" aria-describedby="location-target-title">\x3c!--ko if: !showTargetOptions()--\x3e<div class="form-control-static" id="location-target-title">'+n.escape(null==(t=r.get("Location_Target_AdGroup_Title"))?"":t)+'</div>\x3c!-- /ko--\x3e\x3c!--ko if: showTargetOptions()--\x3e\x3c!--ko if: showTargetLableAndTitle()--\x3e<div class="form-control-static" id="location-target-title">'+n.escape(null==(t=r.get("Location_Target_Title"))?"":t)+'</div>\x3c!-- /ko--\x3e<div class="radio"><label><input type="radio" name="targetOptions" value="bundle" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;bundle&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio"><span data-bind="text: languageBundleString"></span></label></div>\x3c!--ko if: showEverywhereOption--\x3e<div class="radio"><label><input class="target-every-where" type="radio" name="targetOptions" value="everywhere" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;everywhere&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio">'+n.escape(null==(t=r.get("Location_Target_Options_Everywhere"))?"":t)+'</label></div>\x3c!-- /ko--\x3e<div class="radio"><label><input type="radio" name="targetOptions" value="specific" data-bind="checked: targetOption, attr:{&quot;aria-checked&quot;: targetOption() === &quot;specific&quot; ? &quot;true&quot; : &quot;false&quot;}" role="radio">'+n.escape(null==(t=r.get("Location_Target_Options_Specific"))?"":t)+'</label></div>\x3c!-- /ko--\x3e</div>\x3c!-- /ko--\x3e<div data-bind="visible: bidMode()"><div data-bind="css: {&quot;form-control-static&quot;: bidModeKeepTopMargin()}">',e&&(i+='<div class="alert alert-recommendation" data-bind="visible: showLocationRecommendationBanner" style="line-height: 15px; border: 1px solid;"><div class="alert-info-inline view-location-recommendations" style="display: flex;flex-direction: row;"><div style="display: inline-flex;flex-direction: column;padding-right: 10px;"><div style="flex-grow: 1"></div><span class="recommendation-light-bulb"></span><div style="flex-grow: 1"></div></div><span data-bind="html: locationRecommendationBanner"></span></div></div>'),i=i+'\x3c!--ko if: gridNoData--\x3e<span class="location-bid-grid-message" data-bind="text: noDataMessage"></span>\x3c!-- /ko--\x3e<a class="change-mode-link clickable" tabindex="0" data-bind="visible: editLinkVisible()">'+n.escape(null==(t=r.get("LocationTargeting_EditLocationTargets"))?"":t)+'</a><div class="location-target-bid-container"></div><div class="col-sm-offset-0">',a.koValidationError("conflictError",c),i+='</div></div></div></div></div><div data-bind="visible: !bidMode() &amp;&amp; showUI()"><div class="form-group" data-bind="visible: searchBoxVisible()">\x3c!--ko if: showTargetLableAndTitle()--\x3e<h5 class="col-sm-2 control-label"></h5>\x3c!-- /ko--\x3e<div class="location-manage col-sm-10"></div><div class="form-group"></div></div><div class="col-sm-offset-2">',a.koValidationError("conflictError",d),i=i+'</div><div data-bind="visible: !targetEverywhere() &amp;&amp; !hideAudience"><div class="location-target-physical-intent"></div></div>\x3c!--ko if: scenario !== "creation-workflow" && scenario !== \'signup-creation-workflow\' && scenario !== "audience-dashboard" && scenario !== \'smart-campaign\' && scenario !== \'smart-shopping-campaign\'--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"></h5><button class="btn btn-primary location-target-done" type="button">'+n.escape(null==(t=r.get("Button_Done"))?"":t)+'</button><button class="btn btn-default location-target-cancel" type="button">'+n.escape(null==(t=r.get("Button_Cancel"))?"":t)+'</button></div>\x3c!-- /ko--\x3e</div><div class="form-group" data-bind="visible: errors().length &gt; 0"><div class="col-sm-offset-2">',a.koErrors(l),i+="</div></div></div>"}.call(this,"hasLocationRecommendations"in r?r.hasLocationRecommendations:"undefined"!==typeof hasLocationRecommendations?hasLocationRecommendations:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"popupIds"in r?r.popupIds:"undefined"!==typeof popupIds?popupIds:void 0,"uuid"in r?r.uuid:"undefined"!==typeof uuid?uuid:void 0),i}},YKsG:function(e,t,i){"use strict";i.r(t),i.d(t,"defaultBid",function(){return s}),i.d(t,"defaultBidForShoppingCampaign",function(){return l});var n=i("UT4o"),a=i.n(n),r=i("AQBV"),o=i.n(r);function s(){return"USD"===o.a.get("AccountCurrencyCode")?1:a.a.result(o.a.get("KeywordBidRange"),"FloorValue")}function l(){return"USD"===o.a.get("AccountCurrencyCode")?1:a.a.result(o.a.get("ProductGroupBidRange"),"FloorValue")}},YMJb:function(e,t,i){"use strict";var n=i("nN5v"),a=i("23d6"),r=i("Pb1Y"),o=i("Vwpy"),s=function(e){function t(){return Object(n.a)(this,t),Object(a.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(o.a)(t,e),t}(i("+Ki2").a);t.a=s},YSIl:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("2pgG"),u=["AdScheduleView","AlertHelper","AudienceAdgroupSettingsWizard","BaseTargetUpdateView","BiddableAdGroupCriterion","BiddableCampaignCriterion","BulkAdapter","CampaignAdgroupSelectorControl","CampaignCacheManager","CampaignSchema","ChangeStatusModel","ChangeStatusView","ChangeUrlOptionsModel","ChangeUrlOptionsView","Columns","DownloadView","InlineBudgetEditor","InlineSharedBudgetEditor","LegacyColumns","LegacySelectedColumns","LocationMap","LocationTargets","ODataConverter","Picker","SelectedColumns","appendPeriodOverPeriodFields","bidAdjustmentBulkEditPlugin","campaignStatus","config","constants","criterionLoader","decimal","editAdGroupPage","editCampaignPage","editShoppingCampaignPage","editSmartShoppingCampaignPage","edmCampaign","eventDispatcher","fetchPreferenceConfig","filterOptionsFromSchema","filterPlugin","filterStatePlugin","getAccountTimeZoneText","getTimeZoneForDateRangeText","handleSortChange","httpUtils","i18n","i18nErrors","inlineChartPlugin","isDeprecatedLocation","jsDataCampaign","locationConstants","locationTargetConverter","locationTargetStatusPopup","logger","odataOptions","pageContext","preferencesService","quickFilterPlugin","recommendationRepository","removeBulkEditPlugin","router","s$AdGroupCriterion","s$CampaignCriterion","s$NegativeAdGroupCriterion","s$NegativeCampaignCriterion","s$i18n","segmentPreference","sessionStorage","state","targetConstants","targetTypes","unitMaps","updateFilterSchemaForPilotFeatures","fetchPaginationConfig","segmentTimeChecker"],p=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"initialize",value:function(t){var i=t.deps;c.a.extend(e,i)}},{key:"isInitialized",value:function(){var t=[];if(c.a.each(u,function(i){c.a.isUndefined(e[i])&&t.push(i)}),t.length>0)throw new Error("Dependent modules ".concat(t.toString()," are not injected."));return!0}}]),e}(),g=i("wSn+"),h=i.n(g),m=function(e){function t(e){var i,a=e.i18n,s=e.gridType;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"AdGroupName",type:"string",property:["AdGroup/Id","AdGroup/Name"],sortable:"AdGroup/Name",title:"ColumnName_AdGroup",bodyClasses:["col-AdGroupName"],i18n:a}))).i18n=a,i.gridType=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value;if(c.a.isNull(t))return h()({name:""});var i=p.state.get("customer_id"),n=p.state.get("account_id"),a="/campaign/vnext/".concat(this.gridType,"?aid=").concat(n,"&cid=").concat(i,"&campaignId=").concat(t.cmpid,"&adGroupId=").concat(t.adgid);return h()({link:a,name:t.name,campaignId:t.cmpid,adgroupId:t.adgid,airaLabel:this.i18n.getString("Click to scope to ad group {{adGroupName}}",{adGroupName:t.name})})}},{key:"property",get:function(){return{get:function(e){var t=e.Campaign,i=e.AdGroup;return c.a.isUndefined(t)||c.a.isUndefined(i)?null:{cmpid:t.Id,adgid:i.Id,name:i.Name}},key:this.config.property}}}]),t}(d.a),f=function(e){function t(e){var i=e.i18n;return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).call(this,{name:"AdGroupId",property:"AdGroup/Id",title:"ColumnName_AdgroupID",sortable:"AdGroup/Id",type:"number",i18n:i}))}return Object(s.a)(t,e),t}(d.a),v=i("PS1K"),b=i("q+mR"),y=i("MTPe"),S=i.n(y),w={AllSettings:0,Locations:1,AdSchedule:2,Devices:3},C={Computers:"Computers",Tablets:"Tablets",Smartphones:"Smartphones"},x={Account:0,Campaign:1,AdGroup:2},k=["account","campaign","adgroup"],A={Campaign:0,AdGroup:1},T=["campaign","adgroup"],_=[{name:"allSettings",text:"TargetingSettings_All",value:w.AllSettings,routeParams:{}},{name:"locations",text:"TargetingSettings_Locations",value:w.Locations,routeParams:{setting:"locations"}},{name:"adSchedule",text:"TargetingSettings_AdSchedule",value:w.AdSchedule,routeParams:{setting:"adschedule"}},{name:"devices",text:"TargetingSettings_Devices",value:w.Devices,routeParams:{setting:"devices"}}],E=function(e){function t(e){var i,a=e.i18n,s=e.level,l=e.parentView,c=e.customValidators;Object(n.a)(this,t);var d=a.getString("TargetingSettings_Grid_Column_BidAdj"),u=p.isDeprecatedLocation;return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"BidAdj",title:"TargetingSettings_Grid_Column_BidAdj",property:s===A.AdGroup?"Model.BiddableAdGroupCriterion/CriterionBid":"Model.BiddableCampaignCriterion/CriterionBid",sortable:"CriterionBid",type:"number",format:"percentage",helpId:"pop_BA_Settings_BidAdjustment",i18n:a,parentView:l,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:d}),enableEdit:function(e){return!u(e.Criterion)&&(e.Campaign&&"ShoppingSmartAds"!==e.Campaign.CampaignSubType)}}))).i18n=a,i.customValidators=c,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"onPrompt",value:function(e){var t=this,i=e.item,n=e.newPosition;if("Campaign"===i.LevelOfDetails)this.parentView.trigger("inlineEdit",i);else{var a=new b.BidAdjustmentView({value:i.CriterionBid.Multiplier,i18n:this.i18n,customValidators:c.a.isFunction(this.customValidators)?this.customValidators(i.Criterion):this.customValidators});new v.a({editorView:a,cellPosition:n,tableContainer:".bingadsgrid",className:"grid-popupeditor",parentContainerSelector:".grid-and-disclaim-container"}).render().on("close",function(e){t.parentView.grid.gridView.trigger("didEdit",e,i,"BidAdjustments")})}}},{key:"template",value:function(e){var t=e.value;return c.a.isNull(t)?S()({}):S()({multiplier:t.multiplier,inherited:t.inherited})}},{key:"property",get:function(){var e=this;return{get:function(t){var i=t.CriterionBid,n=t.LevelOfDetails,a=t.Campaign;if(c.a.isUndefined(i))return null;var r="Campaign"===n,o="";if(a&&"ShoppingSmartAds"===a.CampaignSubType)o=e.i18n.getString("TargetingSettings_Grid_Column_BidAdj_Automatic");else{var s=e.formatter(Math.abs(i.Multiplier)/100);o=i.Multiplier<0?"- ".concat(s):"+ ".concat(s)}return{multiplier:o,inherited:r}},key:this.config.property}}}]),t}(d.a),I=i("b3ik"),O=i.n(I),P=function(e){function t(e){var i,a=e.i18n,s=e.gridType;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"CampaignName",type:"string",property:c.a.compact(["Campaign/Id","Campaign/Name","Campaign/BaseCampaignName","Campaign/CampaignType","Campaign/Status"]),sortable:"Campaign/Name",title:"ColumnName_Campaign",bodyClasses:["col-CampaignName"],i18n:a}))).i18n=a,i.gridType=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value;if(c.a.isNull(t))return O()({name:""});var i=p.state.get("customer_id"),n=p.state.get("account_id"),a="Smart"===t.CampaignType,r="";r=a?"InProgress"===t.Status?"/campaign/Smart?cid=".concat(i,"#/CreateCampaign/").concat(t.cmpid):"/campaign/Smart?cid=".concat(i,"#/campaign/").concat(t.cmpid):"/campaign/vnext/".concat(this.gridType,"?aid=").concat(n,"&cid=").concat(i,"&campaignId=").concat(t.cmpid);var o=this.i18n.getString("Click to scope to campaign {{campaignName}}",{campaignName:t.name}),s="";return t.baseCampaignName&&(o=this.i18n.getString("Click to scope to experiment {{experimentName}}",{experimentName:t.name}),s="experiment-name"),O()({link:r,name:t.name,baseCampaignName:t.baseCampaignName,campaignId:t.cmpid,skipScopeNavigation:a,ariaLabel:o,className:s})}},{key:"property",get:function(){return{get:function(e){var t=e.Campaign;return t?{cmpid:t.Id,name:t.Name,baseCampaignName:t.BaseCampaignName,Status:t.Status,CampaignType:t.CampaignType}:null},key:this.config.property}}}]),t}(d.a),M=function(e){function t(e){var i=e.i18n;return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).call(this,{name:"CampaignId",property:"Campaign/Id",title:"ColumnName_CampaignID",sortable:"Campaign/Id",type:"number",i18n:i}))}return Object(s.a)(t,e),t}(d.a),j=function(e){function t(e){var i=e.i18n;return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).call(this,{name:"CampaignType",property:"Campaign/CampaignType",sortable:"Campaign/CampaignType",title:"ColumnName_CampaignType",i18n:i}))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"property",get:function(){return{get:function(e){var t=e.Campaign;return t?p.i18n.getString("CampaignType_".concat(t.CampaignType)):""},key:this.config.property}}}]),t}(d.a),L=function(e){function t(e){var i=e.i18n;return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).call(this,{name:"Level",property:"LevelOfDetails",sortable:"LevelOfDetails",title:"TargetingSettings_Grid_Column_Level",i18n:i}))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"property",get:function(){return{get:function(e){var t=e.LevelOfDetails;return t?p.i18n.getString("TargetingSettings_Grid_TargetLevel_".concat(t)):""},key:this.config.property}}}]),t}(d.a),D=i("5iHu"),R=i.n(D),N=i("a28/"),V=i("U72C");function B(e,t){var i=x.Account;return e>0&&(i=t>0?x.AdGroup:x.Campaign),i}function F(e){return e>0?A.AdGroup:parseInt(Object(V.get)("vnext_settings_level"),10)||A.Campaign}function U(e){Object(V.set)("vnext_settings_level",e,void 0,"/")}function G(e){var t=e.model.get("scope"),i=e.model.get("level");return t===x.AdGroup||i===A.AdGroup?"AdGroupCriterion":"CampaignCriterion"}function z(e,t){var i=Math.round(100*e)/100,n=Math.round(100*t)/100;return p.i18n.getString("CustomLocationText").replace("{0}",i).replace("{1}",n)}function H(e){if(!c.a.isUndefined(e.Criterion))switch(e.Criterion.Type){case"Location":return p.unitMaps.areaTargetNameTypeComboGenerator(e.Criterion.Name,e.Criterion.LocationType,e.Criterion.CountryCode).replace(" (N/A)","");case"Radius":var t=e.Criterion.Name;return c.a.isEmpty(t)&&(t=z(e.Criterion.Latitude,e.Criterion.Longitude)),p.unitMaps.radiusTargetNameTypeComboGenerator(e.Criterion.Radius,e.Criterion.RadiusUnit,t);default:return e.Criterion.Name}return e.IsSegmentRow?e.SegmentValue:c.a.isUndefined(e.$total)?"":e.$total.text}function W(e,t){if(c.a.isUndefined(t.Criterion))return t.IsSegmentRow?t.SegmentValue:t.$total.text;var i=t.Criterion,n=i.Day,a=i.FromHour,r=i.FromMinute,o=i.ToHour,s=i.ToMinute,l={ZERO:0,FIFTEEN:15,THIRTY:30,FORTY_FIVE:45},d=e.getDay(n.toLowerCase().slice(0,3)),u=Number(a),p=Number(o),g=e.formatDate(e.parseDate("".concat(u,":").concat(l[r]),{raw:"HH:mm"}),{skeleton:"hhm"}),h=e.formatDate(e.parseDate("".concat(24===p?0:p,":").concat(l[s]),{raw:"HH:mm"}),{skeleton:"hhm"}),m="".concat(g," - ").concat(h);return 0===u&&"ZERO"===r&&24===p&&"ZERO"===s&&(m=e.getString("All_day")),"".concat(d,", ").concat(m)}function q(e,t){return c.a.isUndefined(t.Criterion)?t.IsSegmentRow?t.SegmentValue:t.$total.text:e.getString("TargetingSettings_Devices_".concat(t.Criterion.DeviceName))}var $=function(e){var t=-100,i=900,n=function(e){return e<0&&e>=t||e>=0&&e<=i},a="TargetingSettings_Device_BidAdj_Error_1";return p.pageContext.Permissions.IsOriginalDeviceTargetingEnabled&&(t=-90,i=300,"Smartphones"===e.DeviceName&&(n=function(e){return e<0&&(e>=t||-100===e)||e>=0&&e<=i},a="TargetingSettings_Device_BidAdj_Error_2")),function(e){return{BidMultiplier:{isValid:n,message:function(){return e.getString(a,{min:Math.abs(t),max:Math.abs(i),specialValue:Math.abs(-100)})}}}}},K=i("cQRH"),J=i.n(K),Z=function(e){function t(e){var i,a=e.i18n,s=e.isExcludeLocation,l=void 0===s?"":s;Object(n.a)(this,t);var c=a.getString("TargetingSettings_Grid_Locations_Column_Location");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Location",title:"TargetingSettings_Grid_Locations_Column_Location",property:"Criterion",sortable:"Criterion/Name",type:"string",helpId:"pop_BA_Settings_Location_Location",i18n:a,bodyClasses:["grid-column-Location"],helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:c})}))).i18n=a,i.gridType=l?"excluded-locations":"locations",i.deprecatedTextMapping={PendingDeprecation:{warning:a.getString("Location_Target_Pending_Deprecation"),title:a.getString("Location_Target_Location_Pending_Deprecation_Title"),text:a.getString("Location_Target_Location_Pending_Deprecation_Text")},Deprecated:{warning:a.getString("Location_Target_Deprecated"),title:a.getString("Location_Target_Location_Deprecated_Title"),text:a.getString("Location_Target_Location_Deprecated_Text")}},i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i={name:t.name,inherited:t.inherited,showDeprecatedWarning:t.showDeprecatedWarning,deprecatedText:t.deprecatedText};return J()(i)}},{key:"property",get:function(){var e=this;return{get:function(t){var i=t.LevelOfDetails,n=t.Criterion,a=void 0===n?{}:n,r=t.VirtualId,o="Campaign"===i,s=H(t),l=p.locationTargetStatusPopup,c=p.isDeprecatedLocation,d=p.locationConstants,u=c(a),g={};if(u){g=d.deprecatedTextMapping[a.LocationStatus];var h="#".concat(r," .location-cell-status"),m=R()(".".concat(e.gridType,"-view"));m.on("mouseover",h,function(e){l(e,g,h)}),m.on("click",h,function(e){l(e,g,h)})}return{name:s,inherited:o,showDeprecatedWarning:u,deprecatedText:g&&g.warning}},key:this.config.property}}}]),t}(d.a),Y=i("2ndk"),Q=i("muKe"),X=i("htFP"),ee=i.n(X),te=(Q.DeterministicView,i("fw+O")),ie=i("5p5O"),ne=i("JsuJ"),ae={Clicks:"Page_CampaignGrids_Clicks",Impressions:"Page_CampaignGrids_Impr",CTR:"Page_CampaignGrids_CTR",AverageCPC:"Page_CampaignGrids_AvgCPC",AveragePosition:"Page_CampaignGrids_AvgPosition",Spend:"Page_CampaignGrids_Spend",AverageCPM:"Page_CampaignGrids_AvgCPM",CPA:"Page_CampaignGrids_CPA",Conversions:"Page_CampaignGrids_Conv",ConversionRate:"Page_CampaignGrids_ConvRate",AdvertiserReportedRevenue:"Page_CampaignGrids_Revenue",RevenueOnAdSpend:"Page_CampaignGrids_ReturnAdSpend",ViewThroughConversions:"pop_BA_CampaignGrids_ViewThrough",ViewThroughConversionsRevenue:"pop_BA_Reporting_Clarity_ViewThroughConvRevenue",ViewThroughConversionsCPA:"pop_BA_Reporting_Clarity_ViewThroughConvCPA",ViewThroughConversionsReturnOnAdSpend:"pop_BA_Reporting_Clarity_ViewThroughConvReturnOnAdSpend",ViewThroughConversionsRate:"pop_BA_Reporting_Clarity_ViewThroughConvRate",AllConversionCPA:"pop_BA_CampaignGrids_AllConvCPA",AllConversions:"pop_BA_CampaignGrids_AllConv",AllConversionAdvertiserReportedRevenue:"pop_BA_CampaignGrids_AllConvRevenue",AllConversionRevenueOnAdSpend:"pop_BA_CampaignGrids_AllConvROAS",AllConversionRate:"pop_BA_CampaignGrids_AllConvRate"},re=function(){function e(t){Object(n.a)(this,e);var i=t.selfColumns,a=t.scope,r=t.level,o=t.parentView,s=t.isExcludeLocation,l=void 0!==s&&s,d=p.pageContext.Permissions,u=d.IsViewThroughConversionEnabled,g=d.IsAvgPositionDeprecationPhase1Enabled,h=d.IsAvgPositionDeprecationPhase2Enabled,v=d.IsPersonalizedOffersEnabled,b=d.IsPersonalizedOffersV3Enabled,y=d.IsViewThroughConversionsRevenueEnabled,S=[],w=[];if(this.scope=a,this.level=r,this.parentView=o,c.a.isArray(i)&&i.length>0&&(S=[].concat(i)),a!==x.AdGroup&&(a!==x.Campaign&&(S.push(P),w.push(j),w.push(M)),r===A.AdGroup&&(S.push(m),w.push(f))),r===A.AdGroup&&w.push(L),!l&&(S.push(E),v&&!b)){var C=0===r?"Campaign":"AdGroup",k=Object(ne.j)({criterionLevel:C,criterionCashbackUpdater:function(e,t,i){t.CriterionCashback["@odata.type"]="Model.CashbackAdjustment",e.grid.gridView.trigger("didEdit",i,t,"CashbackPercent")},criterionCashbackOverrideUpdater:function(e,t){e.grid.gridView.trigger("inlineEdit",t)},modelName:"Model.Biddable".concat(C,"Criterion"),decimal:p.decimal});S.push(k)}S=c.a.compact(S),this.builder=(new te.ColumnsConfigBuilder).addCategory("Attributes",function(e){return e.addColumns(c.a.union(S,w))}),l||this.builder.addCategory("Performance",function(e){return e.addColumns(c.a.compact([ie.C,ie.H,ie.z,ie.v,ie.M,!h&&ie.x,g&&ie.O,g&&ie.f,ie.w]))}).addConversionsCategory({IsViewThroughConversionEnabled:u,IsViewThroughConversionsRevenueEnabled:y}),this.builder.setLockedColumns(S).setSelectedColumns(c.a.compact(S.concat(c.a.compact([ie.C,ie.H,ie.z,ie.v,!g&&!h&&ie.x,g&&ie.O,g&&ie.f,ie.M]))))}return Object(a.a)(e,[{key:"getColumnsConfig",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=c.a.findWhere(_,{name:e}).routeParams.setting;return this.builder.getColumnsConfig({i18n:p.i18n,gridType:n,isExcludeLocation:i,scope:this.scope,level:this.level,parentView:this.parentView,view:this.parentView,customValidators:t,helpId:function(e){return c.a.isUndefined(ae[e])?"Page_CampaignGrids_".concat(e):ae[e]},isForVNext:!0})}},{key:"getColumnChooserConfig",value:function(){var e=["Id"];return this.level===A.AdGroup&&Array.prototype.push.apply(e,["AdGroupId","LevelOfDetails"]),c.a.defaults(this.builder.getColumnChooserConfig({mandatoryProperties:e,i18n:p.i18n,patchQuery:!0,Columns:p.Columns,SelectedColumns:p.SelectedColumns,LegacyColumns:p.LegacyColumns,LegacySelectedColumns:p.LegacySelectedColumns}),{isForVNext:!0})}}]),e}(),oe=i("eRoi"),se=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){var t=e.level;return new p.Picker({items:this.items,selectedIndex:t,className:"btn-group"})}},{key:"isSmartShoppingCampaign",value:function(){var e=p.pageContext,t=e&&e.CurrentCampaign&&12===e.CurrentCampaign.CampaignSubType;return t}},{key:"getInitialLevel",value:function(e){return this.isSmartShoppingCampaign()?A.Campaign:e}},{key:"initialize",value:function(e){var i=this,n=e.level,a=this.isSmartShoppingCampaign();this.items=[{name:"CampaignLevel",value:A.Campaign,text:p.i18n.getString("TargetingSettings_ViewBy_CampaignLevel")},a?null:{name:"AdGroupLevel",value:A.AdGroup,text:p.i18n.getString("TargetingSettings_ViewBy_AdGroupLevel")}].filter(function(e){return null!=e});var r=this.getInitialLevel(n);Object(Y.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{level:r}),U(r),this.view.on("select",function(e){i.setState({level:e.value})})}},{key:"getState",value:function(){return this.view.viewModel}},{key:"setState",value:function(e){var t=e.level;return U(t),this.view.viewModel.selectedIndex(t),this.trigger("levelChanged",{level:t}),this}},{key:"className",get:function(){return"targeting-settings-level-selector"}}]),t}(oe.DeterministicWrapperView),le=i("XMQU"),ce=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){var t=e.items;return new le.PillControl({items:t})}},{key:"initialize",value:function(e){var i=this,n=e.items;this.items=c.a.map(n,function(e){return{name:e.name,value:e.value,text:p.i18n.getString(e.text)}}),Object(Y.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{items:this.items}),this.view.on("select",function(e){i.trigger("selectionChanged",{selected:e.item.name})})}},{key:"renderTrunk",value:function(){return Object(Y.a)(Object(o.a)(t.prototype),"renderTrunk",this).call(this),this.$(".pill-control").removeClass("nav-pills").addClass("btn-group"),this.$(".pill-control li a").addClass("btn"),this}},{key:"getState",value:function(){return this.view.viewModel}},{key:"setState",value:function(e){var t=e.selected,i=c.a.find(this.items,function(e){return e.name===t});return i?this.view.viewModel.selectedIndex(i.value):this.view.viewModel.selectedIndex(0),this}},{key:"className",get:function(){return"targeting-settings-navbar"}}]),t}(oe.DeterministicWrapperView),de=i("qdua"),ue=i.n(de),pe=(Q.DeterministicView,i("HVWX").NavigationContainer,i("HR8k")),ge=i.n(pe),he=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=B(e.campaignId,e.adgroupId),a=F(e.adgroupId);Object(Y.a)(Object(o.a)(t.prototype),"setState",this).call(this,c.a.extend(e,{scope:n,level:a})),this.model.on("change",function(e){return i.onModelChanged(e)})}},{key:"setState",value:function(e){var i=B(e.campaignId,e.adgroupId),n=F(e.adgroupId);Object(Y.a)(Object(o.a)(t.prototype),"setState",this).call(this,c.a.extend(e,{scope:i,level:n}))}},{key:"onModelChanged",value:function(){}},{key:"remove",value:function(){this.model.off("change"),Object(Y.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"className",get:function(){return"settings-view"}},{key:"template",get:function(){return ge.a}}]),t}(Q.DeterministicView),me=i("ZLaj");function fe(e){var t=e.setting,i=e.level;return{mapOnlyBaseProperty:!1,entity:function(){var e=["Campaign/Id","Campaign/Name","Campaign/CampaignType","AdGroup/Id","AdGroup/Name","CriterionBid","LevelOfDetails"];t===w.Devices?e=e.concat(["Criterion/DeviceCriterion/DeviceName"]):t===w.AdSchedule?e=e.concat(["Criterion/DayTimeCriterion/Day"]):t===w.Locations?e=e.concat(["Criterion/Webpage/Parameter/CriterionName"]):t===w.AllSettings&&(e=e.concat(["Campaign/Status"])),e=e.concat(["Campaign/IsExperiment"]);var n=i===A.AdGroup?p.BiddableAdGroupCriterion:p.BiddableCampaignCriterion,a=p.updateFilterSchemaForPilotFeatures(n);a.properties.AdGroup&&c.a.extend(a.properties.AdGroup.schema.properties.Id,{filterable:!0});var r=p.filterOptionsFromSchema(a,!0),o=/^PerformanceMetrics\//;r.fields=c.a.filter(r.fields,function(t){return c.a.contains(e,t.property)||o.test(t.property)}),r=p.appendPeriodOverPeriodFields(r);var s=c.a.findWhere(r.fields,{property:"Criterion/DeviceCriterion/DeviceName"});c.a.isEmpty(s)||(s.enum=c.a.map(s.enum,function(e){return e.replace("Enum.DeviceName'","").replace("'","")}),s.localized=c.a.object(c.a.map(c.a.keys(s.localized),function(e){return e.replace("Enum.DeviceName'","").replace("'","")}),c.a.values(s.localized)));var l=c.a.findWhere(r.fields,{property:"LevelOfDetails"});c.a.isEmpty(l)||(l.enum=c.a.map(l.enum,function(e){return e.replace("Enum.LevelOfDetails'","").replace("'","")}),l.localized=c.a.object(c.a.map(c.a.keys(l.localized),function(e){return e.replace("Enum.LevelOfDetails'","").replace("'","")}),c.a.values(l.localized)));var d=c.a.findIndex(r.fields,function(e){return"CriterionName"===e.name});-1!==d&&(t===w.Locations&&(r.fields[d].property="Criterion/Name"));var u=c.a.find(r.fields,function(e){return"Campaign/Id"===e.property});c.a.isEmpty(u)||(u.title=p.i18n.getString("FilterColumn_CampaignID"),u.name="CampaignId");var g=c.a.find(r.fields,function(e){return"Campaign/Name"===e.property});c.a.isEmpty(g)||(g.title=p.i18n.getString("FilterColumn_CampaignName"),g.name="CampaignName");var h=c.a.find(r.fields,function(e){return"AdGroup/Id"===e.property});c.a.isEmpty(h)||(h.title=p.i18n.getString("FilterColumn_AdgroupID"),h.name="AdGroupId");var m=c.a.find(r.fields,function(e){return"AdGroup/Name"===e.property});return c.a.isEmpty(m)||(m.title=p.i18n.getString("FilterColumn_AdGroupName"),m.name="AdGroupName"),r}(),options:function(){var e={odata:{custom:{}}};return c.a.extendOwn(e.odata.custom,{Criterion:{isof:function(e){return"isof(Criterion, ".concat(e,")")}},"Criterion/DeviceCriterion/DeviceName":function(e,t){var i={};i["$".concat(e)]=t;var n={"Criterion/Model.DeviceCriterion/DeviceName":i};return p.ODataConverter.convert(n).replace("Model/DeviceCriterion","Model.DeviceCriterion")},"Criterion/DayTimeCriterion/Day":function(e,t){var i={};i["$".concat(e)]=t;var n={"Criterion/Model.DayTimeCriterion/Day":i};return p.ODataConverter.convert(n).replace("Model/DayTimeCriterion","Model.DayTimeCriterion")},"Campaign/IsExperiment":{eq:function(e){return"Campaign/ExperimentId ".concat(e?"gt":"le"," 0")}}}),e}()}}var ve=i("IPHp").helpers.toolbarRow;function be(e){var t=p.state.get("$ReportEmailRule");return t&&t.Entity===e?(p.state.unset("$ReportEmailRule"),t):null}var ye=function(e,t){var i=e.model.get("setting"),n=e.model.get("scope"),a=e.model.get("level"),r=n===x.AdGroup||a===A.AdGroup?"AdGroupCriterion":"CampaignCriterion";return{pagination:{pageSize:20,availablePageSizes:[20,50,100,200],enableRandomPage:!1,pageNumberLabelText:p.i18n.getString("Grid_Page_Colon"),pageSizeText:p.i18n.getString("Grid_ShowRows"),totalPageCountText:p.i18n.getString("Grid_PageOf")},uiBlocker:{el:R()("#child-page")},placeholder:{viewRoot:e.$el,container:".noresult-container",text:p.i18n.getString("Grid_NoFilteredRecords"),filteredContainer:".noresult-container",filteredEmptyText:p.i18n.getString("Grid_NoFilteredRecords")},columnChooser:t,inlineDownload:{DownloadView:p.DownloadView,i18n:p.i18n,s$i18n:p.s$i18n,isAvailable:!0,schema:p["s$".concat(r)],gridId:"",ReportEmailRule:be(r)},filterState:c.a.defaults({container:e.$(".filter-bar")},fe({setting:i,level:a})),dateFilter:{isOdataActionSource:!0,comparisonColumns:["PeriodPerformanceMetrics","PerformanceMetricsChange","PerformanceMetricsChangePercentage"]},popColumns:{i18n:p.i18n},editable:{i18n:p.i18n}}};function Se(){return{tableClasses:["table","table-bordered"],rows:{headRows:[ve("lower-toolbar"),Object(me.crossPageSelectHeadRow)(),"column-header-rows"]},scrolling:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sticky,i=void 0!==t&&t,n=e.virtualized,a={virtualized:void 0!==n&&n};return i&&(a.header={type:"sticky",offset:function(){return R()("nav.navbar-default.navbar-fixed-top").height()}}),a}({sticky:!0,virtualized:!0}),selection:c.a.extend({enabled:!0,headClasses:["text-center"],bodyClasses:["text-center"]},e)};var e}var we=i("/xyZ"),Ce=i.n(we),xe=function(){function e(t){var i,a=t.deps;Object(n.a)(this,e);var r=(i={},Object(N.a)(i,x.Account,p.edmCampaign.currentAccount),Object(N.a)(i,x.Campaign,p.edmCampaign.currentCampaign),Object(N.a)(i,x.AdGroup,p.edmCampaign.currentAdGroup),i);this.resource=c.a.result(r,a.scope),a.level===A.AdGroup?(this.jsDataResource=p.jsDataCampaign.AdGroupCriterion,this.entities=this.resource.AdGroupCriterions):(this.jsDataResource=p.jsDataCampaign.CampaignCriterion,this.entities=this.resource.CampaignCriterions),this.jsDataResource=c.a.defaults({idAttribute:"VirtualId"},this.jsDataResource),this.scope=a.scope,this.level=a.level,p.edmCampaign.jsdata.store.registerAdapter("bulk",new p.BulkAdapter,{default:!1}),this.afterFindAllCallback=c.a.isFunction(a.afterFindAllCallback)?a.afterFindAllCallback:null}return Object(a.a)(e,[{key:"getDataSource",value:function(){return{type:"jsdata",entity:this.jsDataResource,options:{entitySet:this.entities["Default.GridData"].$call(this.parameters)}}}},{key:"getQuery",value:function(){return{query:this.query,options:{cacheResponse:!1,entitySet:this.entities["Default.GridData"].$call(this.parameters),headers:{lcid:p.pageContext.CultureLcid},filterOptions:this.filterOptions,afterFindAll:this.afterFindAllCallback}}}},{key:"getAdGroupEntitySetByScopeAndLevel",value:function(e){var t,i=this,n=e.campaignId,a=e.adgroupId,r=(t={},Object(N.a)(t,x.Account,function(){return i.resource.Campaigns.$withKey(n).AdGroups.$withKey(a).AdGroupCriterions}),Object(N.a)(t,x.Campaign,function(){return i.resource.AdGroups.$withKey(a).AdGroupCriterions}),Object(N.a)(t,x.AdGroup,function(){return i.resource.AdGroupCriterions}),t);return c.a.result(r,this.scope)}},{key:"getCampaignEntitySetByScopeAndLevel",value:function(e){var t,i=this,n=e.campaignId,a=p.edmCampaign,r=(t={},Object(N.a)(t,x.Account,function(){return i.resource.Campaigns.$withKey(n).CampaignCriterions}),Object(N.a)(t,x.Campaign,function(){return i.resource.CampaignCriterions}),Object(N.a)(t,x.AdGroup,function(){return a.currentCampaign.CampaignCriterions}),t);return c.a.result(r,this.scope)}},{key:"update",value:function(e){var t;if("Device"===e.Criterion.Type&&(t=e,c.a.isNumber(t.Id)&&t.Id<0||c.a.has(e,"OSTargets"))){var i=function(e,t){var i=null,n=c.a.chain(e).result("CriterionCashback").result("CashbackPercent").value(),a=p.pageContext.Permissions.IsPersonalizedOffersEnabled,r=function(t){var i,n=t.Id,a=t.multiplier,r=t.deviceName,o=t.OSName,s=t.Entity;return i={Id:c.a.isUndefined(n)?"":n,Status:"Active",CriterionType:e.Criterion.Type},Object(N.a)(i,s,{Id:e[s].Id}),Object(N.a)(i,"Criterion",{BidAdjustment:a,Type:e.Criterion.Type,DeviceCriterion:{DeviceName:r,OSName:o}}),i};if(A.Campaign===t)if(i={Name:e.Campaign.Name,Id:e.Campaign.Id},c.a.has(e,"OSTargets"))c.a.extend(i,{CampaignCriterions:c.a.map(e.OSTargets,function(t){var i=t.Key,n=t.Value;return r({Id:i,multiplier:e.CriterionBid.Multiplier,deviceName:e.Criterion.DeviceName,OSName:n,Entity:"Campaign"})})});else{c.a.extend(i,{CampaignCriterions:c.a.map(C,function(e){return r({multiplier:0,deviceName:e,Entity:"Campaign"})})});var o=c.a.find(i.CampaignCriterions,function(t){return c.a.isEqual(t.Criterion.DeviceCriterion.DeviceName,e.Criterion.DeviceName)});o.Criterion.BidAdjustment=e.CriterionBid.Multiplier,a&&(o.Criterion.CashbackPercent=n)}else i={Name:e.AdGroup.Name,Id:e.AdGroup.Id,Campaign:{Id:c.a.result(e.Campaign,"Id")||p.state.get("campaign_id")},AdGroupCriterions:[]},c.a.has(e,"OSTargets")&&c.a.extend(i,{AdGroupCriterions:c.a.map(e.OSTargets,function(t){var i=t.Key,n=t.Value;return r({Id:i,multiplier:e.CriterionBid.Multiplier,deviceName:e.Criterion.DeviceName,OSName:n,Entity:"AdGroup"})})});return i}(e,this.level);return this.level===A.AdGroup?p.jsDataCampaign.AdGroup.update(i.Id,i,{adapter:"bulk",cacheResponse:!1}):p.jsDataCampaign.Campaign.update(i.Id,i,{adapter:"bulk",cacheResponse:!1})}var n=c.a.result(e.Campaign,"Id")||p.state.get("campaign_id"),a={entitySet:this.level===A.Campaign?this.getCampaignEntitySetByScopeAndLevel({campaignId:n}):this.getAdGroupEntitySetByScopeAndLevel({campaignId:n,adgroupId:e.AdGroup.Id}),cacheResponse:!1},r=c.a.pick(e,"@odata.type","CriterionBid","CriterionCashback");return this.level===A.AdGroup&&(r.Criterion=c.a.pick(e.Criterion,"@odata.type")),this.jsDataResource.update(e.Id,r,a)}},{key:"bulkUpdate",value:function(e){var t=p.jsDataCampaign;return(this.level===A.AdGroup?t.AdGroup:t.Campaign).update(e.Id,e,{adapter:"bulk",cacheResponse:!1})}},{key:"load",value:function(e){var t=e.campaignId,i=e.adgroupId,n=e.params,a={entitySet:this.getCampaignEntitySetByScopeAndLevel({campaignId:t,adgroupId:i})["Model.CampaignCriterion"],cacheResponse:!1,bypassCache:!0};if(this.level===A.AdGroup){var r=this.getAdGroupEntitySetByScopeAndLevel({campaignId:t,adgroupId:i})["Model.AdGroupCriterion"],o=c.a.extend({},a,{entitySet:r});return Ce.a.join(this.jsDataResource.findAll(n,o),p.jsDataCampaign.CampaignCriterion.findAll(n,a),function(e,t){return{adgroupTargets:e,campaignTargets:t}})}return this.jsDataResource.findAll(n,a)}},{key:"query",get:function(){return this.level===A.AdGroup?{$expand:"Campaign, AdGroup"}:{$expand:"Campaign"}}},{key:"filterOptions",get:function(){return{odata:{custom:{Criterion:function(e,t){return"".concat(e,"(Criterion, ").concat(t,")")}}}}}}]),e}(),ke=(oe.DeterministicWrapperView,function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){return e.grid.gridView}},{key:"className",get:function(){return""}}]),t}(oe.DeterministicWrapperView)),Ae=(Q.DeterministicView,i("EiBw")),Te=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){var t=e.scope,i=e.level,n=e.campaignId,a=e.i18n,r=e.selectedCampaign,o=e.selectedAdGroup,s=e.optionalCampaignFilter,l=e.optionalCampaignSelect,c=e.optionalAdGroupSelect,d=e.optionalAdGroupExpand,u=p.edmCampaign,g=p.jsDataCampaign;return this.campaignAdgroupSelector=Object(Ae.d)({jsData:g,edmCampaign:u,scope:t,level:i,campaignId:n,i18n:a,selectedCampaign:r,selectedAdGroup:o,parentView:this,optionalCampaignFilter:s,optionalCampaignSelect:l,optionalAdGroupSelect:c,optionalAdGroupExpand:d}),this.campaignAdgroupSelector}}]),t}(oe.DeterministicWrapperView),_e=i("gp3z"),Ee=i.n(_e);i.d(t,"b",function(){return Z}),i.d(t,"c",function(){return re}),i.d(t,"k",function(){return w}),i.d(t,"i",function(){return x}),i.d(t,"g",function(){return A}),i.d(t,"h",function(){return T}),i.d(t,"v",function(){return B}),i.d(t,"r",function(){return F}),i.d(t,"y",function(){return U}),i.d(t,"n",function(){return G}),i.d(t,"t",function(){return z}),i.d(t,"s",function(){return H}),i.d(t,"o",function(){return W}),i.d(t,"p",function(){return q}),i.d(t,"m",function(){return $}),i.d(t,"f",function(){return he}),i.d(t,"j",function(){return p}),i.d(t,"u",function(){return be}),i.d(t,"w",function(){return ye}),i.d(t,"l",function(){return Se}),i.d(t,"d",function(){return xe}),i.d(t,"e",function(){return ke}),i.d(t,"q",function(){return fe}),i.d(t,"a",function(){return Te}),i.d(t,"x",function(){return Ee.a})},Ye1X:function(e,t,i){var n=i("UT4o"),a={Image191x100:{aspectRatio:1.91,aspectRatioAsRatio:"191:100",type:"Image191x100"},Image4x1:{aspectRatio:4,aspectRatioAsRatio:"4:1",type:"Image4x1"},Image1x1:{aspectRatio:1,aspectRatioAsRatio:"1:1",type:"Image1x1"},Image1x2:{aspectRatio:.5,aspectRatioAsRatio:"1:2",type:"Image1x2"}},r=function(e,t){return e/t},o=function(e){return e&&e.Width>0&&e.Height>0?r(e.Width,e.Height):null},s=function(e){return e&&e.Type?a[e.Type].aspectRatio:0};e.exports={getOriginalImageAspectRatio:o,getAllowedAspectRatio:s,getAspectRatio:function(e,t){var i=s(e);return i>0?i:t&&t.SourceWidth>0&&t.SourceHeight>0?r(t.SourceWidth,t.SourceHeight):o(e)},getResizeImageHeight:function(e){var t=e.aspectRatio,i=e.maxWidth,n=e.maxHeight;if(t>0&&i>0&&n>0){var a=n;return a*t>i&&(a=Math.round(i/t)),a}},convertAspectRatioDecimalToRatio:function(e){return(n.find(a,function(t){return t.aspectRatio===e})||{}).aspectRatioAsRatio},convertAspectRatioToDecimal:function(e){var t=(n.find(a,function(t){var i=t.aspectRatioAsRatio;return e===i})||{}).aspectRatio;return t?"".concat(t):void 0}}},YgdR:function(e,t,i){"use strict";var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("/xyZ"),g=i.n(p),h=i("UT4o"),m=i.n(h),f=i("7XbR"),v=i.n(f),b=i("YK3D"),y=i.n(b),S=i("UP37"),w=i("8DqV"),C=i("nlAS"),x=i.n(C),k=i("DXRr"),A=i("1gQY"),T=i.n(A),_=i("eiR/"),E=i("AQBV"),I=i.n(E),O=i("EwHi"),P=i.n(O),M=i("5C8L"),j=i.n(M),L=function e(t){var i=t.isNewUI;Object(a.a)(this,e),j.a.properties(this),this.dataLoaded=v.a.observable(!1),this.isNewUI=v.a.observable(i),this.showHighLatencyAlert=v.a.observable(!1),this.hasStore=v.a.observable(!1),this.isStoreValid=v.a.observable(!1)},D=i("8bis"),R=i.n(D),N=i("fE/Z"),V=i("1EwD"),B=i.n(V),F=i("0cl2"),U=i("4I68"),G=i("Q3lO"),z=i("NkAx"),H=i.n(z),W=i("FDu0"),q=i("0e0T"),$=i("h5F/"),K=i("kLlV"),J=i("+PqR"),Z=i("OvMV");i.d(t,"a",function(){return ie});var Y=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),Q=y.a&&y.a.Permissions&&y.a.Permissions.IsEnabledForDynamicFeedCampaign,X=y.a&&y.a.Permissions&&y.a.Permissions.IsSPAv2Enabled,ee=y.a&&y.a.Permissions&&y.a.Permissions.IsCPGForBSCEnabled,te=y.a&&y.a.Permissions&&y.a.Permissions.IsBSCSmartImportEnabled,ie=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,e.perfMarker&&(this.campaignScopeAllSettingsPerfMarker=e.perfMarker.createChild("CampaignScope_AllSettings_EditCampaign")),null!=Object(G.default)()&&(this.scenario=Z.default["".concat(Object(G.default)(),"CampaignEdit")].create(),this.activity=this.scenario["".concat(Object(G.default)(),"CampaignEdit")].create()),this.mark("willInit");var t=m.a.chain(e.deps).result("router",{}).value();this.navigateToRoute=t.navigateToRoute||m.a.noop,this.isNewUI=m.a.result(e.deps,"isNewUI",!1),this.viewModel=new L({isNewUI:this.isNewUI}),this.isMMAForRetailEnabled=y.a.Permissions.IsMMAForRetailEnabled}},{key:"isNotAudienceCampaign",value:function(){return"audience"!==Object(G.default)()}},{key:"renderAdvancedSettings",value:function(e){this.advancedSettingsView=new F.default({campaignId:this.options.campaignId,scenario:"campaign-settings",level:"campaign",model:e,nativeAdsCampaignBid:e.NativeBidAdjustment,multimediaAdsCampaignBid:e.MultiMediaAdBidAdjustment,TimeZone:e.TimeZone,campaignType:e.CampaignType?e.CampaignType:Object(G.default)(),supportCashbackSettings:Object(q.shouldSupportCashbackSettings)(e)}),this.$(".advanced-settings-section").html(this.advancedSettingsView.render().el)}},{key:"checkIfStoreValid",value:function(e){var t=m.a.result(this.setting,"ProviderId");return m.a.some(e.ProductCollectionAccounts,function(e){return Number(e.Value)===t})}},{key:"renderShoppingSettings",value:function(e){this.isAudienceDynamicFeedBasedCampaign="Audience"===this.campaign.CampaignType&&"AudienceDynamicFeedBased"===this.campaign.CampaignSubType,this.isSponsoredCampaign=X&&"SponsoredShoppingCampaign"===I.a.get("CampaignObjective")||"ShoppingSponsoredProductAd"===this.campaign.CampaignSubType,this.editMode=m.a.isFinite(this.options.campaignId),this.shouldShowPlaceholderStoreIfExists=te&&this.editMode,this.campaignProductScopeId=e.CampaignCriterionsData&&e.CampaignCriterionsData.Id;var t=!m.a.isEmpty(e)&&!m.a.isEmpty(e.ProductCollectionAccounts)||Q&&this.isAudienceDynamicFeedBasedCampaign;t&&X?this.isSponsoredCampaign?this.viewModel.hasStore(this.editMode||m.a.findIndex(e.ProductCollectionAccounts,function(e){return e.IsGlobalStore||e.IsCoOpStore})>=0):this.viewModel.hasStore(this.editMode||m.a.findIndex(e.ProductCollectionAccounts,function(e){return!e.IsGlobalStore&&!e.IsCoOpStore})>=0):this.viewModel.hasStore(t);var i=!ee||!this.editMode||this.checkIfStoreValid(e);Q&&this.isAudienceDynamicFeedBasedCampaign&&this.editMode&&(i=!0),this.viewModel.isStoreValid(i),this.viewModel.hasStore()?(e.ProductCollectionAccounts=[{Text:Y.get("ShoppingCampaign_ShoppingSetting_DefaultStore"),Value:-1,IsCoOpStore:!1}].concat(Object(n.a)(e.ProductCollectionAccounts)),this.shoppingSettingsView=new U.a({data:e,model:this.setting,campaignType:this.campaign.CampaignType,campaignSubType:this.campaign.CampaignSubType,campaignId:m.a.result(this.campaign,"Id"),isStoreValid:this.viewModel.isStoreValid(),activityLogger:this.editMode?void 0:this.activity,isSponsoredSettings:{isSponsoredCampaign:this.isSponsoredCampaign,isSponsoredPilotEnabled:X},shouldShowPlaceholderStoreIfExists:this.shouldShowPlaceholderStoreIfExists,deps:this.options.deps,isSearchCampaign:"Default"===this.campaign.campaignType}).render(),this.$(".shopping-settings").append(this.shoppingSettingsView.$el)):this.editMode||this.activity.signal("have no store",this.scenario)}},{key:"getProductData",value:function(e){var t=Object(_.queryify)("/Campaign/NewCampaign/GetProductScope",{aid:T.a.get("account_id"),cid:T.a.get("customer_id"),uid:T.a.get("user_id")}),i=this.shouldShowPlaceholderStoreIfExists,n=!this.shouldShowPlaceholderStoreIfExists;if(e){var a={campaignId:e};t=Object(_.queryify)(t,a),this.shouldShowPlaceholderStoreIfExists&&(t="".concat(t,"&storeTypes=placeholder")),i=!0,n=!1}var r={url:t,adapter:"legacy",bypassCache:i,cacheResponse:n};return x.a.Product.find("MetaData",r)}},{key:"renderCampaignTargets",value:function(e){var t=this;if(!this.isNotAudienceCampaign())return g.a.resolve();var i=new $.AudienceTargetInfo({resourceName:"CampaignCriterion",listenToLocationCriterion:!1}),n=i.fetchCriterions(e.Id).then(function(){return t.campaignTargetsView=new $.AudienceAdvancedTargetSettings({viewContext:{accountCurrencyCode:y.a.AccountCurrencyCode,currentCampaign:e,level:"campaign"},scenario:"campaign-settings",currentLevelTargetInfo:i,supportCashbackSettings:Object(q.shouldSupportCashbackSettings)(e)}),t.$(".campaign-targets").append(t.campaignTargetsView.render().el),g.a.resolve(m.a.result(t.createView,"locationTargetsPromise"))}).then(function(){return m.a.has(t.createView,"locationTargetsView")?(t.campaignTargetsView.$(".location-setting-controller").append(t.createView.locationTargetsView.render().el),t.createView.locationTargetsView.initialLoadTask):null}),a=m.a.result(this.createView.budget,"initialLoadTask");return g.a.all([n,a])}},{key:"onEnablePersonalizedOfferCheckboxChange",value:function(e){this.campaignTargetsView.toggleCashbackPercentColumns(e),this.createView.locationTargetsView&&this.createView.locationTargetsView.toggleCashbackPercentColumns(e),this.advancedSettingsView.adScheduleView&&this.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(e)}},{key:"onCashbackPercentChange",value:function(e){if(this.createView.cashbackSettingsView.viewModel.validateCashbackPercent(e)){var t=""===e||null==e?null:J.fromLocalToFloat(e);this.campaignTargetsView&&this.campaignTargetsView.toggleCashbackPercentColumns(!0,{level:"Campaign",value:t}),this.createView.locationTargetsView&&this.createView.locationTargetsView.toggleCashbackPercentColumns(!0,{level:"Campaign",value:t}),this.advancedSettingsView&&this.advancedSettingsView.adScheduleView&&this.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(!0,{level:"Campaign",value:t})}}},{key:"render",value:function(){var e=this;this.$el.append(R()({i18n:Y,title:m.a.result(y.a.CurrentCampaign,"ExperimentId")>0?Y.get("SectionTitle_ExperimentSettings"):Y.get("SectionTitle_CampaignSettings"),isNotAudienceCampaign:this.isNotAudienceCampaign(),isMMAForRetailEnabled:this.isMMAForRetailEnabled})),v.a.applyBindings(this.viewModel,this.el);var t={queryParameters:{entitySet:N.default.currentAccount.Campaigns,expand:["Budget"]},bypassCache:!0};return this.mark("willFetchData"),this.hideUIBlocker=B()(this.$el),x.a.Campaign.find(Number(this.options.campaignId),t).then(function(t){return e.campaign=t,e.setting=m.a.first(e.campaign.CampaignSettings)||{},e.mark("willRender"),e.createView=new P.a(m.a.extend(t,{scenario:"campaign-settings",showLanguage:"Default"===t.CampaignType,popupIds:{Location:"pop_BA_Settings_LocationTargeting"},showInitialUiBlocker:!e.isNotAudienceCampaign(),deps:e.options.deps,usePanel:e.isNewUI,campaignType:t.CampaignType,campaignSubType:t.CampaignSubType,isForVNext:e.isNewUI,activityLogger:e.activity})),e.supportCashbackSettings=Object(q.shouldSupportCashbackSettings)(t),e.$(".campaign-update").append(e.createView.render().el),e.viewModel.dataLoaded(!0),e.renderAdvancedSettings(t),e.createView.cashbackSettingsView&&(e.createView.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked.subscribe(function(t){e.onEnablePersonalizedOfferCheckboxChange(t)}),e.createView.cashbackSettingsView.viewModel.CashbackPercent.subscribe(function(t){e.onCashbackPercentChange(t)})),e.renderCampaignTargets(t)}).then(function(){return e.isMMAForRetailEnabled?g.a.resolve(e.getProductData(e.options.campaignId).then(function(t){e.renderShoppingSettings(t)})):g.a.resolve()}).catch(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).errors;e.viewModel.errors.add(m.a.isEmpty(t)?void 0:k.getODataErrors(t))}).finally(function(){e.hideUIBlocker(),e.mark("done")}),this}},{key:"clearApiErrors",value:function(){this.advancedSettingsView.clearApiErrors()}},{key:"validate",value:function(){return m.a.reduce([this.createView.validate(),this.advancedSettingsView.validate(),!this.shoppingSettingsView||this.shoppingSettingsView.validate(),!this.campaignTargetsView||this.campaignTargetsView.validate()],function(e,t){return e&&t},!0)}},{key:"destroyProductScoeIfNeed",value:function(){this.campaignProductScopeId&&!this.shoppingSettingsView.hasFilteredProducts()&&x.a.CampaignProductScope.destroy(this.campaignProductScopeId,{adapter:"bulk",parentId:this.campaign.Id})}},{key:"getParams",value:function(){var e=this.createView.getData(),t=this.advancedSettingsView.getValues(),i=t.deviceTargets.concat(t.ageTargets).concat(t.genderTargets).concat(t.scheduling);m.a.each(i,function(t){t.Status=m.a.isEmpty(t.Status)?"Active":t.Status,t.Campaign={Id:e.Id}}),this.shoppingSettingsView&&this.shoppingSettingsView.viewModel.hasValidStore()&&(m.a.extend(e,this.shoppingSettingsView.viewModel.toObject(),{CampaignType:this.campaign.CampaignType}),this.shoppingSettingsView.hasFilteredProducts()&&(e.CampaignProductScope=m.a.defaults(this.shoppingSettingsView.getProductScope(),{CampaignName:e.Name}),this.campaignProductScopeId&&(e.CampaignProductScope.Id=this.campaignProductScopeId)));var n=this.campaignTargetsView&&this.campaignTargetsView.getData(),a=m.a.result(n,"CampaignCriterions",[]);return e.CampaignCriterions=m.a.union(e.CampaignCriterions,i,a),m.a.extend(e,t.urlOptions,t.nativeAds,t.multimediaAds),m.a.isBoolean(t.adScheduleUseSearcherTimeZone)&&(e.AdScheduleUseSearcherTimeZone=t.adScheduleUseSearcherTimeZone),e}},{key:"getAllLocationCriterions",value:function(){var e=this.createView.getAllLocations(),t=this.campaignTargetsView&&this.campaignTargetsView.getAllLocations()||[];return m.a.union(e,t)}},{key:"checkIMAReachAndSave",value:function(){var e=this,t=g.a.resolve(!1);if(this.validate()){this.clearApiErrors();var i=this.getParams(),n=i&&i.CampaignCriterions&&m.a.filter(i.CampaignCriterions,function(e){return e&&("Location"===e.CriterionType||"Radius"===e.CriterionType)}),a=n&&n.length>0,r=this.getAllLocationCriterions();if(r=m.a.filter(r,function(e){return"Deleted"!==e.Status}),a&&y.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&this.isNewUI&&r.length>0){var o=Object(K.b)(r);t=Object(K.e)({locationsInfo:o,onYes:function(){return e.save()},deliveryChannel:"audience"===Object(G.default)()?"AIM":"BingAds",campaignId:this.options.campaignId,i18n:Y,aid:y.a.CurrentAccount.Id,cid:y.a.CurrentAccount.AdvertiserCustomerID})}t.then(function(t){t||e.save()})}}},{key:"save",value:function(){var e=this;if(this.validate()){this.clearApiErrors();var t=this.getParams();m.a.size(t.CampaignCriterions)>3e3&&this.viewModel.showHighLatencyAlert(!0);var i=m.a.chain(t.CampaignCriterions).groupBy(function(e,t){return Math.floor(t/1e3)}).toArray().value(),n=m.a.map(i,function(e){return{Id:t.Id,data:m.a.extend({},t,{CampaignCriterions:e})}});0===n.length&&(n=[{Id:t.Id,data:t}]);var a={reqs:n};x.a.Campaign.update(t.Id,a,{adapter:"bulk",cacheResponse:!1,overrideResponse:!0,batch:!0,processResponse:function(e){var t=m.a.reduce(e,function(e,t){return e.concat(t.CampaignCriterions)},[]);return m.a.extend({},m.a.first(e),{CampaignCriterions:t})}}).then(function(i){return e.advancedSettingsView.setData(i),Object(q.logCampaignPersonalizedOffers)(e.createView.cashbackSettingsView,e.activity.signal.bind(e.activity),t),e.advancedSettingsView.exclusionsUpdated()?e.advancedSettingsView.saveExtensions():{}}).then(function(){return e.createView.saveTargetingSource(t.Id)}).then(function(){return e.destroyProductScoeIfNeed()}).then(function(){H.a.updateContext(["CampaignsGrid","AdGroupGrid","PagedAdGroupGrid","AdGrid","KeywordGrid","AudiencesAssociationGrid","SitePlacementGrid","CampaignsSettingsGrid","AccountAdExtensionsGrid","CampaignAdExtensionsGrid","AdGroupAdExtensionsGrid","ProductGroupsGrid","CampaignSelector"]),window.App.trigger("campaignUpdated",{data:[{Id:Number(t.Id),Name:t.Name,Budget:t.Budget}]});var i=y.a.CurrentCampaign,n=I.a.get("Permissions");m.a.result(n,"IsDSAMixedModeCampaignEnabled",!1)&&!e.isNewUI&&t.DomainName&&(i.CampaignSettings=[{DomainName:t.DomainName,Source:t.Source,Language:t.LanguageCode,DynamicDescriptionEnabled:t.DynamicDescriptionEnabled}],window.App.state.trigger("change:campaign_id")),e.navigateToRoute("campaign_adgroup",{campaign_id:t.Id})}).then(function(){var i=[],n=e.createView.getLocationRecommendationsStatus(),a=n.targetedLocationRecommendations,r=n.dismissedLocationRecommendations,o={httpUtils:S,odataOptions:{host:y.a.BingAdsAdInsightWebApiUri,oDataToken:y.a.Token,SessionId:m.a.result(I.a.get("Omniture"),"SessionId"),params:{customer_id:T.a.get("advertisercustomer_id"),account_id:T.a.get("account_id")}}},s={customerId:T.a.get("advertisercustomer_id"),accountId:T.a.get("account_id"),campaignId:t.Id};return m.a.isEmpty(a)||i.push(Object(w.applyRecommendations)({deps:o,scope:s,recommendations:a,recommendationType:"NewLocationTargetOpportunity",channel:"campaignsetting"})),m.a.isEmpty(r)||i.push(Object(w.dismissRecommendations)({deps:o,scope:s,recommendations:r,recommendationType:"NewLocationTargetOpportunity",channel:"campaignsetting"})),g.a.all(i)}).catch(function(t){e.handleApiErrors(t)}).finally(B()(this.$el))}}},{key:"handleApiErrors",value:function(e){if(m.a.isUndefined(e)||m.a.isNull(e))this.viewModel.errors.add();else if(!e.errors||e.entity){if("exclusion error"!==e){if(e.errors){var t=["CampaignCriterions"].concat(e.entity.hasOwnProperty("AdExtensionAssociations")?["AdExtensionAssociations"]:[]);k.getPartial(e,t);var i=[];m.a.isEmpty(e.entity.errors)||(i=i.concat(e.entity.errors)),m.a.each(t,function(t){m.a.isArray(e.entity[t])?m.a.each(e.entity[t],function(e){m.a.isEmpty(e.errors)||(i=i.concat(e.errors))}):m.a.isEmpty(e.entity[t].errors)||(i=i.concat(e.entity[t].errors))});var n=m.a.reject(i,function(e){return m.a.contains(["TrackingUrlTemplate","UrlCustomParameters"],e.property)});this.createView.handleApiErrors(n||[]),this.advancedSettingsView.setData(e),this.advancedSettingsView.handleErrors(e)}else this.viewModel.errors.add();this.scrollToErrors()}}else this.viewModel.errors.add(k.getODataErrors(e.errors))}},{key:"errorElements",value:function(){return this.$(".campaign-settings__container .error, .campaign-settings__container .alert-danger").filter(":visible")}},{key:"scrollToErrors",value:function(){W.scrollAndCenter(this.errorElements())}},{key:"cancel",value:function(){this.navigateToRoute("campaign_adgroup",{campaign_id:this.options.campaignId})}},{key:"remove",value:function(){this.createView&&this.createView.remove(),this.advancedSettingsView&&this.advancedSettingsView.remove(),this.campaignTargetsView&&this.campaignTargetsView.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"mark",value:function(e){this.campaignScopeAllSettingsPerfMarker&&this.campaignScopeAllSettingsPerfMarker[e]()}},{key:"events",get:function(){return{"click .btn-save":"checkIMAReachAndSave","click .btn-cancel":"cancel"}}}]),t}(u.a.View)},YlyU:function(e,t,i){i("4y7W");e.exports=function(e){var t,n="";return n=n+'<div class="container-fluid">'+(null==(t=i("RH6/").call(this,e))?"":t)+"</div>"}},YzTP:function(e,t,i){"use strict";i.r(t);var n,a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("ERkP"),u=i.n(d),p=i("/xyZ"),g=i.n(p),h=i("7nmT"),m=i.n(h),f=i("Ioe5"),v=i("UT4o"),b=i.n(v),y=i("AzmZ"),S=i("4jZH"),w=i("ORPc"),C=i("c0nf"),x=i("TDDF"),k=i("+9/h"),A=i("ZItL"),T=i("lM1H"),_=i("gmm/"),E=i.n(_),I=i("a28/"),O=i("1lK0"),P=i("kwR5"),M=i("bgLp"),j=i("O94r"),L=i.n(j),D=i("0v5/"),R=i("TI2v"),N=i("eHSY"),V=i("SjL2"),B=i("pomj"),F=i("8U/d"),U=i("79zO"),G=i("eiR/"),z=i("SfTZ"),H=i("LvSV"),W=i("Cle3");!function(e){e.Image191x100="Image191x100",e.Image178x100="Image178x100",e.Image172x100="Image172x100",e.Image169x100="Image169x100",e.Image155x100="Image155x100",e.Image150x100="Image150x100",e.Image133x100="Image133x100",e.Image1x1="Image1x1",e.Image93x100="Image93x100"}(n||(n={}));var q=function(){return(q=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},$=F.j.subTypeToType,K=F.j.aspectRatios,J=(F.j.multimediaAdinMSANRatios,function(e,t){var i=b.a.groupBy(e,function(e){return $[e.SubType]});return Object.keys(t).map(function(n){var a=Object(F.k)({originalImageToCrop:{Id:Number(n),IdString:n,Src:t[n].url,Width:t[n].width,Height:t[n].height},isMultimediaAdinMSANEnabled:!0});return a=a.map(function(n){var a=b.a.find(e,function(e){return $[e.SubType]===n.Type&&n.Id===e.Id});if(a)return new F.c(function(e,t,i){var n=i.cs,a=i.isIncluded,r={SourceX:e.CropX,SourceY:e.CropY,SourceWidth:e.CropWidth,SourceHeight:e.CropHeight};return{id:e.Id,idString:String(e.Id),src:t[e.Id].url,type:$[e.SubType],width:t[e.Id].width,height:t[e.Id].height,cropSettings:r,isIncluded:a,originCropsetting:n}}(a,t,{isIncluded:!0,cs:n.CropSettings}));(n.setIncluded(!1),i[n.Type])||e.find(function(e){return"LandscapeImageMedia"===e.SubType&&n.Id===e.Id})&&n.setIncluded(!0);return n})})});var Z=function(e){return b.a.find(e,function(e){return e.Type===n.Image191x100})},Y=function(e){var t=b.a.groupBy(b.a.flatten(e),"type"),i=Array(e.length).fill({}),a=new Set;return e.filter(function(e){return!Z(e).IsIncluded}).forEach(function(e){e.forEach(function(e){e.IsIncluded&&a.add(e.Type)})}),e.forEach(function(e,r){e.forEach(function(o){if(o.IsIncluded){var s=t[o.Type].every(function(e){return!e.isMaunalCropped()})&&t[o.Type].every(function(e){return e.IsIncluded})&&Z(e).IsIncluded&&o.Type!==n.Image191x100&&!a.has(o.Type);i[r][o.Type]=s}})}),b.a.flatten(e.map(function(e,t){return e.filter(function(e){return(!e.IsIncluded||!i[t][e.Type])&&e.IsIncluded})})).map(function(e){return function(e){var t={id:e.Id,idString:e.IdString,subType:K[e.Type].associationType};if(e.CropSettings){var i=e.CropSettings,n=i.SourceHeight,a=i.SourceWidth,r=i.SourceX,o=i.SourceY;return q(q({},t),{cropX:r,cropY:o,cropWidth:a,cropHeight:n})}return t}(e)})},Q=i("syDw"),X=i.n(Q),ee=i("7XbR"),te=i.n(ee),ie=i("98nU"),ne=i("jep4"),ae=i("ITOZ"),re=i("DUzX"),oe=i("kvkw"),se=i.n(oe),le={MAX_HEADLINES:15,DEFAULT_HEADLINES:1,MIN_HEADLINES:1,MAX_LONGHEADLINES:5,DEFAULT_LONGHEADLINES:1,MIN_LONGHEADLINES:1,MAX_DESCRIPTIONS:5,DEFAULT_DESCRIPTIONS:1,MIN_DESCRIPTIONS:1,MAX_HEADLINE_SUGGESTIONS:15,MAX_DESCRIPTION_SUGGESTIONS:10},ce=5,de=5,ue=i("5iHu"),pe=i.n(ue),ge=i("GJCM"),he=function(e,t,i,n,a){return e.replace("{odataPath}",t.BingAdsWebApiUri).replace("{account_id}",b.a.result(t.CurrentAccount,"Id")).replace("{customer_id}",b.a.result(t.CurrentCustomer,"Id")).replace("{campaign_id}",i).replace("{adgroup_id}",n).replace("{scenario}",a)},me=function(){function e(t){var i=t.field,n=t.assetType,r=t.viewModel,o=t.pageContext,s=t.scenario;Object(a.a)(this,e),this.field=i,this.assetType=n,this.viewModel=r,this.pageContext=o,this.scenario=s}return Object(r.a)(e,[{key:"fetchAdStrengthSuggestion",value:function(e){var t=this.field,i=this.assetType,n=this.viewModel,a=this.pageContext,r=this.scenario,o=null;if(b.a.isEmpty(n.model.get("FinalUrls")))return g.a.resolve({data:[]});o=b.a.first(n.model.get("FinalUrls"));var s=e?{url:o,adType:"EXTA",maxCount:3,autoCompleteFieldIndex:"headline"===i?0:2,adFields:["headline"===i?n.model.get(t):"","","headline"===i?"":n.model.get(t)]}:{count:1,business:{Website:o},headlineCount:n.maxHeadlineSuggestions,descriptionCount:n.maxDescriptionSuggestions},l={url:he(e?"{odataPath}Mca/V1/Customers({customer_id})/Accounts({account_id})/Default.GetAdAutoComplete?scenario={scenario}":"{odataPath}Campaign/V2/Customers({customer_id})/Accounts({account_id})/Campaigns({campaign_id})/Default.CreateResponsiveSearchAdRecommendation?scenario={scenario}",a,n.campaignId,n.adGroupId,r),contentType:"application/json",headers:{authorization:"CCMTSmallToken ".concat(a.Token)},type:"POST",data:Object(ge.stringifySync)(s)};return new g.a(function(t,n){pe.a.ajax(l).then(function(n){var a=[];b.a.isEmpty(n)||(a=e?b.a.map(n.Suggestions,function(e){return e.AssetType=i,e}):(a=a.concat(b.a.map(b.a.first(n.value).Headlines,function(e){return e.Asset.AssetType="headline",e.Asset}))).concat(b.a.map(b.a.first(n.value).Descriptions,function(e){return e.Asset.AssetType="description",e.Asset}))),t(a)},n)}).then(function(e){return{data:e}})}},{key:"fetchBusinessInfo",value:function(e){var t=this.viewModel,i=this.pageContext,n=this.scenario,a=null;if(b.a.isEmpty(t.model.get("FinalUrls")))return g.a.resolve({data:[]});if(a=b.a.first(t.model.get("FinalUrls")),e)return g.a.resolve({data:[]});var r={url:a},o={url:he("{odataPath}Campaign/V2/Customers({customer_id})/Accounts({account_id})/Campaigns({campaign_id})/Default.GetExtractedBusinessInfo?scenario={scenario}",i,t.campaignId,t.adGroupId,n),contentType:"application/json",headers:{authorization:"CCMTSmallToken ".concat(i.Token)},type:"POST",data:Object(ge.stringifySync)(r)};return new g.a(function(e,t){pe.a.ajax(o).then(function(t){var i=[];b.a.isEmpty(t)||(i=[{Text:t.BusinessName,AssetType:"business"}]),e(i)},t)}).then(function(e){return{data:e}})}}]),e}(),fe=b.a.map(b.a.range(le.MAX_HEADLINES),function(e){return"Headline".concat(e)}),ve=b.a.map(b.a.range(le.MAX_LONGHEADLINES),function(e){return"LongHeadline".concat(e)}),be=b.a.map(b.a.range(le.MAX_DESCRIPTIONS),function(e){return"Description".concat(e)}),ye="MMASearch",Se="MMAResponsive",we="NonMMAResponsive",Ce="headline",xe="description",ke="description",Ae="description",Te="business",_e=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"getDisplayPosition",value:function(e,t){var i=pe()(e),n=i.offset(),a=t.offset();return{top:n.top-a.top+i.outerHeight(),left:n.left-a.left}}},{key:"addAssetSuggestion",value:function(e,t,i,n){var a=this.props,r=a.viewModel,o=a.element,s=a.pickerContainer,l=a.activityLogger,c=a.scenario;if(!b.a.isEmpty(t)){var d=".".concat(t.className.split(" ").join("."));pe()(d).val(n),r.model.set(i,n),o.trigger("input-changed",e),l.signal("".concat(i,", ").concat(n),"".concat(c," asset suggestions select"))}e.stopPropagation(),e.preventDefault(),m.a.unmountComponentAtNode(s)}},{key:"render",value:function(){var e=this,t=this.props,i=t.container,n=t.i18n,a=t.target,r=t.field,o=t.itemsToDisplay,s=t.activityLogger,l=t.scenario,c=this.getDisplayPosition(a,i),d={display:"block",left:"".concat(c.left,"px"),top:"".concat(c.top,"px")},p="";r.startsWith("Headline")?p=n.getString("Ad_Strength_Suggestion_Picker_Title_Headline"):r.startsWith("LongHeadline")?p=n.getString("Ad_Strength_Suggestion_Picker_Title_LongHeadline"):r.startsWith("Description")&&(p=n.getString("Ad_Strength_Suggestion_Picker_Title_AdText"));var g;return g=o.map(function(t,i){var n=t.Text;return u.a.createElement("li",null,u.a.createElement("a",{role:"menuitem","arial-label":n,href:"#",onClick:function(t){return e.addAssetSuggestion(t,a,r,n)},key:i,"data-index":i},n?u.a.createElement("div",{className:"type-normal"},n):null))},this),b.a.each(o,function(e){var t=e.Text;s.signal("".concat(r,", ").concat(t),"".concat(l," asset suggestions view"))}),u.a.createElement("ul",{className:L.a.apply(void 0,["dropdown-menu"].concat(["picker-list"])),role:"menu",style:d},u.a.createElement("li",{className:"ad-strength-suggestion-picker-title",style:{padding:"10px 10px 3px 10px",fontWeight:"bold"}},p),g)}}]),t}(u.a.Component);_e.defaultProps={itemsToDisplay:[],container:pe()(document.body)};var Ee=function(){function e(t){var i=t.containerSelector,n=t.pageContext,r=t.i18n,o=t.activityLogger;Object(a.a)(this,e),this.containerSelector=i,this.pageContext=n,this.i18n=r,this.cachedAutoCompleteSuggestions={},this.cachedCreationSuggestions={},this.cachedBusiness={},this.activityLogger=o}return Object(r.a)(e,[{key:"keydown",value:function(e){switch(e.key){case"Escape":this.hidePicker()}}},{key:"registerGlobalEvents",value:function(e){var t=this;pe()(window).on("click",function(e){return t.clickedAway(e)}),pe()(e).on("keydown",function(e){return t.keydown(e)})}},{key:"hidePicker",value:function(){var e=pe()(".ad-strength-suggestion-container");Ie(e)&&m.a.unmountComponentAtNode(b.a.first(e)),pe()(window).off("click",this.clickedAway),pe()(this.target).off("keydown",this.keydown)}},{key:"clickedAway",value:function(e){var t=pe()(e.target);0===t.closest(".ad-strength-suggestion-helper-area").length&&0===t.closest(".ad-strength-suggestion-container").length&&this.hidePicker()}},{key:"renderPicker",value:function(e,t,i,n,a,r,o,s){var l=this.containerSelector,c=this.i18n,d=pe()(".ad-strength-suggestion-container"),p=this.filterSuggestion(i,n,o,t,s);if("BusinessName"===t&&o&&(p=[]),!b.a.isEmpty(p)&&Ie(d)){var g=b.a.first(d);m.a.render(u.a.createElement(_e,{element:a,itemsToDisplay:p,target:e,field:t,container:pe()(l),pickerContainer:g,viewModel:i,assetType:n,i18n:c,activityLogger:this.activityLogger,scenario:r}),g),this.registerGlobalEvents(e)}else this.hidePicker()}},{key:"isAutoCompleteSuggestionCached",value:function(e,t,i){var n=this.cachedAutoCompleteSuggestions;return t&&e&&i&&b.a.get(n,[t,e,i])}},{key:"isCreationSuggestionCached",value:function(e){var t=this.cachedCreationSuggestions;return e&&t[e]&&!b.a.isEmpty(t[e])}},{key:"isBusinessCached",value:function(e){var t=this.cachedBusiness;return e&&t[e]&&!b.a.isEmpty(t[e])}},{key:"filterSuggestion",value:function(e,t,i,n,a){var r=i?this.cachedAutoCompleteSuggestions[a][t][i]:t===Te?this.cachedBusiness[a]:this.cachedCreationSuggestions[a];return b.a.filter(r,function(a){if(a.AssetType.toLowerCase()!==t||b.a.isEmpty(a.Text))return!1;var r=a.Text.toLowerCase();if(!b.a.isEmpty(i)&&!r.startsWith(i.toLowerCase()))return!1;if(n.startsWith("Headline"))for(var o=0;o<e.showHeadlineCount();o++){var s="Headline".concat(o);if(a.Text===e.model.get(s))return!1}else if(n.startsWith("LongHeadline"))for(var l=0;l<e.showLongHeadlineCount();l++){var c="LongHeadline".concat(l);if(a.Text===e.model.get(c))return!1}else if(n.startsWith("Description"))for(var d=0;d<e.showDescriptionCount();d++){var u="Description".concat(d);if(a.Text===e.model.get(u))return!1}return!0})}},{key:"autoFillSuggestions",value:function(e){var t=e.view,i=e.viewModel,n=e.finalUrl,a=e.scenario,r=i.model.toJSON(),o=b.a.filter(fe,function(e){return!b.a.isEmpty(r[e])}).length;if(o<i.autoFillHeadlineCount)for(var s=this.filterSuggestion(i,Ce,null,"Headline",n),l=0,c=0;l<i.showHeadlineCount()&&l<s.length&&c<i.autoFillHeadlineCount-o;l++){var d=fe[l],u=s[l].Text;b.a.isEmpty(r[d])&&(pe()(".".concat(d,"-value")).val(u),i.model.set(d,u),t[d].trigger("input-changed"),this.activityLogger.signal("".concat(d,", ").concat(u),"".concat(a," asset suggestions auto-fill")),c++)}var p=b.a.filter(ve,function(e){return!b.a.isEmpty(r[e])}).length;if(p<i.autoFillLongHeadlineCount)for(var g=this.filterSuggestion(i,xe,null,"LongHeadline",n),h=0,m=0;h<i.showLongHeadlineCount()&&h<g.length&&m<i.autoFillLongHeadlineCount-p;h++){var f=ve[h],v=g[h].Text;b.a.isEmpty(r[f])&&(pe()(".".concat(f,"-value")).val(v),i.model.set(f,v),t[f].trigger("input-changed"),this.activityLogger.signal("".concat(f,", ").concat(v),"".concat(a," asset suggestions auto-fill")),m++)}var y=b.a.filter(be,function(e){return!b.a.isEmpty(r[e])}).length;if(y<i.autoFillDescriptionCount)for(var S=this.filterSuggestion(i,ke,null,"Description",n),w=0,C=0;w<i.showDescriptionCount()&&w<S.length&&C<i.autoFillDescriptionCount-y;w++){var x=be[w],k=S[w].Text;b.a.isEmpty(r[x])&&(pe()(".".concat(x,"-value")).val(k),i.model.set(x,k),t[x].trigger("input-changed"),this.activityLogger.signal("".concat(x,", ").concat(k),"".concat(a," asset suggestions auto-fill")),C++)}}},{key:"getAdStrengthSuggestion",value:function(e){var t=this,i=e.assetType,n=e.target,a=e.field,r=e.viewModel,o=e.element,s=e.scenario,l=this.containerSelector,c=this.pageContext,d=pe()(".ad-strength-suggestion-container");Ie(d)?this.hidePicker():pe()('<div class="ad-strength-suggestion-container open"/>').appendTo(pe()(l));var u=new me({field:a,assetType:i,viewModel:r,pageContext:c,scenario:s}),p=b.a.isEmpty(r.model.get("FinalUrls"))?null:b.a.first(r.model.get("FinalUrls")),h=r.model.get(a),m=!b.a.isEmpty(h);return new g.a(function(e){m&&!t.isAutoCompleteSuggestionCached(i,p,h)?u.fetchAdStrengthSuggestion(!0).then(function(n){var a=n.data;t.cachedAutoCompleteSuggestions=Object(M.a)({},t.cachedAutoCompleteSuggestions,Object(I.a)({},p,Object(M.a)({},t.cachedAutoCompleteSuggestions[p],Object(I.a)({},i,Object(M.a)({},b.a.get(t.cachedAutoCompleteSuggestions,[p,i]),Object(I.a)({},h,a)))))),e()}):e()}).then(function(){t.renderPicker(n,a,r,i,o,s,h,p)})}},{key:"getAdStrengthSuggestionForURL",value:function(e){var t=this,i=e.view,n=e.viewModel,a=e.scenario,r=this.pageContext,o=new me({viewModel:n,pageContext:r,scenario:a}),s=b.a.first(n.model.get("FinalUrls")),l=(this.isCreationSuggestionCached(s)?g.a.resolve({data:this.cachedCreationSuggestions[s]}):o.fetchAdStrengthSuggestion(!1)).then(function(e){var o=e.data;t.cachedCreationSuggestions[s]=o,n.currentSuggestions=o,r.Permissions.IsMMAAutoFillEnabled&&t.autoFillSuggestions({view:i,viewModel:n,finalUrl:s,scenario:a})}),c=(this.isBusinessCached(s)?g.a.resolve({data:this.cachedBusiness[s]}):o.fetchBusinessInfo(!1)).then(function(e){var i=e.data;t.cachedBusiness[s]=i});return g.a.all([l,c])}}]),e}(),Ie=function(e){return!b.a.isEmpty(e)&&e.length>0},Oe=null,Pe=function(e){var t=e.element,i=e.field,n=e.viewModel,a=e.pageContext,r=e.assetType,o=e.i18n,s=e.activityLogger,l=e.scenario;t.$el.addClass("ad-strength-suggestion-helper-area");var c=function(e){var c=e.type,d=e.target,u=e.key,p=d||{};p.selectionStart===p.selectionEnd&&("keyup"===c&&"Escape"===u||(null===Oe&&(Oe=new Ee({containerSelector:"div.ad-properties-section",pageContext:a,i18n:o,activityLogger:s})),Oe.getAdStrengthSuggestion({assetType:r,target:d,field:i,viewModel:n,element:t,scenario:l})))};t.on("input-changed",b.a.debounce(c,300)),t.on("input-focused",c)},Me=["Default","NoButton","ApplyNow","BookNow","ContactUs","Download","GetQuote","Install","LearnMore","SeeMore","ShopNow","SignUp","Subscribe","VisitSite","AddToCart","BookTravel","Buy","BuyNow","OpenLink","OrderNow","RegisterNow"],je=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isForVNext=t.isForVNext||!1,this.isUpdate=!this.isEmpty(t.ad)&&!1!==t.ad.isSaved,this.ad=b.a.omit(t.ad,function(t){return"number"!==typeof t&&(e.isEmpty(t)||null==t[0])}),this.showSaveButton=t.isGridDisplay||!1,this.logScenario=t.logScenario,this.i18n=k.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=k.a.get("component/api-errors-campaign/index");var i=k.a.get("component/config/index");this.permissions=i.get("Permissions")||{},this.isMobileUrlEnabled=null==t.isMobileUrlEnabled||t.isMobileUrlEnabled,this.viewContext=t.viewContext,this.pageContext=t.pageContext,this.isImpressionTrackingUrlsEnabled=(!this.viewContext||1!==b.a.result(this.viewContext.currentCampaign,"CampaignType")&&"Default"!==b.a.result(this.viewContext.currentCampaign,"CampaignType"))&&null!=t.isImpressionTrackingUrlsEnabled&&t.isImpressionTrackingUrlsEnabled,this.isMultimediaAd=t.isMultimediaAd,this.isMultiMediaAdsPhase2Enabled=this.isMultimediaAd&&this.permissions.IsMultiMediaAdsPhase2Enabled,this.isAudienceCampaignMultiMediaAdsEnabled=this.permissions.IsAudienceCampaignMultiMediaAdsEnabled&&("Audience"===b.a.result(this.viewContext.currentCampaign,"CampaignType")||8===b.a.result(this.viewContext.currentCampaign,"CampaignType"))&&!t.isVideo,this.responsiveAdScenario=we,this.isMultiMediaAdsPhase2Enabled&&(this.responsiveAdScenario=ye),this.isAudienceCampaignMultiMediaAdsEnabled&&(this.responsiveAdScenario=Se),this.responsiveAdScenario="".concat(this.responsiveAdScenario," | IsMMAAutoFillEnabled: ").concat(this.permissions.IsMMAAutoFillEnabled),this.isMMAEnabled=this.isMultiMediaAdsPhase2Enabled||this.isAudienceCampaignMultiMediaAdsEnabled,this.isResponsiveAdTextRecommendationEnabled=this.permissions.IsResponsiveAdTextRecommendationEnabled,this.isMoveFinalUrlTop=this.isResponsiveAdTextRecommendationEnabled||this.isAudienceCampaignMultiMediaAdsEnabled||this.isMultimediaAd,this.activityLogger=t.activityLogger,this.genericErr=new w.AudienceCampaignErrorsView,this.ad.Headlines&&"string"===typeof this.ad.Headlines&&(this.ad.Headlines=JSON.parse(this.ad.Headlines)),this.ad.LongHeadlines&&"string"===typeof this.ad.LongHeadlines&&(this.ad.LongHeadlines=JSON.parse(this.ad.LongHeadlines)),this.ad.Descriptions&&"string"===typeof this.ad.Descriptions&&(this.ad.Descriptions=JSON.parse(this.ad.Descriptions)),this.initHeadlines=this.ad.Headlines?this.ad.Headlines.length:0,this.initLongHeadlines=this.ad.LongHeadlines?this.ad.LongHeadlines.length:0,this.initDescriptions=this.ad.Descriptions?this.ad.Descriptions.length:0,this.preferencesService=k.a.get("component/preference/service/index"),this.websiteImageOptInPreferenceName=t.websiteImageOptInPreferenceName,this.hasWebsiteImageOptedInObservable=t.hasWebsiteImageOptedInObservable;var n=this.preferencesService.findByNameAtUserLevel(this.websiteImageOptInPreferenceName);this.viewModel={maxHeadlines:le.MAX_HEADLINES,showHeadlineCount:te.a.observable(Math.max(le.DEFAULT_HEADLINES,this.initHeadlines)),headlinesErrorMessage:te.a.observable(!1),maxLongHeadlines:le.MAX_LONGHEADLINES,showLongHeadlineCount:te.a.observable(Math.max(le.DEFAULT_LONGHEADLINES,this.initLongHeadlines)),longHeadlinesErrorMessage:te.a.observable(!1),maxDescriptions:le.MAX_DESCRIPTIONS,showDescriptionCount:te.a.observable(Math.max(le.DEFAULT_DESCRIPTIONS,this.initDescriptions)),maxHeadlineSuggestions:this.isMMAEnabled?le.MAX_HEADLINE_SUGGESTIONS:ce,maxDescriptionSuggestions:this.isMMAEnabled?le.MAX_DESCRIPTION_SUGGESTIONS:de,currentSuggestions:[],autoFillHeadlineCount:2,autoFillLongHeadlineCount:1,autoFillDescriptionCount:2,descriptionsErrorMessage:te.a.observable(!1),businessNameErrorMessage:te.a.observable(!1),isCTAExpanded:te.a.observable(!0),Language:te.a.observable(this.ad&&!b.a.isEmpty(this.ad.CallToActionLanguage)?this.ad.CallToActionLanguage:null),actionLanguageErrorMessage:te.a.observable(!1),ActionType:te.a.observable(this.ad&&!b.a.isEmpty(this.ad.CallToAction)?this.ad.CallToAction:null),actionTextErrorMessage:te.a.observable(!1),urlOptionErrorMessage:te.a.observable(!1),adGroupId:Number(this.viewContext.currentAdGroup.Id),campaignId:Number(this.viewContext.currentCampaign.Id),showWebsiteImageOptIn:te.a.observable(!1),hasWebsiteImageOptIn:te.a.observable(n&&n.Data&&n.Data.OptIn)},this.initializeAdModel(),this.initializeAdContent(),this.ad&&this.ad.errors&&this.initializeAdError(),this.viewModel.hasWebsiteImageOptIn.subscribe(function(t){e.preferencesService.setAtUserLevel({Name:e.websiteImageOptInPreferenceName,Data:{OptIn:t}}),e.hasWebsiteImageOptedInObservable(t)})}},{key:"clear",value:function(){this.isUpdate=!1,this.ad=null,this.initializeAdModel(),this.initializeAdContent(),te.a.cleanNode(this.el),this.render()}},{key:"initializeAdModel",value:function(){var e=this,t=Object(ae.cloneDeep)(k.a.get("$/schema!campaign/ResponsiveAd")),i=["Campaign","AdGroup",!this.isMMAEnabled&&"Headline",!this.isMMAEnabled&&"LongHeadline","BusinessName",!this.isMMAEnabled&&"Text","FinalUrls",this.isMobileUrlEnabled&&"MobileFinalUrls","TrackingUrlTemplate","FinalUrlSuffix","UrlCustomParameters","CallToAction",this.isMultiMediaAdsPhase2Enabled&&"CallToActionLanguage","Images",this.isImpressionTrackingUrlsEnabled&&"ImpressionTrackingUrls"];this.permissions.IncreaseResponsiveAdsHeadlineLength&&(t.properties.Headline.maxLength=30),this.isMMAEnabled&&(this.headlineFields=fe,b.a.each(this.headlineFields,function(e){t.properties[e]=b.a.clone(t.properties.Headline)}),i.push(this.headlineFields),this.isUpdate&&(0===this.initHeadlines?this.ad.Headline0=this.ad.Headline:b.a.each(this.ad.Headlines,function(t,i){e.ad[e.headlineFields[i]]=b.a.isEmpty(t.Asset)?t.Text:t.Asset.Text})),this.longHeadlineFields=ve,b.a.each(this.longHeadlineFields,function(e){t.properties[e]=b.a.clone(t.properties.LongHeadline)}),i.push(this.longHeadlineFields),this.isUpdate&&(0===this.initLongHeadlines?this.ad.LongHeadline0=this.ad.LongHeadline:b.a.each(this.ad.LongHeadlines,function(t,i){e.ad[e.longHeadlineFields[i]]=b.a.isEmpty(t.Asset)?t.Text:t.Asset.Text})),this.descriptionFields=be,b.a.each(this.descriptionFields,function(e){t.properties[e]=b.a.clone(t.properties.Text)}),i.push(this.descriptionFields),this.isUpdate&&(0===this.initDescriptions?this.ad.Description0=this.ad.Text:b.a.each(this.ad.Descriptions,function(t,i){e.ad[e.descriptionFields[i]]=b.a.isEmpty(t.Asset)?t.Text:t.Asset.Text})));var n=Object(ie.BackboneSchema)(t,this.i18n,b.a.flatten(b.a.compact(i)),this.ad);this.model=new n,this.model.set({CallToAction:this.ad&&!b.a.isEmpty(this.ad.CallToAction)?this.ad.CallToAction:"Default"}),this.isMultiMediaAdsPhase2Enabled&&this.model.set({CallToActionLanguage:this.ad&&!b.a.isEmpty(this.ad.CallToActionLanguage)?this.ad.CallToActionLanguage:null}),this.viewModel.model=this.model}},{key:"overrideEvents",value:function(e,t){var i;e.delegateEvents((i={},Object(I.a)(i,"input .".concat(t,"-value"),function(i){e.entity.set(t,i.target.value),e.trigger("input-changed",i),e.setState({showError:!0})}),Object(I.a)(i,"click .".concat(t,"-value"),function(t){e.trigger("input-focused",t)}),i))}},{key:"initializeAdContent",value:function(){var e=this;if(Oe=null,this.isMMAEnabled){if(b.a.each(this.headlineFields,function(t){e[t]=new ne.InputControl({entity:e.model,field:t,ariaLabelledby:"responsiveAdShortHeadlineLabel"}),e.overrideEvents(e[t],t),e[t].on("input-changed",function(){var i=e.model.toJSON(),n=b.a.first(b.a.filter(e.headlineFields,function(e){return!b.a.isEmpty(i[e])})),a={updatedElement:"ShortHeadline",text:i[n]};e.activityLogger.signal("ad field change: ".concat(t),"responsive ad editor"),e.trigger("fieldUpdated",a)}),e["".concat(t,"RemainingCharsHint")]=new re.RemainingCharsHint({i18n:e.i18n,model:e.model,field:t}),Pe({element:e[t],field:t,viewModel:e.viewModel,pageContext:e.pageContext,assetType:Ce,i18n:e.i18n,activityLogger:e.activityLogger,scenario:e.responsiveAdScenario})}),b.a.each(this.longHeadlineFields,function(t){e[t]=new ne.InputControl({entity:e.model,field:t,ariaLabelledby:"responsiveAdLongHeadlineLabel"}),e.overrideEvents(e[t],t),e[t].on("input-changed",function(){var i=e.model.toJSON(),n=b.a.first(b.a.filter(e.longHeadlineFields,function(e){return!b.a.isEmpty(i[e])})),a={updatedElement:"LongHeadline",text:i[n]};e.activityLogger.signal("ad field change: ".concat(t),"responsive ad editor"),e.trigger("fieldUpdated",a)}),e["".concat(t,"RemainingCharsHint")]=new re.RemainingCharsHint({i18n:e.i18n,model:e.model,field:t}),Pe({element:e[t],field:t,viewModel:e.viewModel,pageContext:e.pageContext,assetType:xe,i18n:e.i18n,activityLogger:e.activityLogger,scenario:e.responsiveAdScenario})}),b.a.each(this.descriptionFields,function(t){e[t]=new ne.InputControl({entity:e.model,field:t,ariaLabelledby:"responsiveAdDescriptionLabel"}),e.overrideEvents(e[t],t),e[t].on("input-changed",function(){var i=e.model.toJSON(),n=b.a.first(b.a.filter(e.descriptionFields,function(e){return!b.a.isEmpty(i[e])})),a={updatedElement:"Description",text:i[n]};e.activityLogger.signal("ad field change: ".concat(t),"responsive ad editor"),e.trigger("fieldUpdated",a)}),e["".concat(t,"RemainingCharsHint")]=new re.RemainingCharsHint({i18n:e.i18n,model:e.model,field:t}),Pe({element:e[t],field:t,viewModel:e.viewModel,pageContext:e.pageContext,assetType:ke,i18n:e.i18n,activityLogger:e.activityLogger,scenario:e.responsiveAdScenario})}),this.isMultiMediaAdsPhase2Enabled){var t=k.a.get("campaignui/feature/adextension/actionlink/view/language-adapter");this.actionLanguageAdapter=new t({observable:this.viewModel.Language,viewModel:this.viewModel,entity:this.model,field:"CallToActionLanguage",isMultimediaAd:this.isMultimediaAd,callback:function(t){e.model.set("CallToActionLanguage",t.id),e.trigger("fieldUpdated",{updatedElement:"CallToActionLanguage",text:t.value})}});var i=k.a.get("campaignui/feature/adextension/actionlink/view/action-type-adapter");this.actionTypeAdapter=new i({observable:this.viewModel.ActionType,viewModel:this.viewModel,entity:this.model,field:"CallToAction",isMultimediaAd:this.isMultimediaAd,callback:function(t){e.model.set("CallToAction",t.id),e.trigger("fieldUpdated",{updatedElement:"CallToAction",text:t.value})}})}}else this.shortHeadline=new ne.InputControl({entity:this.model,field:"Headline",ariaLabelledby:"responsiveAdShortHeadlineLabel"}),this.shortHeadline.on("input-changed",function(){var t={updatedElement:"ShortHeadline",text:e.shortHeadline.getState().value};e.activityLogger.signal("ad field change: shortHeadline","responsive ad editor"),e.trigger("fieldUpdated",t)}),this.overrideEvents(this.shortHeadline,"Headline"),this.isResponsiveAdTextRecommendationEnabled&&Pe({element:this.shortHeadline,field:"Headline",viewModel:this.viewModel,pageContext:this.pageContext,assetType:Ce,i18n:this.i18n,activityLogger:this.activityLogger,scenario:this.responsiveAdScenario}),this.shortHeaderRemainingCharsHint=new re.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"Headline"}),this.longHeadline=new ne.InputControl({entity:this.model,field:"LongHeadline",ariaLabelledby:"responsiveAdLongHeadlineLabel"}),this.overrideEvents(this.longHeadline,"LongHeadline"),this.isResponsiveAdTextRecommendationEnabled&&Pe({element:this.longHeadline,field:"LongHeadline",viewModel:this.viewModel,pageContext:this.pageContext,assetType:xe,i18n:this.i18n,activityLogger:this.activityLogger,scenario:this.responsiveAdScenario}),this.longHeaderRemainingCharsHint=new re.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"LongHeadline"}),this.longHeadline.on("input-changed",function(){var t={updatedElement:"LongHeadline",text:e.longHeadline.getState().value};e.activityLogger.signal("ad field change: longHeadline","responsive ad editor"),e.trigger("fieldUpdated",t)}),this.description=new ne.InputControl({entity:this.model,field:"Text",ariaLabelledby:"responsiveAdDescriptionLabel"}),this.overrideEvents(this.description,"Text"),this.isResponsiveAdTextRecommendationEnabled&&Pe({element:this.description,field:"Text",viewModel:this.viewModel,pageContext:this.pageContext,assetType:Ae,i18n:this.i18n,activityLogger:this.activityLogger,scenario:this.responsiveAdScenario}),this.descriptionRemainingCharsHint=new re.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"Text"}),this.description.on("input-changed",function(){var t={updatedElement:"Description",text:e.description.getState().value};e.activityLogger.signal("ad field change: description","responsive ad editor"),e.trigger("fieldUpdated",t)});this.businessName=new ne.InputControl({entity:this.model,field:"BusinessName",ariaLabelledby:"responsiveAdBusinessNameLabel"}),this.businessName.on("input-changed",function(){var t={updatedElement:"BusinessName",text:e.businessName.getState().value};e.activityLogger.signal("ad field change: businessName","responsive ad editor"),e.trigger("fieldUpdated",t)}),this.overrideEvents(this.businessName,"BusinessName"),this.isResponsiveAdTextRecommendationEnabled&&Pe({element:this.businessName,field:"BusinessName",viewModel:this.viewModel,pageContext:this.pageContext,assetType:Te,i18n:this.i18n,activityLogger:this.activityLogger,scenario:this.responsiveAdScenario}),this.businessNameRemainingCharsHint=new re.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"BusinessName"});var n=k.a.get("component/url-input/view/url-input");this.finalUrlEditor=new n({url:b.a.first(b.a.result(this.model.attributes,"FinalUrls")),ariaLabelledby:"responsiveAdFinalUrlLabel",ariaId:"responsiveAdFinalUrl",required:!0}),this.mobileUrlEditor=new n({url:b.a.first(b.a.result(this.model.attributes,"MobileFinalUrls")),ariaLabelledby:"responsiveAdMobileUrlLabel",ariaId:"responsiveAdMobileUrl"}),this.isImpressionTrackingUrlsEnabled&&(this.ImpressionTrackingUrlsUrlOptions=new w.ImpressionTrackingUrlOptions({i18n:this.i18n,initialImpressionTrackingUrls:this.model.get("ImpressionTrackingUrls"),maxImpressionTrackingUrlsCount:2,isIASSectionVisible:!1}),this.ImpressionTrackingUrlsUrlOptions.on("InputChange",function(t){e.model.errors.unset("ImpressionTrackingUrl"),e.model.set("ImpressionTrackingUrls",t),e.ImpressionTrackingUrlsUrlOptions.removeErrors()})),this.finalUrlEditor.on("urlChanged",function(t){e.activityLogger.signal("ad field change: finalUrls","responsive ad editor"),t?(e.model.set({FinalUrls:[t]}),e.finalUrlEditor.setError(""),e.trigger("fieldUpdated",{updatedElement:"FinalUrl",url:t})):(e.model.set({FinalUrls:[]}),e.trigger("fieldUpdated",{updatedElement:"FinalUrl",url:""}))}),function(e){var t=e.element,i=e.view,n=e.viewModel,a=e.pageContext,r=e.i18n,o=e.activityLogger,s=e.scenario;t.$el.addClass("ad-strength-suggestion-helper-area");var l=function(){null===Oe&&(Oe=new Ee({containerSelector:"div.ad-properties-section",pageContext:a,i18n:r,activityLogger:o})),Oe.getAdStrengthSuggestionForURL({view:i,viewModel:n,scenario:s})};t.on("urlChanged",b.a.debounce(l,300)),l()}({element:this.finalUrlEditor,viewModel:this.viewModel,pageContext:this.pageContext,view:this,i18n:this.i18n,activityLogger:this.activityLogger,scenario:this.responsiveAdScenario}),this.mobileUrlEditor.on("urlChanged",function(t){e.activityLogger.signal("ad field change: mobileFinalUrls","responsive ad editor"),e.model.set({MobileFinalUrls:t?[t]:[]}),t&&e.mobileUrlEditor.setError("")});var a=k.a.get("component/upgraded-url/view/urlOptionsV2");this.advancedURLOptions=new a({entityType:"Audience",placeholderEnabled:!0,trackingTemplate:b.a.result(this.model.attributes,"TrackingUrlTemplate"),finalUrlSuffix:b.a.result(this.model.attributes,"FinalUrlSuffix"),customParameters:b.a.isEmpty(b.a.result(this.model.attributes,"UrlCustomParameters"))?void 0:b.a.clone(this.model.attributes.UrlCustomParameters),showUurlTestTool:!0,isForVNext:this.isForVNext,activityLogger:this.activityLogger}),this.advancedURLOptions.on("testUurl",function(t,i){var n=k.a.get("component/upgraded-url/service/testUurl"),a=k.a.get("component/state/index");i.isInline=!1,i.level=n.uurlLevels.Ad;var r=e.getData()||{},o={customerId:a.get("customer_id"),userId:a.get("user_id"),accountId:a.get("account_id"),campaignId:a.get("campaign_id")||r.Campaign&&r.Campaign.Id||0,adGroupId:a.get("adgroup_id")||r.AdGroup&&r.AdGroup.Id||0,entityId:r.Id?r.Id:""};n.testUurl(t,i,r,o,{apiInLog:"responsive-ad-editor/uurlTest"})}),!this.isUpdate||this.isEmpty(this.ad.TrackingUrlTemplate)&&this.isEmpty(this.ad.UrlCustomParameters)&&this.isEmpty(this.ad.FinalUrlSuffix)||this.advancedURLOptions.expand(),this.adPropertiesToControlMap={FinalUrls:this.finalUrlEditor,MobileFinalUrls:this.mobileUrlEditor}}},{key:"initializeAdError",value:function(){var e=this;b.a.forEach(this.ad.errors,function(t){e.setError(t)})}},{key:"addHeadline",value:function(e){e.currentTarget.blur(),this.viewModel.showHeadlineCount()<le.MAX_HEADLINES&&(this.viewModel.showHeadlineCount(this.viewModel.showHeadlineCount()+1),this.activityLogger.signal("headline clicked: MMAinMSAN ".concat(this.isAudienceCampaignMultiMediaAdsEnabled),"responsive ad editor"))}},{key:"addLoneHeadline",value:function(e){e.currentTarget.blur(),this.viewModel.showLongHeadlineCount()<le.MAX_LONGHEADLINES&&(this.viewModel.showLongHeadlineCount(this.viewModel.showLongHeadlineCount()+1),this.activityLogger.signal("long headline clicked: MMAinMSAN ".concat(this.isAudienceCampaignMultiMediaAdsEnabled),"responsive ad editor"))}},{key:"addDescription",value:function(e){e.currentTarget.blur(),this.viewModel.showDescriptionCount()<le.MAX_DESCRIPTIONS&&(this.viewModel.showDescriptionCount(this.viewModel.showDescriptionCount()+1),this.activityLogger.signal("description clicked: MMAinMSAN ".concat(this.isAudienceCampaignMultiMediaAdsEnabled),"responsive ad editor"))}},{key:"expandCTA",value:function(){this.viewModel.isCTAExpanded(!this.viewModel.isCTAExpanded())}},{key:"removeHeadline",value:function(e){var t=Number(e.currentTarget.dataset.id);this.shiftOneIndex("Headline",t,this.viewModel.showHeadlineCount()),this.viewModel.showHeadlineCount(this.viewModel.showHeadlineCount()-1)}},{key:"removeLongHeadline",value:function(e){var t=Number(e.currentTarget.dataset.id);this.shiftOneIndex("LongHeadline",t,this.viewModel.showLongHeadlineCount()),this.viewModel.showLongHeadlineCount(this.viewModel.showLongHeadlineCount()-1)}},{key:"removeDescription",value:function(e){var t=Number(e.currentTarget.dataset.id);this.shiftOneIndex("Description",t,this.viewModel.showDescriptionCount()),this.viewModel.showDescriptionCount(this.viewModel.showDescriptionCount()-1)}},{key:"shiftOneIndex",value:function(e,t,i){var n,a=this,r="".concat(e).concat(t);if(b.a.some(this.viewModel.currentSuggestions,function(e){return e.Text===a[r].getState().value})?this.activityLogger.signal("".concat(r,", ").concat(this[r].getState().value),"".concat(this.responsiveAdScenario," delete a suggested asset")):this.activityLogger.signal("".concat(r,", ").concat(this[r].getState().value),"".concat(this.responsiveAdScenario," delete an asset")),t>=i-1)this[r]&&this[r].setState({value:""});else{for(var o=t;o<i-1;o+=1){var s=this[n="".concat(e).concat(o+1)].getState().value;this[r].setState({value:s}),r=n}this[n]&&this[n].setState({value:""})}}},{key:"render",value:function(){var e=this;return this.$el.html(se()({i18n:this.i18n,callToAction:Me,showSaveButton:this.showSaveButton,isImpressionTrackingUrlsEnabled:this.isImpressionTrackingUrlsEnabled,isMultiMediaAdsPhase2Enabled:this.isMultiMediaAdsPhase2Enabled,isMMAEnabled:this.isMMAEnabled,isResponsiveAdTextRecommendationEnabled:this.isResponsiveAdTextRecommendationEnabled,isMoveFinalUrlTop:this.isMoveFinalUrlTop,headlineFields:this.headlineFields,longHeadlineFields:this.longHeadlineFields,descriptionFields:this.descriptionFields})),te.a.applyBindings(this.viewModel,this.el),this.isMMAEnabled?(b.a.each(this.headlineFields,function(t,i){e.$(".short-headline-form-".concat(i," .short-headline-form")).append(e[t].render().el),e.$(".short-headline-form-".concat(i," > .remaining-chars-hint-container")).append(e["".concat(t,"RemainingCharsHint")].render().el)}),b.a.each(this.longHeadlineFields,function(t,i){e.$(".long-headline-form-".concat(i," .long-headline-form")).append(e[t].render().el),e.$(".long-headline-form-".concat(i," > .remaining-chars-hint-container")).append(e["".concat(t,"RemainingCharsHint")].render().el)}),b.a.each(this.descriptionFields,function(t,i){e.$(".description-form-".concat(i," .description-form")).append(e[t].render().el),e.$(".description-form-".concat(i," > .remaining-chars-hint-container")).append(e["".concat(t,"RemainingCharsHint")].render().el)}),this.isMultiMediaAdsPhase2Enabled&&(this.$(".action-language").append(this.actionLanguageAdapter.render().el),this.$(".action-text").append(this.actionTypeAdapter.render().el))):(this.$(".short-headline-form").append(this.shortHeadline.render().el),this.$(".short-headline > .remaining-chars-hint-container").append(this.shortHeaderRemainingCharsHint.render().el),this.$(".long-headline-form").append(this.longHeadline.render().el),this.$(".long-headline > .remaining-chars-hint-container").append(this.longHeaderRemainingCharsHint.render().el),this.$(".description-form").append(this.description.render().el),this.$(".description > .remaining-chars-hint-container").append(this.descriptionRemainingCharsHint.render().el)),this.$(".business-name-form").append(this.businessName.render().el),this.$(".business-name > .remaining-chars-hint-container").append(this.businessNameRemainingCharsHint.render().el),this.$(".final-url").append(this.finalUrlEditor.render().el),this.isMobileUrlEnabled?this.$(".mobile-url").append(this.mobileUrlEditor.render().el):this.$(".mobile-url").remove(),this.isImpressionTrackingUrlsEnabled&&this.$(".impression-tracking-urls").append(this.ImpressionTrackingUrlsUrlOptions.render().el),this.$(".advanced-url-options").append(this.advancedURLOptions.render().el),this.$(".generic-errors").append(this.genericErr.render().el),this}},{key:"isEmpty",value:function(e){return null==e||0===e.length}},{key:"isDataValid",value:function(e){var t=!0;return this.isMMAEnabled&&(this.isMultiMediaAdsPhase2Enabled&&(b.a.isEmpty(e.CallToActionLanguage)?(t=!1,this.viewModel.actionLanguageErrorMessage(this.i18n.getString("Validation_NotEmpty_Required_Field"))):this.viewModel.actionLanguageErrorMessage(!1),b.a.isEmpty(e.CallToAction)||"Default"===e.CallToAction?(t=!1,this.viewModel.actionTextErrorMessage(this.i18n.getString("Validation_NotEmpty_Required_Field"))):this.viewModel.actionTextErrorMessage(!1)),b.a.isEmpty(e.Headlines)||JSON.parse(e.Headlines).length<le.MIN_HEADLINES?(t=!1,this.viewModel.headlinesErrorMessage(this.i18n.getString("Multimedia_Ad_Error_AssetFieldMinimumNotMet",{field:this.i18n.getString("Audience_Campaign_Ad_Short_Headline_Label").toLowerCase(),min_count:le.MIN_HEADLINES}))):this.viewModel.headlinesErrorMessage(!1),b.a.isEmpty(e.LongHeadlines)||JSON.parse(e.LongHeadlines).length<le.MIN_LONGHEADLINES?(t=!1,this.viewModel.longHeadlinesErrorMessage(this.i18n.getString("Multimedia_Ad_Error_AssetFieldMinimumNotMet",{field:this.i18n.getString("Audience_Campaign_Ad_Long_Headline_Label").toLowerCase(),min_count:le.MIN_LONGHEADLINES}))):this.viewModel.longHeadlinesErrorMessage(!1),b.a.isEmpty(e.Descriptions)||JSON.parse(e.Descriptions).length<le.MIN_DESCRIPTIONS?(t=!1,this.viewModel.descriptionsErrorMessage(this.i18n.getString("Multimedia_Ad_Error_AssetFieldMinimumNotMet",{field:this.i18n.getString("Audience_Campaign_Ad_Description_Label").toLowerCase(),min_count:le.MIN_DESCRIPTIONS}))):this.viewModel.descriptionsErrorMessage(!1),this.viewModel.businessNameErrorMessage(!1),this.viewModel.urlOptionErrorMessage(!1)),this.isEmpty(e.FinalUrls)&&(t=!1,this.finalUrlEditor.setError(this.i18n.getString("Audience_Campaign_Ad_Error_RequiredField"))),this.model.isValid()?t:(this.isMMAEnabled||(this.shortHeadline.setState({showError:!0}),this.longHeadline.setState({showError:!0}),this.description.setState({showError:!0})),this.businessName&&this.businessName.setState({showError:!0}),!1)}},{key:"setError",value:function(e){if(e.Property&&b.a.includes(b.a.keys(this.adPropertiesToControlMap),e.Property))return this.adPropertiesToControlMap[e.Property].setError(this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))),!0;var t=0;if(e.Error&&-1!==e.Error.toLowerCase().indexOf("impressiontrackingurl")){var i=this.model.errors.get("ImpressionTrackingUrl")instanceof Array?this.model.errors.get("ImpressionTrackingUrl").concat(this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))):[this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))];this.model.errors.set({ImpressionTrackingUrl:i}),this.ImpressionTrackingUrlsUrlOptions.setErrors(i),t=1}if("ResponsiveAdHeadlines"===e.Property&&this.viewModel.headlinesErrorMessage(this.i18n.getString("Multimedia_Ad_Error_".concat(e.Error),{field:"short headline",min_count:le.MIN_HEADLINES})||this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))),"ResponsiveAdLongHeadlines"===e.Property&&this.viewModel.longHeadlinesErrorMessage(this.i18n.getString("Multimedia_Ad_Error_".concat(e.Error),{field:"long headline",min_count:le.MIN_LONGHEADLINES})||this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))),"ResponsiveAdDescriptions"===e.Property&&this.viewModel.descriptionsErrorMessage(this.i18n.getString("Multimedia_Ad_Error_".concat(e.Error),{field:"ad text",min_count:le.MIN_DESCRIPTIONS})||this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))),"BusinessName"===e.Property&&this.viewModel.descriptionsErrorMessage(this.i18n.getString("Multimedia_Ad_Error_".concat(e.Error))),("CustomParameters"===e.Property||e.Error&&-1!==e.Error.toLowerCase().indexOf("customparameters"))&&this.viewModel.urlOptionErrorMessage(this.i18nErrors.getString("Error_Campaign_API_".concat(e.Error))),b.a.isEmpty(e.Property)&&!t){var n=this.i18nErrors.getString("API_ErrorNumber_".concat(e.ErrorNumber))||e.message||this.i18nErrors.getString("ErrorNumber_-1");this.genericErr.setErrorMessage(n)}return!1}},{key:"getData",value:function(){var e=this.advancedURLOptions.getTrackingTemplate(),t=this.advancedURLOptions.getUrlCustomParameters(!0),i=this.advancedURLOptions.getFinalUrlSuffix();this.model.set({TrackingUrlTemplate:e,UrlCustomParameters:t,FinalUrlSuffix:i});var n=this.model.toJSON(),a=Number(this.viewContext.currentAdGroup.Id),r=Number(this.viewContext.currentCampaign.Id);return b.a.extend(n,{Campaign:{Id:r},AdGroup:{Id:a}}),this.isUpdate&&(n.Id=this.ad.Id,n=this.deleteUndefinedParameters(n)),this.isMMAEnabled&&(n.Headlines=JSON.stringify(b.a.map(b.a.filter(this.headlineFields,function(e){return!b.a.isEmpty(n[e])}),function(e){return{Text:n[e]}})),n.LongHeadlines=JSON.stringify(b.a.map(b.a.filter(this.longHeadlineFields,function(e){return!b.a.isEmpty(n[e])}),function(e){return{Text:n[e]}})),n.Descriptions=JSON.stringify(b.a.map(b.a.filter(this.descriptionFields,function(e){return!b.a.isEmpty(n[e])}),function(e){return{Text:n[e]}}))),b.a.omit(n,this.isEmpty)}},{key:"deleteUndefinedParameters",value:function(e){var t=this,i=["MobileFinalUrls","TrackingUrlTemplate","UrlCustomParameters","LandscapeLogoMediaId","SquareLogoMediaId","FinalUrlSuffix"];return this.isImpressionTrackingUrlsEnabled&&i.push("ImpressionTrackingUrls"),this.isMMAEnabled&&i.push.apply(i,["Headline","LongHeadline","Text"]),b.a.forEach(i,function(i){(t.isEmpty(e[i])||e[i]instanceof Array&&0===e[i].length)&&(e[i]="delete_value")}),e}},{key:"events",get:function(){return{"click .save-ad-button":"saveAdAsync","click .ad-mma-add-headline":"addHeadline","click .ad-mma-add-long-headline":"addLoneHeadline","click .ad-mma-add-description":"addDescription","click .expand-cta-options":"expandCTA","click .headline-delete":"removeHeadline","click .long-headline-delete":"removeLongHeadline","click .description-delete":"removeDescription"}}}]),t}(X.a.View),Le=F.j.subTypeToType,De=F.j.getImageTypesWithOrder,Re=function(e,t,i){var n=e.IdString||String(e.Id),a=t[n];return{id:n,baseId:a.baseId,metadata:a.metadata,src:a.url,type:Le[e.SubType],width:a.width,height:a.height,cropSettings:{SourceX:e.CropX?e.CropX:0,SourceY:e.CropY?e.CropY:0,SourceWidth:e.CropWidth?e.CropWidth:a.width,SourceHeight:e.CropHeight?e.CropHeight:a.height},isIncluded:i}},Ne=function(e,t,i){var n=b.a.map(e,function(e){return e.Asset.Id});return n=b.a.compact(b.a.uniq(n)),b.a.map(n,function(e){var n="".concat(t,"Images(").concat(e,")");return i.get(n)})},Ve=function(e){var t=e.mTAssetArrays,i=e.baseURL,n=e.odata,a=e.isAdCreatorEnhancementsEnabled,r=[];return g.a.all(Ne(t,i,n)).then(function(e){if(r.push.apply(r,Object(O.a)(e)),a){var t=b.a.pluck(r,"Id"),o=b.a.chain(e).pluck("BaseIdString").compact().difference(t).map(function(e){return{Asset:{Id:e}}}).value();if(!b.a.isEmpty(o))return g.a.all(Ne(o,i,n))}return[]}).then(function(e){return r.push.apply(r,Object(O.a)(e)),b.a.reduce(r,function(e,t){return b.a.extend(e,Object(I.a)({},t.IdString,b.a.extend({url:t.Url,height:t.Height,width:t.Width},a&&{baseId:t.BaseIdString,metadata:t.Metadata})))},{})})},Be=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ve({mTAssetArrays:i,baseURL:t,odata:e,isAdCreatorEnhancementsEnabled:a}).then(function(e){var t=De(n),r=function(e){var t=e.mTAssetArrays,i=e.imageToUrlMap,n=e.imageTypesWithOrder,a=b.a.map(t,function(e){return new F.c(Re(e.Asset,i,!0))});return a=a.sort(function(e,t){return n.indexOf(e.Type)<n.indexOf(t.Type)?-1:1})}({mTAssetArrays:i,imageToUrlMap:e,imageTypesWithOrder:t});if(n){var o=F.j.getMmaAspectRatios(),s=(r=b.a.filter(r,function(e){return e.type in o})).reduce(function(e,t){var i=a?t.BaseId:t.Id;return Object(M.a)({},e,Object(I.a)({},i,Object(O.a)(e[i]||[]).concat([t])))},[]);return s=b.a.map(s,function(i,n){a&&function(e,t,i){var n,a=!1;1===b.a.chain(e).pluck("Id").uniq().size().value()&&(a=!0);var r={};b.a.each(e,function(e){var o,s=r[e.Id];if(b.a.isUndefined(s)){var l=Object(W.a)(e.Metadata)||{};r[e.Id]=l,o=l.effectSettings}else o=s.effectSettings;if(e.Id!==t&&o){var c=i.url,d=e.Src;e.setEffectSettings(b.a.defaults({effectSrc:d},o)),e.setSrc(c)}a&&!n&&(n={effectSettings:e.effectSettings})}),b.a.each(e,function(e){e.BaseImage.setSrc(e.Src),e.BaseImage.setEffectSettings(n&&n.effectSettings)})}(i,n,e[n]);var r=b.a.difference(t,b.a.pluck(i,"type")),o=Object(F.k)({originalImageToCrop:a?b.a.first(i).BaseImage:b.a.first(i),isMultimediaAd:!0});return b.a.map(t,function(e){var t;return r.indexOf(e)>=0?((t=b.a.find(o,function(t){return t.type===e})).setIncluded(!1),a&&(t.setBaseImage(i[0].BaseImage.clone()),t.setEffectSettings(t.BaseImage.EffectSettings))):t=b.a.find(i,function(t){return t.type===e}),t})}),b.a.values(s)}return r.length===t.length?r:function(e){var t=Object(F.k)({originalImageToCrop:e[0],isMultimediaAd:!1}),i=[];return b.a.each(t,function(t){var n=b.a.find(e,function(e){return e.Type===t.Type});n?i.push(n):i.push(t)}),i}(r)})},Fe=function(e,t,i){var n={},a=b.a.pluck(i,"Asset").map(function(e){return{Asset:e.CustomThumbnailAsset||{}}});return Ve({mTAssetArrays:a,baseURL:t,odata:e}).then(function(a){return g.a.all(F.j.videoTypesWithOrder.map(function(r){var o,s=i.find(function(e){return e.Asset.SubType===r}).Asset,l=s&&s.CustomThumbnailAsset;if(l){var c=Re(l,a,!0);c.type=l.SubType,o=new F.c(c)}if(o){n[o.Type]=o;var d="".concat(t,"Videos/").concat(s.Id);return e.get(d).then(function(e){return Object(F.m)(Object(M.a)({},e,{SubType:r}))})}return g.a.resolve(Object(F.l)(s))})).then(function(e){return{videoList:e,thumbnailRecord:n}})})};function Ue(e){var t=e;return Object(v.forEach)(["MobileFinalUrls","FinalUrlSuffix","TrackingUrlTemplate","UrlCustomParameters","LandscapeLogoMediaId","SquareLogoMediaId"],function(e){"delete_value"===t[e]&&(t=Object(v.omit)(t,e))}),t}var Ge={EmptyURL:"EmptyURL",InvalidURL:"InvalidURL",ServerError:"ServerError",FetchInProgress:"FetchInProgress",FetchSucceed:"FetchSucceed"},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};switch(e){case Ge.EmptyURL:i={emptyURL:!0};break;case Ge.InvalidURL:i={invalidURL:!0};break;case Ge.ServerError:i=t.error===U.b?{isTimeout:!0}:{unKnownError:!0};break;case Ge.FetchInProgress:i={inProgress:!0};break;case Ge.FetchSucceed:i={images:Object(v.map)(t&&t.Images,function(e){var t=e.ImageUrl;return{fullUrl:t,thumbnailUrl:e.ThumbnailUrl||t}}),hasMore:Object(U.d)(t)};break;default:throw new Error("unexpected status")}return{suggestion:i}},He=Object(M.a)({shortHeadline:"",longHeadline:"",description:"",businessName:"",url:"",callToAction:"",imageList:[],savedAdsList:[],videoList:[],thumbnailRecord:{},isAdEditShown:!0,imageErrorMessages:[],videoErrorMessages:[],genericErrorMessages:[],currentAd:null,isBlocking:!1,draftUnsaved:!1,isStockPhotoEnabled:!1,oDataConfig:null,videoUploading:!1,currentSelectedImageId:null,cropImage:null},ze(Ge.EmptyURL)),We=["CampaignSubtypeNotAllowedInCampaignType","AccountNotEnabledForVideoCampaign","ResponsiveAdInvalidVideo","ResponsiveAdDuplicateVideo","ResponsiveAdRequiredVideoMissing"],qe=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,e))).onAdFieldUpdated=function(e){var t=i.props.isAdCreatorV1Enabled;switch(e.updatedElement){case"LongHeadline":i.setState({longHeadline:e.text});break;case"ShortHeadline":i.setState({shortHeadline:e.text});break;case"Description":i.setState({description:e.text});break;case"BusinessName":i.setState({businessName:e.text});break;case"FinalUrl":var n=e.url,a={};if(t){var r=i.adEditRef.current.view.adPropertiesToControlMap.FinalUrls;b.a.isEmpty(n)?(a=ze(Ge.EmptyURL),r.setError(i.props.i18n.getString("Audience_Campaign_Ad_Error_RequiredField"))):Object(G.isValidUrl)(n)?(a=ze(Ge.FetchInProgress),r.setError("")):(a=ze(Ge.InvalidURL),r.setError(i.props.i18nErrors.getString("API_ErrorNumber_2611")))}i.setState(b.a.extend({url:n},a),t?function(){i.onFinalUrlChanged(n)}:void 0);break;case"CallToAction":i.setState({callToAction:e.text})}},i.onFinalUrlChanged=b.a.debounce(function(e){i.suggestionPoller.cancel(),i.state.suggestion.inProgress&&i.suggestionPoller.getLandingPageSuggestions({landingPageUrl:e,enableOfflinePollingDelay:i.props.enableOfflinePollingDelay})},1e3),i.onImageListUpdated=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n={imageList:e,cropImage:null};if(i.props.activityLogger.signal("image added: MMAinMSAN: ".concat(i.props.isMultimediaAdinMSANEnabled),"responsive ad editor"),(i.isMMAEnabled&&e.length>0||e.length===i.imageTypesWithOrder.length)&&(n.imageErrorMessages=[]),i.isMMAEnabled&&(t&&(n.currentSelectedImageId=t),i.findImageSetById(e,i.state.currentSelectedImageId)||(e.length>0?n.currentSelectedImageId=i.getDefaultCurrentSelectedImageId(e):n.currentSelectedImageId=null)),i.props.isAdCreatorV1Enabled){var a=b.a.flatten(n.imageList,1),r=b.a.some(a,function(e){return e.source===F.j.imageSources.Website});if(i.adEditRef.current){var o=i.adEditRef.current.view.viewModel.hasWebsiteImageOptIn();i.adEditRef.current.view.viewModel.showWebsiteImageOptIn(r),r?i.props.hasWebsiteImageOptedInObservable(o):i.props.hasWebsiteImageOptedInObservable(!0)}}i.setState(n)},i.onVideoListUpdated=function(e){var t={videoList:e,draftUnsaved:!1};e.length===F.j.videoTypesWithOrder.length&&(t.videoErrorMessages=[]);var n=0===i.initialVideos.length&&e.length===F.j.videoTypesWithOrder.length,a=i.initialVideos.length===e.length&&e.some(function(e,t){return e.Id!==i.initialVideos[t].Id});t.draftUnsaved=n||a,i.setState(t)},i.onSaveThumbnailAsDraft=function(e){var t=e.thumbnailRecord;i.props.activityLogger.signal("save video thumbnail as draft","responsive ad editor"),i.setState({thumbnailRecord:t,draftUnsaved:!0})},i.onVideoUploadStatusUpdate=function(e){i.setState({videoUploading:e,videoErrorMessages:[]})},i.onImagePreviewRequested=function(e){i.imagePreviewCarouselRef.current&&i.imagePreviewCarouselRef.current.setPreviewIndexByType(e)},i.onVideoPreviewRequested=function(e){i.videoPreviewCarouselRef.current&&i.videoPreviewCarouselRef.current.setPreviewIndexByType(e)},i.onImageSelected=function(e){i.setState({currentSelectedImageId:e})},i.onImageEditCancelled=function(){i.setState({cropImage:null})},i.onCropImage=function(e){i.setState({cropImage:e})},i.onAddAspectRatio=function(e){var t=i.state.imageList,n=b.a.find(i.state.imageList,function(e){return b.a.any(e,function(e){return e.Id===i.state.currentSelectedImageId})}),a=b.a.find(n,function(t){return t.type===e});if(a)b.a.extend(a,{isIncluded:!0});else{var r=Object(F.k)({originalImageToCrop:b.a.first(n),isMultimediaAd:i.props.isMultimediaAd,isMultimediaAdinMSANEnabled:i.props.isMultimediaAdinMSANEnabled}),o=b.a.find(r,function(t){return t.type===e});o.isIncluded=!0,n.push(o),n.sort(function(e,t){return t.aspectRatio-e.aspectRatio})}i.onImageListUpdated(t)},i.onRemoveAspectRatio=function(e){var t=i.state.imageList,n=b.a.find(i.state.imageList,function(e){return b.a.any(e,function(e){return e.Id===i.state.currentSelectedImageId})}),a=b.a.find(n,function(t){return t.type===e});b.a.extend(a,{isIncluded:!1}),i.onImageListUpdated(t)},i.onAdSaved=function(e){var t;(t=i.props.isMultimediaAdinMSANEnabled?b.a.pick(e,"Id","BusinessName","Headlines","LongHeadlines","Descriptions"):b.a.pick(e,"Id","Headline","LongHeadline","Text","BusinessName")).ThumbnailForAdList=(i.isVideo?i.state.videoList[0]:i.isMMAEnabled?i.state.imageList[0][0]:i.state.imageList[0]).ThumbnailForAdList,t.Id=parseInt(t.Id,10);var n=b.a.reject(i.state.savedAdsList,function(e){return parseInt(e.Id,10)===t.Id});i.setState(b.a.defaults({savedAdsList:Object(O.a)(n).concat([t]),isAdEditShown:!1,draftUnsaved:!1},He)),i.props.onAdSaved()},i.onEditAd=function(e){var t=i.props.isMultimediaAdinMSANEnabled;i.setState({isBlocking:!0});var n="";t&&(n=",Model.ResponsiveAd/Headlines,Model.ResponsiveAd/LongHeadlines,Model.ResponsiveAd/Descriptions"),i.props.responsiveAdRepository.getAdAsync(e,n).then(function(e){return i.setState({shortHeadline:e.Headline,longHeadline:e.LongHeadline,description:e.Text,businessName:e.BusinessName,url:b.a.first(e.FinalUrls),callToAction:e.CallToAction}),i.isVideo?Fe(i.props.odata,i.baseURL,e.Videos).then(function(t){var n=t.videoList,a=t.thumbnailRecord;i.setState({videoList:n,thumbnailRecord:a,isAdEditShown:!0,currentAd:e,draftUnsaved:!1}),i.initialVideos=n}):i.initializeImagesModelInternal({ad:e}).then(function(t){var n=t.images,a=t.currentSelectedImageId;i.setState({isAdEditShown:!0,currentAd:e,imageList:n,currentSelectedImageId:a})})}).finally(function(){i.setState({isBlocking:!1})})},i.onRemoveAd=function(e){i.setState({isBlocking:!0}),i.props.responsiveAdRepository.removeAdAsync(e).then(function(){var t=b.a.reject(i.state.savedAdsList,function(t){return parseInt(t.Id,10)===e});i.setState({savedAdsList:t,isAdEditShown:0===t.length})}).finally(function(){i.setState({isBlocking:!1})})},i.onCreateAd=function(){i.adEditRef.current&&i.adEditRef.current.view.clear(),i.setState(b.a.defaults({savedAdsList:i.state.savedAdsList},He)),i.initialVideos=[]},i.findImageSetById=function(e,t){return!!t&&(i.isAdCreatorEnhancementsEnabled?b.a.find(e,function(e){return e[0].BaseId.toString()===t.toString()}):b.a.find(e,function(e){return b.a.any(e,function(e){return e.Id.toString()===t.toString()})}))},i.isOnlyOneIncludedImage=function(e){var t=i.props.isMultimediaAdinMSANEnabled,n=i.state.imageList;return!!t&&1===b.a.filter(n,function(t){var i=t.find(function(t){return t.Type===e});return i&&i.IsIncluded},[]).length},e.isAdCreatorV1Enabled&&(i.suggestionPoller=new U.c({cid:e.cid,aid:e.aid,cmpId:e.viewContext.currentCampaign.Id,oDataConfig:e.oDataConfig,jobCompleteCallback:i.onPollingSuggestionCompleted.bind(Object(P.a)(Object(P.a)(i))),logger:Object(H.a)(i.props.instrumentation).websiteSuggestionActivity}),i.mediaRepository=new U.a({cid:e.cid,aid:e.aid,cmpId:e.viewContext.currentCampaign.Id,oDataConfig:e.oDataConfig}),i.imageOData=new z.a(e.cid,e.aid,e.oDataConfig)),i.perfMarker=e.perfMarker,i.perfMarker.willInit(),i.isMultiMediaAdsPhase2Enabled=e.permissions.IsMultiMediaAdsPhase2Enabled,i.IsVideoAdEditorEnabled=e.permissions&&e.permissions.IsVideoAdEditorEnabled,i.isAdCreatorEnhancementsEnabled=e.isAdCreatorV1Enabled&&e.permissions.IsAdCreatorEnhancementsEnabled,i.imageTypesWithOrder=F.j.getImageTypesWithOrder(i.props.isMultimediaAd),i.defaultPreviewFields={shortHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_ShortHeadline"),longHeadline:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_LongHeadline"),description:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_Description"),businessName:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_BusinessName"),callToAction:e.i18n.getString("Audience_Campaign_Ad_Preview_Default_CallToAction"),url:"https://example.com"};var n={};i.adEditRef=u.a.createRef(),i.imagePreviewCarouselRef=u.a.createRef(),i.videoPreviewCarouselRef=u.a.createRef(),i.saveAdAsync=i.saveAdAsync.bind(Object(P.a)(Object(P.a)(i))),i.cancelAdAsync=i.cancelAdAsync.bind(Object(P.a)(Object(P.a)(i))),i.isVideo=e.isVideo&&i.props.permissions.IsVideoAdsForCampaignEnabled,i.baseURL="/Customers(".concat(e.cid,")/Accounts(").concat(e.aid,")/");var r=i.props,l=r.isMultimediaAdinMSANEnabled,c=r.isMultimediaAd;return i.isMMAEnabled=l||c,i.adPreviewPerfMarker=i.props.perfMarker.createChild("adPreviewOpen"),e.ad&&(n.currentAd=e.ad,n.isBlocking=!1,n.shortHeadline=e.ad.Headline,n.longHeadline=e.ad.LongHeadline,n.description=e.ad.Text,(i.props.isMultimediaAd&&i.isMultiMediaAdsPhase2Enabled||l)&&(b.a.isEmpty(e.ad.Headlines)||(b.a.isEmpty(b.a.first(e.ad.Headlines).Asset)?n.shortHeadline=b.a.first(e.ad.Headlines).Text:n.shortHeadline=b.a.first(e.ad.Headlines).Asset.Text),b.a.isEmpty(e.ad.LongHeadlines)||(b.a.isEmpty(b.a.first(e.ad.LongHeadlines).Asset)?n.longHeadline=b.a.first(e.ad.LongHeadlines).Text:n.longHeadline=b.a.first(e.ad.LongHeadlines).Asset.Text),b.a.isEmpty(e.ad.Descriptions)||(b.a.isEmpty(b.a.first(e.ad.Descriptions).Asset)?n.description=b.a.first(e.ad.Descriptions).Text:n.description=b.a.first(e.ad.Descriptions).Asset.Text)),n.businessName=e.ad.BusinessName,n.callToAction=e.ad.CallToAction,n.url=b.a.first(e.ad.FinalUrls),n.imageList=e.ad.ImageList||[],b.a.isEmpty(n.imageList)||b.a.isEmpty(b.a.first(n.imageList))||(n.currentSelectedImageId=i.getDefaultCurrentSelectedImageId(n.imageList)),n.isStockPhotoEnabled=!0,n.oDataConfig={odataRootUrl:"test.com",odataPath:"/Mock/",odataToken:"token"},e.isAdCreatorV1Enabled&&(b.a.extend(n,ze(Ge.FetchInProgress)),i.onFinalUrlChanged(n.url))),i.state=b.a.defaults(n,He),i.initialVideos=[],i}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.openTime=new Date,this.props.ad&&(this.isVideo?this.fetchAndFillVideosAsync():b.a.isEmpty(this.state.imageList)&&this.fetchAndFillImagesAsync()),this.props.activityLogger.signal("ad editor opened: isGrid: ".concat(this.props.isGridDisplay,", isEdit: ").concat(!!this.props.ad,", isVideo: ").concat(!!this.isVideo),"responsive ad editor"),this.perfMarker.done()}},{key:"componentWillUnmount",value:function(){this.suggestionPoller&&this.suggestionPoller.cancel()}},{key:"onPollingSuggestionCompleted",value:function(e){e.error?this.setState(ze(Ge.ServerError,e)):this.setState(ze(Ge.FetchSucceed,e))}},{key:"getData",value:function(){var e=this.adEditRef.current.view.getData();if(this.isVideo){var t=b.a.map(this.state.videoList,function(e){return e.formatToSave()}),i=this.IsVideoAdEditorEnabled?b.a.map(b.a.compact(b.a.values(this.state.thumbnailRecord)),function(e){return e.formatToSave(!1,!1,!0)}):[];e.Videos=JSON.stringify(Object(O.a)(t).concat(Object(O.a)(i)))}else this.props.isMultimediaAdinMSANEnabled?e.Images=JSON.stringify(Y(this.state.imageList)):b.a.extend(e,this.getImagesDataModel({flattenedImageAssetList:this.getFlattenedImageAssetList()}));return this.props.isMobileUrlEnabled||(e=b.a.omit(e,["MobileFinalUrls"])),this.props.isImpressionTrackingUrlsEnabled||(e=b.a.omit(e,["ImpressionTrackingUrls"])),e}},{key:"setResponseErrors",value:function(e){var t=this;b.a.forEach(e,function(e){t.adEditRef.current.view.setError(e)||t.setState({genericErrorMessages:Object(O.a)(t.state.genericErrorMessages).concat([e.message])})})}},{key:"getImagesForPreview",value:function(){if(this.isMMAEnabled){if(this.state.currentSelectedImageId){var e=this.findImageSetById(this.state.imageList,this.state.currentSelectedImageId);if(e)return e}if(this.state.imageList.length>0)return b.a.first(this.state.imageList)}return this.state.imageList}},{key:"getFlattenedImageAssetList",value:function(){var e=this.props.isMultimediaAd?this.getMMAImageList():this.state.imageList;return b.a.flatten(e,1)}},{key:"getMMAImageList",value:function(){return b.a.map(this.state.imageList,function(e){return b.a.filter(e,function(e){return e.type in F.j.getMmaAspectRatios()&&e.isIncluded})})}},{key:"getImagesDataModel",value:function(e){var t=this,i=e.flattenedImageAssetList,n=b.a.map(i,function(e){return e.formatToSave(t.props.isMultimediaAd)});return{Images:JSON.stringify(n)}}},{key:"getDefaultCurrentSelectedImageId",value:function(e){var t=b.a.first(e[0]);return this.isAdCreatorEnhancementsEnabled?t.BaseId:t.Id}},{key:"initializeImagesModelInternal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.perfMarker,n=t.ad,a=this.props,r=a.isMultimediaAdinMSANEnabled,o=a.ad,s=a.odata,l=a.isMultimediaAd,c=n||o,d=r?function(e,t,i){var n=Ne(i,t,e);return g.a.all(n).then(function(e){var t=b.a.reduce(e,function(e,t){return b.a.extend(e,Object(I.a)({},t.Id,{url:t.Url,height:t.Height,width:t.Width}))},{});return J(i.map(function(e){return e.Asset}),t)})}(s,this.baseURL,c.Images):Be(s,this.baseURL,c.Images,l,this.isAdCreatorEnhancementsEnabled);return i&&i.willInit(),d.then(function(t){var i=null;return e.isMMAEnabled&&t.length>0&&(i=e.getDefaultCurrentSelectedImageId(t)),{images:t,currentSelectedImageId:i}})}},{key:"fetchAndFillImagesAsync",value:function(){var e=this;this.setState({isBlocking:!0}),this.initializeImagesModelInternal({perfMarker:this.adPreviewPerfMarker}).then(function(t){var i=t.images,n=t.currentSelectedImageId;e.setState({imageList:i,currentSelectedImageId:n}),e.adPreviewPerfMarker.done()}).finally(function(){e.setState({isBlocking:!1})})}},{key:"fetchAndFillVideosAsync",value:function(){var e=this;this.setState({isBlocking:!0}),Fe(this.props.odata,this.baseURL,this.props.ad.Videos).then(function(t){var i=t.videoList,n=t.thumbnailRecord;e.setState({videoList:i,thumbnailRecord:n}),e.initialVideos=i}).catch(function(t){return e.setState({videoErrorMessages:[e.props.i18n.getString("ImageExperience_Video_Error_LoadVideoFail_Template",t)]})}).finally(function(){e.setState({isBlocking:!1})})}},{key:"hasCreatedAd",value:function(){return this.state.savedAdsList.length>0}},{key:"cancelAdAsync",value:function(){this.props.activityLogger.signal("cancel ad creation","responsive ad editor"),this.adEditRef.current&&this.adEditRef.current.view.clear(),this.setState(b.a.defaults({savedAdsList:this.state.savedAdsList,isAdEditShown:!1},He))}},{key:"convertImageExperienceModelToMetadataBuilderSource",value:function(e){return{effectSettings:e.EffectSettings,cropSettings:e.CropSettings}}},{key:"preProcessDataModel",value:function(e){var t=this;if(this.props.isAdCreatorV1Enabled){var i,n=[],a=[],r=this.getFlattenedImageAssetList();if(this.isAdCreatorEnhancementsEnabled?(i=b.a.reduce(r,function(e,t){var i=e[t.BaseId];return Object(M.a)({},e,Object(I.a)({},t.BaseId,b.a.extend(Object(M.a)({},i,{default:t.BaseId}),t.Metadata&&Object(I.a)({},t.Metadata,t.Id))))},{}),b.a.each(r,function(e,r){if(t.isAdCreatorEnhancementsEnabled){var o=Object(W.b)({effectSettings:e.EffectSettings});o===e.Metadata||b.a.isEmpty(o)&&b.a.isEmpty(e.Metadata)||(n.push({position:r,baseId:e.BaseId,metadata:o}),!b.a.isEmpty(o)&&b.a.isUndefined(i[e.BaseId][o])&&a.push({url:e.FinalSrc,baseId:e.BaseId,metadata:o}))}})):b.a.each(r,function(e,t){e.FinalSrc&&e.FinalSrc!==e.Src&&(n.push(t),a.push({url:e.FinalSrc}))}),!b.a.isEmpty(n))return(b.a.isEmpty(a)?g.a.resolve([]):this.imageOData.bulkSaveImagesByUrl(a)).then(function(o){if(b.a.any(o,function(e){return e&&e.code})){var s={errors:b.a.compact(b.a.map(o,function(e){return e.code&&{Error:e.code}}))};return g.a.reject(s)}return t.isAdCreatorEnhancementsEnabled?(b.a.each(o,function(e,t){var n=a[t],r=n.baseId,o=n.metadata;i[r][o]=e}),b.a.each(n,function(e){var t=e.position,n=e.baseId,a=e.metadata,o=i[n][a||"default"];b.a.extend(r[t],{id:o,idString:o.toString()})})):b.a.each(o,function(e,t){b.a.extend(r[n[t]],{id:e,idString:e.toString()})}),b.a.extend(e,t.getImagesDataModel({flattenedImageAssetList:r})),e})}return g.a.resolve(e)}},{key:"saveAdAsync",value:function(){var e=this;if(this.props.activityLogger.signal("click save ad","responsive ad editor"),!this.state.isAdEditShown)return g.a.resolve(!0);this.setState({imageErrorMessages:[],videoErrorMessages:[],genericErrorMessages:[]});var t=this.getData();return this.isDataValid(t)?(this.setState({isBlocking:!0}),this.preProcessDataModel(t).then(function(t){return e.props.responsiveAdRepository.saveAdAsync(t)}).then(function(t){if(b.a.isFinite(t.Id)){if(e.props.isMultimediaAd){b.a.defaults(t,{Type:"Responsive",ThumbnailForAdList:e.props.isAdCreatorV1Enabled?e.state.imageList[0][0].FinalSrc:e.state.imageList[0][0].ThumbnailForAdList,ImageList:e.state.imageList}),t=Ue(t);var i=Object(H.a)(e.props.instrumentation).saveAdActivity,n="SavedAdId: ".concat(t.Id,";");if(e.props.isAdCreatorV1Enabled){var a=Object(H.b)(e.getFlattenedImageAssetList());a.length>0?b.a.each(a,function(e){i.trace("".concat(n,"SmartEffectUsed: ").concat(e,";"))}):i.trace(n)}else i.trace(n)}return e.props.isGridDisplay||e.onAdSaved(t),e.props.activityLogger.signal("saved an ad","responsive ad editor"),e.props.activityLogger.signal("saved an ad: time cost: ".concat(new Date-e.openTime,", isGrid: ").concat(e.props.isGridDisplay,", isEdit: ").concat(!!e.props.ad,", isVideo: ").concat(e.isVideo,", isMMAinMSAN: ").concat(e.props.isMultimediaAdinMSANEnabled),"responsive ad editor"),e.openTime=new Date,t}return!1}).catch(function(t){if(t){var i=b.a.unique(t.errors,!1,function(e){return e.ErrorNumber});if(e.setResponseErrors(i),e.isVideo){var n=e.props.i18nErrors.getBulkApiErrors(i.filter(function(e){return We.includes(e.Error)})).map(function(t){return"ResponsiveAdInvalidVideo"===t.code?u.a.createElement(u.a.Fragment,null,t.message,u.a.createElement(B.HelpPopup,{topic:"pop_BA_VideoAds_VideoRequirements","aria-label":e.props.i18n.getString("Click to learn more about {{item}}",{item:e.props.i18n.getString("ImageExperience_Video_Requirement")})})):t.message});e.setState({videoErrorMessages:Object(O.a)(e.state.videoErrorMessages).concat(Object(O.a)(n))})}return b.a.each(i,function(t){e.props.activityLogger.signal(t.Error,"responsive ad creation api error")}),!1}return!1}).finally(function(){e.setState({isBlocking:!1})})):g.a.resolve(!1)}},{key:"saveToClient",value:function(){if(this.props.activityLogger.signal("click save ad to client","responsive ad editor"),!this.state.isAdEditShown)return g.a.resolve(!0);this.setState({imageErrorMessages:[],videoErrorMessages:[],genericErrorMessages:[]});var e=this.getData(this.isUpdate);return this.isDataValid(e)?(this.props.isMultimediaAd&&(b.a.defaults(e,{Type:"Responsive",ThumbnailForAdList:this.props.isAdCreatorV1Enabled?this.state.imageList[0][0].FinalSrc:this.state.imageList[0][0].ThumbnailForAdList,ImageList:this.state.imageList}),e=Ue(e)),this.props.isAdCreatorV1Enabled?this.preProcessDataModel(e):g.a.resolve(e)):g.a.resolve(!1)}},{key:"isMeetingMinimumRequirement",value:function(e){var t=F.j.getMmaAspectRatios(),i=b.a.mapObject(t,function(){return 0});return b.a.each(e,function(e){return b.a.each(e,function(e){e.isIncluded&&(i[e.type]+=1)})}),b.a.every(i,function(e,i){return e>=t[i].minimumRequirements})}},{key:"isDataValid",value:function(e){if(this.isVideo)return this.state.videoUploading?(this.setState({videoErrorMessages:[this.props.i18n.getString("ImageExperience_VideosUploading")]}),!1):this.state.videoList.length!==F.j.videoTypesWithOrder.length?(this.setState({videoErrorMessages:[this.props.i18n.getString("ImageExperience_VideosMissing")]}),!1):this.state.videoList.filter(function(e){return 0===e.Id||"Draft"!==e.Status&&"Active"!==e.Status&&"Unverified"!==e.Status}).length>0?(this.setState({videoErrorMessages:[this.props.i18n.getString("ImageExperience_InvalidVideo")]}),!1):this.adEditRef.current.view.isDataValid(e);if(this.props.isMultimediaAd){var t=this.getMMAImageList(),i=[];return(t.length<=0||!b.a.every(t,function(e){return b.a.every(e,function(e){return e.Id>0})})||!b.a.some(t,function(e){return b.a.some(e,function(e){return!0===e.isIncluded})}))&&(i=[this.props.i18n.getString("ImageExperience_ImagesAspectRatioRequired")]),this.isMultiMediaAdsPhase2Enabled&&!this.isMeetingMinimumRequirement(t)&&(i=[this.props.i18n.getString("ImageExperience_MinimumAspectRatioRequired")]),b.a.isEmpty(i)?this.adEditRef.current.view.isDataValid(e):(this.setState({imageErrorMessages:i}),!1)}if(this.props.isMultimediaAdinMSANEnabled){var n=[];return 0===this.state.imageList.length?(n=[this.props.i18n.getString("ImageExperience_ImagesRequired")],this.setState({imageErrorMessages:n}),!1):this.state.imageList.map(function(e){return e.find(function(e){return"Image191x100"===e.Type})}).every(function(e){return!e.IsIncluded})?(n=[this.props.i18n.getString("ImageExperience_LandscapeImageRequired")],this.setState({imageErrorMessages:n}),!1):this.adEditRef.current.view.isDataValid(e)}return this.state.imageList.length===this.imageTypesWithOrder.length&&b.a.every(this.state.imageList,function(e){return e.Id>0})?this.adEditRef.current.view.isDataValid(e):(this.setState({imageErrorMessages:[this.props.i18n.getString("ImageExperience_ImagesRequired")]}),!1)}},{key:"renderImageExperience",value:function(e){var t=this;return(!this.isVideo||!this.state.isBlocking)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(F.b,{shortHeadline:e.shortHeadline,longHeadline:e.longHeadline,description:e.description,businessName:e.businessName,url:e.url,callToAction:e.callToAction,odata:this.props.odata,cid:this.props.cid,aid:this.props.aid,i18n:this.props.i18n,imageList:this.state.imageList,isMultimediaAdinMSANEnabled:this.props.isMultimediaAdinMSANEnabled,videoList:this.state.videoList,customThumbnailRecord:this.state.thumbnailRecord,currentSelectedImageId:this.state.currentSelectedImageId,onImageEditCancelled:this.onImageEditCancelled,onImageSelected:this.onImageSelected,onImageListUpdated:function(e,i){return t.onImageListUpdated(e,i)},onImagePreviewRequested:this.onImagePreviewRequested,onVideoListUpdated:this.onVideoListUpdated,onVideoPreviewRequested:this.onVideoPreviewRequested,onSaveThumbnailAsDraft:this.onSaveThumbnailAsDraft,perfMarker:this.props.perfMarker,isForVNext:this.props.isForVNext,isMultimediaAd:this.props.isMultimediaAd,isStockPhotoEnabled:this.props.isStockPhotoEnabled,oDataConfig:this.props.oDataConfig,genericImage:this.props.genericImage,activityLogger:this.props.activityLogger,permissions:this.props.permissions,isVideo:this.props.permissions.IsVideoAdsForCampaignEnabled&&this.isVideo,onVideoUploadStatusUpdate:this.onVideoUploadStatusUpdate,cropImage:this.state.cropImage,suggestion:this.state.suggestion,suggestionPoller:this.suggestionPoller,isAdCreatorV1Enabled:this.props.isAdCreatorV1Enabled,mediaRepository:this.mediaRepository,finalUrl:this.state.url,isAdCreatorEnhancementsEnabled:this.isAdCreatorEnhancementsEnabled}),this.state.imageErrorMessages.length>0&&u.a.createElement("div",{className:"image-required-error error",role:"alert"},this.state.imageErrorMessages.map(function(e,t){return u.a.createElement("div",{className:"error",key:"".concat(t)},e)})),this.state.videoErrorMessages.length>0&&u.a.createElement("div",{className:"image-required-error error",role:"alert"},this.state.videoErrorMessages.map(function(e,t){return u.a.createElement("div",{className:"error",key:"".concat(t)},e)})),this.state.draftUnsaved&&u.a.createElement(N.MessageBar,{messageBarType:N.MessageBarType.warning,isMultiline:!1,styles:{root:{width:888}},onDismiss:function(){return t.setState({draftUnsaved:!1})}},this.props.i18n.getString("ImageExperience_UnsavedDraft_Warn")))}},{key:"render",value:function(){this.perfMarker.willRender();var e={longHeadline:this.state.longHeadline&&this.state.longHeadline.length>0?this.state.longHeadline:this.defaultPreviewFields.longHeadline,shortHeadline:this.state.shortHeadline&&this.state.shortHeadline.length>0?this.state.shortHeadline:this.defaultPreviewFields.shortHeadline,description:this.state.description&&this.state.description.length>0?this.state.description:this.defaultPreviewFields.description,businessName:this.state.businessName&&this.state.businessName.length>0?this.state.businessName:this.defaultPreviewFields.businessName,url:this.state.url&&this.state.url.length>0?this.state.url:this.defaultPreviewFields.url,callToAction:this.state.callToAction&&this.state.callToAction.length>0?this.state.callToAction:this.defaultPreviewFields.callToAction},t=this.props,i=t.isMultimediaAdinMSANEnabled,n=t.isMultimediaAd,a=i?u.a.createElement(F.f,{imageList:this.getImagesForPreview(),totalImageListCount:this.state.imageList.length,previewTexts:e,isOnlyOneIncludedImage:this.isOnlyOneIncludedImage,i18n:this.props.i18n,activityLogger:this.props.activityLogger,genericImage:this.props.genericImage,onCropImage:this.onCropImage,onAddAspectRatio:this.onAddAspectRatio,onRemoveAspectRatio:this.onRemoveAspectRatio}):u.a.createElement(F.g,{ref:this.imagePreviewCarouselRef,imageList:this.getImagesForPreview(),previewTexts:e,i18n:this.props.i18n,permissions:this.props.permissions,genericImage:this.props.genericImage,isMultimediaAd:this.props.isMultimediaAd,onCropImage:this.onCropImage,onAddAspectRatio:this.onAddAspectRatio,onRemoveAspectRatio:this.onRemoveAspectRatio,isAdCreatorV1Enabled:this.props.isAdCreatorV1Enabled,instrumentation:this.props.instrumentation,totalImageListCount:this.state.imageList.length});return u.a.createElement("div",{className:L()("crud-audience-ad-react",this.isMMAEnabled?"crud-multimedia-ad-react":"")},u.a.createElement(D.UiBlocker,{blocking:this.state.isBlocking,loadingText:this.props.i18n.getString("Loading")},!this.props.isGridDisplay&&u.a.createElement(F.h,{i18n:this.props.i18n,savedAdsList:this.state.savedAdsList,isEditable:!this.state.isAdEditShown,responsiveAdRepository:this.props.responsiveAdRepository,onEditAd:this.onEditAd,onRemoveAd:this.onRemoveAd,onCreateAnotherAd:this.onCreateAd,activityLogger:this.props.activityLogger,isVideo:this.isVideo}),this.state.isAdEditShown&&u.a.createElement("div",null,u.a.createElement("div",{className:"ad-iamge-container"},!n&&this.renderImageExperience(e)),u.a.createElement(V.Row,{className:"ad-edit-and-preview-container"},u.a.createElement(V.Col,{sm:5},u.a.createElement("div",{className:"ad-edit-with-image-container"},u.a.createElement(R.BackboneViewWrapper,{View:je,ref:this.adEditRef,options:{viewContext:this.props.viewContext,pageContext:this.props.pageContext,isVideo:this.isVideo,ad:this.state.currentAd,isForVNext:this.props.isForVNext,isMobileUrlEnabled:this.props.isMobileUrlEnabled,isImpressionTrackingUrlsEnabled:this.props.isImpressionTrackingUrlsEnabled,isMultimediaAd:this.props.isMultimediaAd,activityLogger:this.props.activityLogger,websiteImageOptInPreferenceName:F.j.preferenceFlags.MMAWebsiteImageOptIn,hasWebsiteImageOptedInObservable:this.props.hasWebsiteImageOptedInObservable},eventsToActions:[{event:"fieldUpdated",action:this.onAdFieldUpdated}]}))),u.a.createElement(V.Col,{sm:7},u.a.createElement("div",null,this.props.isMultimediaAd&&this.renderImageExperience(e),this.isVideo?u.a.createElement(F.i,{ref:this.videoPreviewCarouselRef,videoList:this.state.videoList,customThumbnailRecord:this.state.thumbnailRecord,previewTexts:e,i18n:this.props.i18n,activityLogger:this.props.activityLogger}):a))),!this.props.isMultimediaAd&&u.a.createElement("div",{className:"audience-ads-policy-container"},u.a.createElement("div",{className:"alert alert-info"},u.a.createElement("div",{className:"alert-image"}),u.a.createElement("div",{className:"alert-info-inline"},u.a.createElement("span",null,"".concat(this.props.i18n.getString("Audience_Campaign_Ad_Policy_Description")," ")),u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://go.microsoft.com/fwlink/?linkid=2028852"},this.props.i18n.getString("Audience_Campaign_Ad_Policy_Label")),u.a.createElement("span",null,".")))),u.a.createElement("div",{className:"generic-errors error"},this.state.genericErrorMessages.map(function(e,t){return u.a.createElement("div",{className:"error",key:"".concat(t)},e)})),!this.props.isGridDisplay&&u.a.createElement("div",{className:"ad-edit-action-buttons"},u.a.createElement(V.Button,{btnStyle:"primary",className:"save-ad-button",onClick:this.saveAdAsync},this.props.i18n.getString("Audience_Campaign_Ad_Save")),this.state.savedAdsList.length>0&&u.a.createElement(V.Button,{btnStyle:"default",className:"cancel-ad-button",onClick:this.cancelAdAsync},this.props.i18n.getString("Audience_Campaign_Cancel_Label"))))))}}]),t}(u.a.Component);qe.defaultProps={onAdSaved:b.a.noop,ad:null,pageContext:{},perfMarker:{willFetchFile:b.a.noop,willInit:b.a.noop,willFetchData:b.a.noop,willRender:b.a.noop,done:b.a.noop,createChild:b.a.noop},isForVNext:!1,isMultimediaAd:!1,isStockPhotoEnabled:!1,isMultimediaAdinMSANEnabled:!1,isMobileUrlEnabled:!0,isImpressionTrackingUrlsEnabled:!1,oDataConfig:null,permissions:{},isVideo:!1,isAdCreatorV1Enabled:!1,enableOfflinePollingDelay:!0,hasWebsiteImageOptedInObservable:b.a.noop};var $e=function(){function e(t){Object(a.a)(this,e),this.viewContext=t.viewContext,this.isVideo=t.isVideo,this.i18n=k.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.jsdata=k.a.get("component/js-data-campaign/index"),this.edmCampaign=k.a.get("component/edm-campaign/index")}return Object(r.a)(e,[{key:"getAdAsync",value:function(e,t){var i=this.viewContext.currentAdGroup.Id,n=this.viewContext.currentCampaign.Id,a={entitySet:this.edmCampaign.currentAccount.Campaigns.$withKey(n).AdGroups.$withKey(i).Ads,bypassCache:!0,queryParameters:{query:{$expand:this.isVideo?"Model.ResponsiveAd/Videos":"Model.ResponsiveAd/Images".concat(t)}}};return this.jsdata.Ad.find(e,a).then(function(e){var t=e;return t.Campaign={Id:n},t.AdGroup={Id:i},t})}},{key:"removeAdAsync",value:function(e){var t=this.viewContext.currentAdGroup.Id;return this.jsdata.Ad.destroy(e,{adapter:"bulk",parentId:t})}},{key:"saveAdAsync",value:function(e){var t=b.a.isArray(e.UrlCustomParameters)?b.a.defaults({UrlCustomParameters:b.a.map(e.UrlCustomParameters,function(e){return b.a.defaults({Value:b.a.contains(e.Value,";")?e.Value.replace(/;/g,"\\;"):e.Value},e)})},e):e;return e.Id>0?this.jsdata.ResponsiveAd.update(e.Id,t,{adapter:"bulk",cacheResponse:!1}):this.jsdata.ResponsiveAd.create(t,{adapter:"bulk",cacheResponse:!1})}}]),e}(),Ke=i("ARDw"),Je=i.n(Ke),Ze=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isForVNext=e.isForVNext,this.isMultimediaAd=e.isMultimediaAd||!1,this.perfMarker=e.perfMarker,this.perfMarker.willInit(),this.wizardElement=e.wizardElement,this.enableOfflinePollingDelay=e.enableOfflinePollingDelay,this.viewContext=e.viewContext||{},this.pageContext=e.pageContext||{},this.isGridDisplay=e.isGridDisplay||!1,this.isMobileUrlEnabled=null==e.isMobileUrlEnabled||e.isMobileUrlEnabled,this.isImpressionTrackingUrlsEnabled=b.a.result(e,["deps","pageContext","Permissions","IsImpressionTrackingUrlsEnabled"],!1)||b.a.result(e,["pageContext","Permissions","IsImpressionTrackingUrlsEnabled"],!1)||e.isImpressionTrackingUrlsEnabled,this.ad=e.ad,this.newI18n=e.newI18n,this.i18n=k.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=k.a.get("component/api-errors-campaign/index"),this.scenario=e.scenario,this.logScenario=e.logScenario,this.activityLogger=this.logScenario.createAds.create(),this.hasWebsiteImageOptedInObservable=e.hasWebsiteImageOptedInObservable,this.responsiveAdRepository=new $e({viewContext:this.viewContext,isVideo:e.isVideo}),this.noCreatedAdErr=new w.AudienceCampaignErrorsView,this.crudReactComponent=u.a.createRef(),this.onAdSaved=this.onAdSaved.bind(this);var t=k.a.get("component/config/index"),i=t.get("odata.token"),n=t.get("odata.url")+t.get("odata.path"),a=t.get("CampaignAzureDomain");this.permissions=t.get("Permissions"),this.isVideo=e.isVideo,this.isOpenCreatePanel=e.isOpenCreatePanel,this.isLastStep="ResponsiveAdEditor"===e.lastStep,this.applyActivity=e.applyActivity,this.isSwapStepsEnabled=this.permissions.IsAudienceCampaignSwapAdsBudgetAndBidsEnabled&&"adgroup-creation"!==this.scenario,this.isMultimediaAdinMSANEnabled=("Audience"===b.a.result(this.viewContext.currentCampaign,"CampaignType")||8===b.a.result(this.viewContext.currentCampaign,"CampaignType")||"Audience"===e.audienceCampaignType)&&this.permissions.IsAudienceCampaignMultiMediaAdsEnabled&&!e.isVideo,this.oDataConfig={odataRootUrl:a,odataPath:n,odataToken:i},this.isAdCreatorV1Enabled=this.permissions.IsAdCreatorV1Enabled&&this.isMultimediaAd}},{key:"onRenderedInDOM",value:function(){this.perfMarker.done()}},{key:"remove",value:function(){var e=this.$(".react-image-experience")[0];e&&m.a.unmountComponentAtNode(e),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"render",value:function(){var e=this;this.perfMarker.willRender(),Object(x.a)(this.$el,function(){return e.onRenderedInDOM()}),this.$el.html(E()({i18n:this.i18n,isGridDisplay:this.isGridDisplay,isVideo:this.isVideo,isMultimediaAd:this.isMultimediaAd}));var t=k.a.get("Constants").imagePath,i=k.a.get("component/http/channel/odata"),n=k.a.get("component/state/index"),a=k.a.get("component/config/index"),r=a.get("CurrentAccount")?a.get("CurrentAccount").AdvertiserCustomerID:a.get("advertiserCustomerID"),o=n.get("account_id"),s=k.a.get("campaignui/feature/instrumentation/index"),l=k.a.get("component/preference/service/index");return m.a.render(u.a.createElement(f.ThemeProvider,{theme:{components:y.ComponentSettings,core:y.ThemeFluent}},u.a.createElement(S.I18nContext.Provider,{value:this.newI18n},u.a.createElement(A.InstrumentationContext.Provider,{value:s},u.a.createElement(T.PreferenceContext.Provider,{value:l},u.a.createElement(qe,{ref:this.crudReactComponent,responsiveAdRepository:this.responsiveAdRepository,odata:i,cid:"".concat(r),aid:"".concat(o),i18n:this.i18n,i18nErrors:this.i18nErrors,isMultimediaAdinMSANEnabled:this.isMultimediaAdinMSANEnabled,genericImage:this.isForVNext?Je.a:"".concat(t,"1.91to1.jpg"),viewContext:this.viewContext,pageContext:this.pageContext,isGridDisplay:this.isGridDisplay,onAdSaved:this.onAdSaved,ad:this.ad,perfMarker:this.perfMarker.createChild("ReactComp"),isForVNext:this.isForVNext,isMultimediaAd:this.isMultimediaAd,isStockPhotoEnabled:!0,oDataConfig:this.oDataConfig,isMobileUrlEnabled:this.isMobileUrlEnabled,isImpressionTrackingUrlsEnabled:this.isImpressionTrackingUrlsEnabled,activityLogger:this.activityLogger,permissions:this.permissions,isVideo:this.isVideo,isAdCreatorV1Enabled:this.isAdCreatorV1Enabled,instrumentation:s,enableOfflinePollingDelay:this.enableOfflinePollingDelay,preferencesService:l,hasWebsiteImageOptedInObservable:this.hasWebsiteImageOptedInObservable}))))),this.$(".react-image-experience")[0]),this.$(".error-no-created-ad").append(this.noCreatedAdErr.render().el),this}},{key:"saveAdAsync",value:function(){return this.crudReactComponent.current?this.crudReactComponent.current.saveAdAsync().finally(Object(C.withUiBlock)(this.wizardElement,this.i18n.getString("Loading"))):g.a.resolve(!0)}},{key:"saveToClient",value:function(){return this.crudReactComponent.current?this.crudReactComponent.current.saveToClient().finally(Object(C.withUiBlock)(this.wizardElement,this.i18n.getString("Loading"))):g.a.resolve(!0)}},{key:"hasCreatedAd",value:function(){return this.crudReactComponent.current.hasCreatedAd()}},{key:"wizardShouldGoNext",value:function(){var e=this;return this.saveAdAsync().then(function(t){return t?e.hasCreatedAd()?(e.activityLogger.signal("clicked next: true","responsive ad editor"),!0):(e.noCreatedAdErr.setErrorMessage(e.i18n.getString("Audience_Campaign_Crud_NoCreatedAd")),e.activityLogger.signal("clicked next: false","responsive ad editor"),g.a.reject()):(e.activityLogger.signal("clicked next: false","responsive ad editor"),g.a.reject())})}},{key:"wizardShouldGoBack",value:function(){return this.activityLogger.signal("clicked back: true","responsive ad editor"),new g.a(function(e){return e(!0)})}},{key:"saveAndExit",value:function(){var e=this;return this.saveAdAsync().then(function(t){if(!t)return e.activityLogger.signal("save and exit: false","responsive ad editor"),g.a.reject();if(!e.hasCreatedAd())return e.activityLogger.signal("save and exit: false","responsive ad editor"),e.noCreatedAdErr.setErrorMessage(e.i18n.getString("Audience_Campaign_Crud_NoCreatedAd")),g.a.reject();if(e.trigger("saveAndExit"),e.isOpenCreatePanel&&e.isLastStep){var i={CampaignId:e.viewContext.currentCampaign.Id,DeliveryStatusType:"NoEligibleAdGroups"};e.applyActivity.trace(JSON.stringify(i))}return e.activityLogger.signal("save and exit: true","responsive ad editor"),!0})}},{key:"onAdSaved",value:function(){this.noCreatedAdErr.removeErrors()}},{key:"onCreateAnother",value:function(){this.crudReactComponent.current.onCreateAd()}},{key:"className",get:function(){return this.isMultimediaAd?"crud-multimedia-ad":""}},{key:"title",get:function(){return{text:this.isSwapStepsEnabled?this.i18n.getString("Audience_Campaign_Crud_Ad_Title_Step4"):this.i18n.getString("Audience_Campaign_Crud_Ad_Title")}}},{key:"pageTitle",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Ad_PageTitle")}}},{key:"actions",get:function(){var e=[];return this.isSwapStepsEnabled?(e.push({name:"done",htmlAttributes:{class:"btn-primary"},enabled:!0,method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Save_Label")}),e.push({name:"back",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Back_Label")})):(e.push({name:"back",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Back_Label")}),e.push({name:"done",htmlAttributes:{class:"btn-primary"},enabled:!0,method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Exit")}),"adgroup-creation"===this.scenario||"campaign-creation"===this.scenario&&e.unshift({name:"next",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Next")})),e}}]),t}(w.AudienceStepBase);i.d(t,"ResponsiveAdEditor",function(){return Ze}),i.d(t,"CrudAudienceAdReact",function(){return qe}),i.d(t,"ResponsiveAdRepository",function(){return $e}),i.d(t,"MMAAssetConfigs",function(){return le})},Z7kg:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t=t+'<span class="closeimage location-target-grid__remove-col clickable" tabindex="0" role="button"'+n.attr("title",i.get("LocationTargeting_IncludedRemove"),!0,!0)+n.attr("aria-label",e,!0,!0)+"></span>"}.call(this,"areaName"in i?i.areaName:"undefined"!==typeof areaName?areaName:void 0,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},ZEPV:function(e,t,i){"use strict";var n=i("a28/"),a=i("UT4o"),r=i.n(a),o=i("1gQY"),s=i.n(o),l=i("GbM9"),c=i.n(l),d=i("6mWt"),u=i("AQBV"),p=i.n(u),g=i("muxL"),h=i("EcZa"),m=i.n(h),f=window.globalLegacyI18n.get("component/i18n/loader!component/bingads-grid"),v=[20,50,100,200],b=20,y=function(e,t){return function(i){return e(r.a.defaults(i,t))}};function S(e,t){var i=t.pageSize,n=i*t.pageNumber,a=i;e.set({query:r.a.defaults({skip:n,take:a},e.get("query"))},function(){t.trigger("change.complete:pagination")})}function w(e,t){var i=e.getItemCount();t.itemCount=i;var n=t.pageSize,a=t.pageNumber;0!==i&&i<=n*a&&(t.pageNumber=0)}function C(e,t,i){r.a.has(i,"sortableHeader")&&e.pageNumber&&(e.pageNumber=0)}function x(e,t){s.a.set("pgridPageNumber",r.a.defaults(Object(n.a)({},t,e),s.a.get("pgridPageNumber")||{}))}t.a=function(e){return e("pagination",["config","gridView"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plugins,i=e.name,n=arguments.length>1?arguments[1]:void 0,a=r.a.result(t,"pagination",{}),o=new g.PaginationView(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.el,i=e.pageSize,n=e.pageNumber,a=e.availablePageSizes,o=e.template,s=void 0===o?m.a:o,l=e.enableRandomPage,c={el:t,pageSize:i,pageNumber:n,availablePageSizes:a,template:y(s,{pageNumberLabelText:f.get("Grid_Page_Colon")}),pageSizeText:f.get("Grid_ShowRows"),totalPageCountText:f.get("Grid_PageOf"),enableRandomPage:l};return r.a.isFinite(i)?r.a.isFinite(r.a.first(a))||(c.availablePageSizes=[i]):r.a.isFinite(r.a.first(a))?c.pageSize=r.a.first(a):(c.availablePageSizes=v,c.pageSize=b),r.a.isFinite(n)||(c.pageNumber=0),c.viewModelDecorator=function(e){e.onKeyPress=function(e,t){return 13!==(t.which||t.keyCode)||(t.target.blur(),!1)}},c}(a));o.delegateEvents({submit:function(){return!1}});var s=r.a.partial(w,n,o),l=r.a.partial(S,n,o);return l(),x(0,i),n.on("willUpdate",r.a.partial(C,o,n)),n.on("didUpdate",s),o.on("change:page-number",function(e){x(e,i),l()}),o.on("change:page-size",function(e){var t={rowsPerPage:e};if(!0===r.a.result(p.a.get("Permissions"),"IsUsePreferencesServiceEnabled")){var i=p.a.get("StateManagerKeyPrefix"),n={Name:"".concat(i,"grid"),Data:t};d.default.setAtUserLevel(n)}else c.a.setItem("permanent","grid",t);l()}),o.render(),a.el||n.appendFootRows([{classes:["noborder"],view:o}]),o})}},ZILi:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){a&&(i+='<span class="custormerInsightsLocation"></span>'),i=i+"<span>"+n.escape(null==(t=e)?"":t)+"</span>"}.call(this,"Name"in a?a.Name:"undefined"!==typeof Name?Name:void 0,"isForVNext"in a?a.isForVNext:"undefined"!==typeof isForVNext?isForVNext:void 0),i}},ZzSc:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,a="",r=e||{};return function(r){a=a+'<div class="audience-bid-recommendation-performance">'+(null==(t=i("BlVq").call(this,e))?"":t)+'</div><button class="btn btn-default apply-recommendation-button">'+n.escape(null==(t=r.getString("AudiencesAssociationGrid_BidRecommendation_ApplyRecommendation"))?"":t)+"</button>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),a}},aEiO:function(e,t,i){var n;void 0===(n=function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=121)}({121:function(e,t,i){e.exports=i(122)},122:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.legacyStrings}});var n=i(123)},123:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.legacyStrings=void 0;t.legacyStrings={CreditCard_Prepaid:"Prepaid ",PaymentMethod_CreditCardDisplayFormat:"{{cardType}} {{cardCategory}}****{{last4}} ({{country}})",PaymentMethod_CreditCardNoCountryDisplayFormat:"{{cardType}} {{cardCategory}}****{{last4}}",CreditCardTypeID_1:"Visa",CreditCardTypeID_2:"MasterCard",CreditCardTypeID_3:"American Express",CreditCardTypeID_4:"Discover",CreditCardTypeID_5:"Diners Club",CreditCardTypeID_6:"Japanese Credit Bureau",CreditCardTypeID_7:"Carte Blanche",CreditCardTypeID_8:"JAL",CreditCardTypeID_9:"Invoice (SAP)",PaymentMethod_SAPDisplayFormat:"SAP: {{customerName}} ({{invoiceId}})",PaymentMethod_SAPNoCustomerNameDisplayFormat:"SAP: {{invoiceId}}",PaymentMethod_CheckDisplayFormat:"Check: {{friendlyName}}",PaymentMethod_EFTDisplayFormat:"Electronic funds transfer: {{friendlyName}}",PaymentMethod_PayPalDisplayFormat:"PayPal: {{email}}",PaymentInstrTypeId_PayPal:"PayPal",PaymentMethod_SEPADisplayFormat:"SEPA direct debit: {{friendlyName}}",PaymentMethod_OfflinePaymentDisplayFormat:"Check/bank transfer ({{country}})",PaymentInstrument_OfflinePaymentSimpleDisplayFormat:"Check/bank transfer",PaymentMethod_BoletoDisplayFormat:"Boleto Banc\xe1rio: {{friendlyName}}",PaymentMethod_VBADisplayFormat:"Virtual Bank Account: {{friendlyName}}",PaymentMethod_DefaultFormat:"Payment method: {{id}}",PaymentMethod_CreditCardOnHoldFormat:"On hold {{date}}",PaymentMethod_CreditCardPurgedFormat:"Inactive",PaymentMethod_CreditCardExpiredFormat:"Expired {{date}}",PaymentMethod_CreditCardExpiresFormat:"Expires {{date}}",Billing_PaymentOption_1:"Postpay threshold",Billing_PaymentOption_2:"Monthly invoice",Billing_PaymentOption_12:"Prepay",Billing_ColumnValue_DocumentType_Pending:"Pending",Billing_ColumnValue_DocumentType_SelfServeInvoice:"Statement",Billing_ColumnValue_DocumentType_Invoice:"Invoice",Billing_ColumnValue_DocumentType_Invoices:"Invoice",Billing_ColumnValue_DocumentType_CreditMemoInvoice:"Credit memo",Billing_ColumnValue_DocumentType_PrePaidStatement:"Monthly statement",Billing_ColumnValue_DocumentType_PostPaidStatement:"Monthly statement",Billing_ColumnValue_DocumentType_PrePaidInvoices:"Payment receipt",Billing_ColumnValue_DocumentType_PrepaidCreditMemoInvoice:"Credit memo",Billing_ColumnValue_DocumentType_PrepaidChargebackInvoice:"Credit memo",Billing_ColumnValue_DocumentType_PrepaidRefundReversalInvoice:"Debit memo",Billing_ColumnValue_DocumentType_MonthlyStatement:"Monthly statement",Billing_ColumnValue_Paid:"Paid",Billing_ColumnValue_PastDueTemplate:"Overdue by {0} Days",Billing_ColumnValue_Open:"Open",Billing_ColumnValue_Rebilled:"Rebilled",Billing_ColumnValue_MultipleAccounts:"Multiple",AdjustmentReason_UnselectedItemText:"- Adjustment reason -",AdjustmentReason_1:"Revenue Booking",AdjustmentReason_10:"Customer Retention",AdjustmentReason_11:"Debit",AdjustmentReason_12:"Credit and Rebook - Platform Issue",AdjustmentReason_13:"Promotion",AdjustmentReason_14:"Collections Settlement",AdjustmentReason_15:"Chargeback",AdjustmentReason_16:"Test Account",AdjustmentReason_17:"Billing Error",AdjustmentReason_18:"Ad Delivery Issue",AdjustmentReason_19:"Omaha Cashback Adjustment",AdjustmentReason_2:"Fraud - Other",AdjustmentReason_20:"Internal User Error - IO/Budget entered incorrectly",AdjustmentReason_21:"Internal User Error - Wrong targeting or distribution channel",AdjustmentReason_22:"Internal User Error - Account not paused when requested",AdjustmentReason_23:"Internal User Error - No valid IO",AdjustmentReason_24:"Account set up incorrectly - Incorrect currency/discount/SAP ",AdjustmentReason_25:"Account set up incorrectly - Rebook (debit)",AdjustmentReason_26:"Other (Debit/Credit)",AdjustmentReason_27:"Incorrect Ad Medium",AdjustmentReason_28:"Customer Retention - Low Quality Traffic Complaint",AdjustmentReason_29:"Customer Retention - Promotion Code Overspend",AdjustmentReason_3:"Delivery",AdjustmentReason_30:"Customer Retention - Targeting",AdjustmentReason_31:"Customer Retention - Bids/Budgeting",AdjustmentReason_32:"Customer Retention - Account/Campaign Status",AdjustmentReason_33:"Customer Retention - Migration/Re-segmentation",AdjustmentReason_34:"Customer Retention - Upload Issue",AdjustmentReason_4:"Fraud - Click Fraud",AdjustmentReason_5:"Technical Issue",AdjustmentReason_6:"Cancellation Credit",AdjustmentReason_7:"User Error",AdjustmentReason_8:"Payment Dispute - Electronic Payments",AdjustmentReason_9:"Policy",AdjustmentReason_39:"System Adjustment",AdjustmentReason_40:"Goodwill Credit",AdjustmentReason_41:"Goodwill \u2013 Customer Retention",AdjustmentReason_42:"Credit and Rebill",AdjustmentReason_43:"Credit and Rebill - Tax Issue",AdjustmentReason_44:"Fraud",AdjustmentReason_45:"System Issue",AdjustmentReason_46:"Internal User Error",AdjustmentReason_47:"Volatile Traffic Complaint",AdjustmentReason_48:"Broadmatch",AdjustmentReason_50:"Prepay Balance Refund",AdjustmentReason_52:"Account Compromised",AdjustmentReason_53:"Travel Special Program",Account_CPFLabel:"CPF",Account_PANLabel:"PAN",Account_CNPJLabel:"CNPJ",Account_GSTINLabel:"GST IN",Account_VATShortLabel:"VAT",Account_ABNLabel:"Australian Business Number",Account_NZGSTRegistrationNumberLabel:"NZ GST registration number",Account_CCMLabel:"C.C.M.",Account_GSTRegistrationNumberLabel:"GST/HST registration number or Business Number",Account_PIBLabel:"Tax identification number (PIB)",TaxType_1:"Personal",TaxType_2:"Business",Customer_DisplayName:"{{name}} ({{number}})",Account_DisplayName:"{{name}} ({{number}})",Label_Optional:"(optional)",Label_Required:"(required)",Label_RequiredForBusinessCustomers:"(required for business customers)",AccountGrid_TaxInformation_VatStatus_174:"Valid",AccountGrid_TaxInformation_VatStatus_175:"Invalid",AccountGrid_TaxInformation_VatStatus_176:"Pending",AccountGrid_TaxInformation_VatStatus_177:"Past due",ValueNoneLabel:"(Not set)",Global_NotApplicableText:"(n/a)",InsertionOrder_NoEndDate:"No End Date",InsertionOrder_Unlimited:"Unlimited",AccountVerificationStatus_1:"Failed",AccountVerificationStatus_2:"Failed",AccountVerificationStatus_3:"Action required",AccountVerificationStatus_4:"Not verified",AccountVerificationStatus_5:"Pending",AccountVerificationStatus_6:"Verified advertiser",AccountVerificationStatus_7:"Verified advertiser",AccountVerificationStatus_8:"Verification not needed",AccountVerificationStatus_9:"Verified limited",AccountVerificationStatus_1_Internal:"Failed",AccountVerificationStatus_2_Internal:"Appealed Failed",AccountVerificationStatus_3_Internal:"Action required",AccountVerificationStatus_4_Internal:"Not verified",AccountVerificationStatus_5_Internal:"Pending",AccountVerificationStatus_6_Internal:"Verified advertiser",AccountVerificationStatus_7_Internal:"Appealed verified advertiser",AccountVerificationStatus_8_Internal:"Verification not needed",AccountVerificationStatus_9_Internal:"Verified limited",ABLVerificationStatus_1:"Failed",ABLVerificationStatus_2:"Failed",ABLVerificationStatus_3:"Action required",ABLVerificationStatus_4:"Not verified",ABLVerificationStatus_5:"Pending",ABLVerificationStatus_6:"Verified",ABLVerificationStatus_7:"Verified",ABLVerificationStatus_9:"Verified limited"}}})}.call(t,i,t,e))||(e.exports=n)},aLMy:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="audience-meter"><div>'+n.escape(null==(t=e.getString("Audience_Campaign_ReachControl_EstimatedImpressions"))?"":t)+'<strong class="impr"></strong></div><div class="meter-container"><div class="arrow"></div><div class="meter"><div class="specific-meter"></div><div class="broad-meter"></div></div><div class="audience-specific-label">'+n.escape(null==(t=e.getString("Audience_Campaign_ReachControl_Specific"))?"":t)+'</div><div class="audience-broad-label">'+n.escape(null==(t=e.getString("Audience_Campaign_ReachControl_Broad"))?"":t)+"</div></div></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},aZ1v:function(e,t,i){var n,a;n=[i("7XbR")],void 0===(a=function(e){"use strict";var t=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");return function(i){this.isVisible=e.observable(i.isVisible),this.isExpanded=e.observable(i.isExpanded),this.editMode=e.observable(i.editMode),this.parameters=e.observableArray(),this.trackingTemplate=e.observable(),this.finalUrlSuffix=e.observable(),this.isUrlCustomParametersSettingsExpanded=e.observable(!1),this.isTrackingTemplateSettingsExpanded=e.observable(!1),this.isFinalUrlSuffixSettingsExpanded=e.observable(!1),this.isFinalURLSuffixEnabled=e.observable(i.isFinalURLSuffixEnabled),this.expanderLabel=function(){var e;switch(i.entityType){case"Campaign":case"campaign":e=t.get("CampaignUrlOptions_AdvancedSettings_ExpanderLabel");break;case"AdGroup":case"adgroup":e=t.get("AdGroupUrlOptions_AdvancedSettings_ExpanderLabel");break;case"Ad":e=t.get("AdUrlOptions_AdvancedSettings_ExpanderLabel");break;case"SiteLinkAdExtension":e=t.get("SiteLinkUrlOptions_AdvancedSettings_ExpanderLabel");break;default:e=t.get("UrlOptions_AdvancedSettings_ExpanderLabel")}return e}}}.apply(t,n))||(e.exports=a)},aaNW:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,a="",r=e||{};return function(r,o){a=a+'<div class="bid-adjustment-title">'+n.escape(null==(t=o.getString("AudiencesAssociationGrid_BidRecommendation_Description"))?"":t)+"</div>",a=r?a+'<div class="bid-adjustment-manual-content bid-adjustment-margin-bottom">'+(null==(t=i("5lM/").call(this,e))?"":t)+'</div><div class="bid-adjustment-recommendation bid-adjustment-margin-bottom"><input type="checkbox" data-bind="checked: useRecommendationBid" aria-labelledby="ReommendationBidLabel"><div class="audience-bid-recommendation-performance">'+(null==(t=i("BlVq").call(this,e))?"":t)+"</div></div>":a+'<div class="bid-adjustment-manual-content bid-adjustment-margin-bottom">'+(null==(t=i("5lM/").call(this,e))?"":t)+"</div>"}.call(this,"hasRecommendation"in r?r.hasRecommendation:"undefined"!==typeof hasRecommendation?hasRecommendation:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),a}},abmd:function(e,t,i){var n,a;n=[i("UT4o"),i("5iHu")],void 0===(a=function(e,t){var i={};function n(e){i[e]||(i[e]=window.App.views.alertCenter.showError(e))}function a(t){if(e.isString(t)&&""!==t.trim())n(t);else if(e.isArray(t)){var i=[];e.each(t,function(t){var a;e.isString(t)&&""!==t.trim()?a=t:e.isObject(t)&&t.Message&&(a=t.Message),a&&!e.contains(i,a)&&(n(a),i.push(a))})}else e.isObject(t)&&t.Message&&n(t.Message)}function r(t){e.isUndefined(t)||a(t)}return{clearErrorSummary:function(){e.each(i,function(e){window.App.views.alertCenter.dismiss(e)}),i={}},showJsonErrors:function(e){e&&r(e)},_appendErrorSummary:r,_processErrors:a}}.apply(t,n))||(e.exports=a)},aezm:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("UT4o"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("AQBV"),m=i.n(h),f=i("+igW"),v=i.n(f),b=i("0LCZ"),y=i.n(b),S=i("6Ux2"),w=i("tDHP"),C=i.n(w),x=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url"),k=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.entityType,r=void 0===a?"Ad":a,o=i.isFinalURLSuffixEnabled,s=void 0!==o&&o;Object(n.a)(this,e),this.isExpanded=g.a.observable(!1),this.parameters=g.a.observableArray(),this.trackingTemplate=g.a.observable(),this.finalUrlSuffix=g.a.observable(),this.isFinalURLSuffixEnabled=g.a.observable(s),this.trackingTemplateShowNone=g.a.computed(function(){return u.a.isEmpty(t.trackingTemplate())}),this.finalUrlSuffixShowNone=g.a.computed(function(){return u.a.isEmpty(t.finalUrlSuffix())}),this.parametersShowNone=g.a.computed(function(){return u.a.isEmpty(t.parameters())}),this.expanderLabel=function(){switch(r.toLowerCase()){case"campaign":return x.get("CampaignUrlOptions_AdvancedSettings_ExpanderLabel");case"adgroup":return x.get("AdGroupUrlOptions_AdvancedSettings_ExpanderLabel");case"audience":return x.get("AdvancedUrlOptions_AdvancedSettings_ExpanderLabel");case"ad":return x.get("AdUrlOptions_AdvancedSettings_ExpanderLabel");case"sitelinksadextension":case"sitelinkadextension":case"sitelink2adextension":return x.get("SiteLinkUrlOptions_AdvancedSettings_ExpanderLabel");case"actionadextension":return x.get("ActionUrlOptions_AdvancedSettings_ExpanderLabel");case"priceadextension":return x.get("AdExtension_Price_Advanced_URL");default:return x.get("UrlOptions_AdvancedSettings_ExpanderLabel")}}};i.d(t,"default",function(){return T});var A=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url"),T=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.placeholderEnabled,n=void 0!==i&&i,a=t.trackingTemplate,r=void 0===a?void 0:a,o=t.finalUrlSuffix,s=void 0===o?void 0:o,l=t.customParameters,c=void 0===l?void 0:l,d=t.entityType,p=void 0===d?"Ad":d,g=t.showUurlTestTool,h=void 0!==g&&g,f=t.isForVNext,b=void 0!==f&&f,w=t.activityLogger,C=m.a.get("Permissions")||{};this.activityLogger=w;var x=p?p.toLowerCase():"";if(this.isFinalURLSuffixEnabled=["campaign","adgroup","keyword"].indexOf(x)>=0||["ad","audience"].indexOf(x)>=0||C.IsFinalURLSuffixPhase3Enabled&&["imageadextension","sitelink2adextension"].indexOf(x)>=0||C.IsFinalURLSuffixPhase4Enabled&&["actionadextension","priceadextension"].indexOf(x)>=0,this.viewModel=new k({entityType:p,isFinalURLSuffixEnabled:this.isFinalURLSuffixEnabled}),this.trackingTemplate=new v.a({placeholderEnabled:n,trackingTemplate:r,isForVNext:b}),this.trackingTemplate.on("templateChanged",function(){e.logActivity("tracking template change")}),this.finalUrlSuffix=new S.FinalUrlSuffixView({finalUrlSuffix:s,i18n:A,showPlaceholder:!0}),this.finalUrlSuffix.on("finalUrlSuffix:updated",function(){e.logActivity("final url suffix change")}),this.customParams=new S.CustomParametersView({customParameters:c,placeholderEnabled:n,permissions:m.a.get("Permissions")||{},i18n:A,entityType:p}),this.showUurlTestTool=h,this.showUurlTestTool){var T={isForVNext:b};this.urlTestTool=new y.a(T),this.urlTestTool.on("testUurl",function(t,i){e.logActivity("click test url"),e.trigger("testUurl",t,i)})}return this.logCustomParamsChange=u.a.once(function(){e.logActivity("custom parameter change")}),this}},{key:"logActivity",value:function(e){this.activityLogger&&this.activityLogger.signal(e,"url options")}},{key:"customParamsChanged",value:function(){this.logCustomParamsChange()}},{key:"isValid",value:function(){var e=this.trackingTemplate.isValid()&&this.customParams.isValid()&&(!this.isFinalURLSuffixEnabled||this.finalUrlSuffix.isValid());return e||(this.trackingTemplate.isValid()||this.logActivity("tracking template is not valid"),this.customParams.isValid()||this.logActivity("custom parameter is not valid"),this.isFinalURLSuffixEnabled&&!this.finalUrlSuffix.isValid()&&this.logActivity("final url suffix is not valid")),e}},{key:"render",value:function(){return this.$el.html(C()({i18n:A})),g.a.applyBindings(this.viewModel,this.el),this.$(".tracking-template__container").empty().append(this.trackingTemplate.render().el),this.$(".custom-paramters__container").empty().append(this.customParams.render().el),this.viewModel.trackingTemplate(this.getTrackingTemplate()),this.viewModel.parameters(this.getUrlCustomParameters(!0)),this.isFinalURLSuffixEnabled&&(this.$(".final-url-suffix__container").empty().append(this.finalUrlSuffix.render().el),this.viewModel.finalUrlSuffix(this.getFinalUrlSuffix())),this.showUurlTestTool&&this.$(".uurl-test-tool__container").empty().append(this.urlTestTool.render().el),this}},{key:"expand",value:function(){var e=this.viewModel.isExpanded();this.viewModel.isExpanded(!e),this.viewModel.isExpanded()||(this.viewModel.trackingTemplate(this.getTrackingTemplate()),this.isFinalURLSuffixEnabled&&this.viewModel.finalUrlSuffix(this.getFinalUrlSuffix()),this.viewModel.parameters(this.getUrlCustomParameters(!0))),this.logActivity("url options toggle: ".concat(this.viewModel.isExpanded()))}},{key:"toObject",value:function(){return this.isFinalURLSuffixEnabled?{UrlCustomParameters:this.getUrlCustomParameters(!0),TrackingUrlTemplate:this.getTrackingTemplate(),FinalUrlSuffix:this.getFinalUrlSuffix()}:{UrlCustomParameters:this.getUrlCustomParameters(!0),TrackingUrlTemplate:this.getTrackingTemplate()}}},{key:"clearApiErrors",value:function(){this.trackingTemplate.ko_model.trackingTemplateErrors([]),this.customParams.viewModel.parametersError([]),this.isFinalURLSuffixEnabled&&this.finalUrlSuffix.viewModel.externalErrors([])}},{key:"getUrlCustomParameters",value:function(e){return this.customParams.getValues(e)}},{key:"getTrackingTemplate",value:function(){return this.trackingTemplate.ko_model.trackingTemplate()}},{key:"getFinalUrlSuffix",value:function(){return this.finalUrlSuffix.getFinalUrlSuffix()}},{key:"handleApiErrors",value:function(e){var t=!1;u.a.isEmpty(e.TrackingUrlTemplate)||(this.trackingTemplate.ko_model.trackingTemplateErrors(e.TrackingUrlTemplate),t=!0),this.isFinalURLSuffixEnabled&&!u.a.isEmpty(e.FinalUrlSuffix)&&(this.finalUrlSuffix.viewModel.externalErrors(e.FinalUrlSuffix),t=!0),u.a.isEmpty(e.UrlCustomParameters)||(this.customParams.viewModel.parametersError(e.UrlCustomParameters),t=!0),t&&this.viewModel.isExpanded(!0)}},{key:"className",get:function(){return"url-options"}},{key:"events",get:function(){return{"click .expand-url-options":"expand","change input.custom-param__value-field, input.custom-param__key-field":"customParamsChanged"}}}]),t}(c.a.View)},afYL:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="form-horizontal"><div data-bind="visible: showBidValue"><div class="cpg-search-bid"></div></div><div data-bind="visible: !showBidValue()"><div class="cpg-bid-boost"></div></div></div>'}},ahWh:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="search-result-view-container"></div><div class="clearfix"></div>'}},"ahr/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i+='<div class="audience-adgroup-settings-wizard-container">',a||(i=i+"<h3>"+n.escape(null==(t=e.getString("Audience_Campaign_Ad_Group_Settings_Label"))?"":t)+"</h3><hr>"),i=i+'<div class="audience-adgroup-settings-container row"></div><h3>'+n.escape(null==(t=e.getString("Audience_Campaign_Ad_Group_Targets_Label"))?"":t)+'</h3><hr><div class="target-setting-and-estimate-container"><div class="audience-adgroup-targets-container col-sm-8"></div><div class="audience-reach-estimate-container col-sm-3"></div></div><div class="errors-container row"></div><div class="action-buttons-container row"><button class="btn btn-primary save-button">'+n.escape(null==(t=e.getString("Audience_Campaign_Save_Label"))?"":t)+'</button><button class="btn btn-default cancel-button">'+n.escape(null==(t=e.getString("Audience_Campaign_Cancel_Label"))?"":t)+"</button></div></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isNewUI"in a?a.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0),i}},apu2:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i=i+'<div class="form-group"><h5 class="control-label col-md-2"><label data-bind="text: expanderLabel()"></label></h5><div class="col-md-10"><div class="form-control-static">'+n.escape(null==(t=e.getString("UrlOptions_AdvancedSettings_Description"))?"":t)+'</div><div class="form-control-static"><a data-toggle="collapse" data-target="#trackingTemplateSettings" href="javascript:void(0);">',r&&(i+='<span class="trackingtemplate bedded-icon-marker spritedimagealign expanderImage"></span>'),i=i+n.escape(null==(t=e.getString("TrackingTemplate_Label"))?"":t)+"</a>",a.popupHelp("pop_BA_NewCampaignCreate_Ad_TrackTemplate",e.getString("TrackingTemplate_Label"),e),i+='<span data-bind="visible: !isTrackingTemplateSettingsExpanded(), text: trackingTemplate"></span></div><div class="collapse" id="trackingTemplateSettings" data-section="TrackingTemplate"><div class="row"><div class="tracking-template col-md-5"></div></div></div><div class="form-control-static" data-bind="visible: isFinalURLSuffixEnabled()"><a data-toggle="collapse" data-target="#finalUrlSuffixSettings" href="javascript:void(0);">',r&&(i+='<span class="finalurlsuffix bedded-icon-marker spritedimagealign expanderImage"></span>'),i=i+n.escape(null==(t=e.getString("FinalUrlSuffix_Label"))?"":t)+"</a>",a.popupHelp("pop_BA_NewAdCreate_FinalURLSuffix",e.getString("FinalUrlSuffix_Label"),e),i+='<span data-bind="visible: !isFinalUrlSuffixSettingsExpanded(), text: finalUrlSuffix"></span></div><div class="collapse" id="finalUrlSuffixSettings" data-section="FinalUrlSuffix"><div class="row"><div class="final-url-suffix col-md-5"></div></div></div><div class="form-control-static"><a data-toggle="collapse" data-target="#customParametersSettings" href="javascript:void(0);">',r&&(i+='<span class="customparameter bedded-icon-marker spritedimagealign expanderImage"></span>'),i=i+n.escape(null==(t=e.getString("CustomParameters_Label"))?"":t)+"</a>",a.popupHelp("pop_BA_NewCampaignCreate_Ad_Parameters",e.getString("CustomParameters_Label"),e),i+='<span data-bind="visible: !isUrlCustomParametersSettingsExpanded(), text: parameters"></span></div><div class="collapse" id="customParametersSettings" data-section="UrlCustomParameters"><div class="row"><div class="custom-parameters col-sm-5"></div></div></div><div class="form-control-static" data-bind="visible: showUurlTestTool"><div class="uurl-test-tool__container col-sm-8"></div></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isNewUI"in r?r.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0),i}},axE2:function(e,t,i){"use strict";i.r(t),i.d(t,"getSupportedLocationIds",function(){return l}),i.d(t,"hasLocationTargetsInUS",function(){return c}),i.d(t,"isLanguageSupported",function(){return d}),i.d(t,"isKeywordPlannerSupported",function(){return p}),i.d(t,"isEstimationSupported",function(){return g});var n=i("UT4o"),a=i.n(n),r=i("t7Tx"),o=i("Z4Ty"),s=i("G9ZQ");function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?s.keywordPlannerSupportedCountries:s.trafficEstimationSupportedCountries,i=a.a.where(e,{Status:"Active",SelectionStatus:r.Included}),n=[];if(0===a.a.size(i))return a.a.each(t,function(e){n.push({locationId:e.Id,countryLocationId:e.Id})}),{items:a.a.pluck(t,"Id"),supportedCount:a.a.size(t),totalCount:a.a.size(t),countryLocationInfo:n};var l=[],c=[];return a.a.each(i,function(e){var t=e.Criterion.LocationCriterion||e.Criterion.RadiusCriterion;t&&l.push(t)}),a.a.each(l,function(e){if("Location"===e.Type){var i=e.CountryCode;if(a.a.contains(a.a.pluck(t,"Code"),i)){var r=o.d(i).LocationId,s="PostalCode"===e.LocationType?r:e.LocationId;c.push(s),n.push({locationId:s,countryLocationId:r})}}}),{items:c=a.a.uniq(c),supportedCount:a.a.size(c),totalCount:a.a.size(l),countryLocationInfo:n}}function c(e){var t=a.a.filter(e,{SelectionStatus:r.Included}),i=a.a.isEmpty(t),n=a.a.filter(t,function(e){return"Location"===e.Criterion.Type});return i||!a.a.isEmpty(n)&&a.a.some(n,function(e){var t=e.Criterion.LocationCriterion.CountryCode;return function(e,t){var i=e[t]||e.NoSupported;return a.a.contains(i,"US")}(o.c("English"),t)})}function d(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?!!s.keywordPlannerSupportedLanguages[e]:a.a.indexOf(s.trafficEstimationSupportedLanguages,e)>=0}function u(e,t,i){var n=a.a.isArray(e)?e:[e],r=l(t,i).supportedCount;return a.a.any(n,function(e){return d(e,i)||"All"===e})&&r>0&&r<=s.MAX_NUMBER_LOCATION_IDS}function p(e,t){return u(e,t,!0)}function g(e,t){return u(e,t,!1)}},b172:function(e,t,i){"use strict";i.r(t),i.d(t,"load",function(){return l});var n=i("nlAS"),a=i.n(n),r=i("fE/Z"),o=i("YK3D"),s=i.n(o);function l(e,t,i){for(var n="",o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).name||(t?"AdGroupCriterion":"CampaignCriterion"),l=0;l<i.length;l++)n+="isof(Criterion,'Model.".concat(i[l],"')"),l!==i.length-1&&(n+=" or ");var c=t?r.default.currentAccount.Campaigns.$withKey(Number(e)).AdGroups.$withKey(Number(t)):r.default.currentAccount.Campaigns.$withKey(Number(e));return c=c["".concat(o,"s")]["Model.".concat(o)],a.a[o].findAll({query:{$filter:n}},{entitySet:c,cacheResponse:!1,bypassCache:!0,headers:{lcid:s.a.CultureLcid}})}},b3ik:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l,c){i+='<span class="grid-cell-text">',a&&(i=i+'<div class="base-campaign-name">'+n.escape(null==(t=a)?"":t)+"</div>");var d=c?"true":"false";i=i+"<a"+(n.attr("class",n.classes(["scope-navigator",o],[!1,!0]),!1,!0)+n.attr("href",s,!0,!0)+n.attr("data-campaignid",r,!0,!0)+n.attr("data-skipscopenavigation",d,!0,!0)+n.attr("aria-label",e,!0,!0))+">"+n.escape(null==(t=l)?"":t)+"</a></span>"}.call(this,"ariaLabel"in a?a.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"baseCampaignName"in a?a.baseCampaignName:"undefined"!==typeof baseCampaignName?baseCampaignName:void 0,"campaignId"in a?a.campaignId:"undefined"!==typeof campaignId?campaignId:void 0,"className"in a?a.className:"undefined"!==typeof className?className:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0,"skipScopeNavigation"in a?a.skipScopeNavigation:"undefined"!==typeof skipScopeNavigation?skipScopeNavigation:void 0),i}},b5v3:function(e,t,i){var n,a;n=[i("UT4o"),i("Glrc"),i("muKe")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=611)}({13:function(e,i){e.exports=t},19:function(e,t){e.exports=i},611:function(e,t,i){e.exports=i(612)},612:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ValidationErrorView",{enumerable:!0,get:function(){return n.ValidationErrorView}});var n=i(613)},613:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationErrorView=void 0;var n=i(19),a=o(i(8)),r=o(i(614));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var i,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n.DeterministicView),i=t,(o=[{key:"initialize",value:function(e){var t=this;this.options=e,this.setState({errors:this.options.errors.get(this.options.field),showError:a.default.result(this.options,"showError",!0)}),this.options.errors.on("change:".concat(this.options.field),function(e,i){t.setState({errors:i})})}},{key:"setState",value:function(e){a.default.has(e,"errors")&&this.model.set({errors:e.errors}),a.default.has(e,"showError")&&this.model.set({showError:e.showError})}},{key:"template",get:function(){return r.default}}])&&l(i.prototype,o),s&&l(i,s),t}();t.ValidationErrorView=p},614:function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e){e.showError&&e.errors&&e.errors.length>0&&(i+='<ul role="alert">',function(){var a=e.errors;if("number"==typeof a.length)for(var r=0,o=a.length;r<o;r++){var s=a[r];i=i+'<li><div class="error" role="alert">'+n.escape(null==(t=s)?"":t)+"</div></li>"}else for(var r in o=0,a)o++,s=a[r],i=i+'<li><div class="error" role="alert">'+n.escape(null==(t=s)?"":t)+"</div></li>"}.call(this),i+="</ul>")}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0),i}},8:function(t,i){t.exports=e}})}.apply(t,n))||(e.exports=a)},bH6H:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){i=i+'<div class="form-inline pull-right dropdown-search-selector__pagination"><ul class="pagination"><li'+n.attr("class",n.classes(["page-item","previous-page-button",a.currentPage<=1?"disabled":""],[!1,!1,!0]),!1,!0)+'><span class="account-list-selector-prev-label">'+n.escape(null==(t=r.i18n.getString("AccountsDropdownSelector_PreviousPage"))?"":t)+'</span></li><li class="page-item"><span class="page-link">'+n.escape(null==(t=a.currentPage)?"":t)+'<span class="sr-only">'+n.escape(null==(t=e)?"":t)+"</span></span></li><li"+n.attr("class",n.classes(["page-item","next-page-button",a.currentPage*r.pageSize>=a.totalCount?"disabled":""],[!1,!1,!0]),!1,!0)+'><span class="account-list-selector-next-label">'+n.escape(null==(t=r.i18n.getString("AccountsDropdownSelector_NextPage"))?"":t)+"</span></li></ul></div>"}.call(this,"current"in a?a.current:"undefined"!==typeof current?current:void 0,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},bRue:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i+='<div class="user-country-multipliers form-horizontal">',function(){var t=e.selectedCountries;if("number"==typeof t.length)for(var r=0,o=t.length;r<o;r++){var s=t[r];i=i+'<div class="user-country-multiplier form-group"><div class="col-sm-11"><div'+n.attr("data-ref",s.Key+"-bid-multiplier",!0,!0)+'></div></div><div class="col-sm-1 mulitplier-query-remove"><span class="glyphicon glyphicon-remove filter-query-remove__glyphicon clickable"'+n.attr("title",s.Key,!0,!0)+n.attr("aria-label",a.i18n.getString("Button_Delete"),!0,!0)+' tabindex="0" role="button"></span></div></div>'}else for(var r in o=0,t)o++,s=t[r],i=i+'<div class="user-country-multiplier form-group"><div class="col-sm-11"><div'+n.attr("data-ref",s.Key+"-bid-multiplier",!0,!0)+'></div></div><div class="col-sm-1 mulitplier-query-remove"><span class="glyphicon glyphicon-remove filter-query-remove__glyphicon clickable"'+n.attr("title",s.Key,!0,!0)+n.attr("aria-label",a.i18n.getString("Button_Delete"),!0,!0)+' tabindex="0" role="button"></span></div></div>'}.call(this),i=i+'<div class="mulitpliers-query-add form-group"><div class="col-sm-6 col-sm-offset-5"><select class="form-control country-list"'+n.attr("disabled",!0===e.isUseParent,!0,!0)+">",function(){var r=a.restCountries;if("number"==typeof r.length)for(var o=0,s=r.length;o<s;o++){var l=r[o];i=i+"<option"+(n.attr("value",l.Key,!0,!0)+n.attr("selected",e.chooseCountry===l.Key,!0,!0))+">"+n.escape(null==(t=l.Value)?"":t)+"</option>"}else for(var o in s=0,r)s++,l=r[o],i=i+"<option"+(n.attr("value",l.Key,!0,!0)+n.attr("selected",e.chooseCountry===l.Key,!0,!0))+">"+n.escape(null==(t=l.Value)?"":t)+"</option>"}.call(this),i=i+'</select></div><div class="col-sm-1 text-center"><a'+n.attr("class",n.classes(["add-new-query",!0===e.isUseParent?"disabled":""],[!1,!0]),!1,!0)+' href="javascript:void(0);" role="button">'+n.escape(null==(t=a.i18n.getString("Button_Add"))?"":t)+"</a></div></div></div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},bWDH:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="itemTemplate-text"><span>'+n.escape(null==(t=e.Text)?"":t)+"</span></div>"}.call(this,"data"in a?a.data:"undefined"!==typeof data?data:void 0),i}},"bw/x":function(e,t,i){var n,a;n=[i("7XbR"),i("UT4o"),i("5C8L")],void 0===(a=function(e,t,i){"use strict";var n=function(t){this.options=t||{},this.scope=e.observable({campaignId:this.options.campaignId,adGroupId:this.options.adgroupId,campaignName:this.options.campaignName,adGroupName:this.options.adGroupName}),this.scopes=e.observableArray(),(this.options.campaignId||this.options.adgroupId)&&this.scopes.push(this.scope()),this.selectedExtensions=e.observableArray([]),this.originalIds=[],this.maximumSelectionAlertString=e.observable(""),this.successfulAssociationsLabel=e.observable(""),this.failedAssociationsLabel=e.observable(""),this.updateInlineAlertString(),this.showEditor=e.observable(this.options.showEditor),this.showEditor.subscribe(function(){this.failedAssociationsLabel("")}.bind(this)),i.properties(this),this.isAssociationChanged=e.computed(function(){return!this.changes().isEmpty}.bind(this)),this.shouldShowMultiAssetWarning=e.observable(!1)};return n.prototype.setLoadedSelection=function(e){this.originalIds=t.pluck(e,this.options.idField),this.selectedExtensions(e)},n.prototype.changes=function(){var e=t.pluck(this.selectedExtensions(),this.options.idField),i=t.difference(e,this.originalIds),n=t.difference(this.originalIds,e);return{added:i,removed:n,isEmpty:!i.length&&!n.length}},n.prototype.updateInlineAlertString=function(){t.isFunction(this.options.getMaximumSelectionAlertString)&&!t.isEmpty(this.scope())&&this.maximumSelectionAlertString(this.options.getMaximumSelectionAlertString(this.scope().campaignName,this.scope().adGroupName))},n.prototype.clearOriginalIds=function(){this.originalIds=[]},n.prototype.handleDelete=function(e){this.selectedExtensions.deselectItem(e),this.selectedExtensions.refreshSource(),this.originalIds=t.reject(this.originalIds,function(t){return t===e[this.options.idField]},this)},n.prototype.handleCreate=function(e){this.selectedExtensions.push(e),this.selectedExtensions.refreshSource()},n.prototype.handleUpdate=function(e){this.selectedExtensions.refreshItem(e),this.selectedExtensions.refreshSource();var i=t.findIndex(this.selectedExtensions(),function(t){return t[this.options.idField]===e[this.options.idField]},this);this.selectedExtensions()[i]=e},n.prototype.handleRemovedIds=function(e){this.originalIds=t.difference(this.originalIds,e)},n.prototype.handleSave=function(){this.originalIds=t.pluck(this.selectedExtensions(),this.options.idField)},n}.apply(t,n))||(e.exports=a)},c4EL:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("2pgG"),u=i("PS1K"),p=i("6Ux2"),g=i("y1Ku"),h=function(e){function t(e){var i,a=e.i18n,s=e.view,l=e.inlineEditableSave,c=e.isForVNext,d=e.deps,u=void 0===d?null:d,p=e.parentContainerSelector,g=void 0===p?null:p;Object(n.a)(this,t);var h=a.getString("ColumnName_TrackingTemplate");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"TrackingTemplate",property:"TrackingUrlTemplate",title:"ColumnName_TrackingTemplate",editable:!0,type:"string",helpId:"Page_CampaignsGrid_TrackingTemplate",bodyClasses:["grid-column-TrackingTemplate"],i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:h})}))).i18n=a,i.view=s,i.inlineEditableSave=l,i.isForVNext=c,i.deps=u,i.parentContainerSelector=g,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"pickProperty",value:function(e){return e.TrackingUrlTemplate||""}},{key:"onPrompt",value:function(e){var t,i,n,a=this,r=e.position,o=e.item,s=e.newPosition,l=o.constructor.name.toLowerCase(),d=this.view.constructor.name.toLowerCase(),h=this.view.el&&this.view.el.className,m=!1,f=!1,v=!1;try{t=g.globalContext.require("component/upgraded-url/service/testUurl")}catch(C){this.deps&&(t=this.deps.testUurlService)}t&&t.uurlLevels&&t.testUurl&&(n=t.uurlLevels,i=t.testUurl,m=l===n.AdGroup.toLowerCase()||d.indexOf(n.AdGroup.toLowerCase())>=0||"ad-groups-grid"===h,f=l===n.Keyword.toLowerCase(),v=m||f);var b=new p.TrackingTemplateInlineEditView({i18n:this.i18n,trackingTemplate:o.TrackingUrlTemplate,showUurlTestTool:v,isForVNext:this.isForVNext,deps:this.deps}),y=this;b.on("save",function(e){var t=e.trackingTemplate,i=c.a.extendOwn({},o,{TrackingUrlTemplate:t});return a.inlineEditableSave({view:a.view,i18n:a.i18n,fieldName:"TrackingUrlTemplate",updated:i,editorView:b,editorViewCallbackAfterUpdate:function(){b.trigger("close")}})}),b.on("testUurl",function(e,t){if(b.viewModel.isValid()){t.isInline=!0,f?t.level=n.Keyword:m&&(t.level=n.AdGroup);var a={TrackingUrlTemplate:b.trackingTemplateView.viewModel.trackingTemplate()},r={customerId:y.view.options.scope.customerId,userId:y.view.options.scope.userId,accountId:y.view.options.scope.accountId,campaignId:o.Campaign.Id,entityId:o.Id};f?r.adGroupId=o.AdGroup.Id:m&&(r.adGroupId=o.Id);i(e,t,a,r,{apiInLog:"tracking-template/uurlTest"})}else e.call(t,null)});var S=this.isForVNext&&0!==Object.keys(s).length,w="grid-group-".concat(c.a.result(this.config,"group","other"));return new u.a({editorView:b.render(),cellPosition:S?s:r,renderBelow:!1,className:"tracking-template-inline-edit-popup grid-popupeditor ".concat(w),parentContainerSelector:S?this.parentContainerSelector||".grid-and-disclaim-container":null}).render()}}]),t}(d.a),m=i("5kPc"),f=i("QoK2"),v=i.n(f),b=function(e){function t(e){var i,a=e.i18n,s=e.view,l=e.inlineEditableSave,c=e.permissions,d=e.isForVNext,u=e.parentContainerSelector,p=void 0===u?null:u;Object(n.a)(this,t);var g=a.getString("ColumnName_URLCustomParameters");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"CustomParameters",property:"UrlCustomParameters",title:"ColumnName_URLCustomParameters",editable:!0,type:"string",helpId:"Page_CampaignsGrid_URLCustomParameters",bodyClasses:["grid-column-CustomParameters"],i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:g})}))).i18n=a,i.view=s,i.inlineEditableSave=l,i.permissions=c,i.isForVNext=d,i.parentContainerSelector=p,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value;return v()({value:t})}},{key:"onPrompt",value:function(e){var t=this,i=e.position,n=e.item,a=e.newPosition,r=new p.CustomParameterInlineEditView({i18n:this.i18n,customParameters:n.UrlCustomParameters,permissions:this.permissions,entityType:"phase1Entity"});r.on("save",function(e){var i=e.customParams,a=c.a.extendOwn({},n,{UrlCustomParameters:i});return t.inlineEditableSave({view:t.view,i18n:t.i18n,fieldName:"UrlCustomParameters",updated:a,editorView:r,editorViewCallbackAfterUpdate:function(){r.trigger("close")}})});var o=this.isForVNext&&0!==Object.keys(a).length,s="grid-group-".concat(c.a.result(this.config,"group","other")),l=new u.a({editorView:r.render(),cellPosition:o?a:i,renderBelow:!1,className:"custom-parameters-inline-edit-popup grid-popupeditor ".concat(s),parentContainerSelector:o?this.parentContainerSelector||".grid-and-disclaim-container":null});return l.render(),Object(m.triggerScrollbarRepositionOnElementHeightChange)(l.el),l}}]),t}(d.a),y=function(e){function t(e){var i,a=e.i18n,s=e.view,l=e.inlineEditableSave,c=e.isForVNext,d=e.parentContainerSelector,u=void 0===d?null:d;Object(n.a)(this,t);var p=a.getString("ColumnName_FinalUrlSuffix");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"FinalUrlSuffix",property:"FinalUrlSuffix",title:"ColumnName_FinalUrlSuffix",editable:!0,type:"string",helpId:"pop_BA_NewAdCreate_FinalURLSuffix",bodyClasses:["grid-column-FinalUrlSuffix"],i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:p})}))).i18n=a,i.view=s,i.inlineEditableSave=l,i.isForVNext=c,i.parentContainerSelector=u,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"pickProperty",value:function(e){return e.FinalUrlSuffix||""}},{key:"onPrompt",value:function(e){var t=this,i=e.position,n=e.item,a=e.newPosition,r=new p.FinalUrlSuffixInlineEditView({i18n:this.i18n,finalUrlSuffix:n.FinalUrlSuffix});r.on("save",function(e){var i=e.finalUrlSuffix,a=c.a.extendOwn({},n,{FinalUrlSuffix:i});return t.inlineEditableSave({view:t.view,i18n:t.i18n,fieldName:"FinalUrlSuffix",updated:a,editorView:r,editorViewCallbackAfterUpdate:function(){r.trigger("close")}})});var o=this.isForVNext&&0!==Object.keys(a).length,s="grid-group-".concat(c.a.result(this.config,"group","other"));return new u.a({editorView:r.render(),cellPosition:o?a:i,renderBelow:!1,className:"final-url-suffix-inline-edit-popup grid-popupeditor ".concat(s),parentContainerSelector:o?this.parentContainerSelector||".grid-and-disclaim-container":null}).render()}}]),t}(d.a);i.d(t,"c",function(){return h}),i.d(t,"a",function(){return b}),i.d(t,"b",function(){return y})},c4Gt:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("ERkP"),c=i.n(l),d=i("O94r"),u=i.n(d),p=i("faId"),g=i("YSIl"),h=i("4jZH"),m=i("1lK0"),f=i("bgLp"),v=i("O52o"),b=i("UT4o"),y=i.n(b),S=i("yZn0"),w=i("Nj9o"),C=i("d21t"),x={"#customParametersSettings":{"& .custom-param__key-field":{width:"155px",display:"inline-block"},"& .closeimage.custom-param__close-button":{position:"static"},"& .custom-param__value-field":{width:"260px",display:"inline-block"},"& .custom-param-entry":{"& .control-label":{display:"inline-block"},"& input.form-control":{display:"inline-block"},"& label.control-label":{display:"inline-block",marginLeft:"5px",marginRight:"5px"}},"& .custom-param__key-container":{display:"inline-block"},"& .flex-row-dynamic":{verticalAlign:"initial"}},".custom-parameters":{width:600},".bidding-strategy__container":{"& .custom-param__key-field":{display:"inline-block",width:"85px","margin-left":"5px","margin-right":"5px"},"& #currencyLabelTargetCpa":{display:"inline-block","vertical-align":"initial",marginTop:0},"& #currencyLabelTargetRoas":{display:"inline-block","vertical-align":"initial",marginTop:0},"& .alert.alert-info":{marginTop:8},"& .alert-image":{paddingTop:3},"& a.helpbutton":{"margin-left":"5px"}}};function k(e){for(var t=e.theme,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var r=n.map(function(e){return Object(b.isFunction)(e)?e(t):e});if(Object(b.some)(r,b.isEmpty))throw new Error("Cannot pass in empty style!");return r}var A=function(e){var t=Object(w.glyphIconStyle)(e);return t['input[type="radio"]']={},t},T=(i("iH9I"),i("5iHu")),_=i.n(T),E=i("ZLKJ"),I=i("Iw7j"),O=i("i8uz"),P=i("P7aw"),M=i("mWwN"),j=i("fw+O"),L=i("2ndk"),D=i("eRoi"),R=i("zrPx"),N=i("XXap"),V=i("5p5O"),B=i("PS1K"),F=function(){return""},U=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){var t=this,i=e.router,n=e.preferenceConfig,a=e.getGridConfig,r=e.getGridPlugins,o=e.filterService;(0,e.setupDataSourceErrorHandling)(this);var s=a(this);this.filterService=o,this.router=i,this.gridRemoved=!1;var l=!0;return this.grid=Object(N.pgridFactory)({gridConfig:s,plugins:r(this),preferenceConfig:n}),g.j.logger.logMessage("ClientTrace",{name:"Info",value:0},"SettingsGridView.buildGridFactory","Settings grid created."),this.filterService.on("filter-state-changed",function(){t.gridRemoved||Object(j.updateGridQuery)(t.grid.gridView,t.filterService.getCombinedFilter(),!0)}),this.grid.gridView.on("willUpdate",function(e){l?l=!1:g.j.handleSortChange(e,t.grid.gridView,s.name)}),this.grid.gridView}},{key:"renderTrunk",value:function(){var e=this;return this.gridRemoved?this:(this.filterService.refreshSource(),this.filterService.initializeCombinedFilterPromise.then(function(){e.gridRemoved||Object(j.updateGridQuery)(e.grid.gridView,e.filterService.getCombinedFilter(),!0)}),Object(L.a)(Object(o.a)(t.prototype),"renderTrunk",this).call(this),this)}},{key:"showExperimentBudgetPopup",value:function(e){var t=this.grid.gridView.itemOfElement(e.target),i=new V.d({item:t,i18n:g.j.i18n}).render();return new B.a({editorView:i,editorPositionFactory:Object(B.b)(_()(e.target)),renderBelow:!1,className:"grid-popupeditor experiment-budget-popup"}).render()}},{key:"showInlineLocationRecommendation",value:function(e){var t=this,i=this.grid.gridView.itemOfElement(e.target),n=R.InlineLocationRecommendationPanel;this.inlineLocationRecommendationView=new n({scope:{customerId:g.j.state.get("customer_id"),accountId:g.j.state.get("account_id"),campaignId:i.Id},deps:g.j}).render(),this.inlineLocationRecommendationView.on("refresh:recommendations",function(){return t.forceRefreshGrid()})}},{key:"forceRefreshGrid",value:function(){g.j.CampaignCacheManager.invalidate("Campaign"),this.grid.gridView.refresh(!0)}},{key:"remove",value:function(){this.inlineLocationRecommendationView&&this.inlineLocationRecommendationView.remove(),this.grid&&(this.grid.toolbar&&this.grid.toolbar.gridToolbarGroup&&(this.grid.toolbar.gridToolbarGroup.remove(),this.grid.toolbar.gridToolbarGroup=null),this.grid.gridView&&(this.grid.gridView.trigger("willRemove"),this.grid.gridView.remove(),this.grid.gridView=null,this.view=null)),this.gridRemoved=!0}},{key:"events",get:function(){return{"click .inline-location-target-recommendation":"showInlineLocationRecommendation","click .experiment-budget-ellipsis":"showExperimentBudgetPopup"}}},{key:"className",get:function(){return"settings-grid-view"}},{key:"template",get:function(){return F}}]),t}(D.DeterministicWrapperView);var G=i("nPji"),z=i("UyEP"),H=i("5aEL"),W=i("EUrs"),q=i("E1gz"),$=i("juSC"),K=i("C0ZD"),J=i("LtZU"),Z=i("enu4");function Y(e){var t=e.columnConfig,i=e.perfMarker,n=t.getColumnChooserConfig(!0),a=g.j.i18n;return n.customToolbarIcon="ba-TripleColumnSolid",y.a.compact([{plugin:J.a,config:{marker:i,appConfig:g.j.config}},{plugin:z.paginationPlugin,config:{pageSize:20,availablePageSizes:[20,50,100,200],enableRandomPage:!1,pageNumberLabelText:"",pageSizeText:a.getString("Grid_ShowRows"),totalPageCountText:a.getString("Grid_PageOf")}},!g.j.config.get("CurrentAccountInActive")&&!g.j.pageContext.Permissions.IsReadOnlyUser&&{plugin:W.a,config:{i18n:a}},{plugin:$.uiBlockerPlugin,config:{el:_()(".all-settings-page")}},{plugin:H.a,config:n},{plugin:Object(q.inlineErrorPlugin)({errorIconClasses:["grid-error"]})},{plugin:function(e){var t=e.status,i=e.ChangeStatusView,n=e.ChangeStatusModel,a=e.ChangeUrlOptionsView,r=e.ChangeUrlOptionsModel,o=e.config,s=e.filterService,l=e.i18n,c=[{text:l.getString("ChangeUrlOptions"),classes:["bulk-edit-change-url-option"],createView:function(e){var t=e.viewConfig,i=e.selectedRowCount;return new a(y.a.defaults({entityType:"Campaign",model:new r({selectedEntityCount:i}),isForVNext:!0},t))}}];return Object(Z.a)({status:t,ChangeStatusView:i,ChangeStatusModel:n,entityType:"campaign",config:o,filterService:s,i18n:l,items:c,showDelete:!1,isForVNext:!0})}({status:g.j.campaignStatus,ChangeStatusView:g.j.ChangeStatusView,ChangeStatusModel:g.j.ChangeStatusModel,ChangeUrlOptionsView:g.j.ChangeUrlOptionsView,ChangeUrlOptionsModel:g.j.ChangeUrlOptionsModel,i18n:g.j.i18n,config:g.j.config})},{plugin:K.assistedSelectionPlugin},{plugin:G.a11yPlugin,config:{i18n:g.j.i18n}}])}var Q=i("c4EL"),X=i("2pgG"),ee=i("/uqL"),te=i.n(ee),ie=i("FE1c"),ne=i("a28/"),ae=i("uvCE"),re=i("c0nf");function oe(e){var t,i=e.view,n=e.i18n,a=e.fieldName,r=e.updated,o=e.editorView,s=e.editorViewCallbackAfterUpdate,l=e.successCallback,c=y.a.pick(r,"Id",a);return t=i.grid.config.plugins.uiBlocker.el?i.grid.config.plugins.uiBlocker.el:i.grid.gridView.$el,g.j.jsDataCampaign.Campaign.update(r.Id,c,{adapter:"bulk"}).finally(Object(re.withUiBlock)(t)).then(function(){s&&y.a.isFunction(s)&&s(),y.a.isFunction(l)&&l(r),i.grid.gridView.trigger("didEdit",r)}).catch(function(e){var t,i=n.getString("ErrorNumber_-1");if(e&&e.errors){var r=g.j.i18nErrors.getBulkApiErrors(e.errors);t=r&&r[0]&&r[0].message?r[0].message:i}else t=i;o&&o.$el.is(":visible")&&y.a.isFunction(o.setErrors)?o.setErrors(Object(ne.a)({},a,t)):new ae.AlertHelper({i18n:n}).showError(t)})}var se=function(e){function t(e){var i,a=e.i18n,s=e.view;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Campaign",type:"string",property:y.a.compact(["Id","Name","BaseCampaignName","CampaignType","DeliveryStatus"]),sortable:"Name",title:"ColumnName_Campaign",bodyClasses:["col-CampaignName"],i18n:a}))).i18n=a,i.view=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t,i=e.value,n=g.j.state.get("customer_id"),a=g.j.state.get("account_id"),r="Smart"===i.CampaignType;t=r?"CampaignInProgress"===i.DeliveryStatus?"/campaign/Smart?cid=".concat(n,"#/CreateCampaign/").concat(i.cmpid):"/campaign/Smart?cid=".concat(n,"#/campaign/").concat(i.cmpid):"/campaign/vnext/settings?aid=".concat(a,"&cid=").concat(n,"&campaignId=").concat(i.cmpid);var o=this.i18n.getString("Click to scope to campaign {{campaignName}}",{campaignName:i.name}),s="";return i.baseCampaignName&&(o=this.i18n.getString("Click to scope to experiment {{experimentName}}",{experimentName:i.name}),s="experiment-name"),te()({link:t,name:i.name,baseCampaignName:i.baseCampaignName,campaignId:i.cmpid,skipScopeNavigation:r,ariaLabel:o,className:s})}},{key:"onPrompt",value:function(e){var t=this,i=e.event,n=e.item,a=e.newPosition;if("a"!==i.target.tagName.toLowerCase()){var r=n.Name;return function(e){var t=e.position,i=e.item,n=e.view,a=e.i18n,r=e.fieldName,o=e.schema,s=e.successCallback;ie.prompt({position:t,i18n:a,schema:o,model:i,fields:[r],hasLabels:!1,template:"inline",parentContainerSelector:".grid-and-disclaim-container",saveModel:function(e,t){return oe({view:n,i18n:a,fieldName:r,updated:e,editorView:t,editorViewCallbackAfterUpdate:function(){return t.trigger("save",e)},successCallback:s})}})}({position:a,item:n,schema:g.j.CampaignSchema,view:this.view,i18n:this.i18n,fieldName:"Name",successCallback:function(e){y.a.each(t.view.grid.gridView.itemArray,function(i){if(i.BaseCampaignName===r){var n=y.a.defaults({BaseCampaignName:e.Name},i);t.view.grid.gridView.trigger("didEdit",n)}}),window.App.trigger("campaignUpdated",{data:[y.a.pick(e,"Id","Name")]})}})}}},{key:"property",get:function(){return{get:function(e){return{cmpid:e.Id,name:e.Name,baseCampaignName:e.BaseCampaignName,DeliveryStatus:e.DeliveryStatus,CampaignType:e.CampaignType}},key:this.config.property}}}]),t}(X.a),le=i("i/zg"),ce=i.n(le),de=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Locations");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Locations",type:"string",property:["Id","CampaignCriterions","RecommendationTypes","TotalCountOfLocationTargets","TotalCountOfExcludedLocationTargets"],sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Locations",helpId:"Page_CampaignGrids_Locations",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="/campaign/vnext/settings?aid=".concat(n,"&cid=").concat(i,"&campaignId=").concat(t.cmpid);return ce()({link:a,name:t.locationName,hasLocationRecommendation:t.hasLocationRecommendation,i18n:this.i18n,campaignId:t.cmpid})}},{key:"property",get:function(){var e=this;return{get:function(t){var i,n=t.Id,a=t.TotalCountOfLocationTargets,r=t.TotalCountOfExcludedLocationTargets,o=t.CampaignCriterions,s=t.RecommendationTypes,l=void 0===s?[]:s,c=y.a.chain(o).filter(function(e){return"Location"===e.Criterion.Type||"Radius"===e.Criterion.Type}).pluck("Criterion").value(),d=[];if(y.a.each(c,function(e){y.a.isEmpty(e.Name)?d.push(Object(g.t)(e.Latitude,e.Longitude)):d.push(e.Name)}),y.a.isEmpty(d)||0===d.length)i=e.i18n.getString("CampaignImport_AllTargetLocations");else{var u=d.join(", ");i=a>d.length?"".concat(u," ").concat(e.i18n.getString("CampaignImport_And")," ").concat(a-d.length," ").concat(e.i18n.getString("AllSettings_More")):u}return r>0&&(i="".concat(i," ").concat(e.i18n.getString("AllSettings_ExcludedCount").replace("{count}",r))),{cmpid:n,locationName:i,hasLocationRecommendation:y.a.contains(l,"NewLocationTarget")}},key:this.config.property}}}]),t}(X.a),ue=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("ColumnName_AdSchedule");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"AdSchedule",type:"string",property:["Id","CampaignCriterions"],sortable:!1,title:"ColumnName_AdSchedule",helpId:"pop_BA_CampaignsGrid_AdSchedule",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="/campaign/vnext/settings?aid=".concat(n,"&cid=").concat(i,"&campaignId=").concat(t.cmpid);return ce()({link:a,name:t.adSchduleName,campaignId:t.cmpid})}},{key:"property",get:function(){var e=this;return{get:function(t){var i,n=t.Id,a=t.CampaignCriterions,r=y.a.filter(a,function(e){return"DayTime"===e.Criterion.Type});if(r&&0!==r.length){var o=y.a.chain(r).pluck("CriterionBid").pluck("Multiplier").value();i=y.a.some(o,function(e){return e>0})?e.i18n.getString("Grid_AdSchedule_Custom_Bid"):e.i18n.getString("Grid_AdSchedule_Custom")}else i=e.i18n.getString("Grid_AdSchedule_Default");return{cmpid:n,adSchduleName:i}},key:this.config.property}}}]),t}(X.a),pe=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Devices");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Devices",type:"string",property:["Id","CampaignCriterions"],sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Devices",helpId:"Page_CampaignGrids_Devices",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="/campaign/vnext/settings?aid=".concat(n,"&cid=").concat(i,"&campaignId=").concat(t.cmpid);return ce()({link:a,name:t.devicesName,campaignId:t.cmpid})}},{key:"property",get:function(){var e=this;return{get:function(t){var i=t.Id,n=t.CampaignCriterions;if(!g.j.pageContext.Permissions.IsOriginalDeviceTargetingEnabled)return{cmpid:i,devicesName:e.i18n.getString("Targeting_Device_AllDevices")};var a,r,o,s=y.a.filter(n,function(e){return"Device"===e.Criterion.Type}),l=y.a.filter(s,function(e){return"Computers"===e.Criterion.DeviceName}),c=y.a.filter(s,function(e){return"Smartphones"===e.Criterion.DeviceName}),d=y.a.filter(s,function(e){return"Tablets"===e.Criterion.DeviceName}),u=[];return l&&1===l.length&&(a="All"),c&&(r=5===c.length||1===c.length&&y.a.isNull(c[0].Criterion.OSName)?"All":"Some"),d&&(o=4===d.length||1===d.length&&y.a.isNull(d[0].Criterion.OSName)?"All":"Some"),"All"===a&&"All"===r&&"All"===o?u.push(e.i18n.getString("Targeting_Device_AllDevices")):(u.push(e.i18n.getString("Targeting_Device_Computers_OperatingSystems_".concat(a))),u.push(e.i18n.getString("Targeting_Device_Smartphones_OperatingSystems_".concat(r))),u.push(e.i18n.getString("Targeting_Device_Tablets_OperatingSystems_".concat(o)))),{cmpid:i,devicesName:u.join(", ")}},key:this.config.property}}}]),t}(X.a),ge=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Demographics");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Demographic",type:"string",property:"CampaignCriterions",sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Demographics",helpId:"Page_CampaignGrids_Demographic",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"property",get:function(){var e=this;return{get:function(){return e.i18n.getString("Page_PFPCampaignOrder_AllDemogExcerpt")},key:this.config.property}}}]),t}(X.a),he=i("jA4c"),me=i("BPp2"),fe=i.n(me),ve=i("Rdlq"),be=i.n(ve),ye={UserPaused:{statusText:"Paused",ariaLabel:"EntityStatus_Paused",classes:"statusPaused_icon"},BudgetUserPaused:{statusText:"Paused",ariaLabel:"EntityStatus_Paused",classes:"statusPaused_icon"},Deleted:{statusText:"Deleted",ariaLabel:"EntityStatus_Deleted",classes:"statusDeleted_icon"},Suspended:{statusText:"Suspended",ariaLabel:"EntityStatus_Suspended",classes:"statusSuspended_icon"}},Se={statusText:"Enabled",ariaLabel:"EntityStatus_Active",classes:"statusEnabled_icon"};var we=function(e){function t(e){var i,a=e.i18n,s=e.view;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Status",property:["Status","Id","ExperimentId"],title:"ColumnName_Status",sortable:"Status",type:"string",headerTemplate:function(){return be()({})},i18n:a}))).i18n=a,i.view=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"pickProperty",value:function(e){return{Status:e.Status,Id:e.Id,ExperimentId:e.ExperimentId}}},{key:"template",value:function(e){var t=e.value;return fe()(y.a.extend({i18n:this.i18n},t,function(e,t){var i=y.a.clone(y.a.result(ye,e,Se));return t&&(i.classes=y.a.result({Enabled:"experiment-active-icon",Paused:"experiment-paused-icon"},i.statusText,i.classes)),i}(t.Status,!!t.ExperimentId)))}},{key:"onPrompt",value:function(e){var t=this,i=e.item,n=e.newPosition;Object(he.a)({position:n,i18n:this.i18n,currentStatus:i.Status,isForVNext:!0,statusOptions:function(){var e=[{name:"Enabled",value:"Active"},{name:"Paused",value:"UserPaused"}];return y.a.result(i,"ExperimentId")&&(e=y.a.map(e,function(e){var t=y.a.result({Enabled:"experiment-active-icon",Paused:"experiment-paused-icon"},e.name);return y.a.defaults({iconClass:t},e)})),e}()}).then(function(e){if(e&&e!==i.Status){var n=y.a.defaults({Status:"UserPaused"===e?"Paused":e},i);oe({view:t.view,i18n:t.i18n,fieldName:"Status",updated:n,editorViewCallbackAfterUpdate:function(){var t=g.j.campaignStatus,a=[{Id:i.Id,Status:e===t.Paused?t.EnumPaused:e}];window.App.trigger("campaignUpdated",{data:a}),n.Status=e}})}})}}]),t}(X.a),Ce=function(){function e(){Object(n.a)(this,e),this.isPortfolioBidStrategyEnabled=y.a.result(g.j.pageContext.Permissions.dynamic,"PortfolioBidStrategy");var t=[se,V.c,de,pe,ue,ge,Q.c,Q.a,Q.b,this.isPortfolioBidStrategyEnabled&&V.b,this.isPortfolioBidStrategyEnabled&&V.a];t=y.a.compact(t),this.builder=(new j.ColumnsConfigBuilder).addCategory("CampaignSettings",function(e){return e.addColumns(t)}),this.builder.setLockedColumns([we,se]).setSelectedColumns(t.concat([we]))}return Object(a.a)(e,[{key:"getColumnsConfig",value:function(e){var t=e.view,i=e.router,n={i18n:g.j.i18n,view:t,router:i,inlineEditableSave:oe,permissions:g.j.pageContext.Permissions,schemaI18n:g.j.s$i18n,InlineSharedBudgetEditor:g.j.InlineSharedBudgetEditor,InlineBudgetEditor:g.j.InlineBudgetEditor,decimal:g.j.decimal,isForVNext:!0};return this.isPortfolioBidStrategyEnabled&&(n.isCampaign=!0,n.isAllSettingsGrid=!0),this.builder.getColumnsConfig(n)}},{key:"getColumnChooserConfig",value:function(){return y.a.defaults(this.builder.getColumnChooserConfig({i18n:g.j.i18n,patchQuery:!0,Columns:g.j.Columns,SelectedColumns:g.j.SelectedColumns,LegacyColumns:g.j.LegacyColumns,LegacySelectedColumns:g.j.LegacySelectedColumns}),{isForVNext:!0})}}]),e}();function xe(){var e=[];if(e.push("NewLocationTarget"),0===y.a.size(e))return"true";var t=y.a.map(e,function(e){return"RecommendationTypes/any(c:c eq Enum.RecommendationType'".concat(e,"')")});return"(".concat(t.join(" or "),")")}var ke=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getDataSource",value:function(){return{type:"jsdata",entity:g.j.jsDataCampaign.Campaign,primaryKey:"Id",options:{entitySet:g.j.edmCampaign.currentAccount.Campaigns}}}},{key:"getQuery",value:function(){return{query:{$expand:y.a.compact(["CampaignCriterions","Budget","AssociatedExperiment"]).join(", ")},options:{cacheResponse:!1,entitySet:g.j.edmCampaign.currentAccount.Campaigns,filterOptions:{odata:{custom:{RecommendationTypes:xe}}}}}}}]),e}();function Ae(e){var t=e.filterService,i=e.router,n=e.viewport,a=e.customHeaderOffset,r=e.preferenceConfig,o=e.dataSource,s=e.gridName,l=e.getAdditionalPlugins,c=e.perfMarker,d=new Ce,u=y.a.isUndefined(o)?new ke:new o.SettingsRepository;return new U({router:i,filterService:t,preferenceConfig:r,getGridConfig:function(e){return function(e){var t=e.repository,i=e.gridName,n=e.view,a=e.preferenceConfig,r=e.filterService,o=e.columnConfig,s=e.router,l=e.viewport,c=e.customHeaderOffset,d=e.i18n,u=d.getString("TargetingSettings_All"),p=Object(f.a)({name:i,legacyGridName:"AllSettingsGrid",tableClasses:["table","table-bordered"],tableAttributes:{"aria-label":u},dataSource:t.getDataSource(),query:t.getQuery(),rows:{headRows:["column-header-rows"]},columns:o.getColumnsConfig({view:n,router:s,isForVNext:!0}),scrolling:{header:{type:"sticky",offset:c||function(){return _()("nav.navbar-default.navbar-fixed-top").height()},attributes:{"aria-label":d.getString("{{tableName}} table header",{tableName:u})}},virtualized:!0},i18n:g.j.i18n,preferenceService:g.j.preferencesService,config:g.j.config},{selection:!0,filterService:r,sortableHeader:{template:j.sortableHeaderTemplate}});return Object(j.validateOrder)(a,p.columns),p.dataSource=y.a.omit(p.dataSource,"query"),p.scrolling.viewport=l,p}({repository:u,gridName:s,view:e,filterService:t,preferenceConfig:r,columnConfig:d,router:i,viewport:n,customHeaderOffset:a,i18n:g.j.i18n})},getGridPlugins:function(e){return Y({columnConfig:d,perfMarker:c}).concat(l(e))},setupDataSourceErrorHandling:function(e){return Object(j.setUpErrorHandling)({gridView:e,scope:{},dataSource:u.getDataSource(),i18n:g.j.i18n})}})}var Te=i("w3wv"),_e=i("KTVG"),Ee=i("feXI"),Ie=Object.assign({},{".settings-grid-view .inline-recommendation-grid-icon":{color:"#1470A5",display:"inline-block",overflow:"visible",background:"#e6f5fa"},".settings-grid-view .inline-recommendation-grid-icon:before":{fontSize:14}}),Oe=i("QfR8");var Pe=i("k51a"),Me=i("wXYX"),je=i("UUsr"),Le=y.a.noop,De=i("6e2+"),Re=i("HF+v");var Ne=function(e,t){var i=t.palette,n=void 0===i?{}:i;return Object(b.extend)({topGridPanelCustomStyles:{"& .previewTable":{wordBreak:"break-word"}},"@global":Object.assign({},Ie,Object(w.InlineEditorStyle)(),Object(w.closeImageStyle)({palette:n}),Object(w.uiblockerStyle)({palette:n}))})},Ve=Object(O.b)(I.a),Be=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={backboneGridView:null},i.willUnMount=!1,i.columnAction=b.noop,i.viewport=c.a.createRef(),i.createGrid(),i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentWillUnmount",value:function(){this.state.backboneGridView&&this.state.backboneGridView.remove(),this.willUnMount=!0}},{key:"getGridName",value:function(){return"Settings"}},{key:"createGrid",value:function(){var e=this,t=this.props,i=t.p$legacyInit,n=t.scope,a=t.preferenceService,r=t.crossPageSelectPlugin,o=t.toolbarPlugin,s=t.onGridInjected,l=t.perfMarker,d=t.permissions;this.state&&this.state.backboneGridView&&this.state.backboneGridView.remove(),this.state&&this.setState({backboneGridView:null});var u=Object(b.extend)({customerId:n.values.cid,accountId:n.values.aid,campaignId:n.values.campaignId},n),p=c.a.lazy(function(){return i.bind(e).then(function(){return g.j.fetchPreferenceConfig(e.getGridName())}).then(function(t){if(e.willUnMount)return{};var i=function(e){var t=e.entitySchema,i=e.i18n,n=e.sessionStore,a=e.preferenceStoreFactory,r=e.legacyGlobalI18n,o=e.schemaI18nCampaign,s=e.cacheService,l=e.dataContextManager,c=e.preferenceService,d=e.appConfig,u=e.jsData;return Object(Oe.j)({preferenceService:c,featureName:"AllSettingsGrid",entitySchema:t,i18n:i,legacyGlobalI18n:r,sessionStore:n,preferenceStoreFactory:a,globalConfig:d,schemaI18nCampaign:o,cacheService:s,dataContextManager:l,jsdata:u,enableCampaignWaterfall:!0,enableAdGroupWaterfall:!1,editor:{},selector:{items:[{key:"all",text:i.getString("Dashboard_AllCampaigns"),value:{query:null}},{key:"active",text:i.getString("Dashboard_AllEnabledCampaigns"),value:{query:{Status:{$in:["Enum.CampaignStatus'Active'","Enum.CampaignStatus'BudgetPaused'"]}}}}]}})}({entitySchema:g.j.CampaignSchema,i18n:g.j.i18n,sessionStore:g.j.jsDataSessionStore,preferenceStoreFactory:g.j.preferenceStoreFactory.getFilters,legacyGlobalI18n:g.j.legacyGlobalI18n,schemaI18nCampaign:g.j.s$i18n,cacheService:g.j.cacheService,dataContextManager:g.j.dataContextManager,preferenceService:a,appConfig:g.j.config,jsData:g.j.jsDataCampaign}),p=new E.FilterService(i);u.campaignId?g.j.state.set("campaign_id",u.campaignId):g.j.state.unset("campaign_id");var h=Ae({filterService:p,gridName:e.getGridName(),getAdditionalPlugins:function(e){var t=e.gridName,i=e.permissions,n=e.preferenceService,a=e.crossPageSelectPlugin,r=e.toolbarPlugin,o=e.scope,s=e.i18n;return function(){return y.a.compact([a,r,{plugin:function(e){return e("filterState",[],Le)}},{plugin:Pe.a,config:o},{plugin:Me.placeholderPlugin,config:{container:".all-settings-page .grid-noresult",text:s.getString("Grid_NoRecords"),filteredEmptyText:s.getString("Grid_NoFilteredRecords")}},Object(je.a)({gridName:t,preferenceService:n,permissions:i})])}}({gridName:e.getGridName(),permissions:d,preferenceService:a,toolbarPlugin:o,crossPageSelectPlugin:r,scope:n,i18n:g.j.i18n}),perfMarker:l,preferenceConfig:t,viewport:_()(".all-settings-page"),customHeaderOffset:function(){return _()(".sticky-container").height()}});return e.setState({backboneGridView:h}),s({backboneGridView:h,deselectAll:h.grid.gridView.deselectAll.bind(h.grid.gridView)}),{default:function(){return c.a.createElement(Ve,{gridView:h})}}})});this.allSettingsGrid=c.a.createElement(p,null)}},{key:"render",value:function(){var e=this.props,t=e.serverContext.CurrentAccount.TimeZone,i=e.panelView,n=e.showTopGridPanel,a=e.renderToolbarContainer,r=n?c.a.createElement(P.a,{panelView:i,customClasses:{topGridPanelCustomStyles:this.props.classes.topGridPanelCustomStyles}}):null,o=c.a.createElement(c.a.Suspense,{fallback:c.a.createElement(Ee.ProgressiveLoadingBlock,null)},c.a.createElement(l.Fragment,null,r)),s=c.a.createElement(l.Fragment,null,a());return c.a.createElement(c.a.Suspense,{fallback:c.a.createElement(Ee.ProgressiveLoadingBlock,null)},c.a.createElement(M.a,{topOfGridContent:o,stickyTopOfGridContent:s,gridView:this.allSettingsGrid,backboneGridView:this.state.backboneGridView,customClasses:{tablePageContainer:"all-settings-page",gridViewContainer:"all-settings-table"},timeZone:t,scrollToTop:this.props.forceHideToolbar&&this.props.showTopGridPanel,forceResetScrollFlag:this.props.forceResetScrollFlag}))}}]),t}(c.a.PureComponent),Fe=Object(b.compose)(Te.withSiteMap,function(e){return Object(p.withDefaultStyles)(e,Ne)},Object(_e.a)({getToolbarConfig:function(e){var t=e.onSelectCrossPage,i=e.scope,n=e.i18n,a=e.siteMap,r=e.permissions,o=32===e.serverContext.CurrentAccount.Status;return{toolbarSelectedConfig:y.a.reduce([["dropdown-edit",{id:"dropdown-edit",type:"dropdown",disabled:r.IsReadOnlyUser||o}],["expander",{type:"expander"}],["button-clear-selection",{type:"button-clear-selection"}],["selection-widget",{type:"selection-widget",onSelectCrossPage:t}]],function(e,t){var i=Object(De.a)(t,2),n=i[0],a=i[1];return e.set(n,a),e},new Map),toolbarUnselectedConfig:y.a.reduce(y.a.compact([["button-campaign-create",{id:"button-campaign-create",type:"button",text:n.getString("Create campaign"),classes:["btn-primary"],iconLeftGlyphName:"ba-Add",noResponsive:!0,onClick:function(){i.save(Object(Te.getRoutePathById)(a,"campaign-create-objective"));var e=Object(Re.getLocalStorage)();e.supportsStorage()&&e.set("fromPathId","settings")},disabled:r.IsReadOnlyUser||o}],["expander",{type:"expander"}],["dropdown-column-chooser",{id:"dropdown-column-chooser",type:"dropdown",pullRight:!0}],["Expand table",{type:"expand-table"}]]),function(e,t){var i=Object(De.a)(t,2),n=i[0],a=i[1];return e.set(n,a),e},new Map)}}}))(Be),Ue=i("UP37"),Ge=i("8DqV"),ze=i("Q5Xd"),He=i("DXRr"),We=i("s/hb"),qe=i.n(We),$e=i("tkuu"),Ke=i.n($e),Je=i("Hqm8"),Ze=i.n(Je),Ye=i("Lk9k"),Qe=i.n(Ye),Xe=i("rl8C"),et=i("tQZd"),tt=i("EtNv"),it=i("gurA"),nt=i("AQBV"),at=i.n(nt),rt=i("Ruc5"),ot=i.n(rt),st=i("BPWY"),lt=i.n(st),ct=i("fE/Z"),dt=i("nlAS"),ut=i.n(dt),pt=i("YK3D"),gt=i.n(pt),ht=i("6mWt"),mt=i("1gQY"),ft=i.n(mt),vt=i("G9Fe"),bt=i("b172"),yt=i("AYHa"),St=i("zeBw"),wt=i("ttkT"),Ct=i("ZhOl"),xt=i.n(Ct),kt=i("NuBx"),At=i.n(kt),Tt=i("4LQw"),_t=i("+9WI"),Et=i("nV5I"),It=i("NkAx"),Ot=i.n(It),Pt=i("+PqR"),Mt=i.n(Pt);function jt(e){var t=e.serverContext,i=t.CurrentAccount,n=i.AdvertiserCustomerID,a=i.Id,r=t.Token,o=t.ServicesEndpoints.CampaignAPI;return{deps:{isNewUI:!0,CampaignSchema:ze.Campaign,ChangeStatusView:qe.a,ChangeStatusModel:Ke.a,ChangeUrlOptionsView:Ze.a,ChangeUrlOptionsModel:Qe.a,Columns:tt.Columns,InlineBudgetEditor:Xe.a,InlineSharedBudgetEditor:et.a,LegacyColumns:it.LegacyColumns,LegacySelectedColumns:it.LegacySelectedColumns,logger:lt.a,SelectedColumns:tt.SelectedColumns,campaignStatus:ot.a,config:at.a,criterionLoader:bt,edmCampaign:ct.default,handleSortChange:vt.handleSortChange,i18nErrors:He,jsDataCampaign:ut.a,pageContext:gt.a,preferencesService:ht.default,state:ft.a,s$i18n:window.globalLegacyI18n.get("$/schema-i18n!campaign"),i18n:window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/targeting-settings"),i18nGlobal:window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),legacyGlobalI18n:window.globalLegacyI18n.get("component/i18n/loader!legacy/global"),LocationMap:yt.default,locationTargetConverter:St,odataOptions:{host:o,oDataToken:r,params:{customer_id:n,account_id:a}},httpUtils:Ue,AlertHelper:ae.AlertHelper,recommendationRepository:Ge,CampaignCacheManager:wt.a,constants:xt.a,sessionStorage:At.a,jsDataSessionStore:Tt.default,preferenceStoreFactory:{getFilters:_t.getFilters},segmentPreference:{getSegType:Et.getSegType,setSegType:Et.setSegType},dataContextManager:Ot.a,decimal:Mt.a}}}var Lt=i("/xyZ"),Dt=i.n(Lt),Rt=i("icc6"),Nt=i("vGzO"),Vt=i("Bxqc"),Bt=gt.a;function Ft(e){return new Dt.a(function(t){Object(j.getGridPreferences)({gridName:e,dateUtil:{format:function(e){return g.j.i18n.formatDate(e)}},state:ft.a,getSegPreference:Et.getSegPreference,getSegType:Et.getSegType,segmentTimeChecker:Nt.a,fetchPaginationConfig:Vt.fetchPaginationConfig}).then(function(e){e.dataSource=Object(b.omit)(e.dataSource,"query"),t(e)})})}function Ut(e,t){var i=e.serverContext,n=e.scope,a=e.permissions,r=e.history,o=e.preferenceService;return function(e,t){if(!e.campaignContext)return Dt.a.resolve(t(e));var i=e.campaignContext,n=i.currentCampaign,a=i.currentAdGroup,r=e.scope.values,o=r.campaignId,s=r.adGroupId,l={};return n&&o&&(l.currentCampaign=Object(Rt.b)(n)),a&&s&&(l.currentAdGroup=Object(Rt.a)(a)),Object.assign(Bt,{CurrentCampaign:l.currentCampaign,CurrentAdGroup:l.currentAdGroup}),at.a.set({CurrentCampaign:l.currentCampaign}),Dt.a.resolve(t(e))}({serverContext:i,scope:n,permissions:a,campaignContext:e.currentCampaign||e.currentAdGroup?{currentCampaign:e.currentCampaign,currentAdGroup:e.currentAdGroup}:void 0,history:r,preferenceService:o},t).then(function(e){return g.j.initialize(e),g.j.fetchPreferenceConfig=Ft,e})}var Gt=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return this.p$legacyInit=Ut(this.props,jt),c.a.createElement(Fe,{i18n:this.props.i18n,p$legacyInit:this.p$legacyInit,serverContext:this.props.serverContext,scope:this.props.scope,preferenceService:this.props.preferenceService,permissions:this.props.permissions,perfMarker:this.props.perfMarker})}}]),t}(c.a.PureComponent);Gt.defaultProps={serverContext:{},permissions:{},currentCampaign:null,currentAdGroup:null};var zt=Gt,Ht=i("aWzz"),Wt=i.n(Ht),qt=i("oXkQ"),$t=i.n(qt),Kt=i("jwtl"),Jt=i("muKe"),Zt=i("GCjq"),Yt=i.n(Zt),Qt=i("ZLaj"),Xt=i("IPHp"),ei=function(e){return[{plugin:Qt.crossPageSelectAllPlugin,config:{i18n:g.j.i18n}},{plugin:Me.placeholderPlugin,config:{viewRoot:e.$el,container:".noresult-container",text:g.j.i18n.getString("Grid_NoRecords"),filteredContainer:".noresult-container",filteredEmptyText:g.j.i18n.getString("Grid_NoFilteredRecords")}},{plugin:Xt.toolbarPlugin,config:{"lower-toolbar":{items:[{type:"button",text:g.j.i18n.getString("Grid_CreateCampaignButtonText"),classes:["btn","btn-primary"],onClick:function(){g.j.router.navigateToRoute("campaign_create_objective")},disabled:g.j.pageContext.Permissions.IsReadOnlyUser||g.j.config.get("CurrentAccountInActive")},{type:"dropdown",id:"dropdown-edit",disabled:g.j.pageContext.Permissions.IsReadOnlyUser||g.j.config.get("CurrentAccountInActive")},{type:"selector",id:"quick-filter"},{type:"dropdown",id:"dropdown-column-chooser"}]}}},{plugin:g.j.quickFilterPlugin,config:function(){var e={key:"recommendation",text:g.j.i18n.getString("Filter_Recommendation"),value:{query:{RecommendationTypes:{$eq:"NewTargets"}}},classes:"quick-filter-all-recommendation"};return{items:[{key:"all",text:g.j.i18n.getString("Dashboard_AllCampaigns"),value:{query:{}},classes:"quick-filter-all"},{key:"active",text:g.j.i18n.getString("Dashboard_AllEnabledCampaigns"),value:{query:{Status:{$in:["Enum.CampaignStatus'Active'","Enum.CampaignStatus'BudgetPaused'"]}}},classes:"quick-filter-all-active"}].concat([e])}}()},{plugin:g.j.filterStatePlugin,config:y.a.defaults({container:e.$(".filter-bar")},Object(g.q)({setting:g.k.AllSettings}))}]};var ti=i("pMz2"),ii=i.n(ti),ni=i("q//t"),ai=i.n(ni);function ri(e){var t=e.view,i=e.i18n,n=e.fieldName,a=e.updated,r=e.editorView,o=e.editorViewCallbackAfterUpdate,s=e.successCallback,l=y.a.pick(a,"Id",n);return g.j.jsDataCampaign.Campaign.update(a.Id,l,{adapter:"bulk"}).finally(Object(re.withUiBlock)(t.grid.gridView.$el)).then(function(){o&&y.a.isFunction(o)&&o(),y.a.isFunction(s)&&s(a),t.grid.gridView.trigger("didEdit",a)}).catch(function(e){var t,a=i.getString("ErrorNumber_-1");if(e&&e.errors){var o=g.j.i18nErrors.getBulkApiErrors(e.errors);t=o&&o[0]&&o[0].message?o[0].message:a}else t=a;r&&r.$el.is(":visible")&&y.a.isFunction(r.setErrors)?r.setErrors(Object(ne.a)({},n,t)):new ae.AlertHelper({i18n:i}).showError(t)})}var oi=function(e){function t(e){var i,a=e.i18n,s=e.view;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Campaign",type:"string",property:y.a.compact(["Id","Name","BaseCampaignName"]),sortable:"Name",title:"ColumnName_Campaign",bodyClasses:["col-CampaignName"],i18n:a}))).i18n=a,i.view=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="#customer/".concat(i,"/account/").concat(n,"/campaign/").concat(t.cmpid,"/edit");return ai()({link:a,name:t.name,baseCampaignName:t.baseCampaignName})}},{key:"onPrompt",value:function(e){var t=this,i=e.event,n=e.position,a=e.item;if("a"!==i.target.tagName.toLowerCase()){var r=a.Name;return function(e){var t=e.position,i=e.item,n=e.view,a=e.i18n,r=e.fieldName,o=e.schema,s=e.successCallback;ie.prompt({position:t,i18n:a,schema:o,model:i,fields:[r],hasLabels:!1,template:"inline",saveModel:function(e,t){return ri({view:n,i18n:a,fieldName:r,updated:e,editorView:t,editorViewCallbackAfterUpdate:function(){return t.trigger("save",e)},successCallback:s})}})}({position:n,item:a,schema:g.j.CampaignSchema,view:this.view,i18n:this.i18n,fieldName:"Name",successCallback:function(e){y.a.each(t.view.grid.gridView.itemArray,function(i){if(i.BaseCampaignName===r){var n=y.a.defaults({BaseCampaignName:e.Name},i);t.view.grid.gridView.trigger("didEdit",n)}}),window.App.trigger("campaignUpdated",{data:[y.a.pick(e,"Id","Name")]})}})}}},{key:"property",get:function(){return{get:function(e){return{cmpid:e.Id,name:e.Name,baseCampaignName:e.BaseCampaignName}},key:this.config.property}}}]),t}(X.a),si=i("9E9n"),li=i.n(si),ci=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Locations");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Locations",type:"string",property:["Id","CampaignCriterions","RecommendationTypes","TotalCountOfLocationTargets","TotalCountOfExcludedLocationTargets"],sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Locations",helpId:"Page_CampaignGrids_Locations",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="#customer/".concat(i,"/account/").concat(n,"/campaign/").concat(t.cmpid,"/edit");return li()({link:a,name:t.locationName,hasLocationRecommendation:t.hasLocationRecommendation,i18n:this.i18n})}},{key:"property",get:function(){var e=this;return{get:function(t){var i,n=t.Id,a=t.TotalCountOfLocationTargets,r=t.TotalCountOfExcludedLocationTargets,o=t.CampaignCriterions,s=t.RecommendationTypes,l=void 0===s?[]:s,c=y.a.chain(o).filter(function(e){return"Location"===e.Criterion.Type||"Radius"===e.Criterion.Type}).pluck("Criterion").value(),d=[];if(y.a.each(c,function(e){y.a.isEmpty(e.Name)?d.push(Object(g.t)(e.Latitude,e.Longitude)):d.push(e.Name)}),y.a.isEmpty(d)||0===d.length)i=e.i18n.getString("CampaignImport_AllTargetLocations");else{var u=d.join(", ");i=a>d.length?"".concat(u," ").concat(e.i18n.getString("CampaignImport_And")," ").concat(a-d.length," ").concat(e.i18n.getString("AllSettings_More")):u}return r>0&&(i="".concat(i," ").concat(e.i18n.getString("AllSettings_ExcludedCount").replace("{count}",r))),{cmpid:n,locationName:i,hasLocationRecommendation:y.a.contains(l,"NewLocationTarget")}},key:this.config.property}}}]),t}(X.a),di=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("ColumnName_AdSchedule");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"AdSchedule",type:"string",property:["Id","CampaignCriterions"],sortable:!1,title:"ColumnName_AdSchedule",helpId:"pop_BA_CampaignsGrid_AdSchedule",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="#customer/".concat(i,"/account/").concat(n,"/campaign/").concat(t.cmpid,"/edit");return li()({link:a,name:t.adSchduleName})}},{key:"property",get:function(){var e=this;return{get:function(t){var i,n=t.Id,a=t.CampaignCriterions,r=y.a.filter(a,function(e){return"DayTime"===e.Criterion.Type});if(r&&0!==r.length){var o=y.a.chain(r).pluck("CriterionBid").pluck("Multiplier").value();i=y.a.some(o,function(e){return e>0})?e.i18n.getString("Grid_AdSchedule_Custom_Bid"):e.i18n.getString("Grid_AdSchedule_Custom")}else i=e.i18n.getString("Grid_AdSchedule_Default");return{cmpid:n,adSchduleName:i}},key:this.config.property}}}]),t}(X.a),ui=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Devices");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Devices",type:"string",property:["Id","CampaignCriterions"],sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Devices",helpId:"Page_CampaignGrids_Devices",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"template",value:function(e){var t=e.value,i=g.j.state.get("customer_id"),n=g.j.state.get("account_id"),a="#customer/".concat(i,"/account/").concat(n,"/campaign/").concat(t.cmpid,"/edit");return li()({link:a,name:t.devicesName})}},{key:"property",get:function(){var e=this;return{get:function(t){var i=t.Id,n=t.CampaignCriterions;if(!g.j.pageContext.Permissions.IsOriginalDeviceTargetingEnabled)return{cmpid:i,devicesName:e.i18n.getString("Targeting_Device_AllDevices")};var a,r,o,s=y.a.filter(n,function(e){return"Device"===e.Criterion.Type}),l=y.a.filter(s,function(e){return"Computers"===e.Criterion.DeviceName}),c=y.a.filter(s,function(e){return"Smartphones"===e.Criterion.DeviceName}),d=y.a.filter(s,function(e){return"Tablets"===e.Criterion.DeviceName}),u=[];return l&&1===l.length&&(a="All"),c&&(r=5===c.length||1===c.length&&y.a.isNull(c[0].Criterion.OSName)?"All":"Some"),d&&(o=4===d.length||1===d.length&&y.a.isNull(d[0].Criterion.OSName)?"All":"Some"),"All"===a&&"All"===r&&"All"===o?u.push(e.i18n.getString("Targeting_Device_AllDevices")):(u.push(e.i18n.getString("Targeting_Device_Computers_OperatingSystems_".concat(a))),u.push(e.i18n.getString("Targeting_Device_Smartphones_OperatingSystems_".concat(r))),u.push(e.i18n.getString("Targeting_Device_Tablets_OperatingSystems_".concat(o)))),{cmpid:i,devicesName:u.join(", ")}},key:this.config.property}}}]),t}(X.a),pi=function(e){function t(e){var i,a=e.i18n;Object(n.a)(this,t);var s=a.getString("CampaignSettingsGrid_ColumnHeader_Demographics");return(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Demographic",type:"string",property:"CampaignCriterions",sortable:!1,title:"CampaignSettingsGrid_ColumnHeader_Demographics",helpId:"Page_CampaignGrids_Demographic",i18n:a,helpAriaLabel:a.getString("Click to learn more about {{item}}",{item:s})}))).i18n=a,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"property",get:function(){var e=this;return{get:function(){return e.i18n.getString("Page_PFPCampaignOrder_AllDemogExcerpt")},key:this.config.property}}}]),t}(X.a),gi=i("Uzgs"),hi=i.n(gi),mi=i("D4tT"),fi=i.n(mi),vi={UserPaused:{statusText:"Paused",ariaLabel:"EntityStatus_Paused",classes:"statusPaused_icon"},BudgetUserPaused:{statusText:"Paused",ariaLabel:"EntityStatus_Paused",classes:"statusPaused_icon"},Deleted:{statusText:"Deleted",ariaLabel:"EntityStatus_Deleted",classes:"statusDeleted_icon"},Suspended:{statusText:"Suspended",ariaLabel:"EntityStatus_Suspended",classes:"statusSuspended_icon"}},bi={statusText:"Enabled",ariaLabel:"EntityStatus_Active",classes:"statusEnabled_icon"};var yi=function(e){function t(e){var i,a=e.i18n,s=e.view;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{name:"Status",property:["Status","Id","ExperimentId"],title:"ColumnName_Status",sortable:"Status",type:"string",headerTemplate:function(){return fi()({})},i18n:a}))).i18n=a,i.view=s,i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"pickProperty",value:function(e){return{Status:e.Status,Id:e.Id,ExperimentId:e.ExperimentId}}},{key:"template",value:function(e){var t=e.value;return hi()(y.a.extend({i18n:this.i18n},t,function(e,t){var i=y.a.clone(y.a.result(vi,e,bi));return t&&(i.classes=y.a.result({Enabled:"experiment-active-icon",Paused:"experiment-paused-icon"},i.statusText,i.classes)),i}(t.Status,!!t.ExperimentId)))}},{key:"onPrompt",value:function(e){var t=this,i=e.position,n=e.item;Object(he.a)({position:i,i18n:this.i18n,currentStatus:n.Status,statusOptions:function(){var e=[{name:"Enabled",value:"Active"},{name:"Paused",value:"UserPaused"}];return y.a.result(n,"ExperimentId")&&(e=y.a.map(e,function(e){var t=y.a.result({Enabled:"experiment-active-icon",Paused:"experiment-paused-icon"},e.name);return y.a.defaults({iconClass:t},e)})),e}()}).then(function(e){if(e&&e!==n.Status){var i=y.a.defaults({Status:"UserPaused"===e?"Paused":e},n);ri({view:t.view,i18n:t.i18n,fieldName:"Status",updated:i,editorViewCallbackAfterUpdate:function(){var t=g.j.campaignStatus,a=[{Id:n.Id,Status:e===t.Paused?t.EnumPaused:e}];window.App.trigger("campaignUpdated",{data:a}),i.Status=e}})}})}}]),t}(X.a),Si=function(){function e(t){Object(n.a)(this,e);var i=t.view,a=t.permissions,r=[oi,V.c,ci,ui,di,pi,Q.c,Q.a,Q.b];this.permissions=a,this.view=i,r=y.a.compact(r),this.builder=(new j.ColumnsConfigBuilder).addCategory("CampaignSettings",function(e){return e.addColumns(r)}),this.builder.setLockedColumns([yi,oi]).setSelectedColumns(r.concat([yi]))}return Object(a.a)(e,[{key:"getColumnsConfig",value:function(){return this.builder.getColumnsConfig({i18n:g.j.i18n,view:this.view,inlineEditableSave:ri,permissions:this.permissions,schemaI18n:g.j.s$i18n,InlineSharedBudgetEditor:g.j.InlineSharedBudgetEditor,InlineBudgetEditor:g.j.InlineBudgetEditor,decimal:g.j.decimal})}},{key:"getColumnChooserConfig",value:function(){return this.builder.getColumnChooserConfig({i18n:g.j.i18n,patchQuery:!0,Columns:g.j.Columns,SelectedColumns:g.j.SelectedColumns,LegacyColumns:g.j.LegacyColumns,LegacySelectedColumns:g.j.LegacySelectedColumns})}}]),e}();var wi=function(e,t,i){var n={items:[{type:"button",text:g.j.i18n.getString("Grid_CreateCampaignButtonText"),classes:["btn","btn-primary"],onClick:function(){g.j.router.navigateToRoute("campaign_create_objective")},disabled:g.j.pageContext.Permissions.IsReadOnlyUser||g.j.config.get("CurrentAccountInActive")},{type:"dropdown",id:"dropdown-edit",disabled:g.j.pageContext.Permissions.IsReadOnlyUser||g.j.config.get("CurrentAccountInActive")},{type:"selector",id:"quick-filter"},{type:"dropdown",id:"dropdown-column-chooser"}]};return y.a.extend({},Object(g.w)(e,t),{a11y:{i18n:g.j.i18n},toolbar:{"lower-toolbar":n},crossPageSelectAll:{i18n:g.j.i18n},quickFilter:function(){var e={key:"recommendation",text:g.j.i18n.getString("Filter_Recommendation"),value:{query:{RecommendationTypes:{$eq:"NewTargets"}}},classes:"quick-filter-all-recommendation"};return{items:[{key:"all",text:g.j.i18n.getString("Dashboard_AllCampaigns"),value:{query:{}},classes:"quick-filter-all"},{key:"active",text:g.j.i18n.getString("Dashboard_AllEnabledCampaigns"),value:{query:{Status:{$in:["Enum.CampaignStatus'Active'","Enum.CampaignStatus'BudgetPaused'"]}}},classes:"quick-filter-all-active"}].concat([e])}}(),placeholder:{viewRoot:e.$el,container:".noresult-container",text:g.j.i18n.getString("Grid_NoRecords"),filteredContainer:".noresult-container",filteredEmptyText:g.j.i18n.getString("Grid_NoFilteredRecords")},perfMarker:{marker:i,appConfig:g.j.config}})},Ci=function e(t,i,a,r){Object(n.a)(this,e),y.a.extend(this,Object(g.l)(),{name:"settings_settings",dataSource:a.getDataSource(),query:a.getQuery(),columns:i.getColumnsConfig(),plugins:wi(t,i.getColumnChooserConfig(),r),preferenceService:g.j.preferencesService,config:g.j.config})},xi=i("xAIr"),ki=i.n(xi);function Ai(){var e=[];if(e.push("NewLocationTarget"),0===y.a.size(e))return"true";var t=y.a.map(e,function(e){return"RecommendationTypes/any(c:c eq Enum.RecommendationType'".concat(e,"')")});return"(".concat(t.join(" or "),")")}var Ti=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"getDataSource",value:function(){return{type:"jsdata",entity:g.j.jsDataCampaign.Campaign,primaryKey:"Id"}}},{key:"getQuery",value:function(){return{query:{$expand:y.a.compact(["CampaignCriterions","Budget","AssociatedExperiment"]).join(", ")},options:{cacheResponse:!1,entitySet:g.j.edmCampaign.currentAccount.Campaigns,filterOptions:{odata:{custom:{RecommendationTypes:Ai}}}}}}}]),e}();var _i=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.dataSource,a=e.perfMarker;Object(L.a)(Object(o.a)(t.prototype),"setState",this).call(this,{dataSource:n,setting:g.k.AllSettings}),this.perfMarker=a,this.buildGrid({dataSource:n}).then(function(){i.grid.gridView.on("didEdit",i.onItemModified,i)})}},{key:"showExperimentBudgetPopup",value:function(e){var t=this.grid.gridView.itemOfElement(e.target),i=new V.d({item:t,i18n:g.j.i18n}).render();return new B.a({editorView:i,editorPositionFactory:Object(B.b)(_()(e.target)),renderBelow:!1,className:"grid-popupeditor experiment-budget-popup"}).render()}},{key:"showInlineLocationRecommendation",value:function(e){var t=this,i=this.grid.gridView.itemOfElement(e.target);this.inlineLocationRecommendationView=new R.InlineLocationRecommendationDialog({scope:{customerId:g.j.state.get("customer_id"),accountId:g.j.state.get("account_id"),campaignId:i.Id},deps:g.j}).render(),this.inlineLocationRecommendationView.on("refresh:recommendations",function(){return t.forceRefreshGrid()})}},{key:"forceRefreshGrid",value:function(){g.j.CampaignCacheManager.invalidate("Campaign"),this.grid.gridView.refresh(!0)}},{key:"buildGrid",value:function(e){var t=this,i=e.dataSource,n=ii.a.factory({vnext:!0}).use(J.a).use(G.a11yPlugin).use(K.assistedSelectionPlugin).use(Xt.toolbarPlugin).use(z.paginationPlugin).use(Qt.crossPageSelectAllPlugin).use(g.j.filterStatePlugin).use($.uiBlockerPlugin).use(Me.placeholderPlugin).use(q.inlineErrorPlugin).use(H.a).use(g.j.quickFilterPlugin).use(function(e){var t=e.status,i=e.ChangeStatusView,n=e.ChangeStatusModel,a=e.ChangeUrlOptionsView,r=e.ChangeUrlOptionsModel,o=e.config,s=e.filterService,l=e.i18n,c=[{text:l.getString("ChangeUrlOptions"),classes:["bulk-edit-change-url-option"],createView:function(e){var t=e.viewConfig,i=e.selectedRowCount;return new a(y.a.defaults({entityType:"Campaign",model:new r({selectedEntityCount:i})},t))}}];return Object(Z.a)({status:t,ChangeStatusView:i,ChangeStatusModel:n,entityType:"campaign",config:o,filterService:s,i18n:l,items:c,showDelete:!1})}({status:g.j.campaignStatus,ChangeStatusView:g.j.ChangeStatusView,ChangeStatusModel:g.j.ChangeStatusModel,ChangeUrlOptionsView:g.j.ChangeUrlOptionsView,ChangeUrlOptionsModel:g.j.ChangeUrlOptionsModel,i18n:g.j.i18n,config:g.j.config}));g.j.pageContext.Permissions.IsReadOnlyUser||g.j.config.get("CurrentAccountInActive")||(n=n.use(W.a)),this.repository=y.a.isUndefined(i)?new Ti:new i.SettingsRepository;var a=new Si({view:this,permissions:g.j.pageContext.Permissions}),r=new Ci(this,a,this.repository,this.perfMarker);return g.j.fetchPreferenceConfig(r).then(function(){r.dataSource=y.a.omit(r.dataSource,"query"),t.grid=n.create(r),g.j.logger.logMessage("ClientTrace",{name:"Info",value:0},"SettingsGridView.buildGrid","Settings grid created."),t.grid.gridView.on("willUpdate",function(e){g.j.handleSortChange(e,t.grid.gridView,r.name)}),t.setChild("settings-grid",new g.e({grid:t.grid}))})}},{key:"onItemModified",value:function(){}},{key:"remove",value:function(){this.inlineLocationRecommendationView&&this.inlineLocationRecommendationView.remove(),this.grid&&(this.grid.toolbar&&this.grid.toolbar.gridToolbarGroup&&(this.grid.toolbar.gridToolbarGroup.remove(),this.grid.toolbar.gridToolbarGroup=null),this.grid.gridView&&(this.grid.gridView.trigger("willRemove"),this.grid.gridView.remove(),this.grid.gridView=null)),Object(L.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"events",get:function(){return{"click .inline-location-target-recommendation":"showInlineLocationRecommendation","click .experiment-budget-ellipsis":"showExperimentBudgetPopup"}}},{key:"template",get:function(){return ki.a}},{key:"className",get:function(){return"settings-grid-view"}}]),t}(Jt.DeterministicView),Ei=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.dataSource,a=e.perfMarker;if(Object(L.a)(Object(o.a)(t.prototype),"setState",this).call(this,{setting:g.k.AllSettings}),g.j.pageContext.Permissions.IsNewAllSettingsGridComponentUsageEnabled){(function(e){var t=g.j.state,i=g.j.segmentPreference,n=g.j.fetchPaginationConfig,a=g.j.segmentTimeChecker,r=i.getSegPreference,o=i.getSegType;return new Dt.a(function(i){Object(j.getGridPreferences)({gridName:e,dateUtil:{format:function(e){return g.j.i18n.formatDate(e)}},state:t,getSegPreference:r,getSegType:o,segmentTimeChecker:a,fetchPaginationConfig:n}).then(function(e){e.dataSource=Object(b.omit)(e.dataSource,"query"),i(e)})})})("settings_settings").then(function(e){var t=Ae({preferenceConfig:e,dataSource:n,gridName:"settings_settings",getAdditionalPlugins:ei,perfMarker:a});i.setChild("settings-container",t)})}else this.setChild("settings-container",new _i({dataSource:n,perfMarker:a}))}},{key:"className",get:function(){return"settings-summary-view"}},{key:"template",get:function(){return Yt.a}}]),t}(Jt.DeterministicView),Ii=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=e.campaignId,l=e.perfMarker,c=e.deps;Object(L.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{campaignId:i,setting:g.k.AllSettings});var d=g.j.pageContext.CurrentCampaign,u=y.a.result(d,"Id"),p={default:g.j.editCampaignPage,shopping:g.j.editShoppingCampaignPage,smartShopping:g.j.editSmartShoppingCampaignPage,audienceShopping:g.j.editShoppingCampaignPage}[this.getEditPageViewType(d)],h=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(){return new p({campaignId:u,deps:c,perfMarker:l})}}]),t}(D.DeterministicWrapperView);this.setChild("settings-container",new h)}},{key:"getEditPageViewType",value:function(e){var t=y.a.result(y.a.take(e.CampaignSettings),"ProviderId"),i=y.a.result(e,"CampaignType"),n=y.a.result(e,"CampaignSubType"),a=2===i;return a?a&&12===n?"smartShopping":"shopping":8===i&&t?"audienceShopping":"default"}},{key:"className",get:function(){return"edit-campaign-settings-view"}}]),t}(g.f),Oi=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=e.campaignId,l=e.adgroupId,c=e.perfMarker,d=e.deps;Object(L.a)(Object(o.a)(t.prototype),"initialize",this).call(this,{campaignId:i,adgroupId:l,setting:g.k.AllSettings});var u=g.j.pageContext.CurrentCampaign,p=y.a.result(u,"CampaignType"),h=g.j.editAdGroupPage,m=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(){var e;if(8===p){var t=d.isNewUI?{modifyTarget:function(){return y.a.delay(function(){_()(".audience-reach-estimate-container").css("top","".concat(_()(".app-content-container-col").scrollTop(),"px"))},500)},threshold:[.25,.5,.75,1],rootMargin:"100px 0px 0px 250px"}:{};e=new g.j.AudienceAdgroupSettingsWizard({viewContext:{accountCurrencyCode:g.j.pageContext.AccountCurrencyCode,currentCampaign:g.j.pageContext.CurrentCampaign,currentAdGroup:g.j.pageContext.CurrentAdGroup},perfMarker:c.createChild("AdGroupScope_AllSettings_EditAudienceAdGroup"),deps:d,reachControlOptions:t})}else e=new h({deps:d,perfMarker:c});return e}}]),t}(D.DeterministicWrapperView);this.setChild("settings-container",new m)}},{key:"className",get:function(){return"edit-adgroup-settings-view"}}]),t}(g.f),Pi=i("5Ox/"),Mi=i.n(Pi),ji=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var i=this,n=e.campaignId,a=e.adgroupId,r=e.dataSource,s=e.perfMarker,l=e.deps,c=void 0===l?{}:l,d=Object(g.v)(n,a);Object(L.a)(Object(o.a)(t.prototype),"setState",this).call(this,y.a.extend({},{campaignId:n,adgroupId:a,scope:d,dataSource:r})),this.perfMarker=s,this.deps=c,this.model.on("change",function(e){return i.onModelChange(e)}),this.onModelChange(this.model)}},{key:"setState",value:function(e){var i=e.campaignId,n=e.adgroupId;Object(L.a)(Object(o.a)(t.prototype),"setState",this).call(this,{campaignId:i,adgroupId:n,scope:Object(g.v)(i,n)})}},{key:"onModelChange",value:function(e){var t=e.get("scope"),i=e.get("campaignId"),l=e.get("adgroupId"),c=e.get("dataSource"),d=this.perfMarker,u=this.deps,p=function(e){function p(){return Object(n.a)(this,p),Object(r.a)(this,Object(o.a)(p).apply(this,arguments))}return Object(s.a)(p,e),Object(a.a)(p,[{key:"viewFactory",value:function(){var e;switch(t){case g.i.Account:e=new Ei({dataSource:c,perfMarker:d,deps:u});break;case g.i.Campaign:e=new Ii({campaignId:i,perfMarker:d,deps:u});break;case g.i.AdGroup:e=new Oi({campaignId:i,adgroupId:l,perfMarker:d,deps:u});break;default:throw new Error("Unexpected targeting settings scope!")}return e}}]),p}(D.DeterministicWrapperView);this.setChild("all-settings-container",new p)}},{key:"className",get:function(){return"all-settings-view"}},{key:"template",get:function(){return Mi.a}}]),t}(Jt.DeterministicView),Li=i("UzAQ"),Di=i("r6BN"),Ri=i("Y/Qb"),Ni=i("N8IT"),Vi=i("xGfE"),Bi=i("YgdR"),Fi=i("7R4q"),Ui=i("XNtw"),Gi=i("h5F/");function zi(e){var t=e.serverContext,i=t.CurrentAccount,n=i.AdvertiserCustomerID,a=i.Id,r=t.Token,o=t.ServicesEndpoints.CampaignAPI;return{deps:{isNewUI:!0,AudienceAdgroupSettingsWizard:Gi.AudienceAdgroupSettingsWizard,logger:lt.a,criterionLoader:bt,editAdGroupPage:Vi.a,editCampaignPage:Bi.a,editShoppingCampaignPage:Fi.a,editSmartShoppingCampaignPage:Ui.a,i18nErrors:He,pageContext:gt.a,i18n:window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/targeting-settings"),i18nGlobal:window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),legacyGlobalI18n:window.globalLegacyI18n.get("component/i18n/loader!legacy/global"),LocationMap:yt.default,locationTargetConverter:St,odataOptions:{host:o,oDataToken:r,params:{customer_id:n,account_id:a}},httpUtils:Ue,AlertHelper:ae.AlertHelper,recommendationRepository:Ge,CampaignCacheManager:wt.a,constants:xt.a,sessionStorage:At.a,decimal:Mt.a,gmcToMMCGridDeps:C}}}var Hi=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentCampaign,i=e.currentAdGroup,n=e.scope,a=e.siteMap;!function(e,t,i,n){if(null!=t&&t.CampaignSubType===Ri.a.ShoppingSmartAds&&null!=i){var a=e.location,r=e.history,o=a.search;r.replace({pathname:n,search:o})}}(n,t,i,Object(Te.getRoutePathById)(a,"ads"))}},{key:"shouldComponentUpdate",value:function(e,t){return!Object(b.isEqual)(e,this.props)||t!==this.state}},{key:"componentWillUnmount",value:function(){this.backboneSettingsView&&this.backboneSettingsView.remove()}},{key:"render",value:function(){var e=this;this.p$legacyInit=Ut(this.props,zi);var t=this.props.scope.values,i=t.campaignId,n=t.adGroupId,a=Object(g.v)(i,n),r=this.props.perfMarker;r.willFetchFile();var o,s=this.p$legacyInit.then(function(t){var o=t.deps,s=new ji({campaignId:i,adgroupId:n,scope:a,perfMarker:r,deps:Object(f.a)({},o,{router:Object(Di.a)(e.props.scope,e.props.siteMap),eventDelegator:new Li.a,i18nNewDesign:e.props.i18n})});e.backboneSettingsView=s;var l=8===o.pageContext.CurrentCampaign.CampaignType&&o.pageContext.CurrentAdGroup?[e.props.classes.settingsFormContainer,e.props.classes.audienceAdGroupPage]:[e.props.classes.settingsFormContainer];return c.a.createElement("div",{className:l.join(" ")},c.a.createElement(Ni.BackboneInstanceWrapper,{managed:!0,instance:s}))}),l=(o=s,c.a.lazy(function(){return o.then(function(e){return{default:function(){return e}}})}));return c.a.createElement(c.a.Suspense,{fallback:null},c.a.createElement("div",{className:"all-settings-page-container"},c.a.createElement(l,null)))}}]),t}(c.a.Component);Hi.defaultProps={serverContext:{},permissions:{},currentCampaign:null,currentAdGroup:null};var Wi=function(e,t){var i=function(i){var n=t(i);return c.a.createElement(e,n)};return i.displayName="withPropFilter(\n    ".concat(Object(Kt.getDisplayName)(e),"\n  )"),$t()(i,e),i.defaultProps={props:Wt.a.undefined},i}(Hi,function(e){var t=e.currentCampaign,i=e.currentAdGroup,n={currentCampaign:Object(f.a)({},t,{CampaignSubType:Ri.a[t.CampaignSubType]}),currentAdGroup:i?Object(b.omit)(i,"Status","EntityStatus","AdRotation"):i};return Object(f.a)({},e,n)}),qi=Object(Te.withSiteMap)(Object(Rt.e)(Wi)),$i=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.scope.values,t=e.campaignId,i=e.adGroupId,n=Object(g.v)(t,i);return c.a.createElement("div",{className:u()(["settings-page",this.props.classes.pageContainer])},n===g.i.Account?c.a.createElement(zt,this.props):c.a.createElement(qi,this.props))}}]),t}(c.a.Component);$i.defaultProps={serverContext:{},permissions:{},currentCampaign:null,currentAdGroup:null};var Ki=Object(h.withI18nConsumer)(Object(p.withDefaultStyles)($i,function(e,t){var i=t.palette;return{pageContainer:{display:"flex",flex:"1 1 1px",flexDirection:"column",overflow:"auto"},audienceAdGroupPage:{position:"relative",minWidth:1300},settingsFormContainer:Object(f.a)({marginLeft:"32px",marginBottom:"32px"},v.merge.apply(void 0,[{},{"@global":v.merge.apply(void 0,[{}].concat(Object(m.a)(k({theme:t},w.messageBarStyle,w.btnStyle,w.controlStyle,w.floatButtonStyle,w.getLocalBlockerStyle,A,x,w.scrollbarStyle,w.closeImageStyle)),[Object(w.experimentSettingsStyle)(t),{".adgroup-settings-container .bid-section":{marginTop:"-45px",paddingBottom:"15px"},".adgroup-settings-container .advanced-settings-section":{marginTop:"42px"},".adgroup-settings-container .audience-advanced-target-settings":{paddingTop:0},h1:{margin:"0 0 0 32px",fontSize:20,color:"#323130"},".radio.filteredProducts .helpbutton":{marginLeft:5},hr:{marginBottom:1},"#siteExclusionSettings .col-sm-3,#ipExclusionSettings .col-sm-3":{width:"100%"},".audience-adgroup-settings-wizard-container .action-buttons-container.row":{height:32,float:"left",clear:"both",marginBottom:32},h3:{borderTop:"1px solid #605E5C",fontFamily:"Segoe UI",fontSize:"18px",lineHeight:"24px",marginBottom:"21px",paddingTop:"5px"},".url-options > div > .form-group":{marginLeft:0},".custom-param__close-button":{marginLeft:"5px"},".audience-adgroup-targets-container":{paddingLeft:0},"span.level-toggle":{float:"left",marginRight:"10px"},".pagefeed-selector-container .dlb-filter-alignPlaceholder":{paddingRight:0},"a.helpbutton":{fontWeight:"normal",marginRight:"5px"},".location-bid-grid-message":{marginRight:"7px"},".setting-container .btn-save":{marginRight:"8.3px"},".alert.alert-info.form-group.page-alert":{paddingBottom:"13px",width:"100%",marginBottom:"10px"},".btn-primary":{marginRight:"10px"},".displayNone":{display:"none"},".advanced-settings-section":{marginTop:"20px","& .advanced-scheduling-grid .ad-scheduling-panel table":{"& tr:nth-child(3)":{"& .radio-inline:nth-child(2), .radio-inline:nth-child(3)":{left:0}}}},".settings-view .campaign-settings__container .form-group:last-child .col-sm-2":{display:"block"},".settings-view .adgroup-settings .form-group:last-child .col-sm-2":{display:"block"},"span.is-error":{color:"red"},"#siteExclusionSettings .col-sm-5":{width:"auto"},".all-settings-view hr":{visibility:"hidden",marginTop:"1px"},".toggle-campaign-settings-switch":{display:"inline-block",float:"left",marginRight:"10px"},".update-container .advanced-settings-section":{marginTop:"34px"},".container-budget > .row:first-child > .form-control-static":{paddingTop:"2px"},".audience-target-settings-container .bid-adjustment-grids-container table tbody tr td":{"& select.form-control,input.form-control":{display:"inline-block"}},".campaign-settings__container .budget .container-budget .input-group .budget-amount":{width:"150px"},".default-bid-container":{"& input.Amount-value":{width:"150px"},"& span.input-group-addon":{float:"left"}},"input.searchbid.form-control":{width:"150px"},".glyphicon-pencil":{marginRight:"5px"},".form-horizontal .form-group":{marginRight:0},".target-or-bid-selector-content label.radio-inline div":{display:"inline-block"},"#TrackingTemplateErrors":{color:"#A80000"},".btn-primary.location-target-done":{marginLeft:15},"input.form-control[disabled]":{color:"#a19f9d",cursor:"default",background:"#F3F2F1"},"#siteExclusionSettings .row .pull-right":{float:"none!important"},".draft-store-alert-container .draft-store-alert":y.a.extend(Object(C.draftAlertStyles)({iconFontFamily:{},palette:{}}),{maxWidth:"1070px",marginTop:"35px",marginLeft:"15px"})},function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,a=void 0===n?"MsAds MDL2 Assets":n;return{".smart-shopping-settings":{"& .bidding-strategy__container":{"& .custom-param__key-field":{width:85,display:"inline-block",marginLeft:5,marginRight:5},"& .col-sm-6":{width:438,boxSizing:"content-box",paddingTop:5,"& .alert":{marginTop:6}}},"& .campaign-settings-title, & .advaced-settings-title":{display:"none"},"& .adschedule-targets-container":{borderTop:"none","& .col-sm-2, & .col-sm-10":{paddingLeft:0},"& #adScheduleDisplayTimeLabel":{display:"block"}},"& .advanced-settings":Object(f.a)({paddingBottom:20,"& .form-group":{marginLeft:0},'&>div>.form-horizontal>.form-group>a[data-target="#setAdvancedSettings"]':{fontSize:18,marginBottom:15,marginLeft:0,paddingLeft:0,"&:hover, &:focus":{border:"none",textDecoration:"none",backgroundColor:"#F3F2F1"}}},Object(w.uurlTestToolStyle)({palette:i,iconFontFamily:a}))}}}(t)]))}].concat(Object(m.a)(k({theme:t},S.s,S.l,S.j,S.b,S.h,S.f,w.containerBudgetStyle,w.keywordPlannerStyle,w.searchboxStyle,w.locationBidGridStyle,w.locationMapStyle,w.sharedBudgetGridWrapper,w.tableStyle,w.toggleButtonStyle,w.linkStyle,w.selectElementStyle)))),Object(w.paginationStyle)(t),Object(w.alertStyle)(t),Object(w.statusStyle)(t),Object(w.audienceReachEstimateContainerStyle)(t,{leftMargin:1020,rightMargin:40}),Object(w.audienceAssociationSectionStyle)(t,{singleListBoxWidth:510}),Object(S.i)(t,{companySearchTableWidth:813,companySearchTableCompanyNameWidth:721,companyIconHeightWidth:32}),Object(S.d)(t,{creationContainerMarginLeft:0}),Object(w.advancedSettingsSectionStyle)(t,{advancedSectionMarginLeft:0}),Object(S.n)(t,{isCreationPage:!1})),"@global":Object(v.merge)({},Object(w.uiblockerStyle)(t),Object(w.datePickerStyle)({palette:i}),Object(w.targetLocationRecommendationStyle)({palette:i}),Object(S.r)({palette:i}),Object(S.u)({palette:i}),{".ui-next-summary-bar .summary-bar-settings .fall-back-settings":{display:"none"},".audience-modal.create-audience":{width:700},".ima-reach-warning-container":{marginLeft:"15px",marginTop:"5px",marginBottom:"15px"}},Object(w.audienceModalStyles)(t,{modalWidth:500}),Object(w.audienceExpressionStyle)(),Object(w.audienceCombinedListStyle)({palette:i}),Object(w.helpbuttonStyle)(t),Object(S.w)())}})),Ji=i("FTbm");function Zi(e,t,i){g.g.Campaign,t.save(i[e])}var Yi=Object(b.compose)(Rt.e,function(e){var t=function(t){function i(e){var t;Object(n.a)(this,i),t=Object(r.a)(this,Object(o.a)(i).call(this,e));var a=e.i18n;return t.levelItems=Object(Ee.getLevelItems)({i18n:a}),t.checkCampaign(),t}return Object(s.a)(i,t),Object(a.a)(i,[{key:"componentDidUpdate",value:function(e){e.currentCampaign!==this.props.currentCampaign&&(this.checkCampaign(),this.forceUpdate())}},{key:"isSmartShoppingCampaign",value:function(){var e=this.props.currentCampaign;return e&&"ShoppingSmartAds"===e.CampaignSubType}},{key:"checkCampaign",value:function(){var e=this.props,t=e.i18n,i=e.scope,n=e.urls,a=Object(g.r)(i.values.adGroupId,!0);this.isSmartShoppingCampaign()?(a!==g.g.Campaign&&(Object(g.y)(g.g.Campaign,!0),Zi(g.g.Campaign,i,n)),this.levelItems=this.levelItems.filter(function(e){return e.value===Ee.SelectorLevels.Campaign})):this.levelItems=Object(Ee.getLevelItems)({i18n:t})}},{key:"render",value:function(){return c.a.createElement(e,Object.assign({levelItems:this.levelItems},this.props))}}]),i}(c.a.PureComponent);return t.defaultProps={scope:{}},t}),Qi=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={switchLevel:!1},i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(){this.state.switchLevel&&this.setState({switchLevel:!1})}},{key:"OnLevelChange",value:function(e){var t=e.index,i=this.props,n=i.scope,a=i.urls;Object(g.y)(t,!0),this.setState({switchLevel:!0}),Zi(t,n,a)}},{key:"render",value:function(){var e=this,t=this.props,i=t.scope,n=t.component,a=t.levelItems,r=Object(g.r)(i.values.adGroupId,!0),o=i.values.adGroupId>0?null:c.a.createElement(Ji.a,{pillControlParams:{levelIndex:r,onItemChange:function(t){var i=t.index;return e.OnLevelChange({index:i})},levelItems:a}}),s=n;return c.a.createElement(l.Fragment,null,o,c.a.createElement(s,Object.assign({},this.props,{selectedLevel:r,switchLevel:this.state.switchLevel})))}}]),t}(c.a.PureComponent);Qi.defaultProps={scope:{},checkCampaign:!1,levelItems:[]};var Xi=function(e){var t=e.i18n,i=Object(Ee.getLevelItems)({i18n:t});return c.a.createElement(Qi,Object.assign({},e,{levelItems:i}))},en=Yi(Qi),tn=i("oWC8"),nn=function(e,t){var i,l;return l=i=function(i){function l(){return Object(n.a)(this,l),Object(r.a)(this,Object(o.a)(l).apply(this,arguments))}return Object(s.a)(l,i),Object(a.a)(l,[{key:"render",value:function(){var i=this;return c.a.createElement(tn.e,null,c.a.createElement(tn.c,{exact:!0,path:e[2],render:function(){var t=i.props.scope;Zi(Object(g.r)(t.values.adGroupId,!0),t,e)}}),c.a.createElement(tn.c,{exact:!0,path:e[0],render:function(){var n=i.props,a=n.scope,r=n.component;if(a.values.adGroupId>0)return Object(g.y)(g.g.AdGroup,!0),void Zi(g.g.AdGroup,a,e);var o=t;return Object(g.y)(g.g.Campaign,!0),c.a.createElement(o,Object.assign({component:r},i.props,{urls:e}))}}),c.a.createElement(tn.c,{exact:!0,path:e[1],render:function(){var n=i.props.component,a=t;return Object(g.y)(g.g.AdGroup,!0),c.a.createElement(a,Object.assign({component:n},i.props,{urls:e}))}}))}}]),l}(c.a.PureComponent),i.defaultProps={scope:{}},l},an=i("ZVoK"),rn=i("JsuJ");var on=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(t,n){var a=n.palette;return{inlineChartContainer:Object(an.a)(a),topGridPanelCustomStyles:Object(f.a)({"@global":Object(f.a)({},w.mergeStyles.apply(void 0,[{theme:n},{".settings-top-grid-panel-container":{"@global":Object(f.a)({},Object(w.mergeStyles)({theme:n},e(n),{div:{"& .alert":{display:"block",padding:"8px 32px 20px 8px"},"& .ima-reach-alert":{padding:"8px 32px 8px 8px !important"},"& .alert.alert-recommendation":{background:"#EFF6FC",border:"1px solid #0078D4 !important",padding:"10px 32px 10px 8px !important",lineHeight:"16px !important",fontWeight:600,"& .alert-info-inline":{marginLeft:"12px"},"& .recommendation-light-bulb":{color:"#0078D4",overflow:"visible",background:"#EFF6FC",marginRight:"2px",paddingRight:"0px !important","&:before":{content:"'\\EA80'",lineHeight:"22px",fontFamily:"MsAds MDL2 Assets",fontSize:"16px"}}},"& .alert-image":{float:"left"},"& .alert-info-inline":{marginLeft:"24px"},"& .HelpTopic":{marginLeft:"4px"},"& .toggle-campaign-settings-switch":{paddingRight:"8px !important",marginTop:3,display:"inline-block",float:"left"},"& .col-sm-10, .col-sm-2, .col-sm-4":{paddingLeft:"0"},"& .control-label":{marginTop:"0px"},"& .ba-campaign-selector, .ba-campaign-adgroup-selector, .col-sm-10 .control-label":{marginTop:"8px !important",marginBottom:"8px !important"},"& .alert.alert-info.form-group":{marginBottom:"33px"},"& table":{marginTop:"8px"},"& p":{display:"flex"},'& .form-group[data-property="BidMultiplier"]':{padding:"8px 0px"},"& .ba-campaign-selector .dropdown-menu":{paddingLeft:"8px !important"}}}))}},w.messageBarStyle,{".settings-top-grid-panel-container":{borderTop:"unset !important"}}].concat(i)))},Object(w.mergeStyles)({theme:n},w.tableStyle,w.advancedSettingsSectionStyle,w.toggleButtonStyle,w.paginationStyle)),"@global":Object(f.a)({".smart-shopping-campaign-settings-grid #bulk-edit-bid-multiplier[disabled]":{display:"none"},".locations-table, .ad-schedule-table, .devices-table":{"& .bingadsgrid":Object(f.a)({},Object(w.getColumnSolidBorderStyle)(1,2))}},Object(rn.i)({palette:a}),function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return{div:Object(f.a)({},w.mergeStyles.apply(void 0,[e].concat(i)))}}({theme:n},w.statusStyle,w.entitySelectorStyle),Object(w.targetLocationRecommendationStyle)(n),Object(w.uiblockerStyle)({palette:a}),Object(w.InlineEditorStyle)())}}};i.d(t,"StyledSettings",function(){return Ki}),i.d(t,"initializeWithLegacyDependencies",function(){return Ut}),i.d(t,"LevelSelectorWrapperWithCheckCampaign",function(){return en}),i.d(t,"DefaultLevelSelectorWrapper",function(){return Xi}),i.d(t,"ShellCtor",function(){return nn}),i.d(t,"getCommonSettingsPageStyles",function(){return on})},cQRH:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+"<span"+n.attr("class",n.classes(["grid-cell-text",a?"grid-disabled":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=r)?"":t),o&&(i=i+'<div class="location-cell-status clickable" tabindex="0" role="button" aria-label="Location deprecation details"><div class="location-cell-status-inline"><span class="status-icon"><span class="status_warning"></span></span><span class="status-text">'+n.escape(null==(t=e)?"":t)+"</span></div></div>"),i+="</span>"}.call(this,"deprecatedText"in a?a.deprecatedText:"undefined"!==typeof deprecatedText?deprecatedText:void 0,"inherited"in a?a.inherited:"undefined"!==typeof inherited?inherited:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0,"showDeprecatedWarning"in a?a.showDeprecatedWarning:"undefined"!==typeof showDeprecatedWarning?showDeprecatedWarning:void 0),i}},cQpn:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i={},a=e||{};return function(e,a,r,o){i["single-group"]=function(e,i){this&&this.block,this&&this.attributes,t=t+"<div"+(n.attr("class",n.classes(["form-group",i+"-property-"+e+"-group"],[!1,!0]),!1,!0)+n.attr("data-property",e,!0,!0)+n.attr("data-bind","visible: "+e+".visible, css: { 'has-error': !"+e+".isValid() }",!0,!0))+">",a&&(t=t+'<div class="form-label-container"'+n.attr("data-property",e,!0,!0)+"></div>"),t=t+"<span"+(n.attr("class",n.classes(["form-input-container",i+"-property-"+e+"-container"],[!1,!0]),!1,!0)+n.attr("data-property",e,!0,!0))+"></span></div>"},t+='<form><div class="form-inline">',function(){var e=r;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){var a=e[t];i["single-group"](a,o)}else for(var t in n=0,e)n++,a=e[t],i["single-group"](a,o)}.call(this),e&&(t+='<div class="form-group"><span class="form-input-container" data-property="$buttons"></span></div>'),t+='</div><div class="form-inline">',function(){var e=r;if("number"==typeof e.length)for(var i=0,a=e.length;i<a;i++){var o=e[i];t=t+'<div class="form-validation-container"'+n.attr("data-property",o,!0,!0)+"></div>"}else for(var i in a=0,e)a++,o=e[i],t=t+'<div class="form-validation-container"'+n.attr("data-property",o,!0,!0)+"></div>"}.call(this),t+='<div class="form-validation-container" data-property="$overall"></div></div></form>'}.call(this,"hasButtons"in a?a.hasButtons:"undefined"!==typeof hasButtons?hasButtons:void 0,"hasLabels"in a?a.hasLabels:"undefined"!==typeof hasLabels?hasLabels:void 0,"properties"in a?a.properties:"undefined"!==typeof properties?properties:void 0,"type"in a?a.type:"undefined"!==typeof type?type:void 0),t}},crxU:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="budget-editor" data-bind="visible: isEditing()"></div><div class="form-control-static" data-bind="visible: !isEditing()"><div class="col-sm-fluid col-sm-fluid__no-padding-left" data-bind="text: amount"></div><div class="col-sm-fluid col-sm-fluid__no-padding-left" data-bind="text: accountCurrencyCode"></div><div class="col-sm-fluid link-edit"><a href="javascript:void(0);">'+n.escape(null==(t=e.get("EditLink"))?"":t)+"</a></div></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},d21t:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("ERkP"),c=i.n(l),d=i("DfB3"),u=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hasDraftStore,i=e.i18n,n=e.isNewUII18n,a=e.scope.values,r=a.aid,o=a.cid,s=a.uid,l="merchantcenter?aid=".concat(r,"&cid=").concat(o,"&uid=").concat(s);return c.a.createElement("div",{className:"draft-store-alert"},t?c.a.createElement(d.Alert,{dismissible:!1,icon:c.a.createElement("div",{className:"alert-image"}),level:"Info",message:c.a.createElement("div",null,n?i.getString("Shopping campaigns with a draft store will not run. You will need to "):i.getString("Draft_Alert_Text_Part_1"),c.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer"},n?i.getString("complete Microsoft Merchant Center store set up."):i.getString("Draft_Alert_Text_Part_2")))}):null)}}]),t}(c.a.PureComponent);u.defaultProps={isNewUII18n:!0};var p=i("5iHu"),g=i.n(p),h=i("UT4o"),m=i.n(h),f=i("/xyZ"),v=i.n(f),b=i("c0nf"),y=m.a.memoize(function(e){return e.getString("Import your Google store")}),S=m.a.memoize(function(e){return e.getString("Create a draft store")}),w={NOT_DETERMINED:"NOT_DETERMINED",NO_MMC_STORES:"NO_MMC_STORES",SINGLE_MMC_STORE_SINGLE_GMC_STORE:"SINGLE_MMC_STORE_SINGLE_GMC_STORE",SINGLE_MMC_STORE_MULTIPLE_GMC_STORES:"SINGLE_MMC_STORE_MULTIPLE_GMC_STORES",MULTIPLE_MMC_STORE_SINGLE_GMC_STORE:"MULTIPLE_MMC_STORE_SINGLE_GMC_STORE",MULTIPLE_MMC_STORE_MULTIPLE_GMC_STORES:"MULTIPLE_MMC_STORE_MULTIPLE_GMC_STORES"},C=function(e){var t=e.draftStoreId,i=e.i18n,n=e.isNewUII18n;return void 0===n||n?"".concat(i.getString("Draft Store - ")).concat(t):"".concat(i.getString("Draft_Store_Prefix")).concat(t)},x=m.a.memoize(function(e){return e.getString("We are unable to sign you into your Google Merchant Center account. Before you try again, adjust your browser settings to clear your cache and allow third party cookies. If you are still unable to sign in, please try another browser or contact support.")}),k=m.a.memoize(function(e){return e.getString("We are unable to sign you into your Google Merchant Center account. Before you try again, adjust your browser settings to allow third party popups. If you are still unable to sign in, please try another browser or contact support.")}),A=m.a.memoize(function(e){return e.getString("We are unable to sign you into your Google Merchant Center account. The popup window was closed without signing in.")}),T=m.a.memoize(function(e){return e.getString("We are unable to sign you into your Google Merchant Center account, because Microsoft doesn't have offline access to your shopping campaigns. Please sign in again to grant offline access to Microsoft.")}),_=m.a.memoize(function(e){return e.getString("We are unable to sign you into your Google Merchant Center account, because Microsoft doesn't have permissions to import your shopping campaigns.")}),E=m.a.memoize(function(e){return e.getString("We were unable to sign you into your Google Merchant Center account. Please try again later.")}),I=m.a.memoize(function(e){return e.getString("We were unable to sign you into your Google Merchant Center account. Please try again later.")}),O=m.a.memoize(function(e){return e.getString("No records found.")}),P=m.a.memoize(function(e){return e.getString("Microsoft Ads has encountered an error. Please try again later or contact support.")}),M=m.a.memoize(function(e){return e.getString("Microsoft Ads has encountered an error with your Google Merchant Center account. Please sign out of Google Merchant Center, re-sign in, and try again.")}),j={InitFailed:"idpiframe_initialization_failed",PopupBlocked:"popup_blocked_by_browser",PopupClosed:"popup_closed_by_user",AccessDenied:"access_denied",AuthorizationError:"authorization_error"},L=function(e){var t=e.row,i=e.i18n;return t.SelectedMapping.Text===S(i)},D=function(e){var t=e.row,i=e.i18n;return t.SelectedMapping.Text===y(i)||"Create a new store"===t.SelectedMapping.Text},R=function(e){return null!==e.SelectedMapping.MMCId&&"-"!==e.SelectedMapping.MMCId},N=function(e){var t=e.MMCStore;return!m.a.isUndefined(t)&&!0===t.IsPlaceholder},V=function(e){var t=e.row;return!m.a.isUndefined(t.SuggestedMMCStore.MatchingPlaceholderId)&&!m.a.isNull(t.SuggestedMMCStore.MatchingPlaceholderId)&&t.SuggestedMMCStore.MatchingPlaceholderId},B=function(e){var t=e.row;return!m.a.isUndefined(t.SuggestedMMCStore.MatchingPlaceholderId)&&!m.a.isNull(t.SuggestedMMCStore.MatchingPlaceholderId)&&!m.a.isEmpty(t.SuggestedMMCStore)&&-1!==t.SuggestedMMCStore.MatchingPlaceholderId},F=function(e){var t=e.row,i=e.MMCStores;return null!==t.SelectedMapping.MMCId&&N({MMCStore:i[t.SelectedMapping.MMCId]})},U=function(e){var t=e.mappingGridRows,i=e.i18n,n=e.MMCStores;for(var a in t){var r=t[a];if(L({row:r,i18n:i})||F({row:r,MMCStores:n}))return!0}return!1},G=function(e){var t=e.GMCStores,i=e.MMCStores,n=e.logger,a=Object.keys(t).length,r=Object.keys(i).length;return 0===a?(n.logError("BSC Import - DetermineScenario - the number of Google Merchant Center stores is unexpectedly zero"),w.NOT_DETERMINED):0===r||function(e){var t=e.MMCStores;for(var i in t){var n=t[i];if(!N({MMCStore:n}))return!1}return!0}({MMCStores:i})?w.NO_MMC_STORES:1===r&&1===a?w.SINGLE_MMC_STORE_SINGLE_GMC_STORE:1===r&&a>1?w.SINGLE_MMC_STORE_MULTIPLE_GMC_STORES:r>1&&1===a?w.MULTIPLE_MMC_STORE_SINGLE_GMC_STORE:r>1&&a>1?w.MULTIPLE_MMC_STORE_MULTIPLE_GMC_STORES:(n.logError("BSC Import - DetermineScenario - the scenario could not be determined given the input Microsoft and Google Merchant Center stores"),w.NOT_DETERMINED)},z=function(e){return m.a.isString(e)&&""===e},H=function(e){return m.a.isUndefined(e)||m.a.isNull(e)||m.a.isUndefined(e.StoreName)||m.a.isNull(e.StoreName)||z(e.StoreName)?"-":e.StoreName},W=function(e){return m.a.isUndefined(e)||m.a.isNull(e)||m.a.isUndefined(e.Domain)||m.a.isNull(e.Domain)||z(e.Domain)?"-":e.Domain},q=function(e){return!(m.a.isUndefined(e)||m.a.isNull(e)||m.a.isUndefined(e.HasAccess)||m.a.isNull(e.HasAccess))&&e.HasAccess},$=function(e){return m.a.isUndefined(e)||m.a.isNull(e)||m.a.isUndefined(e.OtherMMCStoreOptions)||m.a.isNull(e.OtherMMCStoreOptions)?[]:e.OtherMMCStoreOptions},K=function(e){var t=e.GMCMerchantId,i=e.GMCStore,n=e.SuggestedMMCStore,a=e.i18n;return{GMCMerchantId:t,GMCStoreName:H(i),GMCStoreDomain:W(i),HasAccess:!0,SelectedMapping:{Text:y(a),MMCId:null},SuggestedMMCStore:n,OtherMMCStoreOptions:[]}},J=function(e){var t=e.GMCMerchantId,i=e.GMCStore,n=e.MMCStore,a=e.MMCStoreId,r=e.SuggestedMMCStore;return{GMCMerchantId:t,GMCStoreName:H(i),GMCStoreDomain:W(i),HasAccess:q(i),SelectedMapping:{Text:n.StoreName,MMCId:a},SuggestedMMCStore:r,OtherMMCStoreOptions:$(r)}},Z=function(e){var t=e.i18n,i=e.GMCMerchantId,n=e.GMCStore;return{GMCMerchantId:i,GMCStoreName:H(n),GMCStoreDomain:W(n),HasAccess:q(n),SelectedMapping:{Text:S(t),MMCId:null},SuggestedMMCStore:{},OtherMMCStoreOptions:[]}},Y=function(e,t){return N({MMCStore:t})?{}:{MMCStoreName:t.StoreName,MMCStoreId:e,MMCStoreDomain:t.Domain}},Q=function(e,t){return e-t},X=function(e,t){var i=[];for(var n in e){var a=e[n],r=n;if(m.a.isUndefined(a.StoreName)||m.a.isUndefined(a.Domain)||m.a.isUndefined(a.IsPlaceholder))return t.logError("BSC Import - GenerateMMCGridRows - MMC store is missing StoreName or Domain or IsPlaceholder"),[];var o=Y(r,a);m.a.isEmpty(o)||i.push(o)}var s=function(e){return parseInt(e.MMCStoreId,10)};return i=i.sort(function(e,t){return Q(s(e),s(t))})},ee=function(e,t){return{mmcGridRows:X(e,t),MMCStores:e}},te=function(e){return!m.a.isUndefined(e.StoreId)&&!m.a.isNull(e.StoreId)&&e.StoreId>0},ie=function(e){return!m.a.isEmpty(e)&&te(e)&&!m.a.isUndefined(e.IsDomainValidated)&&!m.a.isNull(e.IsDomainValidated)&&!1===e.IsDomainValidated},ne=function(e){return te(e)&&!m.a.isUndefined(e.IsDomainValidated)&&!m.a.isNull(e.IsDomainValidated)&&!0===e.IsDomainValidated&&!m.a.isUndefined(e.OtherMMCStoreOptions)&&!m.a.isNull(e.OtherMMCStoreOptions)&&e.OtherMMCStoreOptions.length>0},ae=function(e){var t=e.SuggestedMMCStore,i=t.OtherMMCStoreOptions;return te(t)&&!m.a.isUndefined(t.IsDomainValidated)&&!m.a.isNull(t.IsDomainValidated)&&!0===t.IsDomainValidated&&(m.a.isUndefined(i)||m.a.isNull(i)||0===i.length)},re=function(e,t,i,n){var a={},r=e.StoreId;for(var o in a[r]=i[r],t){var s=t[o];if(!ae({SuggestedMMCStore:s}))return n.logError("BSC Import - GenerateMMCGridRowsForMultipleDomainMatchScenario - otherMMCStoreOption is a suggested MMC store in an unexpected format"),[];a[r=s.StoreId]=i[r]}return X(a,n)},oe=function(e){return m.a.isEmpty(e)},se=function(e,t,i){return!0===i&&!m.a.isEmpty(e)&&!m.a.isUndefined(e.StoreName)&&!m.a.isNull(e.StoreName)&&(e.StoreName===y(t)||"Create a new store"===e.StoreName)},le=function(e){var t=e.isSignedIn,i=e.mappingGridRow,n=e.scenario,a=e.MMCStores,r=i.SuggestedMMCStore,o=(oe(r)||F({row:i,MMCStores:a}))&&n===w.NO_MMC_STORES&&!t,s=ae({SuggestedMMCStore:r});return o||s},ce=function(e,t){return(e===w.SINGLE_MMC_STORE_SINGLE_GMC_STORE||e===w.SINGLE_MMC_STORE_MULTIPLE_GMC_STORES)&&!1===t},de=function(e,t,i){return(e===w.SINGLE_MMC_STORE_SINGLE_GMC_STORE||e===w.SINGLE_MMC_STORE_MULTIPLE_GMC_STORES)&&!0===t&&!m.a.isUndefined(i)&&!m.a.isNull(i)&&!1===i.HasAccess},ue=function(e){return e===w.SINGLE_MMC_STORE_SINGLE_GMC_STORE||e===w.SINGLE_MMC_STORE_MULTIPLE_GMC_STORES||e===w.MULTIPLE_MMC_STORE_SINGLE_GMC_STORE||e===w.MULTIPLE_MMC_STORE_MULTIPLE_GMC_STORES},pe=function(e){var t=e.i18n,i=e.mappingGridRow,n=e.logger,a=e.MMCStores,r=i.SuggestedMMCStore;return oe(r)||F({row:i,MMCStores:a})?t.getString("Draft store"):ae({SuggestedMMCStore:r})?t.getString("Store matched"):(n.logError("BSC Import - GetReadOnlyCellTooltipText - SuggestedMMCStore entered the read only cell path but is not supported"),"")},ge=function(e){var t=e.GMCMerchantId,i=e.i18n,n=e.isSignedIn,a=e.logger,r=e.response,o=e.scenario,s=null,l=!1,c=r.GoogleMerchantIdToStoreMap,d=r.MMCStores,u=r.GMCStores[t],p=c[t].SuggestedMMCStore;if(ce(o,n)||de(o,n,u)){var g=Object.keys(d)[0],h=Object.values(d)[0];s=J({GMCMerchantId:t,GMCStore:u,MMCStore:h,MMCStoreId:g,SuggestedMMCStore:h})}else if(oe(p))l=!0,s=Z({i18n:i,GMCMerchantId:t,GMCStore:u});else if(ie(p)||ae({SuggestedMMCStore:p})||ne(p)){var m=p.StoreId,f=d[m];if(N({MMCStore:f})){l=!0;var v=C({draftStoreId:m,i18n:i});p.StoreName=v,f.StoreName=v}s=J({GMCMerchantId:t,GMCStore:u,MMCStore:f,MMCStoreId:m,SuggestedMMCStore:p})}else se(p,i,n)?s=K({i18n:i,GMCMerchantId:t,GMCStore:u,SuggestedMMCStore:p}):(a.logError("BSC Import - GenerateMappingGridRowsFromGetMappingsResponse - the suggested store does not fall into one of the supported categories."+" Suggested store: ".concat(p,". Defaulting to draft store")),l=!0,s=Z({i18n:i,GMCMerchantId:t,GMCStore:u}));return{row:s,rowHasDraftStore:l}},he=function(e){var t=e.response,i=e.isSignedIn,n=e.i18n,a=e.logger,r=[],o=!1,s={isError:!0};if(m.a.isUndefined(t.GoogleMerchantIdToStoreMap)||m.a.isUndefined(t.MMCStores)||m.a.isUndefined(t.GMCStores)||m.a.isUndefined(t.GMCEmail))return a.logError("BSC Import - GenerateMappingGridRowsFromGetMappingsResponse - MMC API MatchingStoresByGoogleMerchantIdsV2 (GetMappings) response is in an unexpected format"),s;var l=t.GoogleMerchantIdToStoreMap,c=t.MMCStores,d=t.GMCStores,u=t.GMCEmail,p=ee(c,a),g=G({GMCStores:d,MMCStores:c,logger:a});for(var h in l){if(m.a.isUndefined(l[h].SuggestedMMCStore))return a.logError("BSC Import - GenerateMappingGridRowsFromGetMappingsResponse - the SuggestedMMCStore field is missing from the MatchingStoresByGoogleMerchantIdsV2 (GetMappings) response"),s;var f=ge({GMCMerchantId:h,i18n:n,isSignedIn:i,logger:a,response:t,scenario:g}),v=f.row,b=f.rowHasDraftStore;r.push(v),o=!!b||o}var y=function(e){return parseInt(e.GMCMerchantId,10)};return{gmcEmailAddress:u,hasDraftStore:o,mappingGridRows:r=r.sort(function(e,t){return Q(y(e),y(t))}),infoForMMCGrid:p,scenario:g,isError:!1}},me=function(e){var t=e.i18n,i=e.logger,n=e.row,a=e.infoForMMCGrid.MMCStores;return L({row:n,i18n:t})||F({row:n,MMCStores:a})?"1":R(n)?"2":D({row:n,i18n:t})?"3":(i.logError("BSC Import - determineRadioButtonWhenConstructed - selected mapping is in an unexpected format. Defaulting to first radio button"),(void 0).choiceGroupOptions[0].key)},fe=function(e){var t=e.selectedRadioButtonKey,i=e.selectedRow,n=e.MMCStores,a=null;if("2"===t&&R(i)){var r=i.SelectedMapping.MMCId;a={MMCStoreName:n[r=m.a.isNumber(r)?r.toString():r].StoreName,MMCStoreDomain:n[r].Domain,MMCStoreId:r}}return a},ve=function(e){var t="https://mmcapi.ads-int.microsoft.com";return!e.includes("ads.microsoft.com")&&!e.includes("bingads.microsoft.com")||e.includes("si.bingads.microsoft.com")||(t="https://mmcapi.ads.microsoft.com"),t},be=function(e){var t=e.response,i=e.url,n=e.fallbackErrorLog,a=t&&t.responseText&&t.responseText.substring(0,500),r=t&&t.status;if(!(m.a.isUndefined(a)||m.a.isUndefined(r)||m.a.isUndefined(i)))return"HTTP ".concat(t.status," ").concat(i," with response ").concat(a);if(!m.a.isUndefined(i)){var o=t;return m.a.isObject(t)&&(o=JSON.stringify(t).substring(0,500)),"Encountered error with MMC API. Error: ".concat(o,". Url: ").concat(i)}return n},ye=function(e){var t=e.aid,i=e.cid,n=e.uid,a=e.onSuccess,r=e.onError,o=e.logger,s=void 0===o?null:o,l=e.smallToken,c=window.location.href,d=ve(c),u=Object(b.withUiBlock)(g()(".gmc-to-mmc-css-wrapper"));g.a.ajax({url:"".concat(d,"/api/v1/BingAds/GetGmcClientId/").concat(i,"?uid=").concat(n,"&aid=").concat(t),type:"GET",headers:{authorization:"CCMTSmallToken ".concat(l)},success:function(e){u(),a(e)},error:function(e){if(u(),r(),!m.a.isNull(s)){var t=this&&this.url;t=m.a.isUndefined(t)?"":t;var i=be({response:e,url:t,fallbackErrorLog:"MMC API - GetGmcClientId failure"});s.logError(i)}}})},Se=function(e){var t=e.authorizationCode,i=e.aid,n=e.cid,a=e.uid,r=e.googleMerchantIds,o=e.isSignedIn,s=e.onSuccess,l=e.onError,c=e.testGMCAccount,d=e.realGMCEmail,u=e.logger,p=void 0===u?null:u,h=e.smallToken,f=window.location.href,v=ve(f),y=function(e,t,i,n,a){var r={GoogleMerchantIdsToMatch:e,CreatePlaceholderStores:!1};return t&&!m.a.isNull(i)?r=m.a.extend(r,{AuthCode:i}):t&&!m.a.isNull(n)?r=m.a.extend(r,{GMCEmail:function(e){var t=e.testGMCAccount;return"bscimporttest1"===t?"bsc.import.test.1@gmail.com":"bscimporttest2"===t?"bsc.import.test.2@gmail.com":"bscimporttest6"===t?"bsc.import.test.6@gmail.com":"gmctommc1"===t?"gmc.to.mmc.1@gmail.com":"bmcimporttests02"===t?"bmcimporttests02@gmail.com":"INVALID_TEST_GMC_ACCOUNT"}({testGMCAccount:n})}):t&&!m.a.isNull(a)&&(r=m.a.extend(r,{GMCEmail:a})),r}(r,o,t,c,d),S=Object(b.withUiBlock)(g()(".gmc-to-mmc-css-wrapper"));g.a.ajax({url:"".concat(v,"/api/v1/BingAds/MatchingStoresByGoogleMerchantIdsV2/").concat(n,"?uid=").concat(a,"&aid=").concat(i),type:"POST",contentType:"application/json",data:JSON.stringify(y),headers:{authorization:"CCMTSmallToken ".concat(h)},success:function(e){S(),s(e)},error:function(e){if(S(),l(e),!m.a.isNull(p)){var t=this&&this.url;t=m.a.isUndefined(t)?"":t;var i=be({response:e,url:t,fallbackErrorLog:"MMC API - MatchingStoresByGoogleMerchantIdsV2 failure"});p.logError(i)}}})},we=function(e){var t=e.uid,i=e.cid,n=e.aid,a=void 0===n?null:n,r=e.smallToken,o=window.location.href,s=ve(o),l="".concat(s,"/api/v1/BingAds/HasPlaceholderStores/").concat(i,"?uid=").concat(t);return null!==a&&(l="".concat(l,"&aid=").concat(a)),g.a.ajax({url:l,type:"GET",headers:{authorization:"CCMTSmallToken ".concat(r)}})},Ce=function(e){for(var t=e.gmcEmailAddress,i=e.i18n,n=e.mappingGridRows,a=e.logger,r=[],o=0;o<n.length;o+=1){var s=n[o];R(s)?r.push({GMCId:parseInt(s.GMCMerchantId,10),MMCId:parseInt(s.SelectedMapping.MMCId,10),MMCEnum:"Existing"}):L({row:s,i18n:i})?r.push({GMCId:parseInt(s.GMCMerchantId,10),MMCId:null,MMCEnum:"Placeholder"}):D({row:s,i18n:i})?r.push({GMCId:parseInt(s.GMCMerchantId,10),MMCId:null,MMCEnum:"NewStore"}):a.logError("BSC Import - GenerateSetMappingsRequest - selected mapping is in an unexpected format")}return{CustomerIdAndEmailMap:{GMCEmail:t,Mappings:r}}},xe=function(e){var t=e.customerIdAndEmailMap,i=e.uid,n=e.cid,a=e.aid,r=e.logger,o=void 0===r?null:r,s=e.smallToken,l=window.location.href,c=ve(l);return new v.a(function(e,r){g.a.ajax({url:"".concat(c,"/api/v1/BingAds/SetMatchingStoresByGoogleMerchantIds?uid=").concat(i,"&cid=").concat(n,"&aid=").concat(a),type:"POST",contentType:"application/json",data:JSON.stringify(t),headers:{authorization:"CCMTSmallToken ".concat(s)},success:function(t){e(t)},error:function(e){if(r(e),!m.a.isNull(o)){var t=this&&this.url;t=m.a.isUndefined(t)?"":t;var i=be({response:e,url:t,fallbackErrorLog:"MMC API - SetMatchingStoresByGoogleMerchantIds failure"});o.logError(i)}}})})},ke=function(e){return{"& .gmc-signout-button":function(e){e.iconFontFamily,e.palette;return{border:0,padding:0,fontSize:"14px",backgroundColor:"white",color:"#0078d4",marginLeft:"10px"}}({iconFontFamily:e.iconFontFamily,palette:e.palette}),"& .error":{color:"#a4262c",top:"10px",position:"relative"}}},Ae=function(e){return{marginLeft:"20px",marginBottom:"20px","& .ms-Label":{marginTop:"10px","& .description-text":{fontWeight:"bold"},"& .description-text-2":{marginTop:"10px",fontWeight:"normal"}},"& .ms-ChoiceFieldLabel":{fontWeight:"normal"},"& .ms-ChoiceField-field::before":{marginTop:"5px"},"& .ms-ChoiceField-field::after":{marginTop:"5px"},"& .recommended-radio-item":{fontWeight:"bold",display:"inline-block",marginLeft:"5px",marginTop:"5px"},"& .mapping-editor-buttons":{marginTop:"20px"},"& .mapping-editor-cancel-button":{marginLeft:"12px"},"& .mmc-grid-css-wrapper":function(e){e.iconFontFamily,e.palette;return{boxShadow:"0px 3.2px 7.2px rgba(0, 0, 0, 0.132), 0px 0.6px 1.8px rgba(0, 0, 0, 0.108)",marginLeft:"28px","& .mmc-grid":{width:"400px",overflowX:"hidden","& .ms-DetailsList-contentWrapper":{height:"129px",overflowX:"hidden"},"& .ms-FocusZone":{paddingTop:"0px"},'& .ms-DetailsRow-cell[aria-colindex="1"]':{width:"85px !important"},'& .ms-DetailsHeader-cell[data-item-key="column1"]':{width:"85px !important"},'& .ms-DetailsRow-cell[aria-colindex="3"]':{width:"152px !important"},"& .ms-DetailsRow-cell":{cursor:"pointer"}},"& .mmc-grid-error":{"& .ms-DetailsList-contentWrapper":{height:"0px !important"}},"& .ms-SearchBox":{marginBottom:"7px",borderColor:"#F3F2F1"},"& .mmc-grid-available-stores":{fontWeight:"bold",marginLeft:"12px"},"& .mmc-grid-error-text":Ee()}}({iconFontFamily:e.iconFontFamily,palette:e.palette})}},Te=function(e){var t=e.iconFontFamily,i=e.palette;return{width:"546px",minHeight:"192px","& .two-radio-items-small":{maxHeight:"192px"},"& .two-radio-items-large":{maxHeight:"492px"},"& .three-radio-items-large":{maxHeight:"550px"},"& .ms-Callout-beak":{display:"none"},"& .mapping-editor":Ae({iconFontFamily:t,palette:i})}},_e=function(e){var t=e.iconFontFamily,i=e.palette;return{".gmc-to-mmc-css-wrapper":Oe({iconFontFamily:t,palette:i}),".mapping-editor-callout":Te({iconFontFamily:t,palette:i})}},Ee=function(){return{color:"#605e5c",fontSize:"26px",lineHeight:"36px"}},Ie=function(e){e.iconFontFamily,e.palette;return{maxWidth:"1259px","& a":{color:"#006ed4"}}},Oe=function(e){var t=e.iconFontFamily,i=e.palette;return{"& .ms-Viewport":{maxWidth:"1259px"},"& .gmc-to-mmc-mapping-grid":function(e){e.iconFontFamily,e.palette;return{marginTop:"24px",overflowY:"hidden",overflowX:"auto","& .ms-DetailsList-contentWrapper":{maxHeight:"240px",overflowY:"auto",overflowX:"auto",width:"fit-content"},"& .ms-DetailsRow-cell":{maxWidth:"400px"},"& .ms-DetailsHeader-cellName p":{textOverflow:"ellipsis",wordBreak:"break-word",overflow:"hidden",whiteSpace:"nowrap"}}}({iconFontFamily:t,palette:i}),"& .gmc-sign-in-status-section":ke({iconFontFamily:t,palette:i}),"& .draft-store-alert":m.a.extend(Ie({iconFontFamily:t,palette:i}),{marginTop:"20px"}),"& .dropdown-toggle":function(e){e.iconFontFamily,e.palette;return{width:"280px",height:"25px",cursor:"pointer",paddingRight:"5px",paddingLeft:"10px","& .selected-item":{textOverflow:"ellipsis",wordBreak:"break-word",overflow:"hidden",whiteSpace:"nowrap",verticalAlign:"middle",margin:"0 2px",float:"left",fontWeight:"normal",maxWidth:"235px"},"& .icon-right":{float:"right",color:"#0078D4"}}}({iconFontFamily:t,palette:i}),"& .read-only-cell":function(e){e.iconFontFamily,e.palette;return{borderBottom:"1px dashed #0078D4",textOverflow:"ellipsis",wordBreak:"break-word",overflow:"hidden",whiteSpace:"nowrap",verticalAlign:"middle",cursor:"pointer"}}({iconFontFamily:t,palette:i}),"& .multiple-matching-stores-description":function(e){e.iconFontFamily,e.palette;return{color:"#D83B01",marginTop:"8px","& .iconba":{fontSize:"16px"},"& .text":{fontSize:"14px",marginLeft:"8px"}}}({iconFontFamily:t,palette:i}),"& .get-mappings-error-text":Ee()}};i.d(t,"DraftAlert",function(){return u}),i.d(t,"getMmcMtEndpoint",function(){return ve}),i.d(t,"getErrorLogDetails",function(){return be}),i.d(t,"getClientIdForGMC",function(){return ye}),i.d(t,"getMappings",function(){return Se}),i.d(t,"hasPlaceHolderStores",function(){return we}),i.d(t,"generateSetMappingsRequest",function(){return Ce}),i.d(t,"setMappings",function(){return xe}),i.d(t,"dropdownTextForCreateNewRadioButton",function(){return y}),i.d(t,"dropdownTextForDraftRadioButton",function(){return S}),i.d(t,"mmcSuggestionTextForNewStores",function(){return"Create a new store"}),i.d(t,"Scenarios",function(){return w}),i.d(t,"draftStoreName",function(){return C}),i.d(t,"idpiframeInitializationFailedErrorText",function(){return x}),i.d(t,"popupBlockedByBrowserErrorText",function(){return k}),i.d(t,"popupClosedByUserErrorText",function(){return A}),i.d(t,"cannotRetrieveRefreshTokenErrorText",function(){return T}),i.d(t,"accessDeniedErrorText",function(){return _}),i.d(t,"authorizationErrorText",function(){return E}),i.d(t,"clientIdFetchErrorText",function(){return I}),i.d(t,"gridGenericErrorText",function(){return O}),i.d(t,"alertGenericErrorText",function(){return P}),i.d(t,"googleImportInvalidAuthCodeErrorText",function(){return M}),i.d(t,"signInErrorCodes",function(){return j}),i.d(t,"defaultValueForDisplayOnTheUI",function(){return"-"}),i.d(t,"PLACEHOLDER_RADIO_BUTTON_KEY",function(){return"1"}),i.d(t,"ASSOCIATE_RADIO_BUTTON_KEY",function(){return"2"}),i.d(t,"CREATE_NEW_RADIO_BUTTON_KEY",function(){return"3"}),i.d(t,"isSelectedMappingANewDraftStore",function(){return L}),i.d(t,"isSelectedMappingANewStoreToBeCreated",function(){return D}),i.d(t,"isSelectedMappingARealStore",function(){return R}),i.d(t,"getCreatedDraftStoreIdForGMCStore",function(){return V}),i.d(t,"doesGMCStoreHaveACreatedDraftStore",function(){return B}),i.d(t,"isSelectedMappingACreatedDraftStore",function(){return F}),i.d(t,"checkMappingGridForDraft",function(){return U}),i.d(t,"determineScenario",function(){return G}),i.d(t,"parseGmcStoreName",function(){return H}),i.d(t,"parseGmcDomain",function(){return W}),i.d(t,"parseHasAccessToGMCStore",function(){return q}),i.d(t,"parseOtherMMCStoreOptions",function(){return $}),i.d(t,"generateCreateNewStoreRow",function(){return K}),i.d(t,"generateRealStoreRow",function(){return J}),i.d(t,"generateDraftStoreRow",function(){return Z}),i.d(t,"generateMmcGridRow",function(){return Y}),i.d(t,"generateMMCGridRows",function(){return X}),i.d(t,"generateInfoForMMCGrid",function(){return ee}),i.d(t,"hasValidStoreId",function(){return te}),i.d(t,"isRealStoreWithoutPerfectMatch",function(){return ie}),i.d(t,"areThereMultipleDomainMatchingMMCStores",function(){return ne}),i.d(t,"isPerfectMatch",function(){return ae}),i.d(t,"generateMMCGridRowsForMultipleDomainMatchScenario",function(){return re}),i.d(t,"isDraftStore",function(){return oe}),i.d(t,"isCreateNewStore",function(){return se}),i.d(t,"isCellReadOnly",function(){return le}),i.d(t,"isSingleMmcStoreScenarioAndNotSignedIn",function(){return ce}),i.d(t,"isSingleMmcStoreScenarioAndSignedInWithNoAccess",function(){return de}),i.d(t,"scenarioHasMmcStores",function(){return ue}),i.d(t,"getReadOnlyCellTooltipText",function(){return pe}),i.d(t,"generateMappingGridRowFromGetMappingsResponse",function(){return ge}),i.d(t,"generateMappingGridRowsFromGetMappingsResponse",function(){return he}),i.d(t,"determineRadioButtonWhenConstructed",function(){return me}),i.d(t,"determineSelectedMMCStore",function(){return fe}),i.d(t,"gmcSignInStatusSectionStyles",function(){return ke}),i.d(t,"draftAlertStyles",function(){return Ie}),i.d(t,"gmcToMMCMappingGridWithSignInStyles",function(){return Oe}),i.d(t,"mappingEditorCalloutStyles",function(){return Te}),i.d(t,"mappingGridStyles",function(){return _e}),i.d(t,"detailsListGridErrorText",function(){return Ee})},d3dF:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i.n(r),s=i("SJk2"),l=new(function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,[{key:"isAssociationsQualifyForMultiAsset",value:function(e){return o.a.filter(e,function(e){return(e.EligibleLayout===s.a.SingleAndMulti||e.EligibleLayout===s.a.Multi)&&o.a.some(e.Images,function(e){return"ImageMedia133X100"===e.Asset.SubType})}).length>=4}}]),e}());t.default=l},"dM/0":function(e,t,i){var n,a,r=i("qtOx"),o={None:"None",DesignerEffects:"DesignerEffects",BackgroundBlur:"BackgroundBlur",BackgroundSolidColor:"BackgroundSolidColor"},s=(r(n={},o.None,0),r(n,o.DesignerEffects,1),r(n,o.BackgroundBlur,2),r(n,o.BackgroundSolidColor,3),n),l={Blur:"bg_blur",BackgroundColorSwap:"bg_color",SmartCrop:"smart_crop",DesignerEffects:"design_ideas"},c=(r(a={},o.BackgroundBlur,l.Blur),r(a,o.BackgroundSolidColor,l.BackgroundColorSwap),r(a,o.DesignerEffects,l.DesignerEffects),a);e.exports={EffectChoiceKey:o,EffectChoiceOrder:s,MTSmartEffect:l,EffectChoiceMtSmartEffectMapping:c}},dOXU:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("7XbR"),h=i.n(g),m=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BidValue";Object(n.a)(this,e),this.bidOption=h.a.observable(i),this.showBidValue=h.a.computed(function(){return"BidValue"===t.bidOption()})},f=i("afYL"),v=i.n(f),b=i("eRoi"),y=i("adHW"),S=i("AQBV"),w=i.n(S),C=i("+PqR"),x=i.n(C),k=i("N/2k"),A=i.n(k),T=i("5J5i"),_=i.n(T),E=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!component/ko-validation"),I=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/shopping-campaign"),O=window.globalLegacyI18n.get("$/schema-i18n!campaign"),P=window.globalLegacySchema.get("CoOpSetting"),M=function(e){var t=d.a.result(P.properties,e,{});return{min:d.a.result(t,"minimum",0),max:d.a.result(t,"maximum",1e3)}},j=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.BidBoostValue,i=e.BidMaxValue;return this.form=new y.SimpleForm({schema:P,fields:[{property:"BidBoostValue",control:function(){return _()({addonText:w.a.get("globalization.number.percentSymbol")})},validators:{range:{message:I.getString("ProductGroupsGrid_BidRange_Validation",d.a.mapObject(M("BidBoostValue"),function(e){return x.a.fromFloatToString(e,2)}))}}},{property:"BidMaxValue",control:function(){return _()({addonText:w.a.get("AccountCurrencyCode")})},validators:{range:{message:I.getString("ProductGroupsGrid_BidRange_Validation",d.a.mapObject(M("BidMaxValue"),function(e){return x.a.fromFloatToString(e,2)}))}}}],model:{BidBoostValue:t,BidMaxValue:i},s$i18n:O,i18n:E,showButtons:!1,template:A.a}),this.form.on("clickHelpIcon",function(e){window.PopupController.PopupJsClick(e.target)}),this.form}},{key:"isValid",value:function(){return this.form.validate()}},{key:"getState",value:function(){return d.a.pick(this.form.currentModel(),"BidMaxValue","BidBoostValue")}},{key:"className",get:function(){return"cpg-bid-boost-view"}}]),t}(b.DeterministicWrapperView),L=i("YK3D"),D=i.n(L),R=window.globalLegacyI18n.get("$/schema-i18n!campaign"),N=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/shopping-campaign"),V=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!component/ko-validation"),B=window.globalLegacySchema.get("AdGroup"),F=D.a.Permissions.IsBidLessThan5CentsInShoppingCampaignEnabled,U=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).SearchBid,t=void 0===e?{}:e;return this.form=new y.SimpleForm({schema:function(){var e=F?w.a.get("ProductGroupBidRange"):w.a.get("KeywordBidRange"),t=d.a.result(e,"FloorValue",F?.01:.05),i=d.a.result(e,"CeilingValue",1e3),n=B,a=n.properties.SearchBid,r=d.a.extend({},a),o=d.a.extend({},n.properties),s=d.a.extend({},n);return r.maximum=i,r.minimum=t,o.SearchBid=r,s.properties=o,s}(),fields:[{property:"SearchBid",control:function(){return _()({addonText:w.a.get("AccountCurrencyCode")})},validators:{range:{message:N.getString("ProductGroupsGrid_BidRange_Validation",function(){var e=F?w.a.get("ProductGroupBidRange"):w.a.get("KeywordBidRange"),t={min:d.a.result(e,"FloorValue",F?.01:.05),max:d.a.result(e,"CeilingValue",1e3)};return d.a.mapObject(t,function(e){return x.a.fromFloatToString(e,2)})}())}}}],model:{SearchBid:t},s$i18n:R,showButtons:!1,i18n:V,template:A.a}),this.form}},{key:"isValid",value:function(){return this.form.validate()}},{key:"getState",value:function(){return d.a.pick(this.form.currentModel(),"SearchBid")}},{key:"className",get:function(){return"cpg-search-bid-view"}}]),t}(b.DeterministicWrapperView);i.d(t,"a",function(){return G});var G=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{Settings:[{BidOption:"BidValue"}]};this.viewModel=new m(d.a.result(d.a.first(e.Settings),"BidOption")),this.cpgSearchBid=new U(d.a.pick(e,"SearchBid")),this.cpgBidBoost=new j(d.a.pick(d.a.first(e.Settings),"BidBoostValue","BidMaxValue"))}},{key:"render",value:function(){return this.$el.html(v()()),h.a.applyBindings(this.viewModel,this.el),this.$(".cpg-search-bid").append(this.cpgSearchBid.$el),this.$(".cpg-bid-boost").append(this.cpgBidBoost.$el),this}},{key:"getValues",value:function(e){var t=d.a.defaults(e,{Settings:[{}]}),i={};return this.viewModel.showBidValue()?(d.a.extend(t,this.cpgSearchBid.getState()),i=d.a.extend(t.Settings[0],{BidBoostValue:null,BidMaxValue:null})):i=d.a.extend(t.Settings[0],this.cpgBidBoost.getState()),d.a.extend(t,{CoOpSetting:i})}},{key:"validate",value:function(){return this.viewModel.showBidValue()?this.cpgSearchBid.isValid():this.cpgBidBoost.isValid()}},{key:"onBidOptionChanged",value:function(e){this.viewModel.bidOption(e)}},{key:"remove",value:function(){this.cpgSearchBid.remove(),this.cpgBidBoost.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}}]),t}(p.a.View)},dQEW:function(e,t,i){e.exports={add:"Add",replaceAll:"ReplaceAll",removeExact:"RemoveExact",removeContaining:"RemoveContaining",removeAll:"RemoveAll"}},dnaR:function(e,t,i){"use strict";i.d(t,"a",function(){return S});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("UT4o"),u=i.n(d),p=i("/8uS"),g=i("sqeS"),h=i("5SfK"),m=i.n(h),f=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextensions"),v=Object(p.d)(),b=Object(g.a)().DropdownSearchSelector;function y(){var e=u.a.chain(v).map(function(e){return{id:e,value:f.get("Language_".concat(e))||e}}).value();return{totalCount:u.a.size(e),options:e}}var S=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.observable,i=e.viewModel,n=e.entity,a=void 0===n?null:n,r=e.field,o=void 0===r?null:r,s=e.isMultimediaAd,l=void 0!==s&&s,d=e.callback,p=void 0===d?void 0:d;if(this.observable=t,u.a.isEmpty(this.observable())&&(l||this.observable(u.a.first(v))),this.viewModel=i,this.isMultimediaAd=l,this.isMultimediaAd){if(!(a instanceof c.a.Model))throw new Error("entity should be a backbone model");if(u.a.isEmpty(o))throw new Error("field is required");this.field=o,this.entity=a,this.callback=p}}},{key:"setDropdownSearchSelector",value:function(){var e=this;this.dropdownSearchSelector&&this.dropdownSearchSelector.remove();var t=this.observable(),i={id:t,value:f.get("Language_".concat(t))||t};this.isMultimediaAd&&u.a.isEmpty(this.observable())&&(i={}),this.dropdownSearchSelector=new b({selectOption:i,dataSource:y,pageSize:100,i18n:f}).render(),this.dropdownSearchSelector.on("option-selected",function(t){e.observable(t.id),e.callback&&e.callback(t)}),this.$(".actionextension-search-dropdown-container").append(this.dropdownSearchSelector.el)}},{key:"render",value:function(){return this.$el.html(m()()),this.setDropdownSearchSelector(),this}}]),t}(c.a.View)},"e/m7":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i={},a=e||{};return function(e,a){i.koValidationError=function(e,i){this&&this.block,this&&this.attributes,t=t+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",i||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'};var r=a.v4();t=t+'<div class="form-group query-editor"><div class="col-sm-5"><select class="query-operand form-control" data-bind="value: Operand, options: productConditionOptions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, disable: !selected()"'+n.attr("aria-label",e.get("ShoppingCampaign_ProductConditionOptions"),!0,!0)+'></select></div><div class="col-sm-1 text-center"><label class="control-label" data-bind="attr: { &quot;tabindex&quot;: selected() ? 0 : -1 }">'+n.escape("=")+'</label></div><div class="col-sm-5">\x3c!--ko if: !attributeOptions().length > 0--\x3e<input class="query-attribute form-control" type="text" data-bind="disable: !selected(), value: Attribute, valueUpdate: &quot;input&quot;"'+n.attr("aria-describedby",r,!0,!0)+' aria-required="true"'+n.attr("aria-label",e.get("ShoppingCampaign_ProductAttribute"),!0,!0)+'>\x3c!-- /ko--\x3e\x3c!--ko if: attributeOptions().length > 0--\x3e<select class="query-attribute form-control" data-bind="value: Attribute, options: attributeOptions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, disable: !selected()"'+n.attr("aria-label",e.get("ShoppingCampaign_ProductAttributeOptions"),!0,!0)+"></select>\x3c!-- /ko--\x3e",i.koValidationError("Attribute",r),t=t+'</div><div class="col-sm-1 remove-editor ad-group-list__col-sm-1--remove" data-bind="visible: showRemoveLink()"><span class="glyphicon glyphicon-remove closeimage ad-group-list__glyphicon clickable"'+n.attr("aria-label",e.get("ShoppingCampaign_Button_Remove"),!0,!0)+' tabindex="0" role="button"></span></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"uuid"in a?a.uuid:"undefined"!==typeof uuid?uuid:void 0),t}},eRnW:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",(a||"Learn more")+" "+(t||""),!0,!0)+"></a>"},i=i+'<div class="audience-advanced-settings form-horizontal"><div class="form-group"><div class="col-sm-2 control-label crud-adgroup-schedule-label"><label>'+n.escape(null==(t=e.getString("Audience_Campaign_Settings_AdSchedule"))?"":t)+'</label></div><div class="col-sm-4 form-control-static"><div class="ad-schedule"></div></div></div><div'+n.attr("class",n.classes(["form-group","exclusions-section",!1===o?"hide":""],[!1,!1,!0]),!1,!0)+">",r?(i=i+'<a class="camp-adg-shared-exclusions-dropdown" data-toggle="collapse" data-target="#setExclusions" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isExclusionsExpanded() ? &quot;true&quot; : &quot;false&quot;}" role="button"><span class="bedded-icon-marker spritedimagealign expanderImage"></span>'+n.escape(null==(t=e.getString("AdvancedSetting_ExclusionText"))?"":t)+"</a>",a.popupHelp("pop_BA_Settings_Exclusions",e.getString("AdvancedSetting_ExclusionText"),e.getString("LearnMoreLinkText")),i=i+'<div class="collapse" id="setExclusions" data-section="ExclusionsSection"><div class="col-sm-10"><div class="camp-adg-shared-text-under-dropdown">'+n.escape(null==(t=e.getString("AdvancedSetting_WebSiteExclusionDesc"))?"":t)+'</div><div class="site-exclusions"></div></div></div>'):i=i+'<div class="col-sm-2 control-label"><label>'+n.escape(null==(t="Exclusions")?"":t)+'</label></div><div class="col-sm-10"><div class="site-exclusions"></div></div>',i=i+"</div><div"+n.attr("class",n.classes(["form-group","url-options",!1===o?"hide":""],[!1,!1,!0]),!1,!0)+"></div><div"+n.attr("class",n.classes(["form-group","ad-rotation-section",!1===o?"hide":""],[!1,!1,!0]),!1,!0)+'><div class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.getString("AdvancedSetting_AdRotationText"))?"":t)+'</label></div><div class="col-sm-4"><div class="ad-rotation"></div></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isNewUI"in r?r.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0,"isSettings"in r?r.isSettings:"undefined"!==typeof isSettings?isSettings:void 0),i}},eakW:function(e,t,i){"use strict";i.d(t,"a",function(){return p});var n=i("nN5v"),a=i("ePzV"),r=i("UT4o"),o=i.n(r),s=i("nlAS"),l=i.n(s),c=i("axE2"),d=i("Q3lO"),u=i("UcGB"),p=function(){function e(t,i,a,r,s){var c=this;Object(n.a)(this,e),this.bid=i,this.adDistribution=a,this.keyword=r,this.language=t(),this.languages=[],this.isSignupPage=!1,this.adGroupCriterions=l.a.Intermediate.getAll("AdGroupCriterion"),this.campaignCriterions=l.a.Intermediate.getAll("CampaignCriterion"),this.useCampaignSettings=s,t.subscribe(function(e){c.language=e,c.languages=[e],c.onChange()}),l.a.Intermediate.subscribe("AdGroupCriterion",function(e){c.adGroupCriterions=e,c.onChange()}),l.a.Intermediate.subscribe("CampaignCriterion",function(e){c.campaignCriterions=e,c.onChange()}),this.adDistribution&&this.adDistribution.on("search:change",function(e){o.a.isFunction(c.bid.resetSearchBidStatus)&&c.bid.resetSearchBidStatus(e)}),this.startListening()}return Object(a.a)(e,[{key:"startListening",value:function(){var e=this;u.default.on("level:changed",function(t){e.useCampaignSettings="campaign"===t,e.onChange()},this),u.default.on("change:locationTargetOption",function(t){var i=t.locations;"campaign"===t.level?e.campaignCriterions=i:e.adGroupCriterions=i,e.onChange()},this)}},{key:"stopListening",value:function(){u.default.off(null,null,this)}},{key:"setLanguageSet",value:function(e){this.languages=e}},{key:"onChange",value:function(){this.isKPAndTrafficEstimationAllowed(),this.isSyndicationAllowed()}},{key:"isSyndicationAllowed",value:function(){var e=this.currentLevelLocations;this.adDistribution&&this.adDistribution.isSyndOptionAllowed(this.language,e)}},{key:"isKPAndTrafficEstimationAllowed",value:function(){var e=this.currentLevelLocations;this.allowAdInsight=("search"===Object(d.default)()||this.isSignupPage)&&c.isEstimationSupported(null===this.language?this.languages:this.language,e),this.bid&&this.bid.searchBidView.onLanguageLocationChanged(this.allowAdInsight,e,null===this.language?this.languages:[this.language]),this.keyword&&this.keyword.onLanguageLocationChanged(this.allowAdInsight,e,null===this.language?this.languages:this.language)}},{key:"setSignupPage",value:function(){this.isSignupPage=!0}},{key:"currentLevelLocations",get:function(){return this.useCampaignSettings?this.campaignCriterions:this.adGroupCriterions}}]),e}()},ejHs:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t+='<div class="location-recommendation-container form-group" data-bind="visible: showLocationsRecommendationsGrid">',i&&(t+='<div class="row"><div class="col-sm-12"><div class="location-recommendation-map-container" style="margin-top: 25px; margin-bottom: 25px;"></div></div></div>'),t=t+'<div data-bind="visible: hasRecommendation"><div class="alert alert-recommendation" style="line-height: 10px; margin: 0; padding-top: 10px; padding-bottom: 10px; border: 1px solid;"><div class="alert-info-inline collapsed" data-toggle="collapse" data-target="#location-recommendation-body-container" data-bind="click: clickCollapse"><span class="glyphicon" data-bind="css: isExpanded() ? &quot;glyphicon-chevron-up&quot; : &quot;glyphicon-chevron-down&quot;" style="padding-right: 10px;"></span><span class="recommendation-light-bulb" style="padding-right: 5px;"></span><span class="clickable recommendation-detail-info" tabindex="0" data-bind="html: banner"></span></div></div><div class="location-recommendation-body panel collapse" id="location-recommendation-body-container" style="padding: 15px 0 0 15px;"><div class="form-group row"><div class="col-sm-6"><div class="location-recommendation-grid-container"></div></div></div><div class="form-group row"><div class="col-sm-12" style="padding-top: 5px; padding-bottom: 5px;"><input class="apply btn btn-primary" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Apply"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"><input class="dismiss btn btn-default" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Dismiss"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"></div></div></div></div></div>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"showMap"in i?i.showMap:"undefined"!==typeof showMap?showMap:void 0),t}},f2GW:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("kwR5"),d=i("UT4o"),u=i.n(d),p=i("5iHu"),g=i.n(p),h=i("syDw"),m=i.n(h),f=i("sogb"),v=i.n(f),b=i("YK3D"),y=i.n(b),S=i("7XbR"),w=i.n(S),C=i("1gQY"),x=i.n(C),k=i("F1Wi"),A=i.n(k),T=i("IvCx"),_=i("0UW4"),E=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/inline-chart"),I=y.a.Permissions.IsViewThroughConversionEnabled,O=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterOptionId:[]}).filterOptionId;Object(n.a)(this,e),this.filterOptionId=t}return Object(a.a)(e,[{key:"fetch",value:function(){var e=this,t={data:u.a.compact([{id:1,value:E.get("ColumnName_Clicks")},{id:0,value:E.get("ColumnName_CostPerConversion")},{id:2,value:E.get("ColumnName_CPA")},{id:3,value:E.get("ColumnName_Conversions")},{id:4,value:E.get("ColumnName_CTR")},{id:5,value:E.get("TrendAreaChart_AxisY")},{id:6,value:E.get("ColumnName_Spend")},{id:7,value:E.get("Chart_AvgPosition")},{id:8,value:E.get("ColumnName_ConversionRate")},{id:9,value:E.get("ColumnName_Revenue")},{id:10,value:E.get("ColumnName_ROAS")},{id:11,value:E.get("ColumnName_AllConversionCPA")},{id:12,value:E.get("ColumnName_AllConversions")},{id:13,value:E.get("ColumnName_AllConversionRate")},{id:14,value:E.get("ColumnName_AllConversionAdvertiserReportedRevenue")},{id:15,value:E.get("ColumnName_AllConversionRevenueOnAdSpend")},I&&{id:16,value:E.get("ColumnName_ViewThroughConversions")}])};if(u.a.isArray(this.filterOptionId)&&0!==this.filterOptionId.length){var i=t.data;t.data=u.a.filter(i,function(t){return!u.a.contains(e.filterOptionId,t.id)})}return t}}]),e}(),P=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/inline-chart"),M=function(e){function t(e){var i;Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this))).usingNewDatefilter=e&&e.usingNewDatefilter;var a={};return Object(r.a)(i,x.a.getPromise("$daterange").then(function(e){a.dateRange=i.usingNewDatefilter?e:window.App.views.Summary.dateFilter.ko_model.appliedRange(),a.comparedDateRange=i.usingNewDatefilter?e.compared:window.App.views.Summary.dateFilter.ko_model.appliedComparedRange();var t=i._calculateDiff(a.dateRange),n=i._calculateDiff(a.comparedDateRange),r=new Date,o=new Date(r.setMonth(r.getMonth()-6)),s=t>0||!!n&&n>0||!(a.dateRange.start>o)||!(!a.comparedDateRange||a.comparedDateRange.start>o),l=i._calculateDisabled(t,1,30)||!!n&&i._calculateDisabled(n,1,30),c=i._calculateDisabled(t,7,210)||!!n&&i._calculateDisabled(n,7,210),d=i._calculateDisabled(t,31,900)||!!n&&i._calculateDisabled(n,31,900),u=i._calculateDisabled(t,90,1/0)||!!n&&i._calculateDisabled(n,90,1/0);if(s&&l&&c&&d&&u){var p=n>t?n:t;l=i._calculateDisabled(p,1,30),c=i._calculateDisabled(p,7,210),d=i._calculateDisabled(p,31,900),u=i._calculateDisabled(p,90,1/0)}return{data:[{id:0,value:P.get("InlineChart_Granularity_Hourly"),enumValue:"Hour",disabled:s},{id:1,value:P.get("InlineChart_Granularity_Daily"),enumValue:"Day",disabled:l},{id:2,value:P.get("InlineChart_Granularity_Weekly"),enumValue:"Week",disabled:c},{id:3,value:P.get("InlineChart_Granularity_Monthly"),enumValue:"Month",disabled:d},{id:4,value:P.get("InlineChart_Granularity_Quarterly"),disabled:u,enumValue:"Quarter"}]}}))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"_calculateDiff",value:function(e){if(e){var t=new Date(e.start),i=new Date(e.end),n=Math.abs(i.getTime()-t.getTime());return Math.round(n/864e5)}return null}},{key:"_calculateDisabled",value:function(e,t,i){return e<t||e>i}}]),t}(m.a.Collection),j=i("/xyZ"),L=i.n(j),D=i("fE/Z"),R=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"convertToDateObj",value:function(e){var t=e.split("-"),i=t[0],n=t[1]-1,a=t[2];return new Date(i,n,a,0,0,0)}},{key:"numberOfDataPoints",value:function(e){var t=this.convertToDateObj(e.startDate),i=this.convertToDateObj(e.endDate);switch(e.granularity){case"Day":return Math.round((i-t)/864e5)+1;case"Week":return Math.round((i-t)/6048e5);case"Month":return Math.round((i-t)/2592e6);case"Quarter":return Math.round((i-t)/7776e6)+1;default:return Math.round((i-t)/36e5)}}},{key:"prependZero",value:function(e){return e<10?"0".concat(e):e}},{key:"generateFormattedDateString",value:function(e){return"".concat(e.getYear()+1900,"-").concat(this.prependZero(e.getMonth()+1),"-").concat(this.prependZero(e.getDate()),"T").concat(this.prependZero(e.getHours()),":").concat(this.prependZero(e.getMinutes()),":").concat(this.prependZero(e.getSeconds()),"-08:00")}},{key:"generateMockData",value:function(e){var t=this,i=[];return u.a.each(["AverageCPC","Clicks","CPA","Conversions","CTR","Impressions","Spend","AveragePosition","ConversionRate","AdvertiserReportedRevenue","RevenueOnAdSpend","AllConversionCPA","AllConversions","AllConversionRate","AllConversionAdvertiserReportedRevenue","AllConversionRevenueOnAdSpend","ViewThroughConversions","ViewThroughConversionsRevenue","ViewThroughConversionsCPA","ViewThroughConversionsReturnOnAdSpend","ViewThroughConversionsRate"],function(n){var a={MetricName:n,PrimaryDataPoints:[],ComparisonDataPoints:[]},r=t.convertToDateObj(e.startDate);t._fillData(e,a.PrimaryDataPoints,r),e.compareStartDate&&t._fillData(e,a.ComparisonDataPoints,r),i.push(a)}),i}},{key:"_fillData",value:function(e,t,i){if("Hour"===e.granularity)for(var n=i.getDate(),a=0;a<24&&i.getDate()===n;a++)t.push({DateTime:this.generateFormattedDateString(i),Value:Math.floor(100*Math.random())}),i.addHour(1);else if("Day"===e.granularity)for(var r=this.numberOfDataPoints(e),o=0;o<r;o++)t.push({DateTime:this.generateFormattedDateString(i),Value:Math.floor(100*Math.random())}),i.addDay(1);else if("Week"===e.granularity)for(var s=this.numberOfDataPoints(e),l=0;l<s;l++)t.push({DateTime:this.generateFormattedDateString(i),Value:Math.floor(100*Math.random())}),i.addDay(7);else if("Month"===e.granularity)for(var c=this.numberOfDataPoints(e),d=0;d<c;d++)t.push({DateTime:this.generateFormattedDateString(i),Value:Math.floor(100*Math.random())}),i.addMonth(1);else if("Quarter"===e.granularity)for(var u=this.numberOfDataPoints(e),p=0;p<u;p++)t.push({DateTime:this.generateFormattedDateString(i),Value:Math.floor(100*Math.random())}),i.setMonth(i.getMonth()+3)}},{key:"findAll",value:function(e){var t=this;return new L.a(function(i){i(t.generateMockData(e))})}}]),t}(function(){function e(t){Object(n.a)(this,e),this.targetName=t}return Object(a.a)(e,[{key:"create",value:function(e,t,i){return e.getAdapter(this.targetName).create(e,t,i)}},{key:"find",value:function(e,t,i){return e.getAdapter(this.targetName).find(e,t,i)}},{key:"findAll",value:function(e,t,i){return e.getAdapter(this.targetName).findAll(e,t,i)}},{key:"update",value:function(e,t,i,n){return e.getAdapter(this.targetName).update(e,t,i,n)}},{key:"updateAll",value:function(e,t,i,n){return e.getAdapter(this.targetName).updateAll(e,t,i,n)}},{key:"destroy",value:function(e,t,i){return e.getAdapter(this.targetName).destroy(e,t,i)}},{key:"destroyAll",value:function(e,t,i){return e.getAdapter(this.targetName).destroyAll(e,t,i)}}]),e}()),N=i("6fFq"),V=i.n(N),B=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/inline-chart");function F(e){var t="";switch(e){case 0:t=B.get("ColumnName_CostPerConversion");break;case 1:t=B.get("ColumnName_Clicks");break;case 2:t=B.get("ColumnName_CPA");break;case 3:t=B.get("ColumnName_Conversions");break;case 4:t=B.get("ColumnName_CTR");break;case 5:t=B.get("TrendAreaChart_AxisY");break;case 6:t=B.get("ColumnName_Spend");break;case 7:t=B.get("Chart_AvgPosition");break;case 8:t=B.get("ColumnName_ConversionRate");break;case 9:t=B.get("ColumnName_Revenue");break;case 10:t=B.get("ColumnName_ROAS");break;case 11:t=B.get("ColumnName_AllConversionCPA");break;case 12:t=B.get("ColumnName_AllConversions");break;case 13:t=B.get("ColumnName_AllConversionRate");break;case 14:t=B.get("ColumnName_AllConversionAdvertiserReportedRevenue");break;case 15:t=B.get("ColumnName_AllConversionRevenueOnAdSpend");break;case 16:t=B.get("ColumnName_ViewThroughConversions")}return t}var U=i("eiR/"),G=i("U72C"),z=i("/XA/"),H=i("BPWY"),W=i.n(H),q=i("ZhOl"),$=i.n(q),K=i("nlAS"),J=i.n(K),Z=(y.a&&y.a.Permissions||{}).IsCustomerHierarchyEnabled,Y=function(){function e(){Object(n.a)(this,e),this.p$jsdata=void 0}return Object(a.a)(e,[{key:"fetchData",value:function(e,t){var i=this._generateRequest(e,t),n=!("true"!==Object(U.getParameter)("useInlineChartMockData",window.location.href))||"true"===G.get("useInlineChartMockData");return this.p$jsdata=n?this._fetchDataUsingMockDBAdapter(i):this._fetchDataUsingOdataAdapter(i,e.refreshGridData),this.p$jsdata}},{key:"_generateRequest",value:function(e,t){var i={},n="'".concat(function(e){var t={0:"AverageCPC",1:"Clicks",2:"CPA",3:"Conversions",4:"CTR",5:"Impressions",6:"Spend",7:"AveragePosition",8:"ConversionRate",9:"AdvertiserReportedRevenue",10:"RevenueOnAdSpend",11:"AllConversionCPA",12:"AllConversions",13:"AllConversionRate",14:"AllConversionAdvertiserReportedRevenue",15:"AllConversionRevenueOnAdSpend",16:"ViewThroughConversions"},i=e.toString().split(","),n=u.a.map(i,function(e){return t[e]?t[e]:e});return"".concat(n)}(t),"'");return u.a.extend(i,{parentLevels:e.parentLevels,edmEntity:e.currentEntity?this._getEntityCollectionName(e.currentEntity):z.a.CampaignEdmEntity,entity:e.currentEntity?e.currentEntity:z.a.CampaignEntity,startDate:e&&e.period?this._formatDateString(e.period().start):null,endDate:e&&e.period?this._formatDateString(e.period().end):null,compareStartDate:e&&e.period&&e.period().compared?this._formatDateString(e.period().compared.start):null,compareEndDate:e&&e.period&&e.period().compared?this._formatDateString(e.period().compared.end):null,granularity:e.granularity&&e.granularity()?e.granularity():"Day",metrics:n,filters:e.filter(),movingAverage:e.isMovingAverageOn()}),i}},{key:"_fetchDataUsingOdataAdapter",value:function(e,t){var i,n=this,a=null,r="string"===typeof e.filters,o=r||!e.filters?e.filters:u.a.select(e.filters,function(e){var t=!u.a.isEmpty(e.Values)&&!u.a.contains(e.Values,"");return!t&&W.a.logError&&W.a.logError("inlineChartV2/filterForFetch","there are invalid values, requested filters are ".concat(JSON.stringify(e))),t});o?(a=r?decodeURIComponent(o):decodeURIComponent(V.a.convertToURLParam(o,e.entity)),W.a.logMessage&&(i=r?'{ "type" : "string", "value" : "'.concat(o,'" }'):'{ "type" : "object", "value" : "'.concat(JSON.stringify(o[0]),'" }'),W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/filterForFetch",'{ "entity" : "'.concat(e.entity,'", "filter" : "').concat(a,'", "request" : "').concat(i,'" }')))):a={};return u.a.isEmpty(a)||(a=a.slice(8)),J.a.PerformanceTimeSeries.findAll({where:a,entitySet:this._getScope(e).toJSON()},{headers:{"x-ms-refreshcampaigncache":!!t},bypassCache:!0}).then(function(t){return u.a.isEmpty(t.errors)?n._prepareData(e,t):L.a.reject(t)})}},{key:"_fetchDataUsingMockDBAdapter",value:function(e){var t=this;return new R("mockdb").findAll(e).then(function(i){return t._prepareData(e,i)})}},{key:"_formatDateString",value:function(e){var t=function(e){return 1===e.length?"0".concat(e):e},i=new Date(Date.parse(e)),n="".concat(i.getFullYear()),a="".concat(i.getMonth()+1),r="".concat(i.getDate());return"".concat(n,"-").concat(t(a),"-").concat(t(r))}},{key:"_prepareData",value:function(e,t){var i={};return u.a.each(t,function(e){var t=function(e){var t={AverageCPC:0,Clicks:1,CPA:2,Conversions:3,ClickThruRate:4,Impressions:5,Spent:6,AveragePosition:7,ConversionRate:8,AdvertiserReportedRevenue:9,RevenueOnAdSpend:10,AllConversionCPA:11,AllConversions:12,AllConversionRate:13,AllConversionAdvertiserReportedRevenue:14,AllConversionRevenueOnAdSpend:15,ViewThroughConversions:16};return t[e]}(e.MetricName);i[t]={},i[t]=function(e){var t={},i=function(e,i){i?t.PrimaryData=t.PrimaryData||[]:t.ComparisonData=t.ComparisonData||[],e.DateTime=e.DateTime.substring(0,19),e.DateTime=e.DateTime+"Z";var n=new Date(e.DateTime);i?t.PrimaryData.push([n.getTime(),e.Value]):t.ComparisonData.push([n.getTime(),e.Value])};return u.a.each(e.PrimaryDataPoints,function(e){i(e,!0)}),u.a.each(e.ComparisonDataPoints,function(e){i(e,!1)}),t}(e)}),i}},{key:"_getScope",value:function(e){var t=null;return t=this._getNavigation(e.edmEntity),u.a.each(e.parentLevels,function(e){e&&u.a.isString(e.id)&&(e.id=parseInt(e.id)),t=t[e.name].$withKey(e.id)}),e&&e.edmEntity&&(t=t[e.edmEntity]),t[Z&&"Accounts"===e.edmEntity?"Default.HierarchicalPerformanceTimeSeries":"Default.PerformanceTimeSeries"].$call({granularity:"Enum.Granularity'".concat(e.granularity,"'"),startDate:e.startDate,endDate:e.endDate,comparisonStartDate:e.compareStartDate?e.compareStartDate:null,comparisonEndDate:e.compareEndDate?e.compareEndDate:null,metrics:e.metrics,movingAverage:e.movingAverage})}},{key:"_getNavigation",value:function(e){switch(e){case z.a.AccountEdmEntity:case z.a.DynamicSearchAdsEdmEntity:return D.default.currentCustomer;case z.a.CampaignEdmEntity:default:return D.default.currentAccount}}},{key:"_getEntityCollectionName",value:function(e){var t={Campaign:z.a.CampaignEdmEntity,Keyword:z.a.KeywordEdmEntity,Account:z.a.AccountEdmEntity,NegativeKeyword:z.a.KeywordEdmEntity,NegativeKeywordList:z.a.KeywordEdmEntity,AdGroup:z.a.AdGroupEdmEntity,Ad:z.a.AdEdmEntity,CampaignCriterion:z.a.CampaignCriterionEdmEntity,AdGroupCriterion:z.a.AdGroupCriterionEdmEntity};return t[e]?t[e]:e}}]),e}(),Q={get currentLevel(){return x.a.get("adgroup_id")?"AdGroup":x.a.get("campaign_id")?"Campaign":"Account"}},X=i("Etwy"),ee=i("FOT9"),te=i("AQBV"),ie=i.n(te),ne=ee.store.definitions.InlineChart;function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CampaignUI";return ne.findAll({where:{project:t}}).then(function(i){0===i.length&&ne.create({inlineChartData:{},project:t},{path:ie.a.get("odata.path")});var n=e?i[0].inlineChartData[e]:i[0];return L.a.resolve(i.length?n:u.a.noop())})}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CampaignUI";return ae().then(function(i){var n=u.a.result(i,"inlineChartData"),a=n?u.a.extend({},n,e):e;return i&&!u.a.isEmpty(a)?ne.update(i.id,{inlineChartData:a}):ne.create({inlineChartData:a,project:t},{path:ie.a.get("odata.path")})})}u.a.isUndefined(ne)&&(ne=ee.store.defineResource("InlineChart"),ee.adapter.registerSubadapter("InlineChart",new X.a({Resource:ne,prefix:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).where,t=(e=void 0===e?{}:e).project,i=void 0===t?"CampaignUI":t;if(u.a.some([i],u.a.negate(u.a.isString)))throw new Error("Invalid where clause");return"WebApp.".concat(i,".InlineChart")},serialize:function(e){var t=e.id,i=e.project,n=e.inlineChartData;if(u.a.some(i,u.a.negate(u.a.isString)))throw new Error("Invalid attributes");return{Id:t,Name:"WebApp.".concat(i,".InlineChart"),Data:n,Type:"object",Version:1}},deserialize:function(e){var t=e.Name.match(/^WebApp\.(\w+)\.InlineChart/);if(!t)throw new Error("Invalid preference name");var i=t.slice(1),n=e.Data;return{id:e.Id,project:i,inlineChartData:n}}})));var oe=i("k+At"),se=i.n(oe),le=(i("ajaH"),i("oeyB")),ce=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/inline-chart"),de=function(){function e(t){var i=this;Object(n.a)(this,e),this.learnMoreLabel=ce.get("LearnMoreLinkText"),this.isUsingVnextGrid=t.isUsingVnextGrid,this.entityType=t.entityType,this.tab=t.tab,this.currentEntity=w.a.observable(null),this.filter=w.a.observable(null),this.period=w.a.observable(null),this.granularity=w.a.observable(null),this.isMovingAverageChecked=w.a.observable(!1),this.primaryMetricId=w.a.observable(0),this.secondaryMetricId=w.a.observable(0),this.parentLevels=w.a.observable([]),this.project="CampaignUI",this.chartDataProvider=new Y,this.showChart=w.a.observable(!0),this.chartTitle=w.a.observable(),this.isDataAvailable=w.a.observable(!1),this.noDataText=w.a.observable(ce.get("BI_Chart_NoData")),this.isComparisonDataMissing=w.a.observable(!1),this.comparisonDataMissingText=w.a.observable(ce.get("BI_Chart_Missing_ComparisonData")),this.showMovingAverageText=w.a.observable(ce.get("BI_Chart_Show_MovingAverage")),this.newFeatureLabel=w.a.observable(ce.get("New_Feature_Label")),this.isChartLoading=w.a.observable(!0),this.isGranularityShowing=w.a.observable(!0),this.xAxisStartValue=w.a.observable(null),this.xAxisEndValue=w.a.observable(null),this.comparedXAxisStartValue=w.a.observable(null),this.comparedXAxisEndValue=w.a.observable(null),this.hideToolbar=w.a.observable(!1),this.hideToggleIcon=w.a.observable(!1),this.isDataFetchingDone=!1,this.isUsingVnextGrid&&x.a.getPromise("$daterange").then(function(e){i.period(e)}),this.isPopOn=w.a.computed(function(){return!!i.period()&&null!=i.period().compared},this),this.isMovingAverageVisible=w.a.computed(function(){if("Day"!==i.granularity())return!1;var e,t,n;return i.isUsingVnextGrid?(e=i.period().start,t=i.period().end):window.App&&window.App.views&&window.App.views.Summary&&window.App.views.Summary.dateFilter&&window.App.views.Summary.dateFilter.ko_model&&"Day"===i.granularity()&&(e=window.App.views.Summary.dateFilter.ko_model.appliedRange().start,t=window.App.views.Summary.dateFilter.ko_model.appliedRange().end),!(!e||!t)&&(n=Math.round((t-e)/864e5),!(i.isPopOn()||n>31))},this),this.isMovingAverageOn=w.a.computed(function(){return!!i.isMovingAverageVisible()&&i.isMovingAverageChecked()},this),this.granularityOptions=w.a.observable(null),this.granularityId=0,this.primaryMetricOptions=w.a.observable(null),this.secondaryMetricOptions=w.a.observable(null),this.cachedChartData={},this._getChartDataWhenSubscribed(this.granularity),this._getChartDataWhenSubscribed(this.isMovingAverageOn),this.startDate=w.a.computed(function(){return i.period()?i.period().start:null},this),this.endDate=w.a.computed(function(){return i.period()?i.period().end:null},this),this.comparedStartDate=w.a.computed(function(){return i.period()&&i.period().compared?i.period().compared.start:null},this),this.comparedEndDate=w.a.computed(function(){return i.period()&&i.period().compared?i.period().compared.end:null},this),this.primaryData=w.a.observableArray(),this.secondaryData=w.a.observableArray(),this.selectedPrimaryCategory=w.a.observable(),this.selectedSecondaryCategory=w.a.observable(),this.maxDate=new Date(9999,12,31),this.needUpdateChart=!1,this.chartUpdatingPromise=null,window.App&&window.App.on&&window.App.on("log-validation-method",function(e){W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/validateFilter","method called: ".concat(e))}),this.queueAsync=L.a.resolve(),u.a.bindAll(this,"onPrimaryMetricSelected","onSecondaryMetricSelected","onShowChartButtonClick","onMovingAverageClick","onGranularitySelected","reloadChartData","formatDate","calculatePercentageDiff","_getQuarter","_getChartDataWhenSubscribed","_updateChart","_getChartData","_refreshAllCharts","_setCategoryAndData","_metricSelectedHandler","_alignDataForComparison","_getChartTitle","_getChartDataForMetric","_logChartData","_validateFilter","_logCurrentFilterInfo")}return Object(a.a)(e,[{key:"onPrimaryMetricSelected",value:function(e){var t={};this.primaryMetricId(e.id),this._metricSelectedHandler(this.primaryData,this.selectedPrimaryCategory,le.a,e),t["".concat(y.a.CurrentTabId,"-primaryMetric")]=this.selectedPrimaryCategory().id,re&&re(t,this.project)}},{key:"onSecondaryMetricSelected",value:function(e){var t={};this.secondaryMetricId(e.id),this._metricSelectedHandler(this.secondaryData,this.selectedSecondaryCategory,le.b,e),t["".concat(y.a.CurrentTabId,"-secondaryMetric")]=this.selectedSecondaryCategory().id,re&&re(t,this.project)}},{key:"onShowChartButtonClick",value:function(){var e=this,t={};this.showChart(!this.showChart()),t["".concat(y.a.CurrentTabId,"-showChart")]=this.showChart(),re&&re(t,this.project).then(function(){e.showChart()&&e.reloadChartData(e.filter(),e.currentEntity())})}},{key:"onMovingAverageClick",value:function(){var e={};return this.isMovingAverageChecked(!this.isMovingAverageChecked()),e["".concat(y.a.CurrentTabId,"-showMovingAverage")]=this.isMovingAverageChecked(),re&&re(e,this.project),!0}},{key:"onGranularitySelected",value:function(e){if(this.showChart()){var t={};this.granularity(e.enumValue),this.granularityId=e.id,t["".concat(y.a.CurrentTabId,"-granularity")]=e.enumValue,re&&re(t,this.project)}}},{key:"reloadChartData",value:function(e,t,i){var n=this;this.parentLevels(this._getParentLevels());var a,r=e,o=t||this.entityType||this._getDefaultEntityBaseOnParentLevels(this.parentLevels());if(this.forceRefresh=i,o!==z.a.SearchTermEntity&&o!==z.a.AuctionInsightEntity&&o!==z.a.AudiencesAssociationEntity||(o="",r={}),u.a.isString(e))a=e;else{var s=r&&r.odataV4?r.odataV4({ignoreCase:!1}):"";a=encodeURI(s?"$filter=".concat(s):"")}this.isUsingVnextGrid&&!a&&"Accounts"!==o&&"CampaignCriterions"!==o&&"AdGroupCriterions"!==o&&(o=this._getDefaultEntityBaseOnParentLevels(this.parentLevels())),this.currentEntity(o),this.filter(this.isUsingVnextGrid?a:this._validateFilter(r)),ae&&ae().then(function(e){var t=e?e.inlineChartData:{};if(n.showChart(!!u.a.isUndefined(t["".concat(y.a.CurrentTabId,"-showChart")])||t["".concat(y.a.CurrentTabId,"-showChart")]),n.showChart()){var i=function(){var e=!0,i=new M({usingNewDatefilter:n.isUsingVnextGrid}),a=x.a.getPromise("$daterange");L.a.all([i,a]).then(function(i){var a=i[0],r=i[1];if(n.chartTitle(n._getChartTitle()),n.isUsingVnextGrid)n.period(r);else{var o={};window.App&&window.App.views&&window.App.views.Summary&&window.App.views.Summary.dateFilter&&window.App.views.Summary.dateFilter.ko_model&&(o.start=window.App.views.Summary.dateFilter.ko_model.appliedRange().start,o.end=window.App.views.Summary.dateFilter.ko_model.appliedRange().end,o.compared=window.App.views.Summary.dateFilter.ko_model.appliedComparedRange()),n.period(o)}var s=t["".concat(y.a.CurrentTabId,"-showMovingAverage")]||!0;n.isMovingAverageChecked(null!==s&&""!==s&&"true"===s);var l=t["".concat(y.a.CurrentTabId,"-granularity")]||"Day",c=g.a.grep(a.data,function(e){return!e.disabled&&e.enumValue===l})[0],d=0;for(d=0;d<a.data.length&&(!a.data[d]||a.data[d].disabled);d++);d>=a.data.length?(n.isChartLoading(!1),n.isDataAvailable(!1),n.isGranularityShowing(!1),e=!1):(n.granularity(c?c.enumValue:a.data[d].enumValue),n.granularityId=c?c.id:a.data[d].id,n.granularityOptions(a.data),n.isGranularityShowing(!0),e=!0);var p=(new O).fetch(),h=t["".concat(y.a.CurrentTabId,"-primaryMetric")],m=u.a.isUndefined(h)||u.a.isNull(h)||!u.a.find(p.data,{id:h})?z.a.ClickMetricId:h,f=t["".concat(y.a.CurrentTabId,"-secondaryMetric")],v=u.a.isUndefined(f)||u.a.isNull(f)||!u.a.find(p.data,{id:f})?z.a.NoneMetricId:f;u.a.isUndefined(m)||u.a.isNull(m)||n.primaryMetricId(parseInt(m)),u.a.isUndefined(v)||u.a.isNull(v)||n.secondaryMetricId(parseInt(v));var b="Age"===n.tab||"Gender"===n.tab;n.primaryMetricOptions(new O({filterOptionId:b?[2]:[]}).fetch());var S=new O({filterOptionId:b?[2]:[]}).fetch();return S.data.unshift({id:-1,value:ce.get("InlineChart_Metric_None")}),n.secondaryMetricOptions(S),n.isMovingAverageChecked(!!t["".concat(y.a.CurrentTabId,"-showMovingAverage")]),e?n._updateChart():null})};return W.a.asLoggingStart?W.a.asLoggingStart(i,se.a.ACTIVITYNAME.InlineChartV2ReloadChart,se.a.SCENARIONAME.InlineChartV2ReloadChart)():i()}return null})}},{key:"formatDate",value:function(e){if(e)switch(this.granularity()){case"Hour":return v.a.dateFormat("%H:%M %m/%d/%Y",e);case"Day":return v.a.dateFormat("%a %m/%d/%Y",e);case"Week":return"Week of ".concat(v.a.dateFormat("%b %d, %Y",e));case"Month":return v.a.dateFormat("%b %Y",e);case"Quarter":return"Q".concat(this._getQuarter(new Date(e))," ").concat(v.a.dateFormat("%Y",e));default:return""}return""}},{key:"calculatePercentageDiff",value:function(e){if(e&&-1===e.id)return"";var t=this.cachedChartData[e.id],i=0,n=0,a=0,r=0,o=0;if(u.a.each(t.PrimaryData,function(e){e&&(i+=e[1])}),u.a.each(t.ComparisonData,function(e){e&&(n+=e[1])}),t.PrimaryData&&t.ComparisonData){a=i/t.PrimaryData.length,r=n/t.ComparisonData.length;var s=Math.round(100*(a-r)/r);o=u.a.isNaN(s)?"infinity":s}return"infinity"===o||o>=0?" (<b>+".concat(o,"%</b>)"):" (<b>".concat(o,"%</b>)")}},{key:"_getQuarter",value:function(e){if(e)switch(e.getUTCMonth()){case 0:case 1:case 2:return 1;case 3:case 4:case 5:return 2;case 6:case 7:case 8:return 3;case 9:case 10:case 11:return 4;default:return-1}return-1}},{key:"_getChartDataWhenSubscribed",value:function(e){var t=this;e.subscribe(function(){var e=function(){return t._updateChart()};return W.a.asLoggingStart?W.a.asLoggingStart(e,se.a.ACTIVITYNAME.InlineChartV2ReloadChart,se.a.SCENARIONAME.InlineChartV2ReloadChart)():e()})}},{key:"_validateFilter",value:function(e){return e?(u.a.each(e,function(t){if(t.Values&&t.Values.length>0){var i=[];u.a.each(t.Values,function(t){void 0!==t?i.push(t):W.a.logMessage&&W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/validateFilter","undefined filter value detected. filter: ".concat(JSON.stringify(e)))}),t.Values=i}!t.Values||t.Values.length}),e):e}},{key:"_updateChart",value:function(){var e=this;return this.isDataFetchingDone=!1,this.primaryData([]),this.secondaryData([]),this.needUpdateChart=!0,this.chartUpdatingPromise=this.queueAsync.then(function(){if(e.needUpdateChart){e.needUpdateChart=!1;var t={currentEntity:e.currentEntity(),parentLevels:e.parentLevels(),filter:e.filter,period:e.period,granularity:e.granularity,isMovingAverageOn:e.isMovingAverageOn,refreshGridData:e.forceRefresh};W.a.logMessage&&W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/updateChartWithFilterASync",'{ "entity" : "'.concat(t.currentEntity,'", "filter" : "').concat(JSON.stringify(t.filter()),'" }')),e._getChartData(t,"All").then(function(t){if(e.isDataFetchingDone=!0,e.isDataAvailable(t&&t[0]&&t[0].PrimaryData&&0!==t[0].PrimaryData.length),e.isComparisonDataMissing(!(t&&t[0]&&t[0].ComparisonData&&0!==t[0].ComparisonData.length)),e.noDataText(ce.get("BI_Chart_NoData")),e.isDataAvailable()){var i=t[0].PrimaryData[0][0],n=t[0].PrimaryData[t[0].PrimaryData.length-1][0];e.xAxisStartValue(e.formatDate(i)),e.xAxisEndValue(e.formatDate(n)),e.isComparisonDataMissing()?(e.comparedXAxisStartValue(null),e.comparedXAxisEndValue(null)):(e.comparedXAxisStartValue(e.formatDate(e.comparedStartDate())),e.comparedXAxisEndValue(e.formatDate(e.comparedEndDate())))}else e.xAxisStartValue(null),e.xAxisEndValue(null),e.comparedXAxisStartValue(null),e.comparedXAxisEndValue(null);e.isPopOn()&&e._alignDataForComparison(t),e.cachedChartData=t,e._refreshAllCharts(t),e._logChartData()}).then(function(){e.isChartLoading(!1),e.noDataText(ce.get("BI_Chart_NoData")),W.a.endActivity&&W.a.endActivity(se.a.ACTIVITYNAME.InlineChartV2ReloadChart)},function(t){var i=u.a.result(u.a.first(u.a.result(t,"errors")),"Code");throw e.isChartLoading(!1),e.noDataText(ce.get("BI_Chart_Error_".concat(i))||ce.get("BI_Chart_Error")),e.isDataAvailable(!1),e.xAxisStartValue(null),e.xAxisEndValue(null),e.comparedXAxisStartValue(null),e.comparedXAxisEndValue(null),W.a.endActivity&&W.a.endActivity(se.a.ACTIVITYNAME.InlineChartV2ReloadChart,!1),t})}}),this.chartUpdatingPromise}},{key:"_getChartData",value:function(e,t){return this.isChartLoading(!0),this.chartDataProvider.fetchData(e,t)}},{key:"_refreshAllCharts",value:function(e){this._setCategoryAndData(e,this.selectedPrimaryCategory(),le.a,this.primaryData),this._setCategoryAndData(e,this.selectedSecondaryCategory(),le.b,this.secondaryData)}},{key:"_setCategoryAndData",value:function(e,t,i,n){if(t&&-1!==t.id){var a=e[t.id],r={data:a.PrimaryData},o={data:a.ComparisonData},s=[];r&&r.data&&(r.category=t.id,r.name=F(t.id),r.color=i.original,s.push(r)),o&&o.data&&(o.category=t.id,o.name=F(t.id),o.xAxis=1,o.color=i.comparative,s.push(o)),i===le.b&&-1!==t.id&&(r.yAxis=1,o.yAxis=1),n(s)}}},{key:"_metricSelectedHandler",value:function(e,t,i,n){if("-1"===n.id)this.dataObservable([]);else{t(n);var a=this._getChartDataForMetric(n.id,i.original),r={data:a.length>0?a[0].PrimaryData:null},o={data:a.length>0?a[0].ComparisonData:null},s=[];r&&r.data&&(r.category=n.id,r.name=F(n.id),r.color=i.original,s.push(r)),o&&o.data&&(o.name=F(n.id),o.category=n.id,o.xAxis=1,o.color=i.comparative,s.push(o)),i===le.b&&-1!==t().id&&(r.yAxis=1,o.yAxis=1),e(s)}this._logChartData()}},{key:"_alignDataForComparison",value:function(e){var t=this,i=Object.keys(e);u.a.each(i,function(i){var n=e[i];if(n.PrimaryData&&n.ComparisonData&&n.PrimaryData.length!==n.ComparisonData.length)for(var a=n.PrimaryData.length>n.ComparisonData.length?n.ComparisonData:n.PrimaryData,r=n.PrimaryData.length<n.ComparisonData.length?n.ComparisonData:n.PrimaryData,o=Math.abs(n.PrimaryData.length-n.ComparisonData.length),s=0;s<o;s++){var l=r[a.length][0]-r[a.length-1][0],c=a[a.length-1][0]+l;a.push([c,null])}if("Month"===t.granularity()||"Quarter"===t.granularity())for(var d=0;d<n.PrimaryData.length-1;d++){var u=(n.PrimaryData[d+1][0]-n.PrimaryData[d][0])/864e5,p=(n.ComparisonData[d+1][0]-n.ComparisonData[d][0])/864e5;p>u?n.PrimaryData[d+1][0]+=864e5:p<u&&(n.ComparisonData[d+1][0]+=864e5)}})}},{key:"_getChartTitle",value:function(){var e=Q.currentLevel;return"Account"===e?ce.get("BI_Chart_AccountLevel"):"Campaign"===e?ce.get("BI_Chart_CampaignLevel"):ce.get("BI_Chart_AdGroupLevel")}},{key:"_getChartDataForMetric",value:function(e,t){if(this.cachedChartData&&this.cachedChartData[e]){var i=this.cachedChartData[e];return i.category=e,i.color=t,[i]}return[]}},{key:"_getParentLevels",value:function(){var e=y.a.CurrentCampaign,t=y.a.CurrentAdGroup,i=[];return e&&i.push({name:z.a.CampaignEdmEntity,id:e.Id}),t&&i.push({name:z.a.AdGroupEdmEntity,id:t.Id}),i}},{key:"_getDefaultEntityBaseOnParentLevels",value:function(e){var t=z.a.CampaignEntity;return e&&e.constructor===Array&&e.length>0&&(e[e.length-1].name===z.a.AdGroupEdmEntity?t=z.a.AdEntity:e[e.length-1].name===z.a.CampaignEdmEntity&&(t=z.a.AdGroupEntity)),t}},{key:"_logChartData",value:function(){W.a.logMessage&&(this.isUsingVnextGrid?W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/updateChart",'{ "entity": "'.concat(this.currentEntity(),'", "metric1": "').concat(this.primaryData().length>0?this.primaryData()[0].name:"",'", "metric2": "').concat(this.secondaryData().length>0?this.secondaryData()[0].name:"",'", "dateRange": "').concat(x.a.get("$daterange").text,'", "pop": "').concat(x.a.get("$daterange").compared?x.a.get("$daterange").compared.text:"",'", "movingAverage": "').concat(this.isMovingAverageOn(),'" }')):W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/updateChart",'{ "entity": "'.concat(this.currentEntity(),'", "metric1": "').concat(this.primaryData().length>0?this.primaryData()[0].name:"",'", "metric2": "').concat(this.secondaryData().length>0?this.secondaryData()[0].name:"",'", "dateRange": "').concat(window.App.views.Summary.dateFilter.ko_model.appliedRange().key,'", "pop": "').concat(window.App.views.Summary.dateFilter.ko_model.appliedComparedRange()?window.App.views.Summary.dateFilter.ko_model.appliedComparedRange().key:"",'", "movingAverage": "').concat(this.isMovingAverageOn(),'" }')))}},{key:"_logCurrentFilterInfo",value:function(e){W.a.logMessage&&W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/wrongFilterSelected",'{ "customerId": "'.concat(y.a.CurrentCustomer.Id,'", "accountId": "').concat(y.a.CurrentAccount.Id,'", "currentTab": "').concat(y.a.CurrentTabId,'", "filter": "').concat(JSON.stringify(e),'" }'))}}]),e}(),ue=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/inline-chart");function pe(e,t,i,n,a){var r=e<0?"-":"",o="".concat(e),s=Math.abs(e),l=Math.abs(t),c=[{val:1e12,key:"InlineChart_NumericalAbbreviation_Trillion"},{val:1e9,key:"InlineChart_NumericalAbbreviation_Billion"},{val:1e6,key:"InlineChart_NumericalAbbreviation_Million"},{val:1e3,key:"InlineChart_NumericalAbbreviation_Thousand"}];if(l>=1e3){for(var d=0;d<c.length;++d)if(l>=c[d].val){o="".concat(r).concat(i(s/c[d].val,0,n,a)).concat(ue.get(c[d].key));break}}else if(Math.floor(s)===s)o="".concat(r).concat(i(s,0,n,a));else{var u="".concat(s),p=u.indexOf(".");o=p>0&&p===u.length-2?"".concat(r).concat(i(s,1,n,a)):"".concat(r).concat(i(s,2,n,a))}return o}i.d(t,"a",function(){return he});var ge=g.a,he=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,t),e=Object(r.a)(this,Object(o.a)(t).call(this,i)),u.a.bindAll(Object(c.a)(Object(c.a)(e)),"initialize","render","_onGridPageLoading","_onGridPageLoadingNewGrid","_onShowChartChanged","_onGranularityOptionsChanged","_onPrimaryMetricOptionsChanged","_onSecondaryMetricOptionsChanged","_onPrimaryDataChanged","_onSecondaryDataChanged","_onTabChange","_toggleOldNewInlineChart","_showNewChartOnCurrentTab","_showOldChartOnCurrentTab","_toggleToolbar","_insertToolBarIfNeeded","_updateMetricDropdownDiff","_round","_numberWithCommas","_redrawChart"),e.needRedraw=!1,e.queueAsync=L.a.resolve(),e.inlineChartViewModel=new de({isUsingVnextGrid:i.isUsingVnextGrid,entityType:i.entityType,tab:i.tab}),e.inlineChartViewModel.showChart.subscribe(e._onShowChartChanged),e.inlineChartViewModel.granularityOptions.subscribe(e._onGranularityOptionsChanged),e.inlineChartViewModel.primaryMetricOptions.subscribe(e._onPrimaryMetricOptionsChanged),e.inlineChartViewModel.secondaryMetricOptions.subscribe(e._onSecondaryMetricOptionsChanged),e.inlineChartViewModel.primaryData.subscribe(e._onPrimaryDataChanged),e.inlineChartViewModel.secondaryData.subscribe(e._onSecondaryDataChanged),e.onGridPageLoadingHandler=function(t,i){e._onGridPageLoading(t,i)},e.onTabChangeHandler=function(){e._onTabChange()},ge(document).on("grid-page-loading",e.onGridPageLoadingHandler),ge(document).on("onSummaryPageTabChange",e.onTabChangeHandler),e.render(i),e}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;if(this.$el.length){this.$el.html(A()()),w.a.applyBindings(this.inlineChartViewModel,this.$el[0]),this._toggleOldNewInlineChart(),this._insertToolBarIfNeeded(),this.options.isUsingVnextGrid?"campaign"!==this.options.tab&&this._onGridPageLoadingNewGrid(this.options.filter):ge.triggeredGridPageLoading&&this._onGridPageLoading(null,ge.triggeredGridPageLoading);g()(window).on("resize",function(){var t=g()(".campaignContentContainer section.page-title");if(t&&t.length>0){var i=e.$(".chart-container"),n=t.width()+parseFloat(t.css("marginLeft"))+parseFloat(t.css("marginRight"))+parseFloat(t.css("paddingLeft"))+parseFloat(t.css("paddingRight"))+parseFloat(t.css("border-left-width"))+parseFloat(t.css("border-right-width"));i&&i.length>0&&i.width(n);var a=e.$("#highcharts-container");a&&a.length>0&&a.width(n-60)}}),g()(window).triggerHandler("resize")}}},{key:"_onGridPageLoading",value:function(e,t){if(this._showNewChartOnCurrentTab()&&("Paging"!==t.commandType&&"Sorting"!==t.commandType||t.grid.RefreshGridData)){var i,n="";t.filter&&t.filter.length&&(W.a.logMessage&&W.a.logMessage([$.a.LOGCATEGORY.TRACE],$.a.LOGLEVEL.INFO,"inlineChartV2/filterPassedIn",'{ "filter" : "'.concat(t.filter[0].Value,'" }')),i=JSON.parse(t.filter[0].Value),n=t.filter[0].Entity),this.inlineChartViewModel.reloadChartData(i?i.FilterExpressions:{},n||this.options.entityType,t.RefreshGridData)}}},{key:"_onGridPageLoadingNewGrid",value:function(e){var t=this;x.a.getPromise("$daterange").then(function(i){t.inlineChartViewModel.period(i),t.inlineChartViewModel.reloadChartData(e)})}},{key:"_onShowChartChanged",value:function(){this.inlineChartViewModel.showChart()?(this.$(".btn-toolbar > .grid-groupmenu-container").show(),this.$(".btn-toolbar > .grid-custommenu-container").show()):(this.$(".btn-toolbar > .grid-groupmenu-container").hide(),this.$(".btn-toolbar > .grid-custommenu-container").hide())}},{key:"_onGranularityOptionsChanged",value:function(){w.a.cleanNode(this.$("#granularity-dropdown")[0]),this.granularityDropdown=new T.a({el:this.$("#granularity-dropdown").first(),defaultOption:this.inlineChartViewModel.granularityId,dropDownOptions:this.inlineChartViewModel.granularityOptions(),onDropDownChanged:this.inlineChartViewModel.onGranularitySelected})}},{key:"_onPrimaryMetricOptionsChanged",value:function(){w.a.cleanNode(this.$("#main-primary-dropdown")[0]),this.primaryMetricDropdown=new T.a({el:this.$("#main-primary-dropdown").first(),dropDownOptions:this.inlineChartViewModel.primaryMetricOptions().data,defaultOption:this.inlineChartViewModel.primaryMetricId(),onDropDownChanged:this.inlineChartViewModel.onPrimaryMetricSelected,onPopEnabled:this.inlineChartViewModel.calculatePercentageDiff})}},{key:"_onSecondaryMetricOptionsChanged",value:function(){w.a.cleanNode(this.$("#main-secondary-dropdown")[0]),this.secondaryMetricDropdown=new T.a({el:this.$("#main-secondary-dropdown").first(),dropDownOptions:this.inlineChartViewModel.secondaryMetricOptions().data,defaultOption:this.inlineChartViewModel.secondaryMetricId(),onDropDownChanged:this.inlineChartViewModel.onSecondaryMetricSelected,onPopEnabled:this.inlineChartViewModel.calculatePercentageDiff})}},{key:"_onPrimaryDataChanged",value:function(){this._redrawChart()}},{key:"_onSecondaryDataChanged",value:function(){this._redrawChart()}},{key:"_isDataFetchingDone",value:function(){return this.inlineChartViewModel.isDataFetchingDone}},{key:"_redrawChart",value:function(){var e=this;this.needRedraw=!0,this.queueAsync.then(function(){if(e._isDataFetchingDone()&&e.needRedraw){e.needRedraw=!1;var t=parseInt(e.$(".chart-container").attr("chart-iteration")),i=W.a.logActivityDurationMarker("InlineChart.Redraw.Iteration-".concat(t));e.$(".chart-container").attr("chart-iteration",t+1);var n=e;new _.a({el:e.$("#highcharts-container")[0],showWeekend:"Day"===e.granularityDropdown.koModel.selectedItem().enumValue,highchartsOptions:{series:e.inlineChartViewModel.primaryData().concat(e.inlineChartViewModel.secondaryData()),tooltip:{formatter:function(){var e=[],t=[],i="";return u.a.each(this.points,function(i){switch(i.color){case le.a.original:e.push(i);break;case le.a.comparative:t.push(i);break;case le.b.original:e.push(i);break;case le.b.comparative:t.push(i)}}),e.length>0&&(i='<div class="charts-tooltip"><span><b>'.concat(n.inlineChartViewModel.formatDate(this.x),"</b></span>"),u.a.each(e,function(e){i="".concat(i,'<br /><span class="toolTipMetric" style="background-color: ').concat(e.color,';"></span>').concat(e.series.name,": <b>").concat(n._numberWithCommas(n._round(e.y),e.series.name)).concat(n._isPercentNeeded(e)?"%":"","</b>")})),t.length>0&&(i=n.inlineChartViewModel.isMovingAverageOn()?"".concat(i,'</div><div class="charts-tooltip"><span><b>Moving average</b></span>'):"".concat(i,'</div><div class="charts-tooltip"><span><b>').concat(n.inlineChartViewModel.formatDate(t[0].x),"</b></span>"),u.a.each(t,function(e){i="".concat(i,'<br /><span class="toolTipMetric" style="background-color: ').concat(e.color,';"></span>').concat(e.series.name,": <b>").concat(n._numberWithCommas(n._round(e.y),e.series.name)).concat(n._isPercentNeeded(e)?"%":"","</b>")})),i}},yAxis:[{labels:{formatter:function(){var e=this.axis.tickInterval,t=v.a.getOptions().lang.decimalPoint;return n.inlineChartViewModel.selectedPrimaryCategory()&&4===n.inlineChartViewModel.selectedPrimaryCategory().id?"".concat(pe(this.value,e,v.a.numberFormat,t,","),"%"):"".concat(pe(this.value,e,v.a.numberFormat,t,","))}}},{labels:{formatter:function(){var e=this.axis.tickInterval,t=v.a.getOptions().lang.decimalPoint;return n.inlineChartViewModel.selectedSecondaryCategory()&&4===n.inlineChartViewModel.selectedSecondaryCategory().id?"".concat(pe(this.value,e,v.a.numberFormat,t,","),"%"):"".concat(pe(this.value,e,v.a.numberFormat,t,","))}}}]}}).render(),e._updateMetricDropdownDiff(),i.markEnd()}})}},{key:"_onTabChange",value:function(){this._toggleOldNewInlineChart()}},{key:"_isPercentNeeded",value:function(e){return(e.color===le.a.original||e.color===le.a.comparative)&&4===this.inlineChartViewModel.selectedPrimaryCategory().id||(e.color===le.b.original||e.color===le.b.comparative)&&4===this.inlineChartViewModel.selectedSecondaryCategory().id}},{key:"_toggleOldNewInlineChart",value:function(){this._showNewChartOnCurrentTab()?(g()("#bi-chartToggleContainer").hide(),g()("#chart-container").hide(),this.$el.find(".chartToggle").show(),g()(".globalToolBarPanel").show(),this.inlineChartViewModel.showChart()&&this.$(".chart-container").show()):this._showOldChartOnCurrentTab()?(g()("#bi-chartToggleContainer").show(),g()("#chart-container").show(),g()(".globalToolBarPanel").hide(),this.$(".chart-container").hide()):(this.$el.find(".chartToggle").hide(),g()("#bi-chartToggleContainer").hide(),g()("#chart-container").hide(),g()(".globalToolBarPanel").hide(),this.$(".chart-container").hide()),this._toggleToolbar(),g()("#bi-status-text").hide()}},{key:"_toggleToolbar",value:function(){this._showNewChartOnCurrentTab()?(this.options.hideChartToolbar?this.inlineChartViewModel.hideToolbar(!0):this.inlineChartViewModel.hideToolbar(!1),this.inlineChartViewModel.hideToggleIcon(!1)):(this.inlineChartViewModel.hideToolbar(!0),this.inlineChartViewModel.hideToggleIcon(!0))}},{key:"_showNewChartOnCurrentTab",value:function(){var e=[z.a.CampaignTabId,z.a.AdGroupTabId,z.a.ProductsGroupId,z.a.FlattenProductsGroupId,z.a.AdsTabId,z.a.KeywordsTabId,z.a.LocationsTabId,z.a.AdScheduleTabId,z.a.DevicesTabId,z.a.AudienceTabId,z.a.DemographicsTabId,z.a.SearchTermGridId];return[z.a.AccountEdmEntity].indexOf(this.options.entityType)>-1||e.indexOf(y.a.CurrentTabId)>-1}},{key:"_showOldChartOnCurrentTab",value:function(){return[z.a.ChangeHistoryTabId].indexOf(y.a.CurrentTabId)>-1}},{key:"_insertToolBarIfNeeded",value:function(){var e=g()(".navbar-tertiary > .btn-toolbar > .globalToolBar"),t=g()(".navbar-tertiary > .globalToolBarPanel");e&&e.length>0&&e.appendTo(this.$(".btn-toolbar")),t&&t.length>0&&t.insertAfter(this.$(".btn-toolbar"))}},{key:"_updateMetricDropdownDiff",value:function(){this.primaryMetricDropdown&&(this.primaryMetricDropdown.koModel.showDiff(this.inlineChartViewModel.primaryData().length&&(this.inlineChartViewModel.isPopOn()||this.inlineChartViewModel.isMovingAverageOn())),this.primaryMetricDropdown.koModel.triggerShowDifference()),this.secondaryMetricDropdown&&(this.secondaryMetricDropdown.koModel.showDiff(this.inlineChartViewModel.secondaryData().length&&(this.inlineChartViewModel.isPopOn()||this.inlineChartViewModel.isMovingAverageOn())),this.secondaryMetricDropdown.koModel.triggerShowDifference())}},{key:"_round",value:function(e){return Math.round(100*e)/100}},{key:"_numberWithCommas",value:function(e,t){var i=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(["AverageCPC","CPA","Spent","Revenue","CTR"].indexOf(t)>-1||"0"!==i){var n=i.indexOf(".");return i.length-n===2&&-1!==n?"".concat(i,"0"):i}return i}},{key:"remove",value:function(){Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this),ge(document).off("grid-page-loading",this.onGridPageLoadingHandler),ge(document).off("onSummaryPageTabChange",this.onTabChangeHandler)}}]),t}(m.a.View)},f35g:function(e,t,i){"use strict";i.r(t);var n=i("P9GN"),a=i("UT4o"),r=i.n(a);function o(e){var t=r.a.map(e.data.CampaignTrafficEstimate.AdGroupTrafficEstimateParameters,function(e){return{Keywords:e.KeywordTrafficEstimateParameters,Bid:e.MaxCPC}}),i=r.a.map(e.data.CampaignTrafficEstimate.AdGroupTrafficEstimateParameters,function(e){return{Keywords:e.KeywordTrafficEstimateParameters}}),n=e.data.CampaignTrafficEstimate.Targetings;return{adGroups:t,locationIds:r.a.chain(n).map(function(e){return e.LocationId}).compact().value(),languages:r.a.chain(n).map(function(e){return e.Language}).compact().value(),adGroupsWithoutBid:i}}function s(e,t){var i=o(e);return{data:{Request:{Campaigns:[{AdGroups:i.adGroups,CurrentBudget:t.budget,InitialBudget:t.initBudget,Languages:i.languages,LocationIds:i.locationIds}]}},path:e.path}}function l(e){var t=o(e);return{data:{Request:{AdGroups:t.adGroupsWithoutBid,Languages:t.languages,LocationIds:t.locationIds}},path:e.path}}i.d(t,"getBidSuggestion",function(){return p}),i.d(t,"getBudgetSuggestion",function(){return g});var c="/Customers(:advertisercustomer_id)/Accounts(:account_id)/Default.GetEstimatedBidByAdGroups",d="/Customers(:advertisercustomer_id)/Accounts(:account_id)/Default.GetEstimatedBudgetByCampaigns";function u(e,t,i,a,r){var o=r?c:d,u=r?l:s;return Object(n.a)(e,t,i,o,u,a)}function p(e,t,i,n){return u(e,t,i,n,!0)}function g(e,t,i,n){return u(e,t,i,n,!1)}},f3PW:function(e,t,i){Object.assign(e.exports,i("wOIE"))},fOWA:function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("+8I1")],void 0===(a=function(e,t,i){"use strict";var n={schema:{model:{id:"_uniqueId"},total:"total"},dataItems:null,dataCallback:null,itemIdField:"id",itemIdCallback:null,itemFilterField:"name",itemFilterCallback:null,listItemSeed:{},pageSize:20},a=function(i){var a=this;a.options=e.extend(!0,{},n,i),a.schemaDataProperty=a.options.schema.data||"items",a.options.schema.data=function(e){return a._mapItems(e[a.schemaDataProperty])},a.externalTransport=t.isFunction(a.options.dataCallback),a.useCallbackForFilter=a.externalTransport&&!a.options.useCallbackForFetchOnly,a.dataSource=a._createDataSource()};return a.prototype.addIfNotExists=function(e){var t=this._getItemId(e);return!!t&&(!this.dataSource.get(t)&&(this.dataSource.add(this._createListItem(e)),!0))},a.prototype.removeIfExists=function(e){var t=this._getListItemInfo(e);return!!t.model&&(this.dataSource.remove(t.model),!0)},a.prototype.getItemData=function(e){return this._getListItemInfo(e).data},a.prototype.getItemId=function(e){return this._getListItemInfo(e).uniqueId},a.prototype.filter=function(e){e?this.useCallbackForFilter?(t.isFunction(this.sourceLoadCancelToken)&&this.sourceLoadCancelToken(),this.dataSource.filter({value:e})):t.isFunction(this.options.itemFilterCallback)?this.dataSource.filter({field:"data",operator:this.options.itemFilterCallback,value:e}):this.dataSource.filter({field:"data."+this.options.itemFilterField,operator:"contains",value:e}):this.dataSource.filter([])},a.prototype.refresh=function(){delete this._data,this.dataSource.read()},a.prototype.refreshItem=function(e){var t=this._getListItemInfo(e),i=this._createListItem(e);t.model&&t.model.set("data",i.data)},a.prototype.getData=function(){return t.map(this.dataSource.data(),function(e){return e.get("data").toJSON()})},a.prototype.getFilterData=function(){var e=this.dataSource,n=i.data.Query.process(e.data(),{filter:e.filter()});return t.map(n.data,function(e){return e.get("data").toJSON()})},a.prototype.setItemProperty=function(e,t,i){var n=this._getListItemInfo(e).model;n&&n.set(t,i)},a.prototype._getListItemInfo=function(e,t){var i,n=this._getItemId(e);return n&&"object"===typeof e?{uniqueId:n,data:e,model:i=this.dataSource.get(n)}:{uniqueId:e,data:(i=this.dataSource.get(e))?i.get("data").toJSON():null,model:i}},a.prototype._getItemId=function(e){return t.isFunction(this.options.itemIdCallback)?this.options.itemIdCallback(e):e?e[this.options.itemIdField]:null},a.prototype._mapItems=function(e){var i=this;return t.map(e,function(e){return i._createListItem(e)})},a.prototype._createListItem=function(e){var i=this._getItemId(e),n=t.isFunction(this.options.listItemSeed)?this.options.listItemSeed(e,i):this.options.listItemSeed;return t.extend({},n,{data:e,_uniqueId:i})},a.prototype._createDataSource=function(){var e={};return e[this.schemaDataProperty]=this.options.dataItems,new i.data.DataSource({data:e,schema:this.options.schema,serverFiltering:this.useCallbackForFilter,serverPaging:this.useCallbackForFilter,pageSize:this.options.pageSize,transport:this.externalTransport?{read:t.bind(this.useCallbackForFilter?this._loadRemoteData:this._loadDataWithMemoryCache,this)}:void 0})},a.prototype._loadDataWithMemoryCache=function(e){var t=e.success,i=this;i._data?t(i._data):(e.success=function(e){i._data=e,t(e)},i._loadRemoteData(e))},a.prototype._loadRemoteData=function(e){var t=this,i={filterText:e.data.filter&&e.data.filter.filters[0]?e.data.filter.filters[0].value:"",skip:e.data.skip,take:e.data.take};t.sourceLoadCancelToken=t._getCancellationToken(i,e.error),t.options.dataCallback(i,function(n,a){t.sourceLoadCancelToken=null,n?e.error(n):i.cancelled||e.success(a)})},a.prototype._getCancellationToken=function(e,i){return t.bind(function(e,t){t(new Error("Cancel")),e.cancelled=!0},self,e,i)},a}.apply(t,n))||(e.exports=a)},fYVA:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",(a||"Learn more")+" "+(t||""),!0,!0)+"></a>"},i=i+'<div class="adgroup-creation-step1-container"><div class="form-horizontal"><div class="form-group"><div class="col-sm-2 control-label"><label class="adgroup-name-label" id="adgroupNameLabel">'+n.escape(null==(t=e.getString("Audience_Campaign_AdGroup_Label_Name"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudTargets_AdGroupName",e.getString("Audience_Campaign_AdGroup_Label_Name"),e.getString("LearnMoreLinkText")),i=i+'</div><div class="col-sm-4"><div class="name-input-control-container"></div><div class="remaining-chars-hint-container"></div><div class="copy-adgroup-setting-container"></div></div></div><div class="bidding-strategy-container"></div><div class="form-group"><div class="col-sm-2 control-label"><label class="default-bid-label" id="defaultBidLabel">'+n.escape(null==(t=e.getString("Audience_Campaign_Settings_SetBid"))?"":t)+'</label></div><div class="col-sm-4"><div class="default-bid-container"></div></div></div>',r&&(i+='<div class="cashback-settings-container"></div>'),i=i+'<div class="audience-advanced-settings-section"><a class="audience-advanced-settings-header col-sm-12" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isAdvancedAdgroupExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="bedded-icon-marker spritedimagealign expanderImage"></span>'+n.escape(null==(t=e.getString("Audience_Campaign_AdGroup_AdvancedSettings"))?"":t)+'</a><div class="collapse" id="advancedSettings"><div class="audience-advanced-settings-container"></div></div></div></div><div class="errors-container"></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"supportCashbackSettings"in r?r.supportCashbackSettings:"undefined"!==typeof supportCashbackSettings?supportCashbackSettings:void 0),i}},flEU:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o){a.koError=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'};var s=o.v4();i=i+'<div class="form-inline location-target-bid-grid-cell"><select class="form-control bidBoost-options" data-bind="options: bidAdjustmentOptions, optionsText: &quot;text&quot;, optionsValue: &quot;value&quot;, value: selectedBidAdjustmentOption, disable: isReadOnly"'+n.attr("aria-label",e.getString("BidAdjustment_Options"),!0,!0)+'></select><input class="form-control display-inline bidBoost-percentValue" type="text" data-bind="value: bidAdjustmentValue, valueUpdate: &quot;input&quot;, disable: isReadOnly"'+n.attr("aria-label",e.getString("BidAdjustment_BidMultiplier"),!0,!0)+'><span class="bidBoost-percent">'+n.escape(null==(t=r)?"":t)+"</span></div>",a.koError("bidError",s)}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"percentSymbol"in r?r.percentSymbol:"undefined"!==typeof percentSymbol?percentSymbol:void 0,"uuid"in r?r.uuid:"undefined"!==typeof uuid?uuid:void 0),i}},flv5:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){var a=e.id,r=e.property;i=i+'<div class="checkbox"><label'+n.attr("id",a+"-Checkbox-Label",!0,!0)+'><input type="checkbox" role="checkbox"'+n.attr("id",a,!0,!0)+n.attr("aria-labelledby",a+"-Label "+a+"-Checkbox-Label",!0,!0)+n.attr("aria-describedby",a+"-Validation",!0,!0)+n.attr("data-bind","checked: "+r+".checkbox, attr: { 'aria-checked': "+r+".checkbox }",!0,!0)+">"+n.escape(null==(t=e.message)?"":t)+"</label></div>"}.call(this,"field"in a?a.field:"undefined"!==typeof field?field:void 0),i}},fpfd:function(e,t,i){var n,a;n=[i("UT4o")],void 0===(a=function(e){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=87)}({4:function(t,i){t.exports=e},87:function(e,t,i){e.exports=i(88)},88:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clientSideSortPlugin",{enumerable:!0,get:function(){return n.clientSideSortPlugin}});var n=i(89)},89:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientSideSortPlugin=void 0;var n,a=(n=i(4))&&n.__esModule?n:{default:n};t.clientSideSortPlugin=function(e){return e("clientSideSort",["config","gridView"],function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,t=(e=void 0===e?{}:e).clientSideSort,i=(t=void 0===t?{}:t).compareMaker,n=void 0===i?null:i,r=t.setTopToMax,o=void 0!==r&&r,s=arguments.length>1?arguments[1]:void 0,l=s.dataSource,c=l.query;l.query=function(e){var t=o?a.default.defaults({skip:0,take:2e4},a.default.omit(e,"orderby")):a.default.omit(e,"orderby","skip","take");return c.call(l,t).then(function(t){var i=a.default.first(e.orderby)||{},r=i.key,o=i.direction,s=null;if(a.default.isFunction(r))s=r;else if(a.default.isString(r)){var l=r.split(/[./]/);s=function(e){return a.default.reduce(l,function(e,t){return a.default.result(e,t)},e)}}var c=a.default.isFunction(n)?n(s,o,r):null;if(s){var d=a.default.isFunction(c)?a.default.clone(t.items).sort(c):a.default.sortBy(t.items,function(e){return s(e,o)});return{items:o<0?d.reverse():d,totalCount:t.totalCount}}return t})}})}}})}.apply(t,n))||(e.exports=a)},g0eY:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l,c,d){i+='<div class="form-horizontal"><div class="bulkedit association-editor associations__container"><div class="panel-body" data-bind="visible: showEditor">',e&&function(){var e=r.subtitle;if("number"==typeof e.length)for(var n=0,o=e.length;n<o;n++){var s=e[n];i=i+"<h5>"+(null==(t=a.get(s,d))?"":t)+"</h5>"}else for(var n in o=0,e)o++,s=e[n],i=i+"<h5>"+(null==(t=a.get(s,d))?"":t)+"</h5>"}.call(this),l&&(i+='<ul class="alert alert-danger" id="editorErrors" data-bind="visible: errors().length &gt; 0, foreach: errors" role="alert"><li data-bind="html: $data"></li></ul>'),i=i+'<div class="associations"><div class="form-group img-dblList-Container extension-editor-dblist-container"><div class="doubleListBox"'+n.attr("data-bind","doubleListBox: selectedExtensions,            dlbData: { sourceItems: options.allExtensions, itemIdField: options.idField, pageSize: options.pageSize, itemFilterField: options.filterField, useCallbackForFetchOnly:false },            dlbItemActions: options.itemActions, dlbProcessItem: options.processItem,            dlbFeatures: {selectAll: false, deselectAll: false, paging: true, dragAndDrop: false, maxSelectedItemsCount: "+s+"},            dlbTemplates: {sourceItemTemplateType: options.itemTemplateType, sourceItemContentTemplate: options.itemTemplate, selectedItemTemplateType: options.itemTemplateType, selectedItemContentTemplate: options.itemTemplate },            dlbStrings: {sourceItems: '"+a.get(r.library_title)+"',                selectedItems: '"+a.get(r.selected_title)+"',                filterWatermark: '"+a.get(r.filter_watermark)+"',                filterAriaLabel: '"+a.get(r.search_for).replace("{0}",a.get(r.library_title).toLowerCase())+"',                maxSelectedItems: '"+o+"', maximumSelectionAlertString: maximumSelectionAlertString }",!0,!0)+'></div></div><div class="form-group multi-image-ad-extension-need-more-warning" data-bind="visible: shouldShowMultiAssetWarning"><div class="alert alert-info"><div class="alert-image"></div><div class="alert-info-inline"><span>'+n.escape(null==(t=a.get("ImageAdExtensionV2_Minimum_Number_Not_Met_MultiAsset_Message"))?"":t)+'</span></div></div></div><div class="form-group create-link-Container"><span>+&nbsp;</span><a class="btn-create" href="javascript:void(0);">'+n.escape(null==(t=a.get(r.create_link))?"":t)+"</a></div></div></div>",c&&(i=i+'<div class="panel-body"><div class="form-group associations save-bar col-sm-12"><input class="btn-save btn btn-primary" type="button"'+n.attr("value",a.get(r.save_btn),!0,!0)+' data-bind="attr: {disabled: !showEditor()}" aria-describedby="editorErrors"><span>&nbsp; &nbsp;</span><input class="btn-cancel btn btn-default" type="button"'+n.attr("value",a.get(r.cancel_btn),!0,!0)+"></div></div>"),i+='<div class="panel-body errors-container" data-bind="visible: failedAssociationsLabel().length&gt;0"><div><span class="status_error toolbar-icon toolbar-icon-left"></span><span data-bind="text: failedAssociationsLabel"></span></div><div><span class="statusOk-icon status_success toolbar-icon toolbar-icon-left"></span><span data-bind="text: successfulAssociationsLabel"></span></div><div class="error-grid-container"></div></div></div></div>'}.call(this,"hasSubTitle"in a?a.hasSubTitle:"undefined"!==typeof hasSubTitle?hasSubTitle:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"i18nKeys"in a?a.i18nKeys:"undefined"!==typeof i18nKeys?i18nKeys:void 0,"maxSelectedItems"in a?a.maxSelectedItems:"undefined"!==typeof maxSelectedItems?maxSelectedItems:void 0,"maxSelectedItemsCount"in a?a.maxSelectedItemsCount:"undefined"!==typeof maxSelectedItemsCount?maxSelectedItemsCount:void 0,"showErrorsInline"in a?a.showErrorsInline:"undefined"!==typeof showErrorsInline?showErrorsInline:void 0,"showSaveBar"in a?a.showSaveBar:"undefined"!==typeof showSaveBar?showSaveBar:void 0,"subtitleArgs"in a?a.subtitleArgs:"undefined"!==typeof subtitleArgs?subtitleArgs:void 0),i}},gBp3:function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("7XbR"),i("ViT6"),i("krpb"),i("SzE/")],void 0===(a=function(e,t,i,n,a,r){"use strict";var o=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared");return t.View.extend({initialize:function(t){this.options=e.extend({},t),this.ko_model=new r(this.options.model),"function"===typeof this.options.onDayTimeRangesChange&&this.ko_model.dayTimeRanges.subscribe(this.options.onDayTimeRangesChange)},render:function(){var t=this;new Date;t.$el.html(a({i18n:o,labelClass:t.options.labelClass||"col-sm-4",controlClass:t.options.controlClass||"col-sm-8",hideStartAndEndDate:t.options.hideStartAndEndDate})),i.applyBindings(t.ko_model,t.el);t.$("input.date-end").data("kendoDatePicker");return t.ko_model.startDate.subscribe(function(t){!function(t){var i=e.isDate(t)?t:e.isEmpty(t)?null:new Date(t);i&&isNaN(i.getTime())&&(i=null)}(t)}),t.$("#scheduling").on("show.bs.collapse",function(){t.$(".expanderImage").toggleClass("expanderImage expandedImage")}),t.$("#scheduling").on("hide.bs.collapse",function(){t.$(".expandedImage").toggleClass("expanderImage expandedImage")}),"function"===typeof t.options.onDayTimeRangesChange&&t.options.onDayTimeRangesChange(t.ko_model.dayTimeRanges()),t},events:{"click .add-time-row":"addDayTimeRange","show.bs.collapse":"show","hide.bs.collapse":"hide"},addDayTimeRange:function(){return this.ko_model.addDayTimeRange()},toObject:function(){return this.ko_model.toObject()},validate:function(){return this.ko_model.validate()},show:function(){this.ko_model.isExpanded(!0)},hide:function(){this.ko_model.isExpanded(!1)},modelChanged:function(){return this.ko_model.modelChanged()}})}.apply(t,n))||(e.exports=a)},gMM7:function(e,t,i){var n,a;n=[i("5iHu"),i("syDw"),i("r3sL")],void 0===(a=function(e,t,i){return i.extend({defaults:e.extend({},i.prototype.defaults,{Entity:"AdGroupCriterion",BatchAction:{Actions:[{"@odata.type":"#Model.NumericAction",Property:"CashbackAdjustment",ActionType:"SetToAmount",Value:""}]}})})}.apply(t,n))||(e.exports=a)},gS9j:function(e,t,i){"use strict";var n=i("v9Xm"),a=i("ERkP"),r=i.n(a),o=r.a.createContext("");function s(e){var t=e.serverContext,i=e.children,n={user:t.CurrentUser,customer:t.CurrentCustomer,account:t.CurrentAccount,lcid:t.CultureLcid};return r.a.createElement(o.Provider,{value:n},i)}var l=function(e){return function(t){return r.a.createElement(o.Consumer,null,function(i){return r.a.createElement(e,Object.assign({identityDetails:i},t))})}},c=i("bgLp"),d=i("Yh9w"),u=i("nN5v"),p=i("ePzV"),g=i("23d6"),h=i("Pb1Y"),m=i("Vwpy"),f=(i("BWsg"),i("UT4o")),v=i.n(f),b=i("/xyZ"),y=i.n(b),S=i("4jZH"),w=i("ZItL"),C=i("Fa1V"),x=i("ITOZ"),k=i("f9Pu"),A=i("UP37"),T=i("eiR/"),_=i("5I0q");function E(e,t,i){var n=v.a.map(t,function(t){var n=t.Id,a=_.odataUri.convert({definition:e,options:i,id:n});return{type:i.action,url:a,data:t}});return A.odata.batch({reqs:n,path:i.path}).then(function(e){return v.a.isFunction(i.processResponse)&&i.processResponse(e),e})}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ajaxOptions,i=void 0===t?{}:t,n=e.urlParameters,a=e.host,r=e.path,o=e.headers,s=e.successCallback,l=e.state,c=e.oDataToken,d=v.a.defaults({},i);return v.a.isObject(n)&&(d.urlParameters=n),a&&(d.host=a),r&&(d.path=r),c&&(d.oDataToken=c),o&&(d.headers=o),v.a.isFunction(s)&&(d.success=s),l&&(d.params=v.a.clone(l.attributes)),d}var O,P=function(e){function t(){return Object(u.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"convertQuery",value:function(e){var t=e.filterOptions,i=void 0===t?{}:t,n=e.where,a=void 0===n?{}:n,r=_.odataQuery.convert(e),o=a["*"];(o=void 0===o?{}:o).contains;if(!v.a.isString(a)||v.a.isEmpty(a)){var s=v.a.omit(a,"*");if(!v.a.isEmpty(s)){var l=new k.FilterEntity(s,i).odataV4();v.a.isEmpty(l)||(r.$filter=l)}}return r}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e),this.options=t}return Object(p.a)(e,[{key:"convertQuery",value:function(e){return _.odataQuery.convert(e)}},{key:"create",value:function(e,t,i){v.a.extendOwn(i,this.options);var n=_.odataCast.data({data:t,definition:e,options:i}),a="";return t.queryParams&&(a=this.convertQuery(t.queryParams),n=v.a.omit(n,"queryParams")),A.odata.post(_.odataUri.convert({definition:e,options:i}),v.a.defaults({data:n,urlParameters:a},I(i)))}},{key:"find",value:function(e,t,i){v.a.extendOwn(i,this.options);var n={},a=i.queryParameters;return v.a.isObject(a)&&(n={data:v.a.omit(this.convertQuery(a),"$top","$count")}),n.path=i.path,A.odata.get(_.odataUri.convert({definition:e,options:i,id:t,isFinding:!0}),v.a.defaults(n,I(i)))}},{key:"findAll",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v.a.extendOwn(i,this.options);var n,a=i.filterOptions,r=Object(x.get)(t,"query.entitySet"),o=i.edmRootResourceIdentifier&&r?i.edmRootResourceIdentifier.identifyEntitySet(r):Object(x.get)(i,"entitySet");return o&&i.edm&&Object(x.get)(o,"navigation.source.type")instanceof i.edm.types.ActionType?(n=A.odata.post(T.queryify(_.odataUri.convert({definition:e,options:i,isFinding:!0,entitySet:o}),this.convertQuery(v.a.extend({filterOptions:a},t)),i.ajaxOptions.customParameterizationFunc),v.a.defaults({data:o.navigation.parameters},I(i))),i.cacheResponse=!1):n=A.odata.get(_.odataUri.convert({definition:e,options:i,isFinding:!0,entitySet:o}),v.a.defaults({data:this.convertQuery(v.a.extend({filterOptions:a},t))},I(i))),n.then(function(t){var n=v.a.uniqueId("query-");v.a.isString(v.a.first(t.value))&&(t.value=v.a.map(t.value,function(e){return{id:v.a.uniqueId("item-"),value:e}})),v.a.each(t.value,function(t,i){v.a.has(t,e.idAttribute)&&""!==t[e.idAttribute]||(t[e.idAttribute]="".concat(n,"-").concat(i))});var a=v.a.compose(function(e){return Object.defineProperty(e,"totalCount",{value:t["@odata.count"],enumerable:!1})},function(e){return Object.defineProperty(e,"raw",{value:t,enumerable:!1})});return i.cacheResponse?i.afterInject=v.a.compose(i.afterInject||v.a.identity,function(e,t){return a(t)}):(t.value=v.a.has(t,"value")?t.value:t,a(t.value)),t.value},function(e){return{responseText:e.responseText,status:e.status,statusText:e.statusText,errors:e.errors,raw:e.body}})}},{key:"update",value:function(e,t,i,n){v.a.extendOwn(n,this.options);var a=_.odataCast.data({data:i,definition:e,options:n});return A.odata.patch(_.odataUri.convert({definition:e,options:n,id:t}),v.a.defaults({data:a},I(n)))}},{key:"updateAll",value:function(e,t,i,n){return v.a.extendOwn(n,this.options),E(e,i.reqs,n)}},{key:"destroy",value:function(e,t,i){return v.a.extendOwn(i,this.options),A.odata.delete(_.odataUri.convert({definition:e,options:i,id:t}),I(i)).then(v.a.property("value"))}},{key:"destroyAll",value:function(e,t,i){return v.a.extendOwn(i,this.options),E(e,t.reqs,i)}}]),e}());function M(e){var t=e.host,i=e.path,n=e.oDataToken,a=e.loginType,r=e.sessionId,o=e.error;O={host:t,path:i,oDataToken:n,loginType:a,sessionId:r,error:o}}var j,L,D,R=function(){function e(t){var i=t.entityName,n=t.idAttribute,a=t.odataURL,r=t.getODataURLWithKey;if(Object(u.a)(this,e),!O)throw new Error("JsDataLight is not initialized");this.odataAdapter=new P,this.odataURL=a,this.getODataURLWithKey=r||function(e){return function(t){var i=t.key;return"".concat(e,"(").concat(i,")")}}(a),this.entity={class:i,name:i,endpoint:i,idAttribute:n},this.idAttribute=n,this.options=v.a.defaults({ajaxOptions:O},{edm:{types:{ActionType:function e(){Object(u.a)(this,e)}}}})}return Object(p.a)(e,[{key:"getOptions",value:function(e){var t=this,i={odataURL:this.odataURL,navigation:{source:{type:{}}},$withKey:function(e){return{odataURL:t.getODataURLWithKey({key:e})}}};return v.a.defaults({},e,{entitySet:i},this.options)}},{key:"create",value:function(e,t){return this.odataAdapter.create(this.entity,e,this.getOptions(t))}},{key:"update",value:function(e,t,i){return this.odataAdapter.update(this.entity,e,t,this.getOptions(i))}},{key:"find",value:function(e,t){return this.odataAdapter.find(this.entity,e,this.getOptions(t))}},{key:"findAll",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.afterFindAll,a=Object(d.a)(i,["afterFindAll"]);return this.odataAdapter.findAll(this.entity,e,this.getOptions(a)).then(function(e){return v.a.isFunction(n)?n(t.entity,e):e}).then(function(e){if(v.a.isArray(e))return e;throw e})}}]),e}(),N={PRIVATE:"PRIVATE",SHARED:"SHARED"};var V=N.PRIVATE,B=function(e){function t(e){var i=e.odataURL,n=Object(d.a)(e,["odataURL"]);Object(u.a)(this,t);var a=n.mode||V,r=function(e){var t,i=e.cid,n=e.aid,a=e.pcid,r=e.mode;if(!v.a.contains(v.a.values(N),r))throw new RangeError("Error mode ".concat(r)," is not supported");switch(r){case N.PRIVATE:t=a;break;case N.SHARED:default:t=i}var o="/Customers(".concat(t,")");return n&&(o+="/Accounts(".concat(n,")")),o}({cid:j,aid:D,pcid:L,mode:a});return Object(g.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n,{odataURL:"".concat(r).concat(i)})))}return Object(m.a)(t,e),Object(p.a)(t,null,[{key:"init",value:function(e){j=e.cid,D=e.aid,L=e.pcid}},{key:"updateMode",value:function(e){V=e}}]),t}(R),F={getRecent:function(e){var t={limit:e.limit,query:{$filter:"TaskItem/Type eq Enum.TaskItemType'ReportUI'"}};return new B({entityName:"TaskItemExecution",odataURL:"/TaskItemExecutions"}).findAll(t)},run:function(e){var t={ReportIds:e.taskItemIds};return new B({entityName:"TaskItemExecution",odataURL:"/TaskItems/RerunReports"}).create(t)},download:function(e){var t=e.executionId;return new B({entityName:"TaskItemExecution",odataURL:"/TaskItemExecutions(".concat(t,")/Default.PollReportDataTaskItemExecution")}).find()},delete:function(e){var t={ReportIds:e.taskItemIds};return new B({entityName:"TaskItemExecution",odataURL:"/TaskItems/DeleteReports"}).create(t)},gridDataSource:function(){return{type:"jsdata",entity:new B({entityName:"TaskItemExecution",odataURL:"/TaskItemExecutions"}),primaryKey:"Id",query:{$filter:"TaskItem/Type eq Enum.TaskItemType'ReportUI'"}}}},U=i("aWzz"),G=i.n(U),z=i("zCf4"),H=i("JBtm"),W={location:{search:window.location.search}},q="/Reporting",$={init:function(e){W=e.history,q=e.routePrefix},resolve:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.type,n=t.carryForward,a=Object(H.parse)(W.location.search);return v.a.isString(i)?a.type=i:n||(a=v.a.omit(a,"type")),"".concat(q).concat(e,"?").concat(Object(H.stringify)(a))},goto:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=$.resolve(e,t);W.push(i)},replaceTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=$.resolve(e,t);W.replace(i)}},K=Object(z.withRouter)(function(e){return $.init(e),!1});K.propTypes={routePrefix:G.a.string.isRequired};var J={getUrl:function(e){return $.resolve("/updatetemplate/".concat(e))},getId:function(e){return e.Id}},Z={getUrl:function(e,t){return t?$.resolve("/v2/pollreport/".concat(e)):$.resolve("/history/".concat(e))},getId:function(e){return e.Id}};var Y,Q=i("6e2+"),X=i("bwfd"),ee=i("Kkdv"),te={AccountPerformanceReport:"Account","AccountPerformanceReport-SixWeeks":"Account - 6 weeks","AccountPerformanceReport-TwoMonths":"Account - 2 months (MoM)","AccountPerformanceReport-TwoYears":"Account - 2 years (YoY)","AccountPerformanceReport-ShareOfVoice":"Account - Share of voice",AdDynamicTextPerformanceReport:"Ad dynamic text",AdExtensionByAdReport:"Ad extension by ad",AdExtensionByKeywordReport:"Ad extension by keyword",AdExtensionDetailReport:"Ad extension details",AdGroupPerformanceReport:"Ad group",AdPerformanceReport:"Ad",AgeGenderAudienceReport:"Age and gender",AgeGenderDemographicReport:"Age and gender",AudiencePerformanceReport:"Audiences",BudgetSummaryReport:"Budget",BillingStatementReport:"Billing statement",CallDetailReport:"Call forwarding detail",CampaignPerformanceReport:"Campaign",ConversionPerformanceReport:"Conversions",CustomerInvoiceReport:"Manager account invoice billing",DestinationURLPerformanceReport:"Destination URL",DestinationUrlPerformanceReport:"Destination URL",DSAAutoTargetPerformanceReport:"Dynamic search ad auto target",DSACategoryPerformanceReport:"Dynamic search ad category",DSASearchQueryPerformanceReport:"Dynamic search ad search term",FraudChangeHistoryReport:"Fraud change history by user",GeographicPerformanceReport:"Geographic",GoalsAndFunnelsReport:"Goals",KeywordPerformanceReport:"Keyword",NegativeKeywordConflictReport:"Negative keyword conflicts",ProductDimensionPerformanceReport:"Product dimension",ProductMatchCountReport:"Product match count",ProductNegativeKeywordConflictReport:"Product negative keyword conflicts",ProductPartitionPerformanceReport:"Product partition",ProductPartitionUnitPerformanceReport:"Product partition unit",ProductSearchQueryPerformanceReport:"Product search term",ProfessionalDemographicsAudienceReport:"Professional demographics",PublisherUsagePerformanceReport:"Website URL (publisher)",SearchCampaignChangeHistoryReport:"Change history",SearchQueryPerformanceReport:"Search term",ShareOfVoiceReport:"Share of voice",UserRoleChangeHistoryReport:"User role change history",UserLocationPerformanceReport:"User location"},ie={Csv:".csv",Csvzip:".zip (.csv)",Tsv:".tsv",TsvZip:".zip (.tsv)",Xlsx:".xlsx"},ne=v.a.pick(ie,"Csvzip","TsvZip","Xlsx"),ae=v.a.pick(ie,"Csv","Tsv","Xlsx","Csvzip"),re={generalUnavalible:function(e){return e.getString("This report type has been deprecated and is no longer available to run")},runUnavalible:function(e,t){return e.getString("{{repotType}} reports have been deprecated and are no longer available to run.",t)},AgeGenderDemographicReport:function(e){return"".concat(e.getString("The age and gender report has been deprecated and replaced with an updated version. Please create a new age and gender report and try running it again."),' <a class="HelpTopic" href="javascript:void(0)" query="app54700">').concat(e.getString("Learn more"),"</a>")}},oe=function(e,t,i){return v.a.has(re,e)?re[e](t):i?re.runUnavalible(t,t.getString(v.a.result(te,e,e))):re.generalUnavalible(t)},se={InvalidId:"The report does not exist or does not belong to current user, manager account or account.",InvalidEmail:"Invalid email address",TaskSchedulingInvalid:"Invalid schedule time",TaskThrottlingLimitReached:"You have reached the maximum allowed number of running reports. Please wait for the reports to finish and try again later."},le=function(e){return v.a.result(se,e,"Something went wrong, and we couldn't finish this task. Please refresh and try this operation again or contact support.")},ce={DateRangePreset:{Custom:"Custom",Today:"Today",Yesterday:"Yesterday",LastSevenDays:"Last 7 days",LastFourteenDays:"Last 14 days",LastThirtyDays:"Last 30 days",ThisWeekFromSun:"This week (Sun-Today)",ThisWeekFromMon:"This week (Mon-Today)",LastWeekStartingSun:"Last week (Sun-Sat)",LastWeekStartingMon:"Last week (Mon-Sun)",LastFourWeeksStartingSun:"Last 4 weeks (Sun-Sat)",LastFourWeeksStartingMon:"Last 4 weeks (Mon-Sun)",LastSixWeeksStartingSun:"Last 6 weeks (Sun-Sat)",LastSixWeeksStartingMon:"Last 6 weeks (Mon-Sun)",ThisMonth:"This month",LastMonth:"Last month",LastTwoMonths:"Last 2 months",LastThreeMonths:"Last 3 months",LastSixMonths:"Last 6 months",ThisYear:"This year",LastYear:"Last year",LastTwoYears:"Last 2 years",AllTime:"All time"},ReportAggregation:{Hourly:"Hour",HourOfDay:"Hour of day",Daily:"Day",DayOfWeek:"Day of week",Weekly:"Week",WeeklyStartingMonday:"Week Mon-Sun",Monthly:"Month",Yearly:"Year",Summary:"Summary"},ReportType:te,ColumnName:{AbsoluteTopImpressionRatePercent:"Absolute top impression rate",AbsoluteTopImpressionShareLostToBudgetPercent:"Absolute top impression share lost to budget",AbsoluteTopImpressionShareLostToRankPercent:"Absolute top impression share lost to rank",AbsoluteTopImpressionSharePercent:"Absolute top impression share",AccountId:"Account ID",AccountName:"Account",AccountNumber:"Account number",AccountStatus:"Account status",AdDescription:"Ad description",AdDescription2:"Ad description 2",AdDistribution:"Ad distribution",AdExtensionId:"Ad extension ID",AdExtensionPropertyValue:"Ad extension property value",AdExtensionType:"Ad extension type name",AdExtensionTypeId:"Ad extension type ID",AdExtensionVersion:"Ad extension version",AdGroupCriterionId:"Product group ID",AdGroupId:"Ad group ID",AdGroupLabels:"Ad group labels",AdGroupName:"Ad group",AdGroupStatus:"Ad group status",AdGroupType:"Ad group type",AdId:"Ad ID",AdLabels:"Ad labels",AdRelevance:"Ad relevance",AdStatus:"Ad status",AdScenarioType:"Vertical ad type",AdTitle:"Ad title",AdType:"Ad type",AgeGroup:"Age group",AgencyName:"Agency",AllConversionRate:"All Conversion rate",AllConversions:"All Conversions",AllConversionsQualified:"All conversions qualified",AllCostPerConversion:"All CPA",AllReturnOnAdSpend:"All Return on ad spend",AllRevenue:"All Revenue",AllRevenuePerConversion:"All Revenue per conversion",AreaCode:"Area code",AssistedClicks:"Assisted clicks",AssistedConversions:"Assisted conversions",AssistedConversionsQualified:"Assisted conversions qualified",AssistedImpressions:"Assisted impressions",Assists:"Assists",AssociationId:"Association ID",AssociationLevel:"Association level",AssociationStatus:"Association status",AttributeChanged:"Attribute changed",AudienceId:"Audience ID",AudienceImpressionSharePercent:"Audience network impression share",AudienceImpressionLostToRankPercent:"Audience network impression share lost to rank",AudienceImpressionLostToBudgetPercent:"Audience network impression share lost to budget",AudienceName:"Audience name",AudienceType:"Category",AverageCPC:"Avg. CPC",AverageCPM:"Avg. CPM",AverageCpp:"Avg. CPP",AveragePosition:"Avg. position",BaseCampaignId:"Base campaign ID",BenchmarkBid:"Benchmark bid",BenchmarkCtr:"Benchmark CTR",BidAdjustment:"Bid adjustment",BidMatchType:"Bid match type",BidStrategyType:"Bid strategy type",BilledAmount:"Billed amount",BilledAmountUSD:"Billed amount - USD",BillingType:"Billing type",BillToCountry:"Bill-to country/region",BillToCustomerName:"Bill-to customer",BillToCustomerNumber:"Bill-to customer number",Brand:"Brand",BudgetAssociationStatus:"Budget association status",BudgetName:"Budget name",BudgetStatus:"Budget status",BusinessName:"Business name",CPA:"CPA",CTR:"CTR",CallStatus:"Call status",CallTypeName:"Call type",CampaignId:"Campaign ID",CampaignLabels:"Campaign labels",CampaignName:"Campaign",CampaignStatus:"Campaign status",CampaignType:"Campaign type",Category0:"Top level category",Category1:"First level category",Category2:"Second level category",CategoryList:"Category list",ChangedBy:"Changed by",ChangeMadeBy:"Changed by",ChangeMadeTo:"Change made to",ChangeTotalCount:"Change history total counts",City:"City (physical location)",ClickCalls:"Click calls",ClickSharePercent:"Click share",ClickType:"Click type",ClickTypeId:"Click type ID",Clicks:"Clicks",CompanyName:"Company name",Condition:"Condition",ConflictLevel:"Conflict level",ConflictType:"Conflict type",ConversionRate:"Conversion rate",Conversions:"Conversions",ConversionsQualified:"Conversions qualified",CostPerAssist:"Cost per assist",CostPerConversion:"CPA",Country:"Country/region (physical location)",CountryOfSale:"Country/Region of sale",County:"County (physical location)",CurrencyCode:"Currency",CurrentMaxCpc:"Current maximum CPC",CustomLabel0:"Custom label 0",CustomLabel1:"Custom label 1",CustomLabel2:"Custom label 2",CustomLabel3:"Custom label 3",CustomLabel4:"Custom label 4",CustomParameters:"Custom parameters",CustomerId:"Manager account",CustomerName:"Manager account name",DailySpend:"Daily spend",Date:"Date",DateTime:"Date",DayOfWeek:"Day of week",DeliveredMatchType:"Delivered match type",DestinationUrl:"Destination URL",DeviceOS:"Device OS",DeviceType:"Device type",DisplayUrl:"Display URL",DocumentNumber:"Document number",DocumentType:"Document type",Duration:"Duration (sec)",DynamicAdTarget:"Dynamic ad target",DynamicAdTargetId:"Dynamic ad target ID",DynamicAdTargetStatus:"Dynamic ad target status",EndTime:"End time",EntityId:"Entity ID",EntityName:"Entity name",EstimatedClickPercent:"Estimated click rate",EstimatedClicks:"Estimated clicks",EstimatedConversionRate:"Estimated conversion rate",EstimatedConversions:"Estimated conversions",EstimatedCtr:"Estimated CTR",EstimatedImpressionPercent:"Estimated impression rate",EstimatedImpressions:"Estimated impressions",ExactMatchImpressionSharePercent:"Exact match impression share",ExcludeZeroClicks:"Exclude zero clicks",ExpectedCtr:"Expected click-through rate",ExtendedCost:"Extended cost",FeedUrl:"Feed URL",FinalAppUrl:"App URL",FinalMobileUrl:"Mobile URL",FinalUrl:"Final URL",FinalUrlSuffix:"Final URL suffix",FirstPageBid:"Est. first page bid",FullViewConversions:"View-through conversions",ViewThroughConversions:"View-through conversions",ViewThroughConversionsQualified:"View-through conversions qualified",ViewThroughRevenue:"View-through conversions revenue",ViewThroughCostPerConversion:"View-through conversions CPA",ViewThroughReturnOnAdSpend:"View-through conversions return on ad spend",ViewThroughConversionRate:"View-through conversions rate",Gender:"Gender",Goal:"Goal",GoalCategory:"Goal category",GoalType:"Goal type",GoalId:"Goal Id",GregorianDate:"Date",GTIN:"GTIN",Headline:"Headline",Description:"Description",HistoricalAdRelevance:"Historic ad relevance",HistoricalExpectedCtr:"Historic expected click-through rate",HistoricalLandingPageExperience:"Historic landing page experience",HistoricalQualityScore:"Historic quality score",HourOfDay:"Hour of day",Hourly:"Hourly",HowChanged:"How changed",ImpressionLostToAdRelevancePercent:"Impression share lost to ad relevance",ImpressionLostToBidPercent:"Impression share lost to bid",ImpressionLostToBudgetPercent:"Impression share lost to budget",ImpressionLostToRankAggPercent:"Impression share lost to rank",ImpressionLostToRankPercent:"Impression share lost to rank",ImpressionLostToRelevancePercent:"Impression share lost to relevance (%)",ImpressionSharePercent:"Impression share",Impressions:"Impressions",IndustryName:"Industry name",ItemChanged:"Entity type",JobFunctionName:"Job function name",Keyword:"Keyword",KeywordId:"Keyword ID",KeywordLabels:"Keyword labels",KeywordStatus:"Keyword status",LandingPageExperience:"Landing page experience",LandingPageTitle:"Landing page title",Language:"Language",LocalStoreCode:"Local store code",LocationId:"Location ID (physical location)",LocationType:"Location type",LongHeadline:"Long headline",LowQualityClicks:"Low-quality clicks",LowQualityClicksPercent:"Low-quality click rate",LowQualityConversionRate:"Low-quality click conversion rate",LowQualityConversions:"Low-quality click conversions",LowQualityConversionsQualified:"Low-quality click conversions qualified",LowQualityGeneralClicks:"Low-quality clicks (general)",LowQualityImpressions:"Low-quality impressions",LowQualityImpressionsPercent:"Low-quality impression rate",LowQualitySophisticatedClicks:"Low-quality clicks (sophisticated)",Mainline1Bid:"Est. best position bid",MainlineBid:"Est. mainline bid",ManualCalls:"Manual calls",MatchedProductsAtAdGroup:"Matched products at adgroup",MatchedProductsAtCampaign:"Matched products at campaign",MatchedProductsAtProductGroup:"Matched Products at Productgroup",MerchantProductId:"Merchant product ID",MetroArea:"Metro area (physical location)",Month:"Month",MonthToDateSpend:"Month-to-date spend",MonthlyBudget:"Monthly budget",MostSpecificLocation:"Most specific location",MPN:"MPN",NegativeKeyword:"Negative keyword",NegativeKeywordId:"Negative keyword ID",NegativeKeywordList:"Negative keyword list",NegativeKeywordListId:"Negative keyword list ID",NegativeKeywordMatchType:"Negative keyword match type",Neighborhood:"Neighborhood (physical location)",NetAmountDue:"Net due",NetRevenue:"Net revenue",NetRevenueUSD:"Net revenue (USD)",Network:"Network",NewValue:"New value",OfferLanguage:"Product offer language",OldValue:"Old value",Param1:"Param 1",Param2:"Param 2",Param3:"Param 3",PartitionType:"Product partition type",Path1:"Path 1",Path2:"Path 2",PhoneCalls:"Phone calls",PhoneImpressions:"Phone impr.",PostalCode:"Postal code (physical location)",Price:"Price",PricingMethod:"Pricing method",ProductBought:"Product bought",ProductBoughtTitle:"Product bought title",ProductCategory1:"Category(1st level)",ProductCategory2:"Category(2nd level)",ProductCategory3:"Category(3rd level)",ProductCategory4:"Category(4th level)",ProductCategory5:"Category(5th level)",ProductGroup:"Product group",ProductName:"Product name",ProductType1:"Product type(1st level)",ProductType2:"Product type(2nd level)",ProductType3:"Product type(3rd level)",ProductType4:"Product type(4th level)",ProductType5:"Product type(5th level)",ProximityTargetLocation:"Proximity target locations",Ptr:"PTR",PublisherUrl:"Website URL",QualityImpact:"Quality impact",QualityScore:"Quality score",QuantityBought:"Quantity bought",QueryIntentCity:"City (searching for)",QueryIntentCountry:"Country/region (searching for)",QueryIntentCounty:"County (searching for)",QueryIntentDMA:"Metro area (searching for)",QueryIntentLocationId:"Location ID (searching for)",QueryIntentNeighborhood:"Neighborhood (searching for)",QueryIntentPostalCode:"Postal code (searching for)",QueryIntentState:"State/province (searching for)",Radius:"Radius (miles)",RelativeCTR:"Relative CTR",ReturnOnAdSpend:"Return on ad spend",Revenue:"Revenue",RevenuePerAssist:"Revenue per assist",RevenuePerConversion:"Revenue per conversion",SalesHouse:"Sales House",SearchQuery:"Search term",SellerName:"Seller name",SoldToCustomerName:"Sold-to name",SoldToCustomerNumber:"Sold-to customer number",SoldToCountry:"Sold-to country/region",Spend:"Spend",StartTime:"Start time",State:"State/province (physical location)",Status:"Ad group status",StoreId:"Store id",TargetingSetting:"Targeting setting",TimePeriod:"Unit of time","TimePeriod-Daily":"Day","TimePeriod-DayOfWeek":"Day of week","TimePeriod-HourOfDay":"Hour of day","TimePeriod-Hourly":"Hourly","TimePeriod-Monthly":"Month","TimePeriod-Weekly":"Weekly","TimePeriod-WeeklyStartingMonday":"Weekly (Mon - Sun)","TimePeriod-Yearly":"Year",Title:"Title",TitlePart1:"Title Part 1",TitlePart2:"Title Part 2",TitlePart3:"Title Part 3",Tool:"Tool",TopImpressionRatePercent:"Top impression rate",TopImpressionShareLostToBudgetPercent:"Top impression share lost to budget",ImpressionLostToExpectedCtrPercent:"Impression share lost to expected CTR",TopImpressionShareLostToRankPercent:"Top impression share lost to rank",TopImpressionSharePercent:"Top impression share",TopVsOther:"Top vs. other",TotalClicks:"Ad extension total clicks",TotalClicksOnAdElements:"Total clicks on ad elements",TrackingTemplate:"Tracking template",UserId:"User id",WebsiteCoverage:"Website coverage",Week:"Week (Sun-Mon)",WeekStartingMonday:"Week (Mon - Sun)",Year:"Year",DimensionColumns:"Attributes",MetricColumns:"Performance Statistics",VideoViews:"Video views",ViewThroughRate:"View through rate",AverageCPV:"Avg. CPV",TotalWatchTimeInMS:"Total watch time in msec",AverageWatchTimePerImpression:"Avg. watch time per impression",AverageWatchTimePerVideoView:"Avg. watch time per video view",VideoViewsAt25Percent:"Video views at 25 percent",VideoViewsAt50Percent:"Video views at 50 percent",VideoViewsAt75Percent:"Video views at 75 percent",CompletedVideoViews:"Completed video views",VideoCompletionRate:"Video completion rate"},FilterTitle:{AccountStatus:"Account status",AdDistribution:"Ad distribution",AdGroupStatus:"Ad group status",AdRelevance:"Ad relevance",AdStatus:"Ad status",AdType:"Ad type",BidMatchType:"Bid match types",BidStrategyType:"Bid strategy type",CampaignStatus:"Campaign status",Clicks:"Clicks",CountryCode:"Countries/regions",DeliveredMatchType:"Delivered match types",DeviceOS:"Device OS",DeviceType:"Device type",DynamicAdTargetStatus:"Auto target status",ExpectedCtr:"Expected click-through rate",FeedUrl:"Feed URL",GoalIds:"Goal ID",HowChanged:"How changed",ItemChanged:"Entity type",Keywords:"Keywords",KeywordStatus:"Keyword status",LandingPageExperience:"Landing page experience",LanguageCode:"Language",QualityScore:"Quality score",SearchQueries:"Search term",Status:"Ad group status"},FilterEnum:{AdRelevance:{1:"Below Average - 1",2:"Average - 2",3:"Above Average - 3"},ExpectedCtr:{1:"Below Average - 1",2:"Average - 2",3:"Above Average - 3"},LandingPageExperience:{1:"Below Average - 1",2:"Average - 2",3:"Above Average - 3"}},FileFormat:ie,FileFormatForReporting:ne,FileFormatForInlineDownload:ae};function de(e,t,i){var n=t[i];return n?e.getString(n):i}var ue=[],pe=[],ge=v.a.once(function(e){e.addScenario({scenario:[{name:"LogUnmappedEnum",value:"Log unmapped enum values",activity:[{name:"LogUnmappedEnum",value:"Log unmapped enum values"}]}]});var t=e.LogUnmappedEnum.create().LogUnmappedEnum.create();Y=t});function he(e){return!v.a.contains(pe,e)&&(Y.error("Missing localization map for filter: ".concat(e)),pe.push(e),!0)}function me(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"yMdhms";if(v.a.isString(t)){var a=new Date(t);return e.dateFormatter({skeleton:n,timeZone:Object(X.toIANATimeZone)(i)||"UTC"})(a).replace(",","")}return t}function fe(e,t,i){return me(e,t,i,"yMd")}function ve(e){if(v.a.isString(e)){var t=/(\d{4})-(\d{2})-(\d{2})/.exec(e);if(t){var i=Object(Q.a)(t,4),n=(i[0],i[1]),a=i[2],r=i[3];return new ee.CivilDate(n,a,r)}}return null}var be,ye={getCustomerId:function(e){var t=/cid=(\d+)/gi.exec(e);return t?parseInt(t[1],10):0},getUserId:function(e){var t=/uid=(\d+)/gi.exec(e);return t?parseInt(t[1],10):0},customReports:J,historyReports:Z,isReportRunning:function(e){var t=e.Status;return"PendingExecution"===t||"InProgress"===t},shouldRefresh:function(e){var t=!e,i=!!e&&e.isFulfilled();return t||i},getMergeFilter:function(e){var t=e.accountScope,i=e.userId,n=t?"Type eq Enum.TaskItemType'ReportUIAccountTemplate' or Type eq Enum.TaskItemType'ReportUITemplate'or Type eq Enum.TaskItemType'ReportAccountEmail'":"Type eq Enum.TaskItemType'ReportUICustomerTemplate' or Type eq Enum.TaskItemType'ReportUITemplate' or Type eq Enum.TaskItemType'Email'";return v.a.isNumber(i)&&(n="(".concat(n,") and CreatedBy/Id eq ").concat(i)),n},getUTCOffsetWithDST:function(e,t,i){if(v.a.isString(t)){var n=new Date(t);return e.dateFormatter({raw:"ZZZZ",timeZone:Object(X.toIANATimeZone)(i)||"UTC"})(n)}return""},reformatDate:me,reformatMediumDate:function(e,t,i){return me(e,t,i,"yMdhm")},reformatShortDate:fe,formatDateRange:function(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!t)return" ";var r=t.DateRangePreset,o=t.StartDate,s=t.EndDate,l=[];if(r){var c,d=ce.DateRangePreset[r];if(d?c=e.getString(d):(c=r,function(e){var t=e.columnName,i=e.value,n="".concat(t,"-").concat(i);!v.a.contains(ue,n)&&(Y.error("Missing enum localization map for column: ".concat(t,", value: ").concat(i)),ue.push(n))}({columnName:"DateRangePreset",value:r})),l.push(c),n){var u=fe(e,o,"UTC"),p=fe(e,s,"UTC");l.push("(".concat(u," - ").concat(p,")"))}}else{var g=e.formatCivilDate(ve(o),{skeleton:"yMd"}),h=e.formatCivilDate(ve(s),{skeleton:"yMd"});if(l.push("".concat(g," - ").concat(h)),a){var m=i?Object(X.getUTCOffsetWithoutDST)(i):"";l.push("(GMT".concat(m,")"))}}return l.join(" ")},convertDateTimeStringToCivilDate:ve,dummyDate:new ee.CivilDate(2020,1,1)},Se={getRecent:function(e){var t={limit:e.limit,query:{$filter:"Type eq Enum.TaskItemType'ReportUITemplate'"}};return new B({entityName:"TaskItems",odataURL:"/TaskItems"}).findAll(t)},run:function(e){var t=e.templateIds,i=e.options,n={ReportIds:t};return new B(Object(c.a)({entityName:"TaskItems",odataURL:"/TaskItems/RerunReports"},i)).create(n)},delete:function(e){var t=e.templateIds,i=e.options,n={ReportIds:t};return new B(Object(c.a)({entityName:"TaskItems",odataURL:"/TaskItems/DeleteReports"},i)).create(n)},gridDataSource:function(){return{type:"jsdata",entity:new B({entityName:"TaskItems",odataURL:"/TaskItems"}),primaryKey:"Id",query:{$filter:"Type eq Enum.TaskItemType'ReportUITemplate'"}}},gridMergeDataSource:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"jsdata",entity:new B({entityName:"TaskItems",odataURL:"/TaskItems"}),primaryKey:"Id",query:{$filter:ye.getMergeFilter({accountScope:e,userId:t})}}}},we=i("8luU"),Ce={getByTaskItemId:function(e){var t=e.taskItemId,i=e.mode;return new B({entityName:"TaskItem",odataURL:"/TaskItems(".concat(t,")"),mode:i}).find()},getByExecutionId:function(e){var t=e.executionId,i=e.expandTaskItem,n=new B({entityName:"TaskItemExecution",odataURL:"/TaskItemExecutions"});return i?n.find(t,{queryParameters:{expand:["TaskItem"]}}):n.find(t)},pollReport:function(e){var t=e.executionId;return new B({entityName:"TaskItemExecution",odataURL:"/TaskItemExecutions(".concat(t,")/Default.PollReportDataTaskItemExecution")}).find()},gridDataSource:function(e){var t=e.executionId,i=e.lcid,n=new B({entityName:"ReportData",idAttribute:"RowId",odataURL:"/TaskItemExecutions(".concat(t,")/Default.ReportData()")}),a={$filter:"TaskItem/Type eq Enum.TaskItemType'ReportUI'"};return i&&(a.lcid=i),{type:"jsdata",entity:n,query:a}},getCustomerHierarchy:function(e){var t=e.cid,i=e.uid,n=e.ccBaseUrl;return new we.ClientCenterCustomerService({ccBaseUrl:n}).getCustomerHierarchy({cid:t,uid:i,returnOnlyDirectlyLinkedEntities:!1}).then(function(e){return e.customerHierarchyEntities[0]})}},xe={create:function(e){var t,i=e.payload;return t=window.location.pathname.includes("vnext")?"ReportUITemplate"===v.a.result(i.ReportData,"Type")?N.PRIVATE:N.SHARED:N.PRIVATE,new B({entityName:"TaskItems",odataURL:"/TaskItems/SubmitReportDataTaskItem?$expand=TaskItemExecutions",mode:t}).create(i)},update:function(e){var t=e.taskItemId,i=e.payload;return new B({entityName:"TaskItems",odataURL:"/TaskItems",mode:"ReportUITemplate"===i.Type?N.PRIVATE:null}).update(t,i,{urlParameters:{runNow:"false"}})},updateAndRun:function(e){var t=e.taskItemId,i=e.payload;return new B({entityName:"TaskItems",odataURL:"/TaskItems"}).update(t,i,{urlParameters:{runNow:"true",$expand:"TaskItemExecutions"}})}},ke=i("a28/"),Ae=i("5O4e"),Te={submitEvent:(be=Object(ke.a)({},Ae.keyCode.Enter,null),function(e){return function(t){if(t.keyCode in be){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];e.apply(void 0,n)}}})},_e={QUERY_LIMIT:20,POLL_INTERVAL:5990};function Ee(e){var t=e.label,i=e.query;return r.a.createElement("a",{className:"HelpTopic",href:"#",onClick:function(e){return e.preventDefault()},query:i},t)}function Ie(e){if(v.a.isString(e))return"".concat(e);if(v.a.isObject(e)){var t=e.stack?e.stack:"";return"".concat(e.message,"\n ").concat(t).trim()}try{return"".concat(e.toString())}catch(i){return"Error could not be serialized"}}var Oe=i("ONI+"),Pe=i("WfQX"),Me=i("N8IT"),je=r.a.createContext("");function Le(e){return r.a.createElement(je.Provider,{value:e.permissions},e.children)}var De=function(e){return function(t){return r.a.createElement(je.Consumer,null,function(i){return r.a.createElement(e,Object.assign({permissions:i},t))})}},Re=function(e){function t(){return Object(u.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"showError",value:function(e){this.show({message:e,level:"Error",hasIcon:!0,dismissible:!0})}}]),t}(Oe.AlertCenter);var Ne=v.a.once(function(){var e=new Re;return e.render(),e}),Ve=v.a.once(function(e,t){return function(e,t){Object(Pe.show)({customCssClass:"alert__try-ui-next",message:"<a href=".concat(e," target=_blank>").concat(t,"</a>"),level:"Info"})}(e,t)}),Be=function(e){function t(){return Object(u.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.uiNextLink,i=e.i18n;if(e.permissions.IsNewUIPhaseTwoEnabled){var n=i.getString("Try the new Microsoft Advertising");Ve(t,n)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"report-alert-center"},r.a.createElement(Me.BackboneInstanceWrapper,{instance:Ne()}),r.a.createElement("div",{className:"floating-banner-container"}))}}]),t}(r.a.PureComponent),Fe=De(Object(S.withI18nConsumer)(Be));function Ue(){return Ne()}var Ge=function(e){Ue().showError(e)},ze=function(e){v.a.isFunction(e)&&(Ge=e)},He=function(e){Ge(e)};function We(e){var t=e.description,i=e.title;return r.a.createElement("div",{style:{marginLeft:"10px"}},r.a.createElement("h1",null,i),t.map(function(e,t){return r.a.createElement("div",{className:"error",key:t,style:{marginBottom:"10px"}}," ",v.a.isFunction(e)?e():e," ",r.a.createElement("br",null))}))}var qe=ye.isReportRunning,$e=r.a.createContext(""),Ke=r.a.createContext(""),Je=function(e){function t(e){var i;return Object(u.a)(this,t),(i=Object(g.a)(this,Object(h.a)(t).call(this,e))).getDetailsByTaskItemId=function(e,t){return Ce.getByTaskItemId({taskItemId:e,mode:t}).catch(i.catchException)},i.getDetailsByExecutionId=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ce.getByExecutionId({executionId:e,expandTaskItem:t}).then(function(e){return i.resolveDownload(e),e}).catch(i.catchException)},i.catchException=function(e){var t=x.get(e,"body.value[0].Code"),n=le(t),a=i.props.i18n.getString(n);throw He(a),e},i.detailsGridDataSource=function(e){return Ce.gridDataSource({executionId:e,lcid:i.lcid})},i.customReportGridDataSource=function(){var e=i.props.permissions,t=e.IsReportsMergeEnabled,n=e.IsInternalUser;return t?Se.gridMergeDataSource(!!i.aid,n&&i.uid):Se.gridDataSource()},i.historyGridDataSource=function(){return F.gridDataSource()},i.checkAndUpdateHistory=function(e){var t=!0;if(v.a.isArray(e)){if(v.a.forEach(e,function(e){i.resolveDownload(e),t=!qe(e)&&t}),!v.a.isEqual(e,i.state.historyData))try{i.setState({historyData:e})}catch(n){i.logger.error("encounted an error refreshing historyData: ".concat(Ie(n)))}return t}return!1},i.resolveDownload=function(e){!qe(e)&&v.a.has(i.reportsToDownload,e.Id)&&"Completed"===e.Status&&(i.rdsDownloadReport(e.Id),i.reportsToDownload=v.a.omit(i.reportsToDownload,e.Id))},i.queueDownload=function(e){i.reportsToDownload[e]=!0},i.pollReport=function(e){return Ce.pollReport({executionId:e}).then(function(e){return i.resolveDownload(e),e}).catch(i.catchException)},i.createReport=function(e){return xe.create({payload:e}).catch(i.catchException)},i.updateReport=function(e,t){return xe.update({taskItemId:t,payload:e}).catch(i.catchException)},i.updateReportAndRun=function(e,t){return xe.updateAndRun({taskItemId:t,payload:e}).catch(i.catchException)},i.rdsRunReport=function(e){return F.run({taskItemIds:e}).catch(i.catchException)},i.rdsRunReportTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Se.run({templateIds:e,options:t}).catch(i.catchException)},i.rdsDeleteReport=function(e){return F.delete({taskItemIds:e}).catch(i.catchException)},i.rdsDeleteReportTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Se.delete({templateIds:e,options:t}).catch(i.catchException)},i.rdsDownloadReport=function(e){return F.download({executionId:e}).then(function(e){var t=e.ResultId;return t&&Object(C.iframeDownload)(t),e}).catch(i.catchException)},i.inlineEditReport=function(e,t){var n="ReportUITemplate"===e.Type?N.PRIVATE:N.SHARED;return i.getDetailsByTaskItemId(e.Id,n).then(function(n){return i.updateReport(t(n),e.Id)}).catch(i.catchException)},i.unsubscribeMe=function(e){var t=i.props.identityDetails.user.Email;return v.a.contains(e.EmailRecipients,t)?i.inlineEditReport(e,function(e){var i=e.EmailRecipients,n=Object(d.a)(e,["EmailRecipients"]);return Object(c.a)({EmailRecipients:v.a.difference(i,[t])},n)}):(He(i.props.i18n.getString('You didn\'t subscribe to report "{{report}}"',{report:e.Name})),y.a.reject())},i.baseContext={pollReport:i.pollReport,rdsRunReport:i.rdsRunReport,rdsRunSingleReport:i.rdsRunSingleReport,rdsDeleteReport:i.rdsDeleteReport,rdsDeleteReportTemplate:i.rdsDeleteReportTemplate,rdsRunReportTemplate:i.rdsRunReportTemplate,createReport:i.createReport,rdsDownloadReport:i.rdsDownloadReport,getDetailsByTaskItemId:i.getDetailsByTaskItemId,getDetailsByExecutionId:i.getDetailsByExecutionId,detailsGridDataSource:i.detailsGridDataSource,getAllAccountIds:i.getAllAccountIds,customReportGridDataSource:i.customReportGridDataSource,historyGridDataSource:i.historyGridDataSource,queueDownload:i.queueDownload,updateReport:i.updateReport,updateReportAndRun:i.updateReportAndRun,inlineEditReport:i.inlineEditReport,unsubscribeMe:i.unsubscribeMe},i.logger=t.setupInstrumentation(e.instrumentation).general.create(),i.state={historyExpansion:0,historyData:e.prefetchedData.History.value,customData:e.prefetchedData.CustomReports.value},i.uid=e.identityDetails.user.Id,i.lcid=e.identityDetails.user.Locale,i.aid=v.a.result(e.identityDetails.account,"Id"),i.reportsToDownload={},i.historyExpansionInstance=0,B.init({pcid:e.identityDetails.user.ParentCustomerId,cid:e.identityDetails.customer.Id,aid:e.permissions.IsReportingUIPhaseNext?i.aid:void 0}),i}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=v.a.defaults(Object(c.a)({},this.baseContext),{historyData:this.state.historyData,historyExpansion:this.state.historyExpansion,customData:this.state.customData});return r.a.createElement($e.Provider,{value:this.baseContext},r.a.createElement(Ke.Provider,{value:e},this.props.children))}}]),t}(a.Component);Je.instrumentationSchema={scenario:[{name:"ReportRepository",value:"reporting/ReportRepository",activity:[{name:"general",value:"fetching"}]}]},Je.setupInstrumentation=function(e){return e.addScenario(Je.instrumentationSchema),e.ReportRepository.create()},Je.defaultProps={prefetchedData:{History:{value:[]},CustomReports:{value:[]}}};var Ze=[S.withI18nConsumer,l,w.withInstrumentation,De],Ye=v.a.compose.apply(v.a,Ze)(Je),Qe=function(e){return function(t){return r.a.createElement($e.Consumer,null,function(i){return r.a.createElement(e,Object.assign({repository:i},t))})}},Xe=function(e){return function(t){return r.a.createElement(Ke.Consumer,null,function(i){return r.a.createElement(e,Object.assign({repository:i},t))})}},et=function(){function e(t,i,n,a,r){if(Object(u.a)(this,e),this.log=n,this.reportsTree=t,this.permissions=i,this.cid=a,this.uid=r,this.validCatergoryIds={},this.validCreateReportIds={},v.a.isObject(i)||(this.log.Error("PathDataFactory:constructor - Permissions is null"),this.permissions={}),!v.a.isNumber(a))throw new TypeError("PathDataFactory:constructor - CID is NAN");if(a<0)throw new RangeError("PathDataFactory:constructor - CID is less than 0");if(!v.a.isNumber(r))throw new TypeError("PathDataFactory:constructor - UID is NAN");if(r<0)throw new RangeError("PathDataFactory:constructor - UID is less than 0");this.filterReports(),this.populateCategoryIds(),this.populateCreateReportIds()}return Object(p.a)(e,[{key:"isAllowed",value:function(e){var t=this.permissions;return!(e.isAllowed&&!e.isAllowed(t))}},{key:"fetchData",value:function(){return{reportsTree:this.reportsTree,validCategoryIds:this.validCatergoryIds,validCreateReportIds:this.validCreateReportIds}}},{key:"filterReports",value:function(){var e=this,t=this.reportsTree.children;v.a.each(t,function(i,n){t[n].children&&(t[n].children=v.a.filter(i.children,function(t){return e.isAllowed(t)}))}),t=v.a.filter(t,function(t){return!!e.isAllowed(t)&&!(!t.children||0===t.children.length)}),this.reportsTree.children=t}},{key:"populateCategoryIds",value:function(){var e=this;this.validCatergoryIds={};var t=this.reportsTree.children;v.a.each(t,function(t){var i=t.id;e.validCatergoryIds[i.toLowerCase()]=!0})}},{key:"populateCreateReportIds",value:function(){var e=this;this.validCreateReportIds={};var t=this.reportsTree.children;v.a.each(t,function(t){var i=t.children;v.a.each(i,function(t){var i=t.id;e.validCreateReportIds[i.toLowerCase()]=!0})})}}]),e}(),tt={children:[{children:[{title:"Understand account performance and identify trends.",name:te.AccountPerformanceReport,searchAlias:"Account report",path:2,id:"accountreport",apiKey:"AccountPerformanceReport",description:{what:"The impressions, impression share (%), clicks, spend, and average cost-per-click for individual accounts. This data can be sorted by individual accounts, currency, bid match type, and delivered match type. ",why:"To observe long-term account performance and trends."}},{title:"See a snapshot of your account, and if there\u2019s anything to flag.",name:te.CampaignPerformanceReport,searchAlias:"Campaign report",path:2,id:"campaignreport",apiKey:"CampaignPerformanceReport",description:{what:"The impressions, impression share (%), clicks, spend, and average cost-per-click for each campaign or account. This data can be sorted by campaign, campaign status, and quality score. ",why:"To view high-level performance statistics and quality attributes for each campaign or account. This is also a quick way to flag any major campaign or account problems."}},{title:"See if your ad group is meeting your preset goals.",name:te.AdGroupPerformanceReport,searchAlias:"Ad group report",path:2,id:"adgroupreport",apiKey:"AdGroupPerformanceReport",description:{what:"The impressions, impression share (%), clicks, spend, and average cost-per-click of your ad groups. This data can be sorted by ad group, ad group status, language, and network.",why:"To more broadly compare delivery performance statistics by ad group, campaign, or account attributes rather than at the keyword level."}},{title:"See which ads are leading to clicks and conversions.",name:te.AdPerformanceReport,searchAlias:"Ad report",path:2,id:"adreport",apiKey:"AdPerformanceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click for each ad. This data can be sorted by ad ID, ad status, ad title, display URL, and destination URL. ",why:"To help you determine which ads lead to clicks and conversions, and which are not performing. Having underperforming ads in your account can pull down the quality of your campaigns."}},{title:"See which keywords are leading to clicks.",name:te.KeywordPerformanceReport,searchAlias:"Keyword report",path:2,id:"keywordreport",apiKey:"KeywordPerformanceReport",description:{what:"The impressions, clicks, click-through rate, quality score, bid, cost-per-click, position, and conversions for each individual keyword within your campaign. ",why:"To find out which keywords are triggering your ads and getting clicks. You can also identify keywords that aren\u2019t performing well to determine if you want to delete them."}},{title:"See a set of keyword and negative keyword pairs that are blocking your bids from participating in the auction.",name:te.NegativeKeywordConflictReport,searchAlias:"Negative keyword conflicts report",path:2,id:"negativekeywordconflictreport",helpId:"reporting_NkwConflicts",apiKey:"NegativeKeywordConflictReport",description:{what:"Negative keywords that conflict with some of your keywords, and block your ad from showing.",why:"This report tells you which keywords and negative keywords are in conflict, and whether the conflict is at the campaign or ad group level. Use this list to figure out which negative keywords to delete."}},{title:"See which search terms are causing your ads to display.",name:te.SearchQueryPerformanceReport,searchAlias:"Search term report",path:2,id:"searchtermreport",helpId:"reporting_SearchTerm",apiKey:"SearchQueryPerformanceReport",description:{what:"The impressions, clicks, click-through rate, and average position for search terms that have triggered your ads.",why:"To see what your audience is searching for when your ads are shown. You can use this information to make informed additions, removals, or edits to both your keyword and negative keyword lists.",note:"If you select one or more shopping campaigns, you need to remove the Keyword column before you run this report."}},{title:"See estimated impressions you might be losing.",name:te.ShareOfVoiceReport,searchAlias:"Share of voice report",path:2,id:"shareofvoicereport",helpId:"reporting_SOV",apiKey:"ShareOfVoiceReport",description:{what:"The number of times your ad is shown as a percentage of the total available impressions in the marketplace. Along with the impression share you are losing because of insufficient budget, low ad ranking or other reasons. The data is available at the account, campaign, ad group, and keyword levels.",why:"To view the percentage of impression share (%)  you have in the marketplace, find out if you are missing opportunities based on your current campaign settings, and make changes to improve impression share. "}},{title:"See how your landing pages are performing.",name:te.DestinationURLPerformanceReport,searchAlias:"Destination URL report",path:2,id:"desturlreport",apiKey:"DestinationURLPerformanceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click for your landing pages. This data can be sorted by destination URL, account, campaign, and ad group. Note that only the first URL in the list (ad, keyword or criterion) is reported. ",why:"To identify landing pages that met audience expectations, resulting in high click or conversion ratios."}},{title:"See performance data for both search and content websites where your ads appear.",name:te.PublisherUsagePerformanceReport,searchAlias:"Website URL (publisher) report",path:2,id:"weburlreport",apiKey:"PublisherUsagePerformanceReport",description:{what:"The impressions, clicks, spend, and conversions for websites on the Yahoo Microsoft Advertising Network and syndicated search partner networks. This data can be sorted by website URL, account, campaign, and ad group.",why:"To see if any website URLs aren\u2019t performing well enough for your campaign or ad group target settings. For example, if ad impressions at those URLs yield a low click-through-rate, then you might decide to exclude those websites from your campaign."}},{title:"See which ad text strings are doing well.",name:te.AdDynamicTextPerformanceReport,searchAlias:"Ad dynamic text report",path:2,id:"addynamictextreport",apiKey:"AdDynamicTextPerformanceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click of your dynamic text strings. This data can be sorted by ad title, destination URL, param1, param2, and param3.",why:"To identify which dynamic text strings are performing well and which strings you should consider changing."}},{title:"See how the ad groups that are associated with remarketing lists are performing.",name:te.AudiencePerformanceReport,searchAlias:"Audiences report",path:2,id:"audiencesreport",apiKey:"AudiencePerformanceReport",description:{what:"The impressions, clicks, and conversions for your remarketing lists. ",why:"To evaluate performance of remarketing campaigns."}},{title:"See data on how people behave on your website.",name:te.GoalsAndFunnelsReport,searchAlias:"Goals report",path:2,id:"goalsreport",helpId:"reporting_CampaignAnalytics",apiKey:"GoalsAndFunnelsReport",description:{what:"The conversion data by goal name. This data can be sorted by account, ad group, campaign, keyword, and goal.",why:"To understand which campaigns and keywords are leading users to complete a specific type of conversion action."}},{title:"See conversion data for your campaigns during a specific time period.",name:te.ConversionPerformanceReport,searchAlias:"Conversions report",path:2,id:"conversionsreport",helpId:"reporting_CampaignAnalytics",apiKey:"ConversionPerformanceReport",description:{what:"The conversion data which includes conversion counts, assists, revenue, CostPerAssist, and Return on ad spend with other performance data, such as impressions, clicks and spend for your campaigns. This data can be sorted by account, ad group, campaign, keyword, and device type.",why:"To understand which campaigns and keywords are leading customers to complete conversion actions."}}],title:"Performance reports give you a closer look at how your campaigns are performing, including details like CTR and impressions.",name:"Performance",path:1,id:"performance",state:{expanded:!0}},{children:[{title:"See how your extensions perform for your keywords.",name:te.AdExtensionByKeywordReport,searchAlias:"Ad extension by keyword report",path:2,id:"extensionkeywordreport",helpId:"reporting_AdExtension",apiKey:"AdExtensionByKeywordReport",description:{what:"The impressions, clicks, and spend of various click types for each keyword when served with different ad extensions. Click types are the different parts of the ad that you can click on.",why:"To understand how different click types are performing for each keyword when different ad extensions are shown in the ad."}},{title:"See how your extensions perform for your ads.",name:te.AdExtensionByAdReport,searchAlias:"Ad extension by ad report",path:2,id:"extensionadreport",helpId:"reporting_AdExtension",apiKey:"AdExtensionByAdReport",description:{what:"The impressions, clicks, and spend of various click types for each ad when served with different ad extensions. Click types are the different parts of the ad that you can click on.",why:"To understand how different click types are performing for each ad when the ad is served with different ad extensions."}},{title:"See how engaging your ad extension items are.",name:te.AdExtensionDetailReport,searchAlias:"Ad extension details report",path:2,id:"adextensiondetailreport",helpId:"reporting_AdExtension",apiKey:"AdExtensionDetailReport",description:{what:"The impressions, clicks, and spend of various ad extension properties for each ad group when served with different ad extensions.",why:"To understand how different ad extension properties are performing when different ad extensions are shown in the ad."}},{title:"See duration and phone spend details for each forwarded call.",name:te.CallDetailReport,searchAlias:"Call forwarding detail report",path:2,id:"callforwarddetailreport",helpId:"reporting_AdExtension",apiKey:"CallDetailReport",isAllowed:function(e){return!!e.IsCallMeteringAllowed},description:{what:"The time and duration of each phone call that originated from a call extension for accounts, campaigns, or ad groups.",why:"To understand how the accounts, campaigns, or ad groups are performing with call extensions."}}],title:"Ad extension reports give you a closer look at how each ad extension is performing based on click type for ads and keywords and ad extension properties for ad groups.",name:"Ad extensions",path:1,id:"extensions"},{children:[{title:"See the performance of your Product Groups in Shopping Campaigns ",name:te.ProductPartitionPerformanceReport,searchAlias:"Product partition report",path:2,id:"productpartitionreport",helpId:"reporting_ProductAds",apiKey:"ProductPartitionPerformanceReport",isAllowed:function(e){return!!e.IsEnhancedShoppingCampaignAllowed},description:{what:"The impressions, clicks, spend, average cost-per-click and conversion for each product group in your Shopping Campaigns. ",why:" To see the performance data for the product groups in your shopping campaigns and to optimize your campaigns accordingly ."}},{title:"See product partition unit data of your Product Groups in Shopping Campaigns",name:te.ProductPartitionUnitPerformanceReport,searchAlias:"Product partition unit report",path:2,id:"productpartitionunitreport",helpId:"reporting_ProductAds",apiKey:"ProductPartitionUnitPerformanceReport",description:{what:"The impressions, clicks, spend, average cost-per-click, and conversions for each product group in your Shopping Campaigns. Depending on the report time and columns you choose, the report may include more than one row per product group. ",why:" To see product partition unit data of your Product Groups in Shopping Campaigns."}},{title:"See the performance of your Products in Shopping Campaigns ",name:te.ProductDimensionPerformanceReport,searchAlias:"Product dimension report",path:2,id:"productdimensionreport",helpId:"reporting_ProductAds",apiKey:"ProductDimensionPerformanceReport",isAllowed:function(e){return!!e.IsEnhancedShoppingCampaignAllowed},description:{what:"The impressions, clicks, spend, average cost-per-click and conversion for each product in your catalog [ each line item in Microsoft Merchant Center catalog ] ",why:"To figure out which of your products are triggering ads and getting most clicks and optimize the ones not performing so well. "}},{title:"See which search terms are causing your ads to display.",name:te.ProductSearchQueryPerformanceReport,searchAlias:"Product search term report",path:2,id:"productsearchtermreport",helpId:"reporting_ProductAds",apiKey:"ProductSearchQueryPerformanceReport",description:{what:"Impressions, clicks, and other metrics for search terms that have triggered your Product ads. Data from Smart Shopping campaigns is not included in this report.",why:"To see what your audience is searching for when your Product ads are shown."}},{title:"See how products are distributed acrocss given product tree.",name:te.ProductMatchCountReport,searchAlias:"Product match count report",path:2,id:"productmatchcountreport",helpId:"reporting_ProductAds",apiKey:"ProductMatchCountReport",description:{what:"The number of products that are matched and targeted at the Campaign, Ad Group, and Product Group level.",why:"To see if you are covering and bidding across your Microsoft shopping campaigns inventory. Note that this only provides the matched data for your current product group within active campaigns, and you cannot obtain historical views."}},{title:"See a set of negative keyword pairs that are blocking your products from participating in the auction.",name:te.ProductNegativeKeywordConflictReport,searchAlias:"Product negative keyword conflicts report",path:2,id:"productnegativekeywordreport",helpId:"reporting_ProductAds",apiKey:"ProductNegativeKeywordConflictReport",description:{what:"Shopping negative keywords that conflict with some of your products, and block your ad from showing.",why:"This report tells you which products and negative keywords are in conflict, and whether the conflict is at the campaign or ad group level. Use this list to figure out which negative keywords to delete."}}],title:"Product ad reports give you a closer look at how your Bing Shopping Campaigns are performing based on product partition and product offer data.",name:"Product ads",path:1,id:"productads"},{children:[{title:"See a list of changes that have been made to your campaigns.",name:te.SearchCampaignChangeHistoryReport,searchAlias:"Change history report",path:2,id:"changehistoryreport",helpId:"reporting_ChangeHistory",apiKey:"SearchCampaignChangeHistoryReport",description:{what:"The changes to keyword bids or landing pages, creation of new campaigns, or addition of new budgets.",why:"To discover when changes to an account were made, as well as which user made the changes."}},{title:"See what changes have been made to individual user profiles in your accounts.",name:te.UserRoleChangeHistoryReport,searchAlias:"User role change history report",path:2,id:"userrolechangehistoryreport",apiKey:"UserRoleChangeHistoryReport",isAllowed:function(e){return!!e.IsInternalUser},description:"See what changes have been made to individual user profiles in your accounts."},{title:"See a list of changes, filtered by user, that shows potentially fraudulent activity.",name:te.FraudChangeHistoryReport,searchAlias:"Fraud change history report",path:2,id:"fraudchangehistoryreport",apiKey:"FraudChangeHistoryReport",isAllowed:function(e){return!!e.IsInternalUser},description:"See a list of changes, filtered by user, that shows potentially fraudulent activity."}],title:"See the changes that have been made to your campaigns and users within an account, over a period you specify.",name:"Change history",path:1,id:"changehistory"},{children:[{title:"See total impressions and clicks for each campaign or ad group, organized by gender and age group.",name:te.AgeGenderAudienceReport,searchAlias:"Age and gender report",path:2,id:"ageandgenderreport",apiKey:"AgeGenderAudienceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click for each ad group, organized by gender and age group.",why:"To discover how your campaigns and ad groups are resonating with different age groups and genders."}},{title:"See total impressions and clicks for each campaign or ad group, organized by company, industry, and job function.",name:te.ProfessionalDemographicsAudienceReport,searchAlias:"Professional demographics report",path:2,id:"professionaldemographicsreport",apiKey:"ProfessionalDemographicsAudienceReport",isAllowed:function(e){return!!e.IsLinkedInTargetingEnabled||!!e.IsAIMCampaignEnabled},description:{what:"The impressions, clicks, spend, and average cost-per-click for each ad group, organized by company, industry, and job function. Please note that this report only reflects your Audience Campaign data.",why:"To discover how your campaigns and ad groups are resonating with different companies, industries, and job functions."}},{title:"See total impressions and clicks for each ad group, organized by the locations where your ads were shown.",name:te.UserLocationPerformanceReport,searchAlias:"User location report",path:2,id:"userlocationreport",helpId:"reporting_GEONew",apiKey:"UserLocationPerformanceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click for each ad group, organized by city, country, metro area, radius, state, and account.",why:"To see where your traffic is coming from broken out by the physical location and the location people are searching for. You can then validate whether your location targeting strategy is successful, and identify opportunities to improve."}},{title:"See total impressions and clicks for each ad group, organized by the locations where your ads were shown.",name:te.GeographicPerformanceReport,searchAlias:"Geographic report",path:2,id:"geographicreport",helpId:"reporting_GEONew",apiKey:"GeographicPerformanceReport",description:{what:"The impressions, clicks, spend, and average cost-per-click for each ad group, organized into columns that show the location used to serve ads.",why:"To see where your traffic is coming from: the physical location of the people searching for your ad or the locations people are searching for. You can then validate whether your location targeting strategy is successful and identify opportunities to improve."}}],title:"See how your campaigns are doing among the people and places who are seeing your ads.",name:"Targeting",path:1,id:"targeting"},{children:[{title:"See how you\u2019ve spent your budget over a specific date range.",name:te.BudgetSummaryReport,searchAlias:"Budget report",path:2,id:"budgetreport",apiKey:"BudgetSummaryReport",description:{what:"The monthly budget and daily spend organized by accounts and campaigns.",why:"To help control and manage your advertising spend for a particular month."}},{title:"See your detailed billing history.",name:te.CustomerInvoiceReport,searchAlias:"Manager account invoice billing report",path:2,id:"customerinvoicereport",apiKey:"CustomerInvoiceReport",isAllowed:function(e){return!!e.IsInternalUser},description:"See your detailed billing history."},{title:"See your most recent billing statement.",name:te.BillingStatementReport,searchAlias:"Billing statement report",path:2,id:"billingstatementreport",apiKey:"BillingStatementReport",description:{what:"Billing documents, including invoices and credit memos.",why:"To view an overall summary of your billing information."}}],title:"See how you are spending your budget, and your most recent billing statement.",name:"Billing and budget",path:1,id:"billingandbudget"},{children:[{title:"See how individual accounts are performing with excel charts and graphs",name:te["AccountPerformanceReport-SixWeeks"],searchAlias:"Account - 6 weeks report",path:2,id:"sixweekaccountactivityreport",apiKey:"AccountPerformanceReport-SixWeeks",isAllowed:function(e){return!!e.IsInternalUser},description:"See how individual accounts are performing with excel charts and graphs"},{title:"See how individual accounts are performing with excel charts and graphs",name:te["AccountPerformanceReport-TwoMonths"],searchAlias:"Account - 2 months (MoM) report",path:2,id:"twomonthaccountactivityreport",apiKey:"AccountPerformanceReport-TwoMonths",isAllowed:function(e){return!!e.IsInternalUser},description:"See how individual accounts are performing with excel charts and graphs"},{title:"See how individual accounts are performing with excel charts and graphs",name:te["AccountPerformanceReport-TwoYears"],searchAlias:"Account - 2 years (YoY) report",path:2,id:"twoyearaccountactivityreport",apiKey:"AccountPerformanceReport-TwoYears",isAllowed:function(e){return!!e.IsInternalUser},description:"See how individual accounts are performing with excel charts and graphs"},{title:"See estimated impressions you might be losing.",name:te["AccountPerformanceReport-ShareOfVoice"],searchAlias:"Account - Share of voice report",path:2,id:"advancedinsightsshareofvoicereport",apiKey:"AccountPerformanceReport-ShareOfVoice",isAllowed:function(e){return!!e.IsInternalUser},description:{what:"The impressions, impression share (%), impression share lost to budget (%), and impression share lost to bid. This data can be sorted by keyword, keyword ID, landing page experience, and quality score.",why:"To view impression share (%) of successful bids for each keyword, and identify opportunities to increase impression share."}}],title:"Find advanced insights into how your advertisers are performing",name:"Advanced insights",path:1,id:"advancedinsights",isAllowed:function(e){return!!e.IsInternalUser}},{children:[{title:"See the clicks, impressions, and other performance metrics of each of your dynamic ad targets.",name:te.DSAAutoTargetPerformanceReport,searchAlias:"Dynamic search ad auto target report",path:2,id:"dsadautotargetreport",helpId:"reporting_DynamicSearchAds",apiKey:"DSAAutoTargetPerformanceReport",isAllowed:function(e){return!!e.IsDynamicSearchAdsV1Enabled},description:{what:"The clicks, impressions, and other performance metrics of each of your dynamic ad targets.",why:"To understand how your dynamic ad targets are performing and where bid adjustments may be useful."}},{title:"See the clicks, impressions, and other performance generated from your website.",name:te.DSACategoryPerformanceReport,searchAlias:"Dynamic search ad category report",path:2,id:"dsadcategoryreport",helpId:"reporting_DynamicSearchAds",apiKey:"DSACategoryPerformanceReport",isAllowed:function(e){return!!e.IsDynamicSearchAdsV1Enabled},description:{what:"The clicks, impressions, and other performance generated from your website.",why:"To check the performance of your existing category targets or to find new categories worth targeting. "}},{title:"See search terms that triggered your dynamic search ads and their corresponding headlines, final URLs, and associated performance metrics.",name:te.DSASearchQueryPerformanceReport,searchAlias:"Dynamic search ad search term report",path:2,id:"dsadsearchtermreport",helpId:"reporting_DynamicSearchAds",apiKey:"DSASearchQueryPerformanceReport",isAllowed:function(e){return!!e.IsDynamicSearchAdsV1Enabled},description:{what:"Search terms that triggered your dynamic search ads and their corresponding headlines, final URLs, and associated performance metrics.",why:"To see how your ads perform against search terms. The data can help you find negative keywords (so that you're not spending money targeting the wrong customer), as well as the right keywords that create conversions. "}}],title:"Dynamic search ads reports allow you to see a holistic view of your campaigns\u2019 dynamic ad target, category, and search term performance.",name:"Dynamic search ads",path:1,id:"dynamicsearch",isAllowed:function(e){return!!e.IsDynamicSearchAdsV1Enabled}}],name:"Standard reports",path:0,id:"welcome",title:"These are a collection of standard reports that we\u2019ve created for you. Click each to create a new report.",state:{expanded:!0}};function it(e){var t=v.a.clone(e);return v.a.forEach(t,function(e,i){"children"!==i&&v.a.isObject(e)&&!v.a.isFunction(e)&&(t[i]=v.a.clone(e))}),t.children=v.a.map(e.children,function(e){return it(e)}),t}function nt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.children&&v.a.each(e.children,function(e){nt(e,t,i)}),e.path=function(e,t,i){switch(parseInt(e.path,10)){case 0:return"".concat(t,"/v2/welcome").concat(i);case 1:return"".concat(t,"/category/").concat(e.id).concat(i);case 2:return"".concat(t,"/create/").concat(e.id).concat(i)}return v.a.defer(function(){throw new Error("unsupported node type: ".concat(e.path))}),e.path}(e,t,i),e}var at={get:function(e,t,i,n){var a="?cid=".concat(n,"&uid=").concat(i),r=it(tt);return nt(r=function e(t,i){var n=t;return n.name&&(n.name=i.getString(n.name)),n.title&&(n.title=i.getString(n.title)),n.description&&(n.description=v.a.isObject(n.description)?v.a.mapObject(n.description,function(e){return i.getString(e)}):i.getString(n.description)),n.children=v.a.map(t.children,function(t){return e(t,i)}),n}(r,e),t,a)}};var rt=function(){function e(t,i,n,a,r,o){if(Object(u.a)(this,e),!v.a.isObject(i))throw new Error("PathProvider: log provided is not an Object");if(this.log=i,this.isValidCategoryId=this.isValidCategoryId.bind(this),this.isValidCreateReportId=this.isValidCreateReportId.bind(this),null==e.reportListData){var s=new et(at.get(r,o,a,n),t,i,n,a,o);e.reportListData=s.fetchData()}}return Object(p.a)(e,[{key:"isValidCreateReportId",value:function(t){if(!v.a.isString(t))return this.log.Error("PathProvider:isValidCreateReportId - supplied id to isValidCreateReportId is a ".concat(typeof t)),!1;var i=e.reportListData,n=t.toLowerCase();return!!i.validCreateReportIds[n]}},{key:"isValidCategoryId",value:function(t){if(!v.a.isString(t))return this.log.Error("PathProvider:isValidCategoryId - supplied id to isValidCategoryId is a ".concat(typeof t)),!1;var i=e.reportListData,n=t.toLowerCase();return!!i.validCategoryIds[n]}},{key:"getUsersReportsTree",value:function(){return e.reportListData.reportsTree}}]),e}(),ot=r.a.createContext(""),st=function(e){function t(e){var i;Object(u.a)(this,t),i=Object(g.a)(this,Object(h.a)(t).call(this,e));var n=new rt(i.props.permissions,{},i.props.cid,i.props.uid,i.props.i18n,i.props.routePrefix),a=n.getUsersReportsTree(),r={};return v.a.each(a.children,function(e){v.a.each(e.children,function(e){r[e.id]=e})}),i.state={context:{reportsTree:a,reports:r,isValidCreateReportId:function(e){return n.isValidCreateReportId(e)},isValidCategoryId:function(e){return n.isValidCategoryId(e)}}},i}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(ot.Provider,{value:this.state.context},this.props.children)}}]),t}(a.Component),lt=Object(S.withI18nConsumer)(st),ct=De(lt),dt=function(e){return function(t){return r.a.createElement(ot.Consumer,null,function(i){return r.a.createElement(e,Object.assign({reportList:i},t))})}},ut=r.a.createContext(""),pt=ut.Provider;function gt(e){return function(t){return r.a.createElement(ut.Consumer,null,function(i){return r.a.createElement(e,Object.assign({servicesEndpoints:i},t))})}}var ht=i("2QtC");r.a.createContext(N.PRIVATE);function mt(e){var t=e.scope,i=e.permissions,n=v.a.chain(t).result("values").result("type","").value(),a=i.IsReportsMergeEnabled?N.SHARED:N.PRIVATE;return"reportuitemplate"===n.toLowerCase()&&(a=N.PRIVATE),B.updateMode(a),!1}mt.propTypes={scope:G.a.shape({}).isRequired,permissions:G.a.shape({}).isRequired};var ft=De(Object(ht.withScope)(mt)),vt=function(e){return r.a.createElement(Le,{permissions:e.permissions},r.a.createElement(pt,{value:e.servicesEndpoints},r.a.createElement(ft,null),r.a.createElement(ct,{cid:e.cid,uid:e.uid,routePrefix:e.routePrefix},r.a.createElement(Ye,{prefetchedData:e.prefetchedData},e.children))))};vt.defaultProps={prefetchedData:{History:{value:[]},CustomReports:{value:[]}}};var bt=r.a.createContext(""),yt=function(e){return function(t){return r.a.createElement(bt.Consumer,null,function(i){return r.a.createElement(e,Object.assign({legacyDeps:i},t))})}},St={components:{blockUi:{reactBlockUi:{minHeight:"unset"}}},core:{color:{light:{white:"#ffffff",gray10:"#f7f9f8",gray20:"#f9f9f9",gray30:"#f5f5f5",gray40:"#f4f4f4",gray50:"#ececec",gray60:"#dddddd",gray70:"#cccccc"}},palette:{neutralPrimary:"#323130",neutralSecondary:"#605e5c"}}};i.d(t,"g",function(){return n.b}),i.d(t,"e",function(){return n.a}),i.d(t,"D",function(){return n.d}),i.d(t,"s",function(){return n.c}),i.d(t,"d",function(){return s}),i.d(t,"B",function(){return l}),i.d(t,"a",function(){return vt}),i.d(t,"F",function(){return dt}),i.d(t,"u",function(){return N}),i.d(t,"G",function(){return Qe}),i.d(t,"H",function(){return Xe}),i.d(t,"E",function(){return De}),i.d(t,"I",function(){return gt}),i.d(t,"f",function(){return bt}),i.d(t,"C",function(){return yt}),i.d(t,"r",function(){return Te}),i.d(t,"c",function(){return Ee}),i.d(t,"k",function(){return _e}),i.d(t,"x",function(){return Ie}),i.d(t,"q",function(){return ze}),i.d(t,"y",function(){return He}),i.d(t,"b",function(){return We}),i.d(t,"A",function(){return ye}),i.d(t,"o",function(){return M}),i.d(t,"p",function(){return ge}),i.d(t,"t",function(){return he}),i.d(t,"n",function(){return ce}),i.d(t,"w",function(){return de}),i.d(t,"l",function(){return oe}),i.d(t,"m",function(){return le}),i.d(t,"z",function(){return St}),i.d(t,"v",function(){return $}),i.d(t,"h",function(){return K}),i.d(t,"i",function(){return Fe}),i.d(t,"j",function(){return Ue})},"gmm/":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i+='<div class="crud-audience-ad">',r||(i=i+"<span>"+n.escape(null==(t=(a?e.getString(o?"Audience_Campaign_Crud_Video_Ad_Edit_Description":"Audience_Campaign_Crud_Ad_Edit_Description"):e.getString(o?"Audience_Campaign_Crud_Video_Ad_Description":"Audience_Campaign_Crud_Ad_Description"))+" ")?"":t)+"</span>"),i+='<div class="react-image-experience"></div><div class="created-ad-list-container"></div></div><div class="error-no-created-ad"></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isGridDisplay"in a?a.isGridDisplay:"undefined"!==typeof isGridDisplay?isGridDisplay:void 0,"isMultimediaAd"in a?a.isMultimediaAd:"undefined"!==typeof isMultimediaAd?isMultimediaAd:void 0,"isVideo"in a?a.isVideo:"undefined"!==typeof isVideo?isVideo:void 0),i}},gp3z:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l){s?(a&&(i+=e?'<span class="icon-right glyphicon glyphicon-triangle-bottom"></span>':'<span class="icon-right glyphicon glyphicon-triangle-right"></span>'),i=i+"<span>"+n.escape(null==(t=l)?"":t)+"</span>",o&&(i=i+'<span class="grid-header-helpId"><a class="helpbutton" type="helppopup"'+n.attr("topic",o,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r,!0,!0)+"></a></span>")):i=i+'<span class="segment-value">'+n.escape(null==(t=l)?"":t)+"</span>"}.call(this,"expanded"in a?a.expanded:"undefined"!==typeof expanded?expanded:void 0,"hasSegment"in a?a.hasSegment:"undefined"!==typeof hasSegment?hasSegment:void 0,"helpAriaLabel"in a?a.helpAriaLabel:"undefined"!==typeof helpAriaLabel?helpAriaLabel:void 0,"helpId"in a?a.helpId:"undefined"!==typeof helpId?helpId:void 0,"isAggregate"in a?a.isAggregate:"undefined"!==typeof isAggregate?isAggregate:void 0,"value"in a?a.value:"undefined"!==typeof value?value:void 0),i}},gyJX:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("ERkP"),u=i.n(d),p=i("saFy"),g=i.n(p),h=i("4qm7"),m=i("DfB3"),f=i("pomj"),v=i("/H1B"),b=i("mKJd"),y=i("a28/"),S=i("bgLp"),w=i("5iHu"),C=i.n(w),x=i("i/ol"),k=i("pYNy"),A=i("O5L4"),T=i("c0nf"),_=i("ITOZ"),E=i("amAB"),I=new RegExp("[\\u1100-\\u11FF]|[\\u2E80-\\u2EFF]|[\\u3000-\\u303F]|[\\u3040-\\u309F]|[\\u30A0-\\u30FF]|[\\u3130-\\u318F]|[\\u3200-\\u32FF]|[\\u3300-\\u33FF]|[\\u3400-\\u4DBF]|[\\u4E00-\\u9FFF]|[\\uAC00-\\uD7AF]|[\\uF900-\\uFAFF]|[\\uFE30-\\uFE4F]|[\\uFF01-\\uFF60]|[\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]","g"),O=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?function(e){return Object(l.isString)(e)?e.replace(I,"12").length:0}(e):Object(l.size)(e)},P=function(e,t,i){var n=function(e,t){return Object(l.isFinite)(t.maxLength)?t.maxLength-O(e,t.distinguishWideChar):Number.POSITIVE_INFINITY}(t,i);return Object(l.isFinite)(n)?n>=0?e.getString("RemainingCharactersText_New",{count:n}):e.getString("ExceededCharactersText_New",{count:0-n}):""},M={popup:"Popup",line:"AdditionalLine"},j=[M.popup,M.line],L=function(e){function t(e){var i,a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).onSubmit=function(){if(a.setState({alwaysShowError:!0}),"false"!==a.state.isValid){a.state.disclaimer.DisclaimerLayout===M.popup&&(a.state.disclaimer.Title=a.state.selected.value);var e=a.state.disclaimer;if(a.props.editData&&a.props.editData.Id>0){if(!confirm(a.props.i18n.getString("Disclaimers_Edit_Confirmation")))return;e.Id=a.props.editData.Id}a.props.repository.create(e).then(function(){a.props.onClose(),a.props.onDisclaimerAddOrUpdated(e)}).catch(function(e){a.setState({errors:c.a.chain(e).map(function(e){return e.message}).value()})}).finally(Object(T.withUiBlock)(C()(".disclaimer-editor-modal"),a.props.i18n.getString("Loading")))}},a.onValidate=function(e){a.setState(function(t){return{isValid:e.isValid.toString(),disclaimer:t.disclaimer.DisclaimerLayout!==e.data.DisclaimerLayout&&e.data.DisclaimerLayout===M.popup?c.a.defaults({Title:a.props.i18n.getString("Disclaimers_Title_Default")},e.data):e.data,errors:[]}})},a.onLayoutTypeChange=function(){a.setState({alwaysShowError:!1,selected:a.dropdownitems[0]})},a.onSelectedChange=function(e){a.setState({selected:e})},a.renderlayoutOptions=function(e){return u.a.createElement(u.a.Fragment,null,a.props.i18n.getString("Disclaimers_DisplayLayout_".concat(e)),e===M.line&&a.state.disclaimer.DisclaimerLayout===M.line&&u.a.createElement(m.Alert,{level:"Info",dismissible:!1,icon:u.a.createElement("div",{className:"alert-image"}),message:a.props.i18n.getString("Disclaimers_DisplayLayout_AdditionalLine_Hint")}))},a.renderSettingItem=function(e){var t=e.settingName,i=e.labelText,n=e.helpId,r=void 0===n?"":n,o=e.children;return u.a.createElement("div",{className:"form-group setting-disclaimer-".concat(t)},u.a.createElement("label",{className:"col-sm-4 control-label"},a.props.i18n.getString(i),r&&u.a.createElement(f.HelpPopup,{topic:r,"aria-label":"".concat(a.props.i18n.getString("LearnMoreLinkText")," ").concat(a.props.i18n.getString(i))})),u.a.createElement("div",{className:"col-sm-8"},o))},a.dropdownitems=[{Id:"disclaimer-editor-title",value:a.props.i18n.getString("Disclaimers_Title_Default")},{Id:"disclaimer-editor-disclaimer",value:a.props.i18n.getString("Disclaimers_Dropdown_Disclaimer")},{Id:"disclaimer-editor-disclosure",value:a.props.i18n.getString("Disclaimers_Dropdown_Disclosure")},{Id:"disclaimer-editor-moreDisclaimer",value:a.props.i18n.getString("Disclaimers_Dropdown_MoreDisclaimer")},{Id:"disclaimer-editor-offer",value:a.props.i18n.getString("Disclaimers_Dropdown_Offer")},{Id:"disclaimer-editor-safetyInfor",value:a.props.i18n.getString("Disclaimers_Dropdown_SafetyInfor")},{Id:"disclaimer-editor-safetyInformation",value:a.props.i18n.getString("Disclaimers_Dropdown_SafetyInformation")}];var s={Name:"",Title:a.props.i18n.getString("Disclaimers_Title_Default"),PopupText:"",LineText:"",DisclaimerLayout:M.popup,FinalUrls:[],FinalMobileUrls:[]},l=a.props.editData?c.a.findWhere(a.dropdownitems,{value:a.props.editData.Title}):a.dropdownitems[0];a.state={disclaimer:a.props.editData?Object(_.cloneDeep)(a.props.editData):s,isValid:"",errors:[],alwaysShowError:!1,selected:l};var d=Object(S.a)({},a.props.schema,{properties:Object(S.a)({},a.props.schema.properties,{Name:Object(S.a)({},a.props.schema.properties.Name,{required:!0}),DisclaimerLayout:Object(S.a)({},a.props.schema.properties.DisclaimerLayout,{required:!0}),Title:Object(S.a)({},a.props.schema.properties.Title,{required:!0}),PopupText:Object(S.a)({},a.props.schema.properties.PopupText,{required:!0})})}),p=Object(S.a)({},a.props.schema,{properties:Object(S.a)({},a.props.schema.properties,{Name:Object(S.a)({},a.props.schema.properties.Name,{required:!0}),DisclaimerLayout:Object(S.a)({},a.props.schema.properties.DisclaimerLayout,{required:!0}),LineText:Object(S.a)({},a.props.schema.properties.LineText,{required:!0}),FinalUrls:Object(S.a)({},a.props.schema.properties.FinalUrls,{required:!0})})});return a.schema=(i={},Object(y.a)(i,M.popup,d),Object(y.a)(i,M.line,p),i),a}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.usePanel||u.a.createElement("div",{className:"disclaimer-setting-header panel-title"},u.a.createElement("button",{className:"close closeimage",onClick:this.props.onClose,"aria-label":this.props.i18n.getString("Button_Close")}),u.a.createElement("div",{className:"disclaimer-editor-title"},this.props.i18n.getString(this.props.editData?"Disclaimers_Edit":"Disclaimers_Create"))),t=u.a.createElement("div",{className:"disclaimer-setting-footer"},u.a.createElement("button",{className:"btn btn-primary",onClick:this.onSubmit},this.props.i18n.getString("Save")),u.a.createElement("button",{className:"btn btn-default",onClick:this.props.onClose},this.props.i18n.getString("Cancel"))),i=this.renderSettingItem({settingName:"name",labelText:"Disclaimers_Name_Label",helpId:"pop_BA_DisclaimerAd_Name",children:u.a.createElement(A.ValidatedInput,{className:"form-control",validationProps:{field:"Name",alwaysShowError:this.state.alwaysShowError},id:"disclaimer-editor-name"})}),n=this.renderSettingItem({settingName:"layoutType",labelText:"Disclaimers_DisplayLayout_Label",helpId:"pop_BA_DisclaimerAd_Layout",children:u.a.createElement("div",{role:"radiogroup"},u.a.createElement(A.ValidatedRadioGroup,{className:"form-control",validationProps:{field:"DisclaimerLayout",alwaysShowError:this.state.alwaysShowError},id:"disclaimer-editor-layoutType",items:j,renderItem:this.renderlayoutOptions,onChange:this.onLayoutTypeChange}))}),a=this.renderSettingItem({settingName:"title",labelText:"Disclaimers_Title_Label",children:u.a.createElement(E.DropdownSelector,{className:"form-control",selectedItem:this.state.selected,onSelect:this.onSelectedChange,totalCount:c.a.size(this.dropdownitems),items:this.dropdownitems,i18n:this.props.i18n,id:"disclaimer-editor-title"})}),r=this.renderSettingItem({settingName:"information-popup",labelText:"Disclaimers_Information_Label",children:u.a.createElement(u.a.Fragment,null,u.a.createElement(k.TextArea,{className:"form-control",validationProps:{field:"PopupText",alwaysShowError:this.state.alwaysShowError},id:"disclaimer-editor-information-popup"}),u.a.createElement("div",{className:"remaining-hint help-block"},P(this.props.i18n,this.state.disclaimer.PopupText,c.a.pick(this.schema[this.state.disclaimer.DisclaimerLayout].properties.PopupText,"maxLength","distinguishWideChar"))))}),o=this.renderSettingItem({settingName:"information-additionalline",labelText:"Disclaimers_Information_Label",children:u.a.createElement(u.a.Fragment,null,u.a.createElement(k.TextArea,{className:"form-control",validationProps:{field:"LineText",alwaysShowError:this.state.alwaysShowError},id:"disclaimer-editor-information-additionalline"}),u.a.createElement("div",{className:"remaining-hint help-block"},P(this.props.i18n,this.state.disclaimer.LineText,c.a.pick(this.schema[this.state.disclaimer.DisclaimerLayout].properties.LineText,"maxLength","distinguishWideChar"))))}),s=this.renderSettingItem({settingName:"finalurl",labelText:"Ad_FinalUrl",helpId:"pop_BA_DisclaimerAd_FinalURL",children:u.a.createElement(x.ValidatedUrlEditor,{validationProps:{field:"FinalUrls",alwaysShowError:this.state.alwaysShowError},key:"finalUrls"})}),l=this.renderSettingItem({settingName:"mobileurl",labelText:"MobileFinalUrl_Label",helpId:"pop_BA_DIsclaimerAd_MobileURL",children:u.a.createElement(x.ValidatedUrlEditor,{validationProps:{field:"FinalMobileUrls",alwaysShowError:this.state.alwaysShowError},key:"finalMobileUrls"})});return u.a.createElement(u.a.Fragment,null,e,u.a.createElement("div",{className:"form-horizontal disclaimer-setting-content"},this.state.disclaimer.DisclaimerLayout===M.popup?u.a.createElement(A.ValidationGroup,{validationProps:{schema:this.schema[M.popup],i18n:this.props.i18n,onValidate:this.onValidate,data:this.state.disclaimer,alwaysShowError:this.state.alwaysShowError}},i,n,a,r,s,l):u.a.createElement(A.ValidationGroup,{validationProps:{schema:this.schema[M.line],i18n:this.props.i18n,onValidate:this.onValidate,data:this.state.disclaimer,alwaysShowError:this.state.alwaysShowError}},i,n,o,s,l),this.state.errors&&this.state.errors.length>0&&u.a.createElement("div",{className:"mt-error"},u.a.createElement(v.ErrorMessages,{messages:this.state.errors,className:"over-all-errors error"}))),t)}}]),t}(u.a.PureComponent);L.defaultProps={editData:null,onDisclaimerAddOrUpdated:c.a.noop,usePanel:!1};var D=10,R=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,e))).onFetch=function(e){var t=e.query,n=void 0===t?"":t,a=e.pageNumber;return i.props.repository.findAll({where:{name:{contains:n}},skip:a*D,limit:D}).then(function(e){var t=e.items,n=e.total;i.isMountedFlag&&i.setState({items:t,totalCount:n})})},i.onEdit=function(e){return function(t){t.preventDefault(),t.stopPropagation(),i.dropdownSelectorRef.current.instanceRef.handleClickOutside(),C()(".disclaimer-selector .dropdown-toggle").focus(),i.props.onEdit(e)}},i.onRemove=function(e){return function(t){t.preventDefault(),t.stopPropagation(),confirm("".concat(i.props.i18n.getString("Disclaimers_Remove_Confirmation"),"\n").concat(i.props.i18n.getString("Disclaimers_Remove_Confirmation_body")))&&i.props.repository.destroy(e.Id).finally(Object(T.withUiBlock)(C()(".disclaimer-selector"),i.props.i18n.getString("Loading"))).then(function(){i.props.onRemove(e)})}},i.getDropdownButtonA11yLabel=function(e,t){var i=e.Name,n=t.getString("Disclaimers_Select");return i?"".concat(i," ").concat(n):n},i.renderItem=function(e){return u.a.createElement("li",{className:"list-selector-option"},u.a.createElement("span",{className:"truncated disclaimer-item-name",title:e.Name},e.Name),u.a.createElement("span",{className:"action-right"},u.a.createElement("a",{href:"#","aria-label":"".concat(e.Name," ").concat(i.props.i18n.getString("Edit")),className:"edit",onClick:i.onEdit(e)},i.props.i18n.getString("Edit"))," | ",u.a.createElement("a",{href:"#","aria-label":"".concat(e.Name," ").concat(i.props.i18n.getString("Remove")),className:"remove",onClick:i.onRemove(e)},i.props.i18n.getString("Remove"))))},i.renderSelectedItem=function(e){var t=e&&e.Id>0?e.Name:i.props.i18n.getString("Disclaimers_Select");return u.a.createElement("span",{className:"truncated"},t)},i.renderEmptyList=function(){return u.a.createElement("div",{className:"empty-content"},i.props.i18n.getString("Search_No_Result"))},i.isMountedFlag=!1,i.dropdownSelectorRef=u.a.createRef(),i.state={totalCount:0,items:[]},i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.isMountedFlag=!0,this.onFetch({pageNumber:0})}},{key:"componentDidUpdate",value:function(e){this.props.toggleSinceUpdated!==e.toggleSinceUpdated&&(this.dropdownSelectorRef.current&&C()(".search-box__input",this.dropdownSelectorRef.current.componentNode).val(""),this.onFetch({query:"",pageNumber:0}))}},{key:"componentWillUnmount",value:function(){this.isMountedFlag=!1}},{key:"render",value:function(){return u.a.createElement("div",{className:"disclaimer-selector form-control-static"},(this.dropdownSelectorRef.current&&C()(".search-box__input",this.dropdownSelectorRef.current.componentNode).val()||this.state.items&&this.state.items.length>0)&&u.a.createElement(E.DropdownSelector,{ref:this.dropdownSelectorRef,selectedItem:this.props.selectedDisclaimer,onFetch:this.onFetch,onSelect:this.props.onSelectDisclaimer,mode:"async",i18n:this.props.i18n,totalCount:this.state.totalCount,items:this.state.items,pageSize:D,renderItem:this.renderItem,renderSelectedItem:this.renderSelectedItem,renderEmptyList:this.renderEmptyList,getDropdownButtonA11yLabel:this.getDropdownButtonA11yLabel,enableRandomPage:!0}))}}]),t}(u.a.PureComponent);R.defaultProps={selectedDisclaimer:{Id:0},onEdit:c.a.noop,onRemove:c.a.noop},g.a.setAppElement(document.body);var N=function(){return{Id:0}},V=function(e){function t(e){var i;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,e))).onCheckedChange=function(){i.setState(function(e){var t=!e.enableDisclaimer;return i.props.onDisclaimerCheckboxChange(t),{enableDisclaimer:t,errorMessage:[]}})},i.onDisclaimerAddOrUpdated=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.Id>0&&e.Id===i.state.selectedDisclaimer.Id?i.setState(function(t){return{selectedDisclaimer:e,toggleSinceUpdated:!t.toggleSinceUpdated}}):i.setState(function(e){return{toggleSinceUpdated:!e.toggleSinceUpdated}})},i.onAddClick=function(e){e.preventDefault(),i.setState({isAddOpen:!0})},i.onEditUIClose=function(){i.setState({isAddOpen:!1,EditingDisclaimer:null})},i.onSelectDisclaimer=function(e){i.setState({selectedDisclaimer:e,errorMessage:[]})},i.onEdit=function(e){i.setState({EditingDisclaimer:e,isAddOpen:!0})},i.onRemove=function(e){e.Id===i.state.selectedDisclaimer.Id&&i.setState({selectedDisclaimer:N()}),e.Id===i.props.selectedDisclaimer.Id&&i.props.resetSelectedDisclaimer(),i.onDisclaimerAddOrUpdated()},i.getValues=function(e){var t={};if(i.validate()&&i.state.enableDisclaimer){t.DisclaimerAdsEnabled=!0;var n=i.props.campaignId>0?{Campaign:{Id:i.props.campaignId}}:{CampaignName:e};i.props.selectedDisclaimer&&i.props.selectedDisclaimer.Id===i.state.selectedDisclaimer.Id||(t.AdExtensionAssociations=[c.a.defaults({Id:i.state.selectedDisclaimer.Id,Name:i.state.selectedDisclaimer.Name,Type:"CampaignDisclaimerAdExtension",Status:"Active"},n)],c.a.result(i.props.selectedDisclaimer,"Id",0)&&(t.AdExtensionAssociations=t.AdExtensionAssociations.concat(c.a.defaults({Id:i.props.selectedDisclaimer.Id,Type:"CampaignDisclaimerAdExtension",Status:"Deleted"},n))))}return t},i.validate=function(){var e=!i.state.enableDisclaimer||i.state.selectedDisclaimer&&i.state.selectedDisclaimer.Id>0;return i.setState({errorMessage:e?[]:[i.props.i18n.getString("Validation_NotEmpty_Required_Field")]}),e},i.state={enableDisclaimer:i.props.DisclaimerAdsEnabled,isAddOpen:!1,selectedDisclaimer:i.props.DisclaimerAdsEnabled&&c.a.result(i.props.selectedDisclaimer,"Id",0)?i.props.selectedDisclaimer:N(),errorMessage:[],toggleSinceUpdated:!0,EditingDisclaimer:null},i}return Object(s.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.DisclaimerAdsEnabled!==e.DisclaimerAdsEnabled&&(this.props.onDisclaimerCheckboxChange(this.props.DisclaimerAdsEnabled),this.setState({enableDisclaimer:this.props.DisclaimerAdsEnabled,isAddOpen:!1,selectedDisclaimer:this.props.DisclaimerAdsEnabled&&c.a.result(this.props.selectedDisclaimer,"Id",0)?this.props.selectedDisclaimer:N(),errorMessage:[],EditingDisclaimer:null}))}},{key:"render",value:function(){var e=u.a.createElement(L,Object.assign({editData:this.state.EditingDisclaimer,onClose:this.onEditUIClose,onDisclaimerAddOrUpdated:this.onDisclaimerAddOrUpdated,repository:this.props.repository.extension,usePanel:this.props.usePanel},c.a.pick(this.props,"i18n","schema"))),t=u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"form-control-static"},u.a.createElement("a",{href:"#",className:"addDisclaimerButton",onClick:this.onAddClick,role:"button"},this.props.i18n.getString("Disclaimers_Add"))),this.props.usePanel?u.a.createElement(b.a,{isOpen:this.state.isAddOpen,onClose:this.onEditUIClose,panelClassName:"disclaimer-editor-panel",title:this.props.i18n.getString(this.state.EditingDisclaimer?"Disclaimers_Edit":"Disclaimers_Create"),i18n:this.props.i18n,panelReadyAriaLabel:this.props.i18n.getString("Disclaimer editor side panel opened")},e):u.a.createElement(g.a,{isOpen:this.state.isAddOpen,onRequestClose:this.onEditUIClose,shouldCloseOnOverlayClick:!1,overlayClassName:"disclaimer-editor-overlay react-modal-overlay",className:"disclaimer-editor-modal react-modal"},e)),i=u.a.createElement(R,{i18n:this.props.i18n,selectedDisclaimer:this.state.selectedDisclaimer,toggleSinceUpdated:this.state.toggleSinceUpdated,repository:this.props.repository.extension,onSelectDisclaimer:this.onSelectDisclaimer,onEdit:this.onEdit,onRemove:this.onRemove}),n=this.state.errorMessage&&this.state.errorMessage.length>0&&u.a.createElement(v.ErrorMessages,{messages:this.state.errorMessage,className:"disclaimer-setting error"});return(0===this.props.campaignId||this.props.campaignId>0&&this.props.DisclaimerAdsEnabled)&&u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"col-sm-2 control-label"},u.a.createElement("label",null,this.props.i18n.getString("DisclaimerLabelText"),u.a.createElement(f.HelpPopup,{topic:"pop_BA_DisclaimerAd","aria-label":"".concat(this.props.i18n.getString("LearnMoreLinkText")," ").concat(this.props.i18n.getString("DisclaimerLabelText"))}))),u.a.createElement("div",{className:"col-sm-8"},this.props.campaignId>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"form-control-static disclaimer-description"},this.props.i18n.getString("Disclaimers_Campiagn_Description")),i,n,t):u.a.createElement(u.a.Fragment,null,u.a.createElement(h.Checkbox,{disabled:this.props.isDisclaimerCheckboxDisabled,checked:this.state.enableDisclaimer,name:"show-checkbox",onChange:this.onCheckedChange,id:"disclaimer-setting-checkbox"},this.props.i18n.getString("Disclaimers_Campiagn_Description")),u.a.createElement("div",{className:"checkbox"},this.state.enableDisclaimer&&u.a.createElement(u.a.Fragment,null,u.a.createElement(m.Alert,{level:"Info",dismissible:!1,icon:u.a.createElement("div",{className:"alert-image"}),message:this.props.i18n.getString("Disclaimers_Campaign_Hint")}),i,n,t)))))}}]),t}(u.a.PureComponent);V.defaultProps={campaignId:0,DisclaimerAdsEnabled:!1,selectedDisclaimer:N(),resetSelectedDisclaimer:c.a.noop,usePanel:!1,isDisclaimerCheckboxDisabled:!1,onDisclaimerCheckboxChange:c.a.noop},i.d(t,"AdsCampaignDisclaimers",function(){return V})},"h5F/":function(e,t,i){"use strict";i.r(t);var n=i("qW/f"),a=i("bgLp"),r=i("nN5v"),o=i("ePzV"),s=i("23d6"),l=i("Pb1Y"),c=i("2ndk"),d=i("Vwpy"),u=i("syDw"),p=i.n(u),g=i("/xyZ"),h=i.n(g),m=i("UT4o"),f=i.n(m),v=i("O81M"),b=i("p8zf"),y=i("YzTP"),S=i("4+Mt"),w=i("+9/h"),C=i("ORPc"),x=i("nNS3"),k=i.n(x),A=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"initialize",value:function(e){var t=this;this.viewContext=e.viewContext,this.i18n=w.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.audienceCampaignType=e.audienceCampaignType||"",this.options=e,this.options.currentLevelTargetInfo=new b.a({resourceName:"AdGroupCriterion",isForVNext:!!e.isForVNext,isAudienceCreationWorkflow:!0});var i=f.a.chain(e.deps).result("router",{}).value();this.navigateToRoute=i.navigateToRoute||f.a.noop,this.eventDelegator=f.a.result(e.deps,"eventDelegator"),this.options.scenario="adgroup-creation",this.perfMarker=e.perfMarker,this.setupInstrumentation(),"shopping"!==this.audienceCampaignType?this.options.lastStep="ResponsiveAdEditor":this.options.lastStep="CrudAudienceAdgroup";var n=f.a.extend(this.options,{wizardElement:this.$el});this.step1=new S.b(f.a.extend(n,{perfMarker:this.perfMarker.createChild("AdGroupBasic")})),this.step2=new S.a(n);var a=f.a.extend(n,{perfMarker:this.perfMarker.createChild("CrudAudienceAd"),isImpressionTrackingUrlsEnabled:e.isImpressionTrackingUrlsEnabled});this.loadCrudAudienceAdPromise=new h.a(function(e){"shopping"!==t.audienceCampaignType&&(t.step3=new y.ResponsiveAdEditor(a)),t.listenTo(t.step1,"saveAndExit",t.saveAndExit),t.listenTo(t.step1,"canceled",t.onExit),t.listenTo(t.step2,"saveAndExit",t.saveAndExit),t.listenTo(t.step2,"canceled",t.onExit),t.step3&&t.listenTo(t.step3,"saveAndExit",t.saveAndExit),e()})}},{key:"setupInstrumentation",value:function(){var e=w.a.get("campaignui/feature/instrumentation/index");e.addScenario(C.schema),"shopping"===this.audienceCampaignType?this.aimAdGroupCreationScenario=e.aimShoppingAdGroupCreationWizard.create():this.aimAdGroupCreationScenario=e.aimAdGroupCreationWizard.create(),this.options.logScenario=this.aimAdGroupCreationScenario;var t=e.inContextRepairRecommendation.create();this.options.applyActivity=t.applyDeliveryStatus.create()}},{key:"render",value:function(){var e=this;return this.loadCrudAudienceAdPromise.then(function(){e.wizard=new v.StepsWizard({config:e.getStepConfig(),currentStep:"audience-adgroup-creation-wizard-step1"}),e.$el.html(k()(e)),e.wizard.render(),f.a.isFunction(e.options.callbackBeforeRender)?e.options.callbackBeforeRender(function(){e.$(".audience-adgroup-creation-wizard").append(e.wizard.$el)}):e.$(".audience-adgroup-creation-wizard").append(e.wizard.$el)}),this}},{key:"getStepConfig",value:function(){var e=[];e.push({name:"audience-adgroup-creation-wizard-step1",view:this.step1}),e.push({name:"audience-adgroup-creation-wizard-step2",view:this.step2}),"shopping"!==this.audienceCampaignType&&e.push({name:"audience-adgroup-creation-wizard-step3",view:this.step3});var t={};return f.a.isFunction(this.options.layout)?t.layout=this.options.layout:f.a.isUndefined(this.options.isHorizontal)?t.isHorizontal=!0:t.isHorizontal=!!this.options.isHorizontal,f.a.isFunction(this.options.headerTemplate)&&(t.headerTemplate=this.options.headerTemplate),Object(a.a)({steps:e},t)}},{key:"remove",value:function(){this.wizard&&this.wizard.remove(),f.a.isFunction(this.options.callbackBeforeRemove)&&this.options.callbackBeforeRemove();var e=document.querySelector(".audience-creation-panel.isOpen");e&&e.remove&&e.remove(),Object(c.a)(Object(l.a)(t.prototype),"remove",this).call(this)}},{key:"onExit",value:function(){var e=this.viewContext.currentCampaign.Id;this.navigateToRoute("campaign_adgroup",{campaign_id:e})}},{key:"saveAndExit",value:function(){var e=this;return this.enableAdGroup().then(function(){e.navigateToSummaryPage()}).catch(function(t){t&&t.errors&&e.errorsView.setErrors(e.i18nErrors.getBulkApiErrors(t.errors))})}},{key:"enableAdGroup",value:function(){var e=w.a.get("component/js-data-campaign/index"),t=this.viewContext.currentCampaign,i=this.viewContext.currentAdGroup,n={Id:i.Id,Campaign:{Id:t.Id},Status:"Active"};return e.AdGroup.update(i.Id,n,{adapter:"bulk"})}},{key:"navigateToSummaryPage",value:function(){w.a.get("SummaryDataContextManager").getContext("/campaign/newadgroup/create?"),this.eventDelegator&&this.eventDelegator.trigger("adGroupReload"),this.onExit()}}]),t}(p.a.View),T=i("c0nf"),_=i("TDDF"),E=i("kgRR"),I=i("0e0T"),O=i("+Ye4"),P=i("iH9I"),M=i("kLlV"),j=i("ahr/"),L=i.n(j),D=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"initialize",value:function(e){this.perfMarker=e.perfMarker,this.perfMarker.willInit(),this.setupInstrumentation(),this.viewContext=e.viewContext,this.i18n=w.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.decimal=w.a.get("component/humanize/decimal"),this.i18nErrors=w.a.get("component/api-errors-campaign/index"),this.options=e,this.options.scenario="adgroup-settings",this.options.viewContext.level="adgroup",this.reachControlOptions=this.options.reachControlOptions;var t=this.perfMarker.createChild("currentLevelTargetInfo");t.willInit(),this.currentLevelTargetInfo=new b.a({resourceName:"AdGroupCriterion",isForVNext:!(!e.deps||!e.deps.isNewUI)}),t.done();var i=this.perfMarker.createChild("parentLevelTargetInfo");i.willInit(),this.parentLevelTargetInfo=new b.a({resourceName:"CampaignCriterion",isForVNext:!(!e.deps||!e.deps.isNewUI)}),i.done(),this.options.currentLevelTargetInfo=this.currentLevelTargetInfo,this.options.parentLevelTargetInfo=this.parentLevelTargetInfo,this.errorsView=new C.AudienceCampaignErrorsView,this.loadAdGroupDataTask=this.loadAdGroupDataAsync();var n=this.options.deps||{};this.isNewUI=n.isNewUI,this.router=n.router,this.isNewUI&&(this.currentCampaign=this.options.viewContext.currentCampaign,this.supportCashbackSettings=Object(I.shouldSupportCashbackSettings)(this.currentCampaign))}},{key:"setupInstrumentation",value:function(){var e=w.a.get("campaignui/feature/instrumentation/index");e.addScenario(C.schema),this.aimAdGroupSettingsWizardScenario=e.aimAdGroupSettingsWizard.create()}},{key:"loadAdGroupDataAsync",value:function(){var e=this;if(this.loadAdGroupDataTask)return this.loadAdGroupDataTask;this.perfMarker.willFetchData();var t=this.aimAdGroupSettingsWizardScenario.loadSettings.create();t.start();var i=w.a.get("component/js-data-campaign/index"),n=w.a.get("component/edm-campaign/index"),a=Object(P.asyncFunctionWithPerfMarker)(this.perfMarker.createChild("getAdGroup"),i.AdGroup.find)(Number(this.viewContext.currentAdGroup.Id),{entitySet:n.currentCampaign.AdGroups,bypassCache:!0}),r=Object(P.asyncFunctionWithPerfMarker)(this.perfMarker.createChild("getCampaignCriterions"),this.parentLevelTargetInfo.initializeWithCampaignAsync,this.parentLevelTargetInfo)(this.viewContext.currentCampaign.Id);return this.reachControl=new O.b(f.a.extend({isSticky:!0,scenario:this.aimAdGroupSettingsWizardScenario.value},this.reachControlOptions||{})),this.estimateRequestFactory=new O.a({currentLevelTargetInfo:this.currentLevelTargetInfo,parentLevelTargetInfo:this.parentLevelTargetInfo}),h.a.join(a,r,function(t){e.options.viewContext.currentAdGroup=t,e.onAdGroupInitialized()}).then(function(){e.handleEstimateUpdates(),e.listenTo(e.currentLevelTargetInfo,"AdGroupCriterionChanged",e.handleEstimateUpdates),e.parentLevelTargetInfo&&e.listenTo(e.parentLevelTargetInfo,"CampaignCriterionChanged",e.handleEstimateUpdates),e.listenTo(e.advancedTargetSetting.companyNameTargetSetting.targetOrBidSelector,"targetSettingChanged",e.handleEstimateUpdates),e.listenTo(e.advancedTargetSetting.industryTargetSetting.targetOrBidSelector,"targetSettingChanged",e.handleEstimateUpdates),e.listenTo(e.advancedTargetSetting.jobFunctionTargetSetting.targetOrBidSelector,"targetSettingChanged",e.handleEstimateUpdates),e.listenTo(e.advancedTargetSetting.audienceTargetSetting.targetOrBidSelector,"targetSettingChanged",e.handleEstimateUpdates),t.stop()}).catch(function(e){return!e})}},{key:"onRenderedInDOM",value:function(){this.loadAdGroupDataTask.finally(Object(T.withUiBlock)(this.$(".audience-adgroup-settings-wizard-container"),this.i18n.getString("Loading")))}},{key:"onAdGroupInitialized",value:function(){this.crudAudienceAdgroupBasic=new S.b(f.a.extend({perfMarker:this.perfMarker.createChild("crudAudienceAdGroupBasic"),supportCashbackSettings:this.supportCashbackSettings},this.options)),this.advancedTargetSetting=new E.a(f.a.extend({perfMarker:this.perfMarker.createChild("advancedTargetSetting"),supportCashbackSettings:this.supportCashbackSettings},this.options)),this.renderSettingsControls()}},{key:"onCashbackPercentChange",value:function(e){if(this.crudAudienceAdgroupBasic.cashbackSettingsView.viewModel.validateCashbackPercent(e)){var t=""===e||null==e?null:this.decimal.fromLocalToFloat(e);this.advancedTargetSetting&&this.advancedTargetSetting.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:t})}}},{key:"onSaveButtonClicked",value:function(){return this.validateAndSave()}},{key:"onCancelButtonClicked",value:function(){var e=Number(this.viewContext.currentCampaign.Id),t=this.viewContext.currentAdGroup?Number(this.viewContext.currentAdGroup.Id):void 0;this.router.navigateToRoute("adgroup_ad",{campaign_id:e,adgroup_id:t})}},{key:"validate",value:function(){return this.advancedTargetSetting.validate()&&this.crudAudienceAdgroupBasic.validate()}},{key:"validateAndSave",value:function(){var e=this;return!!this.validate()&&this.reachControl.validate().then(function(t){if(t)return e.checkIMAReachAndSave();var i=e.reachControl.errorMessage;return e.errorsView.setErrors([{message:i}]),!1}).catch(function(){})}},{key:"getData",value:function(){var e={};f.a.extend(e,this.crudAudienceAdgroupBasic.getData());var t=this.advancedTargetSetting.getData().AdGroupCriterions,i=f.a.filter(t,function(e){return"Audience"===e.Criterion.Type}),n=f.a.reject(t,function(e){return"Audience"===e.Criterion.Type});return e.AdGroupCriterions=f.a.union(e.AdGroupCriterions,n),e.AdGroupAudienceCriterions=i,e.TargetSetting=this.getTargetSettings().length>0?this.getTargetSettings().join(";"):"delete_value",e}},{key:"getAllAdGroupLocationCriterion",value:function(){var e=this.advancedTargetSetting.getAllLocations()||[];e=f.a.filter(e,function(e){return"Deleted"!==e.Status});var t=f.a.filter(e,function(e){return"LocationIntentCriterion"!==e.CriterionType}),i=this.advancedTargetSetting.getCampaignLocationCriterions();if(0===t.length&&i&&i.length>0){var n=Object(M.c)(i);return n.locations.concat(n.intent)}return e}},{key:"checkIMAReachAndSave",value:function(){var e=this,t=h.a.resolve(!1),i=this.getAllAdGroupLocationCriterion()||[],n=w.a.get("component/config/index"),a=n.get("CurrentAccount"),r=f.a.result(n.get("Permissions"),"IsIMAReachRepresentationPhase1Enabled"),o=this.getData(),s=o&&o.AdGroupCriterions&&f.a.filter(o.AdGroupCriterions,function(e){return e&&("Location"===e.CriterionType||"Radius"===e.CriterionType)});if(s&&s.length>0&&r&&this.isNewUI&&i.length>0){var l=Object(M.b)(i);t=Object(M.e)({locationsInfo:l,onYes:function(){return e.saveAsync()},deliveryChannel:"AIM",campaignId:Number(this.viewContext.currentCampaign.Id),adGroupId:Number(this.viewContext.currentAdGroup.Id),i18n:this.i18n,aid:a.Id,cid:a.AdvertiserCustomerID})}return t.then(function(t){return!t&&e.saveAsync()})}},{key:"saveAsync",value:function(){var e=this,t=this.getData(),i=w.a.get("component/js-data-campaign/index").AdGroup.update(this.viewContext.currentAdGroup.Id,t,{adapter:"bulk",cacheResponse:!1});return this.errorsView.removeErrors(),i.then(function(i){if(f.a.isFinite(i.Id)){e.viewContext.currentAdGroup=i;var n=e.aimAdGroupSettingsWizardScenario.saveSettings.create();return Object(I.logAdGroupPersonalizedOffers)(e.supportCashbackSettings,n.signal.bind(n),t),!0}return!1}).then(function(t){return t?e.crudAudienceAdgroupBasic.advancedSettings.saveExtensions():h.a.resolve(!1)}).then(function(t){if(window.App){var i=Number(e.viewContext.currentCampaign.Id),n=Number(e.viewContext.currentAdGroup.Id);window.App.trigger("adGroupUpdated",{data:[{Id:n,Name:e.viewContext.currentAdGroup.Name,CampaignId:i}]}),t&&e.router.navigateToRoute("adgroup_ad",{campaign_id:i,adgroup_id:n})}return t}).catch(function(t){return e.handleErrors(t),h.a.resolve(!1)}).finally(Object(T.withUiBlock)(this.$el,this.i18n.getString("Loading"),!0))}},{key:"handleErrors",value:function(e){var t=this.aimAdGroupSettingsWizardScenario.saveSettings.create();if(e&&e.entity)if(e&&!f.a.isUndefined(e.errors)){if(e.errors.length){var i=this.i18nErrors.getBulkApiErrors(e.errors),n=f.a.every(i,function(e){return e.code===e.message});f.a.isEmpty(i)||n?(this.errorsView.setErrors([{message:this.i18n.getString("GenericErrorMessage_Short")}]),t.error("".concat(Object(C.getBulkErrorsLogMessage)(e.errors),", Entity:").concat(JSON.stringify(e.entity)))):(this.errorsView.setErrors(i),t.trace(Object(C.getBulkErrorsLogMessage)(e.errors)))}}else t.error(JSON.stringify(e));else this.errorsView.setErrors(this.i18nErrors.getODataErrors(e.errors))}},{key:"render",value:function(){var e=this;return Object(_.a)(this.$el,function(){return e.onRenderedInDOM()}),this.$el.html(L()(this)),this}},{key:"renderSettingsControls",value:function(){var e=this;this.perfMarker.willRender(),this.crudAudienceAdgroupBasic&&this.advancedTargetSetting&&(this.crudAudienceAdgroupBasic.render(),this.advancedTargetSetting.render(),this.$(".audience-adgroup-settings-container").append(this.crudAudienceAdgroupBasic.$el),this.$(".audience-adgroup-targets-container").append(this.advancedTargetSetting.$el)),this.crudAudienceAdgroupBasic.cashbackSettingsView&&this.crudAudienceAdgroupBasic.cashbackSettingsView.viewModel.CashbackPercent.subscribe(function(t){e.onCashbackPercentChange(t)}),this.$(".errors-container").append(this.errorsView.render().$el),this.$(".audience-reach-estimate-container").append(this.reachControl.render().$el),this.perfMarker.done()}},{key:"handleEstimateUpdates",value:function(){var e=this.getTargetSettings(),t=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.BiddingScheme&&this.viewContext.currentCampaign.BiddingScheme.Type,i=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.CampaignSubType,n=C.BidStrategy[t],a=f.a.first(f.a.get(this.viewContext.currentCampaign,"CampaignSettings"))||{},r=Object(C.getFeedInfo)(a),o=this.estimateRequestFactory.createWithTargetSettings(e,n,i,r),s=this.currentLevelTargetInfo.hasAudienceRemarketingList();this.reachControl.updateEstimate(o,s)}},{key:"getTargetSettings",value:function(){var e=this.currentLevelTargetInfo.getAllNoneEmptyTypeKeys();e=f.a.reject(e,function(e){return"Location"===e||"Radius"===e||"NegativeLocation"===e||"Device"===e});var t=this.advancedTargetSetting.getTargetSettings();return f.a.intersection(e,t)}},{key:"events",get:function(){return{"click .save-button":"onSaveButtonClicked","click .cancel-button":"onCancelButtonClicked"}}}]),t}(p.a.View),R=i("Q5Xd"),N=i("EfI/"),V=i("4I68"),B=i("LQ/w"),F=i.n(B),U=i("LrQ+"),G=i("nlAS"),z=i.n(G),H=i("UgQD"),W=i("TNmU"),q=i("yN9e"),$=i.n(q),K=i("IbLZ"),J=i("2sC/"),Z=i("Q93t"),Y=i("b172"),Q=i("wL7j"),X=i.n(Q),ee=i("1gQY"),te=i.n(ee),ie=i("DXRr"),ne=i("Td3X"),ae=i.n(ne),re=i("P6o6"),oe=i.n(re),se=i("xAPU"),le=i.n(se),ce=i("ca1b"),de=i("YK3D"),ue=i.n(de),pe=i("jHK3"),ge=i("GbM9"),he=i.n(ge),me=i("KOFP"),fe=i.n(me),ve=i("Xs1+"),be=i("aezm"),ye=i("apu2"),Se=i.n(ye),we=i("jOdW"),Ce=i.n(we),xe=i("nza/"),ke=i("ocoE"),Ae=i("aA6B"),Te=i("fE/Z"),_e=i("NkAx"),Ee=i("AQBV"),Ie=i.n(Ee),Oe=i("6mWt"),Pe=i("OvMV"),Me=i("SxtD"),je=i("UcGB"),Le=i("P0Lv"),De=i("rm/4"),Re=i("Tq7U"),Ne=i("Sk/Z"),Ve=i("5C8L"),Be=i("+PqR"),Fe=i("UOZx"),Ue=i("dnaR"),Ge=i("El24");i.d(t,"AudienceCampaignCreationWizard",function(){return n.a}),i.d(t,"AudienceAdgroupCreationWizard",function(){return A}),i.d(t,"AudienceAdgroupSettingsWizard",function(){return D}),i.d(t,"AudienceAdvancedTargetSettings",function(){return E.a}),i.d(t,"AudienceTargetInfo",function(){return b.a});var ze=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/feature/audience-campaign");w.a.set("component/config/index",Ie.a),w.a.set("component/preference/service/index",Oe.default),w.a.set("campaignui/feature/shared-budget/view/shared-budget-switch-editor",N.default),w.a.set("campaignui/feature/budget/view/budget",F.a),w.a.set("component/js-data-campaign/index",z.a),w.a.set("$/schema!campaign/Campaign",R.Campaign),w.a.set("$/schema!campaign/AdGroup",R.AdGroup),w.a.set("$/schema!campaign/ResponsiveAd",R.ResponsiveAd),w.a.set("@bingads-webui/i18n-amd-loader!campaignui/feature/audience-campaign",ze),w.a.set("component/i18n/loader!campaignui/feature/audience-campaign",ze),w.a.set("component/timezonemapper/index",H),w.a.set("campaignui/feature/location-targets/view/locationTargets",K.default),w.a.set("component/url-input/view/url-input",X.a),w.a.set("component/api-errors-campaign/index",ie),w.a.set("component/upgraded-url/view/urlOptionsV2",be.default),w.a.set("$/schema!dynamicdb/ShoppingCampaign",R.ShoppingCampaign),w.a.set("campaignui/feature/shopping-campaign/view/campaign-creation/shopping-settings",V.a),w.a.set("campaignui/feature/bidding-strategy/bidding-strategy-type",$.a),w.a.set("campaignui/feature/bidding-strategy/view/setting",W.default),w.a.set("campaignui/feature/budget/view/budget-panel",U.default),w.a.set("campaignui/feature/ad-schedule/view/index",J.default),w.a.set("component/state/index",te.a),w.a.set("component/http/channel/odata",ae.a),w.a.set("component/searchbox/view/searchbox",oe.a),w.a.set("component/github/projection-grid",le.a),w.a.set("component/bingads-grid/shared/column",ce.bingadsGridColumn),w.a.set("campaignui/feature/base-targets/viewmodel/targetConstants",De.a),w.a.set("campaignui/feature/base-targets/view/baseUpdate",Ne.default),w.a.set("campaignui/feature/base-targets/viewmodel/targetTypes",Re.default),w.a.set("campaignui/feature/bidding-strategy/view/setting",W.default),w.a.set("audienceCampaignPageContext",{CurrentAccount:ue.a.CurrentAccount,CurrentCustomerId:ue.a.CurrentCustomer.Id,isFilterCriterionLevelAdGroup:ue.a.Permissions.isFilterCriterionLevelAdGroup}),w.a.set("Constants",fe.a),w.a.set("campaignui/feature/campaign-create-advanced/view/success-dialog",pe.default),w.a.set("component/statemanager/campaignStateManager",he.a),w.a.set("campaignui/feature/adgroup-create-advanced/view/copy-adgroup-settings",Z.a),w.a.set("campaignui/feature/audience/association/view/aim-component-view",ve.a),w.a.set("campaignui/feature/base-targets/util/criterionLoader",Y),w.a.set("component/upgraded-url/view/advancedSettingsUrlOptions",Ce.a),w.a.set("campaignui/feature/advanced-settings/template/url-options",Se.a),w.a.set("campaignui/feature/advanced-settings/view/ad-rotation",xe.a),w.a.set("campaignui/feature/advanced-settings/util/exclusion-repository",Ae.a),w.a.set("campaignui/feature/advanced-settings/view/base-exclusion",ke.a),w.a.set("component/edm-campaign/index",Te.default),w.a.set("SummaryDataContextManager",_e),w.a.set("campaignui/feature/instrumentation/index",Pe.default),w.a.set("component/toggle/view/index",Me.a),w.a.set("component/event-dispatcher/index",je.default),w.a.set("component/upgraded-url/service/testUurl",Le),w.a.set("PageContext",ue.a),w.a.set("component/ko-schema/index",Ve),w.a.set("component/humanize/decimal",Be),w.a.set("crud-campaign/view/copy-campaign-settings",Fe.default),w.a.set("campaignui/feature/adextension/actionlink/view/language-adapter",Ue.a),w.a.set("campaignui/feature/adextension/actionlink/view/action-type-adapter",Ge.a)},hIFU:function(e,t,i){var n,a;n=[i("7XbR"),i("UT4o"),i("Q5Xd"),i("5C8L"),i("UgQD"),i("AQBV"),i("Kn9t"),i("Q3lO"),i("BPWY"),i("ZhOl")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c){"use strict";var d=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),u=function(o){this.shouldShowCashbackSettings=o.shouldShowCashbackSettings,this.isExperiment=o.isExperiment||function(){return!1},this.isDisclaimerAdsEnabled=o.isDisclaimerAdsEnabled||function(){return!1},this.isMixedDSACampaignRecommendation=o.isMixedDSACampaignRecommendation,this.isMixedDSACampaignCreate=e.computed(function(){var e=s.default(),i=t.result(r.get("Permissions"),"IsDSAMixedModeCampaignEnabled",!1);return("search"===e||"search"===o.campaignType)&&i&&!this.isExperiment()&&!this.isDisclaimerAdsEnabled()}.bind(this)),this.isAudienceCampaignCreate=e.computed(function(){var e=s.default();return(!t.isString(e)||"audience"===e)&&("audience"===e||"audience"===o.campaignType)}),this.campaignProps=["Name","TimeZone"],n.properties(this,i.Campaign,this.campaignProps,t.defaults(o,{TimeZone:o.TimeZone||a.getAccountTimeZone()})),"signup-creation-workflow"===o.scenario&&this.Name(d.getString("Campaigns_SearchCampaign")+" 1"),this.Id=e.observable(o.Id),this.languageError=e.observable(""),this.timeZoneText=d.get("TimeZone_"+this.TimeZone()).replace("{0}{1}",""),this.isAfterSave=e.computed(function(){return!t.isUndefined(this.Id())}.bind(this)),this.showTimeZoneText=e.computed(function(){return"campaign-settings"===o.scenario}),this.hasChanges=e.observable(!1),this.enableMixedModeDSASettings=e.observable(!0),this.isMixedModeDSASettingsChecked=e.observable(!1)};return u.prototype.getValues=function(){return{Name:this.Name(),TimeZone:this.TimeZone()}},u}.apply(t,n))||(e.exports=a)},hkGT:function(e,t,i){"use strict";i.r(t),i.d(t,"getTrafficEstimationOp",function(){return l}),i.d(t,"getDailyBudgetAmount",function(){return c});var n=i("UT4o"),a=i.n(n),r=i("+PqR"),o=i.n(r),s=i("G9ZQ");function l(e,t,i){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[190],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];n=a.a.isArray(e)?a.a.map(e,function(e){return{AdGroupName:e.Name,KeywordTrafficEstimateParameters:a.a.map(e.Keywords,function(e){return{MatchType:e.MatchType,Text:e.Text}}),MaxCPC:o.a.fromLocalToFloat(e.Bid)}}):[{AdGroupName:e.Name,KeywordTrafficEstimateParameters:a.a.map(e.Keywords,function(e){return{MatchType:e.MatchType,Text:e.Text}}),MaxCPC:o.a.fromLocalToFloat(t)}];var c=a.a.chain(r).compact().map(function(e){return{"@odata.type":"#Model.TrafficEstimate.LocationTargeting",LocationId:e}}).value();if(!a.a.isEmpty(l)){var d=a.a.contains(l,"All")?s.trafficEstimationSupportedLanguages:a.a.intersection(l,s.trafficEstimationSupportedLanguages);a.a.each(d,function(e){c.push({"@odata.type":"#Model.TrafficEstimate.LanguageTargeting",Language:e})})}return{data:{CampaignTrafficEstimate:{AdGroupTrafficEstimateParameters:n,Budget:o.a.fromLocalToFloat(i),Targetings:c}},path:"AdInsight/V2"}}function c(e){return"Monthly"===e.Type?e.Amount/30:parseFloat(e.Amount)}},hmuE:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d,u,p,g){a.collapsibleUrl=t=function(e,a,r){this&&this.block,this&&this.attributes;var o=".result-"+e+"-"+l,c="result-"+e,d="result-"+e+" result-"+e+"-"+l;a&&a.length>40?(i=i+"<div"+n.attr("class",n.classes(["collapse","in","uurl-no-transition",d],[!1,!1,!1,!0]),!1,!0)+' aria-expanded="true"><span class="uurl-url">'+n.escape(null==(t=a.substr(0,40)+" ...")?"":t)+'</span><a class="uurl-url-toggle" data-toggle="collapse"'+n.attr("data-target",o,!0,!0)+">"+n.escape(null==(t=s.get("UURLTestTool_Url_Expand_Button"))?"":t)+"</a>",r&&(i=i+'<span class="uurl-level">'+n.escape(null==(t=r)?"":t)+"</span>"),i=i+"</div><div"+n.attr("class",n.classes(["collapse","uurl-no-transition",d],[!1,!1,!0]),!1,!0)+' aria-expanded="false"><span class="uurl-url">'+n.escape(null==(t=a)?"":t)+'</span><a class="uurl-url-toggle" data-toggle="collapse"'+n.attr("data-target",o,!0,!0)+">"+n.escape(null==(t=s.get("UURLTestTool_Url_Collapse_Button"))?"":t)+"</a>",r&&(i=i+'<span class="uurl-level">'+n.escape(null==(t=r)?"":t)+"</span>"),i+="</div>"):(i=i+"<span"+n.attr("class",n.classes(["uurl-url",c],[!1,!0]),!1,!0)+">"+n.escape(null==(t=a)?"":t)+"</span>",r&&(i=i+'<span class="uurl-level">'+n.escape(null==(t=r)?"":t)+"</span>"))},d&&(i+='<dl><div class="uurl-result-section">',i=(i+=0==u?'<span class="status-icon"><div class="glyph-status-ok page-found-icon"></div></span>':'<span class="status-icon"><div class="status_warning"></div></span>')+'<strong class="result-string">'+n.escape(null==(t=d+"  ")?"":t)+'</strong><a class="HelpTopic" query="help:app54560" href="javascript:void(0);">'+n.escape(null==(t=s.get("LearnMore"))?"":t)+"</a><div>",c&&c.Value&&2==u&&a.collapsibleUrl("landingUrl",c.Value),i+="</div></div>",p&&p.Value&&(i=i+'<div class="uurl-result-section"><dt>'+n.escape(null==(t=s.get("UURLTestTool_Title_ServingURL"))?"":t)+'</dt><a class="uurl-url result-servingUrl"'+n.attr("href",p.Value,!0,!0)+' target="_blank">'+n.escape(null==(t=p.Value)?"":t)+"</a></div>"),i+="</dl>"),g&&g.Value&&(i=i+'<div class="uurl-result-section"><dt>'+n.escape(null==(t=s.get("UURLTestTool_Title_TrackingTemplate"))?"":t)+"</dt>",a.collapsibleUrl("trackingTemplate",g.Value,g.Level),i+="</div>"),o&&o.Value&&(i=i+'<div class="uurl-result-section"><dt>'+n.escape(null==(t=s.get("UURLTestTool_Title_FinalURLSuffix"))?"":t)+"</dt>",a.collapsibleUrl("finalUrlSuffix",o.Value,o.Level),i+="</div>"),r&&r.Value&&(i=i+'<div class="uurl-result-section"><dt>'+n.escape(null==(t=s.get("UURLTestTool_Title_FinalURL"))?"":t)+"</dt>",a.collapsibleUrl("finalUrl",r.Value,r.Level),i+="</div>"),e&&0!=e.length&&(i=i+'<div class="uurl-result-section result-attributes"><dt>'+n.escape(null==(t=s.get("UURLTestTool_Title_AttributeUsed"))?"":t)+"</dt>",function(){var r=e;if("number"==typeof r.length)for(var o=0,s=r.length;o<s;o++){var l=r[o];0==o&&-1!=l.Key.indexOf("lpurl")?(i=i+'<span class="uurl-url result-attribute">'+n.escape(null==(t=l.Key+": ")?"":t),a.collapsibleUrl("lpUrl",l.Value,l.Level),i+="</span>"):(i=i+'<dd class="uurl-url result-attribute">'+n.escape(null==(t=l.Key+": "+l.Value)?"":t),l.Level&&(i=i+'<span class="uurl-level">'+n.escape(null==(t=l.Level)?"":t)+"</span>"),i+="</dd>")}else for(var o in s=0,r)s++,l=r[o],0==o&&-1!=l.Key.indexOf("lpurl")?(i=i+'<span class="uurl-url result-attribute">'+n.escape(null==(t=l.Key+": ")?"":t),a.collapsibleUrl("lpUrl",l.Value,l.Level),i+="</span>"):(i=i+'<dd class="uurl-url result-attribute">'+n.escape(null==(t=l.Key+": "+l.Value)?"":t),l.Level&&(i=i+'<span class="uurl-level">'+n.escape(null==(t=l.Level)?"":t)+"</span>"),i+="</dd>")}.call(this),i+="</div>"),i=i+'<div class="uurl-result-section"><span class="status-icon"><div class="glyph-info"></div></span><dt>'+n.escape(null==(t=s.get("UURLTestTool_Note_Title"))?"":t)+"</dt><dd>"+n.escape(null==(t=s.get("UURLTestTool_Note"))?"":t)+'<a class="HelpTopic" query="help:app54543" href="javascript:void(0);">'+n.escape(null==(t=s.get("LearnMore"))?"":t)+"</a></dd></div>"}.call(this,"attributes"in r?r.attributes:"undefined"!==typeof attributes?attributes:void 0,"finalUrl"in r?r.finalUrl:"undefined"!==typeof finalUrl?finalUrl:void 0,"finalUrlSuffix"in r?r.finalUrlSuffix:"undefined"!==typeof finalUrlSuffix?finalUrlSuffix:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"index"in r?r.index:"undefined"!==typeof index?index:void 0,"landingUrl"in r?r.landingUrl:"undefined"!==typeof landingUrl?landingUrl:void 0,"resultString"in r?r.resultString:"undefined"!==typeof resultString?resultString:void 0,"resultType"in r?r.resultType:"undefined"!==typeof resultType?resultType:void 0,"servingUrl"in r?r.servingUrl:"undefined"!==typeof servingUrl?servingUrl:void 0,"trackingTemplate"in r?r.trackingTemplate:"undefined"!==typeof trackingTemplate?trackingTemplate:void 0),i}},htFP:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){var a=e.i18n;i=i+'<div class="summarypage-bifreshtime">'+n.escape(null==(t=a.getString("BITimeStampNotes_Label"))?"":t)+'<a class="HelpTopic" query="ext54480" href="javascript:void(0);">'+n.escape(null==(t=a.getString("Learn_more_link_text"))?"":t)+'</a></div><div class="summarypage-bifreshtime">'+n.escape(null==(t=a.getString("MRCAccredited_Label"))?"":t)+n.escape(null==(t=e.timeZoneHint)?"":t)+'<a class="HelpTopic" query="ext54483" href="javascript:void(0);">'+n.escape(null==(t=a.getString("Learn_more_link_text"))?"":t)+"</a></div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0),i}},"i/ol":function(e,t,i){var n,a;n=[i("UT4o"),i("ERkP"),i("aWzz"),i("O94r"),i("G/dN"),i("/H1B"),i("eiR/")],void 0===(a=function(e,t,i,n,a,r,o){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=427)}({3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},427:function(e,t,i){e.exports=i(428)},428:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"UrlEditor",{enumerable:!0,get:function(){return n.UrlEditor}}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return a.parseUrl}}),Object.defineProperty(t,"ValidatedUrlEditorLite",{enumerable:!0,get:function(){return r.ValidatedUrlEditorLite}}),Object.defineProperty(t,"ValidatedUrlEditor",{enumerable:!0,get:function(){return r.ValidatedUrlEditor}}),Object.defineProperty(t,"validateUrl",{enumerable:!0,get:function(){return o.validateUrl}});var n=i(429),a=i(431),r=i(432),o=i(434)},429:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlEditor=void 0;var n=c(i(3)),a=c(i(5)),r=c(i(4)),o=c(i(6)),s=i(430),l=i(431);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(e){function t(e){var i,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=p(t).call(this,e),i=!r||"object"!==d(r)&&"function"!==typeof r?g(a):r,m(g(i),"onChange",function(e){var t=i.state.selectProtocol,a=e.target.value.trim(),r=a?i.addSelectProtocol({protocol:t,url:a}):"";i.props.onChange(n.default.defaults({target:n.default.defaults({value:r},e.target)},e)),i.setState({url:a})}),m(g(i),"addSelectProtocol",function(e){var t=e.protocol,a=e.url,r=n.default.findWhere(i.props.protocols,{value:t}).text;return"".concat(r).concat(a)}),m(g(i),"handleProtocolChange",function(e){e.stopPropagation();var t=e.target.value,a=i.state.url.trim();if(a){var r=i.addSelectProtocol({protocol:t,url:a});i.props.onChange(n.default.defaults({target:n.default.defaults({value:r},e.target)},e))}i.setState({selectProtocol:t})});var o=(0,l.parseUrl)(n.default.size(e.value)>0?e.value[0]:""),s=o.protocol,c=o.url,u=i.props.selectProtocol||s||n.default.first(e.protocols).value;return i.state={selectProtocol:u,url:c||""},i}var i,a,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.default.Component),i=t,(a=[{key:"render",value:function(){return r.default.createElement("div",{className:"url-editor"},r.default.createElement("div",{className:"url-editor-form"},r.default.createElement("select",{value:this.state.selectProtocol,className:(0,o.default)("form-control"),onChange:this.handleProtocolChange},this.props.protocols.map(function(e){return r.default.createElement("option",{key:n.default.uniqueId("select-before-option-"),value:e.value},e.text)})),r.default.createElement(s.TextInput,{onChange:this.onChange,value:this.state.url,className:(0,o.default)("form-control","text-value")})))}}])&&u(i.prototype,a),c&&u(i,c),t}();t.UrlEditor=f,m(f,"propTypes",{value:a.default.arrayOf(a.default.string),onChange:a.default.func.isRequired,protocols:a.default.arrayOf(a.default.shape({value:a.default.string.isRequired,text:a.default.string.isRequired})),selectProtocol:a.default.string}),m(f,"defaultProps",{value:[],protocols:[{value:"https",text:"https://"},{value:"http",text:"http://"}],selectProtocol:null})},430:function(e,t){e.exports=a},431:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=void 0;t.parseUrl=function(e){var t=new RegExp("^(?:\\s*(?:(\\S+):\\/\\/)?(?:(.+))?)?","i").exec(e);return{protocol:t&&t[1],url:t&&t[2]}}},432:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidatedUrlEditor=t.ValidatedUrlEditorLite=t.DefaultAdapter=void 0;var n=i(433),a=i(429),r=(0,n.AdapterFactory)({convertEventToValue:function(e){return e.target.value?[e.target.value]:[]}});t.DefaultAdapter=r;var o=(0,n.withValidation)(a.UrlEditor,r);t.ValidatedUrlEditorLite=o;var s=(0,n.withError)(o);t.ValidatedUrlEditor=s},433:function(e,t){e.exports=r},434:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUrl=void 0;var n=i(435);t.validateUrl=function(e){return function(t){return(0,n.hasScheme)(t)?[]:[e.getString("Validation_Url_InvalidUrlScheme")]}}},435:function(e,t){e.exports=o},5:function(e,t){e.exports=i},6:function(e,t){e.exports=n}})}.apply(t,n))||(e.exports=a)},"i/zg":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s){i=i+'<span class="grid-cell-text"><a class="scope-navigator"'+n.attr("href",o,!0,!0)+n.attr("data-campaignid",e,!0,!0)+">"+n.escape(null==(t=s)?"":t)+"</a>",a&&(i=i+'<div class="iconba iconba-CustomerInsightsShape inline-recommendation-grid-icon clickable inline-location-target-recommendation" style="margin-left:5px;font-size:10px;"'+n.attr("title",r.getString("InlineOpportunity_Bubble_TooltipText"),!0,!0)+n.attr("aria-label",r.getString("InlineOpportunity_Bubble_TooltipText"),!0,!0)+' tabindex="0" role="button"></div>'),i+="</span>"}.call(this,"campaignId"in a?a.campaignId:"undefined"!==typeof campaignId?campaignId:void 0,"hasLocationRecommendation"in a?a.hasLocationRecommendation:"undefined"!==typeof hasLocationRecommendation?hasLocationRecommendation:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0),i}},i2rx:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="audience-campaign-creation-wizard-container"><div class="audience-campaign-creation-wizard"></div></div>'}},i9nW:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){i=i+'<form class="form-inline pagination-control"><div class="pager" data-bind="visible: pageCount() &gt; 1"><button class="btn btn-default btn-flat nav-button prev" data-bind="click: decPageNumber, enable: pageNumber() &gt; 0" type="button"'+n.attr("aria-label",r,!0,!0)+'><div class="glyphicon glyphicon-triangle-left"></div></button><div class="text"><span>'+n.escape(null==(t=a)?"":t)+'</span></div><input class="form-control page-number-input" data-bind="value: pageNumberText, attr: { size: pageNumberSize, maxlength: pageNumberSize, disabled: !enableRandomPage() }" type="text"'+n.attr("aria-label",a,!0,!0)+'><div class="text"><span>'+n.escape(null==(t=o)?"":t)+'</span><span>&nbsp;</span><span data-bind="text: pageCount"></span></div><button class="btn btn-default btn-flat nav-button next" data-bind="click: incPageNumber, enable: pageNumber() &lt; pageCount() - 1" type="button"'+n.attr("aria-label",e,!0,!0)+'><div class="glyphicon glyphicon-triangle-right"></div></button></div></form>'}.call(this,"nextPageText"in a?a.nextPageText:"undefined"!==typeof nextPageText?nextPageText:void 0,"pageNumberLabelText"in a?a.pageNumberLabelText:"undefined"!==typeof pageNumberLabelText?pageNumberLabelText:void 0,"previousPageText"in a?a.previousPageText:"undefined"!==typeof previousPageText?previousPageText:void 0,"totalPageCountText"in a?a.totalPageCountText:"undefined"!==typeof totalPageCountText?totalPageCountText:void 0),i}},iSs6:function(e,t,i){var n,a;n=[i("UT4o"),i("3C6b")],void 0===(a=function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=84)}({4:function(t,i){t.exports=e},68:function(e,i){e.exports=t},84:function(e,t,i){e.exports=i(85)},85:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clientSidePaginationPlugin",{enumerable:!0,get:function(){return n.clientSidePaginationPlugin}});var n=i(86)},86:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientSidePaginationPlugin=void 0;var n,a=(n=i(4))&&n.__esModule?n:{default:n};var r=(0,i(68).defineGridPlugin)("clientSidePagination",["config","gridView"],function(e,t){var i=t.dataSource,n=i.query;i.query=function(e){return n.call(i,a.default.omit(e,"skip","take")).then(function(t){var i=a.default.result(e,"skip",0),n=a.default.result(e,"take",1/0)+i;return a.default.defaults({totalCount:t.items.length,items:t.items.slice(i,n)},t)})}});t.clientSidePaginationPlugin=r}})}.apply(t,n))||(e.exports=a)},iYrX:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d,u,p){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},i+='<div class="form-horizontal shopping-settings__container"><div class="form-group">',a.koErrors(),i=i+'</div>\x3c!-- ko if: showPriority()--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label id="ShoppingCampaignPriority">'+n.escape(null==(t=o.get("ShoppingCampaign_Priority"))?"":t)+"</label>",a.popupHelp("pop_BA_BSC_CampPri",o.get("ShoppingCampaign_Priority"),o),i=i+'</h5><div class="col-sm-4" role="radiogroup" aria-labelledby="ShoppingCampaignPriority"><div class="radio"><label><input type="radio" name="campaignPriority" value="Low" data-bind="checked: Priority">'+n.escape(null==(t=o.get("ShoppingCampaign_Priority_Low"))?"":t)+'</label></div><div class="radio"><label><input type="radio" name="campaignPriority" value="Medium" data-bind="checked: Priority">'+n.escape(null==(t=o.get("ShoppingCampaign_Priority_Medium"))?"":t)+'</label></div><div class="radio"><label><input type="radio" name="campaignPriority" value="High" data-bind="checked: Priority">'+n.escape(null==(t=o.get("ShoppingCampaign_Priority_High"))?"":t)+'</label></div></div></div>\x3c!-- /ko--\x3e<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=c?o.get("DynamicFeedCampaign_Catelog"):o.get("ShoppingCampaign_BingShopping_Accounts"))?"":t)+"</label>",p?a.popupHelp("pop_BA_MSCBrands_Store",o.get("ShoppingCampaign_BingShopping_Accounts"),o):u?a.popupHelp("pop_BA_MMA_Store",o.get("ShoppingCampaign_BingShopping_Accounts"),o):a.popupHelp("pop_BA_BSC_CampaignName",o.get("ShoppingCampaign_BingShopping_Accounts"),o),i+="</h5>",r||(c&&(i=i+'<p class="col-sm-12">'+n.escape(null==(t=o.get("DynamicFeedCampaign_Catalog_Selection_Info_Enabled"))?"":t)+"</p>"),i=i+'<div class="col-sm-4 category_container"><select class="store form-control" data-bind="value: ProviderId, disable: disableStoreSelection, options: storeOptions, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;"'+n.attr("aria-label",o.get("ShoppingCampaign_BingShopping_Accounts"),!0,!0)+"></select></div>"),r&&(c&&(i=i+'<p class="col-sm-12">'+n.escape(null==(t=o.get("DynamicFeedCampaign_Catalog_Selection_Info_Disabled"))?"":t)+"</p>"),i+='<div class="col-sm-4 form-control-static"><span class="store-text" data-bind="text: storeText"></span></div><div class="draft-store-alert-container"></div>'),i+="</div>",p&&(i=i+'<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=o.get("ShoppingCampaign_Sponsored_ExcludedStores_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_BSC_ExcludedStores",o.get("ShoppingCampaign_Sponsored_ExcludedStores_Label"),o),i+='</h5><div class="col-sm-4"><div class="excluded-store-controls"></div></div></div>'),"ShoppingSmartAds"!==e&&(i=i+'<div class="form-group" data-bind="visible: hasValidStore"><h5 class="col-sm-2 control-label"><label id="ShoppingCampaignProducts">'+n.escape(null==(t=o.get("ShoppingCampaign_Products"))?"":t)+'</label></h5><div class="col-sm-4" role="radiogroup" aria-labelledby="ShoppingCampaignProducts"><div class="radio"><label><input type="radio" name="productScope" data-bind="value: scope.All, checked: productScope.editing">'+n.escape(null==(t=o.get("ShoppingCampaign_AllProducts"))?"":t)+'</label></div><div class="radio filteredProducts"><label><input type="radio" name="productScope" data-bind="value: scope.Filtered, checked: productScope.editing">'+n.escape(null==(t=o.get("ShoppingCampaign_SpecificProducts"))?"":t)+"</label>",u?a.popupHelp("pop_BA_MMA_FilteredProducts",o.get("ShoppingCampaign_SpecificProducts"),o):a.popupHelp("pop_BA_ProdAdAddFilter",o.get("ShoppingCampaign_SpecificProducts"),o),i+="</div></div></div>"),i=i+'<div class="form-group"><div class="col-sm-6 col-sm-offset-2"><div class="product-group__container" data-bind="visible: productScope() === &quot;Filtered&quot;"></div>\x3c!-- ko if: showWarning--\x3e<div class="setting-inline-warning alert-warning"><div class="alert-image"></div><span>'+n.escape(null==(t=o.get("ProductOfferCountWarningInSetting"))?"":t)+"</span></div>\x3c!-- /ko--\x3e</div></div>",s||(i=i+'<div class="form-group" data-bind="visible: hasValidStore"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=o.get("ShoppingCampaign_Sales_Country"))?"":t)+"</label>",u&&a.popupHelp("pop_BA_MMA_RegionOfSale",o.get("ShoppingCampaign_Sales_Country"),o),i+="</h5>",r||(i=i+'<div class="col-sm-4"><select class="countryChange form-control" data-bind="value: SalesCountry, options: salesCountries, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;"'+n.attr("aria-label",o.get("ShoppingCampaign_Sales_Country"),!0,!0)+"></select></div>"),r&&(i+='<div class="col-sm-4 form-control-static"><span class="country-text" data-bind="text: countryText"></span></div>'),i+="</div>","ShoppingSmartAds"===e||u||(i+='<div class="bid-settings" data-bind="visible: showBid"></div>')),!l||s||p||"ShoppingSmartAds"===e||u||(i=i+'<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=o.get("ShoppingCampaign_CampaignSubType_Label"))?"":t)+'</label></h5><div class="col-sm-4 form-control-static"><span class="campaign_subtype" data-bind="text: campaignSubTypeText"></span></div></div>'),!d||s||p||u||(i=i+'<div class="form-group"><h5 class="col-sm-2 control-label"><label>'+n.escape(null==(t=o.get("ShoppingCampaign_LocalInventoryAds_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_BSC_Local",o.get("ShoppingCampaign_LocalInventoryAds_Label"),o),i=i+'</h5><div class="col-sm-4"><div class="checkbox"><label><input class="enable-lia" type="checkbox" data-bind="checked: LocalInventoryAdsEnabled, attr: { \'aria-checked\': LocalInventoryAdsEnabled() ? \'true\' : \'false\' }">'+n.escape(null==(t=o.get("ShoppingCampaign_Enable_LocalInventoryAds"))?"":t)+"</label></div></div></div>"),i+="</div>"}.call(this,"campaignSubType"in r?r.campaignSubType:"undefined"!==typeof campaignSubType?campaignSubType:void 0,"editMode"in r?r.editMode:"undefined"!==typeof editMode?editMode:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isAudienceCampaign"in r?r.isAudienceCampaign:"undefined"!==typeof isAudienceCampaign?isAudienceCampaign:void 0,"isCPGForBSCEnabled"in r?r.isCPGForBSCEnabled:"undefined"!==typeof isCPGForBSCEnabled?isCPGForBSCEnabled:void 0,"isEnabledDynamicFeedCampaign"in r?r.isEnabledDynamicFeedCampaign:"undefined"!==typeof isEnabledDynamicFeedCampaign?isEnabledDynamicFeedCampaign:void 0,"isLocalInventoryAdsEnabled"in r?r.isLocalInventoryAdsEnabled:"undefined"!==typeof isLocalInventoryAdsEnabled?isLocalInventoryAdsEnabled:void 0,"isSearchCampaign"in r?r.isSearchCampaign:"undefined"!==typeof isSearchCampaign?isSearchCampaign:void 0,"isSponsoredCampaign"in r?r.isSponsoredCampaign:"undefined"!==typeof isSponsoredCampaign?isSponsoredCampaign:void 0),i}},ikjY:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.id,o=a.property;i=i+'<select class="form-control input" role="listbox"'+n.attr("id",r,!0,!0)+n.attr("aria-labelledby",r+"-Label",!0,!0)+n.attr("aria-describedby",r+"-Validation",!0,!0)+n.attr("data-bind","value: "+o+".select",!0,!0)+">",function(){var r=a.values;if("number"==typeof r.length)for(var o=0,s=r.length;o<s;o++){var l=r[o];i=i+'<option role="option"'+n.attr("value",e(l),!0,!0)+">"+n.escape(null==(t=a.valueMessages[o])?"":t)+"</option>"}else for(var o in s=0,r)s++,l=r[o],i=i+'<option role="option"'+n.attr("value",e(l),!0,!0)+">"+n.escape(null==(t=a.valueMessages[o])?"":t)+"</option>"}.call(this),i+="</select>"}.call(this,"String"in a?a.String:"undefined"!==typeof String?String:void 0,"field"in a?a.field:"undefined"!==typeof field?field:void 0),i}},iros:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="bid-strategy-panel form-horizontal"><label class="radio fixed"><input'+n.attrs(n.merge([{class:"bid-strategy-radio",type:"radio",role:"radio",name:n.escape(a.cid),value:"fixed",checked:n.escape(e.bidStrategy===a.strategy.fixed)},a.disabledAttr]),!0)+'><span class="type-normal cursor-pointer">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Strategy_Option_Fixed"))?"":t)+"</span><div"+n.attr("class",n.classes(["fixed"===e.bidStrategy?"show":"hide"],[!0]),!1,!0)+'><div data-ref="fixed-bid-input"></div></div></label><label class="radio percentage"><input'+n.attrs(n.merge([{class:"bid-strategy-radio",type:"radio",role:"radio",name:n.escape(a.cid),value:"percentage",checked:n.escape(e.bidStrategy===a.strategy.percentage)},a.disabledAttr]),!0)+'><span class="type-normal cursor-pointer">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Strategy_Option_Percentage"))?"":t)+"</span><div"+n.attr("class",n.classes(["percentage"===e.bidStrategy?"show":"hide"],[!0]),!1,!0)+'><div data-ref="percentage-bid-input"></div></div></label>',a.isPayPerStayEnabled&&(i=i+'<label class="radio payperstay"><input'+n.attrs(n.merge([{class:"bid-strategy-radio",type:"radio",role:"radio",name:n.escape(a.cid),value:"payperstay",checked:n.escape(e.bidStrategy===a.strategy.payperstay)},a.disabledPPSAttr]),!0)+'><span class="type-normal cursor-pointer">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Strategy_Option_PPS"))?"":t)+"</span><div"+n.attr("class",n.classes(["payperstay"===e.bidStrategy?"show":"hide"],[!0]),!1,!0)+'><div data-ref="payperstay-bid-input"></div></div></label>'),a.isAmountRequired||(i=i+'<label class="radio empty"><input class="bid-strategy-radio" type="radio" role="radio"'+n.attr("name",a.cid,!0,!0)+' value="empty"'+n.attr("checked",e.bidStrategy===a.strategy.empty,!0,!0)+'><span class="type-normal cursor-pointer">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Setup_Budget_Strategy_Option_Empty"))?"":t)+"</span></label>"),i+="</div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},j1z3:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="crud-audience-campaign form-horizontal campaign-settings__container"><div class="video-alert"></div><div class="adimpression-alert"></div><div class="description">'+n.escape(null==(t=e.getString("Audience_Campaign_Crud_Campaign_Description"))?"":t)+'</div><div class="form-group"><div class="col-sm-2 control-label"><label class="campaign-name-label" id="campaignNameLabel">'+n.escape(null==(t=e.getString("Audience_Campaign_Campaign_Name"))?"":t)+'</label></div><div class="col-sm-4"><div class="name-input-control-container"></div><div class="remaining-chars-hint-container"></div></div></div><div class="form-group"><div class="col-sm-4"><div class="copy-campaign-settings-container"></div></div></div><div class="form-group"><div class="col-sm-2 control-label"><label>'+n.escape(null==(t=e.getString("Audience_Campaign_Budget_Label"))?"":t)+'</label></div><div class="budget col-sm-8"></div></div><div class="shopping-settings-container" style="margin-bottom:10px;"></div><div class="cashback-settings-container"></div><div class="impression-tracking-url-options-container"></div><div class="errors-container"></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},jHK3:function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("syDw"),c=i.n(l),d=i("AXVV"),u=i("E7/f"),p=i("7XbR"),g=i.n(p),h=i("UT4o"),m=i.n(h),f=i("z/9Z"),v=i.n(f),b=i("FF1+"),y=i.n(b),S=i("ExPG"),w=i.n(S),C=i("xXwY"),x=i.n(C),k=i("1tDs"),A=i.n(k),T=i("KOFP"),_=i.n(T),E=i("6mWt"),I=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),O=window.globalLegacyI18n.get("component/i18n/loader!legacy/global");function P(){this.trigger("close")}function M(){E.default.setAtUserLevel({Name:"WebApp.CampaignUI.successDialog",Data:{doNotShowAgain:this.viewModel.doNotShowAgain()}})}var j=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.aid,i=void 0===t?null:t,n=e.cid,a=void 0===n?null:n,r=e.uid,o=void 0===r?null:r,s=e.isPendingPaymentMethod,l=void 0!==s&&s,c=e.isAccountOnHold,d=void 0!==c&&c,u=e.accountPausedReason,p=void 0===u?_.a.enums.accountInactiveReason.notSet:u;this.isPendingPaymentMethod=l,this.isAccountOnHold=d,this.accountPausedReason=p,this.aid=i,this.cid=a,this.uid=o,this.viewModel={doNotShowAgain:g.a.observable(!1)}}},{key:"render",value:function(){if(this.accountPausedReason){var e,t,i;switch(this.accountPausedReason){case _.a.enums.accountInactiveReason.pausedDueToSystemIssue:e="SystemIssue",t="ContactSupport",i=new v.a("http://go.microsoft.com/fwlink/?LinkId=258669").toString();break;case _.a.enums.accountInactiveReason.pausedZeroBalance:e="ZeroBalance",t="AddFunds",i=new v.a("/cc/Payment/Prepay").setQuery({aid:this.aid,cid:this.cid,uid:this.uid}).toString();break;case _.a.enums.accountInactiveReason.pausedNoValidiO:e="NoValidIO",t="CreateInsertionOrder",i=new v.a("/cc/InsertionOrder").setQuery({aid:this.aid,cid:this.cid,uid:this.uid}).toString()}this.$el.html(A()({_:m.a,i18n:I,i18nGlobal:O,reason:e,action:t,link:i}))}else if(this.isPendingPaymentMethod){var n=new v.a("/cc/PaymentMethods").setQuery({aid:this.aid,cid:this.cid,uid:this.uid,showTaxForm:!1}).toString();this.$el.html(w()({_:m.a,i18n:I,i18nGlobal:O,hrefAddPaymentMethod:n}))}else if(this.isAccountOnHold){var a=new v.a("/cc/CreditHold/Dashboard").setQuery({aid:this.aid,cid:this.cid,uid:this.uid}).toString();this.$el.html(x()({_:m.a,i18n:I,i18nGlobal:O,hrefFixIt:a}))}else this.$el.html(y()({_:m.a,i18n:I,i18nGlobal:O}));return g.a.applyBindings(this.viewModel,this.el),this}},{key:"events",get:function(){return{"click .got-it":P,"click .dont-show":M}}}]),t}(c.a.View);i.d(t,"default",function(){return L});var L=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.aid,n=e.cid,a=e.uid,r=e.isPendingPaymentMethod,o=e.isAccountOnHold,s=e.accountPausedReason,l=e.lockRegionAriaLabel,c=void 0===l?"":l;this.dialogView=new d.Dialog({className:"campaign-creation-success-dialog"}),this.successView=new j({aid:i,cid:n,uid:a,isPendingPaymentMethod:r,isAccountOnHold:o,accountPausedReason:s}),this.dialogView.setContent(this.successView);var p=Object(u.focusLockInstanceDecorator)(this.dialogView,{onExit:function(){return t.dialogView.remove()},lockRegionAriaLabel:c,focusFirstItemOnMount:!0},{managed:!0});this.focusLockSuccessPopupEditor=new p,this.successView.on("close",function(){t.dialogView.remove(),t.focusLockSuccessPopupEditor.remove(),t.focusLockSuccessPopupEditor=null})}},{key:"show",value:function(){var e=this;return this.dialogView.render(),document.body.appendChild(this.focusLockSuccessPopupEditor.render().el),this.dialogView.$(".modal").modal({backdrop:this.dialogView.backdrop,keyboard:this.dialogView.keyboard}),this.dialogView.$(".modal").on("focus",function(){return e.dialogView.$("button.close").focus()}),this}}]),t}(c.a.View)},jIGY:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i+='<div class="length-of-stay-multipliers form-horizontal">',function(){var t=e.staySegments;if("number"==typeof t.length)for(var r=0,o=t.length;r<o;r++){var s=t[r];i=i+'<div class="length-of-stay-multiplier form-group"><div class="col-sm-11"><div'+n.attr("data-ref",s.key+"-bid-multiplier",!0,!0)+'></div></div><div class="col-sm-1 mulitplier-query-remove"><span class="glyphicon glyphicon-remove filter-query-remove__glyphicon clickable"'+n.attr("title",s.key,!0,!0)+n.attr("aria-label",a.i18n.getString("Button_Delete"),!0,!0)+' tabindex="0" role="button"></span></div></div>'}else for(var r in o=0,t)o++,s=t[r],i=i+'<div class="length-of-stay-multiplier form-group"><div class="col-sm-11"><div'+n.attr("data-ref",s.key+"-bid-multiplier",!0,!0)+'></div></div><div class="col-sm-1 mulitplier-query-remove"><span class="glyphicon glyphicon-remove filter-query-remove__glyphicon clickable"'+n.attr("title",s.key,!0,!0)+n.attr("aria-label",a.i18n.getString("Button_Delete"),!0,!0)+' tabindex="0" role="button"></span></div></div>'}.call(this),i=i+'<div class="mulitpliers-query-add form-group"><div class="col-sm-6 col-sm-offset-5 stay-nights-input"><div data-ref="stay-nights-input"></div></div><div class="col-sm-1 text-center"><a'+n.attr("class",n.classes(["add-new-query",!0===e.isUseParent?"disabled":""],[!1,!0]),!1,!0)+' href="javascript:void(0);" role="button">'+n.escape(null==(t=a.i18n.getString("Button_Add"))?"":t)+"</a></div></div></div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},jOdW:function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("+igW"),i("0LCZ"),i("6Ux2"),i("CDfN"),i("aZ1v"),i("AQBV"),i("P0Lv")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d){"use strict";var u=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");return i.View.extend({initialize:function(e){this.options=e||{},t.defaults(this.options,{urlOptionsTemplate:s,smallContainer:!1,isVisible:!0,isExpanded:!1,editMode:!0,placeholderEnabled:!1,isForVNext:!1,popupHelpKeyAdTrackTemplate:"pop_BA_NewCampaignCreate_Ad_TrackTemplate",popupHelpKeyAdParameters:"pop_BA_NewCampaignCreate_Ad_Parameters",popupHelpKeyFinalURLSuffix:"pop_BA_NewAdCreate_FinalURLSuffix",isNewUI:!1});var i=this.options.entityType?this.options.entityType.toLowerCase():"",n=c.get("Permissions")||{};"campaign"===i||"adgroup"===i||"keyword"===i||"ad"===i||"audience"===i?this.options.isFinalURLSuffixEnabled=!0:"imageadextension"!==i&&"sitelink2adextension"!==i||(this.options.isFinalURLSuffixEnabled=n.IsFinalURLSuffixPhase3Enabled),this.ko_model=new l(this.options),this.showUurlTestTool=e.showUurlTestTool,this.ko_model.showUurlTestTool=this.showUurlTestTool,this.logCustomParamsChange=t.once(function(){this.logActivity("custom parameter change")},this)},events:{"click .link.expander":"expand","click .link.expanded":"collapse","show.bs.collapse":"showSettings","hide.bs.collapse":"hideSettings","change input.custom-param__value-field, input.custom-param__key-field":"customParamsChanged"},showSettings:function(t){var i=e(t.target).data("section");"TrackingTemplate"===i&&(this.ko_model.isTrackingTemplateSettingsExpanded(!0),this.options.isNewUI&&this.$el.find(".trackingtemplate.bedded-icon-marker.spritedimagealign").addClass("expandedImage").removeClass("expanderImage")),"FinalUrlSuffix"===i&&(this.ko_model.isFinalUrlSuffixSettingsExpanded(!0),this.options.isNewUI&&this.$el.find(".finalurlsuffix.bedded-icon-marker.spritedimagealign").addClass("expandedImage").removeClass("expanderImage")),"UrlCustomParameters"===i&&(this.ko_model.isUrlCustomParametersSettingsExpanded(!0),this.options.isNewUI&&this.$el.find(".customparameter.bedded-icon-marker.spritedimagealign").addClass("expandedImage").removeClass("expanderImage"))},hideSettings:function(t){var i=e(t.target).data("section");"TrackingTemplate"===i&&(this.ko_model.isTrackingTemplateSettingsExpanded(!1),this.ko_model.trackingTemplate(this.trackingTemplate.ko_model.trackingTemplate()),this.options.isNewUI&&this.$el.find(".trackingtemplate.bedded-icon-marker.spritedimagealign").addClass("expanderImage").removeClass("expandedImage")),"FinalUrlSuffix"===i&&(this.ko_model.isFinalUrlSuffixSettingsExpanded(!1),this.ko_model.finalUrlSuffix(this.finalUrlSuffix.getFinalUrlSuffix()),this.options.isNewUI&&this.$el.find(".finalurlsuffix.bedded-icon-marker.spritedimagealign").addClass("expanderImage").removeClass("expandedImage")),"UrlCustomParameters"===i&&(this.ko_model.isUrlCustomParametersSettingsExpanded(!1),this.showCustomParamsPreview(),this.options.isNewUI&&this.$el.find(".customparameter.bedded-icon-marker.spritedimagealign").addClass("expanderImage").removeClass("expandedImage"))},logActivity:function(e){this.options.activityLogger&&this.options.activityLogger.signal(e,"url options")},customParamsChanged:function(){this.logCustomParamsChange()},render:function(){var i=e(this.options.urlOptionsTemplate({i18n:u,isVisible:this.options.isVisible,isExpanded:this.options.isExpanded,smallContainer:this.options.smallContainer,editMode:this.options.editMode,popupHelpKeyAdTrackTemplate:this.options.popupHelpKeyAdTrackTemplate,popupHelpKeyAdParameters:this.options.popupHelpKeyAdParameters,popupHelpKeyFinalURLSuffix:this.options.popupHelpKeyFinalURLSuffix,isNewUI:this.options.isNewUI})),s=i.find(".tracking-template"),l=i.find(".custom-parameters"),p=i.find(".uurl-test-tool__container");this.$el.html(i),n.applyBindings(this.ko_model,this.el),this.trackingTemplate=new a(t.extend({},this.options,{el:s})).render(),this.trackingTemplate.on("templateChanged",function(){this.logActivity("tracking template change")}.bind(this)),this.ko_model.trackingTemplate(this.trackingTemplate.ko_model.trackingTemplate());var g=c.get("Permissions")||{};if(this.customParams=new o.CustomParametersView(t.extend({},this.options,{permissions:g,i18n:u})).render(),l.html(this.customParams.$el),this.showCustomParamsPreview(),this.options.isFinalURLSuffixEnabled){var h=i.find(".final-url-suffix");this.finalUrlSuffix=new o.FinalUrlSuffixView(t.chain({}).extend(this.options,{i18n:u,showPlaceholder:!0}).omit("template").value()).render(),this.finalUrlSuffix.on("finalUrlSuffix:updated",function(){this.logActivity("final url suffix change")}.bind(this)),h.html(this.finalUrlSuffix.$el),this.ko_model.finalUrlSuffix(this.finalUrlSuffix.getFinalUrlSuffix())}return this.showUurlTestTool&&(this.urlTestTool=new r({isForVNext:this.options.isForVNext||this.options.isNewUI}),this.urlTestTool.on("testUurl",function(e,i){if("Ad"!==this.options.entityType)if(this.trackingTemplate.isValid()&&this.customParams.isValid()){var n=d.testUurl,a=d.uurlLevels;i.isInline=!1,this.options.entityType.toLowerCase()===a.Campaign.toLowerCase()?i.level=a.Campaign:this.options.entityType.toLowerCase()===a.AdGroup.toLowerCase()&&(i.level=a.AdGroup);var r=this.toObject(),o={customerId:t.result(c.get("CurrentCustomer"),"Id"),userId:t.result(c.get("CurrentUser"),"Id"),accountId:t.result(c.get("CurrentAccount"),"Id"),campaignId:t.result(c.get("CurrentCampaign"),"Id")||this.options.campaignId||0};i.level===a.Campaign?o.entityId=o.campaignid:i.level===a.AdGroup&&(o.adGroupId=t.result(c.get("CurrentAdGroup"),"Id")||this.options.adGroupId||0,o.entityId=o.adGroupId);n(e,i,r,o,{apiInLog:"advancedSettingsUrlOptions/uurlTest"})}else e.call(i,null);else this.trigger("testUurl",e,i)}.bind(this)),p.html(this.urlTestTool.render().$el)),this},showCustomParamsPreview:function(){this.ko_model.parameters(t.map(this.customParams.getValues(!0),function(e){return"{_"+e.Key+"}="+e.Value}).join("; "))},remove:function(){return n.cleanNode(this.el),this},handleApiErrors:function(e){t.isEmpty(e.TrackingUrlTemplate)||this.trackingTemplate.ko_model.trackingTemplateErrors(e.TrackingUrlTemplate),t.isEmpty(e.UrlCustomParameters)||this.customParams.viewModel.parametersError(e.UrlCustomParameters),t.isEmpty(e.FinalUrlSuffix)||this.finalUrlSuffix.viewModel.externalErrors(e.FinalUrlSuffix)},clearApiErrors:function(){this.trackingTemplate.ko_model.trackingTemplateErrors([]),this.customParams.viewModel.parametersError([]),this.options.isFinalURLSuffixEnabled&&this.finalUrlSuffix.viewModel.externalErrors([])},toObject:function(){return this.options.isFinalURLSuffixEnabled?{UrlCustomParameters:this.getUrlCustomParameters(!0),TrackingUrlTemplate:this.getTrackingTemplate(),FinalUrlSuffix:this.getFinalUrlSuffix()}:{UrlCustomParameters:this.getUrlCustomParameters(!0),TrackingUrlTemplate:this.getTrackingTemplate()}},expandSettingsWithValidateErrors:function(){this.expandSettings(!this.trackingTemplate.isValid(),!this.customParams.isValid(),this.options.isFinalURLSuffixEnabled&&!this.finalUrlSuffix.isValid())},expandSettingsWithApiErrors:function(e,t,i){this.expandSettings(e,t,i)},expandSettings:function(e,t,i){e&&this.$("#trackingTemplateSettings").collapse("show"),t&&this.$("#customParametersSettings").collapse("show"),i&&this.$("#finalUrlSuffixSettings").collapse("show")},getUrlCustomParameters:function(e){var i=[];return t.each(this.customParams.viewModel.parameters(),function(t){var n=t.key();if(n){var a={},r=t.val();void 0===r&&(r=""),r=r.replace(/\\/g,"\\\\").replace(/;/g,"\\;"),e?(a.Key=n,a.Value=r):a[n]=r,i.push(a)}}),i},getTrackingTemplate:function(){return this.trackingTemplate.ko_model.trackingTemplate()},getFinalUrlSuffix:function(){return this.finalUrlSuffix.getFinalUrlSuffix()},expand:function(){this.$el.find(".link.expander").addClass("expanded").removeClass("expander"),this.$el.find(".embedded-icon-marker").addClass("expandedImage").removeClass("expanderImage"),this.ko_model.isExpanded(!0),this.ko_model.editMode(!0),this.trackingTemplate.setEditMode(!0),this.options.isFinalURLSuffixEnabled&&this.finalUrlSuffix.setEditMode(!0),this.customParams.setEditMode(!0),this.logActivity("url options toggle: true")},collapse:function(){this.$el.find(".link.expanded").addClass("expander").removeClass("expanded"),this.$el.find(".embedded-icon-marker").removeClass("expandedImage").addClass("expanderImage"),this.trackingTemplate.setEditMode(!1),this.options.isFinalURLSuffixEnabled&&this.finalUrlSuffix.setEditMode(!1),this.customParams.setEditMode(!1),this.ko_model.editMode(!1),this.ko_model.isExpanded(!1),this.logActivity("url options toggle: false")},validate:function(){return this.isValid()},isValid:function(){return this.trackingTemplate.isValid()&&this.customParams.isValid()&&(!this.options.isFinalURLSuffixEnabled||this.finalUrlSuffix.isValid())}})}.apply(t,n))||(e.exports=a)},jep4:function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("Glrc"),i("muKe"),i("b5v3")],void 0===(a=function(e,t,i,n,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=337)}({13:function(e,t){e.exports=i},19:function(e,t){e.exports=n},337:function(e,t,i){e.exports=i(338)},338:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"InputControl",{enumerable:!0,get:function(){return n.InputControl}});var n=i(339)},339:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputControl=void 0;var n=i(19),a=i(340),r=l(i(8)),o=l(i(9)),s=l(i(341));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t,i){return(g="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=n.helpers.ensureChildView,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,h(t).apply(this,arguments))}var i,l,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n.DeterministicView),i=t,(l=[{key:"initialize",value:function(){var e,t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.entity,a=i.field,l=i.addonText,c=i.template,u=void 0===c?s.default:c,p=i.showValidation,g=void 0===p||p,h=i.readonly,m=void 0!==h&&h,f=i.hideErrorOnInit,v=void 0===f||f,b=i.focusId,y=i.ariaLabelledby,S=void 0===y?"":y;if(!(n instanceof o.default.Model))throw new Error("entity should be a backbone model");if(r.default.isEmpty(a))throw new Error("field is required");this.field=a,this.entity=n,this.addonText=l,this.customTemplate=u,this.focusId=b,this.ariaLabelledby=S,this.setState({readonly:m,showValidation:g,showError:!v,value:n.get(a)}),this.delegateEvents((d(e={},"input .".concat(a,"-value"),function(e){var i=e.target;n.set(a,i.value),t.trigger("input-changed"),t.setState({showError:!0})}),d(e,"change .".concat(a,"-value"),function(e){var i=e.target;t.setState({value:i.value})}),e))}},{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.readonly,n=e.showValidation,o=e.showError,s=e.value;return r.default.isUndefined(i)||this.model.set("readonly",i),r.default.isUndefined(n)||(this.model.set("showValidation",n),n&&f(this,"validation-error",a.ValidationErrorView,{field:this.field,errors:this.entity.errors})),r.default.isUndefined(o)||g(h(t.prototype),"getState",this).call(this).showValidation&&this.getChild("validation-error").setState({showError:o}),r.default.isUndefined(s)||(this.model.set("value",s),this.entity.set(this.field,s),this.model.get("value")===s&&this.render()),this}},{key:"getState",value:function(){return{readonly:this.model.get("readonly"),isValid:r.default.isEmpty(this.entity.errors.get(this.field)),value:this.entity.get(this.field),showValidation:this.model.get("showValidation")}}},{key:"template",get:function(){return this.customTemplate}}])&&u(i.prototype,l),c&&u(i,c),t}();t.InputControl=v},340:function(e,t){e.exports=a},341:function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="input-control"><div class="input-group"><input'+n.attr("class",n.classes(["form-control",a.field+"-value"],[!1,!0]),!1,!0)+' type="text"'+n.attr("value",e.value,!0,!0)+n.attr("readonly",e.readonly,!0,!0)+n.attr("data-focus-id",a.focusId,!0,!0)+n.attr("aria-labelledby",a.ariaLabelledby,!0,!0)+">",a.addonText&&(i=i+'<span class="input-group-addon">'+n.escape(null==(t=a.addonText)?"":t)+"</span>"),i+="</div>",e.showValidation&&(i+='<div data-ref="validation-error"></div>'),i+="</div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},8:function(t,i){t.exports=e},9:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},jkRo:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="row"><div class="col-sm-1"><h3 class="type-normal margin-zero">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Subheader_Account_Label"))?"":t)+'</h3></div><div class="col-sm-3"><h3 class="type-bold account-name margin-zero">'+n.escape(null==(t=e.account.Name)?"":t)+"</h3></div></div>",i=e.subAccount?i+'<div class="row"><div class="col-sm-1"><h3 class="type-normal">'+n.escape(null==(t=a.i18n.getString("HotelCenter_Subheader_Subaccount_Label"))?"":t)+'</h3></div><div class="col-sm-3"><h3 class="type-bold sub-account-name">'+n.escape(null==(t=e.subAccount.Name)?"":t)+"</h3></div></div>":i+'<div class="alert alert-warning clearfix not-in-pilot"><div class="alert-icon warning"></div>'+n.escape(null==(t=a.i18n.getString("HotelCenter_NotInPilot"))?"":t)+"</div>"}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},k4ZJ:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="device-type-multipliers form-horizontal"><div data-ref="monday-bid-multiplier"></div><div data-ref="tuesday-bid-multiplier"></div><div data-ref="wednesday-bid-multiplier"></div><div data-ref="thursday-bid-multiplier"></div><div data-ref="friday-bid-multiplier"></div><div data-ref="saturday-bid-multiplier"></div><div data-ref="sunday-bid-multiplier"></div></div>'}},k9md:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){e.showLabel&&(t=t+'<label class="control-label"'+n.attr("for",e.id,!0,!0)+n.attr("id",e.id+"-Label",!0,!0)+"><span"+n.attr("data-bind","text: "+e.property+".label",!0,!0)+"></span>",e.schema.helpId&&(t=t+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e.schema.helpId,!0,!0)+' href="javascript:void(0);" role="button"'+n.attr("aria-label",i,!0,!0)+"></a>"),t+="</label>")}.call(this,"field"in i?i.field:"undefined"!==typeof field?field:void 0,"learnMoreText"in i?i.learnMoreText:"undefined"!==typeof learnMoreText?learnMoreText:void 0),t}},kRy6:function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return g});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("xAPU"),c=i.n(l),d=i("syDw"),u=i.n(d),p=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared"),g=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.rowTemplate=e.rowTemplate,this.entityType=e.entityType,this.errors=e.errors,this.colClass=["error-grid-col"],this.i18nKeys=e.i18nKeys}},{key:"columnConfiguration",value:function(){var e=this,t=[{name:"Extension",title:p.getString("ErrorGrid_AdExtension_Column"),template:function(t){return e.rowTemplate({data:t.value,i18n:p})},bodyClasses:[this.colClass,"error-grid_Extension"]},{name:"Error",title:p.getString("ErrorGrid_Error_Column"),bodyClasses:[this.colClass,"error-grid_Error"],template:function(e){return e.value}}];return"campaign"!==this.entityType&&"adgroup"!==this.entityType||t.unshift({name:"Entity",title:"campaign"===this.entityType?p.getString(this.i18nKeys&&this.i18nKeys.ErrorGridEntityCampaignColumn?this.i18nKeys.ErrorGridEntityCampaignColumn:"ErrorGrid_Entity_Campaign_Column"):p.getString(this.i18nKeys&&this.i18nKeys.ErrorGridEntityAdgroupColumn?this.i18nKeys.ErrorGridEntityAdgroupColumn:"ErrorGrid_Entity_Adgroup_Column"),template:function(t){return"adgroup"===e.entityType?p.get("Error_Grid_Adgroup_Name",{campaignName:t.value.campaignName,adgroupName:t.value.adgroupName}):t.value.campaignName},bodyClasses:[this.colClass,"error-grid_Entity","truncated"]}),t}},{key:"render",value:function(){return this.gridView=c.a.factory({vnext:!0}).create({tableClasses:["table","table-bordered"],dataSource:{type:"memory",data:this.errors,primaryKey:p.getString("ErrorGrid_Column_Header_Campaign")},columns:this.columnConfiguration(),scrolling:{virtualized:!0,header:"fixed"}}).gridView,this.$el.html(this.gridView.render().$el),this}},{key:"removeGrid",value:function(){this.$el.empty()}}]),t}(u.a.View)},kWnt:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.koValidationError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+(n.attr("data-bind","visible: !"+e+".isValid(), foreach: "+e+'.errors, attr: {"aria-hidden": '+e+".isValid()}",!0,!0)+n.attr("id",t||e+"ValidationError",!0,!0))+' role="alert"><li role="presentation"><div class="error" data-bind="html: $data" role="alert"></div></li></ul>'};var o=r.v4(),s=r.v4();a.koErrors(o),i=i+'<div class="form-group" role="radiogroup"><div class="col-sm-12"><div class="radio"><table class="radius-selector-table"><tr><td><label><input type="radio" name="locationTypeOptions" value="Radius" data-bind="checked: mode, enable: radiusOptionEnabled" aria-setsize="2" aria-posinset="1"><span class="radius-within">'+n.escape(null==(t=e.get("Location_Target_PopupEditor_Radius"))?"":t)+'</span></label></td><td><div class="radius-input"><input class="form-control" type="text" data-bind="value: radius, enable: radiusOptionEnabled, valueUpdate: &quot;input&quot;"'+n.attr("aria-label",e.get("Location_Target_PopupEditor_Radius"),!0,!0)+'></div></td><td><div class="radius-unit"><select class="form-control" name="radiusUnits" data-bind="options: radiusUnits, value: selectedUnit, optionsText: &quot;text&quot;, optionsValue: &quot;value&quot;, enable: radiusOptionEnabled"'+n.attr("aria-label",e.get("Location_Target_PopupEditor_Radius"),!0,!0)+'></select></div></td></tr></table></div></div><div class="col-sm-12"><div class="radio"><label><input type="radio" name="locationTypeOptions" value="Location" data-bind="checked: mode, enable: locationOptionEnabled" aria-setsize="2" aria-posinset="2"><span>'+n.escape(null==(t=e.get("Location_Target_PopupEditor_CurrentLocation"))?"":t)+"</span><span>"+n.escape(null==(t=" ")?"":t)+'</span><span data-bind="text: locationName"></span></label></div></div><div class="col-sm-12">',a.koValidationError("radiusError",s),i=i+'</div></div><div class="form-group"><div class="col-sm-12"><button class="btn btn-primary location-edit-btn-done" type="button">'+n.escape(null==(t=e.get("Button_Done"))?"":t)+"</button></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"uuid"in r?r.uuid:"undefined"!==typeof uuid?uuid:void 0),i}},kgRR:function(e,t,i){"use strict";var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("UT4o"),p=i.n(u),g=i("7XbR"),h=i.n(g),m=i("ITOZ"),f=i("+9/h"),v=i("O3qA"),b=i("ORPc"),y=i("7Cbf"),S=i.n(y),w=i("a28/"),C=i("/xyZ"),x=i.n(C);function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{Age:Object(b.ageSettingOptionsFactory)(e),Gender:Object(b.genderSettingOptionsFactory)(e),Device:b.deviceSettingOptions}}function A(e,t,i,n){var a=k(t)[n],r=p.a.map(e.getAllByType(n),function(e){return e.Criterion["".concat(n,"Criterion")][a.criterionTypeTarget]}),o=p.a.difference(p.a.keys(a.selections),r),s=!1,l=p.a.contains(i,n);return t&&l&&e.getAllByType(n).length>0&&(s=p.a.some(e.getAllByType(n),function(e){return e.CriterionType===n})),p.a.map(o,function(t){var i={CriterionType:s?"Negative".concat(n):n,Criterion:Object(w.a)({Type:n,BidAdjustment:0},"".concat(n,"Criterion"),Object(w.a)({},a.criterionTypeTarget,t))};return e.createAsync(i)})}function T(e){var t=e.targetInfo,i=e.isAudienceCampaign,n=void 0!==i&&i,a=e.isTargetAndBidArr,r=void 0===a?[]:a;if(!t)return x.a.resolve();var o=p.a.partial(A,t,n,r),s=p.a.keys(k()),l=p.a.map(s,o);return x.a.all(p.a.flatten(l))}function _(e){return null==e||""===e}function E(e){var t=p.a.find(e,function(e){return"Device"===e.CriterionType&&(0!==e.Criterion.BidAdjustment||!_(e.Criterion.CashbackPercent))});return p.a.reject(e,function(e){return e.Id<0&&0===e.Criterion.BidAdjustment&&_(e.Criterion.CashbackPercent)&&p.a.contains(["Age","Gender","Device"],e.CriterionType)&&!("Device"===e.CriterionType&&t)})}var I={},O=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.viewContext=e.viewContext||{},this.i18n=f.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.supportedTypes=["Age","Gender","Device","Location","Radius","NegativeLocation","CompanyName","Industry","JobFunction","Audience"],this.supportCashbackSettings=e.supportCashbackSettings,this.deps=e.deps||{};var t=f.a.get("component/config/index");I=t.get("Permissions"),this.currentLevelTargetInfo=e.currentLevelTargetInfo,this.parentLevelTargetInfo=e.parentLevelTargetInfo,this.supportedTypes=p.a.reject(this.supportedTypes,function(e){return"Location"===e||"Radius"===e||"NegativeLocation"===e}),this.unmodifiedCriterions=Object(m.cloneDeep)(this.currentLevelTargetInfo.getAllByTypes(this.supportedTypes)),this.populateInitialTargetOrBidSettings(),this.setupVirtualTargets();var i=this.parentLevelTargetInfo?this.parentLevelTargetInfo.getAllNoneEmptyTypeKeys():[],n=this.currentLevelTargetInfo.getAllNoneEmptyTypeKeys();this.initialSelectedTypeKeys=p.a.union(i,n),this.initializeTargetSettings(),this.viewmodel={isEditTargetCategoriesExpanded:h.a.observable(!1)}}},{key:"setupVirtualTargets",value:function(){this.isAudienceCampaign&&T({targetInfo:this.currentLevelTargetInfo,isAudienceCampaign:!0,isTargetAndBidArr:this.initialTargetSetting})}},{key:"populateInitialTargetOrBidSettings",value:function(){var e=this;this.initialTargetSetting=[];var t=p.a.result(this.viewContext.currentAdGroup,"TargetSetting",null);t&&p.a.each(t.Details,function(t){t.TargetAll||e.initialTargetSetting.push(t.CriterionType)})}},{key:"initializeTargetSettings",value:function(){var e=this.parentLevelTargetInfo?this.parentLevelTargetInfo.getAllNoneEmptyTypeKeys():[],t=this.currentLevelTargetInfo.getAllNoneEmptyTypeKeys(),i=p.a.union(e,t),n=function(e){var t={audience:["device"],default:["audience"]};return p.a.result(t,e,t.default)}(this.campaignType,this.options.scenario);this.audienceTargetSelector=new b.AudienceTargetSelector({selectedTypeKeys:i,blackListKeys:n,lockedKeys:["location","device"],level:this.viewContext.level}),this.listenTo(this.audienceTargetSelector,"selectionChanged",this.onSelectionChanged);var a={currentLevelTargetInfo:this.currentLevelTargetInfo,parentLevelTargetInfo:this.parentLevelTargetInfo,showTargetSelection:!0,showBidAdjustment:!0,showTargetOrBid:!1,isLiveUpdateEnabled:!1,enableLevelToggle:!this.isAudienceCampaign,viewContext:this.viewContext,isAudienceCampaign:this.isAudienceCampaign,supportCashbackSettings:this.supportCashbackSettings},r={currentLevelTargetInfo:this.currentLevelTargetInfo,parentLevelTargetInfo:this.parentLevelTargetInfo,showTargetSelection:!0,showBidAdjustment:!0,showTargetOrBid:this.isAudienceCampaign,enableLevelToggle:!this.isAudienceCampaign,viewContext:this.viewContext,showBidOnlyNote:!this.isAudienceCampaign,showExclusion:this.isAudienceCampaign,defaultBidAdjustment:this.isAudienceCampaign?0:15,supportCashbackSettings:this.supportCashbackSettings,isFilterCriterionLevelAdGroup:I.isFilterCriterionLevelAdGroup};return this.ageTargetSetting=new v.AgeCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"Age")},a)),this.genderTargetSetting=new v.GenderCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"Gender")},a)),this.deviceTargetSetting=new v.DeviceCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"Device")},p.a.defaults({enableLevelToggle:!0,scenario:this.options.scenario},a))),this.companyNameTargetSetting=new v.CompanyNameCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"CompanyName")},r)),this.industryTargetSetting=new v.IndustryCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"Industry")},r)),this.jobFunctionTargetSetting=new v.JobFunctionCriterionSetting(p.a.extend({isTargetAndBid:p.a.contains(this.initialTargetSetting,"JobFunction")},r)),this.locationTargetSetting=new v.LocationCriterionSetting({currentLevelTargetInfo:this.currentLevelTargetInfo,viewContext:this.viewContext,scenario:this.options.scenario,showTargetSelection:!0,showBidAdjustment:!1,showTargetOrBid:!1,hideTitleLabel:!("campaign-creation"===this.options.scenario&&p.a.contains(["search","dynamicSearch"],this.campaignType)),deps:this.deps,supportCashbackSettings:this.supportCashbackSettings}),p.a.contains(n,"audience")||(this.audienceTargetSetting=new v.AudienceCriterionSetting({currentLevelTargetInfo:this.currentLevelTargetInfo,perfMarker:this.options.perfMarker,isTargetAndBid:p.a.contains(this.initialTargetSetting,"Audience"),showTargetSelection:!0,showBidAdjustment:!0,showTargetOrBid:!0,supportCashbackSettings:this.supportCashbackSettings,viewContext:this.viewContext})),this.isAudienceCampaign||T({targetInfo:this.currentLevelTargetInfo}),T({targetInfo:this.parentLevelTargetInfo,isAudienceCampaign:this.isAudienceCampaign}),!0}},{key:"getTargetSettings",value:function(){return p.a.compact(Object(n.a)(p.a.intersection(this.initialTargetSetting,["Age","Gender"])).concat([this.audienceTargetSetting&&this.audienceTargetSetting.getIsTargetAndBid()?"Audience":null,this.companyNameTargetSetting.getIsTargetAndBid()?"CompanyName":null,this.industryTargetSetting.getIsTargetAndBid()?"Industry":null,this.jobFunctionTargetSetting.getIsTargetAndBid()?"JobFunction":null]))}},{key:"onSelectionChanged",value:function(e){this.$(this.getContainerNameFromId(e)).show()}},{key:"getContainerNameFromId",value:function(e){return".".concat(e,"-target-setting-container")}},{key:"getSubViews",value:function(){return p.a.compact([this.ageTargetSetting,this.genderTargetSetting,this.deviceTargetSetting,this.audienceTargetSetting,this.companyNameTargetSetting,this.industryTargetSetting,this.jobFunctionTargetSetting,this.locationTargetSetting])}},{key:"toggleCashbackPercentColumns",value:function(e,t){this.supportCashbackSettings=e,this.getSubViews().forEach(function(i){i.resetSupportCashbackSettings&&i.resetSupportCashbackSettings(e,t)})}},{key:"validate",value:function(){return this.ageTargetSetting.validate()&&this.genderTargetSetting.validate()&&this.deviceTargetSetting.validate()&&(!this.audienceTargetSetting||this.audienceTargetSetting.validate())&&this.companyNameTargetSetting.validate()&&this.industryTargetSetting.validate()&&this.jobFunctionTargetSetting.validate()}},{key:"getCampaignLocationCriterions",value:function(){return this.locationTargetSetting?this.locationTargetSetting.getCampaignLocationCriterions():[]}},{key:"getAllLocations",value:function(){var e=this.locationTargetSetting?this.locationTargetSetting.getAllLocations():{},t=e.intent,i=void 0===t?[]:t,n=e.locations;return(void 0===n?[]:n).concat(i)}},{key:"getData",value:function(){var e=this,t={},i=Object(m.cloneDeep)(this.currentLevelTargetInfo.getAllComputedByTypes(this.supportedTypes)),a=b.criterionHelper.compareAndGetCriterionsDelta(this.unmodifiedCriterions,i);this.isAudienceCampaign||"campaign"!==this.viewContext.level?this.isAudienceCampaign&&"campaign"!==this.viewContext.level&&(a=function(e){var t=p.a.filter(e,function(e){return"Age"===e.CriterionType}),i=p.a.filter(e,function(e){return"Gender"===e.CriterionType}),a=p.a.filter(e,function(e){return"Device"===e.CriterionType}),r=p.a.reject(e,function(e){return"Age"===e.CriterionType||"Gender"===e.CriterionType||"Device"===e.CriterionType});return 6===t.length&&p.a.every(t,function(e){return e.Id<0&&0===e.Criterion.BidAdjustment&&_(e.Criterion.CashbackPercent)})&&(t=[]),3===i.length&&p.a.every(i,function(e){return e.Id<0&&0===e.Criterion.BidAdjustment&&_(e.Criterion.CashbackPercent)})&&(i=[]),3===a.length&&p.a.every(a,function(e){return e.Id<0&&0===e.Criterion.BidAdjustment&&_(e.Criterion.CashbackPercent)})&&(a=[]),Object(n.a)(t).concat(Object(n.a)(i),Object(n.a)(a),Object(n.a)(r))}(a)):a=E(a);var r=this.locationTargetSetting?this.locationTargetSetting.getData():{},o=r.intent,s=void 0===o?[]:o,l=r.locations,c=void 0===l?[]:l,d=r.deletedLocations,u=void 0===d?[]:d,g=this.isAudienceCampaign?c.concat(u):s.concat(c).concat(u);if(a=a.concat(g),p.a.each(a,function(t){t.Id<0&&delete t.Id,"campaign"===e.viewContext.level?t.Campaign={Id:e.viewContext.currentCampaign.Id}:t.AdGroup={Id:e.viewContext.currentAdGroup.Id}}),this.deviceTargetSetting&&this.deviceTargetSetting.bidAdjustmentGrid.deviceTargetsUpdateView&&I.IsOriginalDeviceTargetingEnabled){var h=this.deviceTargetSetting.bidAdjustmentGrid.deviceTargetsUpdateView.targetsView.viewmodel.getValues();p.a.each(h,function(t){t.Status=p.a.isEmpty(t.Status)?"Active":t.Status,t.Campaign={Id:e.viewContext.currentCampaign.Id}}),a=(a=p.a.filter(a,function(e){return"Device"!==e.CriterionType})).concat(h)}return this.removeCashbackPercent(a),t["".concat(this.currentLevelTargetInfo.resourceName,"s")]=a,t}},{key:"removeCashbackPercent",value:function(e){this.supportCashbackSettings||e.forEach(function(e){delete e.Criterion.CashbackPercent})}},{key:"fillCriterionsWithId",value:function(e){p.a.isArray(e)&&e.length&&this.currentLevelTargetInfo.fillCriterionsWithId(e)}},{key:"onToggleEditTargetCategory",value:function(){this.$(".audience-target-selector-container").toggle(),this.viewmodel.isEditTargetCategoriesExpanded(!this.viewmodel.isEditTargetCategoriesExpanded())}},{key:"render",value:function(){this.$el.html(S()({i18n:this.i18n})),h.a.applyBindings(this.viewmodel,this.el);var e=this.initialSelectedTypeKeys;return this.$(".audience-target-selector-container").empty().append(this.audienceTargetSelector.render().$el),this.$(".location-target-setting-container").empty().append(this.locationTargetSetting.render().$el),this.$(".age-target-setting-container").empty().append(this.ageTargetSetting.render().$el),p.a.contains(e,"Age")||this.$(".age-target-setting-container").hide(),this.$(".gender-target-setting-container").empty().append(this.genderTargetSetting.render().$el),p.a.contains(e,"Gender")||this.$(".gender-target-setting-container").hide(),this.$(".device-target-setting-container").empty().append(this.deviceTargetSetting.render().$el),this.audienceTargetSetting&&this.$(".audience-target-setting-container").empty().append(this.audienceTargetSetting.render().$el),this.$(".companyName-target-setting-container").empty().append(this.companyNameTargetSetting.render().$el),p.a.contains(e,"CompanyName")||this.$(".companyName-target-setting-container").hide(),this.$(".industry-target-setting-container").empty().append(this.industryTargetSetting.render().$el),p.a.contains(e,"Industry")||this.$(".industry-target-setting-container").hide(),this.$(".jobFunction-target-setting-container").empty().append(this.jobFunctionTargetSetting.render().$el),p.a.contains(e,"JobFunction")||this.$(".jobFunction-target-setting-container").hide(),this}},{key:"campaignType",get:function(){return Object(b.getCampaignType)(this.viewContext.currentCampaign)}},{key:"isAudienceCampaign",get:function(){return"audience"===this.campaignType}},{key:"events",get:function(){return{"click .toggle-edit-target-category":"onToggleEditTargetCategory"}}}]),t}(d.a.View);i.d(t,"a",function(){return O}),i.d(t,"c",function(){return T}),i.d(t,"b",function(){return E})},kh6y:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="form-control-static">'+n.escape(null==(t=e.get("AdvancedSetting_AdRotationDesc"))?"":t)+'</div><div class="radio"><label><input type="radio" value="OptimizeForClicks" name="adRotation" data-bind="checked: AdRotation, disable: disableRotationOptions">'+n.escape(null==(t=e.get("AdRotation_OptimizeForClicks"))?"":t)+'</label></div><div class="radio"><label><input type="radio" value="RotateAdsEvenly" name="adRotation" data-bind="checked: AdRotation, disable: disableRotationOptions">'+n.escape(null==(t=e.get("AdRotation_RotateAdsEvenly"))?"":t)+'</label></div><div class="div"><div class="infomark infoalign"></div><span>'+n.escape(null==(t=e.get("AdRotation_RotateAdsEvenlyAlert"))?"":t)+"</span></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},krpb:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s){var l=e.floor(1e6*e.random());i=i+'<div class="scheduling-form"><div class="form-group"><div class="row"><label'+n.attr("class",n.classes(["control-label","accordion",s],[!1,!1,!0]),!1,!0)+'><a data-toggle="collapse"'+n.attr("data-target","#scheduling-"+l,!0,!0)+' href="javascript:void(0);"><span class="spritedimagealign" data-bind="css: isExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></span>'+n.escape(null==(t=o.get("AdExtensions_Scheduling_ToggleScheduling"))?"":t)+'</a></label></div></div><div class="collapse"'+n.attr("id","scheduling-"+l,!0,!0)+" data-bind=\"css: { 'in': isExpanded() }\">",r||(i=i+'<div class="form-group"><label'+n.attr("class",n.classes(["control-label","start-and-end-date-label",s],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=o.get("AdExtensions_Scheduling_DateRangeHeader"))?"":t)+"</label><div"+n.attr("class",n.classes(["control-value",a],[!1,!0]),!1,!0)+'><div><table role="presentation"><tbody><tr><td><input class="clickable date-start datepicker__container" data-bind="datePicker: startDate, culture: culture, format: format"'+n.attr("aria-label",o.get("AdExtensions_Scheduling_StartDate"),!0,!0)+n.attr("placeholder",o.get("AdExtensions_Scheduling_StartDate"),!0,!0)+'></td><td><span>-</span></td><td><input class="clickable date-end datepicker__container" data-bind="datePicker: endDate, culture: culture, format: format"'+n.attr("aria-label",o.get("AdExtensions_Scheduling_EndDate"),!0,!0)+n.attr("placeholder",o.get("AdExtensions_Scheduling_EndDate"),!0,!0)+'></td></tr></tbody></table></div>\x3c!-- ko foreach: dateRangeErrorMessages()--\x3e<div class="error" data-bind="text: $data" role="alert"></div>\x3c!-- /ko--\x3e</div></div>'),i=i+'<div class="form-group"><label'+n.attr("class",n.classes(["control-label","schedule-label",s],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=o.get("AdExtensions_Scheduling_SchedulingHeader"))?"":t)+"</label><div"+n.attr("class",n.classes(["control-value","timeRowsContainer",a],[!1,!1,!0]),!1,!0)+'><table class="table-full" role="presentation"><tbody>\x3c!-- ko foreach: dayTimeRanges--\x3e<tr class="dayTimeRange"><td><select class="form-control day-select" data-bind="value: days, options: $root.dayOptions, optionsText: \'displayName\', optionsValue: \'val\'"'+n.attr("aria-label",o.get("AdExtensions_Scheduling_Schedule_Day"),!0,!0)+"></select></td><td><select class=\"form-control hour-select\" data-bind=\"value: startHour, options: $root.startHourOptions, optionsText: 'displayName', optionsValue: 'val'\""+n.attr("aria-label",o.get("AdExtensions_Scheduling_Schedule_StartHour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control minute-select\" data-bind=\"value: startMinute, options: $root.minuteOptions, optionsText: 'displayName', optionsValue: 'val'\""+n.attr("aria-label",o.get("AdExtensions_Scheduling_Schedule_StartMinute"),!0,!0)+"></select></td><td><span>"+n.escape(null==(t=o.get("AdExtensions_Scheduling_To"))?"":t)+"</span></td><td><select class=\"form-control hour-select\" data-bind=\"value: endHour, options: $root.endHourOptions, optionsText: 'displayName', optionsValue: 'val'\""+n.attr("aria-label",o.get("AdExtensions_Scheduling_Schedule_EndHour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control minute-select\" data-bind=\"value: endMinute, options: $root.minuteOptions, optionsText: 'displayName', optionsValue: 'val'\""+n.attr("aria-label",o.get("AdExtensions_Scheduling_Schedule_EndMinute"),!0,!0)+'></select></td><td><a class="iconba iconba-Cancel filtercloseimage spritedimage spritedimagealign" data-bind="click: function() { $root.onRemovingSchedulingRow($index); }"'+n.attr("aria-label",o.get("AdExtensions_Scheduling_RemoveSchedulingTimeRow_Label"),!0,!0)+' role="button" href="javascript:void(0);"></a></td></tr><tr><td colspan="9"><div class="error" data-bind="css: { displayNone: !schedulingRowErrorMessage() }, text: schedulingRowErrorMessage" role="alert"></div></td></tr>\x3c!-- /ko--\x3e</tbody></table><a class="add-time-row" href="javascript:void(0);" role="button"'+n.attr("aria-label",o.get("AdExtensions_Scheduling_AddSchedulingTimeRow_Label"),!0,!0)+'><span class="add_icon spritedimage spritedimagealign"></span>'+n.escape(null==(t=o.get("AdExtensions_Scheduling_AddSchedulingTimeRow"))?"":t)+'</a></div>\x3c!-- ko if: schedulingRowsErrorMessage()--\x3e<div class="error" data-bind="text: schedulingRowsErrorMessage" role="alert"></div>\x3c!-- /ko--\x3e</div><div class="form-group" role="radiogroup"><label'+n.attr("class",n.classes(["control-label","display-time-label",s],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=o.get("AdExtensions_Scheduling_Display_Time"))?"":t)+"</label><div"+n.attr("class",n.classes(["control-value",a],[!1,!0]),!1,!0)+'><label class="radio-inline"><input type="radio" value="12-hour" data-bind="checked: timeDisplayType">'+n.escape(null==(t=o.get("AdExtensions_Scheduling_12_Hour_Label"))?"":t)+'</label><label class="radio-inline"><input type="radio" value="24-hour" data-bind="checked: timeDisplayType">'+n.escape(null==(t=o.get("AdExtensions_Scheduling_24_Hour_Label"))?"":t)+'</label></div></div><div class="form-group" role="radiogroup"><label'+n.attr("class",n.classes(["control-label","time-zone-label",s],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=o.get("AdExtensions_Scheduling_Time_Zone"))?"":t)+'<a class="helpbutton" topic="pop_BA_AdExtensions_SchedulingTimeZone" type="helppopup" onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("title",o.getString("LearnMore"),!0,!0)+"></a></label><div"+n.attr("class",n.classes(["control-value",a],[!1,!0]),!1,!0)+'><div class="radio"><label><input type="radio" data-bind="checkedValue: true, checked: useSearcherTimeZone">'+n.escape(null==(t=o.get("AdExtensions_Scheduling_Time_Zone_Searcher"))?"":t)+'</label></div><div class="radio"><label><input type="radio" data-bind="checkedValue: false, checked: useSearcherTimeZone">'+n.escape(null==(t=o.get("AdExtensions_Scheduling_Time_Zone_Advertiser"))?"":t)+'<div data-bind="text: accountTimeZone"></div></label></div></div></div></div></div>'}.call(this,"Math"in a?a.Math:"undefined"!==typeof Math?Math:void 0,"controlClass"in a?a.controlClass:"undefined"!==typeof controlClass?controlClass:void 0,"hideStartAndEndDate"in a?a.hideStartAndEndDate:"undefined"!==typeof hideStartAndEndDate?hideStartAndEndDate:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"labelClass"in a?a.labelClass:"undefined"!==typeof labelClass?labelClass:void 0),i}},kvkw:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",(a||"Learn more")+" "+(t||""),!0,!0)+"></a>"},i+='<div class="ad-creation-content"><div class="row"><div class="ad-properties-section"><div class="image-manager-container"></div><div class="image-required-error error"></div>',l&&(i=i+'<div class="final-url form-group"><label id="responsiveAdFinalUrlLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Final_URL_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_FinalURL","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Final_URL_Label")})),i+='<div class="error hidden"></div></div>'),s?(i=i+'<div class="short-headlines form-group"><label id="responsiveAdShortHeadlineLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Short_Headline_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_ShortHeadline","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Short_Headline_Label")})),function(){var e=r;if("number"==typeof e.length)for(var t=0,a=e.length;t<a;t++)e[t],i=i+"<div"+n.attr("class",n.classes(["short-headline","short-headline-form-"+t],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+t+" < showHeadlineCount()",!0,!0)+'><div class="short-headline-form"></div><div class="headline-delete iconba iconba-Delete"'+n.attr("data-id",t,!0,!0)+' tabindex="0" data-bind="visible: showHeadlineCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>';else for(var t in a=0,e)a++,e[t],i=i+"<div"+n.attr("class",n.classes(["short-headline","short-headline-form-"+t],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+t+" < showHeadlineCount()",!0,!0)+'><div class="short-headline-form"></div><div class="headline-delete iconba iconba-Delete"'+n.attr("data-id",t,!0,!0)+' tabindex="0" data-bind="visible: showHeadlineCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>'}.call(this),i=i+'<a class="ad-mma-add-headline clickable" style="border:none;" data-bind="css: { disabled: showHeadlineCount() &gt;= maxHeadlines }, attr: { &quot;aria-disabled&quot;: showHeadlineCount() &gt;= maxHeadlines ? &quot;true&quot; : &quot;false&quot;, tabindex: showHeadlineCount() &gt;= maxHeadlines ? &quot;-1&quot; : &quot;0&quot; }"><span class="glyphicon glyphicon-plus"></span><span>'+n.escape(null==(t=o.getString("Ad_AddHeadline"))?"":t)+'</span></a><div class="form-group" data-bind="visible: headlinesErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: headlinesErrorMessage"></div></div></div></div><div class="long-headlines form-group"><label id="responsiveAdLongHeadlineLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Long_Headline_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_LongHeadline","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Long_Headline_Label")})),function(){var e=d;if("number"==typeof e.length)for(var t=0,a=e.length;t<a;t++)e[t],i=i+"<div"+n.attr("class",n.classes(["long-headline","long-headline-form-"+t],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+t+" < showLongHeadlineCount()",!0,!0)+'><div class="long-headline-form"></div><div class="long-headline-delete iconba iconba-Delete"'+n.attr("data-id",t,!0,!0)+' tabindex="0" data-bind="visible: showLongHeadlineCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>';else for(var t in a=0,e)a++,e[t],i=i+"<div"+n.attr("class",n.classes(["long-headline","long-headline-form-"+t],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+t+" < showLongHeadlineCount()",!0,!0)+'><div class="long-headline-form"></div><div class="long-headline-delete iconba iconba-Delete"'+n.attr("data-id",t,!0,!0)+' tabindex="0" data-bind="visible: showLongHeadlineCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>'}.call(this),i=i+'<a class="ad-mma-add-long-headline clickable" style="border:none;" data-bind="css: { disabled: showLongHeadlineCount() &gt;= maxLongHeadlines }, attr: { &quot;aria-disabled&quot;: showLongHeadlineCount() &gt;= maxLongHeadlines ? &quot;true&quot; : &quot;false&quot;, tabindex: showLongHeadlineCount() &gt;= maxLongHeadlines ? &quot;-1&quot; : &quot;0&quot; }"><span class="glyphicon glyphicon-plus"></span><span>'+n.escape(null==(t=o.getString("Ad_AddLongHeadline"))?"":t)+'</span></a><div class="form-group" data-bind="visible: longHeadlinesErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: longHeadlinesErrorMessage"></div></div></div></div><div class="descriptions form-group"><label id="responsiveAdDescriptionLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Description_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_AdText","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Description_Label")})),function(){var t=e;if("number"==typeof t.length)for(var a=0,r=t.length;a<r;a++)t[a],i=i+"<div"+n.attr("class",n.classes(["description","description-form-"+a],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+a+" < showDescriptionCount()",!0,!0)+'><div class="description-form"></div><div class="description-delete iconba iconba-Delete"'+n.attr("data-id",a,!0,!0)+' tabindex="0" data-bind="visible: showDescriptionCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>';else for(var a in r=0,t)r++,t[a],i=i+"<div"+n.attr("class",n.classes(["description","description-form-"+a],[!1,!0]),!1,!0)+' style="position:relative;"'+n.attr("data-bind","visible: "+a+" < showDescriptionCount()",!0,!0)+'><div class="description-form"></div><div class="description-delete iconba iconba-Delete"'+n.attr("data-id",a,!0,!0)+' tabindex="0" data-bind="visible: showDescriptionCount() &gt; 1" style="position:absolute;right:-20px;top:10px;cursor:pointer;"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div></div>'}.call(this),i=i+'<a class="ad-mma-add-description clickable" style="border:none;" data-bind="css: { disabled: showDescriptionCount() &gt;= maxDescriptions }, attr: { &quot;aria-disabled&quot;: showDescriptionCount() &gt;= maxDescriptions ? &quot;true&quot; : &quot;false&quot;, tabindex: showDescriptionCount() &gt;= maxDescriptions ? &quot;-1&quot; : &quot;0&quot; }"><span class="glyphicon glyphicon-plus"></span><span>'+n.escape(null==(t=o.getString("Ad_AddDescription"))?"":t)+'</span></a><div class="form-group" data-bind="visible: descriptionsErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: descriptionsErrorMessage"></div></div></div></div>'):(i=i+'<div class="short-headline form-group"><label id="responsiveAdShortHeadlineLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Short_Headline_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_ShortHeadline","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Short_Headline_Label")})),i=i+'<div class="short-headline-form"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div><div class="form-group" data-bind="visible: headlinesErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: headlinesErrorMessage"></div></div></div></div><div class="long-headline form-group"><label id="responsiveAdLongHeadlineLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Long_Headline_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_LongHeadline","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Long_Headline_Label")})),i=i+'<div class="long-headline-form"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div><div class="form-group" data-bind="visible: longHeadlinesErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: longHeadlinesErrorMessage"></div></div></div></div><div class="description form-group"><label id="responsiveAdDescriptionLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Description_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_AdText","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Description_Label")})),i+='<div class="description-form"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div><div class="form-group" data-bind="visible: descriptionsErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: descriptionsErrorMessage"></div></div></div></div>'),i=i+'<div class="business-name form-group"><label id="responsiveAdBusinessNameLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Business_Name_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_BusinessName","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Business_Name_Label")})),i+='<div class="business-name-form"></div><div class="remaining-chars-hint-container"></div><div class="error hidden"></div><div class="form-group" data-bind="visible: businessNameErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: businessNameErrorMessage"></div></div></div></div>',l||(i=i+'<div class="final-url form-group"><label id="responsiveAdFinalUrlLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Final_URL_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_FinalURL","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Final_URL_Label")})),i+='<div class="error hidden"></div></div>'),i=i+'<div class="mobile-url form-group"><label id="responsiveAdMobileUrlLabel">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Mobile_URL_Label"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudAds_MobileURL","",o.getString("Click to learn more about {{item}}",{item:o.getString("Audience_Campaign_Ad_Mobile_URL_Label")})),i+='<div class="error hidden"></div></div>',c&&(i=i+'<div class="call-to-action form-group"><div class="row"><label class="control-label accordion cta-options__title"><a class="expand-cta-options" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isCTAExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="spritedimagealign" data-bind="css: isCTAExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></span><span>'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Call_To_Action_Label"))?"":t)+'</span></a></label></div></div><div class="call-to-action-section" data-bind="visible: isCTAExpanded"><div class="form-group col-sm-4"><label class="control-label cta-options__language-label">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Language_Label"))?"":t),a.popupHelp("pop_BA_MMA_ActionLanguage",o.getString("Audience_Campaign_Ad_Language_Label"),o),i=i+'</label><div class="action-language"></div><div class="form-group" data-bind="visible: actionLanguageErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="action-language-error error" data-bind="text: actionLanguageErrorMessage"></div></div></div></div><div class="form-group col-sm-4"><label class="control-label cta-options__action-text-label">'+n.escape(null==(t=o.getString("Audience_Campaign_Ad_Action_Text_Label"))?"":t),a.popupHelp("pop_BA_AdExtensions_ActionText",o.getString("Audience_Campaign_Ad_Action_Text_Label"),o),i+='</label><div class="action-text"></div><div class="form-group" data-bind="visible: actionTextErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="action-text-error error" data-bind="text: actionTextErrorMessage"></div></div></div></div></div>'),i=i+'<div class="website-image-opt-in" data-bind="visible: showWebsiteImageOptIn"><label class="website-image-section-label">'+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_SectionLabel"))?"":t),a.popupHelp("pop_BA_AcctLevelOptions_MMA",o.getString("AdCreator_WebsiteImage_OptIn_SectionLabel"),o),i=i+'</label><span class="website-image-checkbox-label" for="website-image-opt-in-checkbox"><input id="website-image-opt-in-checkbox" type="checkbox" data-bind="checked: hasWebsiteImageOptIn">'+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_CheckboxLabel"))?"":t)+'</span><div class="error" data-bind="visible: !hasWebsiteImageOptIn()">'+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_Error"))?"":t)+'</div><div class="audience-ads-policy-container"><div class="alert alert-info"><div class="alert-image"></div><div class="alert-info-inline"><span>'+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartOne"))?"":t)+"</span><span>"+(null==(t="&nbsp;")?"":t)+'</span><a target="_blank" rel="noopener noreferrer" href="https://about.ads.microsoft.com/en-us/resources/policies/microsoft-advertising-agreement">'+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartTwo"))?"":t)+"</a><span>"+n.escape(null==(t=o.getString("AdCreator_WebsiteImage_OptIn_DisclaimerPartThree"))?"":t)+"</span><span>"+(null==(t="&nbsp;")?"":t)+'</span><a target="_blank" rel="noopener noreferrer" href="https://about.ads.microsoft.com/en-us/resources/policies/image-audio-and-video-policies">'+n.escape(null==(t=o.getString("ImageExperience_Review_Image_Policy"))?"":t)+'</a></div></div></div></div><div class="advanced-url-options"></div><div data-bind="visible: urlOptionErrorMessage"><div class="col-sm-4"></div><div class="col-sm-8"><div class="error" data-bind="text: urlOptionErrorMessage"></div></div></div><div class="impression-tracking-urls"></div><div class="generic-errors"></div></div></div></div>'}.call(this,"descriptionFields"in r?r.descriptionFields:"undefined"!==typeof descriptionFields?descriptionFields:void 0,"headlineFields"in r?r.headlineFields:"undefined"!==typeof headlineFields?headlineFields:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isMMAEnabled"in r?r.isMMAEnabled:"undefined"!==typeof isMMAEnabled?isMMAEnabled:void 0,"isMoveFinalUrlTop"in r?r.isMoveFinalUrlTop:"undefined"!==typeof isMoveFinalUrlTop?isMoveFinalUrlTop:void 0,"isMultiMediaAdsPhase2Enabled"in r?r.isMultiMediaAdsPhase2Enabled:"undefined"!==typeof isMultiMediaAdsPhase2Enabled?isMultiMediaAdsPhase2Enabled:void 0,"longHeadlineFields"in r?r.longHeadlineFields:"undefined"!==typeof longHeadlineFields?longHeadlineFields:void 0),i}},kywK:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div role="radiogroup" data-bind="foreach: radioList"><label class="radio cursor-pointer"><input type="radio" data-bind="checked: $parent.source, value: value"><span class="type-normal" data-bind="text: text"></span></label></div><div class="pagefeed-selector-container" data-bind="visible: showPagefeedSelector"><span class="pagefeed-selector-description">'+n.escape(null==(t=e.get("Campaign_TargetingSource_Page_Selector_Title"))?"":t)+'</span><div class="doubleListBox"'+n.attr("data-bind","doubleListBox: selectedFeeds,    dlbData: { sourceItems: allFeeds, itemIdField: 'Id', pageSize: 10, itemFilterField: 'Name', useCallbackForFetchOnly:false },    dlbItemActions: {},    dlbFeatures: {selectAll: false, deselectAll: false, paging: true, dragAndDrop: true},    dlbTemplates: {sourceItemContentTemplate: itemTemplate, selectedItemContentTemplate: itemTemplate },    dlbStrings: {sourceItems: '"+e.get("Campaign_TargetingSource_Page_Selector_Source")+"',        selectedItems: '"+e.get("Campaign_TargetingSource_Page_Selector_Selected")+"',        filterWatermark: '"+e.get("Campaign_TargetingSource_Page_Selector_Search")+"'}",!0,!0)+'></div></div><ul data-bind="foreach: errors"><li><div class="error" data-bind="text: $data"></div></li></ul>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},lALr:function(e,t,i){var n,a;n=[i("5iHu"),i("ysmP")],void 0===(a=function(e,t){"use strict";return{scrollTo:t}}.apply(t,n))||(e.exports=a)},"lN/d":function(e,t,i){"use strict";var n,a,r,o,s,l=i("ERkP"),c=i.n(l),d=i("UT4o"),u=i.n(d);!function(e){e.customerAccount="customerAccount",e.campaign="campaign"}(n||(n={})),function(e){e.customer="customer",e.account="account",e.campaign="campaign"}(a||(a={})),function(e){e.Customer="Customer",e.Account="Account",e.Campaign="Campaign"}(r||(r={})),function(e){e.Customer="Customer",e.Account="Account"}(o||(o={})),function(e){e.customer="f:cust",e.account="f:acct",e.campaign="f:cmp",e.undeterminedAccounts="undeterminedAccounts"}(s||(s={}));var p,g={Active:"Active",Inactive:"Inactive"},h=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(){function e(e,t,i){void 0===i&&(i={}),this.childFetched=i.childFetched||!1,this.children=[],this.name=t,this.optionType=i.optionType||"++",this.id=e,this.state={expanded:i.expanded||!0},this.number=i.number||"",this.extra=i.extra||void 0,this.unAuthorized=!!i.unAuthorized,this.deepness=0,this.key=this.optionType+"-"+this.id,this.isSelected=!1,null!=i.visible||void 0!=i.visible?this.visible=i.visible:this.visible=!0}return e.prototype.addChild=function(e,t){return void 0===t&&(t=!0),e.parent=this,this.children.push(e),this.childFetched=t,e.updateDeepness(this.deepness+1),this},e.prototype.resetChildren=function(){this.children=[],this.childFetched=!1},e.prototype.updateDeepness=function(e){this.deepness=e,this.children.forEach(function(t){t.updateDeepness(e+1)})},e.prototype.midTraverseTree=function(e){return void 0===e&&(e=[]),e.push(this),this.children.filter(function(e){return!!e}).forEach(function(t){return t.midTraverseTree(e)}),e},e.prototype.find=function(e){if(e(this))return this;for(var t=0;t<this.children.length;t++){var i=this.children[t].find(e);if(i)return i}},e}(),f=function(e){function t(t,i,n,a){void 0===a&&(a={});var r=e.call(this,t,i,a)||this;return r.containerKey=n,r.childPagination=a.childPagination||!1,r}return h(t,e),t.prototype.updateChildPagination=function(e){this.childPagination=e},t}(m),v=function(e){function t(t,i,n,a){void 0===i&&(i="root"),void 0===n&&(n="root"),void 0===a&&(a={});var r=e.call(this,i,n,t,a)||this;return r.isRoot=!0,r}return h(t,e),t}(f),b=i("0v5/");!function(e){e.tree="tree",e.list="list"}(p||(p={}));var y=i("Ekod"),S=i("B5bk"),w=i("q1f0");S.g.setup(Object(w.a)());var C=S.g.createStyleSheet({selectorContainerHidden:{display:"none"},isSelected:{color:"gray"},selectorTreeExpandIcon:{verticalAlign:"sub",float:"left",marginTop:3,marginRight:4}}).attach().classes,x=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),k=function(){return(k=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},A=function(e){function t(t){var i=e.call(this,t)||this;return i.onChange=function(e){i.rootNode.children=e,i.setState({refresh:i.state.refresh+1})},i.nodeRenderer=function(e,t){var n,a;if(!i.props.containerConfig.renderSelectorNode)throw new Error("containerConfig.renderSelectorNode should not be null");a=i.props.containerConfig.renderSelectorNode;var r=e.option;return i.props.isSelected(r)?r.isSelected=!0:r.isSelected=!1,n=a(r,{onAdd:i.props.onAdd,onRemove:i.props.onRemove},i.props.containerConfig,i.props.i18n,i.props.classNames),c.a.createElement("div",{role:"cell"},c.a.createElement(y.ExpandableNode,k({node:e,updateTypeHandlers:{}},t),c.a.createElement("div",null,n)))},i.nodeCache={},i.rootNode={},i.state={refresh:0},i}return x(t,e),t.prototype.render=function(){return this.rebuildNodeTreeIncrementally(),c.a.createElement(y.TreeView,{nodes:this.rootNode.children,nodeRenderer:this.nodeRenderer,onChange:this.onChange,treeViewClassNames:this.classes.selectorTree,iconsClassNameMap:{expanded:"glyphicon glyphicon-triangle-bottom "+C.selectorTreeExpandIcon,collapsed:"glyphicon glyphicon-triangle-right "+C.selectorTreeExpandIcon,lastChild:"glyph-none"},expandIconAriaLabel:"Click to expand or collapse"})},t.prototype.buildNodeTree=function(e){var t=this;if(e.visible){var i=this.buildNode(e);if(!(e instanceof f&&e!=this.props.rootOption)){var n=e.children.map(function(e){return t.buildNodeTree(e)}).filter(function(e){return void 0!=e});i.children=n}return i}},t.prototype.buildNode=function(e){if(this.nodeCache[e.key]){var t=this.nodeCache[e.key];return t.option=e,t}var i=e.optionType+"-"+e.id;return{id:e.id,key:i,name:e.name,state:{expanded:!0},option:e}},t.prototype.rebuildNodeTreeIncrementally=function(){this.nodeCache={},this.buildNodeCache(this.rootNode),this.rootNode=this.buildNodeTree(this.props.rootOption),this.classes=function(e){var t={selectorTree:{height:e.selectorTreeHeight,margin:"auto",padding:"10px 0"}};return S.g.createStyleSheet(t).attach().classes}({selectorTreeHeight:this.props.containerConfig.containerHeight})},t.prototype.buildNodeCache=function(e){if(this.nodeCache[e.key]=e,e.children)for(var t=0;t<e.children.length;t++)this.buildNodeCache(e.children[t])},t}(l.Component),T=i("6b45"),_=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),E=function(e){function t(t){var i=e.call(this,t)||this;return i.classes=function(e){var t={selectorList:{height:e.selectorListHeight,margin:"auto",padding:"10px 0",overflow:"auto"}};return S.g.createStyleSheet(t).attach().classes}({selectorListHeight:i.props.containerConfig.containerHeight}),i.state={refresh:0},i.visibleOptions=[],i}return _(t,e),t.prototype.render=function(){var e=this,t=this.props.rootOption;t.children.reduce(function(e,t){return t.visible&&e++,e},0);return this.visibleOptions=t.children.filter(function(e){return e.visible}),c.a.createElement("div",{className:this.classes.selectorList},c.a.createElement(T.AutoSizer,{defaultHeight:200,defaultWidth:200},function(t){var i=t.width,n=t.height;return c.a.createElement(T.List,{width:i,height:n,rowCount:e.visibleOptions.length,rowHeight:e.props.containerConfig.rowHeight,rowRenderer:e.rowRenderer.bind(e)})}))},t.prototype.rowRenderer=function(e){var t=e.index,i=e.key,n=e.style;return c.a.createElement("div",{key:i,style:n},this.renderListNode(this.visibleOptions[t]))},t.prototype.renderListNode=function(e){var t;if(!this.props.containerConfig.renderSelectorNode)throw new Error("containerConfig.renderSelectorNode should not be null");return t=this.props.containerConfig.renderSelectorNode,this.props.isSelected(e)?e.isSelected=!0:e.isSelected=!1,t(e,{onAdd:this.props.onAdd,onRemove:this.props.onRemove},this.props.containerConfig,this.props.i18n,this.props.classNames)},t}(l.Component),I=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(){return(O=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.render=function(){var e=null;e=this.props.rootOption.childFetched&&0!=this.props.rootOption.children.length?this.props.containerConfig.containerViewType==p.tree?c.a.createElement(A,O({},this.props)):c.a.createElement(E,O({},this.props)):c.a.createElement("div",{style:{padding:"10px 10px"}},this.props.i18n.getString("No data available"));var t=null;this.props.containerConfig.renderSelectorHeader&&(t=this.props.containerConfig.renderSelectorHeader(this.props.rootOption,{onAdd:this.props.onAdd,onRemove:this.props.onRemove},this.props.containerConfig,this.props.i18n,this.props.classNames));var i=this.props.containerConfig.coordinate.col,n=this.props.containerConfig.coordinate.row;return c.a.createElement("div",{key:"selector-container-col-"+i+"-row-"+n,className:"selectorContainer"},t,c.a.createElement(b.UiBlocker,{blocking:this.props.containerConfig.isLoading,loadingText:this.props.i18n.getString("Loading..."),classes:{blockUiContainer:"blocker-global",blockerIndicator:"blocker-indicator"}},e))},t}(l.Component),M=i("SjL2"),j=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L=function(e){function t(t){var i=e.call(this,t)||this;return i.state={refresh:0},i}return j(t,e),t.prototype.render=function(){var e="customerAccount"===this.props.rootOption.containerKey?this.props.containerMap.customerAccount:this.props.containerMap.campaign;return this.confirmOptionVisiblity(this.props.rootOption,e),c.a.createElement("div",{className:"selector-container-list"},c.a.createElement(M.Row,null,c.a.createElement(M.Col,{xs:12,className:"selector-container"},c.a.createElement(P,{containerConfig:e,rootOption:this.props.rootOption,onAdd:this.props.onAdd,onRemove:this.props.onRemove,isSelected:this.props.isSelected,i18n:this.props.i18n,classNames:this.props.classNames}))))},t.prototype.confirmOptionVisiblity=function(e,t){var i=this,n=!1;if(e.children.forEach(function(a){e instanceof f?i.confirmOptionVisiblity(a,i.props.containerMap[e.containerKey]):i.confirmOptionVisiblity(a,t),n=n||a.visible}),e instanceof v)e.visible=!0;else{var a=t.localFilter?t.localFilter:function(e){return!0};e.visible=n||a(e)}},t}(l.PureComponent);var D=function(){function e(e){this.toStringFunction=e,this.setCache={}}return e.prototype.contains=function(e){return void 0!=this.setCache[this.toStringFunction(e)]},e.prototype.add=function(e){return!this.contains(e)&&void 0!=e&&null!=e&&(this.setCache[this.toStringFunction(e)]=e,!0)},e.prototype.remove=function(e){return!!this.contains(e)&&(delete this.setCache[this.toStringFunction(e)],!0)},e.prototype.isEmpty=function(){return 0==Object.keys(this.setCache).length},e.prototype.size=function(){return Object.keys(this.setCache).length},e.prototype.forEach=function(e){var t=this;Object.keys(this.setCache).forEach(function(i){return e(t.setCache[i])})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(i){if(!e.contains(i))return t=!1,!1}),t},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.toArray=function(){var e=this;return Object.keys(this.setCache).map(function(t){return e.setCache[t]})},e}(),R={union:function(e,t,i){var n={},a=[];return e.forEach(function(e){n[i(e)]||(a.push(e),n[i(e)]=e)}),t.forEach(function(e){n[i(e)]||(a.push(e),n[i(e)]=e)}),a}},N=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),V=function(){return(V=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},B=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)n[a]=r[o];return n},F=function(e){function t(t){var i=e.call(this,t)||this;return i.onAdd=function(e){e instanceof m&&(e=0===e.deepness?e.children:[e]);var t=B(i.selected);e=i.unionSelected(t,e),e=i.bubbleSelected(e),i.updateSelected(e),i.refresh()},i.onRemove=function(e){e instanceof m&&(e=[e]);var t=B(i.selected);t=i.removeUnselected(t,e),i.updateSelected(t),i.refresh()},i.removeAll=function(){i.updateSelected([]),i.refresh()},i.buildOptionSet=function(e){var t=new D(function(e){return e.key});return e&&e.forEach(function(e){t.add(e)}),t},i.isSelected=function(e){for(var t=i.selectedSet;e;){if(t.contains(e))return!0;e=e.parent}return!1},i.selected=i.props.defaultSelectedOptions||[],i.selectedSet=i.buildOptionSet(i.prepareDefaultSelectedOptions(i.selected)),i.state={refresh:0},i.refreshEnabled=!0,i}return N(t,e),t.prototype.render=function(){var e=this.props.selectorBox,t=this.props.resultBox;return c.a.createElement("div",{className:this.props.classNames.doubleList},c.a.createElement(M.Row,null,c.a.createElement(M.Col,{xs:7},c.a.createElement(e,V({},this.props),c.a.createElement(L,V({},this.props,{onAdd:this.onAdd,isSelected:this.isSelected,onRemove:this.onRemove,refresh:this.state.refresh})))),c.a.createElement(M.Col,{xs:5},c.a.createElement(t,V({},this.props,{isReportingUIPhaseNext:this.props.selectorBoxConfig.isReportingUIPhaseNext||!1,selected:this.selected,onRemove:this.onRemove,removeAll:this.removeAll})))))},t.prototype.unionSelected=function(e,t){return R.union(e,t,function(e){return e.key})},t.prototype.bubbleSelected=function(e){for(var t=this.buildSelectedSetByDeepness(e),i=t.length-1;i>=0;i--)for(var n=t[i],a=this.buildOptionSet(),r=n.toArray(),o=function(o){var l=r[o];if(a.contains(l)||!l.parent)return"continue";var c=l.parent;if(s.isAncestorSelected(l,t)){var d=s.buildOptionSet(c.children);return e=e.filter(function(e){return!d.contains(e)}),n.difference(d),a.union(d),"continue"}var u=s.buildOptionSet(c.children);u.isSubsetOf(n)&&i>0&&c.childFetched&&0!==c.deepness&&(e.push(c),e=e.filter(function(e){return!u.contains(e)}),t[i-1].add(c)),n.difference(u),a.union(u)},s=this,l=0;l<r.length;l++)o(l);return e},t.prototype.isAncestorSelected=function(e,t){for(var i=e.deepness-1,n=e.parent;n&&i>=0;){if(t[i].contains(n))return!0;i--,n=n.parent}return!1},t.prototype.removeUnselected=function(e,t){var i=this;return t.forEach(function(t){var n=i.removeOneUnselected(e,t);n&&(e=n)}),e},t.prototype.removeOneUnselected=function(e,t){if(!t)return!1;if(this.isOptionInList(t,e))e=e.filter(function(e){return e.key!==t.key});else{var i=this.removeOneUnselected(e,t.parent);if(!i)return!1;e=i;var n=t.parent;if(n){var a=B(n.children);a=a.filter(function(e){return e.key!==t.key}),e=R.union(e,a,function(e){return e.key})}}return e},t.prototype.isOptionInList=function(e,t){return-1!=u.a.findIndex(t,function(t){return t.key===e.key})},t.prototype.prepareDefaultSelectedOptions=function(e){var t=this;return this.disableRefresh(),e.forEach(function(e){t.onAdd(e)}),this.enableRefresh(),this.selected},t.prototype.buildSelectedSetByDeepness=function(e){var t=this,i=[];e.forEach(function(e){var n=i[e.deepness];n||(n=t.buildOptionSet(),i[e.deepness]=n),n.add(e)});for(var n=0;n<i.length;n++)i[n]||(i[n]=this.buildOptionSet());return i},t.prototype.updateSelected=function(e){this.selected=e,this.selectedSet=this.buildOptionSet(e),this.props.onChange(e)},t.prototype.refresh=function(){this.refreshEnabled&&this.setState({refresh:this.state.refresh+1})},t.prototype.disableRefresh=function(){this.refreshEnabled=!1},t.prototype.enableRefresh=function(){this.refreshEnabled=!0},t}(l.Component),U=i("O94r"),G=i.n(U),z=function(){return(z=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};S.g.setup(Object(w.a)());var H,W={doubleListHeight:450,bingColor:"#007daa",doubleListBackgroundColor:"#f2f2f2",containerBorder:"1px solid #bbbbbb",containerHegiht:320,resultListHeight:360},q={backgroundColor:W.doubleListBackgroundColor,height:30,padding:"8px 8px",fontWeight:"bold",overflow:"hidden"},$={maxLimitContainer:{paddingBottom:"8px",paddingLeft:"8px",clear:"both",color:"red"},doubleList:{width:832,height:W.doubleListHeight},selectorBox:{height:W.doubleListHeight,border:W.containerBorder,paddingRight:-15,"& .search-box__input-group":{position:"relative"},"& .search-box__input":{paddingRight:"206px"},"& .blocker-global":{position:"absolute"},"& .blocker-indicator":{position:"absolute",top:"100px",right:"150px"}},selectorTreeNode:{padding:"3px 17px 0 0",display:"flex","& span":{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},"& span:nth-last-child(2)":{flex:2},"& span:first-child":{flex:2}},selectorNodeArrow:{position:"absolute",right:"0px",fontWeight:"bold",cursor:"pointer",paddingRight:5},selectorListNode:{padding:"3px 0 10px 10px"},addAll:{cursor:"pointer",padding:"8px 0"},addAllText:{color:W.bingColor},selectorAccountContainerHeader:q,selectorCampaignContainerHeader:q,selectorBoxHeader:q,searchListHeader:{display:"flex",paddingRight:"16px",paddingBottom:"2px",marginTop:"5px",color:"#333",fontWeight:"bold",borderBottom:"1px solid lightgray","& span":{flex:1},"& span:last-child":{flex:2},"& span:first-child":{flex:2}},selectorDrillUpButton:{cursor:"pointer",margin:"0 5px 0 0"},clearIcon:{position:"absolute",right:"49px",top:"47px"},selectorNodeOverflowSafeText:{maxWidth:"90%",display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},selectorAccountNodeText:{color:"#007daa",cursor:"pointer"},selectedNodeArrow:{color:"#aaa"},accountNodeSelectedText:{color:"gray",cursor:"pointer"},resultListBox:{border:W.containerBorder,height:W.doubleListHeight,padding:"0px !important"},resultListHeader:q,resultListItemArrow:{float:"left",padding:"0 10px",cursor:"pointer"},resultList:{paddingTop:3,height:W.resultListHeight,overflow:"auto"},resultListItem:{padding:"0 10px",paddingBottom:10},resultListItemContent:{padding:"5px 0",backgroundColor:"#e7f0f6",border:"1px solid #00719a"},resultParentChainItem:{display:"inline-block",position:"relative",paddingRight:"10px",paddingLeft:"3px",verticalAlign:"top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},parentArrow:{position:"absolute",right:"0"},itemName:{paddingLeft:"3px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},accountParent:{position:"relative",paddingLeft:"3px",paddingRight:"10px",display:"inline-block",verticalAlign:"top",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},removeAll:{cursor:"pointer",padding:"15px 10px 10px 10px",padidngTop:15},removeAllText:{color:W.bingColor},hidden:{display:"none"},scopeSelector:{position:"absolute",width:"155px",right:"70px",top:"41px"}},K=S.g.createStyleSheet($).attach().classes,J=i("ITOZ"),Z=i("UP37"),Y=function(e,t,i,n){return new(i||(i=Promise))(function(a,r){function o(e){try{l(n.next(e))}catch(t){r(t)}}function s(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},Q=function(e,t){var i,n,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},X=function(e){u.a.isObject(e)&&(H=e)},ee=function(e,t){return Y(void 0,void 0,void 0,function(){return Q(this,function(i){switch(i.label){case 0:return[4,H.CustomerHierarchy.findAll({query:{limit:t,start:0,returnOnlyDirectlyLinkedEntities:!1,searchTerm:e}},{contentType:"application/json",dataType:"json",cacheResponse:!0,preProcess:function(e){return u.a.result(e,"customerHierarchyEntities",e)},xhrFields:{withCredentials:!0}})];case 1:return[2,i.sent()]}})})};function te(e){return Y(this,void 0,void 0,function(){return Q(this,function(t){switch(t.label){case 0:return[4,ie(function(){var e=window;return e.reporting&&e.reporting.accountTree&&e.reporting.accountTree.selectedScopeFilters?e.reporting.accountTree.selectedScopeFilters:[]}(),e)];case 1:return[2,t.sent()]}})})}function ie(e,t){return Y(this,void 0,void 0,function(){function i(e,t){var n=null;if(e.optionType===t.optionType&&e.id===t.id)n=e;else if(e.childFetched){e.children.forEach(function(e){i(e,t)});for(var a=0;a<e.children.length;a++){var r=i(e.children[a],t);if(null!=r){n=r;break}}}return n}var n,r,o,l,c,d=this;return Q(this,function(p){switch(p.label){case 0:return n=[],r=t.state.rootOption,o=u.a.find(e,function(e){return e.FilterKey===s.campaign}),[4,Promise.all(e.map(function(e){return Y(d,void 0,void 0,function(){var l,c=this;return Q(this,function(d){switch(d.label){case 0:return e.FilterKey!==s.customer&&e.FilterKey!==s.account||(l=e.FilterKey===s.customer?a.customer:a.account,e.Values.forEach(function(e){var t=i(r,new m(e,"filter-unknown",{optionType:l}));t&&n.push(t)})),e.FilterKey===s.undeterminedAccounts&&o?[4,Promise.all(e.Values.map(function(e){return Y(c,void 0,void 0,function(){var s;return Q(this,function(l){switch(l.label){case 0:return null===(s=i(r,new m(e,"filter-unknown",{optionType:a.account})))?[3,2]:[4,t.loadCampaigns(s,function(){})];case 1:return l.sent(),o.Values.forEach(function(e){var t=u.a.find(s.children,function(t){return t.id===e});void 0!=t&&n.push(t)}),[3,3];case 2:t.state.accountId&&o.Values.forEach(function(e){var i=u.a.find(t.state.rootOption.children,function(t){return t.id===e});void 0!=i&&n.push(i)}),l.label=3;case 3:return[2]}})})}))]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})}))];case 1:return p.sent(),l=r.midTraverseTree().filter(function(e){return e.optionType===a.account}).map(function(e){return e.id}),c=n.map(function(e){return e.id}),u.a.isEqual(l.sort(),c.sort())?[2,[]]:[2,n]}})})}function ne(e,t){return Y(this,void 0,void 0,function(){var i,o,s,l,c,d,p,g;return Q(this,function(h){switch(h.label){case 0:return i=e.state,o=i.rootCustomerId,s=i.userId,l=i.accountId,c=i.featurePilots,d=i.hierarchyMaxAccountLimit,i.scopeFilterLevel===r.Campaign&&l?((p=new v(n.campaign,l,"root",{optionType:a.account})).parent=new m(o,"dummy-customer"),[4,ae(p,e)]):[3,2];case 1:return h.sent(),[3,6];case 2:return p=new v(n.customerAccount,o,"root"),c.IsCustomerHierarchyEnabled?[4,ee(t,d)]:[3,4];case 3:return g=h.sent(),function e(t,i,o){if(i&&0!=i.length){if(t.state.scopeFilterLevel==r.Customer)return void i.forEach(function(i){if(i.isCustomer){var n=i,r=new m(n.id.toString(),n.name,{optionType:a.customer,number:n.number,unAuthorized:n.unAuthorized});o.addChild(r),e(t,n.children,o)}});i.forEach(function(i){if(i.isCustomer){var r=i,s=new m(r.id.toString(),r.name,{optionType:a.customer,number:r.number,unAuthorized:r.unAuthorized});o.addChild(s),e(t,r.children,s)}else{var l=i,c=new f(l.id.toString(),l.name,n.campaign,{optionType:a.account,number:l.number});o.addChild(c)}})}}(e,g,p),[3,6];case 4:return[4,function(e,t){return Y(this,void 0,void 0,function(){return Q(this,function(i){switch(i.label){case 0:return[4,Z.http.get("/reporting/navigationtree/treenodes",{data:{tree:"Customers",id:0,parentId:0,cid:e,uid:t,ReqId:Object(J.generateGuid)()},contentType:"application/x-www-form-urlencoded; charset=UTF-8",xhrFields:{withCredentials:!0}})];case 1:return[2,i.sent()]}})})}(o,s)];case 5:g=h.sent(),function e(t,i,o){return Y(this,void 0,void 0,function(){return Q(this,function(s){if(i&&0!=i.length){if(t.state.scopeFilterLevel==r.Customer)return i.forEach(function(i){if("Customers"==i.attr.scope){var n=i,r=new m(n.attr.tId.toString(),n.title,{optionType:a.customer,number:n.attr.number});o.addChild(r),e(t,n.children,o)}}),[2];u.a.sortBy(u.a.filter(i,function(e){return"Customers"!==e.attr.scope}),function(e){return e.attr.status}).concat(u.a.filter(i,function(e){return"Customers"===e.attr.scope})).forEach(function(i){if("Customers"==i.attr.scope){var r=i,s=new m(r.attr.tId.toString(),r.title,{optionType:a.customer,number:r.attr.number});o.addChild(s),e(t,r.children,s)}else{var l=i,c=new f(l.attr.tId.toString(),l.title,n.campaign,{optionType:a.account,number:l.attr.number,extra:{status:l.attr.status}});o.addChild(c)}})}return[2]})})}(e,g,p),h.label=6;case 6:return[2,p]}})})}function ae(e,t){return Y(this,void 0,void 0,function(){return Q(this,function(i){switch(i.label){case 0:return[4,function(e,t){return Y(this,void 0,void 0,function(){var i,n,a,r;return Q(this,function(o){switch(o.label){case 0:return i=e.id,n=e.parent.id,a=t.state.token,r=t.state.odataURI,[4,Z.odata.get("/Customers("+n+")/Accounts("+i+")/Campaigns",{headers:{"x-ms-lastwritetime":"Max"},data:{$top:1e7,$count:!0,$select:"Id,Name,Status",$orderby:"Name"},oDataToken:a,host:r,path:"/Advertiser/V2"})];case 1:return[2,o.sent().value]}})})}(e,t)];case 1:return function(e,t){Y(this,void 0,void 0,function(){return Q(this,function(i){return t.resetChildren(),[2,e.forEach(function(e){var i=new m(e.Id.toString(),e.Name,{optionType:a.campaign});t.addChild(i)})]})})}(i.sent(),e),[2,e]}})})}function re(e,t){return Y(this,void 0,void 0,function(){var i,r,o,s;return Q(this,function(l){switch(l.label){case 0:return i=e.state.rootCustomerId,r=e.state.userId,o=new v(n.customerAccount,i,"root"),[4,function(e,t,i,n){return Y(this,void 0,void 0,function(){return Q(this,function(a){switch(a.label){case 0:return e.setState({isLoading:!0}),[4,Z.http.get("/reporting/navigationtree/SearchCustomers",{data:{cid:t,uid:i,searchText:n,ReqId:Object(J.generateGuid)()},xhrFields:{withCredentials:!0}}).finally(function(){e.setState({isLoading:!1})})];case 1:return[2,a.sent()]}})})}(e,i,r,t)];case 1:return s=l.sent(),d=o,(c=s)&&0!=c.length&&u.a.forEach(c,function(e){var t=new m(e.advertiserCustomerId.toString(),e.advertiserCustomerName,{optionType:a.customer,number:"",extra:{serviceLevel:e.serviceLevel}});d.addChild(t)}),[2,o]}var c,d})})}function oe(e,t){return Y(this,void 0,void 0,function(){var i,r,o,s;return Q(this,function(l){switch(l.label){case 0:return i=e.state.rootCustomerId,r=e.state.userId,o=new v(n.customerAccount,i,"root"),[4,function(e,t,i,n){return Y(this,void 0,void 0,function(){return Q(this,function(a){switch(a.label){case 0:return e.setState({isLoading:!0}),[4,Z.http.get("/reporting/navigationtree/SearchAccounts",{data:{cid:t,uid:i,searchText:n,ReqId:Object(J.generateGuid)()},xhrFields:{withCredentials:!0}}).finally(function(){e.setState({isLoading:!1})})];case 1:return[2,a.sent()]}})})}(e,i,r,t)];case 1:return s=l.sent(),d=o,(c=s)&&0!=c.length&&u.a.sortBy(c,function(e){return e.status}).forEach(function(e){var t=new f(e.accountId.toString(),e.accountName,n.campaign,{optionType:a.account,extra:{status:e.status,advertiserCustomerName:e.advertiserCustomerName}});d.addChild(t)}),[2,o]}var c,d})})}var se=i("P7CH"),le=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ce=function(e,t,i,n){return new(i||(i=Promise))(function(a,r){function o(e){try{l(n.next(e))}catch(t){r(t)}}function s(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},de=function(e,t){var i,n,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ue=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)n[a]=r[o];return n},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultState={rootOption:new v(n.customerAccount),searchRootOption:new v(n.customerAccount),initRootOption:new v(n.customerAccount),loading:!0,defaultCampaignParentOption:null,searchTerm:"",campaignSearchStr:"",customerAccountSearchStr:"",isOnApiSearch:!1,isCreateSimilar:!1,defaultSelectedOption:new Array,rootCustomerId:"",userId:"",accountId:"",isLoading:!1,ccBaseUrl:"",token:"",odataURI:"",featurePilots:{IsCustomerHierarchyEnabled:!0,IsReportingUINewDesignEnabled:!1},forceAccountScope:!1,scopeFilterLevel:"",isInternalReport:!1,isReportingUIPhaseNext:!1,scopeSelectorLevel:o.Customer,maxAccountLimit:2e3,hierarchyMaxAccountLimit:1e3,isBeyondAccountLimit:!1,refresh:0},t.initialSetUp=function(e,i,n,a,r,o,s,l,c,d,p,g,h,m,f){return ce(t,void 0,void 0,function(){var t,v;return de(this,function(b){switch(b.label){case 0:return this.setState({odataURI:e,token:i,ccBaseUrl:n,featurePilots:s,isCreateSimilar:l,rootCustomerId:a,userId:r,accountId:o,forceAccountScope:g,scopeFilterLevel:h,isInternalReport:m,isReportingUIPhaseNext:f}),[4,function(e){return Y(this,void 0,void 0,function(){return Q(this,function(t){switch(t.label){case 0:return[4,ne(e,"")];case 1:return[2,t.sent()]}})})}(this)];case 1:return t=b.sent(),this.setState({rootOption:t,initRootOption:t}),this.state.featurePilots.IsCustomerHierarchyEnabled?this.countAccount(t.children)>=this.state.hierarchyMaxAccountLimit&&this.setState({isBeyondAccountLimit:!0}):u.a.result(t.children[0],"children",[]).length>this.state.maxAccountLimit&&this.setState({isBeyondAccountLimit:!0}),p(this.toRdsSelected(d,[])),v=[],l?c?[4,ie(this.fromRdsSelected(c),this)]:[3,3]:[3,5];case 2:return v=b.sent(),[3,5];case 3:return[4,te(this)];case 4:v=b.sent(),b.label=5;case 5:return this.setState({defaultSelectedOption:v,loading:!1}),[2]}})})},t.countAccount=function(e){var i=0;return u.a.map(e,function(e){"account"==e.optionType?i+=1:u.a.isArray(e.children)&&e.children.length>0&&(i+=t.countAccount(e.children))}),i},t.onQueryCustomerAccountChange=function(e){t.setState({customerAccountSearchStr:e})},t.onQueryCampaignChange=function(e){t.setState({campaignSearchStr:e})},t.searchCustomerAccount=function(e){return ce(t,void 0,void 0,function(){return de(this,function(t){switch(t.label){case 0:return this.state.scopeFilterLevel===r.Customer||this.state.isInternalReport&&this.state.scopeSelectorLevel===o.Customer?[4,this.searchCustomer(e)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,this.searchAccount(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.searchCustomer=function(e){return ce(t,void 0,void 0,function(){var t;return de(this,function(i){switch(i.label){case 0:return""===e||this.state.isLoading?[2]:[4,re(this,e)];case 1:return t=i.sent(),this.setState({searchRootOption:t,rootOption:t,isOnApiSearch:!0,searchTerm:e}),[2]}})})},t.searchAccount=function(e){return ce(t,void 0,void 0,function(){var t;return de(this,function(i){switch(i.label){case 0:return""===e||this.state.isLoading?[2]:this.state.isInternalReport?e.length<=2?[2]:[4,oe(this,e)]:[3,2];case 1:return t=i.sent(),this.setState({searchRootOption:t,rootOption:t,isOnApiSearch:!0,searchTerm:e}),[2];case 2:return this.state.isBeyondAccountLimit?(t=new v(n.customerAccount),this.state.featurePilots.IsCustomerHierarchyEnabled?[4,ne(this,e)]:[3,4]):[3,7];case 3:return t=i.sent(),[3,6];case 4:return e.length<=2?[2]:[4,oe(this,e)];case 5:t=i.sent(),i.label=6;case 6:return this.setState({searchRootOption:t,rootOption:t,isOnApiSearch:!0,searchTerm:e}),[3,8];case 7:this.setState({searchTerm:e,isOnApiSearch:!1}),i.label=8;case 8:return[2]}})})},t.clearSearchCustomerAccount=function(){t.setState({rootOption:t.state.initRootOption,customerAccountSearchStr:"",searchTerm:"",isOnApiSearch:!1})},t.searchCampaign=function(e){t.setState({searchTerm:e})},t.clearSearchCampaign=function(){t.setState({searchTerm:"",campaignSearchStr:""})},t.selectScopeLevel=function(e){t.setState({scopeSelectorLevel:e})},t.loadCampaigns=function(e,i){return ce(t,void 0,void 0,function(){return de(this,function(t){switch(t.label){case 0:return[4,ae(e,this)];case 1:return t.sent(),i(),[2]}})})},t.drillDown=function(e){return ce(t,void 0,void 0,function(){return de(this,function(t){switch(t.label){case 0:return e.childFetched?[3,2]:[4,ae(e,this)];case 1:t.sent(),t.label=2;case 2:return this.setState({rootOption:e,searchTerm:"",campaignSearchStr:""}),[2]}})})},t.drillUp=function(){t.state.isOnApiSearch?t.setState({rootOption:t.state.searchRootOption,searchTerm:t.state.customerAccountSearchStr}):t.setState({rootOption:t.state.initRootOption,searchTerm:t.state.customerAccountSearchStr})},t}return le(t,e),t.prototype.fromRdsSelected=function(e){return[{FilterKey:s.customer,Values:u.a.map(e.CustomerScopes,function(e){return String(e)})},{FilterKey:s.account,Values:u.a.map(e.AccountIds,function(e){return String(e)})},{FilterKey:s.campaign,Values:u.a.map(e.CampaignReportScopes,function(e){return String(e.CampaignId)})},{FilterKey:s.undeterminedAccounts,Values:u.a.map(e.CampaignReportScopes,function(e){return String(e.AccountId)})}]},t.prototype.toRdsSelected=function(e,t){var i=[],n=!1;e||1==t.length&&t[0]instanceof v?(i=this.state.rootOption.optionType==a.account?[this.state.rootOption]:ue(this.state.rootOption.children),n=!0):(i=ue(t),n=!1);for(var r=[],o=[],s=[];i.length>0;){var l=i.shift();l.optionType==a.customer?l.unAuthorized?i.unshift.apply(i,l.children):s.push(Number(l.id)):l.optionType==a.account?r.push(Number(l.id)):o.push({AccountId:Number(l.parent.id),CampaignId:Number(l.id)})}return{allSelected:n,AccountIds:r,CustomerScopes:s,CampaignReportScopes:o}},t.prototype.getSelected=function(e,t){var i={FilterKey:s.customer,Values:[]},n={FilterKey:s.account,Values:[]},r={FilterKey:s.campaign,Values:[]},o={FilterKey:s.undeterminedAccounts,Values:[]},l=[],c=!1;return e||1==t.length&&t[0]instanceof v?(l=ue(this.state.rootOption.children),c=!0):(l=ue(t),c=!1),l.forEach(function(e){e.optionType==a.customer?(i.Values.push(e.id+""),e.midTraverseTree().filter(function(e){return e.optionType===a.account}).forEach(function(e){n.Values.push(e.id+"")})):e.optionType==a.account?n.Values.push(e.id+""):(r.Values.push(e.id+""),o.Values.push(e.parent.id+""))}),{Filters:[i,n,r,o],allSelected:c}},t}(se.StateStore),ge=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ge(t,e),t.prototype.render=function(){var e;return this.props.isUINext?c.a.createElement(M.Glyphicon,{glyph:(e=this.props.glyph,u.a.result({"shift-left":"ba-DoubleChevronLeft","shift-right":"ba-DoubleChevronRight"},e,""))}):this.props.baIcon?c.a.createElement("span",{className:"glyph glyph-"+this.props.glyph,style:{display:"inline-block",verticalAlign:"-1px",margin:"0, 5px"}}):c.a.createElement("span",{className:"glyphicon glyphicon-"+this.props.glyph})},t.defaultProps={env:"demo",isUINext:!1},t}(l.Component);var me=function(){function e(){}return e.create=function(e){return function(e){var t=e.state.isOnApiSearch&&e.state.isInternalReport,i=function(t){if(e.state.isOnApiSearch&&t.optionType!==a.campaign)return!0;var i=e.state.searchTerm.toLowerCase();return[t.name,t.id,t.number].some(function(e){return(e||"").toLowerCase().indexOf(i)>-1})};return{customerAccount:{containerKey:n.customerAccount,scopeFilterLevel:e.state.scopeFilterLevel,isInternalReport:e.state.isInternalReport,isReportingUIPhaseNext:e.state.isReportingUIPhaseNext,scopeSelectorLevel:e.state.scopeSelectorLevel,containerViewType:p.tree,coordinate:{row:0,col:0},renderSelectorNode:function(i,n,r,o,s){var l="",d="",u="";return i.optionType!=a.account||e.state.forceAccountScope||t||(l=s.selectorAccountNodeText),i.isSelected&&(d=s.selectedNodeArrow),t&&(u=i.optionType==a.customer?i.extra.serviceLevel:i.extra.advertiserCustomerName),c.a.createElement("div",{className:s.selectorTreeNode+" "+(i.isSelected?"selected":"unselected")},c.a.createElement("span",{onClick:function(){if(i.optionType==a.account&&!e.state.forceAccountScope&&!t){var n=i;e.drillDown(n)}},className:l+" "+(i.optionType==a.account?"accountNode":"customerNode"),title:i.name,"data-id":i.id},i.name," ",i.extra&&i.extra.status&&i.optionType==a.account?"("+o.getString(g[i.extra.status])+")":""),u?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,i.id),c.a.createElement("span",{title:u},u)):null,c.a.createElement("span",{onClick:function(){n.onAdd(i)},className:s.selectorNodeArrow+" "+d+" selectorNodeArrow"},c.a.createElement(he,{glyph:"shift-right",baIcon:!0,isUINext:e.state.isReportingUIPhaseNext})))},renderSelectorHeader:function(t,i,n,o,s){var l=o.getString("All manager accounts and accounts");return e.state.scopeFilterLevel===r.Customer&&(l=o.getString("All manager accounts")),c.a.createElement("div",null,c.a.createElement("div",{onClick:function(){return i.onAdd(t)},className:""+s.addAll},c.a.createElement("span",{className:G()(s.addAllText,"clickable"),tabIndex:0,role:"button"},o.getString("Add all"))," ",c.a.createElement(he,{glyph:"shift-right",baIcon:!0,isUINext:e.state.isReportingUIPhaseNext})),c.a.createElement("div",{className:s.selectorAccountContainerHeader},l),e.state.isOnApiSearch&&e.state.isInternalReport&&t.children.length>0?c.a.createElement("div",{className:s.searchListHeader},t.children[0].optionType==a.account?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,o.getString("Account name")),c.a.createElement("span",null,o.getString("AID")),c.a.createElement("span",null,o.getString("Manager account name"))):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,o.getString("Manager account name")),c.a.createElement("span",null,o.getString("CID")),c.a.createElement("span",null,o.getString("Service level")))):null)},searchTerm:e.state.searchTerm,campaignSearchStr:e.state.campaignSearchStr,customerAccountSearchStr:e.state.customerAccountSearchStr,onQueryCustomerAccountChange:e.onQueryCustomerAccountChange,onQueryCampaignChange:e.onQueryCampaignChange,onSearchCustomerAccount:e.searchCustomerAccount,onSearchCampaign:e.searchCampaign,onClearSearchCampaign:e.clearSearchCampaign,onClearSearchCustomerAccount:e.clearSearchCustomerAccount,onSelectScopeLevel:e.selectScopeLevel,localFilter:i,containerHeight:function(){var t=W.containerHegiht;return e.state.isInternalReport&&e.state.isOnApiSearch&&(t-=22),t}(),rowHeight:e.state.isReportingUIPhaseNext?30:20,isLoading:e.state.isLoading},campaign:{containerKey:n.campaign,containerViewType:p.list,isReportingUIPhaseNext:e.state.isReportingUIPhaseNext,coordinate:{row:1,col:0},renderSelectorNode:function(t,i,n,a,r){var o="";return t.isSelected&&(o=r.selectedNodeArrow),c.a.createElement("div",{className:r.selectorListNode+" "+(t.isSelected?"selected":"unselected")},c.a.createElement("span",{className:r.selectorNodeOverflowSafeText,title:t.name,"data-id":t.id},t.name," ",t.extra&&t.extra.status?"("+a.getString(g[t.extra.status])+")":""),c.a.createElement("span",{onClick:function(){i.onAdd(t)},className:r.selectorNodeArrow+" "+o+" selectorNodeArrow"},c.a.createElement(he,{glyph:"shift-right",baIcon:!0,isUINext:e.state.isReportingUIPhaseNext})))},renderSelectorHeader:function(t,i,n,a,o){var s=e.state.scopeFilterLevel===r.Campaign&&e.state.accountId;return c.a.createElement("div",null,c.a.createElement("div",{onClick:function(){return i.onAdd(t)},className:o.addAll,tabIndex:0},c.a.createElement("span",{className:o.addAllText,role:"button"},a.getString("Add all"))," ",c.a.createElement(he,{glyph:"shift-right",baIcon:!0,isUINext:e.state.isReportingUIPhaseNext})),c.a.createElement("div",{className:o.selectorCampaignContainerHeader},!s&&c.a.createElement("span",{onClick:e.drillUp,className:o.selectorDrillUpButton},c.a.createElement(he,{glyph:"arrow-left",baIcon:!1})),s?a.getString("Campaigns for current account"):a.getString("Campaigns for")+" "+t.name))},searchTerm:e.state.searchTerm,campaignSearchStr:e.state.campaignSearchStr,customerAccountSearchStr:e.state.customerAccountSearchStr,onClearSearchCampaign:e.clearSearchCampaign,onClearSearchCustomerAccount:e.clearSearchCustomerAccount,onQueryCustomerAccountChange:e.onQueryCustomerAccountChange,onQueryCampaignChange:e.onQueryCampaignChange,onSearchCustomerAccount:e.searchCustomerAccount,onSearchCampaign:e.searchCampaign,onSelectScopeLevel:function(){return null},localFilter:i,containerHeight:W.containerHegiht,rowHeight:e.state.isReportingUIPhaseNext?30:20,isLoading:e.state.isLoading}}}(e)},e}(),fe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ve=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,a++)n[a]=r[o];return n},be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fe(t,e),t.prototype.render=function(){var e=this,t=this.props.i18n,i=this.props.classNames,n=this.props.isReportingUIPhaseNext,a=this.props.selected;return 1==a.length&&a[0]instanceof v&&(a=a[0].children),a=ve(a),c.a.createElement("div",{className:i.resultListBox+" resultListBox"},c.a.createElement("div",{className:i.resultListHeader},t.getString("Selected items")),c.a.createElement("div",{className:i.removeAll,onClick:this.props.removeAll},c.a.createElement(he,{glyph:"shift-left",baIcon:!0,isUINext:n})," ",c.a.createElement("span",{className:i.removeAllText,tabIndex:0,role:"button"},t.getString("Remove all"))),c.a.createElement("div",{className:i.resultList+" resultList"},a.reverse().map(function(a){return e.renderResultNode(a,t,i,n)})))},t.prototype.renderResultNode=function(e,t,i,n){var r=this;return c.a.createElement("div",{key:e.key,className:i.resultListItem},c.a.createElement("div",{className:i.resultListItemContent},c.a.createElement("span",{className:i.resultListItemArrow+" resultListItemArrow",tabIndex:0,onClick:function(){return r.props.onRemove(e)}},c.a.createElement(he,{glyph:"shift-left",baIcon:!0,isUINext:n})),this.renderParentChain(e,i),c.a.createElement("div",{className:i.itemName,title:e.name},e.name," ",e.extra&&e.optionType===a.account?"("+t.getString(g[e.extra.status])+")":"")))},t.prototype.renderParentChain=function(e,t){for(var i=[],n=e.parent;n&&!(n instanceof v);)i.push(n),n=n.parent;var r=(i=i.reverse()).reduce(function(e,t){return e+t.name+(t.optionType===a.account?"":" > ")},"");return c.a.createElement("div",{title:r,style:{paddingLeft:"30px",color:"#a2a2a2"}},i.map(function(e){return e.optionType===a.account?c.a.createElement("span",{key:e.key,className:t.accountParent,style:{maxWidth:100/i.length-1+"%"}},e.name,c.a.createElement("span",{className:t.parentArrow}," > ")):c.a.createElement("span",{key:e.key},c.a.createElement("span",{className:t.resultParentChainItem,style:{maxWidth:100/i.length-1+"%"}},e.name,c.a.createElement("span",{className:t.parentArrow}," > ")))}))},t}(l.Component),ye=i("3GA3"),Se=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),we=function(e,t,i,n){return new(i||(i=Promise))(function(a,r){function o(e){try{l(n.next(e))}catch(t){r(t)}}function s(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},Ce=function(e,t){var i,n,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&r[0]?n.return:r[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,r[1])).done)return a;switch(n=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{i=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},xe=function(e){function t(t){var i=e.call(this,t)||this;return i.onSearch=function(e){return we(i,void 0,void 0,function(){return Ce(this,function(t){return"campaign"==this.props.selectorBoxConfig.containerKey?this.props.selectorBoxConfig.onSearchCampaign(e):this.props.selectorBoxConfig.onSearchCustomerAccount(e),[2]})})},i.onQueryChange=function(e){"campaign"==i.props.selectorBoxConfig.containerKey?i.props.selectorBoxConfig.onQueryCampaignChange(e):i.props.selectorBoxConfig.onQueryCustomerAccountChange(e)},i.onClearSearch=function(){"campaign"==i.props.selectorBoxConfig.containerKey?i.props.selectorBoxConfig.onClearSearchCampaign():i.props.selectorBoxConfig.onClearSearchCustomerAccount()},i.onSelect=function(e){i.props.selectorBoxConfig.onSelectScopeLevel(e.target.value)},i.getPlaceholder=function(){var e=i.props,t=e.i18n,n=e.selectorBoxConfig,a=n.isInternalReport,s=n.scopeFilterLevel,l=n.scopeSelectorLevel;return"campaign"==n.containerKey?t.getString("Search campaign"):a?l==o.Customer?t.getString("Search manager account"):t.getString("Search account")+" ("+t.getString("3 to 1000 characters")+")":s===r.Customer?t.getString("Search manager account"):t.getString("Search manager account, account")},i}return Se(t,e),t.prototype.render=function(){var e=this.props,t=e.i18n,i=e.selectorBoxConfig,n=i.isInternalReport,a=i.scopeFilterLevel,s=i.scopeSelectorLevel,l=i.customerAccountSearchStr,d=i.campaignSearchStr,u=i.containerKey,p=e.classNames,g="campaign"==u?d:l;return c.a.createElement("div",{className:p.selectorBox},c.a.createElement("div",{className:p.selectorBoxHeader},t.getString("Available items")),c.a.createElement("div",{style:{padding:10}},c.a.createElement(ye.SearchBox,{onSearch:this.onSearch,onQueryChange:this.onQueryChange,value:g,placeholder:this.getPlaceholder(),maxLength:1e3}),c.a.createElement("span",{className:p.clearIcon+" glyph-close",onClick:this.onClearSearch}),n&&a!==r.Customer?c.a.createElement("div",{className:p.scopeSelector},c.a.createElement(M.Select,{id:"scopeSelector",value:s,onChange:this.onSelect,"aria-label":t.getString("Scope Selector")},c.a.createElement("option",{key:"customer",id:"scopeOption-Customer",value:o.Customer},t.getString("Manager Accounts")),c.a.createElement("option",{key:"account",id:"scopeOption-Account",value:o.Account},t.getString("Accounts")))):null,c.a.createElement("div",null,this.props.children)))},t}(l.Component),ke=i("UCSl"),Ae=i("lObe"),Te=i("faId"),_e=i("oF/h"),Ee=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ie=function(e){function t(t){var i=e.call(this,t)||this;return i.allSelectedCorrected=!1,i.loaded=!1,i.setAllSelected=function(e){i.setState({allSelected:e}),i.props.onSelectedChange(i.props.store.toRdsSelected(e,i.selected))},i.setSelected=function(e){i.selected=e,i.props.onSelectedChange(i.props.store.toRdsSelected(i.state.allSelected,e))},i.generateBeyondAccountLimitText=function(e){return e===r.Account||i.props.store.state.forceAccountScope?i.props.i18n.getString("There are more accounts than can be displayed. Use the search box to find a specific account."):i.props.i18n.getString("There are more accounts and campaigns than can be displayed. Use the search box to find a specific account or campaign.")},t.ccJsData&&X(t.ccJsData),i.selected=[],i.state={allSelected:i.props.allSelected},i}return Ee(t,e),t.prototype.render=function(){var e,t,i=this,n=this.props.classes,a=me.create(this.props.store),o="customerAccount"===this.props.store.state.rootOption.containerKey?a.customerAccount:a.campaign,s=this.props.store.state.scopeFilterLevel;if(this.props.store.state.forceAccountScope)e=this.props.i18n.getString("All accounts"),t=this.props.i18n.getString("Specific accounts");else switch(s){case r.Account:e=this.props.i18n.getString("All accounts"),t=this.props.i18n.getString("Specific accounts");break;case r.Customer:e=this.props.i18n.getString("Current manager account"),t=this.props.i18n.getString("Specific manager accounts");break;default:this.props.store.state.accountId?(e=this.props.i18n.getString("All campaigns within current account"),t=this.props.i18n.getString("Specific campaigns within current account")):(e=this.props.i18n.getString("All accounts and campaigns"),t=this.props.i18n.getString("Specific accounts and campaigns"))}return this.props.store.state.loading||this.loaded||!this.props.finishedLoading||(this.loaded=!0,this.props.finishedLoading()),this.props.store.state.loading?c.a.createElement("div",null):c.a.createElement("div",{className:n.radioArea},!this.props.hideRadioButtons&&c.a.createElement(M.Row,null,c.a.createElement(M.Col,{sm:4},c.a.createElement(M.Radio,{value:"allSelected",checked:this.state.allSelected,onChange:function(){return i.setAllSelected(!0)}},e),c.a.createElement(M.Radio,{value:"partSelected",checked:!this.state.allSelected,onChange:function(){return i.setAllSelected(!1)}},t))),c.a.createElement("div",{className:this.state.allSelected&&!this.props.hideRadioButtons?n.hidden:""},this.props.store.state.isBeyondAccountLimit?c.a.createElement("div",{className:n.maxLimitContainer,id:"maxLimitContainer"},this.generateBeyondAccountLimitText(s)):"",c.a.createElement(F,{selectorBox:xe,resultBox:be,onChange:this.setSelected,defaultVisibleExpandableOptionList:[this.props.store.state.rootOption],defaultSelectedOptions:this.props.store.state.defaultSelectedOption,rootOption:this.props.store.state.rootOption,selectorBoxConfig:o,containerMap:a,classNames:n,i18n:this.props.i18n})))},t.prototype.componentDidMount=function(){this.props.store.initialSetUp(this.props.odataURI,this.props.ccToken,this.props.ccBaseUrl,this.props.customerId,this.props.userId,this.props.accountId,this.props.featurePilots,this.props.isCreateSimilar,this.props.defaultSelected,this.props.allSelected,this.props.onSelectedChange,this.props.forceAccountScope,this.props.scopeFilterLevel,this.props.isInternalReport,this.props.isReportingUIPhaseNext)},t.prototype.componentDidUpdate=function(){this.correctDefaultAllSelected()},t.prototype.correctDefaultAllSelected=function(){var e=this;this.props.store.state.defaultSelectedOption.length>0&&!this.allSelectedCorrected&&(this.allSelectedCorrected=!0,setTimeout(function(){e.setAllSelected(!1)}))},t.prototype.getSelected=function(){return this.props.store.getSelected(this.state.allSelected,this.selected)},t.defaultProps={isCreateSimilar:!1,allSelected:!0,onSelectedChange:u.a.noop,classes:K},t}(l.Component),Oe=Object(_e.withCcJsData)(Object(Te.withDefaultStyles)(Object(Ae.withPerfMarker)(Object(ke.withStateStore)(Ie,function(){return new pe}),{name:"reporting-account-campaign-selector"}),function(e,t){return t.isUIVnext?z(z({},$),{doubleList:u.a.extend($.doubleList,{height:"475px"}),selectorBox:u.a.extend($.selectorBox,{height:"475px","& .search-box__icon":{"&:focus":{outline:"none"},fontFamily:"MsAds MDL2 Assets",position:"absolute",top:"6px",right:"13px","&:before":{content:'"\\E721"'}},"& .search-box__input":{paddingRight:"219px",fontSize:"13px"}}),selectorBoxHeader:u.a.extend($.selectorBoxHeader,{height:"auto"}),selectorCampaignContainerHeader:u.a.extend($.selectorCampaignContainerHeader,{height:"auto"}),resultListBox:u.a.extend($.resultListBox,{height:"475px"}),resultList:u.a.extend($.resultList,{height:"385px"}),resultListHeader:u.a.extend($.resultListHeader,{height:"auto"}),clearIcon:u.a.extend($.clearIcon,{top:"53px",right:"61px",fontSize:"16px",fontFamily:"MsAds MDL2 Assets",color:"#605e5c",cursor:"pointer","&:before":{content:'"\\E711"'}}),selectorListNode:u.a.extend($.selectorListNode,{"& .glyph-shift-right":{fontFamily:"MsAds MDL2 Assets","&:before":{content:'"\\EDBF"'}}}),resultListItemArrow:u.a.extend($.resultListItemArrow,{height:"25px"}),scopeSelector:u.a.extend($.scopeSelector,{right:"87px",top:"48px"}),radioArea:{"& .row":{marginBottom:"20px"},"& .radio label":{paddingLeft:"25px !important"},"& .radio label > input[type=radio]":{marginLeft:"-25px !important"}},selectorList:{height:"100px"}}):$}));i.d(t,"a",function(){return Oe})},lObe:function(e,t,i){var n,a;n=[i("UT4o"),i("ERkP"),i("aWzz"),i("iH9I")],void 0===(a=function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=277)}({277:function(e,t,i){e.exports=i(278)},278:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"withPerfMarker",{enumerable:!0,get:function(){return n.withPerfMarker}});var n=i(279)},279:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withPerfMarkerInternal=t.withPerfMarker=void 0;var n=s(i(4)),a=s(i(5)),r=s(i(3)),o=i(280);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e,t){var i=function(i){function a(e){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=u(this,p(a).call(this,e))).perfMarker=e.perfMarker,!i.perfMarker)if(r.default.has(t,"perfMarker")&&o.PerfMarkerFactory.isPerfMarker(t.perfMarker))i.perfMarker=t.perfMarker;else{if(!r.default.has(t,"name")||!r.default.isString(t.name))throw new SyntaxError("No perfmarker supplied as prop or (no|incorrect) fallback provided");i.perfMarker=o.PerfMarkerFactory.createMarker(t.name,t.options)}return i.perfMarker.willInit(),i}var s,l,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,n.default.Component),s=a,(l=[{key:"componentDidMount",value:function(){this.perfMarker.autoEnd||this.perfMarker.done()}},{key:"render",value:function(){return this.perfMarker.willRender(),n.default.createElement(e,c({},this.props,{ref:this.props.forwardedRef,perfMarker:this.perfMarker}))}}])&&d(s.prototype,l),h&&d(s,h),a}();return i.propTypes={perfMarker:a.default.shape({willFetchFile:a.default.func.isRequired,willInit:a.default.func.isRequired,willFetchData:a.default.func.isRequired,willRender:a.default.func.isRequired,done:a.default.func.isRequired,createChild:a.default.func.isRequired}),forwardedRef:a.default.objectOf(a.default.any)},i.defaultProps={perfMarker:null,forwardedRef:null},i};t.withPerfMarkerInternal=h;t.withPerfMarker=function(e,t){var i=h(e,t),a=n.default.forwardRef(function(e,t){return n.default.createElement(i,c({},e,{forwardedRef:t}))});return a.displayName="WithPerfMarker(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),a}},280:function(e,t){e.exports=n},3:function(t,i){t.exports=e},4:function(e,i){e.exports=t},5:function(e,t){e.exports=i}})}.apply(t,n))||(e.exports=a)},mIKf:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="location-popup-editor popup-editor" data-bind="style: {top: popupEditorTopValuePixel(), left: popupEditorLeftValuePixel()}, visible: popupEditorVisible()"></div>\x3c!--ko if: gridRemoveAllVisible()--\x3e<div class="target-grid-remove-all-locations"><a class="pull-right" data-bind="css: {hide: hideRemoveAllLink()}" href="javascript:void(0)" role="button"><span>'+n.escape(null==(t=e.get("Location_Target_Grid_RemoveColumn"))?"":t)+'</span></a></div>\x3c!-- /ko--\x3e<div class="target-grid new-advance-target-grid-container" data-bind="visible: gridVisible()"></div>\x3c!--ko if: !gridVisible() && gridNoDataMessageVisible()--\x3e<div class="no-data-message-container" data-bind="css: { &quot;text-center&quot;: removeAllInGridTitleVisible() }"><span data-bind="text: gridNoDataMessage"></span></div>\x3c!-- /ko--\x3e<div data-bind="visible: gridVisible()"><div class="pagination_host"></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},muxL:function(e,t,i){var n;n=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);Object.defineProperty(t,"PaginationView",{enumerable:!0,get:function(){return n.PaginationView}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaginationView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=l(i(2)),r=l(i(3)),o=l(i(6)),s=l(i(9));function l(e){return e&&e.__esModule?e:{default:e}}t.PaginationView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),n(t,[{key:"initialize",value:function(e){var i=this,n=e.pageSize,r=void 0===n?20:n,l=e.pageNumber,c=void 0===l?0:l,d=e.itemCount,u=void 0===d?0:d,p=e.availablePageSizes,g=void 0===p?[20,50,100,200]:p,h=e.pageSizeText,m=void 0===h?"Page size: ":h,f=e.totalPageCountText,v=void 0===f?"of ":f,b=e.previousPageText,y=void 0===b?"Previous Page":b,S=e.nextPageText,w=void 0===S?"Next Page":S,C=e.enableRandomPage,x=void 0===C||C,k=e.viewModelDecorator,A=void 0===k?a.default.identity:k,T=e.template,_=void 0===T?o.default:T;(function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,{state:{pageSize:r,pageNumber:c,itemCount:u,availablePageSizes:g,enableRandomPage:x},template:_,ViewModel:s.default,config:{pageSizeText:m,totalPageCountText:v,previousPageText:y,nextPageText:w}}),A(this.viewModel),this.viewModel.pageSize.subscribe(function(e){return i.trigger("change:page-size",e)}),this.viewModel.pageNumber.subscribe(function(e){return i.trigger("change:page-number",e)}),this.viewModel.itemCount.subscribe(function(e){return i.trigger("change:item-count",e)})}},{key:"events",get:function(){return{sumbmit:function(){return!1}}}},{key:"pageSize",get:function(){return this.viewModel.pageSize()},set:function(e){this.viewModel.pageSize(e)}},{key:"itemCount",get:function(){return this.viewModel.itemCount()},set:function(e){this.viewModel.itemCount(e)}},{key:"pageNumber",get:function(){return this.viewModel.pageNumber()},set:function(e){this.viewModel.pageNumber(e)}},{key:"availablePageSizes",get:function(){return this.viewModel.availablePageSizes()},set:function(e){this.viewModel.availablePageSizes(e)}},{key:"enableRandomPage",get:function(){return this.viewModel.enableRandomPage()},set:function(e){return this.viewModel.enableRandomPage(e)}}]),t}()},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(4)),r=o(i(5));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(e){function t(){return s(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.View),n(t,[{key:"initialize",value:function(e){var t=e.template,i=void 0===t?function(){return""}:t,n=e.ViewModel,a=void 0===n?function(){return function e(){s(this,e)}}():n,r=e.state,o=void 0===r?{}:r,l=e.config,c=void 0===l?{}:l;this.template=i,this.viewModel=new a(o),this.config=c}},{key:"render",value:function(){return this.el.innerHTML=this.template(this.config),r.default.applyBindings(this.viewModel,this.el),this}},{key:"remove",value:function(){r.default.cleanNode(this.el),function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}();t.default=l},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t,i){var n=i(7);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r,o){i.push('<form class="form-inline"><span>'+n.escape(null==(t=a)?"":t)+'</span><select data-bind="options: availablePageSizes, value: pageSizeInput"'+n.attr("aria-label",a,!0,!0)+' class="form-control"></select><div class="input-group"><span class="input-group-btn"><button data-bind="click: decPageNumber" type="button"'+n.attr("aria-label",r,!0,!0)+' class="btn btn-default"><div class="glyphicon glyphicon-triangle-left"></div></button></span><input data-bind="value: pageNumberText, attr: { size: pageNumberSize, maxlength: pageNumberSize, disabled: !enableRandomPage() }, event: { keypress: onKeyPress }" type="text" class="form-control"><span class="input-group-addon"><span>'+n.escape(null==(t=o)?"":t)+'</span><span data-bind="text: pageCount"></span></span><div class="input-group-btn"><button data-bind="click: incPageNumber" type="button"'+n.attr("aria-label",e,!0,!0)+' class="btn btn-default"><div class="span glyphicon glyphicon-triangle-right"></div></button></div></div></form>')}.call(this,"nextPageText"in a?a.nextPageText:"undefined"!==typeof nextPageText?nextPageText:void 0,"pageSizeText"in a?a.pageSizeText:"undefined"!==typeof pageSizeText?pageSizeText:void 0,"previousPageText"in a?a.previousPageText:"undefined"!==typeof previousPageText?previousPageText:void 0,"totalPageCountText"in a?a.totalPageCountText:"undefined"!==typeof totalPageCountText?totalPageCountText:void 0),i.join("")}},function(e,t,i){"use strict";function n(e){return null!=e&&""!==e}function a(e){return(Array.isArray(e)?e.map(a):e&&"object"===typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(n).join(" ")}t.merge=function e(t,i){if(1===arguments.length){for(var a=t[0],r=1;r<t.length;r++)a=e(a,t[r]);return a}var o=t.class,s=i.class;for(var l in(o||s)&&(o=o||[],s=s||[],Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]),t.class=o.concat(s).filter(n)),i)"class"!=l&&(t[l]=i[l]);return t},t.joinClasses=a,t.cls=function(e,i){for(var n=[],r=0;r<e.length;r++)i&&i[r]?n.push(t.escape(a([e[r]]))):n.push(a(e[r]));var o=a(n);return o.length?' class="'+o+'"':""},t.style=function(e){return e&&"object"===typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,i,n,a){return"style"===e&&(i=t.style(i)),"boolean"==typeof i||null==i?i?" "+(a?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof i?(-1!==JSON.stringify(i).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),i&&"function"===typeof i.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'"):n?(i&&"function"===typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(i)+'"'):(i&&"function"===typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+i+'"')},t.attrs=function(e,i){var n=[],r=Object.keys(e);if(r.length)for(var o=0;o<r.length;++o){var s=r[o],l=e[s];"class"==s?(l=a(l))&&n.push(" "+s+'="'+l+'"'):n.push(t.attr(s,l,!1,i))}return n.join("")};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},o=/[&<>"]/g;function s(e){return r[e]||e}t.escape=function(e){var t=String(e).replace(o,s);return t===""+e?e:t},t.rethrow=function e(t,n,a,r){if(!(t instanceof Error))throw t;if(("undefined"!=typeof window||!n)&&!r)throw t.message+=" on line "+a,t;try{r=r||i(8).readFileSync(n,"utf8")}catch(d){e(t,null,a)}var o=3,s=r.split("\n"),l=Math.max(a-o,0),c=Math.min(s.length,a+o);o=s.slice(l,c).map(function(e,t){var i=t+l+1;return(i==a?"  > ":"    ")+i+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+a+"\n"+o+"\n\n"+t.message,t},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(2)),r=o(i(5));function o(e){return e&&e.__esModule?e:{default:e}}var s=Number.parseInt||window.parseInt;function l(e){return e===s(e,10)}function c(e){return isFinite(e)&&l(e)}var d=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.pageNumber,a=t.pageSize,o=t.itemCount,c=t.availablePageSizes,d=t.enableRandomPage;this.validate(t),this.pageSize=r.default.observable(a),this.itemCount=r.default.observable(o),this.pageNumber=r.default.observable(n),this.availablePageSizes=r.default.observableArray(c),this.enableRandomPage=r.default.observable(d),this.pageSizeInput=r.default.computed({read:function(){return i.pageSize()},write:function(e){l(e)&&(i.pageSize(e),i.pageNumberInput(i.pageNumber()))}}),this.pageCount=r.default.computed(function(){return Math.ceil(i.itemCount()/i.pageSize())}),this.pageNumberInput=r.default.computed({read:function(){return i.pageNumber()},write:function(e){l(e)&&i.pageNumber(Math.max(Math.min(e,i.pageCount()-1),0))}}),this.pageNumberText=r.default.computed({read:function(){return(i.pageNumberInput()+1).toString()},write:function(e){var t=s(e,10)-1;l(t)?i.pageNumberInput(t):(i.pageNumberInput.notifySubscribers(),i.pageNumberText.notifySubscribers())}}),this.pageNumberSize=r.default.computed(function(){return Math.floor(i.pageCount().toString().length)}),this.onKeyPress=function(e,t){return 13!==(t.which||t.keyCode)||(t.target.blur(),!1)},this.skip=r.default.computed(function(){return i.pageNumber()*i.pageSize()}),this.take=r.default.computed(function(){return i.pageSize()})}return n(e,[{key:"incPageNumber",value:function(){this.pageNumberInput(this.pageNumber()+1)}},{key:"decPageNumber",value:function(){this.pageNumberInput(this.pageNumber()-1)}},{key:"validate",value:function(e){var t=e.pageNumber,i=e.pageSize,n=e.itemCount,r=e.availablePageSizes;if(!c(t)||t<0)throw new Error("invalid pageNumber "+t);if(!c(i)||i<=0)throw new Error("invalid pageSize "+i);if(!c(n)||n<0)throw new Error("invalid itemCount "+n);if(t>0&&t*i>=n)throw new Error("pageNumber "+t+" out of range");if(!a.default.isArray(r))throw new Error("availablePageSizes should be an array");a.default.each(r,function(e){if(!c(e)||e<0)throw new Error("invalid size "+e+" in availablePageSizes")})}}]),e}();t.default=d}])},e.exports=n(i("UT4o"),i("syDw"),i("7XbR"))},mxlK:function(e,t,i){var n,a;n=[i("ERkP"),i("UT4o"),i("aWzz")],void 0===(a=function(e,t,i){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=625)}({10:function(e,t){e.exports=i},3:function(t,i){t.exports=e},625:function(e,t,i){e.exports=i(626)},626:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LazyImage",{enumerable:!0,get:function(){return n.LazyImage}});var n=i(627)},627:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyImage=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),a=s(i(9)),r=s(i(10)),o=s(i(628));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=function(e){function t(e){var i,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=d(t).call(this,e),i=!r||"object"!==l(r)&&"function"!==typeof r?u(a):r,g(u(i),"startObserver",function(){i.target&&i.observer&&i.observer.observe(i.target)}),g(u(i),"stopObserver",function(){i.target&&i.observer&&(i.observer.unobserve(i.target),i.observer.disconnect(),i.observer=null)}),g(u(i),"handleIntersection",function(e){var t=e[0]||{},n=t.isIntersecting,a=t.intersectionRatio,r="undefined"!==typeof n?n:a>0;if(!i.intersected&&r)return i.intersected=!0,void i.setState({inViewPort:!0});i.intersected&&!r&&(i.intersected=!1,i.setState({inViewPort:!1}),i.stopObserver())}),g(u(i),"loadImage",function(e){i.isLoadingStarted||(i.isLoadingStarted=!0,i.imgRef.current.onload=function(){i.setState({loaded:!0})},i.imgRef.current.onerror=function(){i.props.onImageLoadError(e)},i.setState({src:e}))}),g(u(i),"initIntersectionObserver",function(){i.observer||(i.observer=new IntersectionObserver(i.handleIntersection,{}))}),i.state={loaded:!1,inViewPort:!1},i.imgRef=n.default.createRef(),i.target=null,i.isLoadingStarted=!1,i.observer=null,i.intersected=!1,i}var i,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n.PureComponent),i=t,(a=[{key:"componentDidMount",value:function(){this.initIntersectionObserver(),this.startObserver()}},{key:"componentDidUpdate",value:function(){this.state.inViewPort&&!this.state.loaded&&this.loadImage(this.props.src)}},{key:"render",value:function(){var e=this,t=-(this.props.width-this.props.limitWidth)/2;return n.default.createElement("div",{className:"lazy-image-container",ref:function(t){return e.target=t,t},style:{minHeight:this.props.height}},n.default.createElement("img",{ref:this.imgRef,src:this.state.src,alt:this.props.alt,width:this.props.width,style:{display:this.state.loaded?"initial":"none",marginLeft:"".concat(t,"px")},onContextMenu:function(e){return e.preventDefault(),!1}}),!this.state.loaded&&n.default.createElement("div",{style:{height:this.props.height,width:this.props.limitWidth}},this.props.imagePlaceHolder?this.props.imagePlaceHolder():(0,o.default)()))}}])&&c(i.prototype,a),r&&c(i,r),t}();t.LazyImage=h,h.propTypes={src:r.default.string.isRequired,alt:r.default.string,height:r.default.number,width:r.default.number,limitWidth:r.default.number,imagePlaceHolder:r.default.func,onImageLoadError:r.default.func},h.defaultProps={alt:"",width:200,height:200,limitWidth:200,imagePlaceHolder:null,onImageLoadError:a.default.noop}},628:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=i(3))&&n.__esModule?n:{default:n};var r=function(){return a.default.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-eclipse",style:{background:"none"}},a.default.createElement("path",{"ng-attr-d":"{{config.pathCmd}}","ng-attr-fill":"{{config.color}}",stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 42 0 0 1 10 50",fill:"#008272",transform:"rotate(306.26 50 51)"},a.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 51;360 50 51",keyTimes:"0;1",dur:"1.9s",begin:"0s",repeatCount:"indefinite"})))};t.default=r},9:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},n2Lw:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l,c){i=i+'<div class="form-inline"><select class="form-control"'+n.attr("disabled",s,!0,!0)+n.attr("aria-label",r.getString("BidAdjustment_Options"),!0,!0)+">",function(){var e=a;if("number"==typeof e.length)for(var r=0,o=e.length;r<o;r++){var s=e[r];i=i+"<option"+(n.attr("value",s.text,!0,!0)+n.attr("selected",s.key===l,!0,!0))+">"+n.escape(null==(t=s.text)?"":t)+"</option>"}else for(var r in o=0,e)o++,s=e[r],i=i+"<option"+(n.attr("value",s.text,!0,!0)+n.attr("selected",s.key===l,!0,!0))+">"+n.escape(null==(t=s.text)?"":t)+"</option>"}.call(this),i=i+'</select><input class="inline-input form-control bid-adj-col"'+n.attr("id",e,!0,!0)+' type="text"'+n.attr("aria-label",r.getString("BidAdjustment_BidMultiplier"),!0,!0)+n.attr("size",c,!0,!0)+n.attr("maxlength",c,!0,!0)+n.attr("value",o,!0,!0)+n.attr("disabled",s,!0,!0)+'><span>%</span><div class="error"></div></div>'}.call(this,"Name"in a?a.Name:"undefined"!==typeof Name?Name:void 0,"availableOptions"in a?a.availableOptions:"undefined"!==typeof availableOptions?availableOptions:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"percentage"in a?a.percentage:"undefined"!==typeof percentage?percentage:void 0,"readonly"in a?a.readonly:"undefined"!==typeof readonly?readonly:void 0,"selectedOption"in a?a.selectedOption:"undefined"!==typeof selectedOption?selectedOption:void 0,"size"in a?a.size:"undefined"!==typeof size?size:void 0),i}},nNS3:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="audience-adgroup-creation-wizard-container"><h1>'+n.escape(null==(t=e.getString("Audience_Adgroup_Wizard_Description"))?"":t)+'</h1><div class="audience-adgroup-creation-wizard"></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},neKV:function(e,t,i){var n,a;n=[i("ERkP"),i("aWzz"),i("faId"),i("SjL2"),i("7nmT"),i("5kPc"),i("syDw")],void 0===(a=function(e,t,i,n,a,r,o){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=559)}({243:function(e,t){e.exports=a},4:function(t,i){t.exports=e},5:function(e,i){e.exports=t},559:function(e,t,i){e.exports=i(560)},560:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TutorialAccordion",{enumerable:!0,get:function(){return n.TutorialAccordion}}),Object.defineProperty(t,"StyledTutorialAccordion",{enumerable:!0,get:function(){return n.StyledTutorialAccordion}}),Object.defineProperty(t,"TutorialAccordionView",{enumerable:!0,get:function(){return a.TutorialAccordionView}}),Object.defineProperty(t,"StyledTutorialAccordionView",{enumerable:!0,get:function(){return a.StyledTutorialAccordionView}});var n=i(561),a=i(564)},561:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyledTutorialAccordion=t.TutorialAccordion=void 0;var n,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(4)),r=(n=i(5))&&n.__esModule?n:{default:n},o=i(59),s=i(58),l=i(562),c=i(563);function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var i,n,a,r,o,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=p(t).call(this,e),i=!a||"object"!==d(a)&&"function"!==typeof a?g(n):a,r=g(i),s=function(){i.setState(function(e){return{expanded:!e.expanded}})},(o="onSelect")in r?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s;var l=e.expanded;return i.state={expanded:l},i}var i,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.PureComponent),i=t,(n=[{key:"render",value:function(){var e=this.props,t=e.classes,i=e.title,n=e.subtitle,r=e.tutorStepComponents,s=e.accordion,c=this.state.expanded,d=a.default.createElement("div",{className:t.stepSeparator},a.default.createElement(o.Glyphicon,{glyph:"ba-Forward"}));return a.default.createElement(o.PanelGroup,{id:"tutorial-accordion",accordion:s,className:t.tutorialAccordion,activeKey:c?"0":null,onSelect:this.onSelect},a.default.createElement(o.Panel,{role:"tab",eventKey:"0"},a.default.createElement(o.Panel.Heading,null,a.default.createElement(o.Panel.Title,{toggle:!0},i)),a.default.createElement(o.Panel.Collapse,{onEntered:l.triggerScrollbarReposition,onExited:l.triggerScrollbarReposition},a.default.createElement("div",{className:t.titleSecondary},n),a.default.createElement("div",{className:t.tutorialContainer},r.map(function(e,i){return a.default.createElement(a.default.Fragment,{key:i},i>0?d:null,a.default.createElement("div",{className:t.tutorStep},e))})))))}}])&&u(i.prototype,n),r&&u(i,r),t}();t.TutorialAccordion=m,m.propTypes={classes:r.default.shape({tutorialAccordion:r.default.string}).isRequired,title:r.default.string.isRequired,subtitle:r.default.element,tutorStepComponents:r.default.arrayOf(r.default.element).isRequired,accordion:r.default.bool,expanded:r.default.bool},m.defaultProps={subtitle:null,accordion:!0,expanded:!0};var f=(0,s.withDefaultStyles)(m,c.getTutorialAccordionStyles);t.StyledTutorialAccordion=f},562:function(e,t){e.exports=r},563:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTutorialAccordionStyles=void 0;t.getTutorialAccordionStyles=function(){return{tutorialAccordion:{paddingLeft:32,borderBottom:"1px solid #edebe9",marginTop:16,"& .panel-heading > .panel-title > a":{color:"#0078d4",fontSize:18},"& .panel-heading > .panel-title > a:after":{fontSize:18,paddingTop:0,paddingLeft:8,paddingBottom:0,paddingRight:8,transform:"rotate(180deg)"},"& .panel-heading > .panel-title > a.collapsed:after":{transform:"rotate(90deg)"},"& .panel-collapse":{padding:"10px 10px 10px 40px"}},tutorialContainer:{display:"flex"},tutorStep:{backgroundColor:"#f3f2f1",padding:20,flex:"1 1 0px"},stepSeparator:{marginLeft:16,marginRight:16,display:"flex",alignItems:"center"},titleSecondary:{paddingBottom:4,marginBottom:4,color:"#605e5c",fontSize:14}}}},564:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialAccordionView=t.StyledTutorialAccordionView=void 0;var n=s(i(565)),a=s(i(4)),r=s(i(243)),o=i(560);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e}function p(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t,i){return(g="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return c(this,t),p(this,h(t).apply(this,arguments))}return m(t,n.default.View),u(t,[{key:"initialize",value:function(e){var t=e.title,i=e.subtitle,n=e.tutorStepComponents,a=e.accordion,r=e.expanded,o=void 0===r||r;this.title=t,this.subtitle=i,this.tutorStepComponents=n,this.accordion=a,this.expanded=o}},{key:"render",value:function(){return r.default.render(a.default.createElement(o.StyledTutorialAccordion,{title:this.title,subtitle:this.subtitle,tutorStepComponents:this.tutorStepComponents,accordion:this.accordion,expanded:this.expanded}),this.el),this}},{key:"remove",value:function(){return r.default.unmountComponentAtNode(this.el),g(h(t.prototype),"remove",this).call(this)}}]),t}();t.StyledTutorialAccordionView=v;var b=function(e){function t(){return c(this,t),p(this,h(t).apply(this,arguments))}return m(t,n.default.View),u(t,[{key:"initialize",value:function(e){var t=e.title,i=e.subtitle,n=e.tutorStepComponents,a=e.accordion,r=void 0===a||a,o=e.expanded,s=void 0===o||o;this.title=t,this.subtitle=i,this.tutorStepComponents=n,this.accordion=r,this.expanded=s}},{key:"render",value:function(){return r.default.render(a.default.createElement(o.TutorialAccordion,{title:this.title,subtitle:this.subtitle,tutorStepComponents:this.tutorStepComponents,accordion:this.accordion,expanded:this.expanded}),this.el),this}},{key:"remove",value:function(){return r.default.unmountComponentAtNode(this.el),g(h(t.prototype),"remove",this).call(this)}}]),t}();t.TutorialAccordionView=b},565:function(e,t){e.exports=o},58:function(e,t){e.exports=i},59:function(e,t){e.exports=n}})}.apply(t,n))||(e.exports=a)},nhz9:function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("5O4e"),i("Glrc"),i("5iHu"),i("9u7Z")],void 0===(a=function(e,t,i,n,a,r){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=587)}({10:function(e,t){e.exports=i},13:function(e,t){e.exports=n},45:function(e,t){e.exports=a},491:function(e,t){e.exports=r},587:function(e,t,i){e.exports=i(588)},588:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Treeview",{enumerable:!0,get:function(){return n.Treeview}});var n=i(589)},589:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Treeview=void 0;var n=d(i(9)),a=d(i(45)),r=d(i(8)),o=i(10),s=i(491),l=d(i(590)),c=i(591);function d(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,h(t).apply(this,arguments))}var i,d,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n.default.View),i=t,(d=[{key:"initialize",value:function(e,t){var i=this;this.node=e,this.title=this.node.title,this.options=r.default.defaults(t,{i18n:r.default.identity,actions:[],setLeafState:function(){return{shouldSetState:!1,stateValue:""}},maxLength:15,placeHolderText:"search"}),this.i18n=this.options.i18n,this.children=[],r.default.each(this.node.children,function(e,t){return i.children.push(new c.TreeNode(e,r.default.defaults({level:1,setSize:i.node.children.length,posInSet:t+1},i.options)))}),this.searchBox=new s.SearchBox({placeholder:this.options.placeHolderText,maxLength:this.options.maxLength,value:"",iconClasses:["glyphicon","glyphicon-search"]}),this.searchBox.on("search",function(e){return i.onSearch(e)})}},{key:"render",value:function(){var e=this;return this.$el.html((0,l.default)(this)),this.searchBox.setElement(this.$(".search-box-container")).render(),r.default.each(this.children,function(t){return t.setElement(e.$("#".concat(t.nodeId))).render()}),r.default.defer(function(){var t=e.$el.find(".children-container.show > .node-container > .tree-node-container").first();e.updateTabIndex(t)}),this}},{key:"resetSearchResult",value:function(){this.searchBox.viewModel.value(""),r.default.each(this.children,function(e){return e.resetSearchResult()})}},{key:"updateView",value:function(){r.default.each(this.children,function(e){return e.updateView()})}},{key:"onSearch",value:function(e){var t=!1,i=0;r.default.each(this.children,function(n){n.searchInvoked(e)&&(t=!0,i+=1)}),this.hasSearchResult=t,t?(this.$(".empty-result-message").addClass("hide"),this.$(".search-result-tree").removeClass("hide"),this.$(".search-result.live-region").text(this.i18n.getString("Found {{totalCount}} Results",{totalCount:i}))):(this.$(".empty-result-message").removeClass("hide"),this.$(".search-result-tree").addClass("hide"),this.$(".search-result.live-region").text(this.i18n.getString("TreeView_Search_Result_Empty_Message")))}},{key:"onKeyDown",value:function(e){if(e.altKey||e.ctrlKey||e.shiftKey&&e.keyCode!==o.keyCode.Tab)return!0;var t=(0,a.default)(e.target);if(!t.is('[role="treeitem"]'))return!0;switch(e.keyCode){case o.keyCode.Enter:case o.keyCode.Space:t.is(".tree-node-parent")&&t.find('> .grouped-node-title-container[role="button"]').click();break;case o.keyCode.ArrowLeft:if(t.is(".tree-node-parent")&&"true"===t.attr("aria-expanded"))t.find('> .grouped-node-title-container[role="button"]').click();else{var i=t.parents('[role="treeitem"]').first();this.setFocus(i)}break;case o.keyCode.ArrowRight:if(t.is(".tree-node-parent"))if("false"===t.attr("aria-expanded"))t.find('> .grouped-node-title-container[role="button"]').click();else{var n=t.find('[role="treeitem"]').first();this.setFocus(n)}else;break;case o.keyCode.ArrowUp:var r=this.$el.find(".children-container.show > .node-container > .tree-node-container"),s=r.index(t);if(s>0){var l=r.eq(s-1);this.setFocus(l)}break;case o.keyCode.ArrowDown:var c=this.$el.find(".children-container.show > .node-container > .tree-node-container"),d=c.index(t);if(d>=0&&d<c.length-1){var u=c.eq(d+1);this.setFocus(u)}break;default:return!0}return e.stopPropagation(),!1}},{key:"setFocus",value:function(e){e.focus(),this.updateTabIndex(e)}},{key:"updateTabIndex",value:function(e){var t=this.$el.find(".children-container.show > .node-container > .tree-node-container"),i=t.find('> a[role="button"]');t.attr("tabindex","-1"),i.attr("tabindex","-1"),e.attr("tabindex",0),e.find('> a[role="button"]').attr("tabindex","0")}},{key:"events",get:function(){var e=this;return{'keydown [role="treeitem"]':function(t){return e.onKeyDown(t)}}}}])&&p(i.prototype,d),u&&p(i,u),t}();t.Treeview=f},590:function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="treeview"><div class="search-box-container"></div><div'+n.attr("class",n.classes(["empty-result-message",e.length?"hide":""],[!1,!0]),!1,!0)+">"+n.escape(null==(t=a.getString("TreeView_Search_Result_Empty_Message"))?"":t)+'</div><div class="search-result live-region sr-only" aria-live="polite" aria-atomic></div><div'+n.attr("class",n.classes(["search-result-tree",e.length?"":"hide"],[!1,!0]),!1,!0)+' role="tree"'+n.attr("aria-label",a.getString("TreeView_Search_Result_Label"),!0,!0)+'><div class="children-container show" role="presentation">',function(){var t=e;if("number"==typeof t.length)for(var a=0,r=t.length;a<r;a++){var o=t[a];i=i+'<div class="node-container"'+n.attr("id",o.nodeId,!0,!0)+' role="presentation"></div>'}else for(var a in r=0,t)r++,o=t[a],i=i+'<div class="node-container"'+n.attr("id",o.nodeId,!0,!0)+' role="presentation"></div>'}.call(this),i+="</div></div></div>"}.call(this,"children"in a?a.children:"undefined"!==typeof children?children:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},591:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeNode=void 0;var n=o(i(9)),a=o(i(8)),r=o(i(592));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var i,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n.default.View),i=t,(o=[{key:"initialize",value:function(e,i){var n=this;this.node=e,this.data=e.data,this.title=this.node.title,this.nodeId=a.default.uniqueId("treenode_"),this.isExpanded=!1,this.isHidden=!1,this.i18n=i.i18n,this.actions=i.actions,this.setLeafState=i.setLeafState,this.level=i.level,this.setSize=i.setSize,this.posInSet=i.posInSet,this.hasSearchResult=!0,this.children=[],a.default.each(this.node.children,function(e,r){return n.children.push(new t(e,a.default.defaults({level:n.level+1,setSize:n.node.children.length,posInSet:r+1},i)))})}},{key:"render",value:function(){var e=this;0===this.children.length&&(this.state=this.setLeafState(this.data));var t=this.$el.find('[role="treeitem"]').first().attr("tabindex");return this.$el.html((0,r.default)(this)),a.default.each(this.children,function(t){return t.setElement(e.$("#".concat(t.nodeId))).render()}),"0"===t&&a.default.defer(function(){e.$el.find('[role="treeitem"]').first().attr("tabindex",t)}),this}},{key:"onGroupedNodeClicked",value:function(e){e.stopPropagation(),this.isExpanded?this.collapse():this.expand()}},{key:"collapse",value:function(){this.isExpanded=!1,a.default.each(this.children,function(e){return e.collapse}),this.render();var e=this.$el.find('> [role="treeitem"]');e.attr("tabindex","0").attr("aria-hidden","true"),e.focus()}},{key:"expand",value:function(){this.isExpanded=!0,this.render();var e=this.$el.find('> [role="treeitem"]');e.attr("tabindex","0").attr("aria-hidden","false"),e.focus()}},{key:"hide",value:function(){this.isHidden=!0,this.collapse()}},{key:"show",value:function(){this.isHidden=!1,this.expand()}},{key:"searchInvoked",value:function(e,t){this.searchTerm=e;var i=!1,n=!1,r=this.title.toLowerCase().indexOf(e.toLowerCase());if(this.caseMatchedSearchTerm="",r>=0){var o=r+e.length;this.caseMatchedSearchTerm=this.title.substring(r,o),i=!0,n=!0}return a.default.each(this.children,function(t){t.searchInvoked(e,n)&&(i=!0)}),i||t?this.show():this.hide(),i}},{key:"resetSearchResult",value:function(){this.searchTerm="",a.default.each(this.children,function(e){return e.resetSearchResult()}),this.isHidden=!1,this.collapse()}},{key:"updateView",value:function(){a.default.each(this.children,function(e){return e.updateView()}),this.render()}},{key:"onActionLinkClicked",value:function(e){e.stopPropagation();var t=e.currentTarget.dataset.id,i="action-index-".length,n=parseInt(t.substring(i),10);this.actions[n].callback(this.node)}},{key:"events",get:function(){return{"click .grouped-node-title-container":"onGroupedNodeClicked","click .action-link":"onActionLinkClicked"}}}])&&l(i.prototype,o),s&&l(i,s),t}();t.TreeNode=p},592:function(e,t,i){"use strict";var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s,l,c,d,u,p){if(i=i+"<div"+n.attr("class",n.classes(["tree-node-container",(0===r.length?"":"tree-node-parent ")+(s?"hide":"show")],[!1,!0]),!1,!0)+' role="treeitem"'+n.attr("aria-level",l,!0,!0)+n.attr("aria-setsize",d,!0,!0)+n.attr("aria-posinset",c,!0,!0)+n.attr("aria-expanded",0===r.length?void 0:o?"true":"false",!0,!0)+' tabindex="-1">',0===r.length){i=i+"<span>"+(null==(t=p.replace(a,"<b>"+a+"</b>"))?"":t)+"</span>";var g=0;if(u.shouldSetState)i=i+'<span class="state-value-container">'+n.escape(null==(t=u.stateValue)?"":t)+"</span>";else for(;g<e.length;)0!==g&&(i+='<span class="action-separator">|</span>'),i=i+'<a class="action-link" href="javascript:void(0)"'+n.attr("data-id","action-index-"+g,!0,!0)+' role="button" tabindex="-1">'+n.escape(null==(t=e[g++].title)?"":t)+"</a>"}else i=i+'<div class="grouped-node-title-container clickable" role="button" tabindex="-1"><span'+n.attr("class",n.classes(["glyphicon",o?"glyphicon-triangle-bottom":"glyphicon-triangle-right"],[!1,!0]),!1,!0)+"></span><span>"+(null==(t=p.replace(a,"<b>"+a+"</b>"))?"":t)+"</span></div><div"+n.attr("class",n.classes(["children-container",o?"show":"hide"],[!1,!0]),!1,!0)+' role="group"'+n.attr("aria-hidden",o?"false":"true",!0,!0)+">",function(){var e=r;if("number"==typeof e.length)for(var t=0,a=e.length;t<a;t++){var o=e[t];i=i+'<div class="node-container"'+n.attr("id",o.nodeId,!0,!0)+' role="presentation"></div>'}else for(var t in a=0,e)a++,o=e[t],i=i+'<div class="node-container"'+n.attr("id",o.nodeId,!0,!0)+' role="presentation"></div>'}.call(this),i+="</div>";i+="</div>"}.call(this,"actions"in a?a.actions:"undefined"!==typeof actions?actions:void 0,"caseMatchedSearchTerm"in a?a.caseMatchedSearchTerm:"undefined"!==typeof caseMatchedSearchTerm?caseMatchedSearchTerm:void 0,"children"in a?a.children:"undefined"!==typeof children?children:void 0,"isExpanded"in a?a.isExpanded:"undefined"!==typeof isExpanded?isExpanded:void 0,"isHidden"in a?a.isHidden:"undefined"!==typeof isHidden?isHidden:void 0,"level"in a?a.level:"undefined"!==typeof level?level:void 0,"posInSet"in a?a.posInSet:"undefined"!==typeof posInSet?posInSet:void 0,"setSize"in a?a.setSize:"undefined"!==typeof setSize?setSize:void 0,"state"in a?a.state:"undefined"!==typeof state?state:void 0,"title"in a?a.title:"undefined"!==typeof title?title:void 0),i}},8:function(t,i){t.exports=e},9:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},nqE1:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t+='<div class="location-recommendation-container form-group" data-bind="visible: hasRecommendation">',i&&(t+='<div class="row"><div class="col-sm-12"><div class="location-recommendation-map-container"></div></div></div>'),t=t+'<div class="alert alert-recommendation" style="line-height: 10px"><div class="alert-info-inline collapsed" data-toggle="collapse" data-target="#location-recommendation-body-container" data-bind="click: clickCollapse"><a class="spritedimagealign" data-bind="css: isExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></a><span class="recommendation-icon">&nbsp;</span><span class="clickable" tabindex="0" data-bind="html: banner"></span></div></div><div class="location-recommendation-body collapse" id="location-recommendation-body-container"><div class="form-group row"><div class="col-sm-6"><div class="location-recommendation-grid-container"></div></div></div><div class="form-group row"><div class="col-sm-12"><input class="apply btn btn-primary" type="button"'+n.attr("value",e.getString("Inline_Location_Recommendation_Apply"),!0,!0)+' data-bind="css: {disabled: !isActionButtonEnabled()}"></div></div></div></div>'}.call(this,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0,"showMap"in i?i.showMap:"undefined"!==typeof showMap?showMap:void 0),t}},"nza/":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("7XbR"),c=i.n(l),d=i("syDw"),u=i.n(d),p=i("UT4o"),g=i.n(p),h=i("5C8L"),m=i.n(h),f=window.globalLegacySchema.get("AdGroup"),v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OptimizeForClicks",i=arguments.length>1?arguments[1]:void 0;Object(n.a)(this,e),m.a.properties(this,f,["AdRotation"],{AdRotation:t}),g.a.extend(this,{disableRotationOptions:i})},b=i("kh6y"),y=i.n(b);i.d(t,"a",function(){return w});var S=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OptimizeForClicks",t=arguments.length>1?arguments[1]:void 0;this.viewModel=new v(e,t)}},{key:"render",value:function(){return this.$el.html(y()({i18n:S})),c.a.applyBindings(this.viewModel,this.el),this}},{key:"getValues",value:function(){return this.viewModel.toObject()}},{key:"validate",value:function(){return this.viewModel.validate()}}]),t}(u.a.View)},oFK3:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="action-list action-list--picker btn-group"><button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="listbox"><span class="action-list--picker__selected" data-bind="html: selectedText"></span><span class="caret"></span></button><ul class="dropdown-menu" data-bind="foreach: items"><li data-bind="css: { selected: $data == $root.selected() }"><a class="action-list__item"'+n.attr("href",e?"#":"javascript:void(0);",!0,!0)+" data-bind=\"text: text, attr: { 'data-index': $index, 'data-name': name }\"></a></li></ul></div>"}.call(this,"useHash"in i?i.useHash:"undefined"!==typeof useHash?useHash:void 0),t}},oR4z:function(e,t,i){var n,a;n=[i("syDw"),i("UT4o"),i("7XbR"),i("+PqR"),i("KQWZ"),i("AQBV"),i("6mWt"),i("GbM9"),i("YK3D")],void 0===(a=function(e,t,i,n,a,r,o,s,l){var c=window.globalLegacyI18n.get("module/extension/requirejs/i18n!global"),d=o.default||o;return e.View.extend({initialize:function(e){if(this.options=e||{},t.defaults(this.options,{template:a,id:void 0,pageSize:void 0,totalCount:void 0,pageCount:void 0,currentPage:1,refreshTriggers:[],enablePageJump:!0,features:{pageSizeSelector:!1,saveState:!0,loadState:!1},pageSizes:l.Permissions&&l.Permissions.Support500RowsInGrid?[20,50,100,200,500]:[20,50,100,200]}),this.options.pageSize=this.options.pageSize||this.options.pageSizes&&this.options.pageSizes[0]||20,!this.options.totalCount&&this.options.features.pageSizeSelector)throw new Error("TotalCount must be specified in order to opt Page Size Selector");this._initializeViewModel(),this._viewModel.value.subscribe(t.bind(this.trigger,this,"change")),this.currentPage=this._viewModel.currentPage,this.pageSize=this._viewModel.pageSize,this.pageCount=this._viewModel.pageCount,this.value=this._viewModel.value,this.refresh=t.bind(this._updateViewModel,this,!0),this.readyPromise=this._initStatePersistence().then(t.bind(function(){this._initializeSubscriptions(),this._initializeLayout()},this))},destroy:function(){i.cleanNode(this.$el),this.$el.empty()},_initializeLayout:function(){var e=t.isFunction(this.options.template)?this.options.template({i18n:c,features:this.options.features}):this.options.template;this.$el.html(e),i.applyBindings(this._viewModel,this.el)},_initializeViewModel:function(){var e={pageSize:i.observable(),totalCount:i.observable(),currentPage:i.observable(),nextPage:t.bind(this._nextPage,this),prevPage:t.bind(this._prevPage,this),enablePageJump:i.observable(this.options.enablePageJump),features:this.options.features,pageSizes:this.options.pageSizes};e.pageCount=this.options.totalCount?i.computed(function(){return Math.ceil(e.totalCount()/e.pageSize())}):i.observable(),t.extend(e,{pages:i.computed(function(){return e.pageCount()>=1?t.range(1,e.pageCount()+1):[1]}),isFirstPage:i.computed(function(){return 1==e.currentPage()}),isLastPage:i.computed(function(){return e.currentPage()==e.pageCount()}),onKeyPress:function(e,t){return 13!==(t.which||t.keyCode)||(t.target.blur(),!1)}}),this._viewModel=e,this._updateViewModel(!1),e.value=i.observable(),this._updateValue(),e.pageSize.subscribe(t.bind(this._updateValue,this)),e.currentPage.subscribe(t.bind(this._updateValue,this))},_initializeSubscriptions:function(){var e=this;t.each(e.options.refreshTriggers,function(i){i(t.bind(e._updateViewModel,e,!0))})},_nextPage:function(){this._viewModel.isLastPage()||this._viewModel.currentPage(this._viewModel.currentPage()+1)},_prevPage:function(){this._viewModel.isFirstPage()||this._viewModel.currentPage(this._viewModel.currentPage()-1)},_updateViewModel:function(e){this._setValue("pageSize",this.options.pageSize,e),this._setValue("totalCount",this.options.totalCount,e),this._setValue("currentPage",this.options.currentPage,e),i.isComputed(this._viewModel.pageCount)||this._setValue("pageCount",this.options.pageCount,e)},_setValue:function(e,i,n){var a=this._viewModel[e](),r=t.isFunction(i)?i():i;n&&!t.isFunction(i)||a!=r&&this._viewModel[e](r)},_updateValue:function(){var e=this._viewModel.value,i=n.fromLocalToFloat(this._viewModel.currentPage(),0);!t.isNumber(this._viewModel.currentPage())&&t.isNumber(i)&&this._viewModel.currentPage(i),!t.isNumber(i)&&t.isNumber(e().currentPage)?this._viewModel.currentPage(e().currentPage):this._viewModel.pageCount()>0&&this._viewModel.currentPage()>this._viewModel.pageCount()?this._viewModel.currentPage(this._viewModel.pageCount()):this._viewModel.currentPage()<1&&this._viewModel.currentPage(1),e()&&e().pageSize==this._viewModel.pageSize()&&e().currentPage==this._viewModel.currentPage()||e({pageSize:this._viewModel.pageSize(),currentPage:this._viewModel.currentPage(),skip:(this._viewModel.currentPage()-1)*this._viewModel.pageSize(),take:this._viewModel.pageSize()})},_initStatePersistence:function(){var e;if(this.options.features.loadState){if(!this.options.id)throw new Error('You must specifiy "id" option to use statePersistance');e=this._loadState()}else e=$.Deferred().resolve().promise();return e.then(t.bind(this._initSaveState,this))},_initSaveState:function(){this.options.id&&this._viewModel.pageSize.subscribe(t.bind(function(e){t.result(r.get("permissions"),"IsUsePreferencesServiceEnabled")?d.setAtUserLevel({Name:"WebApp.CampaignUI.pager_"+this.options.id,Data:{pageSize:e}}):s.setItem("permanent","pager_"+this.options.id,{pageSize:e})},this))},_loadState:function(){return t.result(r.get("permissions"),"IsUsePreferencesServiceEnabled")?d.initialize().then(t.bind(function(){var e=d.findByName("WebApp.CampaignUI.pager_"+this.options.id)||{};e.Data&&e.Data.pageSize&&this._viewModel.pageSize(e.Data.pageSize)},this)):s.getItem("pager_"+this.options.id).then(t.bind(function(e){e.permanent.pageSize&&this._viewModel.pageSize(e.permanent.pageSize)},this))}})}.apply(t,n))||(e.exports=a)},"obD+":function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("7XbR")],void 0===(a=function(e,t,i){"use strict";var n=new RegExp("^(http|https)(://)(.+)","i");return function(e){this.maxFullUrlLength=e.maxFullUrlLength||2048,this.protocols=[{Value:"https",Text:"https://"},{Value:"http",Text:"http://"}],e.url&&0!==e.url.indexOf("http")&&(e.url="https://"+e.url),this.errorContainer=i.observable(""),this.errorMessage=i.observable(""),this.showErrors=i.observable(!1),this.protocol=i.observable(),this.urlWithoutProtocol=i.observable(),this.fullUrl=i.computed({read:function(){if(!this.urlWithoutProtocol()||t.isEmpty(this.urlWithoutProtocol().trim()))return null;var e=n.exec(this.urlWithoutProtocol().trim());return e&&(this.protocol(e[1]),this.urlWithoutProtocol(e[3])),this.protocol()+"://"+this.urlWithoutProtocol().trim()},write:function(e){var t=n.exec(e);this.protocol(t?t[1]:"https"),this.urlWithoutProtocol(t?t[3]:"")}},this),this.errorContainer(e.errorContainer),this.fullUrl(e.url),this.isDisabled=i.observable(!1),this.maxLength=i.computed(function(){return this.maxFullUrlLength-this.protocol().length-"://".length},this),this.hasErrors=i.observable(!1)}}.apply(t,n))||(e.exports=a)},ocoE:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("YK3D"),c=i.n(l),d=i("7XbR"),u=i.n(d),p=i("syDw"),g=i.n(p),h=i("jQIp"),m=i.n(h),f=i("VSwD"),v=i.n(f),b=i("UT4o"),y=i.n(b),S=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),w=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.exclusionType,r=void 0===a?"site":a,o=i.exclusions,s=void 0===o?"":o,l=i.exclusionType2String,c=void 0===l?{}:l,d=i.entitySeparator,p=void 0===d?"":d,g=i.campaignExclusions,h=void 0===g?"":g;Object(n.a)(this,e),this.errors=u.a.observableArray(),this.exclusions=u.a.observable(s||""),this.numbersExcluded=u.a.computed(function(){var e=y.a.isEmpty(t.exclusions())?"":t.exclusions().replace(p,""),i=y.a.size(y.a.compact(e.split("\n")));return S.get(c[r].numberExcluded).replace("{0}",i)}),this.campaignExclusions=u.a.observable(h||""),this.isExpanded=u.a.observable(!1)},C=i("AQBV"),x=i.n(C),k=i("1gQY"),A=i.n(k);i.d(t,"a",function(){return E});var T=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),_={site:{instruction:"CampaignCreate_WebSiteExclusions_Instruction",label:"Entity_Sites",numberExcluded:"AdvancedSetting_EditWebSiteExclusionDesc"},ip:{instruction:"CampaignCreate_IPExclusions_Instruction",label:"Entity_IPs",numberExcluded:"AdvancedSetting_EditIPExclusionDesc"}},E=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclusionType,i=void 0===t?"site":t,n=e.exclusions,a=void 0===n?"":n,r=e.campaignExclusions,o=void 0===r?"":r,s=e.level,l=void 0===s?"campaign":s;this.viewModel=new w({exclusionType:i,exclusions:a,exclusionType2String:_,entitySeparator:"-------------------------",campaignExclusions:o}),this.exclusionType=i,this.level=l,this.isNewUI=x.a.get("IsNewUI"),this.isInSiteExclusionListPilot=c.a.Permissions.IsManagerAccountSharedWebsiteExclusionsEnabled}},{key:"showSettings",value:function(){this.viewModel.isExpanded(!0)}},{key:"hideSettings",value:function(){this.viewModel.isExpanded(!1)}},{key:"render",value:function(){var e="";if(this.isNewUI&&this.isInSiteExclusionListPilot&&"site"===this.exclusionType){var t="?uid=".concat(A.a.get("user_id"),"&cid=").concat(A.a.get("customer_id"),"&aid=").concat(A.a.get("account_id"));e="/campaign/vnext/siteexclusionlists/viewlists".concat(t)}return this.$el.html(v()({i18n:T,instruction:T.get(_[this.exclusionType].instruction),exclusionType:this.exclusionType,labelText:T.get(_[this.exclusionType].label),isAdGroupLevel:"adgroup"===this.level,isNewUI:this.isNewUI,isInSiteExclusionListPilot:this.isInSiteExclusionListPilot,siteExclusionListHref:e})),u.a.applyBindings(this.viewModel,this.el),this}},{key:"getValues",value:function(){return(this.viewModel.exclusions()||"").replace("-------------------------","")}},{key:"clearApiErrors",value:function(){this.viewModel.errors([])}},{key:"showErrors",value:function(e){if(e){if(this.$("#".concat(this.exclusionType,"ExclusionSettings")).collapse("show"),m.a.isArray(e.InvalidEntities)&&!m.a.isEmpty(e.InvalidEntities)){var t=e.InvalidEntities;m.a.isArray(e.ValidEntities)&&!m.a.isEmpty(e.ValidEntities)&&(t.push("-------------------------"),t=m.a.union(t,e.ValidEntities)),this.viewModel.exclusions(t.join("\r\n"))}m.a.isArray(e.EntityErrors)&&!m.a.isEmpty(e.EntityErrors)&&this.viewModel.errors(e.EntityErrors)}}},{key:"events",get:function(){return{"show.bs.collapse":"showSettings","hide.bs.collapse":"hideSettings"}}}]),t}(g.a.View)},owKP:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i,a,r){t=t+'<select class="form-control flex-row-fixed url-protocol"'+n.attr("id",e,!0,!0)+' data-bind="options: protocols, optionsText: &quot;Text&quot;, optionsValue: &quot;Value&quot;, value: protocol, disable: isDisabled"'+n.attr("aria-labelledby",i,!0,!0)+'></select><span class="flex-row-dynamic"><input class="form-control url-field"'+n.attr("placeholder",r,!0,!0)+' type="text" data-bind="value: urlWithoutProtocol, valueUpdate: &quot;input&quot;, attr: { maxlength: maxLength, &quot;aria-describedby&quot;: errorContainer, &quot;aria-invalid&quot;: errorMessage().length &gt; 0 }, disable: isDisabled, css: {error: hasErrors}"'+n.attr("aria-labelledby",i,!0,!0)+n.attr("aria-required",a.toString(),!0,!0)+'></span>\x3c!--ko if: errorMessage().length > 0--\x3e<div class="error is-error" data-bind="html: errorMessage"></div>\x3c!-- /ko--\x3e'}.call(this,"ariaId"in i?i.ariaId:"undefined"!==typeof ariaId?ariaId:void 0,"ariaLabelledby"in i?i.ariaLabelledby:"undefined"!==typeof ariaLabelledby?ariaLabelledby:void 0,"required"in i?i.required:"undefined"!==typeof required?required:void 0,"urlPlaceholder"in i?i.urlPlaceholder:"undefined"!==typeof urlPlaceholder?urlPlaceholder:void 0),t}},p0Zs:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e,i){t=t+"<div"+n.attr("class",n.classes([e||""],[!0]),!1,!0)+'><div data-ref="childView"></div><input class="grid-edit-menu grid-popupeditor-save btn btn-primary" type="button"'+n.attr("value",i.getString("Save"),!0,!0)+' data-bind="enable: isValid"><input class="grid-popupeditor-cancel btn btn-default grid-edit-menu" type="button"'+n.attr("value",i.getString("Cancel"),!0,!0)+'></div><ul class="grid-error-list" data-bind="visible: error().length &gt; 0"><div class="grid-error spritedimage"></div><span class="error" data-bind="html: error"></span></ul>'}.call(this,"customClass"in i?i.customClass:"undefined"!==typeof customClass?customClass:void 0,"i18n"in i?i.i18n:"undefined"!==typeof i18n?i18n:void 0),t}},p8zf:function(e,t,i){"use strict";var n=i("a28/"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("/xyZ"),h=i.n(g),m=i("ITOZ"),f=i("+9/h"),v=i("ORPc"),b=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.resourceName,a=e.isShoppingCampaign,r=void 0!==a&&a,o=e.listenToLocationCriterion,s=void 0===o||o,l=e.customizedTemplates,c=void 0===l?{}:l,u=e.useLocationControl,p=void 0===u||u,g=e.initAudienceAssociationView,h=void 0===g||g,m=e.deps,b=void 0===m?{}:m,y=e.isForVNext,S=void 0!==y&&y,w=e.perfMarker,C=void 0===w?null:w,x=e.isAudienceCreationWorkflow,k=void 0!==x&&x,A=e.isFromAudienceDashboard,T=void 0!==A&&A;if(this.jsdata=f.a.get("component/js-data-campaign/index"),this.resourceName=i,this.listenToLocationCriterion=s,this.useLocationControl=p,this.deps=b,this.isForVNext=S,this.perfMarker=C,this.currentVirtualId=-1e6,h){var _=null;this.perfMarker&&(_=this.perfMarker.createChild("AudienceAssociationView",{autoEnd:!0})).willFetchFile();var E=f.a.get("campaignui/feature/audience/association/view/aim-component-view");this.audienceAssociationView=new E({isShoppingCampaign:r,customizedTemplates:c,deps:b,isForVNext:S,perfMarker:_,isAudienceCreationWorkflow:k,isFromAudienceDashboard:T}),this.audienceAssociationView.render(),this.listenTo(this.audienceAssociationView,"selectionChanged",function(){return t.onAudienceSelectionChangedAsync()})}this.criterionsByType=d.a.reduce(v.typeMapping,function(e,t){return d.a.extend(e,Object(n.a)({},t,[]))},{}),this.parentLevelTogglesByType=d.a.reduce(v.typeMapping,function(e,t){return d.a.extend(e,Object(n.a)({},t,!1))},{}),s&&(this.onLocationCriterionChange(),this.jsdata.Intermediate.subscribe(i,function(){return t.onLocationCriterionChange()}),this.jsdata.Intermediate.destroyAll(i))}},{key:"reloadAudienceData",value:function(e){return this.audienceAssociationView?this.audienceAssociationView.reloadAudienceData(e):h.a.resolve(!1)}},{key:"setOnAudiencesTargetChangeCallback",value:function(e){this.audienceAssociationView&&(this.audienceAssociationView.onAudiencesTargetChange=e)}},{key:"setParentLevelToggle",value:function(e,t){d.a.has(this.parentLevelTogglesByType,e)&&(this.parentLevelTogglesByType[e]=!!t)}},{key:"getParentLevelToggle",value:function(e){return this.parentLevelTogglesByType[e]}},{key:"initializeWithAdGroupAsync",value:function(e,t){var i=this,n=f.a.get("campaignui/feature/audience/association/view/aim-component-view");this.audienceAssociationView=new n({campaignId:e,adGroupId:t,deps:this.deps,isForVNext:this.isForVNext}),this.listenTo(this.audienceAssociationView,"selectionChanged",function(){return i.onAudienceSelectionChangedAsync()}),this.audienceAssociationView.render();var a=this.fetchAdGroupAudienceCriterions(e,t),r=this.fetchCriterions(e,t);return h.a.all([a,r])}},{key:"initializeWithCampaignAsync",value:function(e){return this.fetchCriterions(e,"")}},{key:"getNewVirtualId",value:function(){return this.currentVirtualId=this.currentVirtualId-1,this.currentVirtualId}},{key:"getSnapshot",value:function(e){var t=d.a.values(v.typeMapping),i=Object(m.cloneDeep)(this.getAllComputedByTypes(t));return e&&i.forEach(function(e){var t=e.Criterion;t&&null==t.CashbackPercent&&(t.CashbackPercent=-1)}),i}},{key:"fetchCriterions",value:function(e,t,i){var n=this,a=f.a.get("campaignui/feature/base-targets/util/criterionLoader"),r=i||d.a.compact(["AgeCriterion","GenderCriterion","DeviceCriterion","CompanyNameCriterion","IndustryCriterion","JobFunctionCriterion",this.listenToLocationCriterion&&"LocationCriterion"]);return a.load(e,t,r).then(function(i){var a=[];return d.a.each(i,function(i){var n=v.criterionHelper.reformatFetchedCriterion(i,e,t);a.push(n)}),n.createMultipleAsync(a)})}},{key:"fetchAdGroupAudienceCriterions",value:function(){var e=this;return this.audienceAssociationView.ensureLoadedAsync().then(function(){return e.onAudienceSelectionChangedAsync()})}},{key:"createAsync",value:function(e){var t=this,i=h.a.resolve(!0);return d.a.has(this.criterionsByType,e.Criterion.Type)?(e.Id||(e.Id=this.getNewVirtualId()),"Audience"===e.Criterion.Type&&d.a.contains(d.a.pluck(d.a.pluck(this.criterionsByType.Audience,"Criterion"),"AudienceName"),e.Criterion.AudienceName)||this.criterionsByType[e.Criterion.Type].push(e),this.useLocationControl&&this.isLocationTypeCriterionType(e.Criterion.Type)&&(i=this.jsdata.Intermediate.create(this.resourceName,e)),i.then(function(){t.trigger("".concat(t.resourceName).concat(e.Criterion.Type,"Changed")),t.trigger("".concat(t.resourceName,"Changed"))})):h.a.resolve(!0)}},{key:"createMultipleAsync",value:function(e){var t=this,i=[],a=d.a.reduce(v.typeMapping,function(e,t){return d.a.extend(e,Object(n.a)({},t,!1))},{});d.a.each(e,function(e){d.a.has(t.criterionsByType,e.Criterion.Type)&&(e.Id||(e.Id=t.getNewVirtualId()),t.criterionsByType[e.Criterion.Type].push(e),a[e.Criterion.Type]=!0,t.useLocationControl&&t.isLocationTypeCriterionType(e.Criterion.Type)&&i.push(e))});var r=h.a.resolve(!0);return i.length>0&&(r=this.jsdata.Intermediate.createMany(this.resourceName,i)),r.then(function(){d.a.each(a,function(e,i){t.trigger("".concat(t.resourceName).concat(i,"Changed"))}),t.trigger("".concat(t.resourceName,"Changed"))})}},{key:"updateAsync",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d.a.has(this.criterionsByType,e.Criterion.Type)){var n=this.criterionsByType[e.Criterion.Type];return d.a.extend(d.a.findWhere(n,{Id:e.Id}),e),h.a.resolve().then(function(){return i||(t.trigger("".concat(t.resourceName).concat(e.Criterion.Type,"Changed")),t.trigger("".concat(t.resourceName,"Changed"))),!0})}return h.a.resolve(!1)}},{key:"fillCriterionsWithId",value:function(e){var t=this;d.a.each(e,function(e){if(d.a.has(t.criterionsByType,e.Criterion.Type)&&e.Id){var i=t.criterionsByType[e.Criterion.Type],n=d.a.find(i,function(t){return d.a.isEqual(t.Criterion,e.Criterion)});d.a.extend(n,{Id:e.Id})}})}},{key:"getAll",value:function(){return d.a.flatten(d.a.values(this.criterionsByType))}},{key:"getAllByType",value:function(e){return this.criterionsByType[e]}},{key:"getAllByTypes",value:function(e){var t=this,i=[];return d.a.each(e,function(e){return i=i.concat(t.criterionsByType[e])}),i}},{key:"getAllComputedByTypes",value:function(e){var t=this,i=[];return d.a.each(e,function(e){t.parentLevelTogglesByType[e]||(i=i.concat(t.criterionsByType[e]))}),i}},{key:"getById",value:function(e){var t=this.getAll();return d.a.find(t,function(t){return t.Id===e})}},{key:"getAllNoneEmptyTypeKeys",value:function(){var e=this,t=[],i=d.a.keys(this.criterionsByType);return d.a.each(i,function(i){e.criterionsByType[i].length>0&&t.push(i)}),t}},{key:"destroyAsync",value:function(e){var t,i=this,n=h.a.resolve(!0);return d.a.each(this.criterionsByType,function(i){d.a.some(i,function(t){return t.Id===e})&&(t=d.a.first(i).Criterion.Type)}),t&&(this.criterionsByType[t]=d.a.reject(this.criterionsByType[t],function(t){return t.Id===e})),this.isLocationTypeCriterionType(t)&&(n=this.jsdata.Intermediate.destroy(this.resourceName,e)),n.then(function(){i.trigger("".concat(i.resourceName).concat(t,"Changed"),i.criterionsByType[t]),i.trigger("".concat(i.resourceName,"Changed"))})}},{key:"destroyAllAsync",value:function(){var e=this,t=this.getAllNoneEmptyTypeKeys();return this.criterionsByType=d.a.reduce(v.typeMapping,function(e,t){return d.a.extend(e,Object(n.a)({},t,[]))},{}),this.jsdata.Intermediate.destroyAll(this.resourceName).then(function(){d.a.each(t,function(t){e.trigger("".concat(e.resourceName).concat(t,"Changed"),e.criterionsByType[t]),e.trigger("".concat(e.resourceName,"Changed"))})})}},{key:"destroyTargetTypeAsync",value:function(e){var t=this,i=this.criterionsByType[e],n=[];return i&&d.a.each(i,function(e){n.push(t.destroyAsync(e.Id))}),h.a.all(n)}},{key:"hasAudienceRemarketingList",value:function(){var e=this.getAllByType("Audience"),t=d.a.any(e,function(e){return"Remessaging"===e.Criterion.AudienceType||"Product"===e.Criterion.AudienceType||"Custom"===e.Criterion.AudienceType||"RemarketingSimilar"===e.Criterion.AudienceType});return t}},{key:"hasCampaignLevelTargets",value:function(e){return this.getAllByType(e).length<=0||"Campaign"===this.getAllByType(e)[0].LevelOfDetails||"Age"===e||"Gender"===e}},{key:"onAudienceSelectionChangedAsync",value:function(){var e=this,t=this.audienceAssociationView.getAudienceCriterion();if(this.audienceAssociationView&&this.audienceAssociationView.onAudiencesTargetChange){var i=d.a.chain(t).filter(function(e){return e&&e.Criterion&&"InMarket"===e.Criterion.AudienceType}).map(function(e){return{Level:"AdGroup",AudienceCriterion:{AudienceId:e.Criterion.AudienceId}}}).value();this.audienceAssociationView.onAudiencesTargetChange({value:i})}return this.destroyTargetTypeAsync("Audience").then(function(){var i=[];return d.a.each(t,function(t){var n="Excluded"===t.Status?"Negative":"";t.CriterionType="".concat(n).concat(t.Criterion.AudienceType),i.push(e.createAsync(t))}),h.a.all(i)})}},{key:"onLocationCriterionChange",value:function(){var e=this,t=d.a.clone(this.jsdata.Intermediate.getAll(this.resourceName));t=d.a.map(t,function(e){return d.a.pick(e,d.a.identity)});var i={Location:[],Radius:[],NegativeLocation:[]};d.a.each(t,function(e){i[e.Criterion.Type].push(e)});var n=d.a.keys(i);d.a.each(n,function(t){d.a.isEqual(e.criterionsByType[t],i[t])||(e.criterionsByType[t]=i[t],e.trigger("".concat(e.resourceName).concat(t,"Changed"),e.criterionsByType[t]))}),this.trigger("".concat(this.resourceName,"Changed"))}},{key:"getCampaignLocationCriterions",value:function(){var e=d.a.clone(this.jsdata.Intermediate.getAll("CampaignCriterion"));return d.a.filter(e,function(e){return"Location"===e.CriterionType||"Radius"===e.CriterionType||"NegativeLocation"===e.CriterionType})}},{key:"isLocationTypeCriterionType",value:function(e){return"Location"===e||"NegativeLocation"===e||"Radius"===e}},{key:"aimAudienceAssociationView",get:function(){return this.audienceAssociationView}}]),t}(p.a.View);i.d(t,"a",function(){return b})},pC4H:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){i=i+"<div"+n.attr("class",n.classes(["linked-in-target-grid-view","hide",r],[!1,!1,!0]),!1,!0)+"><div"+n.attr("class",n.classes(["target-grid-remove-all-container",a],[!1,!0]),!1,!0)+'><a href="javascript:void(0)" role="button">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Company_Grid_Column_Remove_All"))?"":t)+'</a></div><div class="target-grid"></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"removeAllVisibleClass"in a?a.removeAllVisibleClass:"undefined"!==typeof removeAllVisibleClass?removeAllVisibleClass:void 0,"targetType"in a?a.targetType:"undefined"!==typeof targetType?targetType:void 0),i}},pShd:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.id,o=a.property;i=i+"<div"+n.attr("id",r,!0,!0)+' role="radiogroup"'+n.attr("aria-labelledby",r+"-Label",!0,!0)+n.attr("aria-describedby",r+"-Validation",!0,!0)+">",function(){var s=a.values;if("number"==typeof s.length)for(var l=0,c=s.length;l<c;l++){var d=s[l];i=i+'<div class="radio"><label><input type="radio" role="radio"'+n.attr("name",r,!0,!0)+n.attr("value",e(d),!0,!0)+n.attr("data-bind","checked: "+o+'.radios, attr: { "aria-checked": '+o+".radios }",!0,!0)+">"+n.escape(null==(t=a.valueMessages[l])?"":t)+"</label></div>"}else for(var l in c=0,s)c++,d=s[l],i=i+'<div class="radio"><label><input type="radio" role="radio"'+n.attr("name",r,!0,!0)+n.attr("value",e(d),!0,!0)+n.attr("data-bind","checked: "+o+'.radios, attr: { "aria-checked": '+o+".radios }",!0,!0)+">"+n.escape(null==(t=a.valueMessages[l])?"":t)+"</label></div>"}.call(this),i+="</div>"}.call(this,"String"in a?a.String:"undefined"!==typeof String?String:void 0,"field"in a?a.field:"undefined"!==typeof field?field:void 0),i}},pvZo:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div id="reach-control-sentinel"></div><div class="reach-estimate-control"><div class="panel"><div class="panel-body"><div class="audience-meter-container"></div><div class="estimate-note">'+n.escape(null==(t=e.getString("Audience_Campaign_ReachControl_Note"))?"":t)+'</div><div class="reach-warning alert alert-warning"></div></div></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"q+mR":function(e,t,i){"use strict";i.r(t);var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("Vwpy"),l=i("UT4o"),c=i.n(l),d=i("eRoi"),u=i("adHW"),p=i("kwR5"),g=i("7XbR"),h=i.n(g),m=i("syDw"),f=i.n(m),v=i("5lM/"),b=i.n(v),y=i("aaNW"),S=i.n(y);function w(e){var t=this.bidAdjPercentage(),i=Number(t);return i<0||parseInt(t,10)!==i?"":this.selectedOption()===e[1].key?-i:i}function C(e){var t=this,i=e.bidAdjOptions,n=e.bidMultiplier,a=n<0?i[1].key:i[0].key,r=Math.abs(n);this.availableOptions=h.a.observableArray(i),this.selectedOption=h.a.observable(a),this.bidAdjPercentage=h.a.observable(r),this.bidMultiplier=h.a.pureComputed(function(){return w.call(t,i)}),this.useRecommendationBid=h.a.observable(!1)}var x=function(e){function t(e){var i,a=e.bidAdjOptions,s=e.bidMultiplier,l=e.recommendation;return Object(n.a)(this,t),(i=Object(r.a)(this,Object(o.a)(t).call(this,{bidAdjOptions:a,bidMultiplier:s}))).bidMultiplier=h.a.pureComputed(function(){return i.useRecommendationBid()?l:w.call(Object(p.a)(Object(p.a)(i)),a)}),i}return Object(s.a)(t,e),t}(C),k=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.observable,i=e.field,n=t();this.viewModel=new C({bidAdjOptions:i.values,bidMultiplier:n}),this.viewModel.bidMultiplier.subscribe(function(e){t(e)}),this.field=i}},{key:"render",value:function(){return this.$el.html(b()({size:this.field.schema.maxLength,i18n:this.field.i18n})),h.a.applyBindings(this.viewModel,this.el),this.field.perfMarker&&this.field.perfMarker.done(),this}}]),t}(f.a.View),A=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.observable,i=e.field;this.bidMultiplier=t(),this.recommendation=i.values[0].performance&&i.values[0].performance.SuggestedBid.SuggestBidAdjustmentMultiplier,this.viewModel=new x({bidAdjOptions:i.values[0].selectOptions,bidMultiplier:this.bidMultiplier,recommendation:this.recommendation}),this.viewModel.bidMultiplier.subscribe(function(e){t(e)}),this.field=i}},{key:"render",value:function(){return this.$el.html(S()({size:this.field.schema.maxLength,i18n:this.field.i18n,hasRecommendation:c.a.isNumber(this.recommendation)&&this.recommendation>this.bidMultiplier,performanceMetric:this.field.values[0].performance})),h.a.applyBindings(this.viewModel,this.el),this.field.perfMarker&&this.field.perfMarker.done(),this}}]),t}(f.a.View),T=function(e){return{BidMultiplier:{isValid:function(e){return e<0&&e>=-90||e>=0&&e<=900},message:function(t){return t<0?e.getString("Validation_Number_Range_Between",{min:0,max:90}):e.getString("Validation_Number_Range_Between",{min:0,max:900})}}}},_=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"viewFactory",value:function(e){var t=this,i=e.value,n=e.i18n,a=e.showButtons,r=void 0===a||a,o=e.customValidators,s=void 0===o?T:o,l=e.isRecommendationEnabled,d=void 0!==l&&l,p=e.performance,g=void 0===p?null:p,h=e.template,m=void 0===h?"inline":h,f=e.entityId,v=void 0===f?0:f,b=e.logActivities,y=void 0===b?{suggested:{trace:c.a.noop},manual:{trace:c.a.noop}}:b,S=e.perfMarker,w=void 0===S?null:S,C={BidMultiplier:i},x=[{key:"inc",text:n.getString("BidAdjustment_IncreaseText")},{key:"dec",text:n.getString("BidAdjustment_DecreaseText")}],_=[{property:"BidMultiplier",control:d?A:k,showLabel:!1,i18n:n,perfMarker:w,values:d?[{selectOptions:x,performance:g}]:x,validators:{type:{message:n.getString("Validation_InvalidBidAdjustment")}}}],E=new u.SimpleForm({schema:{name:"BidAdjustment",type:"object",properties:{BidMultiplier:{type:"number",maxLength:5},required:["BidMultiplier"]}},fields:_,model:C,i18n:n,customValidators:s(n),showButtons:r,hasLabels:!d,template:m});return r&&(E.on("save",function(e){d&&t.view.viewControls.BidMultiplier.viewModel.useRecommendationBid()?y.suggested.trace("Apply audience bid adjustment suggestion success for ".concat(g.SuggestionId,", ").concat(v,". Original: ").concat(i,"%, New: ").concat(e.BidMultiplier,"%"),"UpdateAudienceAssociationsBidAjustment"):d&&g&&g.SuggestedBid.SuggestBidAdjustmentMultiplier>i&&y.manual.trace("Change audience bid adjustment suggestion success for ".concat(g.SuggestionId,", ").concat(v,". Original: ").concat(i,"%, New: ").concat(e.BidMultiplier,"%"),"UpdateAudienceAssociationsBidAjustment"),t.trigger("close",e)}),E.on("cancel",function(){t.trigger("close")})),E}},{key:"validate",value:function(){return this.view.validate()}},{key:"currentModel",get:function(){return c.a.defaults({},this.view.currentModel())}},{key:"className",get:function(){return"bid-adjustment-view"}}]),t}(d.DeterministicWrapperView),E=i("muKe"),I=i("ZzSc"),O=i.n(I),P=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){var t=e.i18n,i=e.performance,n=void 0===i?null:i,a=e.logActivities,r=void 0===a?{bidRecommendation:{trace:c.a.noop}}:a;c.a.extend(this,{performance:n,i18n:t,logActivities:r})}},{key:"onApplyBidRecommendation",value:function(){this.logActivities.bidRecommendation.trace("Apply audience bid adjustment suggestion success. New: ".concat(this.performance.SuggestedBid.SuggestBidAdjustmentMultiplier,"%"),"ApplyAudienceAssociationsBidAjustmentFromBulbPopup"),this.trigger("closeBidRecommendation",{BidMultiplier:this.performance.SuggestedBid.SuggestBidAdjustmentMultiplier})}},{key:"template",get:function(){var e=this;return function(){return O()({i18n:e.i18n,performanceMetric:e.performance})}}},{key:"events",get:function(){return{"click .apply-recommendation-button":"onApplyBidRecommendation"}}}]),t}(E.DeterministicView);i.d(t,"BidAdjustmentView",function(){return _}),i.d(t,"BidRecommendationView",function(){return P})},"q//t":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r){i+='<span class="grid-cell-text">',e&&(i=i+'<div class="base-campaign-name">'+n.escape(null==(t=e)?"":t)+"</div>"),i=i+"<a"+n.attr("href",a,!0,!0)+">"+n.escape(null==(t=r)?"":t)+"</a></span>"}.call(this,"baseCampaignName"in a?a.baseCampaignName:"undefined"!==typeof baseCampaignName?baseCampaignName:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0),i}},qBoJ:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="dropdown"><div class="dropdown-toggle clickable" data-toggle="dropdown" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false" data-bind="attr: { value: selectedItem().id}"><span data-bind="text: selectedItem().value"></span><span data-bind="if: showDiff"><span data-bind="html: htmlContent()"></span></span><span class="caret"></span></div><ul class="dropdown-menu" role="menu" data-bind="foreach: dropDownOptions"><li class="dropdown-item" data-bind="css: {disabled: disabled}"><a class="clickable" href="javascript:void(0)" data-bind="click: $parent.selectItem, attr: {id: menuItemId}" role="menuitem"><span data-bind="text: value"></span></a></li></ul></div>'}},qG7Q:function(e,t,i){var n,a;n=[i("7XbR")],void 0===(a=function(e){"use strict";return function(){this.showTesting=e.observable(),this.resultType=e.observable(),this.resultString=e.observable()}}.apply(t,n))||(e.exports=a)},qK2J:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'\x3c!--.location-type-selector.popup-editor(data-bind="style: {top: typeSelectorTopValuePixel(), left: typeSelectorLeftValuePixel()}, visible: typeSelectorVisible()")--\x3e<div class="searchbox"></div><span class="new-location-targeting-prompt" id="LocationTargetingSearchBoxPrompt" data-bind="visible: showPrompt">'+n.escape(null==(t=e.get("LocationTargeting_SearchBoxPrompt"))?"":t)+'</span><div class="new-location-targeting-result" data-bind="visible: showResult"><div class="new-location-targeting-container"><table class="new-location-targeting-grid" data-bind="visible: rows().length &gt; 0" role="presentation"><tbody data-bind="foreach: rows"><tr class="new-search-result-row" data-bind="attr: { &quot;data-id&quot;: locationId }, css: { &quot;selectable&quot;: isSmartCampaign()&amp;&amp;selectionStatusObsv()===&quot;New&quot; }"><td><span data-bind="text: nameToShow, attr: { id: &quot;locationSearchResult-&quot; + locationId }"></span></td>\x3c!-- ko if: selectionStatusObsv()===\'New\'--\x3e<td class="new-location-targeting-grid-include"><a class="new-location-targeting-include-link" data-bind="attr: { &quot;aria-describedby&quot;: &quot;locationSearchResult-&quot; + locationId }" href="javascript:void(0)">'+n.escape(null==(t=e.get("LocationTargeting_IncludeAction"))?"":t)+'</a>\x3c!-- ko if: locationId > 0 && !hideExclude--\x3e<span class="new-location-targeting-separator">|</span><a class="new-location-targeting-exclude-link" data-bind="attr: { &quot;aria-describedby&quot;: &quot;locationSearchResult-&quot; + locationId }" href="javascript:void(0)">'+n.escape(null==(t=e.get("LocationTargeting_ExcludeAction"))?"":t)+'</a>\x3c!-- /ko--\x3e</td>\x3c!-- /ko--\x3e\x3c!-- ko if: selectionStatusObsv()===\'Included\'--\x3e<td class="new-location-targeting-grid-include" data-bind="attr: { &quot;aria-describedby&quot;: &quot;locationSearchResult-&quot; + locationId }">'+n.escape(null==(t=e.get("LocationTargeting_IncludedStatus"))?"":t)+'</td>\x3c!-- /ko--\x3e\x3c!-- ko if: selectionStatusObsv()===\'Excluded\'--\x3e<td class="new-location-targeting-grid-exclude" data-bind="attr: { &quot;aria-describedby&quot;: &quot;locationSearchResult-&quot; + locationId }">'+n.escape(null==(t=e.get("LocationTargeting_ExcludedStatus"))?"":t)+'</td>\x3c!-- /ko--\x3e</tr></tbody></table><div class="new-empty-result-message"'+n.attr("data-bind",'visible: rows().length === 0, text: rows().length === 0 ? "'+e.get("LocationTargeting_SearchNoResult")+'" : ""',!0,!0)+' role="alert"></div></div></div>'}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},"qS/x":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},i=i+'<div class="form-group"><div class="col-sm-2 control-label"><label id="location-target-physicalintent-title">'+n.escape(null==(t=e.get("Location_Target_PhysicalIntent_Title"))?"":t)+'</label></div><div class="col-sm-10" role="group" aria-labelledby="location-target-physicalintent-title" aria-describedby="location-target-physicalintent-header"><div class="form-control-static" id="location-target-physicalintent-header">'+n.escape(null==(t=e.get("Location_Target_PhysicalIntent_Header"))?"":t)+'</div><div class="checkbox"><label><input class="people-in-location" type="checkbox" data-bind="checked: peopleInLocation, attr:{&quot;aria-checked&quot;: peopleInLocation() ? &quot;true&quot; : &quot;false&quot;}" role="checkbox">'+n.escape(null==(t=e.get("Location_Target_PhysicalIntent_PeopleInLocation"))?"":t)+"</label>",a.popupHelp(r.PhysicalIntentOn,e.get("Location_Target_PhysicalIntent_PeopleInLocation"),e),i=i+'</div><div class="checkbox"><label><input class="people-searching-for-location" type="checkbox" data-bind="checked: peopleSearchingForLocation, attr:{&quot;aria-checked&quot;: peopleSearchingForLocation() ? &quot;true&quot; : &quot;false&quot;}" role="checkbox">'+n.escape(null==(t=e.get("Location_Target_PhysicalIntent_PeopleSearchForLocation"))?"":t)+"</label>",a.popupHelp(r.PhysicalIntentOnly,e.get("Location_Target_PhysicalIntent_PeopleSearchForLocation"),e),i+="</div>",a.koError("intentError"),i+="</div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"popupIds"in r?r.popupIds:"undefined"!==typeof popupIds?popupIds:void 0),i}},"qW/f":function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("/xyZ"),h=i.n(g),m=i("O81M"),f=i("p8zf"),v=i("YzTP"),b=i("uvCE"),y=i("6e2+"),S=i("bgLp"),w=i("a28/"),C=i("5iHu"),x=i.n(C),k=i("7XbR"),A=i.n(k),T=i("ERkP"),_=i.n(T),E=i("7nmT"),I=i.n(E),O=i("ITOZ"),P=i("O3qA"),M=i("98nU"),j=i("jep4"),L=i("+9/h"),D=i("ORPc"),R=i("0e0T"),N=i("+Ye4"),V=i("c0nf"),B=i("DfB3"),F=i("ql0F"),U=i.n(F),G=i("pomj"),z="percentage-value",H="decimal-original",W="decimal",q=function(e,t){return d.a.compact([{name:"impressions",i18nLabel:"EstimatedImpressions",helpTopic:"pop_BA_CampaignCreate_AudAds_EstImpressions",ApiDataName:"EstImpression",format:H},t&&{name:"views",i18nLabel:"EstimatedViews",helpTopic:"pop_BA_CampaignCreate_AudAds_EstViews",ApiDataName:"EstView",format:H},{name:"clicks",i18nLabel:"EstimatedClicks",helpTopic:"pop_BA_CampaignCreate_AudAds_EstClicks",ApiDataName:"EstClick",format:H},{name:"CTR",i18nLabel:"EstimatedCTR",helpTopic:"pop_BA_CampaignCreate_AudAds_EstCTR",ApiDataName:"EstCTR",format:z},{name:"avg".concat(e),i18nLabel:"EstimatedAvg".concat(e),helpTopic:"pop_BA_CampaignCreate_AudAds_Est".concat(e),ApiDataName:"EstCPC",format:W},{name:"spend",i18nLabel:"EstimatedSpend",helpTopic:"pop_BA_CampaignCreate_AudAds_EstSpend",ApiDataName:"EstSpend",format:W}])},$=function(e,t,i){var n,a;return d.a.isObject(e)?(n=e.Value,a=N.c[e.Unit].unit):(n=e,a=""),"".concat(function(e,t,i){var n=d.a.identity;switch(t){case z:n=d.a.compose(e.percentToFixedFormatter({digits:2}),function(e){return e/100});break;case H:n=e.decimalFormatter({minimumFractionDigits:0,maximumFractionDigits:2});break;case W:n=e.decimalFormatter({minimumFractionDigits:2,maximumFractionDigits:2})}return d.a.isNull(i)||d.a.isUndefined(i)?"":n(i)}(t,i,n)).concat(a)},K=function(e,t,i){if(null===e||void 0===e)return" - ";var n=e.High,a=e.Low;return d.a.isObject(n)&&0===n.Value||d.a.isNumber(n)&&0===n?"".concat($(n,t,i)):"".concat($(a,t,i)," - ").concat($(n,t,i))};function J(e){var t=e.pricingModel,i=e.isVideo,n=e.i18n.getString("LearnMoreLinkText"),a=q(t,i);return _.a.createElement("div",{className:"panel panel-default"},_.a.createElement("div",{className:"panel-heading"}),e.reqStatus?_.a.createElement("div",{className:"panel-body"},a.map(function(t){return _.a.createElement("div",{className:"form-group",key:t.name},_.a.createElement("div",{className:"col-sm-3 control-label"},_.a.createElement("label",null,e.i18n.getString(t.i18nLabel)),_.a.createElement(G.HelpPopup,{topic:t.helpTopic,"aria-label":"".concat(n," ").concat(e.i18n.getString(t.i18nLabel))})),_.a.createElement("div",{className:"col-sm-4 estimated-".concat(t.name," form-control-static"),"x-ms-format-detection":"none"},K(e[t.ApiDataName]||{},e.i18n,t.format)))})):_.a.createElement("div",{className:"alert alert-warning"},e.i18n.getString("Audience_Campaign_KPIEstimation_RequestError")))}J.defaultProps={isVideo:!1};var Z=i("O5Di"),Y=i("eHSY"),Q=function(e){var t=e.i18n,i=e.onStrategyChange,n=e.keys,a=e.defaultSelectedKey,r=n.map(function(e){return{key:e,text:t.getString("BidStrategySetting_Option_".concat(e))}});return _.a.createElement("div",{className:"form-group",key:"bid-strategy-options"},_.a.createElement("div",{className:"col-sm-2 control-label"},_.a.createElement("label",null,t.getString("BidStrategySetting_Label_BidStrategy")),_.a.createElement(G.HelpPopup,{topic:"pop_BA_CampaignCreate_Budget_BidStrategy","aria-label":"".concat(t.getString("LearnMoreLinkText")," ").concat(t.getString("BidStrategySetting_Label_BidStrategy"))})),_.a.createElement("div",{className:"col-sm-10 form-control-static"},_.a.createElement("span",null,t.getString("BidStrategySetting_OptionQuestion"),"\xa0",_.a.createElement(Z.HelpLink,{class:"HelpTopic",query:"56786","aria-label":"Click to learn more about ".concat(t.getString("BidStrategySetting_OptionQuestion")),role:"button"},t.getString("LearnMoreLinkText")))),_.a.createElement(Y.Dropdown,{className:"col-sm-4",options:r,defaultSelectedKey:a,onChange:function(e,t){return i(t)}}))},X=function(e){function t(){var e,i;Object(n.a)(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(i=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).onBidStrategyChanged=function(e){i.pricingModel=e.key,i.initDefaultBidInput(),i.IsAIMBidSuggestionEnabled&&i.suggestedBidMapping[i.pricingModel]&&(i.defaultBidInput.setState({value:i.suggestedBidMapping[i.pricingModel].toString()}),i.updateKPIEstimateAsync()),i.$(".default-bid").html(i.defaultBidInput.render().$el)},i}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.perfMarker=e.perfMarker,this.perfMarker.willInit(),this.wizardElement=e.wizardElement,this.options=e,this.audienceCampaignType=e.audienceCampaignType||"",this.viewContext=e.viewContext,this.currentLevelTargetInfo=this.options.currentLevelTargetInfo,this.isAdImpressions=this.options.isAdImpressions,this.estimateRequestFactory=new N.a({currentLevelTargetInfo:this.currentLevelTargetInfo}),this.i18n=L.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=L.a.get("component/api-errors-campaign/index"),this.odata=L.a.get("component/http/channel/odata"),this.targetBidAdjustment={},this.defaultBidUpdatedByUser=!1,this.IsSuggestedBidShowedOnUI=!1,this.showDefaultBidWarning=!1,this.isDefaultBidCPVWarningRendered=!1,this.logScenario=e.logScenario,this.activityLogger=this.logScenario.createBudgetBids.create();var t=L.a.get("component/config/index");this.permissions=t.get("Permissions"),this.isCpmEnabled=this.permissions.IsManualCpmEnabled,this.isSwapStepsEnabled=this.permissions.IsAudienceCampaignSwapAdsBudgetAndBidsEnabled&&"shopping"!==this.audienceCampaignType,this.isHideCpmForFeedbasedCampaginEnabled=this.permissions.IsHideCpmForFeedbasedCampaginEnabled,this.IsAIMBidSuggestionEnabled="shopping"!==this.options.audienceCampaignType||this.permissions.IsKPIEstimateForAudienceFeedBasedEnabled,this.isVideo=e.isVideo,this.isFeedBased="shopping"===e.audienceCampaignType,this.pricingModel=this.isVideo?"CPV":this.isCpmEnabled||this.isAdImpressions?"CPM":"CPC",this.pricingModels=["CPC","CPV","CPM"],this.pricingModelToBidTypeString={CPC:"ManualCpc",CPV:"ManualCpv",CPM:"ManualCpm"},this.pricingModelToBidTypeEnum={CPC:D.BidStrategy.ManualCpc,CPV:D.BidStrategy.ManualCpv,CPM:D.BidStrategy.ManualCpm},this.pricingModelAdgroupBidAttributeMapping={CPC:"SearchBid",CPV:"CpvBid",CPM:"CpmBid"},this.suggestedBidMapping={},this.initDefaultBidInput(),this.initAdScheduleView(),this.errorsView=new D.AudienceCampaignErrorsView,this.viewmodel={isAdScheduleExpanded:A.a.observable(!1),isBidAdjustmentsExpanded:A.a.observable(!1)}}},{key:"toggleAdSchedule",value:function(){this.$("#adScheduleTargets").toggle(),this.$(".adschedule-section .bedded-icon-marker").toggleClass("expanderImage expandedImage"),this.viewmodel.isAdScheduleExpanded(!this.viewmodel.isAdScheduleExpanded())}},{key:"toggleBidAdjustments",value:function(){this.$("#bidAdjustmentTargets").toggle(),this.$(".bid-adjustments-section .bedded-icon-marker").toggleClass("expanderImage expandedImage"),this.viewmodel.isBidAdjustmentsExpanded(!this.viewmodel.isBidAdjustmentsExpanded())}},{key:"getData",value:function(e){var t;this.campaignId=this.viewContext.currentCampaign.Id,this.campaignName=this.viewContext.currentCampaign.Name,this.adGroupId=this.viewContext.currentAdGroup.Id;var i=(t={Campaign:{Id:this.campaignId},Id:this.adGroupId,Medium:"Search"},Object(w.a)(t,this.pricingModelAdgroupBidAttributeMapping[this.pricingModel],this.defaultBidModel.toJSON().Amount),Object(w.a)(t,"PricingModel",this.pricingModel),Object(w.a)(t,"Status","Active"),t),n=this.currentLevelTargetInfo.getSnapshot(this.supportCashbackSettings),a=D.criterionHelper.compareAndGetCriterionsDelta(this.originalSnapshot,n),r=d.a.filter(a,function(e){return"Audience"===e.Criterion.Type});a=d.a.reject(a,function(e){return"Audience"===e.Criterion.Type}),i.AdGroupCriterions=this.populateCriterionWithAdGroupIds(a),i.AdGroupAudienceCriterions=this.populateCriterionWithAdGroupIds(r);var o={};o.Id=this.campaignId,o.Name=this.campaignName,o.AdGroups=[i],o.Budget=this.budgetPanelView.getValues(),o.BiddingScheme={Type:this.pricingModelToBidTypeString[this.pricingModel]};var s=this.adScheduleView.getDateSettings();if(d.a.extend(i,s),!e){var l=this.getScheduleInfo();this.populateCriterionCampaignIds(l),o.CampaignCriterions=l}return o}},{key:"validate",value:function(){return this.defaultBidInput.setState({showError:!0}),this.budgetPanelView.validate()&&this.defaultBidInput.getState().isValid&&this.adScheduleView.validate()&&d.a.every(this.targetBidAdjustment,function(e){return e.validate()})}},{key:"updateCampaign",value:function(e){var t=this,i=L.a.get("component/js-data-campaign/index"),n=this.getData(e);return this.errorsView.removeErrors(),this.adScheduleView&&(n.AdScheduleUseSearcherTimeZone=d.a.result(this.adScheduleView,"getAdScheduleUseSearcherTimeZone")),i.Campaign.update(this.campaignId,n,{adapter:"bulk"}).then(function(e){if(d.a.isFinite(e.Id)){if(t.IsAIMBidSuggestionEnabled){var i={CampaignId:n.Id,AdGroupId:n.AdGroups[0].Id,SuggestedBid:t.viewContext.SuggestedBid,SearchBid:n.AdGroups[0].SearchBid,IsSuggestedBidShowedOnUI:t.IsSuggestedBidShowedOnUI,AccountCurrencyCode:t.viewContext.accountCurrencyCode};t.activityLogger.trace(i)}var a=t.viewContext.currentCampaign;if(t.viewContext.currentCampaign=Object(S.a)({CampaignType:a.CampaignType,CampaignSubType:a.CampaignSubType,CampaignSettings:a.CampaignSettings},e),t.permissions.IsPersonalizedOffersEnabled){var r=d.a.chain(a).result("CampaignCashback").value();t.viewContext.currentCampaign.CampaignCashback=r}return!0}return!1}).catch(function(e){e&&e.entity?e&&!d.a.isUndefined(e.errors)?(t.errorsView.setErrors(t.i18nErrors.getBulkApiErrors(e.errors)),t.activityLogger.trace(Object(D.getBulkErrorsLogMessage)(e.errors)),d.a.each(e.errors,function(e){t.activityLogger.signal(e.Error,"audience budget bid api error")})):t.activityLogger.error(Object(D.getBulkErrorsLogMessage)(e.errors)):(t.errorsView.setErrors(t.i18nErrors.getODataErrors(e.errors)),d.a.each(e.errors,function(e){t.activityLogger.signal(e.Error,"audience budget bid api error")}));return!1}).finally(Object(V.withUiBlock)(this.wizardElement,this.i18n.getString("Loading")))}},{key:"getEstimatePromise",value:function(e){return this.odata.post("Customers()/Accounts()/Default.AudienceEstimationV2",{host:"adinsight.odata.url",path:"AdInsight/V2/",data:{request:e},customHeader:{name:"x-ms-scenarioname",value:this.logScenario.value}})}},{key:"updateKPIEstimateAsync",value:function(e){var t=this;if(this.showDefaultBidWarning=!1,e&&e.target&&e.target.className&&x()(e.target).hasClass("Amount-value")&&(this.defaultBidUpdatedByUser=!0),this.budgetPanelView.validate()&&this.defaultBidInput.getState().isValid&&this.defaultBidModel.toJSON().Amount&&!d.a.isNaN(this.defaultBidModel.toJSON().Amount)){this.showDefaultBidWarning="CPV"===this.pricingModel&&this.defaultBidModel.toJSON().Amount>D.DefaultBidCPVWarningThreshold,this.updateDefaultBidWarning();var i=this.viewContext.currentCampaign&&this.viewContext.currentCampaign.CampaignSubType,n=d.a.first(d.a.get(this.viewContext.currentCampaign,"CampaignSettings"))||{},a=Object(D.getFeedInfo)(n),r=this.estimateRequestFactory.create(this.pricingModelToBidTypeEnum[this.pricingModel],i,a);if(r.DailyBudget=this.budgetPanelView.getValues().Amount,r.Bid=this.defaultBidModel.toJSON().Amount,!d.a.isEmpty(r)){this.odata.post("Customers()/Accounts()/Default.AudienceKPIEstimationV2",{host:"adinsight.odata.url",path:"AdInsight/V2/",data:{request:r},customHeader:{name:"x-ms-scenarioname",value:this.logScenario.value}}).then(function(e){t.updatePanel(e,e&&"Success"===e.ErrorCode)}).catch(function(e){e&&!d.a.isUndefined(e.error)?t.updatePanel({ErrorCode:JSON.stringify(e.error)},!1):t.updatePanel({ErrorCode:JSON.stringify(e)},!1)}).finally(Object(V.withUiBlock)(x()(".kpiestimation-result"),this.i18n.getString("Loading")))}}else this.updateDefaultBidWarning()}},{key:"updatePanel",value:function(e,t){this.estimateData=e||{},this.estimateData.reqStatus=t,I.a.render(_.a.createElement(J,Object.assign({i18n:this.i18n,pricingModel:this.pricingModel,isVideo:this.isVideo},this.estimateData)),this.$(".kpiestimation-result")[0])}},{key:"saveAndExit",value:function(){var e=this;return this.validate()?this.updateCampaign(!1).then(function(t){return t?(e.trigger("saveAndExit"),e.activityLogger.signal("save and exit: true","crud audience budget bid"),!0):(e.activityLogger.signal("save and exit: ".concat(t),"crud audience budget bid"),h.a.reject())}):(this.activityLogger.signal("save and exit: false","crud audience budget bid"),!1)}},{key:"save",value:function(){var e=this;return this.validate()?this.updateCampaign(!1).then(function(t){e.activityLogger.signal("clicked save: ".concat(t),"crud audience budget bid"),t&&e.trigger("saveAndExit")}):(this.activityLogger.signal("clicked save: false","crud audience budget bid"),!1)}},{key:"render",value:function(){return this.viewContext.currentAdGroup&&(this.pricingModel=this.viewContext.currentAdGroup.PricingModel),this.$el.html(U()(this)),A.a.applyBindings(this.viewmodel,this.el),this.initDailyBudgetView(),this.$(".budget").append(this.budgetPanelView.render().$el),this.$(".default-bid").append(this.defaultBidInput.render().$el),this.$(".adschedule-targets").append(this.adScheduleView.render().$el),this.$(".errors-container").append(this.errorsView.render().$el),this.IsAIMBidSuggestionEnabled&&(this.$(".default-bid").change(this.updateKPIEstimateAsync.bind(this)),this.$(".budget").change(this.updateKPIEstimateAsync.bind(this))),this.initTargetBidAdjustmentsAndRender(),this.initBidStrategy(),this.perfMarker.done(),this}},{key:"willShow",value:function(){var e=this;this.perfMarker.willRender(),this.toggleTargetsCashbackPercentColumns();var t=d.a.get(this.viewContext.currentCampaign,"CampaignSubType"),i=d.a.first(d.a.get(this.viewContext.currentCampaign,"CampaignSettings"))||{},n=Object(D.getFeedInfo)(i),a=this.estimateRequestFactory.create(D.BidStrategy.ManualCpc,t,n),r=this.estimateRequestFactory.create(D.BidStrategy.ManualCpv,t,n),o=this.estimateRequestFactory.create(D.BidStrategy.ManualCpm,t,n),s={SuggestedBid:0},l=[this.isVideo?h.a.resolve(s):this.getEstimatePromise(a),this.isVideo?this.getEstimatePromise(r):h.a.resolve(s),this.getEstimatePromise(o)];h.a.all(l).then(function(t){var i=Object(y.a)(t,3),n=i[0],a=i[1],r=i[2];e.suggestedBidMapping.CPC=n.SuggestedBid,e.suggestedBidMapping.CPV=a.SuggestedBid,e.suggestedBidMapping.CPM=r.SuggestedBid,e.originalSnapshot=e.currentLevelTargetInfo.getSnapshot(),e.viewContext.currentCampaign&&e.viewContext.currentCampaign.Budget&&e.budgetPanelView.update({Amount:e.viewContext.currentCampaign.Budget.Amount}),e.IsAIMBidSuggestionEnabled&&e.suggestedBidMapping[e.pricingModel]&&(!1===e.defaultBidUpdatedByUser?(e.defaultBidInput.setState({value:e.suggestedBidMapping[e.pricingModel].toString()}),e.IsSuggestedBidShowedOnUI=!0):e.IsSuggestedBidShowedOnUI=!1,e.updateKPIEstimateAsync())}).finally(Object(V.withUiBlock)(x()(".crud-audience-budget-bid"),this.i18n.getString("Loading")))}},{key:"toggleTargetsCashbackPercentColumns",value:function(){var e=this;if(this.permissions.IsPersonalizedOffersEnabled){var t=this.viewContext.currentCampaign,i=Object(R.shouldSupportCashbackSettings)(t);this.supportCashbackSettings=i;var n=d.a.chain(t).result("CampaignCashback").result("Percent",null).value();d.a.forEach(this.targetBidAdjustment,function(t){t.resetSupportCashbackSettings&&t.resetSupportCashbackSettings(i,{level:"Campaign",value:n}),e.adScheduleView.toggleCashbackPercentColumns(i,{level:"Campaign",value:n})})}}},{key:"wizardShouldGoNext",value:function(){var e=this;return this.validate()?this.updateCampaign(!1).then(function(t){return t?(e.activityLogger.signal("clicked next: true","crud audience budget bid"),t):(e.activityLogger.signal("clicked next: ".concat(t),"crud audience budget bid"),h.a.reject())}):(this.activityLogger.signal("clicked next: false","crud audience budget bid"),!1)}},{key:"wizardShouldGoBack",value:function(){var e=this;return this.validate()?this.updateCampaign(!0).then(function(t){return e.activityLogger.signal("clicked back: ".concat(t),"crud audience budget bid"),t}):(this.activityLogger.signal("clicked back: false","crud audience budget bid"),h.a.resolve(!1))}},{key:"initBidStrategy",value:function(){if(this.isVideo||this.isCpmEnabled){var e=this.pricingModels.slice();e=this.isVideo?e.filter(function(e){return"CPC"!==e}):e.filter(function(e){return"CPV"!==e}),this.isCpmEnabled||(e=e.filter(function(e){return"CPM"!==e})),this.isHideCpmForFeedbasedCampaginEnabled&&this.isFeedBased&&(e=e.filter(function(e){return"CPM"!==e})),I.a.render(_.a.createElement(Q,{i18n:this.i18n,onStrategyChange:this.onBidStrategyChanged,keys:e,defaultSelectedKey:this.pricingModel}),this.$(".bid-strategy")[0])}}},{key:"updateDefaultBidWarning",value:function(){this.showDefaultBidWarning?(this.isDefaultBidCPVWarningRendered||(I.a.render(_.a.createElement(B.Alert,{message:this.i18n.getString("Audience_Campaign_DefaultBid_CPV_Warning"),level:"Warning"}),this.$(".default-bid-warning")[0]),this.isDefaultBidCPVWarningRendered=!0),this.$(".default-bid-warning").show()):this.$(".default-bid-warning").hide()}},{key:"initTargetBidAdjustmentsAndRender",value:function(){var e=this,t=Object(O.cloneDeep)(this.currentLevelTargetInfo.getAll()),i=d.a.groupBy(t,function(e){return"Radius"===e.Criterion.Type||"NegativeLocation"===e.Criterion.Type?"Location":e.Criterion.Type});this.$(".bid-adjustment-targets-container").empty();var n={currentLevelTargetInfo:this.currentLevelTargetInfo,showTargetSelection:!1,showBidAdjustment:!0,showTargetOrBid:!1,activityLogger:this.activityLogger};d.a.each(i,function(t){var i=d.a.take(t).Criterion.Type;switch("Radius"!==i&&"NegativeLocation"!==i||(i="Location"),i){case"CompanyName":e.targetBidAdjustment[i]=new P.CompanyNameCriterionSetting(n);break;case"JobFunction":e.targetBidAdjustment[i]=new P.JobFunctionCriterionSetting(n);break;case"Industry":e.targetBidAdjustment[i]=new P.IndustryCriterionSetting(n);break;case"Age":e.targetBidAdjustment[i]=new P.AgeCriterionSetting(n);break;case"Gender":e.targetBidAdjustment[i]=new P.GenderCriterionSetting(n);break;case"Device":e.targetBidAdjustment[i]=new P.DeviceCriterionSetting(n);break;case"Audience":e.targetBidAdjustment[i]=new P.AudienceCriterionSetting(n);break;case"Location":e.targetBidAdjustment[i]=new P.LocationCriterionSetting(n);break;default:throw new Error("unsupported type")}e.$(".bid-adjustment-targets-container").append(e.targetBidAdjustment[i].render().$el)},this)}},{key:"initDailyBudgetView",value:function(){var e=L.a.get("campaignui/feature/budget/view/budget-panel");this.budgetPanelView=new e({model:this.viewContext.currentCampaign.Budget,activityLogger:this.activityLogger})}},{key:"initDefaultBidInput",value:function(){var e=this,t=L.a.get("component/config/index"),i=Object(M.BackboneSchema)(Object(D.getBidSchema)({bidCeil:d.a.result(t.get(D.PricingModelToRangeKey[this.pricingModel]),"CeilingValue"),bidFloor:d.a.result(t.get(D.PricingModelToRangeKey[this.pricingModel]),"FloorValue")}),this.i18n,["Amount"]);this.defaultBidModel=new i,this.defaultBidInput=new j.InputControl({entity:this.defaultBidModel,field:"Amount",addonText:this.viewContext.accountCurrencyCode,ariaLabelledby:"defaultBidLabel"}),this.defaultBidInput.on("input-changed",function(){e.activityLogger.signal("default bid change","crud audience budget bid")})}},{key:"initAdScheduleView",value:function(){var e=L.a.get("campaignui/feature/ad-schedule/view/index");this.adScheduleView=new e({model:{},level:"campaign",showDateSettings:"true",activityLogger:this.activityLogger})}},{key:"getScheduleInfo",value:function(){var e=this;return this.adScheduleView.getValues(function(t){d.a.each(t,function(t){t.Status="Deleted",t.Campaign={Id:e.campaignId}})})}},{key:"populateCriterionCampaignIds",value:function(e){var t=this;d.a.each(e,function(e){e.Status=d.a.isEmpty(e.Status)?"Active":e.Status,e.Campaign={Id:t.campaignId}},this)}},{key:"populateCriterionWithAdGroupIds",value:function(e){var t=this;return d.a.each(e,function(e){e.AdGroup={Id:t.adGroupId}},this),e}},{key:"remove",value:function(){d.a.each(this.targetBidAdjustment,function(e){e.remove()}),this.budgetPanelView&&this.budgetPanelView.remove(),this.defaultBidInput.remove(),this.adScheduleView.remove(),this.errorsView.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"title",get:function(){var e=this.i18n.getString("Audience_Campaign_Settings_BudgetBidsTitle");return this.isSwapStepsEnabled&&(e=this.i18n.getString("Audience_Campaign_Settings_BudgetBidsTitle_Step3")),"shopping"===this.options.audienceCampaignType&&(e=this.i18n.getString("Audience_ShoppingCampaign_BudgetBidsTitle_Step3")),{text:e}}},{key:"pageTitle",get:function(){var e=this.i18n.getString("BudgetBidsStep_PageTitle");return"shopping"===this.options.audienceCampaignType&&(e=this.i18n.getString("Audience_ShoppingCampaign_BudgetBidsTitle_Step3_PageTitle")),{text:e}}},{key:"events",get:function(){return{"click .adschedule-section":"toggleAdSchedule","click .bid-adjustments-section":"toggleBidAdjustments"}}},{key:"actions",get:function(){var e=[];return this.isSwapStepsEnabled?(e.push({name:"next",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Next")}),e.push({name:"back",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Back_Label")}),e.push({name:"done",htmlAttributes:{class:"btn-primary"},enabled:!0,method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Exit")})):(e.push({name:"save",htmlAttributes:{class:"btn-primary"},displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Label")}),e.push({name:"back",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Back_Label")})),e}}]),t}(D.AudienceStepBase),ee=i("DUzX"),te=i("j1z3"),ie=i.n(te),ne=i("faId"),ae=Object(ne.withDefaultStyles)(function(e){var t=_.a.useState(!0),i=Object(y.a)(t,2),n=i[0],a=i[1],r=e.i18n,o=e.alertKey,s=e.learnMoreId;return n&&_.a.createElement("div",{className:"alert alert-info ".concat(e.classes.root)},_.a.createElement("div",{className:"alert-image"}),_.a.createElement("div",{className:"alert-info-inline"},_.a.createElement("span",null,"".concat(r.getString(o)," "),_.a.createElement(Z.HelpLink,{class:"HelpTopic",query:s,"aria-label":r.getString(o),role:"button"},r.getString("LearnMoreLinkText"))),_.a.createElement("span",{className:"glyphicon glyphicon-remove",role:"button",onClick:function(){a(!1)}})))},function(){return{root:{marginTop:20,marginBottom:12,"& .alert-image":{marginTop:3},"& .alert-info-inline":{width:"100%","& a":{marginTop:2,textDecoration:"none"},"& a:hover":{textDecoration:"none"},"& .glyphicon":{float:"right",top:4,color:"#605E5C",fontSize:16}}}}}),re=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.perfMarker=e.perfMarker,this.isAdImpressions=e.isAdImpressions,this.perfMarker.willInit(),this.viewContext=e.viewContext,this.wizardElement=e.wizardElement,this.i18n=L.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=L.a.get("component/api-errors-campaign/index"),this.isNextButtonEnabled=!(this.viewContext.isReadOnlyUser||this.viewContext.CurrentAccountInActive);var t=L.a.get("$/schema!campaign/Campaign"),i=Object(M.BackboneSchema)(t,this.i18n,["Name"]);this.model=new i,this.logScenario=e.logScenario,this.activityLogger=this.logScenario.createCampaignSettings.create(),this.isVideo=e.isVideo,this.isEnabledForVerifiedImpressionTrackingAtCampaignLevel=e.isEnabledForVerifiedImpressionTrackingAtCampaignLevel&&this.isVideo;var n=L.a.get("component/config/index");if(this.permissions=n.get("Permissions"),this.isCopyCampaignSettingsAudienceCampaignEnabled=d.a.result(this.permissions,"IsCopyCampaignSettingsAudienceCampaignEnabled",!1),this.isCopyCampaignSettingsAudienceCampaignEnabled){var a=L.a.get("crud-campaign/view/copy-campaign-settings");this.copySettings=new a({scenario:"copy-audience-campaign-settings",activityLogger:this.activityLogger}),this.copySettings.on("copy.campaign",this.copyFromCampaign.bind(this))}this.initControls()}},{key:"render",value:function(){return this.perfMarker.willRender(),this.$el.html(ie()(this)),this.isVideo&&this.updateVideoAlert(),this.isAdImpressions&&this.updateAdImpressionAlert(),this.$(".name-input-control-container").append(this.nameInput.render().$el),this.$(".remaining-chars-hint-container").append(this.nameInputRemainingCharsHint.render().$el),this.$(".errors-container").append(this.errorsView.render().$el),this.isCopyCampaignSettingsAudienceCampaignEnabled&&this.$(".copy-campaign-settings-container").append(this.copySettings.render().$el),this.isEnabledForVerifiedImpressionTrackingAtCampaignLevel&&this.$(".impression-tracking-url-options-container").append(this.impressionTrackingUrlOptions.render().$el),this.budget&&(this.$(".budget").empty().append(this.budget.$el),this.budget.render()),this.perfMarker.done(),this}},{key:"updateVideoAlert",value:function(){I.a.render(_.a.createElement(ae,{i18n:this.i18n,alertKey:"Create_AudienceCampaign_Alert_Video",learnMoreId:"app54794"}),this.$(".video-alert")[0])}},{key:"updateAdImpressionAlert",value:function(){I.a.render(_.a.createElement(ae,{i18n:this.i18n,alertKey:"Create_AudienceCampaign_Alert_AdImpressions",learnMoreId:"app54794"}),this.$(".adimpression-alert")[0])}},{key:"willShow",value:function(){this.viewContext.currentCampaign&&this.viewContext.currentCampaign.Budget&&this.budget&&this.budget.viewModel.isIndividualBudgetSelected()&&this.budget.budgetView.update({Amount:this.viewContext.currentCampaign.Budget.Amount})}},{key:"wizardShouldGoNext",value:function(){var e=this;return this.save().then(function(t){return e.activityLogger.signal("clicked next: ".concat(t),"crud audience campaign"),t})}},{key:"getData",value:function(){var e=L.a.get("component/timezonemapper/index"),t=this.model.toJSON();return t.TimeZone=e.getAccountTimeZone(),t.CampaignType="Audience",t.Languages=["All"],t.CampaignSubType=this.isVideo?"AudienceVideoAds":void 0,this.isEnabledForVerifiedImpressionTrackingAtCampaignLevel&&this.IASTrackingInfo&&(t.VerifiedTrackingData=this.IASTrackingInfo),this.budget&&(t.Budget=this.budget.getValues(t)),this.viewContext.currentCampaign||(t.AdScheduleUseSearcherTimeZone=!1),t}},{key:"save",value:function(){var e=this;if(!this.validate())return h.a.resolve(!1);var t,i=L.a.get("component/js-data-campaign/index"),n=this.getData();return this.viewContext.currentCampaign?(n.Id=this.viewContext.currentCampaign.Id,t=i.Campaign.update(n.Id,n,{adapter:"bulk",cacheResponse:!1})):(this.isAdImpressions&&(n.BiddingScheme={Type:"ManualCpm"}),t=i.Campaign.create(n,{adapter:"bulk",cacheResponse:!1})),this.errorsView.removeErrors(),t.then(function(t){return!!d.a.isFinite(t.Id)&&(x()(document).trigger("analytic_campaign_created",t),"Audience"===t.CampaignType?i.Campaign.find(t.Id,{queryParameters:{query:{$select:"Id, BiddingScheme"}},bypassCache:!1,cacheResponse:!0}).then(function(i){var n=Object(S.a)({},t,i);return e.viewContext.currentCampaign=n,!0}):(e.viewContext.currentCampaign=t,!0))}).catch(function(t){if(t&&t.entity)if(t&&!d.a.isUndefined(t.errors)){var i=d.a.partition(t.errors,function(e){return"Campaign Error"===e.Type})[0];i.length&&(e.errorsView.setErrors(e.i18nErrors.getBulkApiErrors(i)),e.activityLogger.trace(Object(D.getBulkErrorsLogMessage)(i)),d.a.each(i,function(t){e.activityLogger.signal(t.Error,"audience campaign creation api error")}))}else e.activityLogger.error(JSON.stringify(t));else e.errorsView.setErrors(e.i18nErrors.getODataErrors(t.errors)),d.a.each(t.errors,function(t){e.activityLogger.signal(t.Error,"audience campaign creation api error")});return!1}).finally(Object(V.withUiBlock)(this.wizardElement,this.i18n.getString("Loading")))}},{key:"saveAndExit",value:function(){var e=this;return this.save().then(function(t){e.activityLogger.signal("save and exit: ".concat(t),"crud audience campaign"),t&&e.trigger("saveAndExit")})}},{key:"validate",value:function(){return this.nameInput.getState().isValid?this.impressionTrackingUrlOptions&&"error"===this.IASTrackingInfo?(this.impressionTrackingUrlOptions.setErrors([this.i18n.getString("IASImpressionTracking_Invalid")],"VerifiedImpressionTracking_IAS"),!1):this.budget.validate():(this.nameInput.setState({showError:!0}),!1)}},{key:"initControls",value:function(){var e=this;this.nameInput=new j.InputControl({entity:this.model,field:"Name",ariaLabelledby:"campaignNameLabel"}),this.nameInput.on("input-changed",function(){e.activityLogger.signal("campaign name change","crud audience campaign")}),d.a.result(this.permissions,"IsAudienceCampaignCollapseTargetSelectionEnabled",!1)&&this.nameInput.setState({value:this.autoSuggestedName()}),this.nameInputRemainingCharsHint=new ee.RemainingCharsHint({i18n:this.i18n,model:this.model,field:"Name"}),this.isEnabledForVerifiedImpressionTrackingAtCampaignLevel&&(this.impressionTrackingUrlOptions=new D.ImpressionTrackingUrlOptions({i18n:this.i18n,initialIASImpressionTrackingUrlValue:"",maxImpressionTrackingUrlsCount:2,isImpressionTrackingUrlSectionVisible:!1,isIASSectionVisible:!0,isEnabledForVerifiedImpressionTrackingAtCampaignLevel:this.isEnabledForVerifiedImpressionTrackingAtCampaignLevel}),this.impressionTrackingUrlOptions.on("IASInputChange",function(t){d.a.isString(t)&&0===t.length?e.viewContext.currentCampaign&&e.viewContext.currentCampaign.VerifiedTrackingData?e.IASTrackingInfo="delete_value":e.IASTrackingInfo=void 0:e.IASTrackingInfo=t})),this.errorsView=new D.AudienceCampaignErrorsView,this.initBudgetView()}},{key:"initBudgetView",value:function(){var e=L.a.get("campaignui/feature/shared-budget/view/shared-budget-switch-editor"),t=L.a.get("campaignui/feature/budget/view/budget"),i=e.newFactory(t);this.budget=i({model:d.a.isObject(this.model)?this.model.budget:{},accountCurrencyCode:this.viewContext.accountCurrencyCode,activityLogger:this.activityLogger})}},{key:"copyFromCampaign",value:function(e){var t=d.a.chain(e).first().result("Budget").value();d.a.isObject(t)&&this.budget&&("DailyStandard"===t.Type||"DailyAccelerated"===t.Type||t.Id>0)&&this.budget.update(t)}},{key:"autoSuggestedName",value:function(){var e="",t=new Date,i=t.getTime().toString();return i=i.slice(i.length-6),e="".concat(t.getMonth()+1).concat(t.getDate()).concat(t.getFullYear().toString().slice(2)),e="Campaign_".concat(e,"_#").concat(i)}},{key:"title",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Campaign_Title")}}},{key:"pageTitle",get:function(){return{text:this.i18n.getString("Audience_Campaign_Crud_Campaign_PageTitle")}}},{key:"actions",get:function(){var e=[{name:"next",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Next"),enabled:this.isNextButtonEnabled}];return this.viewContext.currentCampaign?e.push({name:"done",enabled:this.isNextButtonEnabled,htmlAttributes:{class:"btn btn-default btn-exitWithSave"},method:"saveAndExit",displayText:this.i18n.getString("Audience_Campaign_Crud_Campaign_Save_Exit")}):e.push({name:"cancel",displayText:this.i18n.getString("Audience_Campaign_Cancel_Label")}),e}}]),t}(D.AudienceStepBase),oe=i("J3Zd"),se=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.viewContext=e.viewContext,this.wizardElement=e.wizardElement,this.i18n=L.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.i18nErrors=L.a.get("component/api-errors-campaign/index"),this.productData=e.data,this.feedData=e.feedData,this.isNextButtonEnabled=!(this.viewContext.isReadOnlyUser||this.viewContext.CurrentAccountInActive);var i=L.a.get("component/config/index");this.permissions=i.get("Permissions")||{},this.isEnabledDynamicFeedCampaign=this.permissions.IsEnabledForDynamicFeedCampaign;var n=L.a.get("$/schema!dynamicdb/ShoppingCampaign"),a=Object(M.BackboneSchema)(n,this.i18n,["Name","CampaignType","TimeZone","Languages","ProviderId"]);this.model=new a,this.logScenario=e.logScenario,this.activityLogger=this.logScenario.createCampaignSettings.create(),this.perfMarker=e.perfMarker,Object(s.a)(Object(o.a)(t.prototype),"initControls",this).call(this),this.initShoppingSettingsView(),this.shouldShowCashbackSettings=e.isForVNext&&Object(R.isPersonalizedOfferAvailable)(this.permissions,e.audienceCampaignType,e.audienceCampaignSubType),this.options=e,this.initCashbackSettingsView()}},{key:"initCashbackSettingsView",value:function(){var e=this;this.shouldShowCashbackSettings&&this.options.deps&&(this.cashbackSettingsView=new oe.CashbackSettings({deps:Object(S.a)({},this.options.deps,{i18n:this.i18n}),isCreationScenario:!0}),this.shoppingSettingsView.on("feedChanged",function(t){t?(e.cashbackSettingsView.viewModel.isEnablePersonalizedOffersDisabled(!0),e.cashbackSettingsView.viewModel.isEnablePersonalizedOffersChecked(!1)):e.cashbackSettingsView.viewModel.isEnablePersonalizedOffersDisabled(!1)}))}},{key:"render",value:function(){return this.perfMarker.willRender(),Object(s.a)(Object(o.a)(t.prototype),"render",this).call(this),this.$(".shopping-settings-container").append(this.shoppingSettingsView.render().$el),this.cashbackSettingsView&&this.$(".cashback-settings-container").empty().append(this.cashbackSettingsView.render().$el),this.perfMarker.done(),this}},{key:"validate",value:function(){var e=!this.cashbackSettingsView||this.cashbackSettingsView.validate();return this.shoppingSettingsView.validate()&&Object(s.a)(Object(o.a)(t.prototype),"validate",this).call(this)&&e}},{key:"getData",value:function(){var e=Object(s.a)(Object(o.a)(t.prototype),"getData",this).call(this);return this.isEnabledDynamicFeedCampaign?(e.FeedId=this.shoppingSettingsView.viewModel.FeedId(),e.FeedId||(e.ProviderId=this.shoppingSettingsView.viewModel.ProviderId())):e.ProviderId=this.shoppingSettingsView.viewModel.ProviderId(),e.CampaignSubType=e.FeedId?D.CampaignSubTypes.AudienceDynamicFeedBased:D.CampaignSubTypes.AudienceFeedBased,this.shoppingSettingsView.hasFilteredProducts()&&(e.Priority="Low",e.LocalInventoryAdsEnabled=!1,e.CampaignProductScope=d.a.defaults(this.shoppingSettingsView.getProductScope(),{CampaignName:e.Name}),this.productData.CampaignCriterionsData&&this.productData.CampaignCriterionsData.Id&&(e.CampaignProductScope.Id=this.productData.CampaignCriterionsData.Id)),this.viewContext.currentCampaign||(e.AdScheduleUseSearcherTimeZone=!1),this.cashbackSettingsView&&d.a.extend(e,this.cashbackSettingsView.getValues()),e}},{key:"save",value:function(){var e=this;if(this.shoppingSettingsView.hasFilteredProducts()&&"NewComponent"===this.shoppingSettingsView.filterDataComesFrom&&this.shoppingSettingsView.clickApplyButton(),!this.validate())return h.a.resolve(!1);var t,i=L.a.get("component/js-data-campaign/index"),n=this.getData();return this.viewContext.currentCampaign?(n.Id=this.viewContext.currentCampaign.Id,t=i.ShoppingCampaign.update(n.Id,n,{adapter:"bulk",cacheResponse:!1})):t=i.ShoppingCampaign.create(n,{adapter:"bulk",cacheResponse:!1}),this.errorsView.removeErrors(),t.then(function(t){return Object(D.getProductData)({campaignId:t.Id}).then(function(i){if(e.productData=i,d.a.isFinite(t.Id)){var n=t;return n.CampaignCashback={MonthlyBudget:n.CashbackMonthlyBudget,Percent:n.CashbackPercent,Scope:n.CashbackScope,CouponsEnabled:n.CouponsEnabled,PersonalizedOffersEnabled:n.PersonalizedOffersEnabled},Object(R.logCampaignPersonalizedOffers)(e.cashbackSettingsView,e.activityLogger.signal.bind(e.activityLogger),t),n.CampaignSettings=[{ProviderId:n.ProviderId,FeedId:n.FeedId}],e.viewContext.currentCampaign=n,!0}return!1})}).catch(function(t){t&&t.entity?t&&!d.a.isUndefined(t.errors)?t.errors.length&&(e.errorsView.setErrors(e.i18nErrors.getBulkApiErrors(t.errors)),e.activityLogger.trace(Object(D.getBulkErrorsLogMessage)(t.errors)),d.a.each(t.errors,function(t){e.activityLogger.signal(t.Error,"audience campaign creation api error")})):e.activityLogger.error(JSON.stringify(t)):(e.errorsView.setErrors(e.i18nErrors.getODataErrors(t.errors)),d.a.each(t.errors,function(t){e.activityLogger.signal(t.Error,"audience campaign creation api error")}));return!1}).finally(Object(V.withUiBlock)(this.wizardElement,this.i18n.getString("Loading")))}},{key:"willShow",value:function(){Object(s.a)(Object(o.a)(t.prototype),"willShow",this).call(this),this.viewContext.currentCampaign&&(this.isEnabledDynamicFeedCampaign?this.shoppingSettingsView.renderCatagrizedOptionsList({disabled:!0}):this.shoppingSettingsView.disableStoreSelection())}},{key:"initShoppingSettingsView",value:function(){var e=L.a.get("campaignui/feature/shopping-campaign/view/campaign-creation/shopping-settings");this.shoppingSettingsView=new e({data:this.productData,feedData:this.feedData,model:this.setting,campaignType:"Audience",activityLogger:this.activityLogger})}}]),t}(re),le=i("4+Mt"),ce=i("HF+v"),de=i("Ek7f"),ue=i.n(de),pe=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.options=e,this.i18n=L.a.get("component/i18n/loader!campaignui/feature/audience-campaign");var t=d.a.chain(e.deps).result("router",{}).value();this.navigateToRoute=t.navigateToRoute||d.a.noop,this.activityLogger=e.logScenario.bmcRedirect.create()}},{key:"render",value:function(){return this.$el.html(ue()(this)),this.activityLogger.signal("have no store"),this}},{key:"redirect2BMC",value:function(){this.activityLogger.signal("store creation link click"),this.navigateToRoute("bing_merchant_center")}},{key:"redirect2UploadFeed",value:function(){this.activityLogger.signal("feed upload link click"),this.navigateToRoute("dynamicdata_management")}},{key:"onExit",value:function(){d.a.isFunction(this.options.callbackBeforeRemove)&&this.options.callbackBeforeRemove(),this.activityLogger.signal("cancel clicked"),this.navigateToRoute("campaign")}},{key:"events",get:function(){return{"click .btn-cancel":"onExit","click .bmc_url_link":"redirect2BMC","click .feed_url_link":"redirect2UploadFeed"}}}]),t}(p.a.View),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.$top,i=void 0===t?20:t,n=e.$skip,a=void 0===n?0:n,r=L.a.get("component/js-data-campaign/index"),o={$filter:"Status eq Enum.FeedStatus'Active' and FeedCategories/any(c:c eq Enum.FeedCategory'DynamicData')",$top:i,$skip:a},s={DynamicDataAutosListingFeed:"DynamicDataAutosListingFeed",DynamicDataEventsFeed:"DynamicDataEventsFeed",DynamicDataHotelsAndVacationRentalsFeed:"DynamicDataHotelsAndVacationRentalsFeed",DynamicDataToursAndActivitiesFeed:"DynamicDataToursAndActivitiesFeed"};return r.Feed.findAll({query:o}).then(function(e){return d.a.reject(e,function(e){return!s[e.FeedType]})})},he=i("i2rx"),me=i.n(he),fe=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.viewContext=e.viewContext,this.i18n=L.a.get("component/i18n/loader!campaignui/feature/audience-campaign"),this.audienceCampaignType=e.audienceCampaignType||"",this.localStorage=Object(ce.getLocalStorage)(),this.options=e,this.options.currentLevelTargetInfo=new f.a({resourceName:"AdGroupCriterion",isShoppingCampaign:"shopping"===this.audienceCampaignType,deps:e.deps,isForVNext:e.isForVNext,isAudienceCreationWorkflow:!0}),this.options.scenario="campaign-creation",this.options.isAdImpressions="AdImpressions"===this.localStorage.get("CampaignObjective"),this.perfMarker=e.perfMarker;var t=d.a.chain(e.deps).result("router",{}).value();this.navigateToRoute=t.navigateToRoute||d.a.noop,this.eventDelegator=d.a.result(e.deps,"eventDelegator"),this.setupInstrumentation();var i=L.a.get("component/config/index");this.permissions=i.get("Permissions"),this.isSwapStepsEnabled=this.permissions.IsAudienceCampaignSwapAdsBudgetAndBidsEnabled&&"shopping"!==this.audienceCampaignType,this.wizardActivity&&this.wizardActivity.trace("wizard initialized with swap steps ".concat(this.isSwapStepsEnabled?"enabled":"disabled"))}},{key:"setupInstrumentation",value:function(){var e=L.a.get("campaignui/feature/instrumentation/index");e.addScenario(D.schema),"shopping"===this.audienceCampaignType?this.aimCampaignCreationScenario=e.aimShoppingCampaignCreationWizard.create():(this.aimCampaignCreationScenario=e.aimCampaignCreationWizard.create(),this.wizardActivity=this.aimCampaignCreationScenario.wizardActivity.create()),this.options.logScenario=this.aimCampaignCreationScenario}},{key:"showError",value:function(e){new b.AlertHelper({i18n:this.i18n}).showError(e)}},{key:"render",value:function(){var e=this;this.perfMarker.willRender();var t=L.a.get("component/config/index"),i=d.a.result(t.get("Permissions"),"IsEnabledForVerifiedImpressionTrackingAtCampaignLevel");if("shopping"===this.audienceCampaignType){var n=this.perfMarker.createChild("ShoppingCampaignCrud"),a=d.a.result(t.get("Permissions"),"IsEnabledForDynamicFeedCampaign");if(n.willInit(),(d.a.isEmpty(this.productData)||d.a.isEmpty(this.productData.ProductCollectionAccounts))&&(!this.feedData||this.feedData.length<=0)){var r=d.a.extend(d.a.pick(this.options,["deps","callbackBeforeRemove","logScenario"]),{isEnabledForDynamicFeedCampaign:a}),o=new pe(r);return this.$el.append(o.render().$el),this}var s=d.a.extend(this.options,{data:this.productData,perfMarker:n,wizardElement:this.$el,feedData:this.feedData,isEnabledForVerifiedImpressionTrackingAtCampaignLevel:i});this.crudAudienceCampaign=new se(s)}else{var l=this.perfMarker.createChild("CampaignCrud");l.willInit();var c=d.a.extend(this.options,{perfMarker:l,wizardElement:this.$el,isEnabledForVerifiedImpressionTrackingAtCampaignLevel:i});this.crudAudienceCampaign=new re(c)}var u=d.a.extend(this.options,{perfMarker:this.perfMarker.createChild("CrudAdGroup"),wizardElement:this.$el});return this.crudAudienceAdgroup=new le.a(u),this.loadCrudAudienceAdPromise=new h.a(function(t){if("shopping"===e.audienceCampaignType)t(null);else{var i=d.a.extend(e.options,{audienceCampaignType:"Audience",perfMarker:e.perfMarker.createChild("CrudAd"),wizardElement:e.$el});t(new v.ResponsiveAdEditor(i))}}).then(function(t){e.crudAudienceAd=t;var i=d.a.extend(e.options,{perfMarker:e.perfMarker.createChild("BudgetBid"),wizardElement:e.$el});e.crudAudienceBudgetBid=new X(i),e.listenTo(e.crudAudienceCampaign,"saveAndExit",e.saveAndExit),e.listenTo(e.crudAudienceCampaign,"canceled",e.onExit),e.listenTo(e.crudAudienceAdgroup,"saveAndExit",e.saveAndExit),e.crudAudienceAd&&(e.listenTo(e.crudAudienceAd,"saveAndExit",e.saveAndExit),e.listenTo(e.crudAudienceAd,"canceled",e.onExit)),e.listenTo(e.crudAudienceBudgetBid,"saveAndExit",e.saveAndExit),e.wizard=new m.StepsWizard({config:e.getStepConfig(),currentStep:"audience-campaign-creation-wizard-step1"}),e.$el.html(me()(e)),e.$(".audience-campaign-creation-wizard").append(e.wizard.$el),d.a.isFunction(e.options.callbackBeforeRender)?e.options.callbackBeforeRender(function(){e.wizard.render(),window.ApexPlatform&&window.ApexPlatform.Refresh()}):(e.wizard.render(),window.ApexPlatform&&window.ApexPlatform.Refresh()),e.wizard.on("switch:finish",function(){window.ApexPlatform&&window.ApexPlatform.Refresh()})}),this}},{key:"getStepConfig",value:function(){var e=[];e.push({name:"audience-campaign-creation-wizard-step1",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step1",view:this.crudAudienceCampaign}),e.push({name:"audience-campaign-creation-wizard-step2",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step2",view:this.crudAudienceAdgroup}),this.isSwapStepsEnabled?(e.push({name:"audience-campaign-creation-wizard-step4",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step4",view:this.crudAudienceBudgetBid}),"shopping"!==this.audienceCampaignType&&e.push({name:"audience-campaign-creation-wizard-step3",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step3",view:this.crudAudienceAd})):("shopping"!==this.audienceCampaignType&&e.push({name:"audience-campaign-creation-wizard-step3",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step3",view:this.crudAudienceAd}),e.push({name:"audience-campaign-creation-wizard-step4",railviewId:this.options.isForVNext?null:"MSANCampaignCreate_Step4",view:this.crudAudienceBudgetBid}));var t={};return d.a.isFunction(this.options.layout)?t.layout=this.options.layout:d.a.isUndefined(this.options.isHorizontal)?t.isHorizontal=!0:t.isHorizontal=!!this.options.isHorizontal,d.a.isFunction(this.options.headerTemplate)&&(t.headerTemplate=this.options.headerTemplate),d.a.extend({steps:e},t)}},{key:"getProductData",value:function(){var e=this;return Object(D.getProductData)().then(function(t){e.productData=t,e.productData.ProductCollectionAccounts=d.a.filter(t.ProductCollectionAccounts,function(e){return!e.IsCoOpStore})}).catch(function(){e.showError(e.i18n.getString("GenericErrorMessage_Short"))})}},{key:"getFeedData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.$top,n=void 0===i?20:i,a=t.$skip;return ge({$top:n,$skip:void 0===a?0:a}).then(function(t){e.feedData=t}).catch(function(){e.showError(e.i18n.getString("GenericErrorMessage_Short"))})}},{key:"remove",value:function(){this.wizard&&this.wizard.remove(),d.a.isFunction(this.options.callbackBeforeRemove)&&this.options.callbackBeforeRemove();var e=document.querySelector(".audience-creation-panel.isOpen");e&&e.remove&&e.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"onExit",value:function(){this.navigateToRoute("campaign")}},{key:"saveAndExit",value:function(){L.a.get("SummaryDataContextManager").getContext("/campaign/NewCampaign/Create?"),!this.eventDelegator||d.a.isEmpty(this.viewContext.currentCampaign)||d.a.isEmpty(this.viewContext.currentCampaign.Id)||d.a.isEmpty(this.viewContext.currentCampaign.Name)||this.eventDelegator.trigger("campaignReload"),this.onExit(),function(){var e=L.a.get("component/statemanager/campaignStateManager"),t=L.a.get("component/config/index"),i=L.a.get("component/preference/service/index");function n(){var e=L.a.get("audienceCampaignPageContext"),t=L.a.get("Constants"),i=e.CurrentAccount;if(d.a.isObject(i)){var n=i.Id,a=i.AdvertiserCustomerID,r=t.enums.accountStatus,o=i.Status===r.pendingPaymentInstrument,s=i.Status!==r.active,l=t.enums.accountInactiveReason.notSet;if(d.a.isArray(i.InactiveReasons)&&i.InactiveReasons.length>0){var c=[t.enums.accountInactiveReason.pausedDueToSystemIssue,t.enums.accountInactiveReason.pausedZeroBalance,t.enums.accountInactiveReason.pausedNoValidiO];d.a.some(i.InactiveReasons,function(e){return-1!==c.indexOf(e)&&(l=e,!0)})}new(L.a.get("campaignui/feature/campaign-create-advanced/view/success-dialog"))({aid:n,cid:a,isPendingPayment:o,isAccountOnHold:s,accountPausedReason:l}).show()}}!0===d.a.result(t.get("Permissions"),"IsUsePreferencesServiceEnabled")?i.initialize().then(function(){var e=t.get("StateManagerKeyPrefix"),a=i.findByName("".concat(e,"successDialog"));a&&a.Data.doNotShowAgain||n()}):e.getItem("successDialog",function(e,t){!e&&t&&t.permanent.doNotShowAgain||n()})}(),this.wizardActivity&&this.wizardActivity.trace("wizard saved and exited with swap steps ".concat(this.isSwapStepsEnabled?"enabled":"disabled"))}},{key:"ComponentsLoadedPromise",get:function(){return this.loadCrudAudienceAdPromise}}]),t}(p.a.View);i.d(t,"a",function(){return fe}),i.d(t,"b",function(){return ge})},qdua:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="btn-toolbar"><div class="nav-tab-btn"><div class="btn-group"><div data-ref="navbar"></div></div><div class="btn-group"><div data-ref="level-selector"></div></div></div></div>'}},ql0F:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="crud-audience-budget-bid form-horizontal campaign-settings__container"><div class="form-group"><div class="col-sm-2 control-label"><label>'+n.escape(null==(t=a.getString("Audience_Campaign_Budget_Label"))?"":t)+'</label></div><div class="budget col-sm-8"></div></div><div class="bid-strategy"></div>',i=(i=e?i+'<div class="bid__container"><div class="form-group"><div class="col-sm-2 control-label"><label id="defaultBidLabel">'+n.escape(null==(t=a.getString("Audience_Campaign_Settings_DefaultBid"))?"":t)+'</label></div><div class="col-sm-10 form-control-static">'+n.escape(null==(t=a.getString("Audience_Campaign_Bid_Description"))?"":t)+'</div><div class="default-bid col-sm-2 form-group-subset"></div><div class="default-bid-warning col-sm-12"></div></div><div class="kpiestimation-result"></div></div>':i+'<div class="form-group"><div class="col-sm-2 control-label"><label id="defaultBidLabel">'+n.escape(null==(t=a.getString("Audience_Campaign_Settings_DefaultBid"))?"":t)+'</label></div><div class="default-bid col-sm-2"></div></div>')+'<div class="form-group"><div class="bid-adjustments-container"><a class="bid-adjustments-section col-sm-12" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isBidAdjustmentsExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="bedded-icon-marker spritedimagealign expanderImage"></span>'+n.escape(null==(t=a.getString("Audience_Campaign_Settings_BidAdjustment"))?"":t)+'</a><div class="collapse" id="bidAdjustmentTargets"><div class="bid-adjustment-targets-container"></div></div></div></div><div class="form-group"><div class="adschedule-targets-container"><a class="adschedule-section col-sm-12" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isAdScheduleExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="bedded-icon-marker spritedimagealign expanderImage"></span>'+n.escape(null==(t=a.getString("Audience_Campaign_Settings_AdSchedule"))?"":t)+'</a><div class="collapse" id="adScheduleTargets"><div class="adschedule-targets"></div></div></div></div><div class="errors-container"></div></div>'}.call(this,"IsAIMBidSuggestionEnabled"in a?a.IsAIMBidSuggestionEnabled:"undefined"!==typeof IsAIMBidSuggestionEnabled?IsAIMBidSuggestionEnabled:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},qqpG:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("/xyZ"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("7XbR"),f=i.n(m),v=i("xAPU"),b=i.n(v),y=function e(t){Object(n.a)(this,e),this.gridData=f.a.observable({included:[],excluded:[]}),this.level=f.a.observable(t.level),this.gridVisible=f.a.observable(!1),this.excludedGridVisible=f.a.observable(!1)},S=i("9CmJ"),w=i.n(S),C=i("nlAS"),x=i.n(C),k=i("1EwD"),A=i.n(k),T=i("UcGB"),_=i("UyEP"),E=i("juSC"),I=i("t7Tx"),O=i("5iHu"),P=i.n(O),M=i("AQBV"),j=i.n(M),L=i("rm/4"),D=i("doHi"),R=i("Aycx"),N=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),V=function e(t){var i=this;Object(n.a)(this,e),this.options=t,this.bidAdjustmentOptions=L.a.bidAdjustmentOptions,this.selectedBidAdjustmentOption=f.a.observable(t.model.bid>=0?L.a.bidAdjustmentIncreaseValue:L.a.bidAdjustmentDecreaseValue),this.bidAdjustmentValue=f.a.observable(Math.abs(t.model.bid)),this.computeBidError=function(){var e=i.bidAdjustmentValue(),t=Object(R.a)(e),n=t.isDecimal,a=t.isNotEmpty,r=t.isNonNegative,o=t.isEndingWithDigit;if(!(n&&r&&a&&o))return N.get("Error_Campaign_API_NaN");var s=e*i.selectedBidAdjustmentOption();return s<-1*L.a.minimumBid.Location||s>L.a.maximumBid.Location?N.get("LocationTarget_Bid_OutofRange").replace("{0}",L.a.minimumBid.Location).replace("{1}",L.a.maximumBid.Location):""},this.bidError=f.a.computed(this.computeBidError,this),this.isReadOnly=f.a.computed(function(){return!(i.options.selectionStatus!==I.Excluded&&!i.options.isReadOnly)||"campaign"===D.default.level&&("adgroup-create"===D.default.scenario||"adgroup-settings"===D.default.scenario)},this)},B=i("flEU"),F=i.n(B),U=i("ijv9"),G=i.n(U),z=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),H=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=h.a.defaults(t,{selectionStatus:this.model.selectionStatus}),this.viewmodel=new V(this.options),this.viewmodel.bidAdjustmentValue.subscribe(function(){e.dispatch()}),this.viewmodel.selectedBidAdjustmentOption.subscribe(function(){e.dispatch()})}},{key:"dispatch",value:function(){T.default.trigger("location-bid-cell:bidChanged",this.getValue())}},{key:"render",value:function(){return this.$el.html(F()({i18n:z,percentSymbol:j.a.get("globalization.number.percentSymbol"),uuid:G.a})),f.a.applyBindings(this.viewmodel,this.el),this}},{key:"getValue",value:function(){return{bid:isNaN(Number(this.viewmodel.bidAdjustmentValue()))?this.viewmodel.bidAdjustmentValue():this.viewmodel.bidAdjustmentValue()*this.viewmodel.selectedBidAdjustmentOption(),id:this.model.id,selectionStatus:this.model.selectionStatus}}}]),t}(d.a.View),W=i("G9ZQ"),q=i("OXuN"),$=i("K+MZ"),K=i("ca1b"),J=i("5A7a"),Z=i.n(J),Y=i("ME2r"),Q=i("+PqR"),X=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets");function ee(e){h.a.defaults(e,{type:I.Included});var t;return t=e.type===I.Included?X.get("Location_Target_Grid_TargetedLocationColumn"):X.get("Location_Target_Grid_ExcludedLocationColumn"),{el:e.gridContainer,dataSource:{type:"memory"},tableClasses:["table","table-bordered"],columns:h.a.compact([Object(K.bingadsGridColumn)({name:"icon",title:" ",property:h.a.identity,bodyClasses:["col-icon"],template:function(e){return Object(q.a)(e.value.Criterion.LocationCriterion)?'<span class="alert-icon warning"></span>':e.value.SelectionStatus===I.Included?'<span class="map-icon__pin--included"></span>':'<span class="map-icon__pin--excluded"></span>'}}),Object(K.bingadsGridColumn)({name:"location",title:t,property:h.a.identity,bodyClasses:["col-location"],template:function(e){if("Radius"===e.value.CriterionType)return"<span>".concat(e.value.Criterion.RadiusCriterion.NameTypeCombo,"</span>");if(Object(q.a)(e.value.Criterion.LocationCriterion)){var t=W.deprecatedTextMapping[e.value.Criterion.LocationCriterion.LocationStatus],i="tr[data-key='".concat(e.value.__primary_key__,"'] .col-location .location-cell-status"),n=P()(".location-targets, .location-targets-section, .location-setting-controller, .editor-container, #bulkEditContainer"),a=j.a.get("IsNewUI");return a&&n.on("mouseover",i,function(e){Object($.a)(e,t,i,!0)}),n.on("click",i,function(e){Object($.a)(e,t,i,a)}),"<div>\n              <span>".concat(e.value.Criterion.LocationCriterion.NameTypeCombo,"</span>\n              ").concat(Z()({text:t.warning}),"\n            </div>")}return"<span>".concat(e.value.Criterion.LocationCriterion.NameTypeCombo,"</span>")}}),e.type===I.Included&&Object(K.bingadsGridColumn)({name:"bid",title:X.get("Target_ColumnHeaderBidAdjustment"),property:h.a.identity,bodyClasses:["col-bid"],template:function(e){var t=new H({model:{id:e.value.Id,selectionStatus:e.value.SelectionStatus,bid:e.value.Criterion.BidAdjustment},isReadOnly:Object(q.a)(e.value.Criterion.LocationCriterion)}).render();setTimeout(function(){P()("tr[data-key='".concat(e.value.__primary_key__,"'] .col-bid")).empty().append(t.el)},0)}}),e.type===I.Included&&e.supportCashbackSettings&&Object(K.bingadsGridColumn)({name:"CashbackPercent",property:function(e){return e},title:X.get("Campaign_Maximum_Cashback_Offer"),bodyClasses:["cashback-percent-cell-wrap"],template:function(t){var i=t.value,n=i.Criterion.CashbackPercent,a=!1;Object(q.a)(i.Criterion.LocationCriterion)?a=!0:"campaign"!==D.default.level||"adgroup-create"!==D.default.scenario&&"adgroup-settings"!==D.default.scenario||(a=!0);var r=new Y.a({viewContext:{currentCampaign:e.currentCampaign,currentAdGroup:e.currentAdGroup},i18n:X,decimal:Q,CashbackPercent:n,isParentLevel:a});return setTimeout(function(){var i=t.value.__primary_key__,n=P()(".location-bid-grid-container tr[data-key='".concat(i,"']"));P()(n).find(".cashback-percent-cell-wrap").empty().append(r.render().$el),r.on("change",function(t,i){e.onCashbackPercentChange(t,i,n)})}),""}})]),plugins:{pagination:{totalPageCountText:X.get("EntitySelector_Pagination_TotalPageCountText"),pageNumberLabelText:X.get("EntitySelector_Pagination_Page"),pageSizeText:X.get("Grid_ShowRows")}}}}var te=i("b172"),ie=i("l1+f"),ne=i.n(ie),ae=i("rWao"),re=i("i/gc"),oe=i("YK3D"),se=i.n(oe);i.d(t,"a",function(){return ce});var le=window.globalLegacyI18n.get("component/i18n/loader!campaignui/location-targets"),ce=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=h.a.defaults(t,{campaignId:"",adgroupId:"",level:"campaign",scenario:"creation-workflow"}),this.viewmodel=new y(this.options),D.default.scenario=this.options.scenario,D.default.level=this.options.level,this.supportCashbackSettings=this.options.supportCashbackSettings&&!se.a.Permissions.IsPersonalizedOffersV3Enabled,this.defaultCashbackPercent=this.options.defaultCashbackPercent,this.isPersonalizedOffersEnabled=se.a.Permissions.IsPersonalizedOffersEnabled,T.default.on("level:changed",function(t){e.options.level=t,e.viewmodel.level(t),D.default.scenario=e.options.scenario,D.default.level=e.options.level,e.onChangeMode()},this),T.default.on("location-bid-cell:bidChanged",function(t){e.handleBidAdjustmenChanged(t)},this)}},{key:"handleBidAdjustmenChanged",value:function(e){var t=x.a.Intermediate.get(this.resourceName,e.id);x.a.Intermediate.update(this.resourceName,e.id,{Id:e.id,Criterion:h.a.extend(t.Criterion,{BidAdjustment:e.bid})}),this.options.activityLogger&&this.options.activityLogger.signal("location bid adjustment changed","location target bid")}},{key:"handleCashbackPercentChange",value:function(e,t,i){if(e){var n=this.gridView.itemOfElement(i);if(!n)return;this.activityLogger&&this.activityLogger.signal("cashback percent change: ".concat(this.criterionType),"cashback percent");var a=x.a.Intermediate.get(this.resourceName,n.Id);x.a.Intermediate.update(this.resourceName,n.Id,{Id:n.Id,Criterion:h.a.extend(a.Criterion,{CashbackPercent:t})})}}},{key:"refresh",value:function(){this.onCriterionChange()}},{key:"onChangeMode",value:function(){this.onCriterionChange()}},{key:"onCriterionChange",value:function(){var e=h.a.deepClone(ae.b(this.resourceName)),t=ne.a.sortLocationsByType(e),i=h.a.isEmpty(e);this.trigger("location-target-bid-grid:onDataChange",i),this.viewmodel.gridVisible(!h.a.isEmpty(t.included)),this.viewmodel.excludedGridVisible(!h.a.isEmpty(t.excluded)),this.viewmodel.gridData(t),this.refreshGridSource()}},{key:"toggleSupportCashbackColumnClass",value:function(){this.supportCashbackSettings?this.$(".location-bid-grid-container").addClass("show-cashback-percent"):this.$(".location-bid-grid-container").removeClass("show-cashback-percent")}},{key:"toggleCashbackPercentColumns",value:function(e,t){if(this.supportCashbackSettings=e&&!se.a.Permissions.IsPersonalizedOffersV3Enabled,this.toggleSupportCashbackColumnClass(),null!=t)if("AdGroup"===t.level){var i=h.a.chain(this.options).result("currentAdGroup").result("AdGroupCashback",{}).value();this.options.currentAdGroup=h.a.extend({},this.options.currentAdGroup,{AdGroupCashback:h.a.extend({},i,{Percent:t.value})})}else{var n=h.a.chain(this.options).result("currentCampaign").result("CampaignCashback",{}).value();this.options.currentCampaign=h.a.extend({},this.options.currentCampaign,{CampaignCashback:h.a.extend({},n,{Percent:t.value})})}this.initIncludedGrid(),this.refreshGridSource()}},{key:"initIncludedGrid",value:function(){this.gridView&&this.gridView.remove();var e=this.viewmodel.gridData(),t=new ee({gridContainer:this.isPersonalizedOffersEnabled?null:this.$(".location-bid-grid"),pagerViewContainer:this.isPersonalizedOffersEnabled?null:this.$(".location-bid-pager-view"),data:e.included,supportCashbackSettings:this.supportCashbackSettings,defaultCashbackPercent:this.defaultCashbackPercent,currentCampaign:this.options.currentCampaign,currentAdGroup:this.options.currentAdGroup,onCashbackPercentChange:this.handleCashbackPercentChange.bind(this)}),i=b.a.factory({vnext:!0}).use(_.paginationPlugin).use(E.uiBlockerPlugin).create(t);this.gridView=i.gridView;var n=i.gridView.render();return this.isPersonalizedOffersEnabled&&this.$(".location-bid-grid-container").empty().append(n.$el),i}},{key:"render",value:function(){this.$el.html(w()({i18n:le,level:this.options.level,isPersonalizedOffersEnabled:se.a.Permissions.IsPersonalizedOffersEnabled})),f.a.applyBindings(this.viewmodel,this.el);var e=this.initIncludedGrid(),t=this.viewmodel.gridData(),i=b.a.factory({vnext:!0}).use(_.paginationPlugin).use(E.uiBlockerPlugin).create(new ee({gridContainer:this.$(".excluded-location-grid"),pagerViewContainer:this.$(".excluded-location-pager-view"),type:I.Excluded,data:t.excluded}));return i.gridView.render(),this.excludedGridView=i.gridView,e.gridView.render(),(this.viewmodel.gridVisible()||this.viewmodel.excludedGridVisible())&&this.refreshGridSource(),this.toggleSupportCashbackColumnClass(),this}},{key:"refreshGridSource",value:function(){var e=this.viewmodel.gridData();this.gridView&&this.gridView.patch({dataSource:{data:e.included}}),this.excludedGridView&&this.excludedGridView.patch({dataSource:{data:e.excluded}})}},{key:"update",value:function(e){var t=this;this.options.campaignId=e,te.load(e,"",["LocationCriterion","RadiusCriterion"]).then(function(e){t.viewmodel.gridData(e),t.refreshGridSource()})}},{key:"save",value:function(){var e=this;if("adgroup-create"===this.options.scenario)return new p.a(function(e){e()});var t=this.getValues();h.a.each(t,function(t){t.Status="Active",t.Campaign={Id:e.options.campaignId}});var i={Id:this.options.campaignId,CampaignCriterions:t};return x.a.Campaign.update(this.options.campaignId,i,{adapter:"bulk"}).then(function(){}).catch(function(){}).finally(A()(this.$el))}},{key:"validate",value:function(){var e=ae.b(this.resourceName);return h.a.every(e,function(e){var t=e.Criterion.BidAdjustment;return!isNaN(Number(t))&&!(t<-1*L.a.minimumBid.Location||t>L.a.maximumBid.Location)})&&(this.isCashbackPercentValidated||!this.supportCashbackSettings)}},{key:"getValues",value:function(){var e=this,t=h.a.deepClone(ae.b(this.resourceName));return h.a.chain(t).filter(function(t){var i=t.Criterion.OriginalBidAdjustment!==t.Criterion.BidAdjustment,n=!!e.supportCashbackSettings&&Object(re.getRealCashbackPercentValue)(t.Criterion.OriginalCashbackPercent,Q)!==Object(re.getRealCashbackPercentValue)(t.Criterion.CashbackPercent,Q);return i||n}).map(function(t){return"Radius"===t.Criterion.Type?t.CriterionType=t.Criterion.Type:"Location"===t.Criterion.Type&&(t.CriterionType=t.SelectionStatus===I.Included?"Location":"NegativeLocation"),e.supportCashbackSettings?t.Criterion.CashbackPercent=Object(re.getRealCashbackPercentValue)(t.Criterion.CashbackPercent,Q):t.Criterion.CashbackPercent=void 0,t.Id>=0?t:h.a.omit(t,"Id")}).value()}},{key:"remove",value:function(){var e;T.default.off(null,null,this);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];(e=Object(s.a)(Object(o.a)(t.prototype),"remove",this)).call.apply(e,[this].concat(n))}},{key:"isCashbackPercentValidated",get:function(){if(this.supportCashbackSettings){var e=[".location-bid-grid-container.show-cashback-percent .table-container td.cashback-percent-cell-wrap .error"].join(","),t=this.$el.find(e);return h.a.every(t,function(e,i){return""===t.eq(i).text()})}return!0}},{key:"resourceName",get:function(){return"campaign"===this.options.level?"CampaignCriterion":"AdGroupCriterion"}}]),t}(d.a.View)},"r+5x":function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="form-horizontal"><div class="search-bid__container"></div></div>'}},rO3q:function(e,t,i){"use strict";i.d(t,"a",function(){return _});var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("UT4o"),p=i.n(u),g=i("G8kH"),h=i.n(g),m=i("IbLZ"),f=i("2sC/"),v=i("UgQD"),b=i("ITOZ"),y=i("b172"),S=i("1EwD"),w=i.n(S),C=i("3X1n"),x=i("RibF"),k=i.n(x),A=window.globalLegacyI18n.get("@bingads-webui/i18n-amd-loader!campaignui/campaign-creation-advanced"),T={model:{locationTargets:{},adScheduleModel:{}},showDateSettings:!0,needRestore:!1},_=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(e){this.options=p.a.defaults(e,T),this.eventDelegator=e.deps.eventDelegator,this.template=h.a}},{key:"render",value:function(){var e=this;if(this.$el.html(this.template({i18n:A})),this.options.campaignId)y.load(this.options.campaignId,"",["DayTimeCriterion"]).then(function(t){var i=e.formatLoadedCriterions(t);e.renderSubViews(i,e.options.campaignId)}).finally(w()(this.el));else{var t=(this.options.model||{}).adScheduleModel,i=(void 0===t?{}:t).dayTimeRanges,n=void 0===i?[]:i;this.renderSubViews(n)}return this}},{key:"renderSubViews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=this.$el;return this.locationTargetsView=this.renderLocationTargetsView(t),this.adScheduleView=this.renderAdScheduleView(e),i.find(".location-targets-container").empty().append(this.locationTargetsView.$el),i.find(".ad-schedule").empty().append(this.adScheduleView.$el),this}},{key:"formatLoadedCriterions",value:function(e){var t=this;return e.map(function(e){return{Id:String(e.Id),CriterionType:"DayTime",campaignName:t.campaignName,Status:"Active",Criterion:{Type:"DayTime",BidAdjustment:0,OriginalBidAdjustment:0,DayTimeCriterion:e.Criterion}}})}},{key:"remove",value:function(){for(var e,i,n,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];(e=this.locationTargetsView).remove.apply(e,r),(i=this.adScheduleView).remove.apply(i,r),(n=Object(s.a)(Object(o.a)(t.prototype),"remove",this)).call.apply(n,[this].concat(r))}},{key:"renderLocationTargetsView",value:function(e){var t=new m.default({scenario:"smart-shopping-campaign",level:"campaign",hideAudience:!0,showInitialUiBlocker:!1,campaignId:e,deps:{eventDelegator:this.eventDelegator}}).render();if(null==e){t.setLocationData([],"campaign",!1,!1);var i=this.options.model&&this.options.model.locationTargets&&this.options.model.locationTargets.locations||[];this.options.needRestore?t.setLocationData(i,"campaign",!1,!0,!0):t.viewmodel.targetOption(C.a.bundleOrDefaultMarket)}return t}},{key:"parseDate",value:function(e){if(null==e)return null;var t=e.split("/"),i=t[0],n=t[1],a=t[2];return"".concat(a,"-").concat(1===i.length?"0".concat(i):i,"-").concat(1===n.length?"0".concat(n):n)}},{key:"formatSchedulingRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return p.a.each(e,function(e){var i=e.Criterion.DayTimeCriterion;t.push({Id:e.Id,Day:i.Day,StartHour:i.FromHour,StartMinute:"string"===typeof i.FromMinute?i.FromMinute:k.a.minuteToReadMap[i.FromMinute],EndHour:i.ToHour,EndMinute:"string"===typeof i.ToMinute?i.ToMinute:k.a.minuteToReadMap[i.ToMinute]})}),t}},{key:"renderAdScheduleView",value:function(e){var t=this.options,i=t.model,n=t.adgroupId,a=t.showDateSettings,r=void 0===a||a,o=i&&i.adScheduleModel?i.adScheduleModel:{};r||(o=p.a.omit(o,["startDate","endDate"]));var s=p.a.extend({},o,{startDate:this.parseDate(o.startDate),endDate:this.parseDate(o.endDate),adScheduleUseSearcherTimeZone:o.adScheduleUseSearcherTimeZone,adGroupStatus:null==n?"Draft":null,dayTimeRanges:this.formatSchedulingRows(e)});return new f.default({showBidAdjustmentColumn:!1,showDateSettings:r,model:s,timeZone:v.getAccountTimeZone(),isForVNext:this.options.isForVNext}).render()}},{key:"deletedDayTimeCb",value:function(e){var t=this.options.campaignId;p.a.each(e,function(e){e.Status="Deleted",e.Campaign={Id:t}})}},{key:"getPropertyValidationErrors",value:function(){return this.adScheduleView.getPropertyValidationErrors()}},{key:"getValue",value:function(){if(this.adScheduleView.validate()&&this.locationTargetsView.validate()){var e=this.locationTargetsView.getValues({},{populateParentField:!0,removeNegativeId:!0}),t=this.adScheduleView.getValues(this.deletedDayTimeCb.bind(this)),i=this.adScheduleView.getDateSettings(),n=!!this.adScheduleView.dateSettings&&this.adScheduleView.dateSettings.viewModel.hasEndDate(),a=this.adScheduleView.getAdScheduleUseSearcherTimeZone(),r={dayTimeRanges:t,startDate:i.StartDate,endDate:n?i.EndDate:null,timeZone:v.getAccountTimeZone(),adScheduleUseSearcherTimeZone:a};return this.options.showDateSettings||(r=p.a.omit(r,["startDate","endDate"])),{locationTargets:Object(b.cloneDeep)(e),adScheduleModel:Object(b.cloneDeep)(r)}}return!1}}]),t}(d.a.View)},"rm/4":function(e,t,i){"use strict";var n=i("7XbR"),a=i.n(n),r=i("UT4o"),o=i.n(r),s=i("AQBV"),l=i.n(s),c=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),d=o.a.result(l.a.get("Permissions"),"IsOriginalDeviceTargetingEnabled"),u=!d,p=c.get("BidAdjustment_IncreaseText"),g=c.get("BidAdjustment_DecreaseText"),h=u?100:20,m=u?900:300,f=u?100:90,v=u?900:300;t.a={bidAdjustmentIncreaseText:p,bidAdjustmentDecreaseText:g,bidAdjustmentIncreaseValue:1,bidAdjustmentDecreaseValue:-1,multimediaAdDefaultBid:40,minimumBid:{AgeType_EighteenToTwentyFive:90,AgeType_TwentyFiveToThirtyFive:90,AgeType_ThirtyFiveToFifty:90,AgeType_FiftyToSixtyFive:90,AgeType_SixtyFiveAndAbove:90,DeviceType_Tablets:h,DeviceType_Smartphones:f,DeviceType_Computers:100,GenderType_Male:90,GenderType_Female:90,NativeAdType_NativeAdsBids:100,MultimediaAdType_MultimediaAdsBids:20,Location:90},maximumBid:{AgeType_EighteenToTwentyFive:900,AgeType_TwentyFiveToThirtyFive:900,AgeType_ThirtyFiveToFifty:900,AgeType_FiftyToSixtyFive:900,AgeType_SixtyFiveAndAbove:900,DeviceType_Tablets:m,DeviceType_Smartphones:v,DeviceType_Computers:900,GenderType_Male:900,GenderType_Female:900,NativeAdType_NativeAdsBids:900,MultimediaAdType_MultimediaAdsBids:900,Location:900},bidAdjustmentOptions:a.a.observableArray([{text:p,value:1},{text:g,value:-1}]),multimediaBidAdjustmentOptions:a.a.observableArray([{text:p,value:1}]),rowKeys:{Age:["EighteenToTwentyFive","TwentyFiveToThirtyFive","ThirtyFiveToFifty","FiftyToSixtyFive","SixtyFiveAndAbove"],Device:d||u?["Computers","Tablets","Smartphones"]:["Tablets","Smartphones"],Gender:["Male","Female"],NativeAd:["NativeAdsBids"],MultimediaAd:["MultimediaAdsBids"]},osNames:{Computers:["Windows"],Tablets:["Android","BlackBerry","iOS","Other"],Smartphones:["Android","BlackBerry","iOS","Windows","Other"]},targetTypeToFilterProperty:{Age:"AgeRange",Gender:"GenderType",Device:"DeviceName",NativeAd:"NativeAd",MultimediaAd:"MultimediaAd"},specialDeviceSmartphonesBidAdjustmentValue:100}},rmOu:function(e,t,i){"use strict";var n=i("bgLp"),a=i("UT4o"),r=i.n(a),o=i("a28/"),s=function(e){var t=e.i18n,i=e.state;if(!t||!i)return{};var n={Monday:"WeekDay_2",Tuesday:"WeekDay_3",Wednesday:"WeekDay_4",Thursday:"WeekDay_5",Friday:"WeekDay_6",Saturday:"WeekDay_7",Sunday:"WeekDay_1"},a=function(e,i,n){if(i){var a=i===e?e:"".concat(e,"-").concat(i);return(n?t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_NightsSegment_Label"):t.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_DaysSegment_Label")).replace(/\{0\}/g,a)}var r=n?t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_InputNights_AddOn_Label"):t.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_InputDays_AddOn_Label");return"".concat(e," ").concat(r)},s=function(e,t){var i,n=[],o=e.length,s=e;o>1&&(s=r.a.sortBy(e,function(e){return Number(e.key)}));for(var l=0;l<o;l+=1)i=l===o-1?r.a.noop():(Number(s[l+1].key)-1).toString(),n.push({key:s[l].key,factor:s[l].factor,value:a(s[l].key,i,t),strategy:s[l].strategy});return n},l=function(e,t){var i=[];return r.a.each(e,function(e){i.push({key:e.key,factor:Math.abs(e.percentage),strategy:e.percentage>=0?"increase":"decrease"})}),s(i,t)},c=function(e){var t={deviceType:[],dateType:[],siteType:[],userCountry:[],checkInDay:[],lengthOfStay:[],advancedBooking:[]};return e&&0!==e.length?(r.a.each(e,function(e){var i=e.Factor,n=100*Number(i);n=parseFloat(n-100).toFixed(2),"#Model.DeviceMultiplier"===e["@odata.type"]?r.a.each(e.DeviceTypes,function(e){t.deviceType.push({deviceType:e,percentage:n})}):"#Model.DateTypeMultiplier"===e["@odata.type"]?t.dateType.push({dateType:e.DateType,percentage:n}):"#Model.SiteMultiplier"===e["@odata.type"]?r.a.each(e.Sites,function(e){t.siteType.push({siteType:e,percentage:n})}):"#Model.UserCountryMultiplier"===e["@odata.type"]?r.a.each(e.Countries,function(e){t.userCountry.push({country:e,percentage:n})}):"#Model.CheckinDayOfWeekMultiplier"===e["@odata.type"]?r.a.each(e.DaysOfWeek,function(e){t.checkInDay.push({dayOfWeek:e,percentage:n})}):"#Model.LengthOfStayMultiplier"===e["@odata.type"]?t.lengthOfStay.push({key:e.MinimumNumberOfNights.toString(),percentage:n}):"#Model.AdvanceBookingWindowMultiplier"===e["@odata.type"]&&t.advancedBooking.push({key:e.MinimumNumberOfDays.toString(),percentage:n})}),t.lengthOfStay.length>0&&(t.lengthOfStay=l(t.lengthOfStay,!0)),t.advancedBooking.length>0&&(t.advancedBooking=l(t.advancedBooking,!1)),t):t},d=function(e,i){return t.getString("HotelCenter_SubAccountBar_Device_Type_Multiplier_Format").replace(/\{0\}/g,e).replace(/\{1\}/g,i>0?"+".concat(i):i)},u=function(e){var i={Mobile:t.getString("HotelCenter_Overview_Multipliers_Bids_Mobile_Label"),Tablet:t.getString("HotelCenter_Overview_Multipliers_Bids_Tablet_Label"),Desktop:t.getString("HotelCenter_Overview_Multipliers_Bids_Desktop_Label")},n=r.a.map(e,function(e){var t=e.percentage,n=i[e.deviceType];return d(n,t)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_DeviceType_Multipliers_Label"),": ").concat(n)},p=function(e){var i={LocalUniversal:t.getString("HotelCenter_Overview_SiteType_Multipliers_Local_Universal_Label"),MapResults:t.getString("HotelCenter_Overview_SiteType_Multipliers_Map_Results_Label"),PropertyPromotionAd:t.getString("HotelCenter_Overview_SiteType_Multipliers_Property_PromotionAd_Label")},n=r.a.map(e,function(e){var t=e.percentage,n=i[e.siteType];return d(n,t)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_SiteType_Multipliers_Label"),": ").concat(n)},g=function(e){var i={Selected:t.getString("HotelCenter_Overview_DateType_Multipliers_Selected_Label"),Default:t.getString("HotelCenter_Overview_DateType_Multipliers_Default_Label")},n=r.a.map(e,function(e){var t=e.percentage,n=i[e.dateType];return d(n,t)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_DateType_Multipliers_Label"),": ").concat(n)},h=function(e){var n=r.a.map(e,function(e){var t=e.percentage,n=i.get("userCountries"),a=r.a.chain(n).findWhere({Key:e.country}).result("Value",e.country).value();return d(a,t)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_UserCountry_Multipliers_Label"),": ").concat(n)},m=function(e){var i=r.a.map(e,function(e){var i=e.percentage,a=t.getString(n[e.dayOfWeek]);return d(a,i)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_CheckinDay_Multipliers_Label"),": ").concat(i)},f=function(e){var i=r.a.map(e,function(e){var t=e.factor,i=e.value;return d(i,t)}).join(", ");return"".concat(t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_Label"),": ").concat(i)};return{bidMultiplierUtils:{weekDayMap:n,formatStaySegments:s,getMultipliersState:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=c(e);return r.a.mapObject(i,function(e,i){if("lengthOfStay"===i||"advancedBooking"===i)return t?r.a.map(e,function(e){return r.a.defaults({factor:0},e)}):e;var n={};return r.a.each(e,function(e){var i=e.deviceType||e.dateType||e.siteType||e.country||e.dayOfWeek,a=t?0:e.percentage;r.a.extend(n,Object(o.a)({},i,{strategy:a>=0?"increase":"decrease",factor:Math.abs(a)}))}),n})},serializeBidMultipliers:function(e){var t=[];return r.a.each(e,function(e){"deviceType"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{DeviceTypes:[e.value],Factor:e.factor,"@odata.type":"#Model.DeviceMultiplier"}}(e)):"dateType"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{DateType:e.value,Factor:e.factor,"@odata.type":"#Model.DateTypeMultiplier"}}(e)):"siteType"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{Sites:[e.value],Factor:e.factor,"@odata.type":"#Model.SiteMultiplier"}}(e)):"userCountry"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{Countries:[e.value],Factor:e.factor,"@odata.type":"#Model.UserCountryMultiplier"}}(e)):"checkInDay"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{DaysOfWeek:[e.value],Factor:e.factor,"@odata.type":"#Model.CheckinDayOfWeekMultiplier"}}(e)):"lengthOfStay"===e.type?t.push(function(e){return r.a.isUndefined(e.factor)?{}:{MinimumNumberOfNights:Number(e.value),Factor:e.factor,"@odata.type":"#Model.LengthOfStayMultiplier"}}(e)):"advancedBooking"===e.type&&t.push(function(e){return r.a.isUndefined(e.factor)?{}:{MinimumNumberOfDays:Number(e.value),Factor:e.factor,"@odata.type":"#Model.AdvanceBookingWindowMultiplier"}}(e))}),r.a.filter(t,function(e){return!r.a.isEmpty(e)})},getMultipliersDetailText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(r.a.isEmpty(e))return t;var i=c(e),n={deviceType:u,dateType:g,siteType:p,userCountry:h,checkInDay:m,lengthOfStay:f};return r.a.chain(i).map(function(e,t){return r.a.isFunction(n[t])&&!r.a.isEmpty(e)?n[t](e):null}).compact().join(";").value()},getMultipliersText:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[];if(r.a.isEmpty(e))return n;var o=c(e);return 0!==o.deviceType.length&&a.push(t.getString("HotelCenter_Overview_DeviceType_Multipliers_Label_Short")),0!==o.userCountry.length&&a.push(t.getString("HotelCenter_Overview_UserCountry_Multipliers_Label_Short")),0!==o.checkInDay.length&&a.push(t.getString("HotelCenter_Overview_CheckinDay_Multipliers_Label_Short")),0!==o.lengthOfStay.length&&a.push(t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_Label_Short")),0!==o.advancedBooking.length&&a.push(t.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_Label_Short")),0!==o.dateType.length&&a.push(t.getString("HotelCenter_Overview_DateType_Multipliers_Label_Short")),0!==o.siteType.length&&a.push(t.getString("HotelCenter_Overview_SiteType_Multipliers_Label_Short")),0===a.length?"":i?"".concat(t.getString("HotelCenter_Overview_Multipliers_PreLabel")).concat(a.join(", ")):a.join(", ")}}}};i.d(t,"a",function(){return l});var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageContext,i=e.i18n,a=e.state;return Object(n.a)({},function(e){var t=e.i18n,i=e.pageContext;if(!t||!i)return{};return{bidUtils:{getText:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r.a.isNull(e)||e.Amount<0?n:[t.formatDecimalToFixed(e.Amount),r.a.result({"#Model.FixedBid":i.AccountCurrencyCode,"#Model.PercentageBid":i.DecimalFormatter.percentSymbol},e["@odata.type"],i.AccountCurrencyCode)].join(" ")}}}}({pageContext:t,i18n:i}),function(e){var t=e.pageContext;if(!t)return{};var i=60*t.UtcOffsetHours,n=6e4*((new Date).getTimezoneOffset()+i);return{dateUtils:{local2account:function(e){return new Date(e.getTime()+n)},account2local:function(e){return new Date(e.getTime()-n)}}}}({pageContext:t}),s({i18n:i,state:a}),{inlineDownloadUtils:{processReportRuleForHotelCenterBIDimensionRow:function(e){return r.a.defaults({SaveReport:!0,Selection:r.a.defaults({"@odata.type":"#Model.DimensionReportSelection",Type:"VerticalPerformance"},e.Selection)},e)},processReportRuleForHotelCenterBookingRow:function(e){return r.a.defaults({SaveReport:!0,Selection:r.a.defaults({"@odata.type":"#Model.DimensionReportSelection",Type:"VerticalBookingDetails"},e.Selection)},e)}}})}},rrD6:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.id,o=a.property;i=i+"<div"+n.attr("id",r,!0,!0)+' role="radiogroup"'+n.attr("aria-labelledby",r+"-Label",!0,!0)+n.attr("aria-describedby",r+"-Validation",!0,!0)+">",function(){var s=a.values;if("number"==typeof s.length)for(var l=0,c=s.length;l<c;l++){var d=s[l];i=i+'<label class="radio-inline"><input type="radio" role="radio"'+n.attr("name",r,!0,!0)+n.attr("value",e(d),!0,!0)+n.attr("data-bind","checked: "+o+'.radios, attr: { "aria-checked": '+o+".radios }",!0,!0)+">"+n.escape(null==(t=a.valueMessages[l])?"":t)+"</label>"}else for(var l in c=0,s)c++,d=s[l],i=i+'<label class="radio-inline"><input type="radio" role="radio"'+n.attr("name",r,!0,!0)+n.attr("value",e(d),!0,!0)+n.attr("data-bind","checked: "+o+'.radios, attr: { "aria-checked": '+o+".radios }",!0,!0)+">"+n.escape(null==(t=a.valueMessages[l])?"":t)+"</label>"}.call(this),i+="</div>"}.call(this,"String"in a?a.String:"undefined"!==typeof String?String:void 0,"field"in a?a.field:"undefined"!==typeof field?field:void 0),i}},rslr:function(e,t,i){var n,a;n=[i("UT4o"),i("7XbR")],void 0===(a=function(e,t){"use strict";window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");return function(e){this.isFinalUrl=t.observable(e.isFinal),this.isFinalUrl.Editing=t.computed({read:function(){return this.isFinalUrl().toString()},write:function(e){return this.isFinalUrl("true"===e)}},this),this.editMode=t.observable(!1)}}.apply(t,n))||(e.exports=a)},s3tY:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},i=i+'<div class="date-settings-intro col-sm-12 row"><span>'+n.escape(null==(t=e.get("AdvancedSetting_ScheduleDesc"))?"":t)+'</span></div><div class="form-horizontal date-settings"><div class="date-container"><div class="form-control-static"><table role="presentation"><tbody><tr><td class="item-label schedule-item-label form-control-static">'+n.escape(null==(t=e.get("Campaign_StartDate"))?"":t)+'</td><td><div class="col-sm-9"><input class="date-start clickable" data-bind="datePicker: startDate, culture: culture, format: format, disabled: hasFixedStartDate" aria-describedby="startDateError"'+n.attr("aria-label",e.get("Campaign_StartDate"),!0,!0)+'></div></td></tr><tr><td class="item-label schedule-item-label form-control-static">'+n.escape(null==(t=e.get("Campaign_EndDate"))?"":t)+'</td><td><div role="radiogroup"><div class="radio"><label><input type="radio" name="hasEndDate" value="false" data-bind="checked: hasEndDate.Editing">'+n.escape(null==(t=e.get("Campaign_NoEndDate"))?"":t)+'</label></div><div class="row radio"><div class="col-sm-3 form-control-static"><label><input type="radio" name="hasEndDate" value="true" data-bind="checked: hasEndDate.Editing">'+n.escape(null==(t=e.get("Campaign_EndBy"))?"":t)+'</label></div><div class="col-sm-9"><input class="date-end clickable" data-bind="datePicker: endDate, culture: culture, format: format, enabled: hasEndDate" aria-describedby="endDateError"'+n.attr("aria-label",e.get("Campaign_EndDate"),!0,!0)+"></div></div></div></td></tr></tbody></table>",a.koError("startDateError"),a.koError("endDateError"),i+="</div></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},sNFH:function(e,t,i){"use strict";var n=i("UT4o"),a=i.n(n),r=i("AQBV"),o=i.n(r),s=window.globalLegacyI18n.get("component/i18n/loader!component/ko-validation"),l=o.a.get("KeywordBidRange")||{CeilingValue:1e3,FloorValue:0},c=o.a.get("ProductGroupBidRange")||{CeilingValue:1e3,FloorValue:.01};t.a={extend:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.a.each(t,function(t){var n=a.a.result(e[t].validators,"range");if(n){var r=i?c:l,o=r.FloorValue,d=r.CeilingValue;n.min=o,n.max=d,n.message=s.get("Validation_Number_Range_Between",{min:o,max:d})}})}}},sPMD:function(e,t,i){var n,a;n=[i("ERkP"),i("UT4o"),i("aWzz"),i("DfB3"),i("mxlK")],void 0===(a=function(e,t,i,n,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=625)}({10:function(e,t){e.exports=i},3:function(t,i){t.exports=e},357:function(e,t){e.exports=n},625:function(e,t,i){e.exports=i(626)},626:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImagePickerContainer",{enumerable:!0,get:function(){return n.ImagePickerContainer}}),Object.defineProperty(t,"ImageItemModelShape",{enumerable:!0,get:function(){return a.ImageItemModelShape}}),Object.defineProperty(t,"DataSourceState",{enumerable:!0,get:function(){return r.DataSourceState}});var n=i(627),a=i(632),r=i(634)},627:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagePickerContainer=void 0;var n=u(i(3)),a=u(i(9)),r=u(i(10)),o=i(357),s=i(628),l=i(629),c=i(634),d=i(635);function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var y={position:"relative",display:"inline-block",overflowY:"scroll",width:"100%"},S=function(e){function t(e){var i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=m(t).call(this,e),i=!r||"object"!==p(r)&&"function"!==typeof r?f(n):r,b(f(i),"onListItemClicked",function(e,t){var n=parseInt(e,10);if(a.default.find(i.state.imageList,function(e){return e.id===n})){var r=g(i.state.selectedIds);if(i.props.isMultiSelection){var o=r.indexOf(n);o>=0?r.splice(o,1):r.push(n)}else r=[n];i.setState({selectedIds:r});var s=a.default.map(r,function(e){return a.default.find(i.state.imageList,function(t){return t.id===e})});i.props.onSelectionChanged(s,t)}}),b(f(i),"onImageLoadError",function(e){i.setState(function(t){return{imageList:a.default.reject(t.imageList,function(t){return t.src===e})}})}),b(f(i),"getImageListAndSet",function(){var e=i.props.dataSource.getData();i.props.imageSrcGetter&&e.data.forEach(function(e){e.src=i.props.imageSrcGetter(e)}),i.setState({showUiBlocker:!1,imageList:e.data,hasMore:e.hasMore,selectedIds:e.data.length>0?i.state.selectedIds:[]})}),b(f(i),"dataSourceChanged",function(e){e===c.DataSourceState.Loading?i.setState({showUiBlocker:!0}):e===c.DataSourceState.Done&&i.getImageListAndSet()}),i.state={showUiBlocker:!1,imageList:[],selectedIds:[],hasMore:!1},i}var i,r,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,n.default.PureComponent),i=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.subsriptionId=this.props.dataSource.subscribe(function(t){e.dataSourceChanged(t)}),this.getImageListAndSet()}},{key:"componentWillUnmount",value:function(){this.subsriptionId&&this.props.dataSource.unsubscribe(this.subsriptionId)}},{key:"render",value:function(){var e=this.props,t=e.imagePlaceHolder,i=e.imagePlaceHolderGetter,r=e.imageListItemWrapper,c=e.isLazyLoadEnabled,u=e.isMultiSelection,p=e.itemHeight,g=e.height,h=e.maximizeFrame,m=e.useBingAdsLoader,f=e.onLoadMore,v=e.isAutoLoadMore,b=e.i18n,S=e.maximumItemCount,w=this.state,C=w.imageList,x=w.selectedIds,k=w.showUiBlocker,A=w.hasMore,T=function(e){var t=e.maximizeFrame,i=e.height,n=t?{overflowY:"auto"}:{height:i};return a.default.extend({},y,n)}({height:g,maximizeFrame:h}),_=a.default.isNumber(S)&&C.length>S,E=_?C.slice(0,S):C;return n.default.createElement(n.default.Fragment,null,_&&n.default.createElement(o.Alert,{message:b.getString("ImageExperience_SuggestionExceedsMaximum",{imageSize:S}),level:"Info",icon:n.default.createElement("div",{className:"alert-image"}),dismissible:!1}),n.default.createElement("div",{className:"image-picker-container",style:T},n.default.createElement(l.ImageListView,{imageList:E,selectedIds:x,onListItemClicked:this.onListItemClicked,isMultiSelection:u,isLazyLoadEnabled:c,imageListItemWrapper:r,imagePlaceHolder:t,imagePlaceHolderGetter:i,itemHeight:p,onImageLoadError:this.onImageLoadError,i18n:b}),n.default.createElement("span",{className:"live-region","aria-live":"polite","aria-label":E.length>0?b.getString("Found {{totalCount}} Results",{totalCount:E.length}):b.getString("No results found")}),k&&!m&&n.default.createElement("div",{style:{width:"100%",height:"200px",textAlign:"center"}},n.default.createElement(s.LoadingIndicator,null)),k&&m&&n.default.createElement("div",{style:{width:"100%",height:"200px",textAlign:"center"}},t()),E.length>0&&A&&n.default.createElement(d.LoadMoreButton,{onLoadMore:f,isAutoLoadMore:v})))}}])&&h(i.prototype,r),u&&h(i,u),t}();t.ImagePickerContainer=S,b(S,"propTypes",{dataSource:r.default.shape({subscribe:r.default.func.isRequired,unsubscribe:r.default.func.isRequired,getData:r.default.func.isRequired}).isRequired,i18n:r.default.shape({getString:r.default.func.isRequired}).isRequired,isMultiSelection:r.default.bool,onSelectionChanged:r.default.func,onLoadMore:r.default.func,maximizeFrame:r.default.bool,height:r.default.number,imagePlaceHolder:r.default.func,imagePlaceHolderGetter:r.default.func,imageListItemWrapper:r.default.func,imageSrcGetter:r.default.func,isAutoLoadMore:r.default.bool,isLazyLoadEnabled:r.default.bool,itemHeight:r.default.number,useBingAdsLoader:r.default.bool,maximumItemCount:r.default.number}),b(S,"defaultProps",{isMultiSelection:!1,onSelectionChanged:a.default.noop,onLoadMore:null,height:700,maximizeFrame:!1,isAutoLoadMore:!1,isLazyLoadEnabled:!1,imagePlaceHolder:null,imagePlaceHolderGetter:null,imageListItemWrapper:null,imageSrcGetter:null,itemHeight:250,useBingAdsLoader:!1,maximumItemCount:null})},628:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingIndicator=void 0;var n,a=(n=i(3))&&n.__esModule?n:{default:n};t.LoadingIndicator=function(){return a.default.createElement("svg",{width:"100px",height:"100px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-ellipsis",style:{background:"none"}},a.default.createElement("circle",{cx:"84",cy:"50",r:"0",fill:"#008272"},a.default.createElement("animate",{attributeName:"r",values:"10;0;0;0;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),a.default.createElement("animate",{attributeName:"cx",values:"84;84;84;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"})),a.default.createElement("circle",{cx:"47.5763",cy:"50",r:"10",fill:"#008272"},a.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-1s"}),a.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-1s"})),a.default.createElement("circle",{cx:"16",cy:"50",r:"9.28715",fill:"#008272"},a.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-0.5s"}),a.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-0.5s"})),a.default.createElement("circle",{cx:"84",cy:"50",r:"0.712853",fill:"#008272"},a.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),a.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"})),a.default.createElement("circle",{cx:"81.5763",cy:"50",r:"10",fill:"#008272"},a.default.createElement("animate",{attributeName:"r",values:"0;0;10;10;10",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),a.default.createElement("animate",{attributeName:"cx",values:"16;16;16;50;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"})))}},629:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageListView=void 0;var n=l(i(3)),a=l(i(10)),r=l(i(9)),o=i(630),s=i(632);function l(e){return e&&e.__esModule?e:{default:e}}var c={padding:"5px"},d=function(e){return n.default.createElement("div",{className:"default-item-wrapper",style:c},e.children)};d.propTypes={children:a.default.element.isRequired};var u=function(e){var t=e.imageListItemWrapper?e.imageListItemWrapper:d;return n.default.createElement("div",{className:"image-list-view",style:{display:"inline-block",width:"100%"}},e.imageList.map(function(i,a){return n.default.createElement("div",{className:"image-list-item-wrapper",style:{float:"left"},key:i.id},n.default.createElement(t,{image:i,itemHeight:e.itemHeight,isSelected:e.selectedIds.indexOf(i.id)>=0},n.default.createElement(o.ImageListItem,{image:i,onItemClicked:e.onListItemClicked,onImageLoadError:e.onImageLoadError,imagePlaceHolder:e.imagePlaceHolderGetter?e.imagePlaceHolderGetter(i,a):e.imagePlaceHolder,isLazyLoadEnabled:e.isLazyLoadEnabled,itemHeight:e.itemHeight,ariaLabel:"".concat(e.i18n.getString("ImageExperience_Image")," ").concat(a+1),index:a})))}))};t.ImageListView=u,u.propTypes={imageList:a.default.arrayOf(s.ImageItemModelShape).isRequired,selectedIds:a.default.arrayOf(Number),isLazyLoadEnabled:a.default.bool,onListItemClicked:a.default.func,onImageLoadError:a.default.func,imageListItemWrapper:a.default.func,imagePlaceHolder:a.default.func,imagePlaceHolderGetter:a.default.func,itemHeight:a.default.number,i18n:a.default.shape({getString:a.default.func.isRequired}).isRequired},u.defaultProps={onListItemClicked:r.default.noop,onImageLoadError:r.default.noop,selectedIds:[],isLazyLoadEnabled:!0,imageListItemWrapper:null,imagePlaceHolder:null,imagePlaceHolderGetter:null,itemHeight:250}},630:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageListItem=void 0;var n=c(i(3)),a=c(i(9)),r=c(i(10)),o=i(631),s=i(632),l=i(633);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.itemHeight,i=Math.round(e.image.width*t/e.image.height),a=i/t>1.6?1.6*t:i,r=-(i-a)/2;return n.default.createElement("button",{onClick:function(t){t.currentTarget&&t.currentTarget.id&&e.onItemClicked(t.currentTarget.id,e.index)},id:e.image.id,style:l.emptyButtonStyle,height:t,width:a,"aria-label":e.ariaLabel},e.isLazyLoadEnabled&&n.default.createElement(o.LazyImage,{src:e.image.src,height:t,width:i,limitWidth:a,alt:e.image.altText,imagePlaceHolder:e.imagePlaceHolder,onImageLoadError:e.onImageLoadError}),!e.isLazyLoadEnabled&&n.default.createElement("img",{src:e.image.src,width:i,style:{marginLeft:"".concat(r,"px")},alt:e.image.altText}))};t.ImageListItem=d,d.propTypes={image:s.ImageItemModelShape.isRequired,onItemClicked:r.default.func,onImageLoadError:r.default.func,itemHeight:r.default.number,imagePlaceHolder:r.default.func,isLazyLoadEnabled:r.default.bool,index:r.default.number,ariaLabel:r.default.string.isRequired},d.defaultProps={onItemClicked:a.default.noop,onImageLoadError:a.default.noop,itemHeight:250,imagePlaceHolder:null,isLazyLoadEnabled:!0,index:null}},631:function(e,t){e.exports=a},632:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageItemModelShape=void 0;var n,a=(n=i(10))&&n.__esModule?n:{default:n};var r=a.default.shape({id:a.default.number.isRequired,src:a.default.string.isRequired,altText:a.default.string.isRequired,textFields:a.default.arrayOf(a.default.string).isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired});t.ImageItemModelShape=r},633:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyButtonStyle=void 0;t.emptyButtonStyle={padding:"2px",margin:"0px",background:"none",color:"unset",cursor:"pointer",borderImage:"unset",borderColor:"unset",borderStyle:"none"}},634:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceState=void 0;t.DataSourceState={Loading:"Loading",Done:"Done",Error:"Error"}},635:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadMoreButton=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i(3)),a=s(i(10)),r=s(i(9)),o=i(633);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=r.default.defaults({width:"100%"},o.emptyButtonStyle),m=function(e){function t(e){var i,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=d(t).call(this,e),i=!a||"object"!==l(a)&&"function"!==typeof a?u(n):a,g(u(i),"startObserver",function(){i.target&&i.observer&&i.observer.observe(i.target)}),g(u(i),"stopObserver",function(){i.target&&i.observer&&(i.observer.unobserve(i.target),i.observer.disconnect(),i.observer=null)}),g(u(i),"handleIntersection",function(e){if(i.props.isAutoLoadMore){var t=e[0]||{},n=t.isIntersecting,a=t.intersectionRatio,r="undefined"!==typeof n?n:a>0;if(!i.intersected&&r)return i.intersected=!0,void i.setState({inViewPort:!0});i.intersected&&!r&&(i.intersected=!1,i.setState({inViewPort:!1}))}}),g(u(i),"initIntersectionObserver",function(){i.observer||(i.observer=new IntersectionObserver(i.handleIntersection,{}))}),i.state={inViewPort:!1},i.target=null,i.observer=null,i.intersected=!1,i}var i,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n.PureComponent),i=t,(a=[{key:"componentDidMount",value:function(){this.initIntersectionObserver(),this.startObserver()}},{key:"componentDidUpdate",value:function(){this.state.inViewPort&&this.props.onLoadMore()}},{key:"render",value:function(){var e=this;return n.default.createElement("button",{className:"load-more-button",onClick:this.props.onLoadMore,style:h,ref:function(t){return e.target=t,t}},!this.props.isAutoLoadMore&&n.default.createElement("svg",{width:"100px",height:"100px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-ellipsis",style:{background:"none"}},n.default.createElement("circle",{cx:"84",cy:"50",r:"0",fill:"#008272"},n.default.createElement("animate",{attributeName:"r",values:"10;0;0;0;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),n.default.createElement("animate",{attributeName:"cx",values:"84;84;84;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"})),n.default.createElement("circle",{cx:"47.5763",cy:"50",r:"10",fill:"#008272"},n.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-1s"}),n.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-1s"})),n.default.createElement("circle",{cx:"16",cy:"50",r:"9.28715",fill:"#008272"},n.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-0.5s"}),n.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"-0.5s"})),n.default.createElement("circle",{cx:"84",cy:"50",r:"0.712853",fill:"#008272"},n.default.createElement("animate",{attributeName:"r",values:"0;10;10;10;0",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),n.default.createElement("animate",{attributeName:"cx",values:"16;16;50;84;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"})),n.default.createElement("circle",{cx:"81.5763",cy:"50",r:"10",fill:"#008272"},n.default.createElement("animate",{attributeName:"r",values:"0;0;10;10;10",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}),n.default.createElement("animate",{attributeName:"cx",values:"16;16;16;50;84",keyTimes:"0;0.25;0.5;0.75;1",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",calcMode:"spline",dur:"2s",repeatCount:"indefinite",begin:"0s"}))))}}])&&c(i.prototype,a),r&&c(i,r),t}();t.LoadMoreButton=m,m.propTypes={onLoadMore:a.default.func.isRequired,isAutoLoadMore:a.default.bool},m.defaultProps={isAutoLoadMore:!1}},9:function(e,i){e.exports=t}})}.apply(t,n))||(e.exports=a)},sZCf:function(e,t,i){e.exports={set:"Set",remove:"Remove"}},sbat:function(e,t,i){e.exports={trackingTemplate:"TrackingUrlTemplate",finalUrlSuffix:"FinalUrlSuffix",customParameters:"UrlCustomParameters",customParametersName:"UrlCustomParameters/Key",customParametersValue:"UrlCustomParameters/Value"}},sqeS:function(e,t,i){"use strict";var n=i("bgLp"),a=i("5iHu"),r=i.n(a),o=!1,s=function(){o||(r()(window).click(function(e){var t=r()(".light-dismissible");if(0!==t.length){var i=r()(e.target);t.each(function(n){if(0===i.closest(t[n]).length){if(e.originalEvent&&e.originalEvent.noDismiss&&r()(t[n]).hasClass(e.originalEvent.noDismiss))return;r()(t[n]).hasClass("hide")||r()(t[n]).addClass("hide"),r()(t[n]).hasClass("show")&&r()(t[n]).removeClass("show")}})}}),o=!0)},l=i("2Dgx"),c=i.n(l),d=i("nN5v"),u=i("ePzV"),p=i("23d6"),g=i("Pb1Y"),h=i("Vwpy"),m=i("muKe"),f=i("jkRo"),v=i.n(f),b=i("98nU"),y=i("jep4"),S=i("UT4o"),w=i.n(S),C=i("7pBl"),x=i.n(C),k=i("2ndk"),A=i("iros"),T=i.n(A),_=i("a28/"),E=i("rmOu"),I=i("F1I4"),O=i.n(I),P=i("bRue"),M=i.n(P),j=i("NyBB"),L=i.n(j),D=function(e){var t=e.i18n,i=e.pageContext,n=e.multiplierSchema;return{BidMultiplierView:function(e){function a(){return Object(d.a)(this,a),Object(p.a)(this,Object(g.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(u.a)(a,[{key:"initialize",value:function(e){var i=e.strategy||"increase";this.i18n=t,this.type=e.type,this.value=e.value,this.text=e.text,this.factorModel=this.initFactorInput("factor-input",i),this.setState({strategy:i,factor:null===e.factor?w.a.noop():e.factor})}},{key:"getState",value:function(){return{type:this.type,value:this.value,isValid:this.getChild("factor-input").getState().isValid,factor:this.getFactor(this.model.get("strategy"),this.factorModel.toJSON()),percentage:this.factorModel.toJSON()?this.factorModel.toJSON().Factor:""}}},{key:"setState",value:function(e){var i=e.strategy,n=e.factor,a=e.isUseParent;if(w.a.isUndefined(a)||(this.model.set({isUseParent:a}),this.getChild("factor-input").setState({readonly:a})),i&&i!==this.model.get("strategy")&&(this.model.set({strategy:i}),this.factorModel=this.initFactorInput("factor-input",i)),!w.a.isUndefined(n)){var r=w.a.isNumber(n)?t.formatDecimal(n,{minimumFractionDigits:0,maximumFractionDigits:1}):n;this.factorModel.set("Factor",r),this.getChild("factor-input").setState({value:r}),this.trigger("input-changed")}return this}},{key:"getFactor",value:function(e,i){var n=i.Factor;if(null===n)return w.a.noop();var a=Number(n)/100;"increase"===e?a+=1:a=1-a;var r=t.formatDecimal(a,{minimumFractionDigits:1,maximumFractionDigits:3});return t.parseDecimal(r).toString()}},{key:"initFactorInput",value:function(e,a){var r=n;"increase"===a?w.a.extend(r.properties.Factor,{minimum:0,maximum:1e3}):w.a.extend(r.properties.Factor,{minimum:0,maximum:100});var o=new(Object(b.BackboneSchema)(r,t,["Factor","@odata.type"],null,{Factor:{validation:function(e){return e.decimalLength.decimalLength=1,e}}}));o.set("Factor","");var s=new y.InputControl({entity:o,field:"Factor",addonText:i.DecimalFormatter.percentSymbol});return this.setChild(e,s),o}},{key:"events",get:function(){var e=this;return{"change .select-strategy":function(t){var i=t.target;e.setState({strategy:i.value})}}}},{key:"template",get:function(){return L.a}}]),a}(m.DeterministicView)}},R=i("9Bp+"),N=i.n(R),V=i("k4ZJ"),B=i.n(V),F=i("jIGY"),U=i.n(F),G=function(e){var t=e.i18n,i=e.state,a=e.pageContext,r=e.multiplierSchema;if(!t||!i||!a||!r)return{};var o=Object(E.a)({i18n:t,state:i}).bidMultiplierUtils.getMultipliersState,s=function(e){var t=e.i18n,i=e.state,n=e.pageContext,a=e.multiplierSchema,r=Object(E.a)({i18n:t,state:i}).bidMultiplierUtils,o=D({i18n:t,pageContext:n,multiplierSchema:a}).BidMultiplierView,s=r.serializeBidMultipliers,l=r.weekDayMap;return{CheckInDayMultipliersView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(){var e=this;w.a.each(w.a.keys(l),function(i){e.setChild("".concat(i.toLowerCase(),"-bid-multiplier"),e.getBidMultiplierView({value:i,text:t.getString(l[i])}))})}},{key:"getBidMultiplierView",value:function(e){return new o({type:"checkInDay",value:e.value,text:e.text})}},{key:"getState",value:function(){var e=this,t=[];return w.a.each(w.a.keys(l),function(i){t.push(e.getChild("".concat(i.toLowerCase(),"-bid-multiplier")).getState())}),w.a.findWhere(t,{isValid:!1})?{isValid:!1,bidMultipliers:w.a.noop()}:{isValid:!0,bidMultipliers:s(t)}}},{key:"setState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.isUseParent;return w.a.isUndefined(i)||w.a.each(w.a.keys(l),function(t){e.getChild("".concat(t.toLowerCase(),"-bid-multiplier")).setState({isUseParent:i})}),w.a.each(w.a.keys(l),function(i){t&&t[i]&&(t[i].strategy||!w.a.isUndefined(t[i].factor))&&e.getChild("".concat(i.toLowerCase(),"-bid-multiplier")).setState({strategy:t[i].strategy,factor:t[i].factor})}),this}},{key:"template",get:function(){return B.a}}]),i}(m.DeterministicView)}}({i18n:t,state:i,pageContext:a,multiplierSchema:r}).CheckInDayMultipliersView,l=function(e){var t=e.i18n,i=e.state,n=e.pageContext,a=e.multiplierSchema,r=Object(E.a)({i18n:t,state:i}).bidMultiplierUtils,o=D({i18n:t,pageContext:n,multiplierSchema:a}).BidMultiplierView,s=r.serializeBidMultipliers,l={Mobile:"HotelCenter_Overview_Multipliers_Bids_Mobile_Label",Tablet:"HotelCenter_Overview_Multipliers_Bids_Tablet_Label",Desktop:"HotelCenter_Overview_Multipliers_Bids_Desktop_Label"};return{DeviceTypeMultipliersView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(e){var i=this;this.listOfTypes=e.listOfTypes||l,this.type=e.type||"deviceType",w.a.each(this.listOfTypes,function(e,n){i.setChild("".concat(n.toLowerCase(),"-bid-multiplier"),i.getBidMultiplierView({value:n,text:t.getString(e)}))})}},{key:"getBidMultiplierView",value:function(e){return new o({type:this.type,value:e.value,text:e.text})}},{key:"getState",value:function(){var e=this,t=[];return w.a.each(w.a.keys(this.listOfTypes),function(i){t.push(e.getChild("".concat(i.toLowerCase(),"-bid-multiplier")).getState())}),w.a.findWhere(t,{isValid:!1})?{isValid:!1,bidMultipliers:w.a.noop()}:{isValid:!0,bidMultipliers:s(t)}}},{key:"setState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.isUseParent;return w.a.isUndefined(i)||w.a.each(w.a.keys(this.listOfTypes),function(t){e.getChild("".concat(t.toLowerCase(),"-bid-multiplier")).setState({isUseParent:i})}),w.a.each(w.a.keys(this.listOfTypes),function(i){t&&t[i]&&(t[i].strategy||!w.a.isUndefined(t[i].factor))&&e.getChild("".concat(i.toLowerCase(),"-bid-multiplier")).setState({strategy:t[i].strategy,factor:t[i].factor})}),this}},{key:"template",get:function(){return N.a}}]),i}(m.DeterministicView)}}({i18n:t,state:i,pageContext:a,multiplierSchema:r}).DeviceTypeMultipliersView,c=function(e){var t=e.i18n,i=e.state,n=e.pageContext,a=e.multiplierSchema,r=Object(E.a)({i18n:t,state:i}).bidMultiplierUtils,o=D({i18n:t,pageContext:n,multiplierSchema:a}).BidMultiplierView,s=r.serializeBidMultipliers,l=r.formatStaySegments;return{LengthOfStayMultipliersView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(e){this.i18n=t,this.minNumberOfNights=w.a.isUndefined(e.minNumberOfNights)?1:e.minNumberOfNights,this.maxNumberOfNights=e.maxNumberOfNights||14,this.staySegments=[],this.nightsModel=this.initNightsInput("stay-nights-input"),this.setState({staySegments:this.staySegments}),this.type=e.type||"lengthOfStay"}},{key:"initNightsInput",value:function(e){var i={name:"NightsInput",type:"object",properties:{MinimumNumberOfNights:{type:"integer",minimum:this.minNumberOfNights,maximum:this.maxNumberOfNights}}},n={MinimumNumberOfNights:{validation:function(e){var i=e;return w.a.has(i,"decimalLength")&&(i.decimalLength.message=t.getString("HotelCenter_Shared_Validation_Require_Integer")),i}}},a=Object(b.BackboneSchema)(i,t,["MinimumNumberOfNights","@odata.type"],null,n),r="lengthOfStay"===this.type?t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_InputNights_AddOn_Label"):t.getString("HotelCenter_Overview_AdvancedBooking_Multipliers_InputDays_AddOn_Label"),o=new a,s=new y.InputControl({entity:o,field:"MinimumNumberOfNights",addonText:r});return this.setChild(e,s),o}},{key:"addNewSegment",value:function(){if(this.getChild("stay-nights-input").getState().isValid){var e=this.nightsModel.toJSON().MinimumNumberOfNights;w.a.isUndefined(e)||(this.updateUserInputs(),this.addSegmentByMinNumberOfNights(e),this.setState({staySegments:this.staySegments}))}}},{key:"removeSegment",value:function(e){this.updateUserInputs(),this.removeSegmentByMinNumberOfNights(e.title),this.setState({staySegments:this.staySegments})}},{key:"addSegmentByMinNumberOfNights",value:function(e){var t=e.toString(),i=w.a.findIndex(this.staySegments,function(e){return e.key===t}),n={key:t,factor:w.a.noop(),strategy:"increase"};i>-1?this.staySegments.splice(i,1,n):this.staySegments.push(n),this.staySegments=w.a.sortBy(this.staySegments,function(e){return Number(e.key)});var a="lengthOfStay"===this.type;this.staySegments=l(this.staySegments,a)}},{key:"removeSegmentByMinNumberOfNights",value:function(e){var t=e.toString(),i=w.a.findWhere(this.staySegments,{key:t});this.staySegments=w.a.difference(this.staySegments,[i]);var n="lengthOfStay"===this.type;this.staySegments=l(this.staySegments,n)}},{key:"setState",value:function(e){var t=this,i=e.staySegments,n=e.isUseParent;return i&&(w.a.each(i,function(e){var i=new o({text:e.value,value:e.key,strategy:e.strategy,factor:e.factor,type:t.type});t.setChild("".concat(e.key,"-bid-multiplier"),i)}),this.staySegments=i,this.model.set({staySegments:i}),this.model.trigger("change")),w.a.isUndefined(n)||(this.model.set("isUseParent",n),this.getChild("stay-nights-input").setState({readonly:n}),w.a.each(this.staySegments,function(e){t.getChild("".concat(e.key,"-bid-multiplier")).setState({isUseParent:n})})),this}},{key:"updateUserInputs",value:function(){var e=this;w.a.each(this.staySegments,function(t){t.factor=e.getChild("".concat(t.key,"-bid-multiplier")).getState().percentage})}},{key:"getState",value:function(){var e=this,i=[];if(w.a.each(this.staySegments,function(t){i.push(e.getChild("".concat(t.key,"-bid-multiplier")).getState())}),w.a.findWhere(i,{isValid:!1}))return{isValid:!1,bidMultipliers:w.a.noop()};for(var n=s(i),a=w.a.pluck(n,"Factor"),r=0,o=!1;r<a.length-1;){if(a[r]===a[r+1]){o=!0;break}r+=1}return o?{isValid:!1,bidMultipliers:w.a.noop(),errors:[t.getString("HotelCenter_Overview_LengthOfStay_Multipliers_Duplicate")]}:{isValid:!0,bidMultipliers:n}}},{key:"events",get:function(){var e=this;return{"click .add-new-query":function(){e.model.get("isUseParent")||e.addNewSegment()},"click .mulitplier-query-remove .filter-query-remove__glyphicon":function(t){var i=t.target;e.model.get("isUseParent")||e.removeSegment(i)}}}},{key:"template",get:function(){return U.a}}]),i}(m.DeterministicView)}}({i18n:t,state:i,pageContext:a,multiplierSchema:r}).LengthOfStayMultipliersView,f=D({i18n:t,pageContext:a,multiplierSchema:r}).BidMultiplierView,v=function(e){var t=e.i18n,i=e.state,n=e.pageContext,a=e.multiplierSchema,r=Object(E.a)({i18n:t,state:i}).bidMultiplierUtils,o=D({i18n:t,pageContext:n,multiplierSchema:a}).BidMultiplierView,s=r.serializeBidMultipliers;return{UserCountryMultipliersView:function(e){function n(){return Object(d.a)(this,n),Object(p.a)(this,Object(g.a)(n).apply(this,arguments))}return Object(h.a)(n,e),Object(u.a)(n,[{key:"initialize",value:function(){var e=i.get("userCountries");this.i18n=t,this.selectedCountries=[],this.chooseCountry=e.length>0?e[0].Key:"",this.restCountries=this.getRestCountries(e,this.selectedCountries),this.setState({selectedCountries:this.selectedCountries,chooseCountry:this.chooseCountry,restCountries:this.restCountries})}},{key:"getSelectedCountriesMulti",value:function(e){var t=this,n=i.get("userCountries");return this.selectedCountries=[],e&&w.a.each(w.a.keys(e),function(i){var a=w.a.findWhere(n,{Key:i});a&&t.selectedCountries.push(w.a.extend(a,{strategy:e[i].strategy,factor:e[i].factor}))}),this.restCountries=this.getRestCountries(n,this.selectedCountries),this.chooseCountry=this.restCountries.length>0?this.restCountries[0].Key:"",{selectedCountries:this.selectedCountries,restCountries:this.restCountries,chooseCountry:this.chooseCountry}}},{key:"getRestCountries",value:function(e,t){var i=w.a.map(t,function(e){return e?e.Key:""});return i=w.a.difference(i,[""]),w.a.filter(e,function(e){return-1===w.a.indexOf(i,e.Key)})}},{key:"setState",value:function(e){var t=this,i=e.selectedCountries,n=e.chooseCountry,a=e.restCountries,r=e.isUseParent;return n&&(this.chooseCountry=n,this.model.set({chooseCountry:n})),i&&(w.a.each(i,function(e){var i=new o({text:e.Value,value:e.Key,strategy:e.strategy,factor:e.factor,type:"userCountry"});t.setChild("".concat(e.Key,"-bid-multiplier"),i)}),this.selectedCountries=i,this.model.set({selectedCountries:i}),this.model.trigger("change")),a&&(this.restCountries=a,this.model.set({restCountries:a})),w.a.isUndefined(r)||(this.model.set({isUseParent:r}),w.a.each(this.selectedCountries,function(e){t.getChild("".concat(e.Key,"-bid-multiplier")).setState({isUseParent:r})})),this}},{key:"updateUserInputs",value:function(){var e=this;w.a.each(this.selectedCountries,function(t){t.factor=e.getChild("".concat(t.Key,"-bid-multiplier")).getState().percentage})}},{key:"getState",value:function(){var e=this,t=[];return w.a.each(this.selectedCountries,function(i){t.push(e.getChild("".concat(i.Key,"-bid-multiplier")).getState())}),w.a.findWhere(t,{isValid:!1})?{isValid:!1,bidMultipliers:w.a.noop()}:{isValid:!0,bidMultipliers:s(t)}}},{key:"events",get:function(){var e=this;return{"click .add-new-query":function(){if(!e.model.get("isUseParent")&&e.chooseCountry){var t=w.a.findWhere(e.restCountries,{Key:e.chooseCountry});e.updateUserInputs(),e.selectedCountries.push(t),e.restCountries=e.getRestCountries(e.restCountries,[t]),e.restCountries.length>0?e.chooseCountry=e.restCountries[0].Key:e.chooseCountry="",e.setState({selectedCountries:e.selectedCountries,restCountries:e.restCountries,chooseCountry:e.chooseCountry})}},"change .form-control.country-list":function(t){var i=t.target;e.chooseCountry=i.value,e.setState({chooseCountry:e.chooseCountry})},"click .mulitplier-query-remove .filter-query-remove__glyphicon":function(t){var i=t.target;if(!e.model.get("isUseParent")){var n=w.a.findWhere(e.selectedCountries,{Key:i.title});e.restCountries.push(n),e.restCountries=w.a.sortBy(e.restCountries,"Key"),e.updateUserInputs(),e.selectedCountries=e.getRestCountries(e.selectedCountries,[n]),e.setState({selectedCountries:e.selectedCountries,restCountries:e.restCountries})}}}}},{key:"template",get:function(){return M.a}}]),n}(m.DeterministicView)}}({i18n:t,state:i,pageContext:a,multiplierSchema:r}).UserCountryMultipliersView,S=["Mobile","Tablet","Desktop"],C=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return{BidMultipliersView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(e){var i=e.showUseParent,r=void 0===i||i,o=e.isPayPerStay,d=void 0!==o&&o,u=e.isPayPerStayPhase2Pilot,p=void 0!==u&&u;this.i18n=t,this.showUseParent=r,this.deviceTypeMultipliersView=new l,this.dateTypeMultipliersView=new l({listOfTypes:{Selected:"HotelCenter_Overview_DateType_Multipliers_Selected_Label",Default:"HotelCenter_Overview_DateType_Multipliers_Default_Label"},type:"dateType"}),this.isHotelPropertyPromotionAdEnabled=a.Permissions.IsHotelPropertyPromotionAdEnabled,this.siteTypeMultipliersView=new l({listOfTypes:Object(n.a)({LocalUniversal:"HotelCenter_Overview_SiteType_Multipliers_Local_Universal_Label",MapResults:"HotelCenter_Overview_SiteType_Multipliers_Map_Results_Label"},this.isHotelPropertyPromotionAdEnabled?{PropertyPromotionAd:"HotelCenter_Overview_SiteType_Multipliers_Property_PromotionAd_Label"}:{}),type:"siteType"}),this.userCountryMultipliersView=new v,this.lengthOfStayMultipliersView=new c,this.advancedBookingMultipliersView=new c({minNumberOfNights:0,maxNumberOfNights:180,type:"advancedBooking"}),this.checkInDayMultipliersView=new s,this.setChild("device-type-multipliers",this.deviceTypeMultipliersView),this.setChild("date-type-multipliers",this.dateTypeMultipliersView),this.setChild("site-type-multipliers",this.siteTypeMultipliersView),this.setChild("user-country-multipliers",this.userCountryMultipliersView),this.setChild("length-of-stay-multipliers",this.lengthOfStayMultipliersView),this.setChild("check-in-day-multipliers",this.checkInDayMultipliersView),this.setChild("advanced-booking-multipliers",this.advancedBookingMultipliersView),this.setState({selectedMultiplierType:"deviceType",isPayPerStay:d,isPayPerStayPhase2Pilot:p}),this.setState({errors:[]})}},{key:"setState",value:function(e){var t=e.selectedMultiplierType,i=e.bidMultipliers,n=e.isUseParent,a=e.errors,r=e.isPayPerStay,o=e.isPayPerStayPhase2Pilot;if(w.a.isUndefined(r)||this.model.set({isPayPerStay:r}),w.a.isUndefined(o)||this.model.set({isPayPerStayPhase2Pilot:o}),w.a.isUndefined(n)||(this.model.set({isUseParent:n}),this.getChild("device-type-multipliers").setState({isUseParent:n}),this.getChild("date-type-multipliers").setState({isUseParent:n}),this.getChild("site-type-multipliers").setState({isUseParent:n}),this.getChild("user-country-multipliers").setState({isUseParent:n}),this.getChild("check-in-day-multipliers").setState({isUseParent:n}),this.getChild("length-of-stay-multipliers").setState({isUseParent:n}),this.getChild("advanced-booking-multipliers").setState({isUseParent:n})),t&&!this.model.get("isUseParent")&&this.model.set({selectedMultiplierType:t}),!w.a.isEmpty(i)){this.getChild("device-type-multipliers").setState(i.deviceType),this.getChild("date-type-multipliers").setState(i.dateType),this.getChild("site-type-multipliers").setState(i.siteType);var s=this.userCountryMultipliersView.getSelectedCountriesMulti(i.userCountry||{});this.getChild("user-country-multipliers").setState(s),this.getChild("check-in-day-multipliers").setState(i.checkInDay),this.getChild("length-of-stay-multipliers").setState({staySegments:i.lengthOfStay||[]}),this.getChild("advanced-booking-multipliers").setState({staySegments:i.advancedBooking||[]}),this.model.set({selectedMultiplierType:this.model.attributes.selectedMultiplierType})}return a&&this.model.set({errors:a}),this}},{key:"getBidMultipliers",value:function(e){var t=[];return w.a.each(e,function(e){t=t.concat(e.bidMultipliers)}),t}},{key:"getState",value:function(){var e=[];if(this.model.get("isUseParent"))return{isValid:!0,bidMultipliers:[]};e.push(this.getChild("device-type-multipliers").getState()),e.push(this.getChild("date-type-multipliers").getState()),e.push(this.getChild("site-type-multipliers").getState()),e.push(this.getChild("user-country-multipliers").getState()),e.push(this.getChild("check-in-day-multipliers").getState()),e.push(this.getChild("length-of-stay-multipliers").getState()),e.push(this.getChild("advanced-booking-multipliers").getState());var t=w.a.chain(e).pluck("errors").flatten().compact().value();return this.setState({errors:t}),w.a.findWhere(e,{isValid:!1})?{isValid:!1,bidMultipliers:w.a.noop()}:{isValid:!0,bidMultipliers:this.getBidMultipliers(e)}}},{key:"clean",value:function(){var e,t=this.getState();t.isValid&&(e=o(t.bidMultipliers,!0)),(!e||w.a.isEmpty(e.checkInDay)&&w.a.isEmpty(e.deviceType)&&w.a.isEmpty(e.lengthOfStay)&&w.a.isEmpty(e.userCountry)&&w.a.isEmpty(e.dateType)&&w.a.isEmpty(e.siteType)&&w.a.isEmpty(e.advancedBooking))&&w.a.extend(e,{deviceType:{Mobile:{factor:0}}}),this.setState({bidMultipliers:e})}},{key:"emptyDeviceTypeAndCheckInDay",value:function(){var e={deviceType:w.a.reduce(S,function(e,t){return w.a.extend(e,Object(_.a)({},t,{factor:""}))},{}),checkInDay:w.a.reduce(C,function(e,t){return w.a.extend(e,Object(_.a)({},t,{factor:""}))},{})};this.setState({bidMultipliers:e})}},{key:"template",get:function(){return O.a}},{key:"events",get:function(){var e=this;return{"click .bid-multipliers-panel li":function(t){var i=t.target;e.setState({selectedMultiplierType:i.dataset.type})},"click .bid-multipliers-use-parent input[type=checkbox]":function(t){var i=t.target.checked;e.setState({isUseParent:i}),e.trigger("update:isUseParent",i)}}}}]),i}(m.DeterministicView),BidMultiplierView:f,UserCountryMultipliersView:v,DeviceTypeMultipliersView:l,CheckInDayMultipliersView:s,LengthOfStayMultipliersView:c}},z=i("syDw"),H=i.n(z),W=i("zf2X"),q=i("O52o"),$=i("Gu69"),K=function(e){var t=e.i18n,i=e.pageContext,n=e.state,a=e.dateFilterPreferences;if(!t||!i||!n||!a)return{};var o=Object(E.a)({pageContext:i}).dateUtils,s=a.setDateFilter,l=o.account2local,c=o.local2account,d=["custom","today","yesterday","thisWeekSunday","thisWeekMonday","lastSevenDays","lastWeekSunday","lastWeekMonday","lastFourteenDays","thisMonth","lastMonth","last30Days","allTime"],u=function(e){return t.formatDate(l(e),{raw:"MM/dd/yyyy"})},p=function(e){var i=t.formatDate(l(e),{raw:"yyyy-MM-ddTHH:mm:ss.sss",timeZone:"GMT"});return"".concat(i,"Z")},g=function(e,t){return w.a.isObject(e)||(e=new Date(e)),t&&e<t?t:e},h=function(e){return t.parseDate(e)},m=function(e,t,i){return w.a.result({UTC:function(){var e=t.key===$.RANGES.CUSTOM_TIME?t.end:function(e,t){var i=c(new Date),n=Object(q.withoutTime)(i);if(e.valueOf()===n.valueOf()&&t)return i;var a=new Date(e);return a.setHours(23,59,59,999),a}(t.end,i);return{startDateTime:p(t.start),endDateTime:p(e)}},Account:function(){return{startDate:u(t.start)||u(h(t.RangeStartDate)),endDate:u(t.end)||u(h(t.RangeEndDate))}}},e)},f=function(e,t,i){var n=i.odataTimeZone,a=void 0===n?"Account":n,r=i.upToNowWhenToday,o=void 0===r||r;t.start&&!w.a.isObject(t.start)&&t.end&&!w.a.isObject(t.end)&&(t.start=new Date(t.start),t.end=new Date(t.end));var s=m(a,t,o),l=w.a.defaults(s,e.query);return l=t.compared?w.a.defaults({comparisonStartDate:u(new Date(t.compared.start)),comparisonEndDate:u(new Date(t.compared.end))},l):w.a.omit(l,"comparisonStartDate","comparisonEndDate"),w.a.defaults({query:l},e)},v=function(e){var t=e.name,a=e.dateFilter,r=e.dateRange,o=r.primaryRange,l=r.comparedRange;w.a.extend(o,{Rangelcid:i.CurrentUser.Locale});var c=w.a.extend(o,{compared:l});!1===a.sharedInGrids?(s(t,w.a.clone(r)),n.set("$daterange".concat(t),c)):(s("TravelShared",w.a.clone(r)),n.set("$daterange",c))};return{dateFilterPlugin:function(e){return e("dateFilter",["gridView","dataSource","config"],function(e,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.plugins,s=a.name,l=w.a.result(o,"dateFilter",{}),u=function(e,i){var a=w.a.defaults({timeZone:null,__proto__:t.__proto__},t);return w.a.defaults(e,{i18n:a,isComparisonEnabled:!0,enabledRangesPredicate:function(e){return-1!==w.a.indexOf(d,e.key)},dateFormat:"yMd",timeFormat:"hm",get maxDate(){return e.maxDate||Object(q.withoutTime)(c(new Date))},get defaultTimeRange(){var t=!1===e.sharedInGrids?"$daterange".concat(i):"$daterange",a=n.get(t);return w.a.result(a,"key")===$.RANGES.CUSTOM_TIME?{start:g(a.start,e.minDate),end:g(a.end,e.minDate)}:w.a.noop()}})}(l,s),p=new W.DateFilter(u),h=!1===l.sharedInGrids?"$daterange".concat(s):"$daterange",m=i.query;return n.getPromise(h).then(function(e){var t=e;l.enabledRangesPredicate(t)||(t=function(e){return{grain:3,start:e,end:e,key:"today"}}(Object(q.withoutTime)(c(new Date))),v({name:s,dateFilter:l,dateRange:{primaryRange:w.a.omit(t,"compared"),comparedRange:t.compared}})),function(e,t,i){var n=Object(q.withoutTime)(c(new Date)),a=r()(t.container),o=w.a.extend({primaryRange:{grain:e.grain,key:e.key,start:g(e.start,t.minDate),end:g(e.end,t.minDate)}},e.compared?{comparedRange:{key:e.compared.key}}:{});i.setState({today:n,selection:o}),i.render(),a.append(i.$el)}(t,l,p)}),i.query=function(t){return n.getPromise(h).then(function(n){var a=f(t,n,l);return e.set({queryParams:a}),m.call(i,a)})},p.on("date-range-selected",function(t){v({name:s,dateFilter:l,dateRange:t}),e.refresh(!0)}),{events:w.a.extend({},H.a.Events)}})},addDateRangeToQueryParams:f}},J=i("/xyZ"),Z=i.n(J),Y=i("Ktte"),Q=i.n(Y),X=i("9oRK"),ee=i.n(X),te=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"events",value:function(){var e=this;return{"click .dropdown-search-selector__option":function(){e.trigger("optionSelected",e.getState())}}}},{key:"getState",value:function(){return{id:this.model.attributes.id}}},{key:"setState",value:function(e){var t=e.id,i=void 0===t?"":t,n=e.value,a=void 0===n?"":n,r=e.isSelected,o=void 0!==r&&r,s=e.isDisabled,l=void 0!==s&&s;return this.model.set({id:i,value:a,isSelected:o,isDisabled:l}),this}},{key:"template",get:function(){return ee.a}}]),t}(m.DeterministicView),ie=m.helpers.updateView,ne=m.helpers.ensureChildView,ae=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(e){var t=e.options,i=void 0===t?[]:t,n=e.selectOption,a=void 0===n?{}:n,r=e.nodataPlaceholder,o=void 0===r?"":r;this.selectOption=a,this.options=i,this.nodataPlaceholder=o}},{key:"getState",value:function(){return{options:this.model.attributes.options}}},{key:"setState",value:function(e){var t=this,i=e.options,n=e.selectOption;return i&&(this.selectOption=n||this.selectOption,w.a.each(i,function(e){var i=t.selectOption.id===e.id?{isSelected:!0}:{isSelected:!1};ne(t,"option-".concat(e.id),te,{},{optionSelected:"onOptionSelected"}).setState(w.a.extend(i,e))}),this.model.set({options:i})),this}},{key:"onOptionSelected",value:function(e){var t=e.id;if(this.selectOption&&this.selectOption.id!==t){var i=this.getState().options;this.selectOption=w.a.findWhere(i,{id:t}),ie(this,{options:i})}this.trigger("optionSelected",this.selectOption)}},{key:"template",get:function(){return Q.a}}]),t}(m.DeterministicView),re=i("bH6H"),oe=i.n(re),se=m.helpers.updateView,le=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(e){var t=e.i18n,i=e.currentPage,n=void 0===i?1:i,a=e.pageSize,r=void 0===a?10:a,o=e.totalCount,s=void 0===o?0:o;this.i18n=t,this.pageSize=r,this.setState({currentPage:n,totalCount:s})}},{key:"events",value:function(){var e=this;return{"click .previous-page-button":function(){e.goToPreviousPage()},"click .next-page-button":function(){e.goToNextPage()}}}},{key:"getState",value:function(){var e=this.model.attributes;return{currentPage:e.currentPage,totalCount:e.totalCount}}},{key:"goToPreviousPage",value:function(){var e=this.getState().currentPage;e<=1||(se(this,{currentPage:e-=1}),this.trigger("pageChanged",e))}},{key:"goToNextPage",value:function(){var e=this.getState(),t=e.currentPage,i=e.totalCount;i&&t*this.pageSize>=i||(se(this,{currentPage:t+=1}),this.trigger("pageChanged",t))}},{key:"template",get:function(){return oe.a}}]),t}(m.DeterministicView),ce=i("zJLZ"),de=i.n(ce),ue=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(e){var t=e.placeholder,i=void 0===t?"account name":t;this.placeholder=i}},{key:"events",value:function(){var e=this;return{"click .dropdown-search-selector__search--submit":function(){return e.search()},"input input#srch-term":function(){return e.onChange()},keypress:function(t){return e.keyPress(t)}}}},{key:"keyPress",value:function(e){13===e.keyCode&&(e.preventDefault(),this.search())}},{key:"onChange",value:function(){this.trigger("searchChanged",this.$("#srch-term")[0].value)}},{key:"search",value:function(){this.trigger("searchInvoked",this.$("#srch-term")[0].value)}},{key:"template",get:function(){return de.a}}]),t}(m.DeterministicView),pe=i("OiEU"),ge=i.n(pe),he=m.helpers.updateView,me=m.helpers.ensureChildView,fe=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(e){var t=this,i=e.selectOption,n=e.placeholder,a=e.dataSource,o=e.pageSize,s=void 0===o?10:o,l=e.i18n,c=e.customOptions,d=void 0===c?[]:c,u=e.forceEnableSearch,p=void 0!==u&&u,g=e.invokeSearchOnChange,h=void 0!==g&&g,m=e.nodataPlaceholder,f=void 0===m?"":m,v=e.isDisabled,b=void 0!==v&&v;this.model.set({selectOption:{id:"",value:""}}),this.model.set({isDisabled:b}),this.dataSource=a,this.pageSize=s,this.placeholder=n,this.i18n=l,this.customOptions=d,this.forceEnableSearch=p,this.invokeSearchOnChange=h,this.nodataPlaceholder=f,r()(window).click(function(e){var i=r()(e.target),n=t.$(".dropdown-search-selector__dropdown");0===i.closest(n).length&&n.hasClass("open")&&t.toggle()}),this.viewLoadAsync(i||{id:"",value:""})}},{key:"viewLoadAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.a.noop();return this.fetchData(this.dataSource,{pageNumber:1,pageSize:this.pageSize}).then(function(i){var n=i.options;if(i.totalCount>e.pageSize){var a=i.totalCount;e.initialPaginationView(e.i18n,a),e.initialSearchView(e.placeholder),n=n.slice(0,e.pageSize)}else e.getChild("pagination-container")&&e.detachChild("pagination-container").remove(),e.forceEnableSearch?e.initialSearchView(e.placeholder):e.getChild("search-container")&&e.detachChild("search-container").remove();e.getChild("search-container")&&(e.$("#srch-term").val(""),e.searchString=""),t&&e.setState({selectOption:t}),e.customOptions&&w.a.each(e.customOptions,function(i){i.id=i.id||i.value,e.initialCustomOptionView(i,t)}),e.setOptionView(n,t),e.render()})}},{key:"fetchData",value:function(e,t){return new Z.a(function(i){return w.a.isFunction(e)?i(e(t)):i({options:[],totalCount:0})})}},{key:"onOptionSelected",value:function(e){he(this,{selectOption:e}),this.trigger("option-selected",e),this.selectedId=e.id,this.toggle()}},{key:"toggle",value:function(){this.$(".dropdown-toggle").parent().toggleClass("open")}},{key:"onSearchChanged",value:function(e){this.invokeSearchOnChange&&this.onSearchInvoked(e)}},{key:"onSearchInvoked",value:function(e){var t=this;this.searchString!==e&&(this.searchString=e,this.fetchData(this.dataSource,{searchString:e,pageNumber:1,pageSize:this.pageSize}).then(function(e){var i=e.totalCount;t.getChild("pagination-container")&&t.getChild("pagination-container").setState({currentPage:1,totalCount:i}),t.getChild("selector-container").setState({options:e.options})}))}},{key:"onPageChanged",value:function(e){var t=this;this.fetchData(this.dataSource,{searchString:this.searchString,pageNumber:e,pageSize:this.pageSize}).then(function(i){var n=i.totalCount;t.getChild("pagination-container")&&t.getChild("pagination-container").setState({currentPage:e,totalCount:n}),t.getChild("selector-container").setState({options:i.options})})}},{key:"initialSearchView",value:function(e){me(this,"search-container",ue,{placeholder:e},{searchInvoked:"onSearchInvoked",searchChanged:"onSearchChanged"})}},{key:"initialPaginationView",value:function(e,t){me(this,"pagination-container",le,{i18n:e,pageSize:this.pageSize,totalCount:t},{pageChanged:"onPageChanged"}).setState({totalCount:t,currentPage:1})}},{key:"setOptionView",value:function(e,t){me(this,"selector-container",ae,{options:e,selectOption:t,nodataPlaceholder:this.nodataPlaceholder},{optionSelected:"onOptionSelected"}).setState({options:e,selectOption:t})}},{key:"initialCustomOptionView",value:function(e,t){var i=this;e.onOptionSelected||(e.onOptionSelected=function(e){var t=e.id,n=w.a.findWhere(i.customOptions,{id:t});i.onOptionSelected(n)}),me(this,"".concat(e.id,"-container"),te,{},{optionSelected:function(t){var i=t.id;return e.onOptionSelected({id:i})}}).setState({id:e.id,value:e.value,isSelected:t.id===e.id})}},{key:"events",get:function(){var e=this;return{"click .dropdown-toggle":function(){e.toggle()}}}},{key:"template",get:function(){return ge.a}}]),t}(m.DeterministicView),ve=i("25f/"),be=i.n(ve),ye=i("pR31"),Se=i("XGx8"),we=i.n(Se),Ce=i("tY0f"),xe=i("Dtxg"),ke=i("nznY"),Ae=i("eiR/"),Te={scenario:[{name:"subAccountSetup",value:"HotelCenterSubAccountSetup",setting:{},activity:[{name:"initializeWizard",value:"InitializeWizard"},{name:"saveSubAccount",value:"SaveSubAccount"},{name:"closeWizard",value:"CloseWizard"}]},{name:"subAccountBar",value:"HotelCenterSubAccountBar",setting:{},activity:[{name:"loadSubAccountInfo",value:"LoadSubAccountInfo"},{name:"saveSubAccountBid",value:"SaveSubAccountBid"},{name:"saveBidMultiplier",value:"SaveBidMultiplier"}]},{name:"overViewPage",value:"HotelCenterOverViewPage",setting:{},activity:[{name:"loadHotelGroupGrid",value:"LoadHotelGroupGrid"},{name:"loadHotelIdGrid",value:"LoadHotelIdGrid"},{name:"loadDeviceTypeGrid",value:"LoadDeviceTypeGrid"},{name:"loadDateGrid",value:"LoadDateGrid"},{name:"loadLengthOfStayGrid",value:"LoadLengthOfStayGrid"},{name:"loadUserCountryGrid",value:"LoadUserCountryGrid"},{name:"loadHotelCountryGrid",value:"LoadHotelCountryGrid"},{name:"loadSlotTypeGrid",value:"LoadSlotTypeGrid"},{name:"loadAdvancedBookingGrid",value:"LoadAdvancedBookingGrid"},{name:"loadCheckinDayGrid",value:"LoadCheckinDayGrid"},{name:"loadDateTypeGrid",value:"LoadDateTypeGrid"},{name:"loadSiteTypeGrid",value:"LoadSiteTypeGrid"},{name:"loadSubAccountGrid",value:"LoadSubAccountGrid"},{name:"bulkEditHotelBid",value:"BulkEditHotelBid"},{name:"bulkEditHotelMultiplier",value:"BulkEditHotelMultiplier"},{name:"bulkEditIncreaseDecreaseBid",value:"BulkEditIncreaseDecreaseBid"},{name:"inlineEditHotelBid",value:"InlineEditHotelBid"},{name:"inlineEditHotelMultiplier",value:"InlineEditHotelMultiplier"}]},{name:"budgetPage",value:"HotelCenterBudgetPage",setting:{},activity:[{name:"initializePage",value:"InitializePage"},{name:"saveBidCap",value:"SaveBidCap"},{name:"saveBudget",value:"SaveBudget"}]},{name:"utilityPage",value:"HotelCenterUtilityPage",setting:{},activity:[{name:"loadFeedStatusGrid",value:"LoadFeedStatusGrid"},{name:"downloadFeedStatusReport",value:"DownloadFeedStatusReport"}]}]},_e=i("oHFi"),Ee=i("7B21"),Ie=i("0U9T"),Oe=i("e8eu"),Pe=["BUDGETAMOUNTISABOVELIMIT","BUDGETAMOUNTISBELOWLIMIT","DEFAULTHOTELGROUPUPDATENOTALLOWED","MAXSUBACCOUNTLIMITATIONREACHED","ENTITYDOESNOTEXIST"],Me=i("tiLL"),je=function(e){var t=e.pageContext,i=e.config;if(!t||!i)return{};var n=function(e){var t=e.pageContext,i=e.config;return{getErrorMappers:function(){return{odataErrorMapper:new Oe.OdataErrorMapper(Pe)}},getProcessors:function(){return{contextProcessor:new Oe.ContextProcessor({pageContext:t}),debugProcessor:new Oe.DebugProcessor({isDebugMode:i&&i.get("isDebugMode")||window.BINGADS_DEBUG})}},getListeners:function(){var e=Object(Oe.getAriaConfig)(),t=w.a.find(w.a.keys(e.tokens),function(e){return document.domain.indexOf(e)>-1}),i=new Oe.BasicFormatter({applicationSystem:"campaign",applicationSubSystem:"hotelcenterui"}),n=new Oe.ApiFormatter,a=new Oe.ConsoleFormatter,r=new Oe.LogLevelFilter,o=new Oe.ApiFilter,s=new Oe.ConsoleFilter,l=new _e.AriaListener({tenantToken:e.tokens[t],flushInterval:e.flushInterval,batchSize:e.batchSize,logTableNames:Oe.campaignLogTableConfig.logTableNames,defaultLogCategory:Oe.campaignLogTableConfig.defaultLogCategory,formatters:{basicFormatter:i,apiFormatter:n},filters:{logLevelFilter:r,apiFilter:o}});l.init(),l.registerForTeardown();var c=new Ee.ConsoleListener({filters:{consoleFilter:s},formatters:{consoleFormatter:a}});c.init();var d={ariaListener:l,consoleListener:c};if(Object(Oe.isTestEnvironment)(t)){window.seleniumLogsSink=new Ie.InMemorySink({maxSize:100});var u=new Ie.InMemoryListener({sink:window.seleniumLogsSink,formatters:{basicFormatter:i,apiFormatter:n},filters:{logLevelFilter:r,apiFilter:o}});u.init(),w.a.extend(d,{inMemoryListener:u})}return d}}}({pageContext:t,config:i}),a=n.getListeners,o=n.getProcessors,s=n.getErrorMappers,l=function(e){var t=e.pageContext,i=e.config,n=function(){var e=Object(Oe.getAriaConfig)(),t=w.a.find(w.a.keys(e.tokens),function(e){return document.domain.indexOf(e)>-1}),i=new Oe.PerformanceLogsFormatter,n=new Oe.PerformanceLogsFilter,a=new _e.AriaListener({tenantToken:e.tokens[t],flushInterval:e.flushInterval,batchSize:e.batchSize,logTableNames:{resourcetiming:{name:"resourcetiming"}},defaultLogCategory:"resourcetiming",formatters:{performanceLogsFormatter:i},filters:{performanceLogsFilter:n}});return a.init(),a.registerForTeardown(),{ariaListener:a}},a=function(){return{contextProcessor:new Oe.ContextProcessor({pageContext:t}),debugProcessor:new Oe.DebugProcessor({isDebugMode:i&&i.get("isDebugMode")||window.BINGADS_DEBUG}),perfTimingProcessor:new Oe.PerfTimingProcessor({landingPageUrl:i.get("LandingPageUrl")||""})}},r=new xe.Instrumentation({listeners:n(),processors:a()});return{perfTimingLogger:new Me.PerformanceTimingLogger({instrumentation:r}),getListeners:n,getProcessors:a}}({pageContext:t,config:i}).perfTimingLogger,c=function(){var e={listeners:a(),processors:o()},t=new xe.Instrumentation(e);return t.addScenario(Te),t}();return function(e){var t={objectsToStub:[r.a]},i=s(),n=new ke.AjaxEventHandler({errorMappers:i,shouldAddHeaders:function(e){return Object(Ae.isInternalUrl)(e.url)}}),a=new ke.AjaxStub({stubOptions:t,eventHandler:n,instrumentation:e}),o=new ke.ErrorStub({instrumentation:e});a.init(),o.init()}(c),l.init(),{instrumentation:c}},Le=i("0Cy7"),De=i("ykIq"),Re=i("OFHj"),Ne=i("jaMp"),Ve=i("Na/w"),Be=i("VrzL"),Fe=i.n(Be),Ue=function(e){var t=e.state,i=e.schemas,n=e.CustomerIdType,a=e.config;if(!t||!i||!n||!a)return{};var r="Microsoft.BingAds.Api.Model.Travel",o=new Le.EDM({schemas:i,namespace:r}),s=function(e){var t=e.config,i=e.state;return function(e){e.jsdata.store.registerAdapter("odata",new Fe.a({ajaxOptions:{path:"HotelCenter/V1",host:t.get("odata.url"),oDataToken:t.get("odata.token"),loginType:t.get("odata.loginType")},state:i}),{default:!0})}}({config:a,state:t});Object(Ne.resIdsPlugin)(o),Object(Re.odataPlugin)(o,""),Object(De.jsdataPlugin)(o),s(o);var l=new(new o.types.ComplexType({name:"$ROOT",properties:{Customers:{typeName:"".concat(r,".TravelCustomer@COLL")}}}).ResourceIdentifier);Object(Ve.defineConstProperty)(o,"root",l);var c=new n;return Object(Ve.defineConstProperty)(o,"customerIdType",c),w.a.each({currentCustomer:{key:"customer_id",parent:"root",collection:"Customers"},currentAccount:{key:"account_id",parent:"currentCustomer",collection:"Accounts"}},function(e,i){Object(Ve.defineComputedProperty)(o,i,function(){var i=t.get(e.key),n=o[e.parent];return o.customerIdType.useAdvertiserCustomerId&&"root"===e.parent&&t.get("advertisercustomer_id")&&(i=t.get("advertisercustomer_id")),n&&i?n[e.collection].$withKey(Number(i)):null})}),{jsdataBhc:o.jsdata.resources}};i.d(t,"a",function(){return Ge});var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageContext,i=e.i18n,a=e.state,o=e.config,l=e.preferencesService,f=e.CustomerIdType,S=e.segmentationPreferences,C=e.jsdata,A=e.edm,_=e.dateFilterPreferences,E=e.fixedBidSchema,I=e.percentageBidSchema,O=e.payPerStayBidSchema,P=e.multiplierSchema,M=e.hotelGroupSchema,j=e.hotelSchema,L=e.subAccountSchema,D=e.schemas;return Object(n.a)({DropdownSearchSelector:fe,lightDismissible:s,toolbarTemplate:c.a},function(e){var t=e.i18n;return t?{AccountInformationView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(){this.i18n=t}},{key:"template",get:function(){return v.a}}]),i}(m.DeterministicView)}:{}}({i18n:i}),function(e){var t=e.i18n,i=e.config,n=e.fixedBidSchema;return t&&i&&n?{BidCapView:function(e){function a(){return Object(d.a)(this,a),Object(p.a)(this,Object(g.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(u.a)(a,[{key:"initialize",value:function(){var e=this;this.selections={empty:"empty",cap:"cap"},this.i18n=t;var a=Object(b.BackboneSchema)(n,t,["Amount","@odata.type"]);this.fixedBidModel=new a;var o=new y.InputControl({entity:this.fixedBidModel,field:"Amount",addonText:i.get("AccountCurrencyCode")});this.setChild("max-bid-input",o),this.listenTo(o,"input-changed",function(){e.trigger("input-changed")}),this.setState({capSelection:this.selections.empty}),this.on("rendered",function(){var t=e.model.get("capSelection");"empty"===t?r()("label.empty").focus():"cap"===t&&r()("label.bid-selection-label").focus()},this)}},{key:"setState",value:function(e){return w.a.has(e,"capSelection")&&this.model.set("capSelection",e.capSelection),w.a.has(e,"maximumBid")&&(this.fixedBidModel.parse(e.maximumBid),this.getChild("max-bid-input").setState({value:this.fixedBidModel.get("Amount")})),this.trigger("input-changed"),this}},{key:"getState",value:function(){var e=this.getChild("max-bid-input").getState(),t=this.model.get("capSelection")===this.selections.empty;return{maximumBid:t?null:this.fixedBidModel.toJSON(),isValid:t||e.isValid}}},{key:"events",get:function(){var e=this;return{"change .bid-cap-radio":function(t){var i=t.target;e.setState({capSelection:i.value})}}}},{key:"template",get:function(){return x.a}}]),a}(m.DeterministicView)}:{}}({i18n:i,config:o,fixedBidSchema:E}),function(e){var t=e.i18n,i=e.pageContext,n=e.config,a=e.fixedBidSchema,o=e.percentageBidSchema,s=e.payPerStayBidSchema;return t&&i&&n&&a&&o&&s?{BidStrategyView:function(e){function l(){return Object(d.a)(this,l),Object(p.a)(this,Object(g.a)(l).apply(this,arguments))}return Object(h.a)(l,e),Object(u.a)(l,[{key:"initialize",value:function(e){var n=this;this.strategy={fixed:"fixed",percentage:"percentage",payperstay:"payperstay",empty:"empty"},this.currentTemplate=e.customTemplate||T.a,this.i18n=t,this.isAmountRequired=!w.a.result(e,"allowEmptyStrategy",!0),this.isPayPerStayEnabled=w.a.result(i.Permissions.dynamic,"PayPerStay",!1),this.isReadonly=w.a.result(e,"isReadonly",!1),this.disabledAttr=this.isReadonly?{disabled:"disabled"}:{},this.isPPSReadOnly=this.isReadonly||!w.a.result(e,"enablePPS",!1),this.disabledPPSAttr=this.isPPSReadOnly?{disabled:"disabled"}:{},this.initFixedBidInput(this.isAmountRequired),this.initPercentageBidInput(this.isAmountRequired),this.initPayPerStayBidInput(this.isAmountRequired),this.setState({bidStrategy:e.strategy||this.strategy.fixed,bidAmount:e.bidAmount}),this.on("rendered",function(){var e=n.model.get("bidStrategy");e===n.strategy.fixed?r()("label.radio.fixed").focus():e===n.strategy.percentage?r()("label.radio.percentage").focus():e===n.strategy.payperstay?r()("label.radio.payperstay").focus():e===n.strategy.empty&&r()("label.radio.empty").focus()},this)}},{key:"setState",value:function(e){var i=e.bidStrategy,n=e.bidAmount,a=e.showError;if(this.isReadonly=w.a.result(e,"isReadonly",this.isReadonly),this.disabledAttr=this.isReadonly?{disabled:"disabled"}:{},w.a.isUndefined(i)||this.model.set({bidStrategy:i}),!w.a.isUndefined(n)){var r=t.formatDecimalToFixed(n);i===this.strategy.fixed?(this.fixedBidModel.set("Amount",r),this.getChild("fixed-bid-input").setState({value:r,readonly:this.isReadonly})):i===this.strategy.percentage?(this.percentageBidModel.set("Amount",r),this.getChild("percentage-bid-input").setState({value:r,readonly:this.isReadonly})):(this.payPerStayBidModel.set("Amount",r),this.getChild("payperstay-bid-input").setState({value:r})),this.trigger("input-changed")}return w.a.isUndefined(a)||this.bidInput&&this.bidInput.setState({showError:a}),this}},{key:"getState",value:function(){switch(this.model.get("bidStrategy")){case this.strategy.fixed:return{isValid:this.getChild("fixed-bid-input").getState().isValid,bid:this.fixedBidModel.toJSON()};case this.strategy.percentage:return{isValid:this.getChild("percentage-bid-input").getState().isValid,bid:this.percentageBidModel.toJSON()};case this.strategy.payperstay:return{isValid:this.getChild("payperstay-bid-input").getState().isValid,bid:this.payPerStayBidModel.toJSON()};default:return{isValid:!this.isAmountRequired,bid:{Amount:null}}}}},{key:"initFixedBidInput",value:function(){var e=this,i=Object(b.BackboneSchema)(a,t,["Amount","@odata.type"]);this.fixedBidModel=new i;var r=new y.InputControl({entity:this.fixedBidModel,field:"Amount",addonText:n.get("AccountCurrencyCode"),readonly:this.isReadonly});this.setChild("fixed-bid-input",r),this.listenTo(r,"input-changed",function(){e.trigger("input-changed")})}},{key:"initPercentageBidInput",value:function(){var e=this,n=Object(b.BackboneSchema)(o,t,["Amount","@odata.type"]);this.percentageBidModel=new n;var a=new y.InputControl({entity:this.percentageBidModel,field:"Amount",addonText:i.DecimalFormatter.percentSymbol,readonly:this.isReadonly});this.setChild("percentage-bid-input",a),this.listenTo(a,"input-changed",function(){e.trigger("input-changed")})}},{key:"initPayPerStayBidInput",value:function(){var e=this,n=Object(b.BackboneSchema)(s,t,["Amount","@odata.type"]);this.payPerStayBidModel=new n;var a=new y.InputControl({entity:this.payPerStayBidModel,field:"Amount",addonText:i.DecimalFormatter.percentSymbol});this.setChild("payperstay-bid-input",a),this.listenTo(a,"input-changed",function(){e.trigger("input-changed")})}},{key:"events",get:function(){var e=this;return{"change .bid-strategy-radio":function(t){var i=t.target;e.setState({bidStrategy:i.value})}}}},{key:"template",get:function(){return this.currentTemplate}},{key:"bidInput",get:function(){var e=this,t=Object(k.a)(Object(g.a)(l.prototype),"getState",this).call(this).bidStrategy;return w.a.result({fixed:function(){return e.getChild("fixed-bid-input")},percentage:function(){return e.getChild("percentage-bid-input")},payperstay:function(){return e.getChild("payperstay-bid-input")}},t)}}]),l}(m.DeterministicView)}:{}}({i18n:i,pageContext:t,config:o,fixedBidSchema:E,percentageBidSchema:I,payPerStayBidSchema:O}),G({i18n:i,state:a,pageContext:t,multiplierSchema:P}),K({i18n:i,pageContext:t,state:a,dateFilterPreferences:_}),function(e){var t=e.i18n;return t?{EditPanelView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(){this.i18n=t,this.model.set({hasCleanButton:!1}),this.model.set({isSaveButtonDisabled:!1})}},{key:"getState",value:function(){return{isSaveButtonDisabled:this.model.get("isSaveButtonDisabled"),hasCleanButton:this.model.get("hasCleanButton")}}},{key:"onCancel",value:function(){this.trigger("canceled")}},{key:"onSave",value:function(){this.trigger("saved")}},{key:"onClean",value:function(){this.trigger("cleaned")}},{key:"template",get:function(){return be.a}},{key:"events",get:function(){return{"click #Cancel":this.onCancel,"click #Save":this.onSave,"click #Clean":this.onClean}}}]),i}(m.DeterministicView)}:{}}({i18n:i}),function(e){var t=e.state,i=e.preferencesService,n=e.segmentationPreferences;if(!t||!i||!n)return{};var a=n.getSegPreference,r=n.getSegType;return{fetchPreferenceConfig:function(e){var n=e.name,o=new Z.a(function(e){i.default.initialize().then(function(){var t=(i.default.findByName("WebApp.CampaignUI.grid")||{Data:{}}).Data.rowsPerPage,a=void 0===t?20:t,r=(i.default.findByName("WebApp.CampaignUI.".concat(n))||{Data:{sortInfo:{}}}).Data.sortInfo,o=r.orderby,s=r.sortableHeader;e({pageSize:a,orderbyInfo:o,sortableHeader:s})})});return Z.a.all([o,a(e.name)]).spread(function(i){var n=i.pageSize,a=i.orderbyInfo,o=i.sortableHeader;(e=w.a.defaults(e,{pageable:{}})).pageable.pageSize=n,e.plugins&&e.plugins.pagination&&(e.plugins.pagination.pageSize=n),e.plugins&&e.plugins.pagination&&e.plugins.pagination.pageSize&&(e.plugins.pagination.pageSize=n);var s=r(e.name);s&&"None"!==s.segmentationType&&Object(ye.e)(s.segmentationType,t.get("$daterange"))&&(e.dataSource.query.SegmentationTypes=s.segmentationType),a&&a.length>0&&(e.dataSource.orderby=a,e.sortableHeader=w.a.pick(o,"name","directionIndex"))})}}}({state:a,preferencesService:l,segmentationPreferences:S}),function(e){var t=e.i18n;return t?{HotelGroupInformationView:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(){this.i18n=t}},{key:"onBack",value:function(){this.trigger("go-back")}},{key:"onRemove",value:function(){this.trigger("remove-group-info")}},{key:"template",get:function(){return we.a}},{key:"events",get:function(){return{"click .glyphicon-arrow-left":this.onBack,"click .hotel-group-information-remove__glyphicon":this.onRemove}}}]),i}(m.DeterministicView)}:{}}({i18n:i}),function(e){var t=e.i18n,i=e.hotelGroupSchema,n=e.state,a=e.jsdata,r=e.edm;if(!t||!i||!n||!a||!r)return{};var o=Object(Ce.a)({edm:r,state:n}).gridOptionUtils;return i.properties.Name.required=!0,{HotelGroupModel:function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.Id&&(this.id=e.Id),this.set("Name",e.Name),this.set("Id",e.Id),this.entitySet=e.entitySet||o.getEntitySetByName("hotelGroup")}},{key:"toJSON",value:function(){var e=Object(k.a)(Object(g.a)(t.prototype),"toJSON",this).call(this);return this.attachNestedModels(e,["BidSetting","Bid","BidMultipliers","Id"]),e}},{key:"sync",value:function(e,t,i){var r=this.toJSON();switch(e){case"read":return a.HotelGroup.find(this.get("Id"),{entitySet:this.entitySet});case"create":return n.unset("subAccount_hotelGroupCount"),a.HotelGroup.create(r,{cacheResponse:!1,entitySet:this.entitySet});case"patch":case"update":return w.a.has(r,"Bid")&&null===r.Bid.Amount&&(r.Bid=null),a.HotelGroup.update(t.id,w.a.isEmpty(i.attrs)?r:w.a.pick(r,i.attrs),{cacheResponse:!1,entitySet:this.entitySet});case"delete":return n.unset("subAccount_hotelGroupCount"),a.HotelGroup.destroy(t.id,{entitySet:this.entitySet});default:throw new Error("sync method ".concat(e," is not supported"))}}},{key:"attachNestedModels",value:function(e,t){var i=this;w.a.each(t,function(t){(i.has(t)||w.a.contains(i.changedAttributes(),"BidSetting"))&&(e[t]=i.get(t))})}},{key:"idAttribute",get:function(){return"Id"}}]),t}(Object(b.BackboneSchema)(i,t,["Name"]))}}({i18n:i,hotelGroupSchema:M,state:a,jsdata:C,edm:A}),function(e){var t=e.i18n,i=e.hotelSchema,n=e.jsdata,a=e.edm,r=e.state;if(!t||!i||!r||!n||!a)return{};var o=Object(b.BackboneSchema)(i,t,["Id"]),s=Object(Ce.a)({edm:a,state:r}).gridOptionUtils;return{HotelModel:function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.set("Id",e.Id),this.entitySet=e.entitySet||s.getEntitySetByName("hotel")}},{key:"toJSON",value:function(){var e=Object(k.a)(Object(g.a)(t.prototype),"toJSON",this).call(this);return this.attachNestedModels(e,["Bid","BidMultipliers","Name"]),e}},{key:"sync",value:function(e,t,i){var a=t.toJSON();switch(e){case"read":return n.Hotel.find(this.get("Id"),{entitySet:this.entitySet});case"create":return n.Hotel.create(a,{cacheResponse:!1,entitySet:this.entitySet});case"patch":case"update":return w.a.has(a,"Bid")&&null===a.Bid.Amount&&(a.Bid=null),n.Hotel.update(t.get("Id"),w.a.isEmpty(i.attrs)?a:w.a.pick(a,i.attrs),{cacheResponse:!1,entitySet:this.entitySet});default:throw new Error("sync method ".concat(e," is not supported"))}}},{key:"attachNestedModels",value:function(e,t){var i=this;w.a.each(t,function(t){(i.has(t)||w.a.contains(i.changedAttributes(),"MaximumBid"))&&(e[t]=i.get(t))})}},{key:"idAttribute",get:function(){return"Id"}}]),t}(o)}}({i18n:i,hotelSchema:j,jsdata:C,edm:A,state:a}),je({pageContext:t,config:o}),Ue({state:a,schemas:D,config:o,CustomerIdType:f}),function(e){var t=e.state,i=e.i18n;if(!t||!i)return{};var n=["AL","AQ","DZ","AS","AD","AO","AG","AR","AU","AT","BS","BD","BB","BE","BM","BT","BO","BW","BR","BZ","SB","VG","BN","BG","MM","BI","BY","KH","CM","CA","CV","KY","CF","LK","TD","CL","CN","TW","CX","CC","CO","YT","CG","CD","CK","CR","HR","CZ","BJ","DK","DM","DO","EC","SV","GQ","ET","ER","EE","FO","FK","FI","FR","GF","PF","DJ","GA","GM","DE","GH","GI","KI","GR","GL","GD","GP","GU","GT","GN","GY","HT","VA","HN","HU","IS","IN","ID","IE","IT","CI","JM","JP","KZ","KE","KR","KG","LA","LS","LV","LR","LY","LI","LT","LU","MG","MW","MY","MV","ML","MT","MQ","MR","MU","MX","MC","MN","MD","MS","MA","MZ","NA","NR","NP","NL","AN","AW","NC","VU","NZ","NI","NE","NG","NF","NO","MP","FM","MH","PW","PK","PA","PG","PY","PE","PH","PN","PL","PT","GW","PR","RE","RU","RW","AI","SM","ST","SN","SC","SL","SG","SK","VN","SI","ZA","ZW","ES","SR","SZ","SE","CH","TJ","TH","TG","TK","TO","TT","TR","TM","TC","UG","MK","EG","GB","TZ","US","BF","UY","UZ","WF","WS","ZM","BA","FJ","HK","MO","VE","AZ","BH","AM","CY","GE","IL","JO","KW","LB","OM","QA","SA","AE","YE","PS","AF","TL","NU","RO","SO","KM","TN","IQ","SH","KN","LC","PM","VC","TV","UA","VI","RS","ME"];return{userCountryService:{getCountriesAndSetState:function(){if(!t.get("userCountries")){var e=w.a.map(n,function(e){return{Key:e,Value:i.getString("UserCountry_".concat(e))||e}}).sort(function(e,t){return e.Value>t.Value?1:-1});t.set("userCountries",e)}}}}}({state:a,i18n:i}),function(e){var t=e.state,i=e.i18n,n=e.subAccountSchema,a=e.jsdata,r=e.edm;if(!i||!n||!t||!a||!r)return{};var o=Object(Ce.a)({state:t,jsdata:a,edm:r}).AccountService;return n.properties.Name.required=!0,{SubAccountModel:function(e){function i(){return Object(d.a)(this,i),Object(p.a)(this,Object(g.a)(i).apply(this,arguments))}return Object(h.a)(i,e),Object(u.a)(i,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.Id&&(this.id=e.Id)}},{key:"toJSON",value:function(){var e=Object(k.a)(Object(g.a)(i.prototype),"toJSON",this).call(this);return this.attachNestedModels(e,["DailyBudget","MaximumBid","Bid","BidMultipliers","HotelAssociationCount"]),e}},{key:"sync",value:function(e,i,n){var r=this,s=i.toJSON();switch(this.accountService=new o,e){case"read":return this.accountService.fetchSubAccountAsync().then(function(e){e&&(r.parse(e),r.set("Id",e.Id),r.set("DailyBudget",e.DailyBudget),r.set("MaximumBid",e.MaximumBid),r.set("Bid",e.Bid),r.set("BidMultipliers",e.BidMultipliers),r.set("HotelAssociationCount",e.HotelAssociationCount))});case"create":return a.SubAccount.create(s,{cacheResponse:!1});case"patch":case"update":w.a.has(s,"Bid")&&null===s.Bid.Amount&&(s.Bid=null);var l=i.get("Id")||i.id,c=t.get("subAccount_model");return c&&c.Id===l&&t.unset("subAccount_model"),a.SubAccount.update(l,w.a.isEmpty(n.attrs)?s:w.a.pick(s,n.attrs),{cacheResponse:!1});case"delete":return a.SubAccount.destroy(i.id,{entitySet:this.entitySet});default:throw new Error("sync method ".concat(e," is not supported"))}}},{key:"attachNestedModels",value:function(e,t){var i=this;w.a.each(t,function(t){(i.has(t)||w.a.contains(i.changedAttributes(),"MaximumBid"))&&(e[t]=i.get(t))})}},{key:"idAttribute",get:function(){return"Id"}}]),i}(Object(b.BackboneSchema)(n,i,["Name"]))}}({state:a,i18n:i,subAccountSchema:L,jsdata:C,edm:A}))}},t3xF:function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("Gt6W"),i("S7uP"),i("wL7j"),i("tqsI"),i("DXRr"),i("jOdW"),i("aezm"),i("YK3D")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c,d,u){"use strict";var p=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url"),g=d.default;function h(){this.isMobilePreferred?this.ko_model.mobileUrlVisible(!1):this.ko_model.mobileUrlVisible(!0)}var m=u.Permissions||{};return i.View.extend({className:"upgraded-url",initialize:function(e){this.options=e||{},this.isMobilePreferred=this.options.isMobilePreferred,this.destinationURLDisabled=this.options.destinationURLDisabled||!1;var i=this.options.entityType?this.options.entityType.toLowerCase():"";this.isFinalURLSuffixEnabled=["campaign","adgroup","keyword"].indexOf(i)>=0||["ad","audience"].indexOf(i)>=0||m.IsFinalURLSuffixPhase3Enabled&&["imageadextension","sitelink2adextension"].indexOf(i)>=0||m.IsFinalURLSuffixPhase4Enabled&&["actionadextension"].indexOf(i)>=0,t.defaults(this.options,{template:a,isFinal:!0,urlOptionsEnabled:!1,smallContainer:!0,showTitles:!0,campaignFlow:!1,isMobilePreferred:this.isMobilePreferred,urlOptionsEditMode:!1,placeholderEnabled:!1,placeholders:{},showOnlyFinalUrl:!1,landingPageUrlRequired:!1,highLightModeInError:!1,popupHelpKeyAdLandingPage:"pop_BA_NewCampaignCreate_Ad_LandingPage"}),!this.destinationURLDisabled||!this.options.isFinal&&this.options.url||(this.options.showOnlyFinalUrl=!0),this.ko_model=new r(this.options);var n=this.destinationURLDisabled&&!this.options.isFinal&&!!this.options.url;if(this.options.showOnlyFinalUrl||(this.finalUrl=new s(this.options),this.finalUrl.bind("finalUrlSelected",function(){h.call(this),this.ko_model.urlOptionsVisible(this.options.urlOptionsEnabled),this.options.isFinal||this.ko_model.showUpgradeWarning(!0),this.isValid(),this.trigger("finalUrlSelected"),n&&this.urlEditor.setDisabled(!1)}.bind(this)),this.finalUrl.bind("destinationUrlSelected",function(){this.ko_model.mobileUrlVisible(!1),this.ko_model.urlOptionsVisible(!1),this.ko_model.showUpgradeWarning(!1),this.isValid(),this.trigger("destinationUrlSelected"),n&&this.urlEditor.setDisabled(!0)}.bind(this))),this.urlEditor=new o({url:this.options.url,urlPlaceholder:this.options.placeholderEnabled?t.result(this.options.placeholders,"FinalUrls")||p.get("UpgradedUrl_Placeholder_FinalUrls"):"",errorContainer:"LandingPageUrlErrors",ariaLabelledby:this.options.showOnlyFinalUrl?this.options.ariaPrefix+"FinalUrlLabel":this.options.ariaPrefix+"LandingPageLabel",ariaId:this.options.ariaPrefix+"FinalUrl",required:!0}),this.urlEditor.on("urlChanged",function(e){this.trigger("finalUrlChanged",e)},this),n&&this.urlEditor.setDisabled(!0),this.mobileUrl=new o({url:this.options.finalMobileUrl,urlPlaceholder:this.options.placeholderEnabled?t.result(this.options.placeholders,"MobileFinalUrls")||p.get("UpgradedUrl_Placeholder_MobileFinalUrls"):"",errorContainer:"MobileUrlErrors",ariaLabelledby:this.options.ariaPrefix+"MobileUrlLabel",ariaId:this.options.ariaPrefix+"MobileUrl"}),this.mobileUrl.on("urlChanged",function(e){this.trigger("mobileUrlChanged",e)},this),this.options.urlOptionsEnabled){var l=this.options.useUrlOptionsV2?g:c;this.urlOptions=new l(t.extend({},this.options,{editMode:this.options.urlOptionsEditMode,activityLogger:this.options.activityLogger})).render(),this.urlOptions.on("testUurl",function(e,t){this.trigger("testUurl",e,t)}.bind(this))}},render:function(){this.$el.html(a({i18n:p,showOnlyFinalUrl:this.options.showOnlyFinalUrl,popupHelpKeyAdLandingPage:this.options.popupHelpKeyAdLandingPage,ariaPrefix:this.options.ariaPrefix})),n.applyBindings(this.ko_model,this.el),this.options.showOnlyFinalUrl||(this.finalUrl.setElement(this.$(".final-url")),this.finalUrl.render());var e=this.$(".url");return this.urlEditor.setElement(e),this.urlEditor.render(),this.mobileUrl.setElement(this.$(".mobile-url")),this.mobileUrl.render(),this.options.urlOptionsEnabled&&this.$el.find(".advanced-options").html(this.urlOptions.$el),this.$(".url input.url-field").attr("name","FinalUrls"),this.$(".mobile-url input.url-field").attr("name","MobileFinalUrls"),this.on("finalUrlChanged",this.isValid),this.on("mobileUrlChanged",this.isValid),this},getValues:function(){return this.options.showOnlyFinalUrl?t.extend({finalUrl:{isFinal:!0,url:this.urlEditor.ko_model.fullUrl()},mobileUrl:this.mobileUrl.ko_model.fullUrl(),trackingTemplate:this.urlOptions?this.urlOptions.getTrackingTemplate():null,customParameters:this.urlOptions?this.urlOptions.getUrlCustomParameters(!0):[]},this.isFinalURLSuffixEnabled?{finalUrlSuffix:this.urlOptions?this.urlOptions.getFinalUrlSuffix():null}:{}):t.extend({finalUrl:{isFinal:this.finalUrl.getValues().isFinal,url:this.urlEditor.ko_model.fullUrl()},mobileUrl:this.finalUrl.ko_model.isFinalUrl()?this.mobileUrl.ko_model.fullUrl():null,trackingTemplate:this.finalUrl.ko_model.isFinalUrl()&&this.urlOptions?this.urlOptions.getTrackingTemplate():null,customParameters:this.finalUrl.ko_model.isFinalUrl()&&this.urlOptions?this.urlOptions.getUrlCustomParameters(!0):[]},this.isFinalURLSuffixEnabled?{finalUrlSuffix:this.finalUrl.ko_model.isFinalUrl()&&this.urlOptions?this.urlOptions.getFinalUrlSuffix():null}:{})},handleApiErrors:function(e){t.isEmpty(e.FinalUrls)||n.observableArray.fn.push.apply(this.ko_model.landingPageUrlErrorMessages,e.FinalUrls),t.isEmpty(e.MobileFinalUrls)||n.observableArray.fn.push.apply(this.ko_model.errorMessages,e.MobileFinalUrls),this.urlOptions&&this.urlOptions.handleApiErrors(e)},clearApiErrors:function(){t.isEmpty(this.ko_model.landingPageUrlErrorMessages())||this.ko_model.landingPageUrlErrorMessages.remove(l.isCampaignApiError),t.isEmpty(this.ko_model.errorMessages())||this.ko_model.errorMessages.remove(l.isCampaignApiError),this.urlOptions&&this.urlOptions.clearApiErrors()},clearAllErrors:function(){this.ko_model.landingPageUrlErrorMessages&&this.ko_model.landingPageUrlErrorMessages.removeAll(),this.ko_model.errorMessages&&this.ko_model.errorMessages.removeAll(),this.urlOptions&&this.urlOptions.clearApiErrors()},toObject:function(){var e=this.getValues(),t=e.finalUrl.url,i={};return e.finalUrl.isFinal?(i.FinalUrls=t?[t]:[],i.MobileFinalUrls=!this.isMobilePreferred&&e.mobileUrl?[e.mobileUrl]:[],i.TrackingUrlTemplate=e.trackingTemplate?e.trackingTemplate:"",i.UrlCustomParameters=e.customParameters,this.isFinalURLSuffixEnabled&&(i.FinalUrlSuffix=e.finalUrlSuffix||"")):i.DestinationUrl=t||"",i},isValid:function(){var e=this.getValues(),i=[],n=[];if(this.options.landingPageUrlRequired&&!e.finalUrl.url){var a=t.isString(this.options.landingPageUrlRequired)?this.options.landingPageUrlRequired:p.getString("Error_FinalUrl_Required");n.push(a)}e.finalUrl.isFinal&&e.mobileUrl&&!e.finalUrl.url&&(i.push(p.getString("Error_Campaign_API_FinalUrlRequiredWhenUsingMobileFinalUrl")),!this.options.landingPageUrlRequired&&n.push(p.getString("Error_FinalUrl_Required"))),this.options.highLightModeInError&&(this.urlEditor.hasErrors(n.length>0),this.mobileUrl.hasErrors(i.length>0)),this.ko_model.errorMessages(i),this.ko_model.landingPageUrlErrorMessages(n);var r=!i.length&&!n.length;return this.urlOptions?r&&this.urlOptions.isValid():r},devicePreferenceChanged:function(t){var i=e(t.target).is(":checked");this.isMobilePreferred=i,this.getValues().finalUrl.isFinal&&h.call(this)}})}.apply(t,n))||(e.exports=a)},"t5+g":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.koErrors(),i=i+'<div class="date-settings__container"></div>\x3c!--ko if: level() === \'adgroup\'--\x3e<div class="alert alert-info form-group" data-bind="visible:showAdGroupOverrideInformation" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=e.getString("Target_Settings_Override_Information_Line1",e.getString("Target_Settings_Override_Ad_Schedule")))?"":t)+'</div><div class="alert-info-inline indent">'+n.escape(null==(t=e.getString("Target_Settings_Override_Information_Line2",e.getString("Target_Settings_Override_Ad_Schedule")))?"":t)+'<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=e.getString("Learn_more_link_text"))?"":t)+'</a></div></div>\x3c!-- /ko--\x3e\x3c!--ko if: isForVNext()--\x3e<label class="control-label">'+n.escape(null==(t=e.getString("TargetingSettings_AdSchedule"))?"":t),a.popupHelp("pop_BA_Targeting_DayTime",e.getString("TargetingSettings_AdSchedule"),e),i=i+'</label>\x3c!-- /ko--\x3e\x3c!--ko if: level() === \'adgroup\'--\x3e<label class="type-normal" id="ad-schedule-use-campaign-settings">'+n.escape(null==(t=e.get("CreationWorkflowsInheritanceFlagLabel"))?"":t)+'</label><div class="toggle-campaign-settings-switch form-control-static" data-bind="checked: useCampaignSettings"></div>\x3c!-- /ko--\x3e<div><div class="scheduling-grid advanced-scheduling-grid" data-bind="css:{&quot;show-cashback-percent&quot;: supportCashbackSettings}"><table class="table new-advance-target-grid-container ad-scheduling-grid"'+n.attr("aria-label",e.get("TargetingSettings_AdSchedule"),!0,!0)+'><thead><tr><th class="ad-scheduling-grid-header-top-left-cell ad-scheduling-grid-header">'+n.escape(null==(t=e.get("Column_Heading_TargetedDays"))?"":t)+'</th><th colspan="3">'+n.escape(null==(t=e.get("Column_Heading_StartTime"))?"":t)+'</th><th colspan="3">'+n.escape(null==(t=e.get("Column_Heading_EndTime"))?"":t)+"</th>",o&&(i=i+'<th colspan="3">'+n.escape(null==(t=e.get("Column_Heading_BidAdjustment"))?"":t),a.popupHelp("Page_TargetByDayTime_BidAdjustment",e.get("Column_Heading_BidAdjustment"),e),i+="</th>"),i=i+'\x3c!-- ko if: supportCashbackSettings--\x3e<th class="cashback-percent-head" colspan="2">'+n.escape(null==(t=e.get("Campaign_Maximum_Cashback_Offer"))?"":t)+'</th>\x3c!-- /ko--\x3e<th class="ad-scheduling-grid-header ad-scheduling-grid-header-top-right-cell">\x3c!-- ko ifnot: useCampaignSettings --\x3e<a class="remove-all-row" href="javascript:void(0);" role="button">'+n.escape(null==(t=e.get("Column_Heading_RemoveAll"))?"":t)+"</a>\x3c!-- /ko --\x3e\n\x3c!-- ko if: useCampaignSettings --\x3e"+n.escape(null==(t=e.get("Column_Heading_RemoveAll"))?"":t)+"\x3c!-- /ko --\x3e</th></tr></thead><tbody>\x3c!-- ko if: useCampaignSettings --\x3e\n\x3c!-- ko foreach: campaignDayTimeRanges --\x3e<tr><td><select class=\"form-control\" data-bind=\"options: $root.dayOptions, optionsText: 'name', value: Day, optionsValue: 'val', enable: false\""+n.attr("aria-label",e.getString("Column_Heading_TargetedDays"),!0,!0)+"></select></td><td><select class=\"form-control\" data-bind=\"options: $root.fromHourOptions, optionsText: 'optionsText', value: StartHour, optionsValue: 'val', enable: false, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_Start_Hour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control\" data-bind=\"options: $root.minuteOptions, optionsText: 'minuteName', value: StartMinute, optionsValue: 'val', enable: false, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_Start_Minute"),!0,!0)+"></select></td><td><select class=\"form-control\" data-bind=\"options: $root.toHourOptions, optionsText: 'optionsText', value: EndHour, optionsValue: 'val', enable: false, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_End_Hour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control\" data-bind=\"options: $root.minuteOptions, optionsText: 'minuteName', value: EndMinute, optionsValue: 'val', enable: false, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_End_Minute"),!0,!0)+"></select></td><td><select class=\"form-control\" data-bind=\"options: $root.bidAdjustmentOptions, optionsText: 'text', value: BidAdjustmentType, optionsValue: 'val', enable: false\""+n.attr("aria-label",e.getString("BidAdjustment_Options"),!0,!0)+"></select></td><td width=\"6%\"><input class=\"form-control\" data-bind=\"value: BidAdjustmentAmount, valueUpdate: 'input', enable: false, css: {'validation-error': scheduleInRowError().type === 'ERROR_BID'}\""+n.attr("aria-label",e.getString("BidAdjustment_BidMultiplier"),!0,!0)+'></td><td><span class="bidBoost-percent">'+n.escape(null==(t=r)?"":t)+'</span></td>\x3c!-- ko if: $root.supportCashbackSettings--\x3e<td class="cashback-percent-options-cell"><select class="cashback-option-select form-control" data-bind="enable: false, options: CashbackPercentOptions, optionsText:\'text\', optionsValue: \'value\', value: CashbackPercentSelectedOption"></select></td><td class="cashback-percent-cell"><span class="inherit-cashback-value" data-bind="visible: CashbackPercentSelectedOption() === \'inherit\'"><input class="inline-input inherit-value-span form-control" data-bind="enable: false, value: InheritCashbackPercentValue"><span>'+n.escape(null==(t=e.getString("Campaign_Discount"))?"":t)+'</span></span><span class="cashback-input-container" data-bind="visible: CashbackPercentSelectedOption() == \'override\'"><input class="form-control" data-bind="value: CashbackPercent, enable: false"'+n.attr("aria-label",e.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=e.get("Campaign_Discount"))?"":t)+"</span></span></td>\x3c!-- /ko--\x3e<td>"+n.escape(null==(t=e.get("Column_Cell_Remove"))?"":t)+'</td></tr><tr data-bind="css: { displayNone: !scheduleInRowError().message }" role="alert"><td colspan="11"><div class="error" data-bind="text: scheduleInRowError().message" role="alert"></div></td></tr>\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\x3c!-- ko ifnot: useCampaignSettings --\x3e\n\x3c!-- ko foreach: dayTimeRanges --\x3e<tr><td><select class="form-control" data-bind="options: $root.dayOptions, optionsText: \'name\', value: Day, optionsValue: \'val\', enable: isDayTimeEditable"'+n.attr("aria-label",e.getString("Column_Heading_TargetedDays"),!0,!0)+"></select></td><td><select class=\"form-control\" data-bind=\"options: $root.fromHourOptions, optionsText: 'optionsText', value: StartHour, optionsValue: 'val', enable: isDayTimeEditable, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_Start_Hour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control\" data-bind=\"options: $root.minuteOptions, optionsText: 'minuteName', value: StartMinute, optionsValue: 'val', enable: isDayTimeEditable, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_Start_Minute"),!0,!0)+"></select></td><td><select class=\"form-control\" data-bind=\"options: $root.toHourOptions, optionsText: 'optionsText', value: EndHour, optionsValue: 'val', enable: isDayTimeEditable, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_End_Hour"),!0,!0)+"></select></td><td><span>:</span></td><td><select class=\"form-control\" data-bind=\"options: $root.minuteOptions, optionsText: 'minuteName', value: EndMinute, optionsValue: 'val', enable: isDayTimeEditable, css: {'validation-error': scheduleInRowError().type === 'ERROR_TIME'}\""+n.attr("aria-label",e.getString("ImprovedAdScheduling_Column_End_Minute"),!0,!0)+"></select></td>",o&&(i=i+"<td><select class=\"form-control\" data-bind=\"options: $root.bidAdjustmentOptions, optionsText: 'text', value: BidAdjustmentType, optionsValue: 'val'\""+n.attr("aria-label",e.getString("BidAdjustment_Options"),!0,!0)+"></select></td><td width=\"6%\"><input class=\"form-control\" data-bind=\"value: BidAdjustmentAmount, valueUpdate: 'input', css: {'validation-error': scheduleInRowError().type === 'ERROR_BID'}\""+n.attr("aria-label",e.getString("BidAdjustment_BidMultiplier"),!0,!0)+'></td><td><span class="bidBoost-percent">'+n.escape(null==(t=r)?"":t)+"</span></td>"),i=i+'\x3c!-- ko if: $root.supportCashbackSettings--\x3e<td class="cashback-percent-options-cell"><select class="cashback-option-select form-control" data-bind="options: CashbackPercentOptions, optionsText:\'text\', optionsValue: \'value\', value: CashbackPercentSelectedOption"></select></td><td class="cashback-percent-cell"><span class="inherit-cashback-value" data-bind="visible: CashbackPercentSelectedOption() === \'inherit\'"><input class="inline-input inherit-value-span form-control" data-bind="enable: false, value: InheritCashbackPercentValue"><span>'+n.escape(null==(t=e.getString("Campaign_Discount"))?"":t)+"</span></span><span class=\"cashback-input-container\" data-bind=\"visible: CashbackPercentSelectedOption() === 'override'\"><input class=\"form-control\" data-bind=\"value: CashbackPercent, valueUpdate: 'input', css: {'validation-error': scheduleInRowError().type === 'ERROR_CASHBACK_PERCENT'}\""+n.attr("aria-label",e.getString("Campaign_Maximum_Cashback_Offer"),!0,!0)+"><span>"+n.escape(null==(t=e.get("Campaign_Discount"))?"":t)+'</span></span></td>\x3c!-- /ko--\x3e<td><a class="remove-schedule" data-bind="attr:{\'data-index\': $index}" href="javascript:void(0);" role="button">'+n.escape(null==(t=e.get("Column_Cell_Remove"))?"":t)+'</a></td></tr><tr data-bind="css: { displayNone: !scheduleInRowError().message }" role="alert"><td colspan="11"><div class="error" data-bind="text: scheduleInRowError().message" role="alert"></div></td></tr>\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e</tbody></table><div class="ad-scheduling-panel"><table role="presentation"><tbody><tr><div class="error" data-bind="css: { displayNone: !schedulingRowsErrorMessage() }, text: schedulingRowsErrorMessage" role="alert"></div></tr><tr><td>\x3c!-- ko ifnot: useCampaignSettings --\x3e<a class="add-time-row" href="javascript:void(0);"'+n.attr("aria-label",e.getString("Add another ad schedule"),!0,!0)+">"+n.escape(null==(t=e.get("ImprovedAdScheduling_Add"))?"":t)+"</a>\x3c!-- /ko --\x3e</td></tr>",s&&(i=i+'<tr><td><div role="radiogroup" aria-labelledby="adScheduleDisplayTimeLabel"><span id="adScheduleDisplayTimeLabel">'+n.escape(null==(t=e.get("ImprovedAdScheduling_Display_Time"))?"":t)+'</span><label class="radio-inline"><input type="radio" name="adScheduleDisplayTime" value="12-hour" data-bind="checked: timeDisplayTypeEdit">'+n.escape(null==(t=e.get("ImprovedAdScheduling_12_Hour_Label"))?"":t)+'</label><label class="radio-inline"><input type="radio" name="adScheduleDisplayTime" value="24-hour" data-bind="checked: timeDisplayTypeEdit">'+n.escape(null==(t=e.get("ImprovedAdScheduling_24_Hour_Label"))?"":t)+'</label></div></td></tr><tr><td><span class="item-label schedule-item-label form-control-static" id="adScheduleUseSearcherTimeZoneLabel">'+n.escape(null==(t=e.get("ImprovedAdScheduling_TimeZone_Colon"))?"":t),a.popupHelp("pop_BA_Targeting_TimeZone",e.get("ImprovedAdScheduling_TimeZone_Colon"),e),i=i+'</span><div class="schedule-timezone-setting" role="radiogroup" aria-labelledby="adScheduleUseSearcherTimeZoneLabel"><div class="radio"><label class="schedule-timezone-setting-account"><input type="radio" name="adScheduleUseSearcherTimeZone" value="false" data-bind="checked: adScheduleUseSearcherTimeZoneEdit, attr: { disabled: disableAdScheduleTimeZoneEdit()}">'+n.escape(null==(t=e.get("ImprovedAdScheduling_TimeZone_LocationOfYourAccount"))?"":t)+'</label></div><div class="schedule-timezone-setting-text" data-bind="text: timeZoneText"></div><div class="radio"><label class="schedule-timezone-setting-viewer"><input type="radio" name="adScheduleUseSearcherTimeZone" value="true" data-bind="checked: adScheduleUseSearcherTimeZoneEdit, attr: { disabled: disableAdScheduleTimeZoneEdit()}">'+n.escape(null==(t=e.get("ImprovedAdScheduling_TimeZone_LocationOfPerson"))?"":t)+"</label></div></div></td></tr>"),i+="</tbody></table></div></div></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"percentSymbol"in r?r.percentSymbol:"undefined"!==typeof percentSymbol?percentSymbol:void 0,"showBidAdjustmentColumn"in r?r.showBidAdjustmentColumn:"undefined"!==typeof showBidAdjustmentColumn?showBidAdjustmentColumn:void 0,"showDisplayTimeAndFooter"in r?r.showDisplayTimeAndFooter:"undefined"!==typeof showDisplayTimeAndFooter?showDisplayTimeAndFooter:void 0),i}},tDHP:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes;var r=a&&a.get&&a.get("Click to learn more about {{item}}")||a&&a.getString&&a.getString("Click to learn more about {{item}}")||null;i=i+'<a class="helpbutton" type="helppopup" role="button"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",r?r.replace("{{item}}",t):t,!0,!0)+"></a>"},a.showNone=t=function(a){this&&this.block,this&&this.attributes,i=i+'<span class="control-label"'+n.attr("data-bind","visible: "+a+"()",!0,!0)+">"+n.escape(null==(t=e.get("UrlOptions_None"))?"":t)+"</span>"},i=i+'<div class="form-group"><div class="row"><label class="col-sm-4 control-label accordion url-options__title"><a class="expand-url-options" href="javascript:void(0);" data-bind="attr: {&quot;aria-expanded&quot;: isExpanded() ? &quot;true&quot; : &quot;false&quot;}"><span class="spritedimagealign" data-bind="css: isExpanded() ? &quot;expandedImage&quot; : &quot;expanderImage&quot;"></span><span data-bind="text: expanderLabel()"></span></a></label><div class="col-sm-8 form-control-static url-options__description">'+n.escape(null==(t=e.get("UrlOptions_AdvancedSettings_Description"))?"":t)+'</div></div></div><div data-bind="visible: isExpanded"><div class="form-group"><label class="col-sm-4 control-label url-options__tracking-template-label">'+n.escape(null==(t=e.get("TrackingTemplate_Label"))?"":t),a.popupHelp("pop_BA_NewCampaignCreate_Ad_TrackTemplate",e.get("TrackingTemplate_Label"),e),i=i+'</label><div class="tracking-template__container col-sm-8"></div></div><div class="form-group" data-bind="visible: isFinalURLSuffixEnabled"><label class="col-sm-4 control-label url-options__final-url-suffix-label">'+n.escape(null==(t=e.get("FinalUrlSuffix_Label"))?"":t),a.popupHelp("pop_BA_NewAdCreate_FinalURLSuffix",e.get("FinalUrlSuffix_Label"),e),i=i+'</label><div class="final-url-suffix__container col-sm-8"></div></div><div class="form-group"><label class="col-sm-4 control-label url-options__custom-parameters-label">'+n.escape(null==(t=e.get("CustomParameters_Label"))?"":t),a.popupHelp("pop_BA_NewCampaignCreate_Ad_Parameters",e.get("CustomParameters_Label"),e),i=i+'</label><div class="custom-paramters__container col-sm-8"></div></div><div class="form-group"><div class="uurl-test-tool__container col-sm-8 col-sm-offset-4"></div></div></div><div data-bind="visible: !isExpanded()"><div class="form-group"><div class="col-sm-offset-4 col-sm-8"><div class="row"><div class="upgraded-url-options-preview__label"><span>'+n.escape(null==(t=e.get("Import_ImportOptions_TrackingTemplateLabel"))?"":t)+'</span></div><div class="upgraded-url-options-preview__value tracking-template"><span class="control-label" data-bind="text: trackingTemplate"></span>',a.showNone("trackingTemplateShowNone"),i=i+'</div></div><div class="row form-control-static" data-bind="visible: isFinalURLSuffixEnabled"><div class="upgraded-url-options-preview__label"><span>'+n.escape(null==(t=e.get("Import_ImportOptions_FinalUrlSuffixLabel"))?"":t)+'</span></div><div class="upgraded-url-options-preview__value final-url-suffix"><span class="control-label" data-bind="text: finalUrlSuffix"></span>',a.showNone("finalUrlSuffixShowNone"),i=i+'</div></div><div class="row form-control-static"><div class="upgraded-url-options-preview__label"><span>'+n.escape(null==(t=e.get("CustomParameters_Label_New"))?"":t)+'</span></div><div class="upgraded-url-options-preview__value">',a.showNone("parametersShowNone"),i=i+'<div class="custom-params-template" data-bind="foreach:parameters"><div class="row" data-bind="visible:$data.Key"><div class="form-inline col-sm-12"><span class="control-label">'+n.escape(null==(t="{_")?"":t)+'</span><span class="control-label" data-bind="text:$data.Key"></span><span class="control-label">'+n.escape(null==(t="} = ")?"":t)+'</span><span class="control-label" data-bind="text:$data.Value"></span></div></div></div></div></div></div></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},tY0f:function(e,t,i){"use strict";var n=i("bgLp"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("Vwpy"),c=i("syDw"),d=i.n(c),u=i("/xyZ"),p=i.n(u),g=i("UT4o"),h=i.n(g),m=i("5iHu"),f=i.n(m),v=i("f9Pu"),b=function(e){var t=e.state;if(!t)return{};var i=function(e){var i,n,a=e.selectionCount,r=e.selectedIds,o=e.idAttribute,s=e.filter,l=e.customStrFilter,c=[],d="";return e.isPreview||a<=r.length?d=h.a.chain(r).map(function(e){return"".concat(o," eq '").concat(e,"'")}).join(" or ").value():s&&(d=new v.FilterEntity(s.query,{entitySchema:h.a.result(s,"options.entitySchema"),odata:h.a.omit(s.options,"entitySchema")}).odataV4()),i=d,n=l,d=h.a.isEmpty(i)?n:h.a.isEmpty(n)?i:[i,n].join(" and "),h.a.isEmpty(d)||(d=f.a.param({$filter:"(".concat(d,")")})),c.push(d),c.push(function(){try{var e=t.get("$daterange"),i=(e.start||e.RangeStartDate).toISOString(),n=(e.end||e.RangeEndDate).toISOString();return"startdate=".concat(i,"&enddate=").concat(n)}catch(a){return""}}()),h.a.chain(c).compact().join("&").value()};return{bulkEditParams:function(e){var t=e.selectionCount,n=e.selectedIds,a=e.idAttribute,r=void 0===a?"Id":a,o=e.filter,s=e.customStrFilter,l=e.batchActions,c=e.entity,d=e.campaignId,u=void 0===d?null:d,p=e.adgroupId,g=void 0===p?null:p,h=e.isPreview;return{BatchAction:l,Description:function(e){var t={idsCount:e};return JSON.stringify(t)}(t),Entity:c,Selection:{QueryString:i({selectionCount:t,selectedIds:n,idAttribute:r,filter:o,customStrFilter:s,isPreview:h}),CampaignId:u,AdGroupId:g}}}}},y=function(e){var t=e.edm,i=e.state;if(!t||!i)return{};var n=function(){var e=i.get("subAccount_id");return e?t.currentAccount.SubAccounts.$withKey(e):t.currentAccount},a=function(e){if("account"===e)return t.currentAccount;if("subAccount"===e)return n();if("hotelGroup"===e){var a=i.get("hotelGroup_drillDown");return a&&a.hotelGroupId?t.currentAccount.SubAccounts.$withKey(a.subAccountId).HotelGroups.$withKey(a.hotelGroupId):n()}return null};return{gridOptionUtils:{getUrlByName:function(e){if("associations"===e){var t=function(){var e=i.get("subAccount_id");return e&&""!==e?"/Customers(:advertisercustomer_id)/Accounts(:account_id)/SubAccounts('".concat(e,"')/"):"/Customers(:advertisercustomer_id)/Accounts(:account_id)/"}();return"".concat(t,"Associations?")}return""},getEntitySetByName:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"subAccount";return"subAccount"===e?t.currentAccount.SubAccounts:"hotelGroup"===e?a(i).HotelGroups:"hotel"===e?a(i).Hotels:t.currentAccount}}}};i.d(t,"a",function(){return S});var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,i=e.jsdata,c=e.edm,u=e.dataStore;return Object(n.a)({},function(e){var t=e.state,i=e.jsdata,n=e.edm;return t&&i&&n?{AccountService:function(e){function c(){return Object(a.a)(this,c),Object(o.a)(this,Object(s.a)(c).apply(this,arguments))}return Object(l.a)(c,e),Object(r.a)(c,[{key:"fetchSubAccountAsync",value:function(){var e=t.get("subAccount_id"),i=t.get("subAccount_model");return i&&i.Id===e?new p.a(function(e){e(i)}):e&&""!==e?this.fetchSubAccountById(e):(t.unset("subAccount_model"),new p.a(function(e){e(h.a.noop())}))}},{key:"fetchSubAccountById",value:function(e){return i.SubAccount.find(e,{entitySet:n.currentAccount.SubAccounts,cacheResponse:!1,bypassCache:!0}).then(function(e){return e&&t.set("subAccount_model",e),t.get("subAccount_model")})}}]),c}(d.a.Model)}:{}}({state:t,jsdata:i,edm:c}),b({state:t}),function(e){var t=e.dataStore;if(!t)return{};var i=function(e,i,n){t.BulkEditSession.find(e,{cacheResponse:!1}).then(function(e){i(e)}).catch(n)},n=function e(t,n,a,r){return h.a.contains(["Completed","CompletedWithErrors"],r.Status)?t(r):h.a.contains(["Failed","Aborted","Expired"],r.Status)?n(r):(a(r),setTimeout(h.a.partial(i,r.Id,h.a.partial(e,t,n,a),n),500)),r},a=function(e){var i=e.params,a=e.completeCB,r=void 0===a?h.a.noop:a,o=e.failedCB,s=void 0===o?h.a.noop:o,l=e.progressCB,c=void 0===l?h.a.noop:l,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=d?h.a.identity:h.a.partial(n,r,s,c),p={$expand:"BulkEditResults"};return d&&(p.preview=!0),t.BulkEditSession.create(i,{urlParameters:p,cacheResponse:!1}).then(u).catch(s)};return{bulkEditService:{save:function(e){return a(e)},preview:function(e){return a(e,!0)}}}}({dataStore:u}),y({edm:c,state:t}))}},tqsI:function(e,t,i){var n,a;n=[i("5iHu"),i("UT4o"),i("syDw"),i("7XbR"),i("1fLw"),i("rslr"),i("wL7j")],void 0===(a=function(e,t,i,n,a,r,o){"use strict";var s=window.globalLegacyI18n.get("component/i18n/loader!component/upgraded-url");return i.View.extend({initialize:function(e){this.options=e||{},t.defaults(this.options,{template:a,isFinal:!0}),this.ko_model=new r(this.options)},events:{"click .radio-final-url":"finalUrlSelected","click .radio-destination-url":"destinationUrlSelected"},render:function(){return this.$el.html(e(a({i18n:s}))),n.applyBindings(this.ko_model,this.el),this},getValues:function(){return{isFinal:this.ko_model.isFinalUrl()}},finalUrlSelected:function(){this.ko_model.isFinalUrl()&&this.trigger("finalUrlSelected")},destinationUrlSelected:function(){this.ko_model.isFinalUrl()||this.trigger("destinationUrlSelected")}})}.apply(t,n))||(e.exports=a)},uUvm:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o){a.urlResultRow=t=function(e,a,r,o,s,l){this&&this.block,this&&this.attributes,i+='<div class="uurl-result-section uurl-result-list"><div class="uurl-result-left"><div class="uurl-result-url">',e&&(i=i+'<span class="uurl-result-row-title">'+n.escape(null==(t=e)?"":t)+"</span>"),i=i+"<span"+(n.attr("class",n.classes(["uurl-result-hover-link",s],[!1,!0]),!1,!0)+n.attr("title",a,!0,!0)+n.attr("data-index",l,!0,!0))+">"+n.escape(null==(t=a)?"":t)+'</span></div></div><div class="uurl-result-mid"><div class="uurl-result-string">';var c=s+"Result";i=0==r?i+'<span class="status-icon"><div class="glyph-status-ok page-found-icon"></div></span><div'+n.attr("class",n.classes(["result-string",c],[!1,!0]),!1,!0)+">"+n.escape(null==(t=o)?"":t)+"</div>":i+'<span class="status-icon"><div class="status_warning"></div></span><div'+n.attr("class",n.classes(["result-string",c],[!1,!0]),!1,!0)+">"+n.escape(null==(t=o)?"":t)+"</div>",i+="</div></div></div>"},a.urlResultEntity=t=function(r,o,s,l){this&&this.block,this&&this.attributes,i+='<div class="uurl-result-entity"><div class="uurl-result-entity-left">',r.trackingTemplate&&r.trackingTemplate.Value&&(i=i+'<div class="uurl-result-section"><div class="uurl-result-left"><dt style="display: inline-block; margin-right: 3px;">'+n.escape(null==(t=e.get("UURLTestTool_With_ParallelTracking"))?"":t)+'</dt><a class="helpbutton" type="helppopup" topic="pop_BA_URLoptions_ParallelTracking" onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);" aria-label="Learn more Parallel Tracking"></a></div></div>',a.urlResultRow(e.get("UURLTestTool_LandingPage_URL")+"  ",r.landingUrl?r.landingUrl.Value:r.servingUrl?r.servingUrl.Value:"",r.resultType,r.resultString,"ptLandingUrl",l),a.urlResultRow(e.get("UURLTestTool_Tracking_URL")+"  ",r.trackingUrl?r.trackingUrl.Value:"",r.trackingResultType,r.trackingResultString,"ptTrackingUrl",l),i=i+'<div class="uurl-result-section" style="margin-top: 16px;"><div class="uurl-result-left"><dt>'+n.escape(null==(t=e.get("UURLTestTool_When_ParallelTracking_Is_Not_Supported"))?"":t)+"</dt></div></div>"),a.urlResultRow("",o.servingUrl?o.servingUrl.Value:"",o.resultType,o.resultString,"sqServingUrl",l),i+='</div><div class="uurl-result-entity-right">',r.trackingTemplate&&r.trackingTemplate.Value&&(i+='<div style="height: 32px"></div>'),i=i+"<div>"+n.escape(null==(t=s)?"":t)+"</div></div></div>"},i=i+'<div class="uurl-result-section"><dt><span class="tracking-template-title">'+n.escape(null==(t=e.get("UURLTestTool_Title_TrackingTemplate_Colon"))?"":t)+'</span><div class="result-trackingTemplate">',i=(i=o?i+'<span class="uurl-url result-trackingTemplate" style="font-weight: normal">'+n.escape(null==(t=o)?"":t)+"</span>":i+'<span class="uurl-url result-trackingTemplate" style="font-weight: normal">'+n.escape(null==(t=e.get("UURLTestTool_Title_TrackingTemplate_None"))?"":t)+"</span>")+'</div></dt></div><div class="uurl-result-header uurl-result-list"><div class="uurl-result-left"><div class="uurl-result-header-text">'+n.escape(null==(t=e.get("UURLTestTool_ClickURLs"))?"":t)+'</div></div><div class="uurl-result-mid"><div class="uurl-result-header-text" style="display: inline-block; margin-right: 5px;">'+n.escape(null==(t=e.get("UURLTestTool_Status"))?"":t)+'</div><a class="HelpTopic" query="help:app54560" href="javascript:void(0);">'+n.escape(null==(t=e.get("LearnMore"))?"":t)+'</a></div><div class="uurl-result-right"><div class="uurl-result-header-text">'+n.escape(null==(t=e.get("UURLTestTool_AdGroup"))?"":t)+'</div></div></div><div class="uurl-result-entity-list">',function(){var e=r;if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];a.urlResultEntity(n.pt,n.sq,n.adGroupName,t)}else for(var t in i=0,e)i++,n=e[t],a.urlResultEntity(n.pt,n.sq,n.adGroupName,t)}.call(this),i+="</div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"resultList"in r?r.resultList:"undefined"!==typeof resultList?resultList:void 0,"resultListTrackingTemplate"in r?r.resultListTrackingTemplate:"undefined"!==typeof resultListTrackingTemplate?resultListTrackingTemplate:void 0),i}},uaCj:function(e,t,i){"use strict";i.r(t);var n=i("1lK0"),a=function(e){var t,i,a=e.permissions,r=void 0===a?{}:a,o=e.culture,s=r.IsAdsGlobalizationPhase1Enabled,l=r.IsAdsGlobalizationPhase2Enabled,c=["ARS","AUD","BRL","CAD","CHF","CLP","CNY","COP","EUR","GBP","HKD","INR","MXN","NZD","PEN","PHP","PLN","SEK","SGD","USD","VEF","DKK","TWD"],d=["English","German","French","Spanish","Italian","Portuguese","Dutch","Swedish","TraditionalChinese","Danish","Finnish","Norwegian"];if(s||l){var u=new Intl.Collator(o).compare;t=d.concat(Object(n.a)(s?["Bulgarian","Croatian","Czech","Estonian","Greek","Hungarian","Latvian","Lithuanian","Maltese","Polish","Romanian","Slovak","Slovenian"]:[]),Object(n.a)(l?["Albanian","Bosnian","Icelandic","Macedonian","Serbian","Turkish"]:[])).sort(u),i=c.concat(Object(n.a)(s?["TRY","ZAR"]:[]),Object(n.a)(l?["ALL","BAM","ISK","MKD","RSD"]:[])).sort(u)}else t=d.concat(),i=c.concat();return{LANGUAGES:t,CURRENCIES:i,COUNTRIES:["AR","AU","AT","BR","CA","CL","CO","DK","FI","FR","DE","HK","IN","ID","IE","IT","MY","MX","NL","NZ","NO","PE","PH","SG","ES","SE","CH","TW","TH","GB","US","VE","VN"].concat(Object(n.a)(s?["AD","BG","CY","CZ","EE","GR","HR","HU","LI","LT","LU","LV","MC","MT","PL","PT","RO","SI","SK","SM","VA"]:[]),Object(n.a)(l?["AL","BA","IS","ME","MK","RS","TR","ZA"]:[]))}};i.d(t,"globalizationModelSetup",function(){return a})},uxIr:function(e,t,i){var n,a;n=[i("UT4o")],void 0===(a=function(e){"use strict";var t={"<":"&lt;",">":"&gt;"},i={};e.each(t,function(e,t){i[t]=new RegExp(t,"g")});return{escape:function(n){return n&&e.each(t,function(e,t){n=n.replace(i[t],e)}),n}}}.apply(t,n))||(e.exports=a)},v0gy:function(e,t,i){i("4y7W");e.exports=function(e){var t,i="",n=e||{};return function(e){i=i+'<span class="type-normal">'+(null==(t=e)?"":t)+"</span>"}.call(this,"text"in n?n.text:"undefined"!==typeof text?text:void 0),i}},"vMz+":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e){a.popupHelp=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",(a||"Learn more")+" "+(t||""),!0,!0)+"></a>"},i=i+'<div class="crud-audience-adgroup form-horizontal adgroup-settings__container"><div class="adgroup-name-input-container"><label class="adgroup-name-label" id="adgroupNameLabel">'+n.escape(null==(t=e.getString("Audience_Campaign_AdGroup_Label_Name"))?"":t)+"</label>",a.popupHelp("pop_BA_CampaignCreate_AudTargets_AdGroupName",e.getString("Audience_Campaign_AdGroup_Label_Name"),e.getString("LearnMoreLinkText")),i+='<div class="row"><div class="name-input-control-container col-sm-4"><div class="remaining-chars-hint-container"></div></div></div></div><div class="copy-adgroup-settings-container"></div><div class="audience-target-selector-container"></div><hr><div class="target-setting-and-estimate-container"><div class="audience-target-settings-container col-sm-8"><div class="location-setting-container"></div><div class="age-setting-container"></div><div class="gender-setting-container"></div><div class="device-setting-container"></div><div class="audience-setting-container"></div><div class="companyName-setting-container"></div><div class="industry-setting-container"></div><div class="jobFunction-setting-container"></div></div><div class="audience-reach-estimate-container col-sm-3 col-sm-offset-1"></div></div><div class="errors-container"></div></div>'}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},vdrl:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<span class="toggle-button"><span class="toggle-handle"></span></span><span class="toggle-text" aria-hidden="true"></span>'}},vvFZ:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s){a.companyItemTemplate=t=function(a){this&&this.block,this&&this.attributes,i=i+'<div class="pull-left"><img'+(n.attr("src",a.logoUrl||"https://static.licdn.com/sc/h/2274wx7bapao7ytcvp1wdxxvu",!0,!0)+n.attr("alt",a.name,!0,!0))+' width="50px" height="50px"></div><div class="company-name"><div class="company-item-name">'+n.escape(null==(t=a.name)?"":t)+"</div>";var r="";a.industry&&(r=a.industry+"; "),a.size&&(r+=a.size+" "+e.getString("Audience_Campaign_Target_Setting_Company_Employee_Count")),i=i+'<div class="company-item-industry">'+n.escape(null==(t=r)?"":t)+"</div></div>"},i=i+"<div"+n.attr("class",n.classes(["company-search-container",r?"show":"hide"],[!1,!0]),!1,!0)+'><div class="company-search-table">',function(){var r=o;if("number"==typeof r.length)for(var l=0,c=r.length;l<c;l++){var d=r[l];i+='<div class="company-item-template">',d.isIncluded?i=i+'<div class="pull-right action-container">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Included_Status"))?"":t)+"</div>":d.isExcluded?i=i+'<div class="pull-right action-container">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Excluded_Status"))?"":t)+"</div>":(i=i+'<div class="pull-right action-container"><a class="company-search-include-link" href="javascript:void(0)"'+n.attr("data-id",d.id,!0,!0)+n.attr("data-name",d.name,!0,!0)+' role="button">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Include_Action"))?"":t)+"</a>",s&&(i=i+'<span class="company-search-separator">|</span><a class="company-search-exclude-link" href="javascript:void(0)"'+n.attr("data-id",d.id,!0,!0)+n.attr("data-name",d.name,!0,!0)+' role="button">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Exclude_Action"))?"":t)+"</a>"),i+="</div>"),a.companyItemTemplate(d),i+='<div class="clearfix"></div></div>'}else for(var l in c=0,r)c++,d=r[l],i+='<div class="company-item-template">',d.isIncluded?i=i+'<div class="pull-right action-container">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Included_Status"))?"":t)+"</div>":d.isExcluded?i=i+'<div class="pull-right action-container">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Excluded_Status"))?"":t)+"</div>":(i=i+'<div class="pull-right action-container"><a class="company-search-include-link" href="javascript:void(0)"'+n.attr("data-id",d.id,!0,!0)+n.attr("data-name",d.name,!0,!0)+' role="button">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Include_Action"))?"":t)+"</a>",s&&(i=i+'<span class="company-search-separator">|</span><a class="company-search-exclude-link" href="javascript:void(0)"'+n.attr("data-id",d.id,!0,!0)+n.attr("data-name",d.name,!0,!0)+' role="button">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Exclude_Action"))?"":t)+"</a>"),i+="</div>"),a.companyItemTemplate(d),i+='<div class="clearfix"></div></div>'}.call(this),i+="</div>",o.length<1&&(i=i+'<div class="empty-result-message">'+n.escape(null==(t=e.getString("Audience_Campaign_Target_Setting_Company_Search_No_Result"))?"":t)+"</div>"),i+="</div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isVisible"in r?r.isVisible:"undefined"!==typeof isVisible?isVisible:void 0,"items"in r?r.items:"undefined"!==typeof items?items:void 0,"showExclusion"in r?r.showExclusion:"undefined"!==typeof showExclusion?showExclusion:void 0),i}},wKMv:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="location-setting-controller"></div>'}},wL7j:function(e,t,i){var n,a;n=[i("UT4o"),i("syDw"),i("7XbR"),i("5iHu"),i("obD+"),i("Pm+J")],void 0===(a=function(e,t,i,n,a,r){"use strict";return t.View.extend({events:{},initialize:function(t){this.options=t||{},e.defaults(this.options,{template:r,urlPlaceholder:"",errorContainer:"",ariaId:"",required:!1}),this.ko_model=new a(this.options),this.ko_model.fullUrl.subscribe(function(e){this.trigger("urlChanged",e)},this)},render:function(){return this.$el.html(this.options.template({urlPlaceholder:this.options.urlPlaceholder,ariaLabelledby:this.options.ariaLabelledby,ariaId:this.options.ariaId+"protocolOptions",required:this.options.required})),i.applyBindings(this.ko_model,this.el),this},hasErrors:function(e){this.ko_model.hasErrors(e)},remove:function(){return i.cleanNode(this.el),this},getFullUrl:function(){return this.ko_model.fullUrl()},setDisabled:function(e){this.ko_model.isDisabled(!!e)},setError:function(e){this.ko_model.errorMessage(e)}})}.apply(t,n))||(e.exports=a)},wOIE:function(e,t,i){var n=i("Ye1X"),a=n.convertAspectRatioDecimalToRatio,r=n.convertAspectRatioToDecimal,o=n.getOriginalImageAspectRatio,s=n.getAllowedAspectRatio,l=n.getAspectRatio,c=n.getResizeImageHeight,d=i("dM/0"),u=d.EffectChoiceKey,p=d.EffectChoiceOrder,g=d.MTSmartEffect,h=d.EffectChoiceMtSmartEffectMapping;e.exports={convertAspectRatioDecimalToRatio:a,convertAspectRatioToDecimal:r,getOriginalImageAspectRatio:o,getAllowedAspectRatio:s,getAspectRatio:l,getResizeImageHeight:c,EffectChoiceKey:u,EffectChoiceOrder:p,MTSmartEffect:g,EffectChoiceMtSmartEffectMapping:h}},"wSn+":function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o,s){i=i+'<span class="grid-cell-text"><a class="scope-navigator"'+n.attr("href",o,!0,!0)+n.attr("data-campaignid",r,!0,!0)+n.attr("data-adgroupid",e,!0,!0)+n.attr("aria-label",a,!0,!0)+">"+n.escape(null==(t=s)?"":t)+"</a></span>"}.call(this,"adgroupId"in a?a.adgroupId:"undefined"!==typeof adgroupId?adgroupId:void 0,"ariaLabel"in a?a.ariaLabel:"undefined"!==typeof ariaLabel?ariaLabel:void 0,"campaignId"in a?a.campaignId:"undefined"!==typeof campaignId?campaignId:void 0,"link"in a?a.link:"undefined"!==typeof link?link:void 0,"name"in a?a.name:"undefined"!==typeof name?name:void 0),i}},xAIr:function(e,t,i){i("4y7W");e.exports=function(e){var t="";return t+='<div class="bingadsgrid grid-table"><div class="editor__container bulkedit-container" id="bulkEditContainer"></div><div data-ref="settings-grid"></div></div><div class="noresult-container grid-nodata-container"></div>'}},xAPU:function(e,t,i){var n;n=function(e,t,i,n,a){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}return i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){"use strict";var n=o(i(2)),a=o(i(102)),r=i(64);function o(e){return e&&e.__esModule?e:{default:e}}e.exports={version:a.default.version,GridView:i(58),projections:i(18),layout:i(5),factory:n.default,popupEditorPrompt:i(32),dataSource:{Base:r.DataSource,Memory:r.MemoryDataSource,OData:r.ODataDataSource,JSData:r.JSDataDataSource}}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.default=function(e){return new p(e)};var a=d(i(3)),r=d(i(4)),o=d(i(17)),s=d(i(57)),l=d(i(63)),c=d(i(69));function d(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return e("config",[],function(){return this.config})},p=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vnext,i=void 0!==t&&t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pluginIndex={},this.plugins=[],i?this.use(u).use(l.default).use(c.default):this.use(u).use(o.default).use(r.default).use(s.default)}return n(e,[{key:"definePlugin",value:function(e,t,i){var n=this,r={name:e,deps:t,callback:i};this.pluginIndex[e]=r,this.plugins.push(r),a.default.each(t,function(t){if(!a.default.has(n.pluginIndex,t))throw new Error("unresolved plugin dependency "+e+" -> "+t)})}},{key:"use",value:function(e){return e(this.definePlugin.bind(this)),this}},{key:"create",value:function(e){return a.default.reduce(this.plugins,function(e,t){var i,n,r,o=t.name,s=t.deps,l=t.callback;return a.default.extend(e,(i={},n=o,r=l.apply(e,a.default.map(s,function(t){return e[t]})),n in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i))},{config:e})}}]),e}()},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(5),r=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){return e("renderers",["config"],function(e){var t=[];return e.scrollable&&(e.scrollable.virtual&&t.push(r.default.renderers.Virtualization),e.scrollable.fixedHeader&&t.push(r.default.renderers.FixedHeader)),t})}},function(e,t,i){"use strict";e.exports={TableLayout:i(6),templates:{table:i(9)},renderers:i(12)}},function(e,t,i){var n,a;n=[i(3),i(7),i(8)],void 0===(a=function(e,t,i){var n=i.View.extend({events:{"click th":"thClick","click td":"tdClick","change td>input.grid-text-input":"editableStringChange"},initialize:function(t){e.bindAll(this,"update","thClick","tdClick","dataFor"),this.options=e.extend(this.options,t),this.data=void 0,this.container=t.container,this.grid=t.grid,this.renderers=e.map(this.options.renderers,function(e){return new e({layout:this})}.bind(this)),this.subviews=[],this.onChange=this.onViewPortChange.bind(this),e.isEmpty(this.renderers)||(this.listenTo(this.container,"scroll:container",this.onViewPortChange),this.listenTo(this.container,"resize:container",this.onViewPortChange)),this.on("change:viewport",function(){this.$el.is(":visible")&&this.scheduleDraw()})},onViewPortChange:function(){this.trigger("change:viewport")},monitorViewportChange:function(t,i){t=t||1e3,i=i||100;var n=this.el.getBoundingClientRect(),a=window.setInterval(function(){var t=this.el.getBoundingClientRect();e.some(["left","top","width","height"],function(e){return Math.abs(t[e]-n[e])>.5})&&this.onViewPortChange()}.bind(this),i);window.setTimeout(function(){window.clearInterval(a)},t)},removeSubviews:function(){e.each(this.subviews,function(e){e.remove()}),this.subviews=[]},remove:function(){this.removeSubviews(),this.container.stopListening(this.container),e.each(this.renderers,function(e){return e.remove()}),i.View.prototype.remove.apply(this,arguments)},thClick:function(e){var t=this.dataFor(e.currentTarget);t.column&&this.trigger("click:header",e,t)},tdClick:function(e){var t=this.dataFor(e.currentTarget);t.column&&this.trigger("click:cell",e,t)},editableStringChange:function(t){var i=this.dataFor(t.currentTarget),n=this.grid.projection.get("column.editable.string");i.column&&(e.isObject(n)&&!e.isUndefined(n[i.property])?this.grid.projection.get("projection:column-editable-string").trigger("change:string",t,i):this.trigger("change:editable.string",t,i))},dataFor:function(i){if(t.contains(this.el,i)){var n=t(i),a=n.closest("tr",this.el),r=n.closest("td",this.el),o=n.closest("th",this.el),s=e.size(r)?r:o,l=this.getRenderer("virtualization"),c=a.index(),d=s.index(),u=s.closest("thead",this.el).length,p={header:u};if(u?p.property=0===c?this.data.select[d]:1===c?this.data.subSelect[d]:this.data.selectExpand[d]:(c+=l?l.first:0,p.model=this.data.value[c],this.data.selectExpand?p.property=this.data.selectExpand[d]:p.property=this.data.select[d]),p.column=this.data.columns[p.property],p.property===this.grid.projection.get("column.checked")){var g=n.find(".column-selection");g.length&&(p.checked=g[0].checked)}return p.grid=this.grid,p}},toHTML:function(t){var i=e.defaults({value:t.rows,isSticky:t.isSticky},this.data);return e.each(i.columns,function(t){e.isObject(t.$metadata)&&(e.has(t.$metadata["attr.head"],"class")&&e.isArray(t.$metadata["attr.head"].class)&&(t.$metadata["attr.head"].class=t.$metadata["attr.head"].class.join(" ")),e.has(t.$metadata["attr.body"],"class")&&e.isArray(t.$metadata["attr.body"].class)&&(t.$metadata["attr.body"].class=t.$metadata["attr.body"].class.join(" ")))}),this.options.template(i)},update:function(t){e.each(this.renderers,function(e){e.update&&e.update()});var i=t.get("value"),n=t.get("columns"),a={},r=this.options.columns||{},o={};e.each(this.grid.projection.get("orderby"),function(t,i){var n=e.first(e.keys(t));o[n]={dir:t[n],index:i}}),e.each(n,function(t,i){var n={},s=r[i],l=i;s&&e.isString(s.sortable)?l=s.sortable:t&&e.isString(t.sortable)&&(l=t.sortable),o[l]&&(n.$orderby=o[l]),a[i]=e.defaults(n,s,t)}),e.has(this.options.$metadata,"class")&&e.isArray(this.options.$metadata.class)&&(this.options.$metadata.class=this.options.$metadata.class.join(" "));var s={value:i,columns:a,"columns.lookup":e.indexBy(n,function(e){return e.property}),$metadata:this.options.$metadata,hideHeaders:this.options.hideHeaders};this.data=e.defaults(s,t.toJSON()),this.draw({canSkipDraw:!1})},scheduleDraw:function(){this.scheduledDraw||(this.scheduledDraw=!0,window.requestAnimationFrame(function(){this.scheduledDraw=!1,this.draw()}.bind(this)))},drawable:function(){return this.data},getRenderer:function(t){return e.find(this.renderers,function(e){return e.name===t})},draw:function(t){if(this.drawable()){this.trigger("render:beginning");var i=this.renderers,n=0,a=!e.has(t,"canSkipDraw")||t.canSkipDraw;!function t(a,r){var o=i[n++];if(o){var s=e.defaults({},a,{css:{}});delete s.canSkipDraw,o.draw(s,e.once(function(e,i){i.canSkipDraw=!0===a.canSkipDraw&&!0===i.canSkipDraw,e?r(e):t(i||s,r)}))}else r(void 0,a)}({rows:this.data.value,canSkipDraw:a},function(t,i){if(i.css&&this.$el.css(i.css),t)throw t;this.removeSubviews(),!0!==i.canSkipDraw&&(this.el.innerHTML=this.toHTML(i)),e.each(this.data.columns,function(t){t.config&&(e.isFunction(t.config.View)&&this.$("td.col-"+t.config.name).each(function(e,i){var n=new t.config.View({model:this.dataFor(i).model});this.$(i).html(n.render().el),this.subviews.push(n)}.bind(this)),e.isFunction(t.config.HeaderView)&&this.$("th.col-"+t.config.name).each(function(e,i){var n=new t.config.HeaderView;this.$(i).html(n.render().el),this.subviews.push(n)}.bind(this)))},this)}.bind(this)),this.trigger("render:finished")}},render:function(){this.grid.on("change:data",this.update)},rerender:function(){this.scheduleDraw()}});return n.partial=function(e){return n.extend({options:e})},n}.apply(t,n))||(e.exports=a)},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a={},r=e||{};return function(r,o,s,l,c,d,u,p){a.columnHeader=t=function(e,a){this&&this.block,this&&this.attributes;e.headerBuilder?i.push(null==(t=e.headerBuilder(e,a))?"":t):(e.$orderby&&(e.$orderby.dir>0?i.push('<span class="grid-asc"></span>'):i.push('<span class="grid-des"></span>')),e&&e.$html?i.push(null==(t=e.$html)?"":t):a&&e.config.subColTitle?i.push(n.escape(null==(t=e.config.subColTitle)?"":t)):i.push(n.escape(null==(t="undefined"!=typeof e.$text?e.$text:e.property||e)?"":t)))},a.th=t=function(e,r,o){this&&this.block;var s=this&&this.attributes||{},l=(e.$metadata||{})["attr.head"]||{},c=e.config&&e.config.name||"",d=[];if(c&&d.push("col-"+c),e.sortable&&d.push("sortable"),e.$orderby&&d.push("orderby"),d=d.join(" "),o){var u=1,p=1;i.push("<th"+n.attrs(n.merge([{colspan:n.escape(u),rowspan:n.escape(p),class:(t=[!0],n.joinClasses([d].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s,l]),!0)+">"),a.columnHeader(e,!0),i.push("</th>")}else if(r&&e.groupExpansion){u=e.group.length,p=1;i.push("<th"+n.attrs(n.merge([{colspan:n.escape(u),rowspan:n.escape(p),class:(t=[!0],n.joinClasses([d].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s,l]),!0)+'><span class="pop-collapse glyphicon glyphicon-minus"></span><div>'),a.columnHeader(e),i.push("</div></th>")}else if(r&&e.group){u=1,p=2;i.push("<th"+n.attrs(n.merge([{colspan:n.escape(u),rowspan:n.escape(p),class:(t=[!0],n.joinClasses([d].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s,l]),!0)+'><span class="pop-expand glyphicon glyphicon-plus"></span><div>'),a.columnHeader(e),i.push("</div></th>")}else{u=1,p=2;i.push("<th"+n.attrs(n.merge([{colspan:n.escape(u),rowspan:n.escape(p),class:(t=[!0],n.joinClasses([d].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s,l]),!0)+">"),a.columnHeader(e),i.push("</th>")}},a.td=t=function(e,a){this&&this.block;var r=this&&this.attributes||{},o=(a.$metadata||{})["attr.body"]||{},s=a.config&&a.config.name||"",l=s?"col-"+s:"";i.push("<td"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([l].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r,o]),!0)+">");var c=e[a.property];c&&c.$html?i.push(null==(t=c.$html)?"":t):i.push(n.escape(null==(t=c)?"":t)),i.push("</td>")},a.thead=t=function(e,t,n,r){this&&this.block,this&&this.attributes;i.push("<thead>"),e&&0===t.length?(i.push('<tr class="table__row--header">'),function(){var e=n.select||[];if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){var o=e[t];a.th(r[o],!0)}else{i=0;for(var t in e){i++;o=e[t];a.th(r[o],!0)}}}.call(this),i.push("</tr>")):e?(i.push('<tr class="table__row--header">'),function(){var e=n.select||[];if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){var o=e[t];a.th(r[o],!0)}else{i=0;for(var t in e){i++;o=e[t];a.th(r[o],!0)}}}.call(this),i.push('</tr><tr class="table__row--header table__row--sub-header">'),function(){var e=n.subSelect;if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){var o=e[t];a.th(r[o],!0,!0)}else{i=0;for(var t in e){i++;o=e[t];a.th(r[o],!0,!0)}}}.call(this),i.push("</tr>")):(i.push('<tr class="table__row--header">'),function(){var e=n.select||[];if("number"==typeof e.length)for(var t=0,i=e.length;t<i;t++){var o=e[t];a.th(r[o])}else{i=0;for(var t in e){i++;o=e[t];a.th(r[o])}}}.call(this),i.push("</tr>")),i.push("</thead>")},c&&(i.push("<table"+n.attrs(n.merge([{class:"table table-hover grid grid-sticky-header"},r||{}]),!0)+">"),a.thead(l,d,e,o),i.push('</table><div class="sticky-header-filler"></div>')),i.push("<table"+n.attrs(n.merge([{role:"grid",class:"table table-hover grid grid-content"},r||{}]),!0)+">"),s||c||a.thead(l,d,e,o),i.push("<tbody>"),function(){var t=p;if("number"==typeof t.length)for(var r=0,s=t.length;r<s;r++){var l=((c=t[r]).$metadata||{}).attr||{};i.push("<tr"+n.attrs(n.merge([{class:"table__row--body"},l]),!0)+">"),function(){var t=e.selectExpand||e.select;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var r=t[i];a.td(c,o[r])}else{n=0;for(var i in t){n++;r=t[i];a.td(c,o[r])}}}.call(this),i.push("</tr>")}else{s=0;for(var r in t){s++;var c;l=((c=t[r]).$metadata||{}).attr||{};i.push("<tr"+n.attrs(n.merge([{class:"table__row--body"},l]),!0)+">"),function(){var t=e.selectExpand||e.select;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var r=t[i];a.td(c,o[r])}else{n=0;for(var i in t){n++;r=t[i];a.td(c,o[r])}}}.call(this),i.push("</tr>")}}}.call(this),i.push("</tbody></table>")}.call(this,"$metadata"in r?r.$metadata:"undefined"!==typeof $metadata?$metadata:void 0,"columns"in r?r.columns:"undefined"!==typeof columns?columns:void 0,"hideHeaders"in r?r.hideHeaders:"undefined"!==typeof hideHeaders?hideHeaders:void 0,"isApplyGroup"in r?r.isApplyGroup:"undefined"!==typeof isApplyGroup?isApplyGroup:void 0,"isSticky"in r?r.isSticky:"undefined"!==typeof isSticky?isSticky:void 0,"subSelect"in r?r.subSelect:"undefined"!==typeof subSelect?subSelect:void 0,"undefined"in r?r.undefined:void 0,"value"in r?r.value:"undefined"!==typeof value?value:void 0),i.join("")}},function(e,t,i){"use strict";function n(e){return null!=e&&""!==e}function a(e){return(Array.isArray(e)?e.map(a):e&&"object"===typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(n).join(" ")}t.merge=function e(t,i){if(1===arguments.length){for(var a=t[0],r=1;r<t.length;r++)a=e(a,t[r]);return a}var o=t.class,s=i.class;for(var l in(o||s)&&(o=o||[],s=s||[],Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]),t.class=o.concat(s).filter(n)),i)"class"!=l&&(t[l]=i[l]);return t},t.joinClasses=a,t.cls=function(e,i){for(var n=[],r=0;r<e.length;r++)i&&i[r]?n.push(t.escape(a([e[r]]))):n.push(a(e[r]));var o=a(n);return o.length?' class="'+o+'"':""},t.style=function(e){return e&&"object"===typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,i,n,a){return"style"===e&&(i=t.style(i)),"boolean"==typeof i||null==i?i?" "+(a?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof i?(-1!==JSON.stringify(i).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),i&&"function"===typeof i.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'"):n?(i&&"function"===typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(i)+'"'):(i&&"function"===typeof i.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+i+'"')},t.attrs=function(e,i){var n=[],r=Object.keys(e);if(r.length)for(var o=0;o<r.length;++o){var s=r[o],l=e[s];"class"==s?(l=a(l))&&n.push(" "+s+'="'+l+'"'):n.push(t.attr(s,l,!1,i))}return n.join("")};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},o=/[&<>"]/g;function s(e){return r[e]||e}t.escape=function(e){var t=String(e).replace(o,s);return t===""+e?e:t},t.rethrow=function e(t,n,a,r){if(!(t instanceof Error))throw t;if(("undefined"!=typeof window||!n)&&!r)throw t.message+=" on line "+a,t;try{r=r||i(11).readFileSync(n,"utf8")}catch(d){e(t,null,a)}var o=3,s=r.split("\n"),l=Math.max(a-o,0),c=Math.min(s.length,a+o);o=s.slice(l,c).map(function(e,t){var i=t+l+1;return(i==a?"  > ":"    ")+i+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+a+"\n"+o+"\n\n"+t.message,t},t.DebugItem=function(e,t){this.lineno=e,this.filename=t}},function(e,t){},function(e,t,i){"use strict";var n=r(i(13)),a=r(i(16));function r(e){return e&&e.__esModule?e:{default:e}}e.exports={FixedHeader:n.default,Virtualization:a.default}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=s(i(7)),r=s(i(3)),o=s(i(14));s(i(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="fixed-header",this.state="normal",this.options=i,this.layout=this.options.layout,this.columnWidth=null,this.windowWidth=(0,a.default)(window).width(),this.onViewPortChange=function(){r.default.isFunction(t.freezeColumnWidth)&&t.freezeColumnWidth()},this.layout.on("change:viewport",this.onViewPortChange)}return n(e,[{key:"draw",value:function(e,t){var i=this;e.vpMeasures=o.default.viewport.call(this.layout);var n=this.layout.$el,s=r.default.result(this.layout,"top",0),l=e.vpMeasures.viewportTop+s>e.vpMeasures.boundsTop,c=l?"sticky":"normal";if(e.canSkipDraw=c===this.state,e.isSticky=l,t(void 0,e),n.find("table.grid").css({tableLayout:"fixed"}),l){var d=n.find("table.grid-sticky-header"),u=n.find("table.grid-content"),p=d.find("thead > tr:last-child").children(),g=u.find("tbody > tr:first-child").children();if("normal"===this.state)n.find(".sticky-header-filler").css({height:d.outerHeight()});var h=function(e,t){r.default.each([p,g],function(e){return r.default.each(e,function(e,i){(0,a.default)(e).css({width:r.default.result(t,i,"")})})}),n.find("table.grid").css({width:e})};(this.freezeColumnWidth=function(){(!i.columnWidth||Math.abs((0,a.default)(window).width()-i.windowWidth)>=1)&&(h("",null),i.windowWidth=(0,a.default)(window).width(),i.tableWidth=u.outerWidth(),i.columnWidth=r.default.map(g,function(e){return(0,a.default)(e).outerWidth()})),h(i.tableWidth,i.columnWidth)})(),d.css({top:s,left:u.offset().left-window.scrollX,position:"fixed"})}else this.freezeColumnWidth=null;this.state!==c&&(this.layout.grid.trigger("change:header-state",c),this.state=c)}},{key:"remove",value:function(){}}],[{key:"partial",value:function(e){return function(t){return new Renderer(r.default.defaults({},t,e))}}}]),e}();t.default=l},function(e,t,i){var n,a;n=[i(7),i(3)],void 0===(a=function(e,t){function i(i){var n=i?e(i):this.$el,a={rows:[],thead:n.find("thead > tr").outerHeight()};n.find("tbody").children("tr").each(function(){a.rows.push(e(this).outerHeight())});var r=t.reduce(a.rows,function(e,t){return e+t},0)/(0===a.rows.length?1:a.rows.length);return a.avgRowHeight=r,a.estimateHeight=t.size(this.data.value)*r+a.thead,a}return{viewport:function(t,i){var n=t?e(t):this.$el,a=(i=i||this.container).$el,r=a.scrollTop(),o=r+a.height(),s=a.scrollLeft(),l=i.offset(n).top,c=l+n.innerHeight();return{boundsTop:l,viewportTop:r,top:Math.max(l,r)-l,bottom:Math.min(c,o)-l,offsetLeft:s}},dimensions:i,sample:function(){var n=e('<div style="visibility:hidden" />'),a=t.first(this.data.value,20);this.$el.append(n),n[0].innerHTML=this.toHTML({rows:a});var r=i.call(this,n);return n.remove(),r}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3)],void 0===(a=function(e){function t(t){return e.isFinite(t)?t:0}return{parse:function(e){return t(parseFloat(e))},pixelify:function(e){return t(e)+"px"}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(7),i(3),i(14),i(15)],void 0===(a=function(e,t,i,n){function a(e){return t.isNumber(e.__height)?e.__height:this.__measures.avgRowHeight}function r(e,t){for(var i=this.layout.data.value,n=0,r=e;r<=t;r++)n+=a.call(this,i[r]);return n}function o(e){var i=e;if(i<=0)return 0;for(var n=-1,r=t.size(this.layout.data.value);i>0&&n<r-1;)n++,i-=a.call(this,n);return n<r?n:-1}function s(e){this.options=e||{},this.name="virtualization",this.layout=this.options.layout}return s.prototype.draw=function(e,a){var s=this.layout.data.value,l=t.size(s),c=0,d=l-1;if(!this.__measures){var u=i.sample.call(this.layout);this.__measures=t.pick(u,"avgRowHeight","estimateHeight","thead"),this.layout.$el.css({"padding-top":n.pixelify(this.__measures.estimateHeight)})}e.vpMeasures=e.vpMeasures||i.viewport.call(this.layout),c=o.call(this,e.vpMeasures.top-this.__measures.thead),d=o.call(this,e.vpMeasures.bottom-this.__measures.thead);c-=5,d+=5,c=Math.max(0,c),d=Math.min(d<0?l-1:d,l-1);var p=r.call(this,0,c-1),g=r.call(this,d+1,l-1);e.rows=s.slice(c,d+1),t.extend(e.css,{"padding-top":n.pixelify(p+n.parse(e.css["padding-top"])),"padding-bottom":n.pixelify(g+n.parse(e.css["padding-bottom"]))}),this.first===c&&this.last===d&&(e.canSkipDraw=!0),a(void 0,e);var h=i.dimensions.call(this.layout);t.each(h.rows,function(e,t){s[t+c].__height=e});var m=t.chain(s).map(function(e){return e.__height}).compact().value();t.size(m)&&(this.__measures.avgRowHeight=t.reduce(m,function(e,t){return e+t},0)/t.size(m)),this.first=c,this.last=d},s.prototype.update=function(){delete this.__measures},s.prototype.remove=t.noop,s.partial=function(e){return function(i){return new s(t.defaults({},i,e))}},s}.apply(t,n))||(e.exports=a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i(3)),a=l(i(8)),r=l(i(18)),o=i(56),s=l(i(32));function l(e){return e&&e.__esModule?e:{default:e}}var c={A11y:function(e){var t={};return n.default.has(e.a11y,"selection")&&n.default.has(e.a11y.selection,"selectAllLabel")&&(t["a11y.selection.selectAllLabel"]=e.a11y.selection.selectAllLabel),t},AggregateRow:function(e){var t={};return n.default.has(e.aggregate,"top")&&(t["aggregate.top"]=e.aggregate.top),n.default.has(e.aggregate,"bottom")&&(t["aggregate.bottom"]=e.aggregate.bottom),t},JSData:function(e){return n.default.extend(n.default.pick(e.dataSource,["skip","take","filter","orderby","select"]),{"jsdata.entity":e.dataSource.resource,"jsdata.query":e.dataSource.query,"jsdata.options":e.dataSource.options})},Map:function(e){var t=n.default.reduce(e.columns,function(e,t){var i=t.name,a=t.value,r=t.field;return e[i]=a||function(e){return n.default.reduce((r||i).split("/"),function(e,t){return n.default.result(e,t)},e)},e},{});return{map:function(i){return n.default.reduce(e.columns,function(e,n){var a=n.name;return e[a]=t[a](i),e},{})}}},Columns:function(e){var t=n.default.reduce(e.columns,function(e,t){var i={};return t.attributes&&(i["attr.body"]=t.attributes),t.headerAttributes&&(i["attr.head"]=t.headerAttributes),e[t.name]={sortable:t.sortable,$metadata:i,headerBuilder:t.headerBuilder,config:t},e},{});return e.selectable&&(t.checkbox={config:{name:"selection"}}),n.default.has(e.columnShifter,"totalColumns")&&(t["column.skip.less"]={config:{name:"skip-less"}},t["column.skip.more"]={config:{name:"skip-more"}}),{columns:t}},ColumnI18n:function(e){return n.default.reduce(e.columns,function(e,t){return e["column.i18n"][t.name]=t.title||t.name,e["subColumn.i18n"][t.name]=t.subColTitle,e},{"column.i18n":{},"subColumn.i18n":{}})},ColumnQueryable:function(e){var t=n.default.chain(e.columns).reject(n.default.property("hidden")).map(n.default.property("name")).value(),i=n.default.chain(e.columns).filter(n.default.property("locked")).map(n.default.property("name")).value(),a={"column.lock":i,"column.in":t};return e.selectable&&(t.unshift("checkbox"),i.unshift("checkbox")),n.default.has(e.columnShifter,"totalColumns")&&(a["column.take"]=e.columnShifter.totalColumns),a},ColumnShifter:function(){},ColumnTemplate:function(e){return{"column.template":n.default.reduce(e.columns,function(e,t){return t.headerTemplate&&(e[t.name]=t.headerTemplate),e},{})}},ColumnHoverText:function(){},Editable:function(e){var t={};n.default.each(e.columns,function(e){if(e.editable){var i=t[e.name]={condition:function(){return!0},editor:s.default};n.default.isFunction(e.editable)?i.condition=e.editable:n.default.isObject(e.editable)&&n.default.extend(i,e.editable)}});var i=n.default.result(e.editable,"tooltipText","Edit"),a=n.default.result(e.editable,"iconClasses",["glyphicon","glyphicon-pencil"]);return{"column.editable":t,"editable.tooltip.text":i,"editable.icon.class":a}},MemoryQueryable:function(e){return{"column.sortable":n.default.reduce(e.columns,function(e,t){return t.sortable&&(e[t.name]=t.sortable),e},{})}},Odata:function(e){return n.default.extend(n.default.pick(e.dataSource,["url","skip","take","filter","orderby","select"]))},PropertyTemplate:function(e){return{"property.template":n.default.reduce(e.columns,function(e,t){return t.template&&(e[t.name]=t.template),e},{})}},RowIndex:function(){},Row:function(e){return{"row.classes":n.default.result(e.rows,"classes")}},RowCheckbox:function(e){return{"row.check.id":n.default.chain(e).result("dataSource").result("schema").result("key","rowIndex").value(),"row.check.single":"single"===e.selectable,"column.checked":"checkbox","row.check.allow":function(e){var t=n.default.chain(e).result("$metadata").result("type").value();return!n.default.contains(["segmentation","aggregate"],t)}}},Page:function(e){return{"page.size":e.pageable.pageSize,"page.number":0}},Sink:function(e){var t=n.default.result(e.dataSource,"data",[]);return n.default.isArray(t)?{seed:t}:t instanceof a.default.Collection?{seed:t.toJSON()}:void 0}};t.default=function(e){return e("projection",["config"],function(e){var t=null;function i(i){var n=new(0,r.default[i])(c[i](e));t=t?t.pipe(n):n}var s=e.dataSource.type||"memory";if("js-data"===s)i("JSData");else if("memory"===s){if(i("Sink"),i("MemoryQueryable"),e.dataSource.data instanceof a.default.Collection){var l=!1;e.dataSource.data.on("all",function(){l||(l=!0,window.setTimeout(function(){t.set("seed",e.dataSource.data.toJSON()),l=!1},0))})}}else{if("odata"!==s)throw new Error('dataSource.type "'+e.dataSource.type+'" is not supported');i("Odata")}var d=t;return i("A11y"),i("Columns"),i("Map"),e.aggregate&&i("AggregateRow"),i("ColumnQueryable"),i("ColumnI18n"),n.default.has(e.columnShifter,"totalColumns")&&i("ColumnShifter"),i("ColumnTemplate"),i("ColumnHoverText"),i("PropertyTemplate"),e.selectable&&(i("RowIndex"),i("RowCheckbox")),(e.rows||e.selectable)&&i("Row"),n.default.has(e.pageable,"pageSize")&&i("Page"),n.default.find(e.columns,n.default.property("editable"))&&i("Editable"),(0,o.delegateEvents)({from:d,to:t,events:["update:beginning","update:finished"]}),t})}},function(e,t,i){"use strict";e.exports={A11y:i(19),AggregateRow:i(22),Base:i(20),ColumnI18n:i(23),ColumnQueryable:i(25),ColumnShifter:i(26),ColumnTemplate:i(27),EditableString:i(28),Editable:i(30),JSData:i(39),Map:i(40),MemoryQueryable:i(41),Memory:i(42),Mock:i(43),Odata:i(44),Page:i(45),PropertyTemplate:i(46),RowCheckbox:i(47),Row:i(49),RowTriStateCheckboxProjection:i(50),RowIndex:i(52),Sink:i(53),ColumnHoverText:i(54),Columns:i(55).default}},function(e,t,i){var n,a;n=[i(3),i(8),i(20)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"a11y.selection.selectAllLabel":"Select All"},name:"a11y",update:function(t){var i=this.get("a11y.selection.selectAllLabel");n.__super__.update.call(this,t)&&this.patch({"a11y.selection.uniqueId":e.uniqueId().concat("-"),"a11y.selection.selectAllLabel":e.isString(i)?i:"Select All"})}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(21)],void 0===(a=function(e,t,i){var n=t.Model.extend({initialize:function(){e.bindAll(this,"onSrcUpdate","beforeSet","afterSet","update"),this.data=new i,this.src=void 0,this.on("change",function(e){this.update({model:e})}.bind(this))},constructor:function(){this.localKeys=e.keys(this.defaults),n.__super__.constructor.apply(this,arguments)},pipe:function(e){return e&&e.setSrc(this),e},setSrc:function(e){this.src=e,this.src&&(this.src.data.off("change",this.onSrcUpdate),this.src.off("all",this.bubble)),this.src&&(this.src.data.on("change",this.onSrcUpdate),this.src.on("all",this.bubble)),this.update()},patch:function(t){var i=this.src?this.src.data.toJSON():{};(t=e.isObject(t)?t:{}).error&&console.warn(t.error.stack||t.error),this.data.set(e.defaults(t,this.attributes,i))},beforeSet:function(){},afterSet:function(){},onSrcUpdate:function(){this.update()},bubble:function(){var t=e.first(arguments);if(e.has(this.events,t)){var i=this[this.events[t]];e.isFunction(i)&&i.apply(this,e.rest(arguments))}this.src&&this.src.bubble.apply(this.src,e.toArray(arguments))},update:function(e){return e=e||{},!!this.src&&(!e.deep||(this.src.update(e),!1))}});return n.prototype.set=function(t,i,a){var r={};e.isString(t)?r[t]=i:(r=t,a=i);var o=e.pick(r,this.localKeys),s=e.omit(r,this.localKeys);this.beforeSet(o,s);var l=n.__super__.set.call(this,o,a);return e.size(s)&&this.src&&this.src.set(s,a),this.afterSet(),l},n.keyRegex=/^([\w_\-$]+):(.+)$/,n.prototype.get=function(t){var i=n.keyRegex.exec(t);if(!i){var a=n.__super__.get.apply(this,arguments);return e.isUndefined(a)&&this.src&&(a=this.src.get.apply(this.src,arguments)),a}var r=i[1],o=i[2];switch(r){case"projection":var s=this;do{if(s.name===o)return s;s=s.src}while(s);break;default:throw new Error("unknown special get key type")}},n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8)],void 0===(a=function(e,t){return t.Model.extend({defaults:{value:[],select:null,count:0,aggregate:[]}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20)],void 0===(a=function(e,t,i){var n=function(t,i){var n=t(i);return e.each(n,function(t){t.$metadata=e.extend({},t.$metadata,{type:"aggregate"})}),n},a=i.extend({defaults:{"aggregate.top":null,"aggregate.bottom":null},name:"aggregate-row",update:function(t){var i,r,o,s,l;a.__super__.update.call(this,t)&&(i=this.src.data.get("value"))&&(r=this.get("aggregate.top"),s=this.get("aggregate.bottom"),o=e.isFunction(r)?n(r,this.src.data):null,l=e.isFunction(s)?n(s,this.src.data):null,o&&(i=e.flatten(o).concat(i)),l&&(i=i.concat(e.flatten(l))),this.patch({value:i}))}});return a}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"column.i18n":{"":function(e){return e}},"subColumn.i18n":{}},name:"column-i18n",beforeSet:function(t){e.has(t,"column.i18n")&&(e.isObject(t["column.i18n"])||(t["column.i18n"]=this.defaults["column.i18n"]))},update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data,a=this.get("column.i18n"),r=this.get("subColumn.i18n"),o=i.get("columns")||{},s=a[""],l={};e.each(e.keys(o),function(t){var i=a[t];e.isUndefined(i)&&(i=s),l[t]=e.defaults({$text:e.isFunction(i)?i(t):i,property:t},o[t]),l[t].config=l[t].config||{},l[t].config.subColTitle=r[t]}),this.patch({columns:l})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3)],void 0===(a=function(e){return{from:function(t){var i=e.first(t);return e.keys(i||{})}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"column.skip":0,"column.take":Number.MAX_VALUE,"column.lock":[],"column.filter":function(){return!0},"column.in":void 0},name:"column-queryable",update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data,a=this.get("column.take"),r=this.get("column.skip"),o=this.get("column.lock")||[],s=this.get("column.filter"),l=this.get("column.in"),c=e.size(i.get("columns"))?e.map(i.get("columns"),function(e){return e.property}):i.get("select"),d=e.isFunction(s)?e.filter(l||c,s):l||c,u=i.get("columns"),p=e.chain(d).difference(o).value(),g=p;e.isNumber(a)||(a=Number.MAX_VALUE),a=Math.max(a-e.size(o),0),e.size(p)<r&&(r=0);var h=e.first(p,r);r&&(g=e.rest(p,r));var m=e.rest(g,a);g=e.union(o,e.first(g,a)),e.each(g,function(t){u[t]||(u[t]={property:t}),u[t].$lock=e.contains(o,t)}),this.patch({select:g,"columns.skipped":h,"columns.remaining":m,"column.skip":r})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{},name:"column-shifter",events:{"layout:click:header":"thClick"},update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data,a=i.get("columns"),r=i.get("select"),o=i.get("columns.skipped"),s=i.get("columns.remaining"),l=Math.max(e.findIndex(r,function(e){return a[e]&&!a[e].$lock}),0),c=e.size(o),d=e.size(s),u={property:"column.skip.less",$metadata:{"attr.head":{class:["skip-less"]},enabled:c},$html:'<span class="glyphicon glyphicon-triangle-left" />'},p={property:"column.skip.more",$metadata:{"attr.head":{class:["skip-more"]},enabled:d},$html:'<span class="glyphicon glyphicon-triangle-right" />'};c||u.$metadata["attr.head"].class.push("disabled"),d||p.$metadata["attr.head"].class.push("disabled"),r.splice(l,0,u.property),a[u.property]=e.defaults(u,a[u.property]),r.push(p.property),a[p.property]=e.defaults(p,a[p.property]),this.patch({columns:a,select:r})}},thClick:function(t,i){if(e.has(i.column,"$metadata")&&i.column.$metadata.enabled){var n=0,a=this.get("column.skip");switch(i.property){case"column.skip.less":n=e.isNumber(a)?Math.max(a-1,0):0;break;case"column.skip.more":n=e.isNumber(a)?a+1:0}this.set({"column.skip":n})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(20)],void 0===(a=function(e,t){"use strict";var i=t.extend({defaults:{"column.template":{}},name:"column-template",update:function(t){if(i.__super__.update.call(this,t)){var n=this.src.data,a=this.get("column.template"),r=n.get("columns");e.each(r,function(t,i){var n=e.clone(t),o=a[i];e.has(a,i)&&(n.$html=e.isFunction(o)?o(n):o),r[i]=n}),this.patch({columns:r})}}});return i}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(7),i(20),i(29)],void 0===(a=function(e,t,i,n){"use strict";var a=i.extend({defaults:{"column.editable.string":{}},name:"column-editable-string",update:function(t){if(a.__super__.update.call(this,t)){var i=this.src.data,r=this.get("column.editable.string"),o=e.map(i.get("value"),function(t){var i=e.clone(t);return e.each(r,function(t,a){if(e.has(i,a)){if(!e.isObject(i[a])){var r=new Object(i[a]);e.isUndefined(i[a])&&(r.$undefined=!0),e.isNull(i[a])&&(r.$null=!0),i[a]=r}var o=i[a].$undefined||i[a].$null?t.defaultValue:i[a];i[a].$html=n({defaultValue:o})}}),i});this.patch({value:o})}}});return a}.apply(t,n))||(e.exports=a)},function(e,t,i){var n=i(10);e.exports=function(e){var t=[],i=e||{};return function(e){t.push('<input type="text"'+n.attr("value",e,!0,!0)+' style="width:100%" class="grid-text-input">')}.call(this,"defaultValue"in i?i.defaultValue:"undefined"!==typeof defaultValue?defaultValue:void 0),t.join("")}},function(e,t,i){var n,a;n=[i(3),i(7),i(20),i(31),i(32),i(35)],void 0===(a=function(e,t,i,n,a){"use strict";function r(t){return!t||t.$metadata&&e.contains(["aggregate","segmentation"],t.$metadata.type)}return i.extend({defaults:{"column.editable":[],"editable.icon.class":["glyphicon","glyphicon-pencil"],"editable.tooltip.text":"Edit","editable.template":n},name:"column-editable",events:{"layout:click:cell":"tdClick"},beforeSet:function(t){var i=function(){return!0};if(e.has(t,"column.editable")){var n=t["column.editable"],a={},r={};e.isArray(n)?e.each(n,function(t){e.isString(t)?r[t]=i:e.isObject(t)&&e.isString(t.name)&&(r[t.name]=e.isFunction(t.condition)?t.condition:i),a[t]=null}):e.each(n,function(t,n){e.isFunction(t)?(r[n]=i,a[n]=t):e.isObject(t)&&(r[n]=t.condition,a[n]=t.editor)}),this.viewConfig=a,this.isEditable=function(t,i){return e.isFunction(r[t])&&r[t](i)}}},update:function(t){if(i.prototype.update.call(this,t)){var n=this.src.data,a=n.get("columns"),o=this.get("editable.icon.class"),s=this.get("editable.tooltip.text"),l=this.get("editable.template");e.each(this.viewConfig,function(t,i){var n=a[i]||{property:i},r=n.$metadata=n.$metadata||{},o=r["attr.body"]=r["attr.body"]||{},s=o.class||[];e.isString(s)&&(s=s.split(/\s+/)),o.class=e.union(s,["grid-editable-cell"]),a[i]=n});var c=e.map(n.get("value"),function(t){return r(t)?t:e.mapObject(t,function(i,n){if(this.isEditable(n,t)){var a=null,r=null;e.isObject(i)?a=i.$html:(r=i,i={}),i.$html=l({$html:a,text:r,tooltipText:s,classes:o})}return i},this)},this);this.patch({value:c})}},tdClick:function(e,i){var n=this,o=null,s=i.column.$metadata,l=s&&s.map||i.property;if(!r(i.model)&&this.isEditable(i.property,i.model)&&"A"!==e.target.tagName&&0===t(e.target).closest(".is-not-trigger").length){o=i.grid.options.get("schema");var c=this.viewConfig[i.property]||a,d=i.grid.layout.container.offset(e.currentTarget),u=t(e.currentTarget);d.right=d.left+u.outerWidth(),d.bottom=d.top+u.outerHeight(),c({model:i.model,schema:o,position:d,property:l,onSubmit:function(e){n.trigger("edit",e,l)}})}}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r,o){i.push("<div"+n.attr("title",o,!0,!0)+n.cls(["grid-edit-icon",a],[null,!0])+"></div>"+(null==(t=e)?"":t)+n.escape(null==(t=r)?"":t))}.call(this,"$html"in a?a.$html:"undefined"!==typeof $html?$html:void 0,"classes"in a?a.classes:"undefined"!==typeof classes?classes:void 0,"text"in a?a.text:"undefined"!==typeof text?text:void 0,"tooltipText"in a?a.tooltipText:"undefined"!==typeof tooltipText?tooltipText:void 0),i.join("")}},function(e,t,i){var n,a;n=[i(7),i(33),i(8),i(3),i(34)],void 0===(a=function(e,t,i,n,a){var r=i.View.extend({events:{"click .save":function(){this.trigger("save",this.model)},"click .cancel":function(){this.trigger("cancel")},"change .editor":function(e){this.setValue(e.target.value)},"click form":function(e){e.stopPropagation()},"submit form":function(){return this.trigger("save",this.model),!1}},initialize:function(e){this.position=e.position,this.model=e.model,this.property=e.property,this.saveButtonText=e.saveButtonText||"Save",this.cancelButtonText=e.cancelButtonText||"Cancel"},getValue:function(){if(this.property&&n.isObject(this.property)){var e=this.property,t=e.name;return(0,e.value)(this.model)[t]}return(this.model||{})[this.property]},setValue:function(e){if(this.property&&n.isObject(this.property)){var t=this.property,i=t.name;(0,t.value)(this.model)[i]=e}else this.model[this.property]=e},render:function(){var t=this,i=this.getValue();return this.$el.html(a({value:i,saveButtonText:this.saveButtonText,cancelButtonText:this.cancelButtonText})),this.$el.css({position:"absolute"}),this.position.left?this.$el.css({left:this.position.left}):this.$el.css({right:this.position.right}),this.position.top?this.$el.css({top:this.position.top}):this.$el.css({bottom:this.position.bottom}),this.dismiss=function(){this.trigger("cancel")}.bind(this),window.setTimeout(function(){e(window).on("click",t.dismiss)},0),this},remove:function(){e(window).off("click",this.dismiss),i.View.prototype.remove.apply(this,arguments)},focus:function(){this.$el.find(".editor").select()}});return function(e){var t=new r(e);document.body.appendChild(t.render().el),t.focus(),t.on("save",function(i){t.remove(),e.onSubmit&&e.onSubmit(i)}),t.on("cancel",function(){t.remove(),e.onCancel&&e.onCancel()})}}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=n},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r){i.push('<form role="dialog" class="form-inline grid-popup-editor"><input type="text"'+n.attr("value",r,!0,!0)+' class="form-control editor">&nbsp<button type="button" class="btn btn-primary save">'+n.escape(null==(t=a)?"":t)+'</button>&nbsp<button type="button" class="btn btn-default cancel">'+n.escape(null==(t=e)?"":t)+"</button></form>")}.call(this,"cancelButtonText"in a?a.cancelButtonText:"undefined"!==typeof cancelButtonText?cancelButtonText:void 0,"saveButtonText"in a?a.saveButtonText:"undefined"!==typeof saveButtonText?saveButtonText:void 0,"value"in a?a.value:"undefined"!==typeof value?value:void 0),i.join("")}},function(e,t,i){var n=i(36);"string"===typeof n&&(n=[[e.id,n,""]]);i(38)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){(e.exports=i(37)()).push([e.id,"table.grid td.grid-editable-cell {\n  position: relative;\n}\ntable.grid td.grid-editable-cell .grid-edit-icon {\n  display: none;\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  font-size: 10px;\n}\ntable.grid td.grid-editable-cell:hover .grid-edit-icon {\n  display: block;\n}\n",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"===typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var r=this[a][0];"number"===typeof r&&(n[r]=!0)}for(a=0;a<t.length;a++){var o=t[a];"number"===typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(e,t,i){var n={},a=function(e){var t;return function(){return"undefined"===typeof t&&(t=e.apply(this,arguments)),t}},r=a(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),o=a(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,l=0,c=[];function d(e,t){for(var i=0;i<e.length;i++){var a=e[i],r=n[a.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](a.parts[o]);for(;o<a.parts.length;o++)r.parts.push(m(a.parts[o],t))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(m(a.parts[o],t));n[a.id]={id:a.id,refs:1,parts:s}}}}function u(e){for(var t=[],i={},n=0;n<e.length;n++){var a=e[n],r=a[0],o={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(o):t.push(i[r]={id:r,parts:[o]})}return t}function p(e,t){var i=o(),n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function g(e){e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function h(e){var t=document.createElement("style");return t.type="text/css",p(e,t),t}function m(e,t){var i,n,a;if(t.singleton){var r=l++;i=s||(s=h(t)),n=v.bind(null,i,r,!1),a=v.bind(null,i,r,!0)}else e.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa?(i=function(e){var t=document.createElement("link");return t.rel="stylesheet",p(e,t),t}(t),n=function(e,t){var i=t.css,n=t.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(a),r&&URL.revokeObjectURL(r)}.bind(null,i),a=function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=h(t),n=function(e,t){var i=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}.bind(null,i),a=function(){g(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){"undefined"===typeof(t=t||{}).singleton&&(t.singleton=r()),"undefined"===typeof t.insertAt&&(t.insertAt="bottom");var i=u(e);return d(i,t),function(e){for(var a=[],r=0;r<i.length;r++){var o=i[r];(s=n[o.id]).refs--,a.push(s)}e&&d(u(e),t);for(r=0;r<a.length;r++){var s;if(0===(s=a[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete n[s.id]}}}};var f=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}();function v(e,t,i,n){var a=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}},function(e,t,i){var n,a;n=[i(33),i(3),i(20),i(24)],void 0===(a=function(e,t,i,n){return i.extend({defaults:{"jsdata.query":void 0,"jsdata.entity":void 0,"jsdata.options":void 0,skip:void 0,take:void 0,filter:void 0,orderby:[],select:[]},name:"jsdata",update:function(){var e=this.get("jsdata.entity"),i=t.defaults(this.get("jsdata.options"),{all:!0}),a={};this.p$fetchData||this.trigger("update:beginning");var r=this.get("take");r&&(a.limit=r);var o=this.get("skip");o&&(a.offset=o);var s=this.get("filter");s&&(a.where=s);var l=this.get("jsdata.query");l&&(a.query=l);var c=this.get("orderby");c&&c.length&&(a.orderBy=t.reduce(c,function(e,i){return t.each(i,function(t,i){e.push([i,t>0?"ASC":"DESC"])}),e},[]));var d=this.p$fetchData=e.findAll(a,i).then(function(e){if(this.p$fetchData===d){var i={value:e,count:e.totalCount,select:n.from(e),error:void 0};t.has(e,"raw")&&(i.rawValue=e.raw),this.patch(i)}}.bind(this)).catch(function(e){this.p$fetchData===d&&this.patch({error:e})}.bind(this)).finally(function(){this.p$fetchData===d&&(this.trigger("update:finished",this.data.get("error")),this.p$fetchData=null)}.bind(this))}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i,n){var a=i.extend({defaults:{map:e.identity},name:"map",update:function(t){if(a.__super__.update.call(this,t)){var i=this.src.data,r=this.get("map"),o=e.isFunction(r)?e.map(i.get("value"),r):i.get("value");o=e.flatten(o),this.patch({value:o,select:e.without(n.from(o),"$metadata")})}}});return a}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i,n){var a=i.extend({defaults:{skip:0,take:Number.MAX_VALUE,filter:function(){return!0},orderby:[],select:[],"column.sortable":{}},name:"map-queryable",beforeSet:function(t){e.has(t,"filter")&&(e.isFunction(t.filter)||(t.filter=this.defaults.filter))},update:function(t){if(a.__super__.update.call(this,t)){var i=this.src.data,r=e.chain(this.get("orderby")).first().pairs().first().value(),o=e.first(r),s=e.last(r),l=e.chain(i.get("value")).filter(this.get("filter")),c=this.get("column.sortable")[o];o&&(e.isFunction(c)?l=e.chain(c(l.value(),s)):(l=l.sortBy(o),-1===s&&(l=l.reverse()))),l=l.rest(this.get("skip")).first(this.get("take")).value();var d=this.get("select");e.size(d)||(d=n.from(l)),this.patch({value:l,select:d})}}});return a}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(20)],void 0===(a=function(e){return e.extend({defaults:{seed:[]},update:function(){this.trigger("update:beginning");var e=this.get("seed");this.data.set({value:e,count:e.length}),this.trigger("update:finished")}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20)],void 0===(a=function(e,t,i){var n=["troubles","kahlua","poncho","suzie","baheyya"],a=0;return i.extend({defaults:{n:5e3},name:"mock",update:function(){this.trigger("update:beginning");var t=[];e(this.get("n")).times(function(){t.push(function(){var t=n[e.random(0,n.length-1)],i=n[e.random(0,n.length-1)];return{index:a++,name:t+" "+i,age:e.random(0,22)}}())}),this.data.set({value:t,count:t.length}),this.trigger("update:finished")}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(33),i(3),i(8),i(7),i(20),i(24)],void 0===(a=function(e,t,i,n,a,r){return a.extend({defaults:{verb:"get",url:void 0,skip:void 0,take:void 0,filter:void 0,orderby:[],select:[]},name:"odata",update:function(){this.p$fetchData||this.trigger("update:beginning");var i=this.get("url"),a={url:i=t.isFunction(i)?i():i,$format:"json",$count:!0},o=this.get("take");o&&(a.$top=o);var s=this.get("skip");s&&(a.$skip=s);var l=this.get("orderby");if(t.size(l)){var c=t.first(l),d=t.keys(c)[0],u=c[d];a.$orderby=d+" "+(u>0?"asc":"desc")}var p=this.p$fetchData=new e(function(e,i){n.getJSON(a.url,t.omit(a,"url")).success(e).error(function(e,t,n){i(new Error(n))})}).then(function(e){if(p===this.p$fetchData){var t={value:e.value,rawValue:e,select:r.from(e.value),count:e["@odata.count"],error:void 0};this.patch(t)}}.bind(this)).catch(function(e){p===this.p$fetchData&&this.patch({error:e})}.bind(this)).finally(function(){p===this.p$fetchData&&(this.trigger("update:finished",this.data.get("error")),this.p$fetchData=null)}.bind(this))}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"page.size":20,"page.number":0},name:"page",beforeSet:function(t,i){var n=e.has(t,"page.size")?t["page.size"]:this.get("page.size"),a=e.has(t,"page.number")?t["page.number"]:this.get("page.number");n=Math.max(n,0),a=Math.max(a,0),e.extend(i,{take:n,skip:n*a})},update:function(e){var t=this.src.data,i=Math.max(this.get("page.size"),0),a=Math.max(1,t.get("count")),r=Math.max(this.get("page.number"),0),o=Math.ceil(a/i),s=Math.min(r,o-1);(e=e||{}).deep&&this.src&&this.src.set({take:i,skip:i*s},{silent:!0}),n.__super__.update.call(this,e)&&this.patch({"page.count":o})}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"property.template":{}},name:"property-template",update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data,a=this.get("property.template"),r=e.map(i.get("value"),function(t){var i=e.clone(t);return e.each(a,function(n,a){if(e.has(i,a)){var r=n({model:t,property:a});if(!e.isObject(i[a])){var o=new Object(i[a]);e.isUndefined(i[a])&&(o.$undefined=!0),e.isNull(i[a])&&(o.$null=!0),i[a]=o}i[a].$html=r}}),i});this.patch({value:r})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(48)],void 0===(a=function(e,t,i,n){"use strict";var a=i.extend({defaults:{"column.checked":"checkbox","row.check.id":"Id","row.check.list":[],"row.check.checked.all":!1,"row.check.single":!1,"row.check.allow":function(){return!0}},name:"row-check",events:{"layout:click:cell":"tdClick","layout:click:header":"thClick"},reset:function(){this.set({"row.check.checked.all":!1,"row.check.list":[]})},update:function(t){if(a.__super__.update.call(this,t)){var i=this.src.data,r=this.get("row.check.id"),o=i.get("value"),s=e.pluck(o,r),l=e.intersection(this.get("row.check.list"),s),c=e.object(l,[]),d=this.get("column.checked"),u=e.clone(i.get("columns")),p=o.length>0,g=!1,h=this.get("row.check.allow"),m=e.find(u,function(e){return e.property===d}),f=this.get("row.check.single");if(this.set("row.check.list",l,{silent:!0}),o=e.map(o,function(t){var a=e.clone(t),o=!1,s=!0;if(e.isFunction(h)?h(a):h){o=e.has(c,a[r]),p=p&&o,s=!1,g=!0;var l=(i.get("a11y.selection.uniqueId")||"").concat(a[r]);a[d]=e.extend({},a[d],{$html:n(e.pick({type:f?"radio":"checkbox",checked:o,disabled:s,labelledId:l},Boolean))})}return a}),!e.isUndefined(m))if(f)m.$html="<span/>";else{var v=0===e.size(s),b=i.get("a11y.selection.selectAllLabel");g?(m.$html=n(e.pick({type:"checkbox",checked:p,disabled:v,labelString:b},Boolean)),p||(this.attributes["row.check.checked.all"]=!1)):m.$html=n(e.pick({type:"checkbox",checked:this.get("row.check.checked.all"),disabled:v,labelString:b},Boolean))}this.patch({value:o,columns:u,"row.check.allow":h})}},tdClick:function(t,i){var n=this.get("column.checked"),a=this.get("row.check.single");if(i.property===n){var r=this.get("row.check.list"),o=i.model[this.get("row.check.id")];a?this.set({"row.check.list":[o]}):this.set({"row.check.list":i.checked?r.concat([o]):e.without(r,o)}),this.update()}},thClick:function(t,i){var n=this.get("column.checked");if(i.property===n){var a=[];if(i.checked){var r=this.get("row.check.id"),o=this.get("row.check.allow");a=e.chain(this.data.get("value")).filter(function(t){return(e.isFunction(o)?o(t):o)&&!e.isUndefined(t[r])}).map(function(e){return e[r]}).value()}this.set({"row.check.list":a,"row.check.checked.all":i.checked}),this.update()}}});return a}.apply(t,n))||(e.exports=a)},function(e,t,i){var n=i(10);e.exports=function(e){var t=[],i=e||{};return function(e,i,a,r,o){t.push("<input"+n.attr("type",o,!0,!0)+n.attr("checked",e,!0,!0)+n.attr("disabled",i,!0,!0)+n.attr("aria-labelledby",r,!0,!0)+n.attr("aria-label",a,!0,!0)+' class="column-selection">')}.call(this,"checked"in i?i.checked:"undefined"!==typeof checked?checked:void 0,"disabled"in i?i.disabled:"undefined"!==typeof disabled?disabled:void 0,"labelString"in i?i.labelString:"undefined"!==typeof labelString?labelString:void 0,"labelledId"in i?i.labelledId:"undefined"!==typeof labelledId?labelledId:void 0,"type"in i?i.type:"undefined"!==typeof type?type:void 0),t.join("")}},function(e,t,i){var n,a;n=[i(3),i(8),i(20)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{"row.classes":{}},name:"row",update:function(t){var i=this;if(n.__super__.update.call(this,t)){var a={};e.each(this.get("row.check.list"),function(e){a[e]=!0});var r=this.src.data,o=r.get("value");e.each(o,function(t){var i=e.chain(t).result("$metadata").result("type").value();e.isUndefined(i)&&(t.$metadata=e.extend({},t.$metadata,{type:"row"}))}),e.each(o,function(t){var n=i.get("row.classes"),o=i.get("row.check.id"),s=r.get("row.check.allow"),l=[];a[t[o]]&&l.push("row-selected");var c=e.chain(t).result("$metadata").result("attr").result("class").value();c&&l.push(c),e.each(n,function(i,n){var a=e.chain(t).result("$metadata").result("type").value();e.isFunction(i)&&i(t,a)&&l.push(n)});var d=e.chain(t).result("$metadate").result("attr").result("id").value();if(e.isFunction(s)?s(t):s)var u=r.get("a11y.selection.uniqueId"),p=t[o]||d,g=u.concat(p),h="row";e.extend(t,{$metadata:{attr:e.pick({class:e.flatten(l).join(" "),id:g,role:h},Boolean)}})}),this.patch({value:o})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(51)],void 0===(a=function(e,t,i,n){"use strict";var a={};a.indeterminateToChecked=function(){var t={unchecked:function(e){return e?"checked":"indeterminate"},checked:e.constant("unchecked"),indeterminate:e.constant("checked")};return function(i,n){return e.has(t,n)&&t[n](i)||"unchecked"}}(),a.indeterminateToUnchecked=function(){var t={unchecked:e.constant("checked"),checked:function(e){return e?"unchecked":"indeterminate"},indeterminate:e.constant("unchecked")};return function(i,n){return e.has(t,n)&&t[n](i)||"unchecked"}}(),a.indeterminateToCheckedFullCycle=function(e){return a.indeterminateToChecked(!1,e)},a.indeterminateToUncheckedFullCycle=function(e){return a.indeterminateToUnchecked(!1,e)},a.indeterminateToCheckedShortCycle=function(e){return a.indeterminateToChecked(!0,e)},a.indeterminateToUncheckedShortCycle=function(e){return a.indeterminateToUnchecked(!0,e)};var r=i.extend({defaults:{"column.checked":"checkbox","row.check.id":"Id","row.check.map":{},"row.check.all":{state:"unchecked"},"row.check.allow":function(){return!0},"row.check.click-anywhere":!1,"row.check.transition":a.indeterminateToCheckedShortCycle,"row.check.all.transition":a.indeterminateToCheckedShortCycle,"row.check.template":n},name:"row-check",events:{"layout:click:cell":"tdClick","layout:click:header":"thClick"},reset:function(){this.set({"row.check.checked.all":!1,"row.check.map":{}})},update:function(t){if(r.__super__.update.call(this,t)){var i=this.get("row.check.id"),n=e.pluck(this.src.data.get("value"),i),a=this.get("row.check.map"),o=this.get("column.checked"),s=e.clone(this.src.data.get("columns")),l=e.object(["unchecked","checked","indeterminate"],[0,0,0]),c=!1,d=this.get("row.check.allow"),u=e.find(s,function(e){return e.property===o}),p=this.get("row.check.template"),g=e.map(this.src.data.get("value"),function(t){var n=e.clone(t),r=a[n[i]]||{state:"unchecked"},s=!0,u=e.isFunction(d)?d(n):d;return l[r.state]++,u&&(s=!1,c=!0),n[o]=e.extend({},n[o],{$html:p({checkState:r.state,disabled:s})}),n});if(!e.isUndefined(u)){var h=0===e.size(n);if(c){var m=function(t,i){return e.findKey(t,function(e){return e===i})||"unchecked"}(l,n.length);u.$html=p({checkState:m,disabled:h}),this.attributes["row.check.all"]=e.extend(this.attributes["row.check.all"],{state:m})}else u.$html=p({checkState:this.get("row.check.all").state,disabled:h})}this.patch({value:g,columns:s})}},tdClick:function(t,i){var n=this.get("column.checked"),a=this.get("row.check.click-anywhere");if(i.property===n||a){var r=e.clone(this.get("row.check.map")),o=i.model[this.get("row.check.id")],s=this.get("row.check.transition"),l=e.extend({id:o,transition:s,state:"unchecked"},r[o]);l.state=l.transition(l.state),r[o]=l,this.set({"row.check.map":r}),t.preventDefault(),t.stopImmediatePropagation()}},thClick:function(t,i){var n=this.get("column.checked");if(i.property===n){var a=e.clone(this.get("row.check.map")),r=this.get("row.check.id"),o=this.get("row.check.all"),s=o.state,l=this.get("row.check.all.transition"),c=this.get("row.check.transition");o.state=l(s),a=e.object(this.data.get("value").map(function(t){var i=t[r];return[i,e.extend({id:i,transition:c},a[i],{state:o.state})]})),this.set({"row.check.map":a,"row.check.all":o}),t.stopImmediatePropagation()}}});function o(e,t,i,n){this.added=e||{},this.changed=t||{},this.removed=i||{},this.unchanged=n||{}}function s(t,i,n){n=n||{state:"unchecked"};var a=new o;return e.keys(t).forEach(function(e){var n=t[e],r=i[e];r?n.state===r.state?a.unchanged[e]=r:a.changed[e]={before:n,after:r}:a.removed[e]=n}),e.keys(i).forEach(function(e){var r=i[e];t[e]||n.state===r.state||(a.added[e]=r)}),a}function l(t,i){i=i||{state:"unchecked"};var n=[],a=[],r=[];return e.keys(t).forEach(function(e){var o=t[e];"checked"===o.state&&o.state!==i.state?n.push(o):"unchecked"===o.state&&o.state!==i.state?r.push(o):o.state!==i.state&&a.push(o)}),{checked:n,unchecked:r,indeterminate:a}}return o.prototype.hasChanges=function(){return e.keys(this.changed).length+e.keys(this.added).length>0},r.CheckTransitionRule=a,r.fullStatCheckMap=function(t,i,n){return e.extend(l(i,n),s(t,i,n))},r.statCheckMap=l,r.diffCheckMap=s,r}.apply(t,n))||(e.exports=a)},function(e,t,i){var n=i(10);e.exports=function(e){var t=[],i=e||{};return function(e){var i=[].concat("indeterminate"===e?["glyphicon","glyphicon-minus"]:"checked"===e?["glyphicon","glyphicon-ok"]:[]);t.push('<div class="column-tri-state-checkbox"><span'+n.cls([i],[!0])+"></span></div>")}.call(this,"checkState"in i?i.checkState:"undefined"!==typeof checkState?checkState:void 0),t.join("")}},function(e,t,i){var n,a;n=[i(3),i(8),i(20),i(24),i(21)],void 0===(a=function(e,t,i){var n=i.extend({defaults:{},name:"row-index",update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data,a=this.get("skip"),r=e.map(i.get("value"),function(t,i){var n=e.clone(t);return n.rowIndex=i+(e.isFinite(a)?a:0)+1,n});this.patch({value:r})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(20),i(24)],void 0===(a=function(e,t,i){return t.extend({defaults:{seed:null},name:"sink",update:function(){var t;if(t=this.get("seed")){var n=i.from(t);this.patch({value:t,select:n,count:e.size(t)})}}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8),i(20)],void 0===(a=function(e,t,i){var n=i.extend({name:"column-hovertext",update:function(t){if(n.__super__.update.call(this,t)){var i=this.src.data.get("columns");e.each(i,function(t){t.$metadata=e.result(t,"$metadata",{}),t.$metadata["attr.head"]=e.result(t.$metadata,"attr.head",{}),t.$metadata["attr.head"].title=e.result(t.config,"hoverText")||e.result(t.config,"title")||""}),this.patch({columns:i})}}});return n}.apply(t,n))||(e.exports=a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(20),r=(n=a)&&n.__esModule?n:{default:n};var o=r.default.extend({defaults:{columns:{}},name:"columns",update:function(e){r.default.prototype.update.call(this,e)&&this.patch({columns:this.get("columns")})}});t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delegateEvents=function(e){var t=e.from,i=e.to,n=e.events;r.default.each(n,function(e){return t.on(e,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return i.trigger.apply(i,[e].concat(n))})})};var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(3)),a=s(i(58)),r=s(i(5)),o=i(56);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return e("gridView",["config","projection","renderers"],function(e,t,i){var s=new a.default({projection:t,el:e.el,container:n.default.chain(e).result("scrollable").result("fixedHeader").result("container").value(),schema:e.dataSource.schema,Layout:r.default.TableLayout.partial({renderers:i,template:r.default.templates.table,hideHeaders:e.hideHeaders,$metadata:e.layoutOptions||{}})});return(0,o.delegateEvents)({from:t,to:s,events:["update:beginning","update:finished"]}),s})}},function(e,t,i){var n,a;n=[i(3),i(8),i(59),i(60),i(62)],void 0===(a=function(e,t,i,n,a){return t.View.extend({initialize:function(t){t=t||{},this.options=new i(t);var r=function(e){if(e&&window!==e&&a.isValidContainer(e))return new a({el:e});return new n}(t.container);this.layout=new t.Layout({el:this.el,grid:this,container:r}),this.projection=t.projection,this.projection.data.on("change",function(){this.trigger.apply(this,["change:data"].concat(e.toArray(arguments)))}.bind(this)),this.options.on("change",function(){this.trigger.apply(this,["change:options"].concat(e.toArray(arguments)))}.bind(this)),this.projection.on("all",function(){this.trigger.apply(this,["data:"+e.first(arguments)].concat(e.rest(arguments)))}.bind(this)),this.layout.on("all",function(){var t=["layout:"+e.first(arguments)].concat(e.rest(arguments));this.projection.bubble.apply(this.projection,t),this.trigger.apply(this,t)}.bind(this)),this.on("layout:click:header",function(t,i){var n=i.column;if(n.sortable){var a=this.projection.get("orderby")||[];a=e.filter(a,function(e){return"global"===e.scope});var r={};r[e.isString(n.sortable)?n.sortable:n.property]=n.$orderby?-1*n.$orderby.dir:1,a.push(r),this.projection.set({orderby:a,"page.number":0})}}.bind(this));var o=e.omit(t,"projection","layout");this.options.set(o)},remove:function(){this.layout.remove(),t.View.prototype.remove.apply(this,arguments)},set:function(){this.options.set.apply(this.options,e.toArray(arguments))},render:function(e){return e=e||{},this.layout.render(),e.fetch&&this.projection.update({deep:!0}),this},rerender:function(){this.layout.rerender()},getSelection:function(){return this.projection.get("row.check.list")||[]},monitorViewportChange:function(e,t){this.layout.monitorViewportChange(e,t)}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(8)],void 0===(a=function(e,t){return t.Model.extend({defaults:{layout:void 0,projection:void 0}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(7),i(61)],void 0===(a=function(e,t,i){return i.extend({constructor:function(t){t=e.extend({},t,{el:window}),i.prototype.constructor.apply(this,[t].concat(e.rest(arguments)))},offset:function(e){return t(e).offset()}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(7),i(8)],void 0===(a=function(e,t,i){return i.View.extend({events:{scroll:"onScroll",resize:"onResize"},onScroll:function(e){this.trigger("scroll:container",e)},onResize:function(e){this.trigger("resize:container",e)},offset:function(){throw new Error("Offset function not implemented")}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(3),i(7),i(61)],void 0===(a=function(e,t,i){var n=i.extend({offset:function(e){var i=t(e).position();return{top:i.top+this.$el.scrollTop(),left:i.left+this.$el.scrollLeft()}}});return n.isValidContainer=function(e){return["absolute","relative","fixed"].indexOf(t(e).css("position"))>=0},n}.apply(t,n))||(e.exports=a)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n},o=i(64);t.default=function(e){return e("dataSource",["config"],function(e){var t=r.default.result(e,"dataSource",{});if(t instanceof o.DataSource)return t;var i=t.type,n=t.primaryKey;if("memory"===i)return new o.MemoryDataSource(t.data,n);if("odata"===i)return new o.ODataDataSource(t.url,n);if(r.default.contains(["jsdata","js-data"],i))return new o.JSDataDataSource(t.entity,t.options);throw new Error("Unsupported data source type")})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(65);Object.defineProperty(t,"DataSource",{enumerable:!0,get:function(){return n.DataSource}});var a=i(66);Object.defineProperty(t,"ODataDataSource",{enumerable:!0,get:function(){return a.ODataDataSource}});var r=i(67);Object.defineProperty(t,"JSDataDataSource",{enumerable:!0,get:function(){return r.JSDataDataSource}});var o=i(68);Object.defineProperty(t,"MemoryDataSource",{enumerable:!0,get:function(){return o.MemoryDataSource}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=(n=r)&&n.__esModule?n:{default:n};var s="__primary_key__";t.DataSource=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._primaryKey=t}return a(e,[{key:"query",value:function(e){return{items:[],totalCount:0}}},{key:"normalizeOrderBy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.default.reduce(o.default.isArray(t)?t:[t],function(t,i){var n=null,a=null;if(o.default.isArray(i)&&(n=i[0],a=i[1]),o.default.isObject(i)&&(n=i.key,a=i.direction),!o.default.isNumber(a))throw new Error("Invalid direction option for orderBy");if(!a)return t;if(o.default.isFunction(n))return t.concat(e.normalizeOrderBy(n(a)));if(o.default.isString(n))return t.push([n,a]),t;throw new Error("Invalid key option for orderBy")},[])}},{key:"primaryKey",get:function(){return this._primaryKey}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ODataDataSource=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=c(i(3)),o=c(i(7)),s=c(i(33)),l=i(65);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return r.default.chain(t).omit("skip","take","filter","orderby").extend(r.default.pick({$skip:t.skip,$top:t.take,$filter:t.filter,$orderby:function(e,t){return r.default.chain(e.normalizeOrderBy(t)).map(function(e){var t=a(e,2);return t[0]+" "+(t[1]>0?"asc":"desc")}).join(",").value()}(e,t.orderby),$count:!0},Boolean)).value()}t.ODataDataSource=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n._url=e,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.DataSource),n(t,[{key:"query",value:function(e){var t=this;return new s.default(function(i,n){o.default.getJSON(t._url,d(t,e)).success(i).fail(function(e,t,i){n(new Error(i))})}).then(function(e){return{items:e.value||[],totalCount:e["@odata.count"]||0}})}},{key:"url",get:function(){return this._url}}]),t}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSDataDataSource=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=i(3),s=(n=o)&&n.__esModule?n:{default:n},l=i(65);function c(e,t){return s.default.chain(t).omit("skip","take","filter","orderby").extend(s.default.pick({offset:t.skip,limit:t.take,where:t.filter,orderBy:function(e,t){var i=s.default.chain(e.normalizeOrderBy(t)).map(function(e){var t=r(e,2);return[t[0],t[1]>0?"ASC":"DESC"]}).value();return s.default.isEmpty(i)?null:i}(e,t.orderby)},Boolean)).value()}t.JSDataDataSource=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.idAttribute));return n._resource=e,n._options=i,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.DataSource),a(t,[{key:"query",value:function(e){var t=s.default.defaults({},e.options,this._options);return this._resource.findAll(c(this,s.default.omit(e,"options")),t).then(function(e){return{items:e.slice(),totalCount:e.totalCount||0}})}},{key:"resource",get:function(){return this._resource}}]),t}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryDataSource=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=(n=r)&&n.__esModule?n:{default:n},s=i(65);var l=o.default.constant(!0);t.MemoryDataSource=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n.data=e,n._cache={seed:n.data,query:null,data:n.data},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.DataSource),a(t,[{key:"query",value:function(e){var t=e||{},i=t.skip,n=void 0===i?0:i,a=t.take,r=void 0===a?this.data.length-n:a,s=t.filter,c=void 0===s?l:s,d=t.orderby,u=void 0===d?[]:d;if(this._cache.seed!==this.data||!o.default.isEqual(this._cache.query,{filter:c,orderby:u})){var p=o.default.first(u)||{},g=p.key,h=p.direction,m=null;if(o.default.isFunction(g))m=g;else if(o.default.isString(g)){var f=g.split(/[\.\/]/);m=function(e){return o.default.reduce(f,function(e,t){return o.default.result(e,t)},e)}}var v=o.default.filter(this.data,c);m&&(v=o.default.sortBy(v,m),h<0&&v.reverse()),this._cache={seed:this.data,query:{filter:c,orderby:u},data:v}}return{totalCount:this._cache.data.length,items:this._cache.data.slice(n,n+r)}}},{key:"cachedItems",get:function(){return this._cache.data}}]),t}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n},o=i(70);var s=["el","scrolling","tableClasses","tableAttributes"],l=s.concat(["plugins"]);t.default=function(e){return e("gridView",["config","dataSource"],function(e,t){var i=r.default.chain(e).pick(s).extend({dataSource:t}).value(),n=new o.GridView(i);return n.set(r.default.omit(e,l)),n})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=u(i(3)),r=u(i(7)),o=u(i(8)),s=u(i(33)),l=i(71),c=i(91),d=i(64);function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(){return new s.default(function(e){return window.setTimeout(e,0)})}var h=function(){function e(t){p(this,e),this.model=t,this.projections=[],this.state=null,this.input=null}return n(e,[{key:"update",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]||e!==this.input;return this.input=e,a.default.reduce(this.projections,function(e,n){var r=e.updated,o=e.p$state,s=n.name,l=n.handler,c=n.p$output,d={};return r||!c||a.default.has(t,s)?(d.updated=!0,d.p$state=n.p$output=o.then(function(e){return l(e,i.model.get(s),i.model.attributes)})):(d.updated=!1,d.p$state=c),d},{updated:n,p$state:s.default.resolve(e)}).p$state.tap(function(e){i.state=e})}},{key:"pipe",value:function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return a.default.chain(i).flatten().each(function(t){var i=e.model.get(t.name)||t.defaults;e.projections.push(t),e.model.set(t.name,t.normalize(i))}).value(),this}}]),e}();t.GridView=function(e){function t(){return p(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),n(t,[{key:"initialize",value:function(e){var t=this,i=e.scrolling,n=e.tableClasses,r=e.tableAttributes,d=e.dataSource;this._tableView=new c.TableView({el:this.$el,scrolling:i,classes:n,attributes:r}),this.model=new o.default.Model,this._dataSource=d;var u=this._projections={};this._registerProjection=function(e){var i=e.name;if(a.default.has(u,["name"]))throw new Error("Duplication projectons");return u[i]={name:i,handler:(a.default.isFunction(e)?e:e.handler).bind(t),defaults:e.defaults,normalize:(e.normalize||a.default.identity).bind(t)},u[i]},this._chainData=new h(this.model),this._chainStructure=new h(this.model),this._chainContent=new h(this.model),this.pipeDataProjections(l.query,l.buffer,l.itemIndex),this.pipeStructureProjections([l.columns,l.rows,l.selection,l.rangeSelection]),this.pipeContentProjections([l.columnGroup,l.cells,l.sortableHeader,l.events]);var p=function(e){return a.default.extend(e,{events:a.default.mapObject(e.events,function(e){return e.bind(t)})})},m={changes:null,force:!1,promise:null};this._isRendered=!1;var f=function(){var e=m.changes,i=m.force;return m.changes=null,m.force=!1,t.trigger("willUpdate",e),t._isRendered?a.default.reduce([t._chainData,t._chainStructure,t._chainContent],function(t,n){return n.update(t,e,i)},null).then(p).then(function(e){return new s.default(function(i){t._tableView.set(e,i)})}).then(g).catch(function(e){e&&console.warn(e.stack||e)}).finally(function(){m.promise=null,t.trigger("didUpdate",e)}):(t.trigger("didUpdate",e),s.default.resolve())},v=this.refresh=function(e){m.force=e||m.force,m.changes?a.default.extend(m.changes,t.model.changedAttributes()):(m.changes=t.model.changedAttributes(),m.promise?m.promise=m.promise.then(function(){return f()}).finally():m.promise=g().then(function(){return f()}))};this.model.on("change",function(){return v(!1)}),a.default.each(["willRedraw","didRedraw"],function(e){t._tableView.on(e,function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];t.trigger.apply(t,[e].concat(n))})}),this.on("all",function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var o=a.default.chain(t._chainContent).result("state").result("events").value(),s=o&&o[e];a.default.isFunction(s)&&s.apply(void 0,n)})}},{key:"pipeDataProjections",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._chainData.pipe(a.default.map(a.default.flatten(t),this._registerProjection)),this}},{key:"pipeStructureProjections",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._chainStructure.pipe(a.default.map(a.default.flatten(t),this._registerProjection)),this}},{key:"pipeContentProjections",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._chainContent.pipe(a.default.map(a.default.flatten(t),this._registerProjection)),this}},{key:"set",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.noop;if(a.default.has(t,"dataSource")&&!(t.dataSource instanceof d.DataSource)){var n=t.dataSource;t.query=a.default.defaults({},t.query,a.default.pick(n,["skip","take","orderby","filter","options","query"])),"memory"===n.type&&n.data!==this._dataSource.data&&(this._dataSource.data=n.data,this.refresh(!0)),delete t.dataSource}return this.model.set(a.default.mapObject(t,function(t,i){var n=e._projections[i];return n?n.normalize(t):t})),this.once("didUpdate",i),this}},{key:"get",value:function(e){if("dataSource"===e){var t=a.default.defaults({},this.model.get("dataSource"),this.model.get("query"));return this._dataSource instanceof d.MemoryDataSource?(t.type="memory",t.data=this._dataSource.data):this._dataSource instanceof d.JSDataDataSource?(t.type="js-data",t.entity=this._dataSource.resource):this._dataSource instanceof d.ODataDataSource&&(t.type="odata",t.url=this._dataSource.url),t}return this.model.get(e)}},{key:"patch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.noop;this.set(a.default.reduce(a.default.keys(t),function(i,n){var r=t[n],o=e.get(n);return i[n]=function e(t,i){return a.default.isObject(t)&&!a.default.isArray(t)&&(a.default.defaults(t,i),a.default.each(i,function(i,n){t[n]!==i&&e(t[n],i)})),t}(r,o),i},{}),i)}},{key:"render",value:function(e){var t=this;return this._tableView.render(function(){t._isRendered=!0,t.refresh(!0),t.once("didRedraw",e)}),this}},{key:"remove",value:function(){this._tableView.remove(),function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"query",value:function(e){return this._dataSource.query(e)}},{key:"getItemCount",value:function(){return this.totalCountRows}},{key:"itemWithKey",value:function(e){return a.default.chain(this._chainData.state).result("itemIndex").result(e,null).value()}},{key:"keyOfElement",value:function(e){var t=(0,r.default)(e).closest("tr",this.$el);return t.length>0&&t.attr("data-key")||null}},{key:"itemOfElement",value:function(e){return this.itemWithKey(this.keyOfElement(e))}},{key:"itemAt",value:function(e){return a.default.result(this._chainData.state,"items",[]).slice(e,e+1)[0]}},{key:"indexOfElement",value:function(e){return this._tableView.indexOfElement(e)}},{key:"selectedKeys",value:function(){return a.default.result(this.get("selection"),"selected",[])}},{key:"selectedItems",value:function(){var e=a.default.result(this._chainData.state,"itemIndex",{});return a.default.chain(this.selectedKeys()).map(function(t){return a.default.result(e,t)}).compact().value()}},{key:"selectRow",value:function(e){(0,l.setSelectRow)(this,e,!0)}},{key:"deselectRow",value:function(e){(0,l.setSelectRow)(this,e,!1)}},{key:"selectAll",value:function(){(0,l.setSelectAll)(this,!0)}},{key:"deselectAll",value:function(){(0,l.setSelectAll)(this,!1)}},{key:"columnWithName",value:function(e){var t=a.default.result(this._chainContent.state,"columnGroup");return t?t.columnWithName(e):null}},{key:"getHeadRows",value:function(){return a.default.result(this.get("rows"),"headRows",["column-header-rows"])}},{key:"setHeadRows",value:function(e){var t=a.default.isFunction(e)?e(this.getHeadRows()):e;this.patch({rows:{headRows:t}})}},{key:"prependHeadRows",value:function(e){this.setHeadRows(function(t){return e.concat(t)})}},{key:"appendHeadRows",value:function(e){this.setHeadRows(function(t){return t.concat(e)})}},{key:"getBodyRows",value:function(){return a.default.result(this.get("rows"),"bodyRows",["data-rows"])}},{key:"setBodyRows",value:function(e){var t=a.default.isFunction(e)?e(this.getBodyRows()):e;this.patch({rows:{bodyRows:t}})}},{key:"prependBodyRows",value:function(e){this.setBodyRows(function(t){return e.concat(t)})}},{key:"appendBodyRows",value:function(e){this.setBodyRows(function(t){return t.concat(e)})}},{key:"getFootRows",value:function(){return a.default.result(this.get("rows"),"footRows",[])}},{key:"setFootRows",value:function(e){var t=a.default.isFunction(e)?e(this.getFootRows()):e;this.patch({rows:{footRows:t}})}},{key:"prependFootRows",value:function(e){this.setFootRows(function(t){return e.concat(t)})}},{key:"appendFootRows",value:function(e){this.setFootRows(function(t){return t.concat(e)})}},{key:"monitorViewportChange",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=this.el.getBoundingClientRect(),r=["left","top","width","height"],o=window.setInterval(function(){var t=e.el.getBoundingClientRect();a.default.some(r,function(e){return Math.abs(t[e]-n[e])>.5})&&e._tableView.trigger("didChangeBound")},i);window.setTimeout(function(){return window.clearInterval(o)},t)}},{key:"dataSource",get:function(){return this._dataSource}},{key:"items",get:function(){return a.default.result(this._chainData.state,"items",[])}},{key:"itemArray",get:function(){return this.items.slice()}},{key:"countRows",get:function(){return this.items.length}},{key:"primaryKey",get:function(){return this._dataSource.primaryKey}},{key:"totalCountRows",get:function(){return a.default.result(this._chainData.state,"totalCount",0)}}]),t}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(72);Object.defineProperty(t,"query",{enumerable:!0,get:function(){return n.query}});var a=i(73);Object.defineProperty(t,"buffer",{enumerable:!0,get:function(){return a.buffer}});var r=i(74);Object.defineProperty(t,"itemIndex",{enumerable:!0,get:function(){return r.itemIndex}});var o=i(75);Object.defineProperty(t,"selection",{enumerable:!0,get:function(){return o.selection}}),Object.defineProperty(t,"setSelectAll",{enumerable:!0,get:function(){return o.setSelectAll}}),Object.defineProperty(t,"setSelectRow",{enumerable:!0,get:function(){return o.setSelectRow}});var s=i(81);Object.defineProperty(t,"rangeSelection",{enumerable:!0,get:function(){return s.rangeSelection}});var l=i(82);Object.defineProperty(t,"columns",{enumerable:!0,get:function(){return l.columns}});var c=i(83);Object.defineProperty(t,"rows",{enumerable:!0,get:function(){return c.rows}});var d=i(85);Object.defineProperty(t,"columnGroup",{enumerable:!0,get:function(){return d.columnGroup}});var u=i(87);Object.defineProperty(t,"cells",{enumerable:!0,get:function(){return u.cells}});var p=i(88);Object.defineProperty(t,"sortableHeader",{enumerable:!0,get:function(){return p.sortableHeader}});var g=i(90);Object.defineProperty(t,"events",{enumerable:!0,get:function(){return g.events}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.query=void 0;var n=r(i(3)),a=r(i(33));function r(e){return e&&e.__esModule?e:{default:e}}t.query={name:"query",handler:function(e,t){var i=this,r=this.primaryKey;return this.trigger("willReload"),a.default.resolve(this.query(t)).catch(function(e){return{totalCount:0,items:[],error:e||new Error("Failed to load grid data")}}).then(function(e){var t=e.totalCount,a=e.items,o=e.error;return o?i.trigger("didReload",!1,o):i.trigger("didReload",!0,{totalCount:t,items:a}),{uniqueId:n.default.uniqueId("grid-data-"),items:a,primaryKey:r,totalCount:t}})},defaults:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n};function o(e,t,i){var n=e.get("buffer"),a={};a[r.default.result(t,e.primaryKey)]={item:t,state:i},r.default.defaults(a,n.changed),e.set({buffer:r.default.defaults({changed:a},n)})}t.buffer={name:"buffer",handler:function(e,t){var i=this,n=e.primaryKey,a=e.uniqueId,s=e.update;t.uniqueId!==a&&(t.uniqueId=a,t.changed={});var l={length:e.items.length,slice:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.items.length;return e.items.slice(i,a).map(function(e){var i=e[n];return r.default.has(t.changed,i)?t.changed[i].item:e})}},c=function(e){e&&o(i,e,"committed")},d=r.default.defaults({didEdit:function(e){e&&(o(i,e,"changed"),r.default.isFunction(s)&&s(e).then(c))}},e.events);return r.default.defaults({items:l,events:d},e)},defaults:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemIndex=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n};t.itemIndex={name:"itemIndex",handler:function(e){var t=e.items,i=e.primaryKey,n={};return r.default.each(t.slice(),function(e){r.default.has(e,i)||(e[i]=r.default.uniqueId("grid-item-")),n[e[i]]=e}),r.default.defaults({itemIndex:n},e)},defaults:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selection=void 0,t.setSelectAll=d,t.setSelectRow=p;var n=l(i(3)),a=i(76),r=i(78),o=l(i(79)),s=l(i(80));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){e.trigger("willSelect",t.selected),e.set({selection:t},function(){e.trigger("didSelect",t.selected)})}function d(e,t){var i=e.get("selection").resolver;c(e,t?i.selectAll():i.deselectAll())}function u(e){d(this,e.target.checked),e.preventDefault()}function p(e,t,i){var n=e.get("selection").resolver;c(e,i?n.selectRow(t):n.deselectRow(t))}function g(e){p(this,this.keyOfElement(e.target),e.target.checked),e.preventDefault()}t.selection={name:"selection",handler:function(e,t){var i=this,a=t.enabled,r=t.resolver,l=t.a11y,c=(l=void 0===l?{}:l).selectAllLabel,d=void 0===c?"Select All":c,p=l.deselectAllLabel,h=void 0===p?"Deselect All":p,m=l.selectOneLabel,f=void 0===m?null:m,v=l.deselectOneLabel,b=void 0===v?null:v;if(!a)return e;var y=r.updateItems(e.items),S=y.selected,w=y.single,C=y.colClasses,x=y.headClasses,k=y.bodyClasses,A=y.footClasses,T=y.selectable,_=n.default.reduce(S,function(e,t){return e[t]=!0,e},{}),E=e.primaryKey,I=!1,O=!1;if(!w){var P=n.default.filter(e.items.slice(),T).length,M=n.default.filter(S,function(e){return T(i.itemWithKey(e))}).length;I=0!==P&&M===P,O=M>0&&M<P}var j=[{name:"selection",html:(0,o.default)({single:w,checked:I,partSelected:O,checkAllLabel:I?h:d}),template:s.default,property:function(e){return{single:w,selectable:T(e),checked:_[e[E]],ariaLabel:_[e[E]]?b:f,labelbyId:f?void 0:e[E]}},sortable:!1,isResizable:!1,colClasses:C,headClasses:x,bodyClasses:k,footClasses:A}].concat(e.columns),L=n.default.map(e.bodyRows,function(e){if(e&&"data"===e.type&&e.item&&T(e.item)){var t=_[e.item[E]]?["row-selected"]:[];return n.default.defaults({attributes:{id:e.item[E]},classes:n.default.union(t,e.classes)},n.default.isObject(e)?e:{})}return e}),D=n.default.defaults({"change th input.select-all":u,"change td input.select-row":g},e.events);return n.default.defaults({columns:j,events:D,bodyRows:L},e)},normalize:function(e){var t=this;if(!e)return{enabled:!1};var i=n.default.defaults({},n.default.isObject(e)?e:{},{enabled:!0,single:!1,selected:[],selectable:function(e){return n.default.has(e,t.primaryKey)},colClasses:[],headClasses:[],bodyClasses:[],footClasses:[]});return n.default.isFunction(i.Resolver)||(i.Resolver=i.single?a.SingleSelectionResolver:r.MultipleSelectionResolver),i.resolver instanceof i.Resolver||(i.resolver=new i.Resolver(this)),i},defaults:!1}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSelectionResolver=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(77);t.SingleSelectionResolver=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.SelectionResolver),n(t,[{key:"selectRow",value:function(e){return this.patch({selected:[e.toString()]})}}]),t}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionResolver=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=(n=r)&&n.__esModule?n:{default:n};t.SelectionResolver=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gridView=t}return a(e,[{key:"updateItems",value:function(){return this.patch({})}},{key:"selectRow",value:function(){throw new Error("Not Supported")}},{key:"deselectRow",value:function(){throw new Error("Not Supported")}},{key:"selectAll",value:function(){throw new Error("Not Supported")}},{key:"deselectAll",value:function(){throw new Error("Not Supported")}},{key:"patch",value:function(e){var t=this.gridView.get("selection"),i=o.default.isFunction(e)?e(t):e;return o.default.defaults(i,t)}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleSelectionResolver=void 0;var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=(n=r)&&n.__esModule?n:{default:n},s=i(77);t.MultipleSelectionResolver=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.SelectionResolver),a(t,[{key:"selectRow",value:function(e){return this.patch(function(t){var i=t.selected;return{selected:o.default.union(i,[e.toString()])}})}},{key:"deselectRow",value:function(e){return this.patch(function(t){var i=t.selected;return{selected:o.default.without(i,e.toString())}})}},{key:"selectAll",value:function(){var e=this;return this.patch(function(t){var i=t.selectable,n=t.selected,a={};return a.selected=o.default.chain(e.gridView.items.slice()).filter(i).map(o.default.property(e.gridView.primaryKey)).map(String).union(n).value(),a})}},{key:"deselectAll",value:function(){var e=this;return this.patch(function(t){var i=t.selectable,n=t.selected,a={};return a.selected=o.default.filter(n,function(t){var n=e.gridView.itemWithKey(t);return!(n&&i(n))}),a})}}]),t}()},function(e,t,i){var n=i(10);e.exports=function(e){var t=[],i=e||{};return function(e,i,a,r){r?t.push("<span></span>"):t.push('<input type="checkbox"'+n.attr("checked",i,!0,!0)+n.attr("aria-label",e,!0,!0)+n.cls(["select-all",a?"part-selected":void 0],[null,!0])+">")}.call(this,"checkAllLabel"in i?i.checkAllLabel:"undefined"!==typeof checkAllLabel?checkAllLabel:void 0,"checked"in i?i.checked:"undefined"!==typeof checked?checked:void 0,"partSelected"in i?i.partSelected:"undefined"!==typeof partSelected?partSelected:void 0,"single"in i?i.single:"undefined"!==typeof single?single:void 0),t.join("")}},function(e,t,i){var n=i(10);e.exports=function(e){var t=[],i=e||{};return function(e){e.selectable?e.single?t.push('<input type="radio"'+n.attr("checked",e.checked,!0,!0)+n.attr("aria-label",e.ariaLabel,!0,!0)+n.attr("aria-labelledby",e.labelbyId,!0,!0)+' class="select-row">'):t.push('<input type="checkbox"'+n.attr("checked",e.checked,!0,!0)+n.attr("aria-label",e.ariaLabel,!0,!0)+n.attr("aria-labelledby",e.labelbyId,!0,!0)+' class="select-row">'):t.push('<span class="unselectable"></span>')}.call(this,"value"in i?i.value:"undefined"!==typeof value?value:void 0),t.join("")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rangeSelection=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n};function o(e){var t=this.keyOfElement(e.target),i=this.get("selection"),n=this.get("rangeSelection");if(e.shiftKey&&!i.disableShiftKey){var a=i.selected,o=i.selectable,s=n.preSelect,l=n.preShiftSelect,c=r.default.chain(this.items.slice()).filter(o).map(r.default.property(this.primaryKey)).map(String).value(),d=c.indexOf(s),u=c.indexOf(t),p=r.default.indexBy(a);if(l){var g=c.indexOf(l);r.default.each(c.slice(Math.min(d,g),Math.max(d,g)+1),function(e){delete p[e]})}r.default.each(c.slice(Math.min(d,u),Math.max(d,u)+1),function(e){p[e]=e}),n.preShiftSelect=t,this.set({selection:r.default.defaults({selected:r.default.keys(p)},i)})}else n.preSelect=t}function s(){var e=this.get("rangeSelection");e.preSelect=null,e.preShiftSelect=null}t.rangeSelection={name:"rangeSelection",handler:function(e,t,i){if(i.selection.single)return e;var n=r.default.defaults({"click th input.select-all":s,"click td input.select-row":o},e.events);return r.default.defaults({events:n},e)},defaults:{preSelect:null,preShiftSelect:null}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.columns=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n};t.columns={name:"columns",handler:function(e,t){return r.default.defaults({columns:t||r.default.chain(e.items.slice(0,1)).first().keys().map(function(e){return{name:e,sortable:!0}}).value()},e)},defaults:null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rows=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n},o=i(84);var s={changed:["row-buffer-changed"],committed:["row-buffer-committed"]};t.rows={name:"rows",handler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.headRows,n=void 0===i?["column-header-rows"]:i,a=t.footRows,l=void 0===a?[]:a,c=t.bodyRows,d=void 0===c?["data-rows"]:c,u=e.primaryKey,p=this.get("buffer").changed||{},g=e.items.slice(0,e.items.length);return r.default.defaults({headRows:r.default.map(n,function(e){return r.default.isObject(e)?r.default.defaults({classes:(0,o.normalizeClasses)(e.classes,e),attributes:(0,o.normalizeAttributes)(e.attributes,e)},e):e}),bodyRows:r.default.reduce(d,function(e,t){if("data-rows"===t||"data-rows"===t.type)r.default.each(g,function(i){var n=i[u],a=r.default.chain(p).result(n).result("state").value(),l=r.default.union((0,o.normalizeClasses)(t.classes,i),r.default.result(s,a,[])),c=(0,o.normalizeAttributes)(t.attributes,i);e.push({item:i,classes:l,type:"data",attributes:c})});else{if(t.view)throw new Error("Body row cannot have subviews");e.push(t)}return e},[]),footRows:r.default.map(l,function(e){return r.default.isObject(e)?r.default.defaults({classes:(0,o.normalizeClasses)(e.classes,e),attributes:(0,o.normalizeAttributes)(e.attributes,e)},e):e})},e)},defaluts:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.normalizeClasses=function(e,t){if(o.default.isArray(e))return e;if(o.default.isString(e))return e.split(/\s+/);if(o.default.isFunction(e))return e(t);if(o.default.isObject(e))return o.default.chain(e).pairs().filter(function(e){var i=n(e,2),a=i[1],r=o.default.isFunction(a);return r&&a(t)||!r&&Boolean(a)}).map(function(e){var t=n(e,1),i=t[0];return i}).value();return[]},t.normalizeAttributes=function e(t,i){if(o.default.isFunction(t))return e(t(i));if(o.default.isObject(t))return o.default.mapObject(t,function(e){return o.default.isFunction(e)?e(i):e});return{}};var a,r=i(3),o=(a=r)&&a.__esModule?a:{default:a}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.columnGroup=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=s(i(3)),r=i(84),o=s(i(86));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.split("/");return{key:e,get:function(e){return a.default.reduce(t,function(e,t){return(e||{})[t]},e)},set:function(e,i){return a.default.reduce(t,function(e,n,r){r<t.length-1?a.default.isObject(e[n])||(e[n]={}):e[n]=i},e)}}}function c(e){return a.default.isArray(e)?e:a.default.isNumber(e)?e>0?[1,-1]:[-1,1]:[1,-1]}var d=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headerRows=[],this.leafColumns=[],this.columnIndex={};this.root=function e(t){var n=t.parent,r=t.columns,s=t.height,d=t.name,u=t.property,p=t.sortable;return i.columnIndex[d]=t,t.property=function(e,t){return e?a.default.isString(e)?l(e):a.default.isFunction(e)?{get:e,set:e}:e:l(t.name)}(u,t),t.sortable=function(e,t){var i=t.property.key||t.property.get;return!0===e?{key:i,direction:c(1)}:a.default.isString(e)||a.default.isFunction(e)?{key:e,direction:c(1)}:a.default.isNumber(e)&&e||a.default.isArray(e)?{key:i,direction:c(e)}:a.default.isObject(e)?{key:e.key||i,direction:c(a.default.result(e,"direction",1))}:null}(p,t),a.default.isFunction(t.template)||(t.template=o.default),t.height=a.default.isNumber(s)?s:1,t.rowIndex=n?n.rowIndex+n.height:0,t.columns=a.default.map(r,function(i){return e(a.default.extend({parent:t},i))}),t.treeHeight=t.height,t.treeWidth=1,a.default.isEmpty(t.columns)?i.leafColumns.push(t):(t.treeHeight+=a.default.chain(t.columns).map(a.default.property("treeHeight")).max().value(),t.treeWidth=a.default.chain(t.columns).map(a.default.property("treeWidth")).reduce(function(e,t){return e+t},0).value()),t}({name:"__root__",height:0,columns:t}),function e(t){if(t.parent){for(var n=t.treeWidth,o=a.default.isEmpty(t.columns)?i.root.treeHeight-t.rowIndex:t.height,s=t.name,l=t.html||t.title||t.name;i.headerRows.length<=t.rowIndex;)i.headerRows.push({cells:[],attributes:{}});var c=a.default.union((0,r.normalizeClasses)(t.headClasses,t),["column-header"]);a.default.isEmpty(t.columns)&&c.push("column-header-leaf");var d=a.default.defaults({colspan:n,rowspan:o,"data-name":s},(0,r.normalizeAttributes)(t.headAttributes,t));t.cell={html:l,name:s,classes:c,attributes:d},i.headerRows[t.rowIndex].cells.push(t.cell)}a.default.each(t.columns,e)}(this.root)}return n(e,[{key:"columnWithName",value:function(e){return this.columnIndex[e]}},{key:"height",get:function(){return this.root.treeHeight}},{key:"width",get:function(){return this.root.treeWidth}}]),e}();t.columnGroup={name:"columnGroup",handler:function(e){var t=new d(e.columns||[]);return a.default.defaults({columnGroup:t,cols:function(e){return a.default.map(e.leafColumns,function(e){var t=a.default.union((0,r.normalizeClasses)(e.colClasses,e),["col-"+e.name]);return{attributes:(0,r.normalizeAttributes)(e.colAttributes,e),classes:t,width:a.default.isNumber(e.width)?e.width+"px":e.width}})}(t)},e)},defaults:{}}},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e){i.push("<span>"+n.escape(null==(t=e)?"":t)+"</span>")}.call(this,"value"in a?a.value:"undefined"!==typeof value?value:void 0),i.join("")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cells=void 0;var n,a=i(3),r=(n=a)&&n.__esModule?n:{default:n},o=i(84);function s(e){var t=e.columnGroup,i=e.row,n=e.rowType,a=e.primaryKey,s={};return r.default.has(i,"html")&&(s.cells=[{attributes:{rowspan:1,colspan:t.width},html:i.html}]),r.default.has(i,"view")&&(s.cells=[{attributes:{rowspan:1,colspan:t.width},view:i.view}]),r.default.has(i,"item")&&(s.cells=r.default.map(t.leafColumns,function(e){var t=void 0,a=void 0;"foot"===n?(t=(0,o.normalizeClasses)(e.footClasses,i),a=(0,o.normalizeAttributes)(e.footAttributes,i)):"body"===n?(t=(0,o.normalizeClasses)(e.bodyClasses,i),a=(0,o.normalizeAttributes)(e.bodyAttributes,i)):"head"===n&&(t=(0,o.normalizeClasses)(e.headClasses,i),a=(0,o.normalizeAttributes)(e.headAttributes,i));var s={classes:t,attributes:a};return s.value=e.property.get(i.item),s.html=e.template(r.default.pick(s,"value")),s}),s.attributes=r.default.defaults({"data-key":i.item[a]},i.attributes)),r.default.defaults(s,i,{attributes:{}})}t.cells={name:"cells",handler:function(e){var t=e.columnGroup,i=this.primaryKey,n=r.default.reduce(e.headRows,function(e,n){return"column-header-rows"===n?e.concat(t.headerRows):(e.push(s({columnGroup:t,row:n,rowType:"head",primaryKey:i})),e)},[]),a={length:e.bodyRows.length,slice:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.bodyRows.length;return e.bodyRows.slice(n,a).map(function(e){return s({columnGroup:t,row:e,rowType:"body",primaryKey:i})})}},o=r.default.map(e.footRows,function(e){return s({columnGroup:t,row:e,rowType:"foot",primaryKey:i})});return r.default.defaults({headRows:n,bodyRows:a,footRows:o},e)},defaults:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortableHeader=void 0;var n=r(i(3)),a=r(i(89));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=this.$(e.target).closest("th").attr("data-name"),i=this.columnWithName(t).sortable;if(i){var n=this.get("sortableHeader")||{},a=n.directionIndex;a=n.name===t?(a+1)%i.direction.length:0;var r=i.direction[a];this.patch({query:{orderby:r?[{key:i.key,direction:r}]:[]},sortableHeader:{name:t,directionIndex:a}})}}t.sortableHeader={name:"sortableHeader",handler:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name,r=t.directionIndex,s=t.template,l=void 0===s?a.default:s,c={},d=e.columnGroup.leafColumns,u=n.default.reduce(d,function(e,t){return e[t.name]=t,e},{});return c.headRows=n.default.map(e.headRows,function(e){var t=n.default.map(e.cells,function(e){var t={},a=u[e.name];if(a&&a.sortable){t.classes=e.classes.concat(["clickable","column-header-sortable"]);var o=a.sortable.template||l,s=a.name===i?a.sortable.direction[r]:0,c=s>0?"ascending":s<0?"descending":"none";t.attributes=n.default.defaults({"aria-sort":c,tabindex:0},e.attributes),t.html=o({html:e.html,direction:s})}return n.default.defaults(t,e)});return n.default.defaults({cells:t},e)}),c.events=n.default.defaults({"click th.column-header-sortable":o},e.events),n.default.defaults(c,e)},defaults:{}}},function(e,t,i){i(10);e.exports=function(e){var t,i=[],n=e||{};return function(e,n){e<0?i.push('<span class="sort-indicator glyphicon glyphicon-arrow-down"></span>'):e>0&&i.push('<span class="sort-indicator glyphicon glyphicon-arrow-up"></span>'),i.push(null==(t=n)?"":t)}.call(this,"direction"in n?n.direction:"undefined"!==typeof direction?direction:void 0,"html"in n?n.html:"undefined"!==typeof html?html:void 0),i.join("")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;var n,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){a=!0,r=l}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=i(3),o=(n=r)&&n.__esModule?n:{default:n};t.events={name:"events",handler:function(e,t){var i=o.default.pairs(e.events).concat(o.default.pairs(t)),n=o.default.reduce(i,function(e,t){var i=a(t,2),n=i[0],r=i[1];return o.default.extend(e,function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},n,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=o.default.filter(t,o.default.isFunction);return function(){for(var e=this,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];o.default.each(n,function(t){return t.apply(e,i)})}}(e[n],r)))},{});return o.default.defaults({events:n},e)},defaults:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(92);Object.defineProperty(t,"TableView",{enumerable:!0,get:function(){return n.TableView}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=h(i(3)),r=h(i(8)),o=h(i(93)),s=i(94),l=h(i(97)),c=h(i(98)),d=h(i(99)),u=h(i(100)),p=h(i(101)),g=i(96);function h(e){return e&&e.__esModule?e:{default:e}}var m=["cols","headRows","bodyRows","footRows","events"],f=["static","fixed","sticky"],v=function(e){return(0,l.default)(a.default.defaults({escapeAttr:g.escapeAttr},e))};t.TableView=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.View),n(t,[{key:"initialize",value:function(e){var t=this,i=e.scrolling,n=void 0===i?{}:i,r=e.classes,l=void 0===r?[]:r,c=e.attributes,d=void 0===c?{}:c;this._props={scrolling:this._normalizeScrollingConfig(n),classes:l,attributes:d},this._state={cols:[],headRows:[],bodyRows:[],footRows:[],events:{}},this._listView=new o.default({el:this.$el,virtualized:this._props.scrolling.virtualized,viewport:this._props.scrolling.viewport}),this._headerView=new s.HeaderView({tableView:this}),this._footerView=new s.FooterView({tableView:this}),a.default.each(["willRedraw","didRedraw"],function(e){t._listView.on(e,function(){for(var i=arguments.length,n=Array(i),a=0;a<i;a++)n[a]=arguments[a];t.trigger.apply(t,[e].concat(n))})})}},{key:"_normalizeHeaderConfig",value:function(e){var t={};return a.default.isString(e)?t.type=e:a.default.isFunction(e)||a.default.isFinite(e)?(t.type="sticky",t.offset=e):a.default.isObject(e)&&a.default.isString(e.type)&&a.default.extend(t,a.default.pick(e,"type","offset","attributes")),a.default.contains(f,t.type)||(t.type="static"),"sticky"!==t.type||a.default.isFinite(a.default.result(t,"offset"))||(t.offset=0),t}},{key:"_normalizeScrollingConfig",value:function(e){var t=e.viewport,i=e.virtualized,n=void 0!==i&&i,a=e.header,r=void 0===a?"static":a,o={viewport:t,virtualized:n};return o.header=this._normalizeHeaderConfig(r),"fixed"===o.header.type&&(o.viewport=".viewport"),o}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.noop,i=function(t){return!a.default.isUndefined(e[t])},n={};if(a.default.extend(this._state,a.default.pick(e,m)),i("bodyRows")){var r=this._state.bodyRows;n.items={length:r.length,slice:function(e,t){return a.default.map(r.slice(e,t),function(e){return{row:e}})}}}return i("events")&&(n.events=e.events),this._renderColumnGroup(),this._headerView&&this._headerView.redraw(),this._footerView&&this._footerView.redraw(),this._listView.set(n,t),this}},{key:"_renderColumnGroup",value:function(){this.$colgroup=this.$("colgroup.column-group"),this.$colgroup.html((0,p.default)(a.default.defaults({escapeAttr:g.escapeAttr},this._state)))}},{key:"_renderHeader",value:function(){this._headerView.setElement(this.$("thead.header")),this._headerView.render()}},{key:"_renderFooter",value:function(){this._footerView.setElement(this.$("tfoot.footer")),this._footerView.render()}},{key:"_hookUpStickyHeader",value:function(e){var t=this,i=e.viewport.$el.get(0)===window,n=this.$(".table-container"),r=this.$(".sticky-header"),o=this.$(".sticky-header-filler"),s=this.$(".sticky-header-filler + table"),l={width:0,height:0},c=function(){if(t.$el.is(":visible")){var c=e.viewport.getMetrics(),d=c.outer.top,u=a.default.result(t._props.scrolling.header,"offset",0),p=document.body.contains(n.get(0))?n.get(0).getBoundingClientRect():{top:0,left:0},g=p.top;if(i){var h=g<d+u;o.css({display:h?"block":"none",height:h?r.height():""});var m={position:h?"fixed":"static",top:h?d+u:"",left:h?p.left:""},f=Math.abs(c.outer.width-l.width),v=Math.abs(c.outer.height-l.height);if(f>=1||v>=1){l.width=c.outer.width,l.height=c.outer.height,r.css({width:"auto","min-width":0}),s.css({width:"auto","min-width":0});var b=n.width();m.width=b,m["min-width"]=b,s.css({width:b,"min-width":b})}r.css(m)}else o.css({display:"none"}),r.css({position:"relative",top:Math.min(Math.max(d+u-g,0),s.height())})}};e.viewport.on("resize",function(){return t.trigger("didChangeBound")}),e.viewport.on("scroll",function(){return t.trigger("didChangeBound")}),this.on("didChangeBound",c),e.on("didRedraw",c)}},{key:"_renderStatic",value:function(e){var t=this;this._listView.set({model:{classes:this._props.classes,dataTableAttributes:this._props.attributes},listTemplate:d.default,itemTemplate:v}).render(function(){t._renderColumnGroup(),t._renderHeader(),t._renderFooter(),e()})}},{key:"_renderFixed",value:function(e){var t=this;this._listView.set({model:{classes:this._props.classes,headerAttributes:a.default.result(this._props.scrolling.header,"attributes",{}),dataTableAttributes:this._props.attributes},listTemplate:c.default,itemTemplate:v}).render(function(){t._renderColumnGroup(),t._renderHeader(),t._renderFooter(),e()}),this._listView.on("didRedraw",function(){var e=t.$(".viewport").get(0).clientWidth,i=t.el.clientWidth-e,n=t.$(".viewport > table").get(0).offsetWidth;t.$el.width(n+i),t.$(".fixed-header").width(n)})}},{key:"_renderSticky",value:function(e){var t=this;this._listView.set({model:{classes:this._props.classes,headerAttributes:a.default.result(this._props.scrolling.header,"attributes",{}),dataTableAttributes:this._props.attributes},listTemplate:u.default,itemTemplate:v}).render(function(){t._renderColumnGroup(),t._renderHeader(),t._hookUpStickyHeader(t._listView),t._renderFooter(),e()})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.noop;switch(this._props.scrolling.header.type){default:case"static":this._renderStatic(e);break;case"fixed":this._renderFixed(e);break;case"sticky":this._renderSticky(e)}return this}},{key:"remove",value:function(){this._headerView&&this._headerView.remove(),this._listView&&this._listView.remove(),this._footerView&&this._footerView.remove(),function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"scrollToItem",value:function(){var e;(e=this._listView).scrollToItem.apply(e,arguments)}},{key:"indexOfElement",value:function(e){var t=this._listView.$(e).closest("tr",this._listView.$container);return t.length>0?t.index()+this._listView.indexFirst-1:null}},{key:"headerType",get:function(){return this._props.scrolling.header.type}}]),t}()},function(e,t){e.exports=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FooterView=t.HeaderView=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=l(i(3)),r=l(i(8)),o=l(i(95)),s=i(96);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){return"header-subview-"+e},g=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,r.default.View),n(t,[{key:"initialize",value:function(e){var t=e.tableView,i=e.group;this.tableView=t,this.group=i,this.subviews=[]}},{key:"redraw",value:function(){var e=this;a.default.each(this.subviews,function(e){return e.$el.detach()}),this.subviews=[],this.$el.html(this.template({rows:a.default.map(this.rows,function(t){var i=a.default.map(t.cells,function(t){if(t.view){var i=a.default.union(t.classes,[p(e.subviews.length)]);return e.subviews.push(t.view),a.default.defaults({classes:i},t)}return t});return a.default.defaults({cells:i},t)}),group:this.group})),a.default.each(this.subviews,function(t,i){t.$el.appendTo(e.$(function(e){return"."+p(e)}(i)))})}},{key:"render",value:function(){return this.redraw(),this}}]),t}();t.HeaderView=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,g),n(t,[{key:"template",value:function(e){return(0,o.default)(a.default.defaults({group:"head",escapeAttr:s.escapeAttr},e))}},{key:"rows",get:function(){return this.tableView._state.headRows}}]),t}(),t.FooterView=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,g),n(t,[{key:"template",value:function(e){return(0,o.default)(a.default.defaults({group:"foot",escapeAttr:s.escapeAttr},e))}},{key:"rows",get:function(){return this.tableView._state.footRows}}]),t}()},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a={},r=e||{};return function(e,r,o){a.mixinHeadCell=t=function(e,a){this&&this.block,this&&this.attributes;var r=a(e.attributes);i.push("<th"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+">"),e.html?i.push(null==(t=e.html)?"":t):i.push(n.escape(null==(t=e.value)?"":t)),i.push("</th>")},a.mixinCell=t=function(e,a){this&&this.block,this&&this.attributes;var r=a(e.attributes);i.push("<td"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+">"),e.html?i.push(null==(t=e.html)?"":t):i.push(n.escape(null==(t=e.value)?"":t)),i.push("</td>")},a.mixinRow=t=function(e,r,o){this&&this.block,this&&this.attributes;var s=o(e.attributes);i.push("<tr"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s]),!0)+">"),function(){var t=e.cells||[];if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var s=t[i];switch(r){case"head":a.mixinHeadCell(s,o);break;case"body":case"foot":a.mixinCell(s,o)}}else{n=0;for(var i in t){n++;s=t[i];switch(r){case"head":a.mixinHeadCell(s,o);break;case"body":case"foot":a.mixinCell(s,o)}}}}.call(this),i.push("</tr>")},a.mixinRows=t=function(e,t,i){this&&this.block,this&&this.attributes;(function(){var n=e||[];if("number"==typeof n.length)for(var r=0,o=n.length;r<o;r++){var s=n[r];a.mixinRow(s,t,i)}else{o=0;for(var r in n){o++;s=n[r];a.mixinRow(s,t,i)}}}).call(this)},a.mixinRows(o,r,e)}.call(this,"escapeAttr"in r?r.escapeAttr:"undefined"!==typeof escapeAttr?escapeAttr:void 0,"group"in r?r.group:"undefined"!==typeof group?group:void 0,"rows"in r?r.rows:"undefined"!==typeof rows?rows:void 0),i.join("")}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.escapeAttr=function e(t){if(Array.isArray(t))return t.map(function(t){return e(t)});if("object"===("undefined"===typeof t?"undefined":i(t)))return Object.keys(t).reduce(function(i,n){return i[n]=e(t[n]),i},{});if("string"===typeof t)return function(e){var t=String(e),i=n.exec(t);if(!i)return e;var a="",r=void 0,o=void 0,s=void 0;for(r=i.index,o=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}o!==r&&(a+=t.substring(o,r)),o=r+1,a+=s}if(o!==r)return a+t.substring(o,r);return a}(t);return t};var n=/["&<>]/},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a={},r=e||{};return function(e,r){a.mixinHeadCell=t=function(e,a){this&&this.block,this&&this.attributes;var r=a(e.attributes);i.push("<th"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+">"),e.html?i.push(null==(t=e.html)?"":t):i.push(n.escape(null==(t=e.value)?"":t)),i.push("</th>")},a.mixinCell=t=function(e,a){this&&this.block,this&&this.attributes;var r=a(e.attributes);i.push("<td"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+">"),e.html?i.push(null==(t=e.html)?"":t):i.push(n.escape(null==(t=e.value)?"":t)),i.push("</td>")},a.mixinRow=t=function(e,r,o){this&&this.block,this&&this.attributes;var s=o(e.attributes);i.push("<tr"+n.attrs(n.merge([{class:(t=[!0],n.joinClasses([e.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},s]),!0)+">"),function(){var t=e.cells||[];if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var s=t[i];switch(r){case"head":a.mixinHeadCell(s,o);break;case"body":case"foot":a.mixinCell(s,o)}}else{n=0;for(var i in t){n++;s=t[i];switch(r){case"head":a.mixinHeadCell(s,o);break;case"body":case"foot":a.mixinCell(s,o)}}}}.call(this),i.push("</tr>")},a.mixinRow(r,"body",e)}.call(this,"escapeAttr"in r?r.escapeAttr:"undefined"!==typeof escapeAttr?escapeAttr:void 0,"row"in r?r.row:"undefined"!==typeof row?row:void 0),i.join("")}},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r){var o={"border-collapse":"collapse",margin:0,"table-layout":"fixed"};i.push('<div class="table-container"><div class="fixed-header"><table'+n.attrs(n.merge([{style:n.escape(n.style(o)),role:"grid",class:(t=[null,!0],n.joinClasses(["fixed-header",e].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+'><colgroup class="column-group"></colgroup><thead class="header"></thead></table></div><div class="viewport"><table'+n.attrs(n.merge([{style:n.escape(n.style(o)),role:"grid",class:(t=[null,!0],n.joinClasses(["data-table",e].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},a]),!0)+'><colgroup class="column-group"></colgroup><tbody><tr role="presentation" class="top-filler"></tr><tr role="presentation" class="bottom-filler"></tr></tbody><tfoot class="footer"></tfoot></table></div></div>')}.call(this,"classes"in a?a.classes:"undefined"!==typeof classes?classes:void 0,"dataTableAttributes"in a?a.dataTableAttributes:"undefined"!==typeof dataTableAttributes?dataTableAttributes:void 0,"headerAttributes"in a?a.headerAttributes:"undefined"!==typeof headerAttributes?headerAttributes:void 0),i.join("")}},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a){i.push('<div class="table-container"><table'+n.attrs(n.merge([{style:n.escape(n.style({"border-collapse":"collapse",margin:0})),role:"grid",class:(t=[null,!0],n.joinClasses(["data-table",e].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},a]),!0)+'><colgroup class="column-group"></colgroup><thead class="header"></thead><tbody> <tr role="presentation" class="top-filler"></tr><tr role="presentation" class="bottom-filler"></tr></tbody><tfoot class="footer"></tfoot></table></div>')}.call(this,"classes"in a?a.classes:"undefined"!==typeof classes?classes:void 0,"dataTableAttributes"in a?a.dataTableAttributes:"undefined"!==typeof dataTableAttributes?dataTableAttributes:void 0),i.join("")}},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r){var o={"border-collapse":"collapse",margin:0,"table-layout":"fixed"};i.push('<div class="table-container"><table'+n.attrs(n.merge([{style:n.escape(n.style(o)),role:"grid",class:(t=[null,!0],n.joinClasses(["sticky-header",e].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},r]),!0)+'><colgroup class="column-group"></colgroup><thead class="header"></thead></table><div class="sticky-header-filler"></div><table'+n.attrs(n.merge([{style:n.escape(n.style(o)),role:"grid",class:(t=[null,!0],n.joinClasses(["data-table",e].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},a]),!0)+'><colgroup class="column-group"></colgroup><tbody><tr role="presentation" class="top-filler"></tr><tr role="presentation" class="bottom-filler"></tr></tbody><tfoot class="footer"></tfoot></table></div>')}.call(this,"classes"in a?a.classes:"undefined"!==typeof classes?classes:void 0,"dataTableAttributes"in a?a.dataTableAttributes:"undefined"!==typeof dataTableAttributes?dataTableAttributes:void 0,"headerAttributes"in a?a.headerAttributes:"undefined"!==typeof headerAttributes?headerAttributes:void 0),i.join("")}},function(e,t,i){var n=i(10);e.exports=function(e){var t,i=[],a=e||{};return function(e,a,r){(function(){var r=e||[];if("number"==typeof r.length)for(var o=0,s=r.length;o<s;o++){var l=(d=r[o]).width?"width: "+d.width+";":null,c=a(d.attributes);i.push("<col"+n.attrs(n.merge([{style:n.escape(n.style(l)),class:(t=[!0],n.joinClasses([d.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},c]),!0)+">")}else{s=0;for(var o in r){s++;var d;l=(d=r[o]).width?"width: "+d.width+";":null,c=a(d.attributes);i.push("<col"+n.attrs(n.merge([{style:n.escape(n.style(l)),class:(t=[!0],n.joinClasses([d.classes].map(n.joinClasses).map(function(e,i){return t[i]?n.escape(e):e})))},c]),!0)+">")}}}).call(this)}.call(this,"cols"in a?a.cols:"undefined"!==typeof cols?cols:void 0,"escapeAttr"in a?a.escapeAttr:"undefined"!==typeof escapeAttr?escapeAttr:void 0,"undefined"in a?a.undefined:void 0),i.join("")}},function(e,t){e.exports={requirejs:{config:{paths:{"@bingads-webui-component-legacy/grid/examples":"@bingads-webui-component-legacy/grid/examples"}}},name:"projection-grid",description:"Client side grid control in JavaScript using pipe and filter patterns.",keywords:[],author:{name:"Ahmed Kamel"},main:"dist/projection-grid.js",version:"0.1.21",files:["dist"],scripts:{test:"gulp test",prepublish:"gulp prepublish"},license:"MIT",devDependencies:{"babel-core":"^6.7.7","babel-loader":"^6.2.4","babel-polyfill":"^6.16.0","babel-preset-es2015":"^6.6.0",backbone:"^1.3.2","backbone-virtualized-listview":"~0.6.3",bluebird:"^3.5.1",bootstrap:"^3.3.6","bootstrap-webpack":"0.0.5",chai:"^3.5.0",coveralls:"^2.11.11","css-loader":"^0.23.1",del:"^2.2.0",eslint:"^2.5.1","eslint-config-xo":"^0.12.0","eslint-config-xo-space":"^0.11.0","exports-loader":"^0.6.3","extract-text-webpack-plugin":"^1.0.1","fast-binary-indexed-tree":"~1.0.0","file-loader":"^0.8.5",gulp:"^3.9.1","gulp-democase":"0.0.1","gulp-eslint":"^2.0.0","gulp-exclude-gitignore":"^1.0.0","gulp-jsdoc3":"^0.3.0","gulp-util":"^3.0.7","gulp-webdriver":"^2.0.1","imports-loader":"^0.6.5","isparta-loader":"^2.0.0","istanbul-instrumenter-loader":"^0.2.0",jade:"^1.11.0","jade-loader":"^0.8.0",jquery:"^2.2.2","js-data":"^2.9.0","js-data-http":"^2.2.2","json-loader":"^0.5.4",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-coverage-es6":"^0.2.7","karma-junit-reporter":"^1.1.0","karma-mocha":"^1.2.0","karma-mocha-reporter":"^2.2.0","karma-phantomjs-launcher":"^1.0.2","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.8.0",knockout:"^3.4.0",less:"^2.6.1","less-loader":"^2.2.3",lodash:"^4.6.1",mocha:"^2.4.5","node-static":"^0.7.7","pagination-control":"~0.1.0","phantomjs-prebuilt":"^2.1.7",requirejs:"^2.2.0",resolve:"^1.1.7",sinon:"^1.17.6","sinon-chai":"^2.8.0","source-map-loader":"^0.1.5","style-loader":"^0.13.1",underscore:"^1.8.3","url-loader":"^0.5.7","wdio-dot-reporter":"0.0.5","wdio-junit-reporter":"0.0.2","wdio-mocha-framework":"^0.5.9",webdriverio:"^4.0.5",webpack:"^1.12.14","webpack-stream":"^3.1.0"},peerDependencies:{backbone:"^1.3.2","backbone-virtualized-listview":"~0.6.2",bluebird:"^3.3.4","fast-binary-indexed-tree":"~1.0.0",jquery:"^2.2.2","js-data":"^2.9.0",knockout:"^3.4.0",underscore:"^1.8.3"}}}])},e.exports=n(i("UT4o"),i("5iHu"),i("syDw"),i("/xyZ"),i("0C+9"))},xGfE:function(e,t,i){"use strict";var n=i("nN5v"),a=i("ePzV"),r=i("23d6"),o=i("Pb1Y"),s=i("2ndk"),l=i("Vwpy"),c=i("UT4o"),d=i.n(c),u=i("syDw"),p=i.n(u),g=i("7XbR"),h=i.n(g),m=i("/xyZ"),f=i.n(m),v=i("YK3D"),b=i.n(v),y=i("+LXR"),S=i.n(y),w=i("5C8L"),C=i.n(w),x=i("Q5Xd"),k=i("Q3lO"),A=window.globalLegacyI18n.get("component/i18n/loader!component/language-selector"),T=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),_=function e(t){var i=this,a=t.isNewUI,r=t.isDSAMixedModeCampaignEnabled,o=t.supportCashbackSettings,s=void 0!==o&&o;Object(n.a)(this,e),C.a.properties(this,x.AdGroup,["Id","Name","Language","AdGroupType"]),this.supportCashbackSettings=h.a.observable(a&&s),this.dataLoaded=h.a.observable(!1),this.hideLanguage=h.a.computed(function(){return d.a.contains(["shopping"],Object(k.default)())||r&&"search"===Object(k.default)()&&"SearchDynamic"===i.AdGroupType()}),this.isNewUI=h.a.observable(a),this.isDSAMixedModeCampaignEnabled=r,this.shouldShowAdGroupType=h.a.computed(function(){return i.isDSAMixedModeCampaignEnabled&&d.a.contains(["search"],Object(k.default)())}),this.languageString=h.a.computed(function(){var e=i.Language()?"Language_".concat(i.Language()):"Language_Inherit";return A.getString(e)}),this.adGroupTypeString=h.a.computed(function(){return"Unknown"===i.AdGroupType()?"-":T.getString("AdGroupType_".concat(i.AdGroupType()))}),this.enableLanguageSelection=h.a.computed(function(){return!i.hideLanguage()&&"search"===Object(k.default)()}),this.showHighLatencyAlert=h.a.observable(!1)},E=i("WkF7"),I=i("eakW"),O=i("nlAS"),P=i.n(O),M=i("1EwD"),j=i.n(M),L=i("DXRr"),D=i("fE/Z"),R=i("IbLZ"),N=i("2wXG"),V=i("0cl2"),B=i("NkAx"),F=i.n(B),U=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.mutables,r=void 0===a?[]:a,o=i.model,s=void 0===o?{}:o;Object(n.a)(this,e),this.mutables=r,this.memo=s,this.model=new p.a.Model,this.model.set(s),this.keys=d.a.keys(s),d.a.each(this.mutables,function(e,i){d.a.defaults(e,{hasChanges:function(e){return!d.a.isEqual(t.memo[i],e)}})})}return Object(a.a)(e,[{key:"get",value:function(){var e;return(e=this.model).get.apply(e,arguments)}},{key:"set",value:function(){var e;return d.a.isObject(arguments.length<=0?void 0:arguments[0])?this.addKeys(d.a.keys(arguments.length<=0?void 0:arguments[0])):d.a.isString(arguments.length<=0?void 0:arguments[0])&&this.addKeys(arguments.length<=0?void 0:arguments[0]),(e=this.model).set.apply(e,arguments)}},{key:"setKeys",value:function(e){return d.a.isArray(e)&&(this.keys=e),this}},{key:"addKeys",value:function(e){var t=[];d.a.isString(e)?t=[e]:d.a.isArray(e)&&(t=e),this.keys=d.a.union(this.keys,t)}},{key:"getIncremental",value:function(e){var t=this,i=d.a.isArray(e)&&!d.a.isEmpty(e)?e:this.keys;if(this.model){var n={};return d.a.each(i,function(e){var i=t.mutables[e],a=t.model.get(e);i&&!i.hasChanges(a)||(n[e]=a)}),n}return{}}}]),e}(),G=i("UcGB"),z=i("+PqR"),H=i.n(z),W=i("TNmU"),q=i("yN9e"),$=i.n(q),K=i("WLWg"),J=i("BPWY"),Z=i.n(J),Y=i("ZhOl"),Q=i.n(Y),X=i("Jvlg"),ee=i("dOXU"),te=i("Wgcp"),ie=i("J3Zd"),ne=i("0e0T"),ae=i("OvMV"),re=i("h5F/"),oe=i("kLlV");i.d(t,"a",function(){return ge});var se=window.globalLegacyI18n.get("component/i18n/loader!campaignui/campaign-creation-advanced"),le=b.a.Permissions.IsArabicLanguageEnabledInMultipleLanguage,ce=b.a.Permissions.IsSimplifiedChineseLanguageEnabledInMultipleLanguage,de=b.a.Permissions.IsSPAv2Enabled,ue=b.a.Permissions.IsManualBiddingDeprecationEnabled,pe=b.a.Permissions.IsDSAMixedModeCampaignEnabled,ge=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(a.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.perfMarker&&(this.adGroupScopePerfMarker=e.perfMarker.createChild("AdGroupScope_AllSettings_EditAdGroup")),this.mark("willInit");var t=d.a.chain(e.deps).result("router",{}).value();this.navigateToRoute=t.navigateToRoute||d.a.noop,this.deps=e.deps||{},this.isNewUI=d.a.result(this.deps,"isNewUI",!1);var i=ae.default["".concat(Object(k.default)(),"AdGroupSettings")].create();this.activity=i.adGroupSettings.create(),this.viewModel=new _({isNewUI:this.isNewUI,isDSAMixedModeCampaignEnabled:pe,supportCashbackSettings:!1})}},{key:"renderLocationTargets",value:function(){var e=this;this.locationTargetsView=new R.default({scenario:"adgroup-settings",level:"adgroup",campaignId:b.a.CurrentCampaign.Id,adgroupId:b.a.CurrentAdGroup.Id,popupIds:{Location:"pop_BA_AdGroup_Settings_LocationTargeting"},showInitialUiBlocker:!1,deps:this.deps,supportCashbackSettings:this.supportCashbackSettings,isForVNext:this.isNewUI}),this.locationTargetsView.on("end:refresh",function(){e.languageLocationConnector=new I.a(e.viewModel.Language,e.bidView,e.advancedSettingsView.adDistributionView,!1,e.locationTargetsView.viewmodel.useCampaignSettings()),e.viewModel.enableLanguageSelection()&&e.languageLocationConnector.setLanguageSet(e.languages),e.adDistribution===K.a.BingYahooAndSearchPartners&&e.languageLocationConnector.isSyndicationAllowed()})}},{key:"renderAdvancedSettings",value:function(e,t){this.advancedSettingsView=new V.default({scenario:"adgroup-settings",level:"adgroup",campaignId:b.a.CurrentCampaign.Id,adgroupId:b.a.CurrentAdGroup.Id,nativeAdsCampaignBid:e.NativeBidAdjustment,nativeAdsAdgroupBid:t.NativeBidAdjustment,multimediaAdsCampaignBid:e.MultiMediaAdBidAdjustment,multimediaAdsAdgroupBid:t.MultiMediaAdBidAdjustment,model:t,languages:e.Languages,TimeZone:e.TimeZone,campaignType:Object(k.default)(),campaignSubType:this.isSponsoredCampaign()?"ShoppingSponsoredProductAd":null,campaignBiddingStrategy:e.BiddingScheme.Type,campaignAdScheduleUseSearcherTimeZone:e.AdScheduleUseSearcherTimeZone,isNewUI:this.isNewUI,supportCashbackSettings:this.supportCashbackSettings}),this.$(".advanced-settings-section").html(this.advancedSettingsView.render().el)}},{key:"isSponsoredCampaign",value:function(){return de&&b.a.CurrentCampaign&&11===b.a.CurrentCampaign.CampaignSubType}},{key:"renderBiddingStrategy",value:function(e){Object(te.b)()&&"BidBoost"===d.a.first(e.Settings).BidOption||(this.biddingStrategyView=ue?new W.default({entityType:"AdGroup",biddingStrategyType:e.BiddingScheme.Type,campaignType:Object(k.default)(),campaignSubType:b.a.CurrentCampaign.CampaignSubType,campaignBiddingStrategyType:d.a.chain(b.a.CurrentCampaign).result("BiddingScheme").result("Type").value()}):new W.default({entityType:"AdGroup",biddingStrategyType:e.BiddingScheme.Type,campaignBiddingStrategyType:d.a.chain(b.a.CurrentCampaign).result("BiddingScheme").result("Type").value()}),this.isSponsoredCampaign()||this.$(".bidding-strategy__container").empty().html(this.biddingStrategyView.render().el))}},{key:"notShowBidView",value:function(e){return d.a.chain(e).result("BiddingScheme").result("Type").value()===$.a.costPerSale}},{key:"renderBidView",value:function(e,t){this.notShowBidView(e)?this.$(".bid-block").hide():(this.bidView=new E.a({showTrafficEstimation:!1,adgroup:t,languages:e.Languages,campaign:e}),this.biddingStrategyView?this.bidView.resetIsAutoBidding(this.biddingStrategyView.getValues().Type):t.BiddingScheme&&this.bidView.resetIsAutoBidding(t.BiddingScheme.Type),this.$(".bid-section").append(this.bidView.render().el))}},{key:"renderLanguageSelector",value:function(e,t){var i=this,n={enableArabic:le,enableSimplifiedChinese:ce,withInheritOption:!d.a.isEmpty(this.languages),i18nStrings:{SaveWarning:""},el:this.$(".adgroup-language")[0],language:t.Language,IsAdsGlobalizationPhase1Enabled:b.a.Permissions.IsAdsGlobalizationPhase1Enabled,IsAdsGlobalizationPhase2Enabled:b.a.Permissions.IsAdsGlobalizationPhase2Enabled};this.languageSelector=new N.default(n),G.default.on("language:changed",function(e){i.viewModel.Language(e)}),h.a.cleanNode(this.$(".adgroup-language")[0]),this.languageSelector.render()}},{key:"renderCpgAdGroupType",value:function(e){this.cpgAdGroupType=new X.a(d.a.first(e.Settings)),this.isSponsoredCampaign()||this.$(".cpg-adgroup-type__container").append(this.cpgAdGroupType.render().el),this.cpgBidSection=new ee.a(e),this.$(".cpg-bid-section__container").append(this.cpgBidSection.render().el)}},{key:"renderAdGroupTargets",value:function(e,t){var i=this,n=new re.AudienceTargetInfo({resourceName:"AdGroupCriterion",listenToLocationCriterion:!1,useLocationControl:!1,initAudienceAssociationView:!1}),a=new re.AudienceTargetInfo({resourceName:"CampaignCriterion",listenToLocationCriterion:!1,useLocationControl:!1,initAudienceAssociationView:!1});return f.a.all([n.fetchCriterions(e.Id,t.Id),a.fetchCriterions(e.Id)]).then(function(){return i.adGroupTargetsView=new re.AudienceAdvancedTargetSettings({viewContext:{accountCurrencyCode:b.a.AccountCurrencyCode,currentCampaign:e,currentAdGroup:t,level:"adgroup"},scenario:"adgroup-settings",currentLevelTargetInfo:n,parentLevelTargetInfo:a,supportCashbackSettings:i.supportCashbackSettings}),i.$(".adgroup-targets").append(i.adGroupTargetsView.render().el),i.locationTargetsView?(i.adGroupTargetsView.$(".location-setting-controller").append(i.locationTargetsView.render().el),i.locationTargetsView.initialLoadTask):null})}},{key:"initCashbackSettingsView",value:function(e,t){if(this.supportCashbackSettings){var i=d.a.chain(e).result("AdGroupCashback").result("Percent",null).value(),n=d.a.chain(e).result("AdGroupCashback").result("CouponsEnabled","None").value(),a=d.a.chain(e).result("AdGroupCashback").result("Scope").value()||"None",r=d.a.chain(t).result("CampaignCashback").result("Percent",null).value(),o=d.a.chain(t).result("CampaignCashback").result("Scope").value()||"None",s=d.a.chain(t).result("CampaignCashback").result("CouponsEnabled","None").value();this.cashbackSettingsView=new ie.CashbackSettings({CashbackPercent:i,CashbackScope:a,showCashbackBudget:!1,showEnableCashbackSettingsCheckbox:!1,showInheritFromParentOption:!0,isCashbackScopeReadonly:"shopping"!==Object(k.default)(),showCoupon:"shopping"===Object(k.default)(),ParentLevelCashbackPercent:r,ParentLevelCashbackScope:o,CouponsEnabled:n,ParentCouponsEnabled:s,deps:{decimal:z,i18n:se,pageContext:b.a}})}}},{key:"onCashbackPercentChange",value:function(e){if(this.cashbackSettingsView.viewModel.validateCashbackPercent(e)){var t=""===e||null==e?null:z.fromLocalToFloat(e);this.adGroupTargetsView&&this.adGroupTargetsView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:t}),this.locationTargetsView&&this.locationTargetsView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:t}),this.advancedSettingsView&&this.advancedSettingsView.adScheduleView&&this.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:t})}}},{key:"render",value:function(){var e=this;return this.$el.html(S()({i18n:se})),h.a.applyBindings(this.viewModel,this.el),b.a&&b.a.CurrentCampaign&&b.a.CurrentCampaign.Id&&b.a.CurrentAdGroup&&b.a.CurrentAdGroup.Id?(this.hideUIBlocker=j()(this.$(".adgroup-settings-page")),this.mark("willFetchData"),f.a.join(P.a.AdGroup.find(Number(b.a.CurrentAdGroup.Id),{entitySet:D.default.currentCampaign.AdGroups,bypassCache:!0}),P.a.Campaign.find(Number(b.a.CurrentCampaign.Id),{queryParameters:{entitySet:D.default.currentAccount.Campaigns,expand:["Budget"]},bypassCache:!0}),function(t,i){return e.mark("willRender"),d.a.has(t,"Id")?(e.supportCashbackSettings=Object(ne.shouldSupportCashbackSettings)(i)&&!e.isSponsoredCampaign(),e.mutableModel=new U(function(e,t){function i(e){return d.a.property(e)(t.mutableModel.memo)}return{mutables:{Language:{},Medium:{},NativeBidAdjustment:{},TrackingUrlTemplate:{},UrlCustomParameters:{hasChanges:function(e){return(!d.a.isEmpty(e)||!d.a.isEmpty(i("UrlCustomParameters")))&&!d.a.isEqual(e,i("UrlCustomParameters"))}},AdRotation:{hasChanges:function(e){return!i("AdRotation")||e!==i("AdRotation").RotationType}},AdDistribution:{},SearchBid:{hasChanges:function(e){return H.a.fromLocalToFloat(e)!==H.a.fromLocalToFloat(i("SearchBid"))}},ContentBid:{hasChanges:function(e){return H.a.fromLocalToFloat(e)!==H.a.fromLocalToFloat(i("ContentBid"))}}},model:e}}(t,e)),e.viewModel.dataLoaded(!0),e.viewModel.setModel(t),e.viewModel.supportCashbackSettings(e.supportCashbackSettings),e.supportCashbackSettings&&(e.initCashbackSettingsView(t,i),e.$(".cashback-settings-container").empty().append(e.cashbackSettingsView.render().$el),e.cashbackSettingsView.viewModel.CashbackPercent.subscribe(function(t){if(e.cashbackSettingsView.viewModel.validateCashbackPercent(t)){var i=""===t||null==t?null:+t;e.adGroupTargetsView&&e.adGroupTargetsView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:i}),e.locationTargetsView&&e.locationTargetsView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:i}),e.advancedSettingsView&&e.advancedSettingsView.adScheduleView&&e.advancedSettingsView.adScheduleView.toggleCashbackPercentColumns(!0,{level:"AdGroup",value:i})}})),e.languages=d.a.isEmpty(i.Languages)?[]:i.Languages,e.viewModel.enableLanguageSelection()&&e.renderLanguageSelector(i,t),Object(te.b)()?e.renderCpgAdGroupType(t):e.renderBidView(i,t),("shopping"===Object(k.default)()||pe&&"search"===Object(k.default)()&&(1===b.a.CurrentAdGroup.AdGroupType||"SearchStandard"===b.a.CurrentAdGroup.AdGroupType)||!pe&&"search"===Object(k.default)())&&e.renderBiddingStrategy(t),e.biddingStrategyView&&e.$(".bidding-strategy__container")[0].addEventListener("change",function(){e.bidView&&e.bidView.resetIsAutoBidding(e.biddingStrategyView.getValues().Type)},!1),e.renderAdvancedSettings(i,t),e.medium=t.Medium,e.adDistribution=t.AdDistribution,e.renderLocationTargets(),e.renderAdGroupTargets(i,t)):(e.viewModel.errors.add(),null)}).catch(function(){e.viewModel.errors.add()}).finally(function(){e.hideUIBlocker(),e.mark("done")}),this):(Z.a.logMessage([Q.a.LOGCATEGORY.TRACE],Q.a.LOGLEVEL.INFO,"loadAdGroupSettingsPage",JSON.stringify(b.a)),this.viewModel.errors.add(),null)}},{key:"validate",value:function(){return d.a.reduce([this.viewModel.validate(),!this.bidView||this.bidView.validate(),this.advancedSettingsView.validate(),!this.locationTargetsView||this.locationTargetsView.validate(),!this.biddingStrategyView||this.biddingStrategyView.validate(),!this.cpgBidSection||this.cpgBidSection.validate(),!this.adGroupTargetsView||this.adGroupTargetsView.validate(),!this.cashbackSettingsView||this.cashbackSettingsView.validate()],function(e,t){return e&&t},!0)}},{key:"checkIMAReachAndSave",value:function(){var e=this,t=f.a.resolve(!1);if(this.validate()){var i=this.getLocationCriterion(),n=d.a.filter(i,function(e){return e&&("Location"===e.CriterionType||"Radius"===e.CriterionType)}),a=n&&n.length>0,r=this.getAllAdGroupLocationCriterion()||[];if(a&&b.a.Permissions.IsIMAReachRepresentationPhase1Enabled&&this.isNewUI&&r.length>0){var o=Object(oe.b)(r);t=Object(oe.e)({locationsInfo:o,onYes:function(){return e.save()},deliveryChannel:"audience"===Object(k.default)()?"AIM":"BingAds",campaignId:b.a.CurrentCampaign.Id,adGroupId:b.a.CurrentAdGroup.Id,i18n:se,aid:b.a.CurrentAccount.Id,cid:b.a.CurrentAccount.AdvertiserCustomerID})}t.then(function(t){t||e.save()})}}},{key:"getAllAdGroupLocationCriterion",value:function(){var e=[];if(this.locationTargetsView){var t=this.locationTargetsView.getValues({level:"adgroup"},{keepAllLocations:!0});if(t.locations=d.a.filter(t.locations,function(e){return"Deleted"!==e.Status}),0===t.locations.length&&this.locationTargetsView.campaignCriterions&&this.locationTargetsView.campaignCriterions.length>0){var i=Object(oe.c)(this.locationTargetsView.campaignCriterions);t=d.a.extend(t,i)}e=e.concat(t.locations).concat(t.intent)}if(this.adGroupTargetsView){var n=this.adGroupTargetsView.getAllLocations()||[];if(!d.a.isEmpty(n)){n=d.a.filter(n,function(e){return"Deleted"!==e.Status});var a=d.a.filter(n,function(e){return"LocationIntentCriterion"!==e.CriterionType}),r=this.adGroupTargetsView.getCampaignLocationCriterions();if(0===a.length&&r&&r.length>0){var o=Object(oe.c)(r);return o.locations.concat(o.intent)}}e=e.concat(n)}return e}},{key:"getLocationCriterion",value:function(){var e=[];if(this.locationTargetsView){var t=this.locationTargetsView.getValues({level:"adgroup"});e=e.concat(t.locations).concat(t.intent).concat(t.deletedLocations||[])}if(this.adGroupTargetsView){var i=this.adGroupTargetsView.getData(),n=d.a.result(i,"AdGroupCriterions",[]);e=e.concat(n)}return e}},{key:"save",value:function(){var e=this;this.clearApiErrors();var t=d.a.defaults(this.viewModel.toObject(),this.bidView?this.bidView.getValues():{});t.Campaign={Id:b.a.CurrentCampaign.Id},this.biddingStrategyView&&(this.isSponsoredCampaign()?t.BiddingScheme={Type:"ManualCpc"}:t.BiddingScheme=this.biddingStrategyView.getValues());var i=this.getLocationCriterion(),n=this.advancedSettingsView.getValues(),a=n.deviceTargets.concat(n.ageTargets).concat(n.genderTargets).concat(n.scheduling);a=d.a.map(a,function(e){return d.a.extendOwn(e,{AdGroup:{Id:b.a.CurrentAdGroup.Id}})}),t.AdGroupCriterions=i.concat(a),d.a.extend(t,n.urlOptions,n.netWorkOptions,n.adRotation,n.dateSettings,n.nativeAds,n.multimediaAds),d.a.isBoolean(n.adScheduleUseSearcherTimeZone)&&(t.AdScheduleUseSearcherTimeZone=n.adScheduleUseSearcherTimeZone),this.cpgBidSection&&(t=this.cpgBidSection.getValues(t)),this.mutableModel.set(t),t=this.mutableModel.getIncremental(d.a.keys(t));d.a.size(t.AdGroupCriterions)>3e3&&this.viewModel.showHighLatencyAlert(!0),this.cashbackSettingsView&&d.a.extend(t,this.cashbackSettingsView.getValues());var r=d.a.chain(t.AdGroupCriterions).groupBy(function(e,t){return Math.floor(t/1e3)}).toArray().value(),o={reqs:d.a.map(r,function(e){return{Id:t.Id,data:d.a.extend({},t,{AdGroupCriterions:e})}})};P.a.AdGroup.update(t.Id,o,{adapter:"bulk",cacheResponse:!1,overrideResponse:!0,batch:!0,processResponse:function(e){var t=d.a.reduce(e,function(e,t){return e.concat(t.AdGroupCriterions)},[]);return d.a.extend({},d.a.first(e),{AdGroupCriterions:t})}}).then(function(i){return e.advancedSettingsView.setData(i),Object(ne.logAdGroupPersonalizedOffers)(e.supportCashbackSettings,e.activity.signal.bind(e.activity),t),e.advancedSettingsView.exclusionsUpdated()?e.advancedSettingsView.saveExtensions():{}}).then(function(){F.a.getContext("/campaign/newadgroup/edit?"),window.App.trigger("adGroupUpdated",{data:[{Id:Number(t.Id),Name:t.Name,CampaignId:t.Campaign.Id,AccountId:b.a.CurrentAccount.Id,Bidding:{Type:0}}]}),e.navigateToRoute("adgroup_ad",{campaign_id:t.Campaign.Id,adgroup_id:t.Id})}).catch(function(t){e.handleApiErrors(t)}).finally(j()(this.$(".adgroup-settings-page")))}},{key:"clearApiErrors",value:function(){this.advancedSettingsView.clearApiErrors(),this.viewModel.errors.clear(L.isCampaignApiError)}},{key:"handleApiErrors",value:function(e){if(d.a.isUndefined(e)||d.a.isNull(e))this.viewModel.errors.add();else if(!e.errors||e.entity){if("exclusion error"!==e){L.getPartial(e);var t=d.a.reject(e.entity.errors,function(e){return d.a.contains(["TrackingUrlTemplate","UrlCustomParameters"],e.property)});this.advancedSettingsView.setData(e),this.advancedSettingsView.handleErrors(e),this.viewModel.errors.add(t),this.locationTargetsView&&this.locationTargetsView.handleApiErrorsForAdGroupLevel(b.a.CurrentAdGroup.Id)}}else this.viewModel.errors.add(L.getODataErrors(e.errors))}},{key:"cancel",value:function(){var e=b.a.CurrentAdGroup?b.a.CurrentAdGroup.Id:void 0;this.navigateToRoute("adgroup_ad",{campaign_id:b.a.CurrentCampaign.Id,adgroup_id:e})}},{key:"remove",value:function(){this.languageLocationConnector&&this.languageLocationConnector.stopListening(),this.locationTargetsView&&this.locationTargetsView.remove(),this.adGroupTargetsView&&this.adGroupTargetsView.remove(),Object(s.a)(Object(o.a)(t.prototype),"remove",this).call(this)}},{key:"mark",value:function(e){this.adGroupScopePerfMarker&&this.adGroupScopePerfMarker[e]()}},{key:"events",get:function(){return{"click .btn-save":"checkIMAReachAndSave","click .btn-cancel":"cancel"}}}]),t}(p.a.View)},xQcn:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t="UserPaused"==e.Status||"BudgetUserPaused"==e.Status||"BudgetPaused"==e.Status?t+'<div class="statusPaused_icon shared-budgets-grid-status-icon"'+n.attr("aria-label",e.i18n.get("SharedBudget_SwitchEditor_Status_Paused"),!0,!0)+"></div>":"Deleted"==e.Status?t+'<div class="statusDeleted_icon shared-budgets-grid-status-icon"'+n.attr("aria-label",e.i18n.get("SharedBudget_SwitchEditor_Status_Deleted"),!0,!0)+"></div>":"Suspended"==e.Status?t+'<div class="statusSuspended_icon shared-budgets-grid-status-icon"'+n.attr("aria-label",e.i18n.get("SharedBudget_SwitchEditor_Status_Suspended"),!0,!0)+"></div>":t+'<div class="statusEnabled_icon shared-budgets-grid-status-icon"'+n.attr("aria-label",e.i18n.get("SharedBudget_SwitchEditor_Status_Enabled"),!0,!0)+"></div>"}.call(this,"model"in i?i.model:"undefined"!==typeof model?model:void 0),t}},xS7C:function(e,t,i){"use strict";i.d(t,"a",function(){return w});var n=i("23d6"),a=i("Pb1Y"),r=i("Vwpy"),o=i("nN5v"),s=i("ePzV"),l=i("UT4o"),c=i.n(l),d=i("/xyZ"),u=i.n(d),p=i("DXRr"),g=i("nlAS"),h=i.n(g),m=i("fE/Z"),f=i("89Mx"),v=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared"),b=window.globalLegacyI18n.get("$/schema-i18n!campaign"),y=function(){function e(t){Object(o.a)(this,e),this.type=t.name}return Object(s.a)(e,[{key:"toString",value:function(){return v.get("AdExtensionEditor_FailedToSave",{type:b.type(this.type)})}}]),e}(),S={},w=function(e){function t(e){var i;return Object(o.a)(this,t),(i=Object(n.a)(this,Object(a.a)(t).call(this,e)))._schema=e.schema,i._store=h.a[i._schema.name],i.dataFormatter=e.extensionDataFormatter,i.afterChangeComitted=e.afterChangeComitted,i.skipExtensionCache=e.skipExtensionCache,i.getODataErrors=e.getODataErrors||p.getODataErrors,c.a.has(S,i._schema.name)||(S[i._schema.name]=!1),i}return Object(r.a)(t,e),Object(s.a)(t,[{key:"storeOptions",value:function(){return{entitySet:m.default.currentAccount.AdExtensions,cacheResponse:!1}}},{key:"isNew",value:function(e){return c.a.isEmpty(e)||c.a.isUndefined(e[this._schema.key])}},{key:"create",value:function(e){var t=this,i=!c.a.isUndefined(e.Id),n=this._schema,a=this._schema.key;return this._store.create(e,this.storeOptions()).catch(function(e){if(e&&!c.a.isEmpty(e.errors))throw t.getODataErrors(e.errors);throw new y(n)}).then(function(r){if(S[t._schema.name]=!1,i&&0===r.value)return e;if(!i&&c.a.isNumber(r.value)&&r.value>0){var o=c.a.clone(e);return o[a]=r.value,o}throw new y(n)}).tap(this.afterChangeComitted)}},{key:"find",value:function(e){return this._store.find(Number(e),this.storeOptions())}},{key:"findAll",value:function(e){var t=this,i=this.dataFormatter,n=this.storeOptions();return c.a.extend(n,{bypassCache:!0}),e=this.adaptParams(e),S[this._schema.name]&&!this.skipExtensionCache||(n.headers=c.a.extend(n.headers||{},{"x-ms-refreshcampaigncache":"true"})),this._store.findAll(e,n).then(function(e){if(S[t._schema.name]=!0,e.status>=400)throw{errors:[e],type:"odata"};return u.a.props({items:i(e),total:e.totalCount})})}},{key:"destroy",value:function(e){var t=this;return this._store.destroy(Number(e),this.storeOptions()).then(function(e){return S[t._schema.name]=!1,e}).tap(this.afterChangeComitted)}}]),t}(f.a);w.prototype.BadResponseError=y},xXwY:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a){i=i+'<div class="success-dialog"><div class="success-dialog__header"><h2>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_OnHold_Title"))?"":t)+'</h2></div><div class="success-dialog__content"><h4>'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_OnHold_DescriptionLine1"))?"":t)+"</h4><h4>"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_OnHold_DescriptionLine2"))?"":t)+'</h4><div class="dialog-diagram"><div class="dialog-diagram__bar"><span class="campaign-creation-status-icon-active"></span><div class="horizontal-line-1of3rd horizontal-line-success"></div><span class="campaign-creation-status-icon-danger"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span><div class="horizontal-line-1of3rd"></div><span class="campaign-creation-status-icon-inactive"></span></div><div class="dialog-diagram__row"><span class="dialog-diagram__row__cell campaign-creation-status-text-active">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_CreateCampaign"))?"":t)+'</span><span class="dialog-diagram__row__cell campaign-creation-status-text-danger">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_AccountOnHold"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_InReview"))?"":t)+'</span><span class="dialog-diagram__row__cell">'+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Progress_Approved"))?"":t)+'</span></div></div><div class="dialog-form"><div class="dialog-form__row"><div class="dialog-form__row__cell"></div><div class="dialog-form__row__cell"><a class="btn btn-default"'+n.attr("href",e,!0,!0)+">"+n.escape(null==(t=a.getString("CampaignCreationSuccessDialog_Button_FixIt"))?"":t)+'</a></div><div class="dialog-form__row__cell"></div></div></div></div><div class="success-dialog__footer"></div></div>'}.call(this,"hrefFixIt"in a?a.hrefFixIt:"undefined"!==typeof hrefFixIt?hrefFixIt:void 0,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0),i}},xlyl:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o){a.urlResultRow=t=function(e,a,r,o,s){this&&this.block,this&&this.attributes,i+='<div class="uurl-result-section"><div class="uurl-result-left">',e&&(i=i+'<span class="uurl-result-row-title">'+n.escape(null==(t=e)?"":t)+"</span>"),i=i+"<span"+(n.attr("class",n.classes(["uurl-result-hover-link",s],[!1,!0]),!1,!0)+n.attr("title",a,!0,!0))+">"+n.escape(null==(t=a)?"":t)+'</span></div><div class="uurl-result-right">';var l=s+"Result";i=0==r?i+'<span class="status-icon"><div class="glyph-status-ok page-found-icon"></div></span><div'+n.attr("class",n.classes(["result-string",l],[!1,!0]),!1,!0)+">"+n.escape(null==(t=o)?"":t)+"</div>":i+'<span class="status-icon"><div class="status_warning"></div></span><div'+n.attr("class",n.classes(["result-string",l],[!1,!0]),!1,!0)+">"+n.escape(null==(t=o)?"":t)+"</div>",i+="</div></div>"},i=i+'<div class="uurl-result-section"><dt><span class="tracking-template-title">'+n.escape(null==(t=e.get("UURLTestTool_Title_TrackingTemplate_Colon"))?"":t)+'</span><div class="result-trackingTemplate">',i=(i=r.trackingTemplate&&r.trackingTemplate.Value?i+'<span class="uurl-url result-trackingTemplate" style="font-weight: normal">'+n.escape(null==(t=r.trackingTemplate.Value)?"":t)+"</span>":o.trackingTemplate&&o.trackingTemplate.Value?i+'<span class="uurl-url result-trackingTemplate" style="font-weight: normal">'+n.escape(null==(t=o.trackingTemplate.Value)?"":t)+"</span>":i+'<span class="uurl-url result-trackingTemplate" style="font-weight: normal">'+n.escape(null==(t=e.get("UURLTestTool_Title_TrackingTemplate_None"))?"":t)+"</span>")+'</div></dt></div><div class="uurl-result-header"><div class="uurl-result-left"><div class="uurl-result-header-text">'+n.escape(null==(t=e.get("UURLTestTool_ClickURLs"))?"":t)+'</div></div><div class="uurl-result-right"><div class="uurl-result-header-text" style="display: inline-block; margin-right: 5px;">'+n.escape(null==(t=e.get("UURLTestTool_Status"))?"":t)+'</div><a class="HelpTopic" query="help:app54560" href="javascript:void(0);">'+n.escape(null==(t=e.get("LearnMore"))?"":t)+'</a></div></div><div class="uurl-result-list-container">',r.trackingTemplate&&r.trackingTemplate.Value&&(i=i+'<div class="uurl-result-section" style="margin-top: 16px;"><div class="uurl-result-left"><dt style="display: inline-block; margin-right: 3px;">'+n.escape(null==(t=e.get("UURLTestTool_With_ParallelTracking"))?"":t)+'</dt><a class="helpbutton" type="helppopup" topic="pop_BA_URLoptions_ParallelTracking" onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);" aria-label="Learn more Parallel Tracking"></a></div></div>',a.urlResultRow(e.get("UURLTestTool_LandingPage_URL")+"  ",r.landingUrl?r.landingUrl.Value:r.servingUrl?r.servingUrl.Value:"",r.resultType,r.resultString,"ptLandingUrl"),a.urlResultRow(e.get("UURLTestTool_Tracking_URL")+"  ",r.trackingUrl?r.trackingUrl.Value:"",r.trackingResultType,r.trackingResultString,"ptTrackingUrl"),i=i+'<div class="uurl-result-section" style="margin-top: 16px;"><div class="uurl-result-left"><dt>'+n.escape(null==(t=e.get("UURLTestTool_When_ParallelTracking_Is_Not_Supported"))?"":t)+"</dt></div></div>"),a.urlResultRow("",o.servingUrl?o.servingUrl.Value:"",o.resultType,o.resultString,"sqServingUrl"),i+="</div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"pt"in r?r.pt:"undefined"!==typeof pt?pt:void 0,"sq"in r?r.sq:"undefined"!==typeof sq?sq:void 0),i}},yZn0:function(e,t,i){"use strict";var n=function(){return{".advanced-settings-section .form-group .col-sm-10 .camp-adg-shared-text-under-dropdown":{marginBottom:"0px",marginTop:"6px"},".audience-advanced-settings .form-group .col-sm-10 .camp-adg-shared-text-under-dropdown":{marginBottom:"0px",marginTop:"6px"},".camp-adg-shared-label-spacing":{marginTop:"12px"},".camp-adg-shared-label":{fontWeight:"600"},".row .camp-adg-shared-instruction-spacing":{marginBottom:"10px"},".row .camp-adg-shared-first-textarea-spacing":{marginTop:"8px"},".row .camp-adg-shared-spacing-between-textareas":{marginTop:"35px"},".advanced-settings-section .form-group .ip-exclusion":{marginTop:"34px"},".camp-adg-shared-disabled-textarea":{backgroundColor:"#ffffff"},".camp-adg-shared-textarea":{borderWidth:"2px"},".camp-adg-shared-exclusions-dropdown":{marginLeft:"15px"}}},a=i("bgLp"),r=i("Nj9o"),o=function(e){var t=e.palette,i=e.iconFontFamily,n=void 0===i?"MsAds MDL2 Assets":i;return{".disclaimer-editor-panel":Object(a.a)({},Object(r.alertStyle)({palette:t,iconFontFamily:n}),{"& .panel-content":{width:592,"& .panel-title":{fontSize:20,fontWeight:"600 !important",lineHeight:"27px"},"& .panel-body":{paddingRight:64,display:"flex","flex-direction":"column","& .disclaimer-setting-content":{marginBottom:"auto"},"& .disclaimer-setting-footer":{marginTop:32,"& button ~ button":{marginLeft:10}}},"& .form-group":{margin:0,"& > .control-label":{textAlign:"left",float:"none",width:"100%"},"& > .col-sm-8":{width:"100%"}},"& .form-group ~ .form-group":{marginTop:32},"& .col-sm-1, & .col-sm-2, & .col-sm-3, & .col-sm-4, & .col-sm-5, & .col-sm-6, & .col-sm-7, & .col-sm-8, & .col-sm-9, & .col-sm-10, & .col-sm-11, & .col-sm-12":{float:"none",paddingLeft:0,paddingRight:0},"& .alert.alert-info":{marginTop:8},"& div.error":{color:"#A80000",margin:"4px 0 0 0",fontSize:12},"& .setting-disclaimer-layoutType .radio":{paddingTop:0},"& .dropdown-toggle.btn":{border:"none",width:"100%",height:"100%",paddingLeft:8,paddingRight:8,borderRadius:2},"& .ba-dropdown-selector":{position:"relative",border:"1px solid ".concat(t.neutralSecondary),minWidth:132,verticalAlign:"baseline",marginLeft:8,height:30,borderRadius:2,"& .glyphicon-triangle-bottom":{marginTop:4,"&::before":{content:'"\\E70D"'}}},"& .dropdown-menu":{top:"auto",position:"absolute",width:"100%",padding:"10px"},"& .ba-list-selector":{border:"none","& .list-selector-item":{padding:"5px 10px",margin:"0","&:hover":{cursor:"pointer",backgroundColor:"#f5f5f5"},"&.selected":{background:"#E7F0F6"},"& .item-actions":{float:"right"}}},"& textarea#disclaimer-editor-information-popup":{height:169,resize:"none"},"& textarea#disclaimer-editor-information-additionalline":{height:69,resize:"none"},"& .url-editor-form":{display:"flex",gridTemplateColumns:"auto 1fr","& > select.form-control":{width:"auto",marginRight:6},"& > input":{marginLeft:6}}}})}},s=function(e){var t=e.palette;return Object(a.a)({"& .language, & .bidding-strategy__container select.form-control":{width:461},"& .bidding-strategy__container":{"& .custom-param__key-field":{display:"inline-block",width:85,marginLeft:5,marginRight:5},"& #currencyLabelTargetRoas":{display:"inline"},"& #currencyLabelCostPerSale":{display:"inline"}},"& .cashback-settings":{"& .cashback-percent-container":{display:"flex","& .form-control.cashback-option-select":{width:180,marginRight:10},"& .cashback-input-container, & .cashback-inherit-container, & .inherit-cashback-value":{flex:1,display:"flex","& input":{width:90},"& .input-group-addon":{width:"auto",paddingTop:8}}}},"& .control-label":{lineHeight:1.5,marginTop:26},"& .control-label+.col-sm-4":{display:"table",width:"auto"},"& .location-targets":{"& .control-label":{marginTop:33},"& .form-horizontal":{"& > div:nth-child(2) .control-label":{marginTop:10},"& .location-target-physical-intent":{"& .control-label":{marginTop:"33px !important"}}},"& .form-group .col-sm-2":{display:"block"}},"& #AdvancedBudgetOptions":{marginTop:10},"& .copy-campaign-settings":{minWidth:400,marginBottom:4,"& .copy-settings":{paddingLeft:28}},"& .checkbox, .radio":{padding:0,height:"auto"},"& .checkbox-inline":{marginLeft:0},"& .checkbox label":{display:"inline-block"},'& .checkbox input[type="checkbox"], & .checkbox-inline input[type="checkbox"], & .radio input[type="radio"]':{float:"left",marginTop:3},"& .multi-language-selector":Object(a.a)({width:542,"& .alert":{width:"auto",lineHeight:1.5,margin:"8px 0",padding:8,boxShadow:"none"},"& .alert-image":{marginTop:3},"& .description":{paddingLeft:15},"& .container-fluid":{margin:0,padding:0},"& .target-suggested-language":{height:32,display:"table",background:"".concat(t.white),marginTop:10,verticalAlign:"middle",color:"#000000",border:"1px solid #8A8886",boxSizing:"border-box",borderRadius:2,padding:"0 16px",lineHeight:"30px",fontSize:14,fontWeight:600},"& .checkbox-inline":{paddingTop:8,paddingBottom:8},"& .alert-info.form-group":{"& .alert-info-inline":Object(a.a)({},Object(r.internalLinkStyle)({palette:t,elementLocator:"> a",isGreyBackground:!0}),{"& > a:focus":{border:0}})}},Object(r.underlineLinkStyle)({palette:t,elementLocator:"a.HelpTopic"}),{"& a.HelpTopic:focus":{border:0}}),"& .language-error-container .col-sm-2":{display:"none"},"& .dsa-switch-container label .text":{"white-space":"nowrap"}},function(e){var t=e.palette,i=e.iconFontFamily,n=void 0===i?"MsAds MDL2 Assets":i;return{"& .disclaimer__container .form-group":Object(a.a)({"& .form-control-static":{marginTop:8,marginBottom:8,position:"relative","& .addDisclaimerButton":{position:"absolute",left:0}},"& .alert.alert-info":{marginTop:5},"& .disclaimer-selector":{"& .list-selector-option":{"& .disclaimer-item-name":{display:"inline-block",maxWidth:120},"& .action-right":{float:"right"}},"& .open .dropdown-menu":{position:"relative"}}},Object(r.entitySelectorStyle)({palette:t,iconFontFamily:n}))}}({palette:t}))},l=function(e){var t=e.palette,i=void 0===t?{}:t;e.iconFontFamily;return{"& .campaign-settings__container":s({palette:i}),"& .dsa-switch-container, & .po-switch-container":{"& .checkbox-inline .text":{width:250},"& .HelpTopic":{marginLeft:5}}}},c=function(e){return{border:"1px solid ".concat(e.neutralSecondary),"&:focus":{border:"1px solid ".concat(e.themePrimary)}}},d=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n;return{"& .mixed-mode-adgroup-create .dynamic-ad-group-create-view-container .landing-page-container":{marginBottom:0},"& .mixed-mode-adgroup-create .HelpTopic":{marginLeft:5},"& .mixed-mode-adgroup-create .authoring-container label":{paddingLeft:28},"& .adgroups-keywords__container, .keyword-section":{"& .panel":{border:0,boxShadow:"none"},"& .landing-page-container":{width:447,padding:0,marginBottom:36,"&  .pull-left":{float:"none",display:"inline-block"},"&  .pull-left:nth-child(2)":{position:"absolute",top:68,left:-8,padding:[8,5,8,8],"&:focus-within":{outline:"1px solid #605E5C"},'& input[type="checkbox"]':{outline:"none"}},"& .landing-page-container__label":{fontSize:14},"& .landing-page-container__checkbox":{margin:"0 8px 0 0 !important",verticalAlign:"middle",position:"relative"},"&  div:nth-child(2)":{marginTop:8},"& .form-control":Object(a.a)({width:"100%"},c(i))},"& .ad-group-list-container":{width:460,padding:"8px 0 0 0",marginTop:18,marginBottom:80},"& .ad-group-list":{width:447,borderTop:"1px solid ".concat(i.neutralSecondary),padding:0},"& .ad-group-list-container .form-control, .adgroup__body .form-group":{width:416,"& input.adgroup-name, textarea.keyword-textarea":Object(a.a)({},c(i))},"& .adgroup__body":{padding:0,width:416,marginLeft:30,"& .form-group > #KoErrors":{marginLeft:0}},"& .ad-group-collapsible, .parser":{position:"relative","& textarea.error":{color:i.neutralSecondary}},"& .ad-group-list > .row":{position:"relative",paddingBotton:15,'& div[data-bind="visible: !isDeleted()"]':{borderBottom:"1px solid ".concat(i.neutralSecondary)}},"& .ad-group-list__col-sm-1--remove":{position:"absolute",top:8,right:0,zIndex:1,width:106,height:"32px",padding:0},"& .ad-group-list__col-sm-1--remove .glyphicon-remove":{fontFamily:r,fontSize:16,color:i.black,width:106,height:"32px",border:"1px solid #8A8886",borderRadius:2,padding:"2px 12px","&:hover":{textDecoration:"none",backgroundColor:i.neutralLighter},"&:focus":{outline:"1px solid ".concat(i.neutralSecondaryAlt),boxShadow:"inset 0 0 0 1px ".concat(i.neutralSecondary),outlineOffset:0,border:"2px solid ".concat(i.white)},"& span":{fontFamily:"Segoe UI,Tahoma,Geneva,Verdana,sans-serif",fontSize:14,fontWeight:600,color:i.neutralPrimary,lineHeight:"19px"}},"& .ad-group-list__col-sm-1--remove .glyphicon-remove:before":{content:'"\\E738"',position:"relative",top:5,paddingRight:8},"& .ad-group-list__col-sm-1--toggle":{marginTop:6,padding:0,width:30},"& .ad-group-list-container.ad-group--no-toggle":{"& .ad-group-list__col-sm-1--toggle":{display:"none"},"& .adgroup__body":{marginLeft:"0 !important",width:447,"& .form-group, .form-control":{width:447},"& input.adgroup-name, textarea.keyword-textarea":Object(a.a)({},c(i)),"& #Keyword_Bmm_Warning_Div":{padding:"8px 32px 8px 8px",marginBottom:8},"& #Keyword_Bmm_Block_Div":{padding:"8px 32px 8px 8px",marginBottom:8}},"& .ad-group-list__col-sm-1__label":{color:"#323130"}},"& .ad-group-list__glyphicon":{fontFamily:r,fontSize:18,color:i.themePrimary},"& .ad-group-list__col-sm-1--toggle .ad-group-list__glyphicon":{width:30},"& .glyphicon-chevron-down:before":{content:'"\\E76C"'},"& .glyphicon-chevron-up:before":{content:'"\\E70D"'},"& .ad-group-list__col-sm-1__label":{fontSize:14,color:i.themePrimary},"& .accordion-toggle.clickable":{"&:focus, &:hover":{backgroundColor:i.neutralLighter},"& .ad-group-list__col-sm-1__label":{fontSize:18}},"& .accordion-toggle":{marginTop:8,outline:"none"},'& .accordion-toggle[aria-expanded="false"] + .row':{"& .adgroup__body":{"& input.adgroup-name":{border:0,marginBottom:8,cursor:"default"},"& .remaining-hint":{display:"none"}}},"& .accordion-toggle .col-sm-10":{padding:0},"& .btn-create-adgroup":{marginTop:36,"&:focus":{left:1}},"& .ad-group-list__col-sm-1--toggle+.col-sm-9":{width:447,padding:0},"& .deletedConfirmation":{marginBottom:20,marginTop:20,overflowWrap:"anywhere"},"& .keyword-planner-root .keyword-planner-container .glyphicon.form-control-feedback":{fontFamily:r,width:12,height:38}}}},u=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,a=void 0===n?"MsAds MDL2 Assets":n;return{"& .budget-bid-settings":{marginBottom:"123px !important",borderBottom:"1px solid ".concat(i.neutralSecondary),"& .control-label:first-child:":{marginTop:26},"& .budget-suggestion-container":{display:"inline-block",border:"1px solid #0078d7",padding:"10px 8px",fontSize:"12px",height:"38.67px","& .iconba-Lightbulb":{marginRight:"8px",top:"-1px",color:"#0078d4",verticalAlign:"text-bottom"},"& .budget-suggestion":{marginRight:"8px",verticalAlign:"baseline"},"& .use-suggested-budget":{boxSizing:"border-box",background:"#ffffff",border:"1px solid #8a8886",borderRadius:"2px",padding:"4px 16px",top:"-4px",height:"24.67px",lineHeight:1}},"& .bidding-strategy__container":{marginTop:12,"& select":{margin:"5px 0",width:460},'& div[data-bind="visible: checkCPC"]':{paddingTop:8},'& input[type="checkbox"]':{float:"left"},"& .custom-param__key-field":{display:"inline-block",width:85,marginLeft:5,marginRight:5},"& #currencyLabelTargetCpa":{display:"inline-block","vertical-align":"initial",marginTop:0},"& #currencyLabelTargetRoas":{display:"inline-block","vertical-align":"initial",marginTop:0},"& .alert.alert-info":{marginTop:8},"& .alert-image":{paddingTop:3},"& a.helpbutton":{"margin-left":"5px"}},"& .performance-grid":{margin:"7px 0 0 15px",width:983,padding:0,paddingBottom:37,"& .bidBoost-percentValue":{width:"auto",display:"inline-block"},"& .popover-content":{width:250,padding:"9px 14px"},"& .table>thead>tr>th":{verticalAlign:"top",textAlign:"left",border:"1px solid ".concat(i.neutralLight),fontWeight:"normal"},"& .table>tbody>tr>td":{verticalAlign:"middle",padding:"0 10px",height:42,border:"1px solid ".concat(i.neutralLight)},"& .table>tbody>tr>td:first-child > span":{display:"inline-block",overflow:"hidden",maxWidth:"300px",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& .table__row--indent td:first-child":{paddingLeft:"32px !important"},"& .table>thead>tr>th span":{display:"inline-block",maxWidth:"80%"},"& .footer":{"& .header-subview-0":{border:0}},"& .grid-error-list":{margin:0,"& .error-message":{color:"#A80000"}}},"& .grid-header-helpId":{verticalAlign:"top"},"& .grid-header-text":{fontWeight:"normal"},"& .form-control input-bid":{border:"1px solid ".concat(i.neutralSecondary),borderRadius:2},"& .status-row .col-sm-9":{padding:0},"& .status-row .col-sm-10":{padding:0},"& .bid-status-icon, .bid-hint-text":{padding:0,marginTop:6,width:14},"& .bid-hint-text":{marginLeft:10},"& .status_warning":{color:"#d83B01",fontFamily:a,fontSize:14},"& .status_warning:before":{content:'"\\E7BA"'},"& .bid-status-icon":{position:"relative",left:"-4px",top:"-1px"},"& .status_icon":{fontFamily:a,float:"right",textDecoration:"none",background:"none"},"& .status_icon:before, .status_icon_hover:before":{content:'"\\E712"'},"& .form-group > #KoErrors":{marginLeft:15,marginRight:15},"& #KoErrors":{paddingLeft:8},'& a[data-target=".campaign-targets"]':{fontSize:18,marginLeft:15,marginBottom:15,padding:"8px 0 20px 0",borderTop:"1px solid ".concat(i.neutralSecondary),width:"calc(100% - 30px)",backgroundClip:"content-box","& .expanderImage, .expandedImage":{fontSize:18,marginRight:11},"&:focus, &:hover":{borderBottom:"none",borderLeft:"none",borderRight:"none",textDecoration:"none",backgroundColor:"#F3F2F1"}},"& .campaign-targets":{paddingLeft:38,padding:0,"& .audience-advanced-target-settings":{marginTop:"-20px",padding:0,"& a.toggle-edit-target-category":{padding:"0px 8px 5px 8px",position:"relative",left:"-8px"}},"& .audience-target-selector-container":{marginBottom:"-30px"}}}}},p=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,o=void 0===n?"MsAds MDL2 Assets":n;return{"& .container-fluid":Object(a.a)({padding:0,"& .adgroup-ads__container":{marginTop:20,borderTop:"1px solid ".concat(i.neutralLight),width:"100%",minHeight:133,"&.mixed-mode-campaign-creation":{minHeight:"auto","& h3":{lineHeight:"inherit"}},"& .adgroup-display":{padding:0,width:160,marginRight:37},"& .adgroup-display-title":{fontSize:18,color:i.neutralPrimary,fontWeight:600,"& span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",maxWidth:160}},"& .adgroup-display-keyword":{fontSize:14,color:i.neutralSecondary,"& span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",maxWidth:160}}},"& .adgroup-creative":{minHeight:113,borderBottom:"1px solid ".concat(i.neutralLight),"& .adgroup-ads-creative>div:last-child":{minHeight:133},"& .adgroup-dashedBox-sm":{border:0}},"& .standard-adgroup-ad-creation-section-container, & .dynamic-adgroup-ad-creation-section-container":{"& h3 a":{clear:"both",fontSize:18,paddingLeft:0,"&:hover":{textDecoration:"none",backgroundColor:"#f3f2f1"}},"& .adgroup-ads-creative":{marginLeft:30}},"& .ads-creative":{marginTop:10,marginBottom:10,backgroundColor:i.white,border:0,paddingLeft:0,"& .ad-editor-list-group":{zoom:1,outline:"none","&:focus":{outline:"1px solid ".concat(i.neutralSecondary)}},"& .ad-editor-list-group:after":{clear:"both",content:'""',display:"block",height:0,width:0,visibility:"hidden"},"& .ad-editor-list-group:focus":{"& .k-state-focused":{backgroundColor:i.neutralLighter},"& .k-state-selected":{backgroundColor:i.neutralLight}},"& .row":{top:3,left:500,"& .pager":{height:"auto",width:"300px"},"& .pager:first-child span":{verticalAlign:"baseline"}}},"& .adgroup-ads__container+.form-group":{marginTop:9,marginLeft:0,marginRight:0,"& a":{fontSize:18,fontWeight:600}},"& .expandedImage, .expanderImage":{marginRight:11,marginBottom:2},"& .ad-extensions>p":{marginLeft:0},"& .ad-extensions>.form-group":{margin:"9px 0"},"& .ad-extensions":{borderBottom:"1px solid ".concat(i.neutralSecondary),marginBottom:58,paddingBottom:10,"& .text-right":{clear:"both",width:"auto",float:"none",marginLeft:30,padding:0,textAlign:"left"},"& p":{color:i.neutralPrimary,margin:"5px 0 0 30px"}},"& .create-ad":{background:i.white,border:"1px solid ".concat(i.neutralSecondaryAlt),boxSizing:" border-box",borderRadius:2,height:32,width:152,textAlign:"center",lineHeight:"32px",marginTop:45,marginBottom:45,float:"left","& .create-ad-link":{color:"#323130",fontWeight:600,display:"block",width:"100%",height:"100%",position:"relative","&:focus, &:active, &:hover":{textDecoration:"none",border:0},"&:focus:after, &:active:after, &:hover:after":{border:"1px solid ".concat(i.neutralSecondary),outline:"1px solid transparent",position:"absolute",top:1,bottom:1,left:1,right:1,content:'""'}},"& .glyphicon-plus":{marginRight:12,verticalAlign:"inherit"}},"& .adEditor-listitem":{background:i.white,border:"1px solid ".concat(i.neutralSecondary),height:110,width:364,float:"left",padding:13,position:"relative",marginRight:113,marginBottom:5,marginTop:5,"& .previewTitleAd":{display:"block"},"& .truncated":{height:"18px",lineHeight:"20px",display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .truncated:first-child":{height:"24px"},"& .truncated:first-child span":{fontSize:20,color:"#001BA0",verticalAlign:"top"},"& .preview-ad-slug":{verticalAlign:"top"},"& a.previewUrlAd":{fontSize:13,color:"#006D21","& span":{verticalAlign:"top"}},"& .previewtext":{fontSize:13,color:"#666666","& span":{verticalAlign:"top"}},"& .adEditor-toolbar":{height:24,position:"absolute",right:8,bottom:3,"& .btn-group":{"&:after":{content:'"|"',color:i.neutralPrimary},"&:last-child:after":{content:'""'}},"& .btn":{minWidth:"auto",height:"auto",border:"none",float:"left",padding:"0 2px",backgroundColor:"transparent",color:i.themePrimary,fontWeight:"normal"},"& .open > .dropdown-menu":{width:"auto","& .btn":{padding:"2px 10px",float:"none",width:"100%",textAlign:"left"},"& .copy-to-some":{paddingRight:26,position:"relative","& .caret":{marginTop:4,position:"absolute",right:0,marginRight:10}},"& .copyToSome":{"& label":{lineHeight:"24px","& input":{marginRight:0},"& span":{width:160,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"& li>a:focus::after":{display:"none"}}}},"& .responsive-ad-preview-shared-template":{"& div":{color:"#767676"},"& img":{width:114,height:60,marginRight:8}}},"& .adEditor-error":{borderColor:"#A80000"},'& a[data-target="#createAdExtensions"]':{width:"100%",display:"inline-block","&:focus, &:hover":{border:"none",textDecoration:"none",backgroundColor:"#F3F2F1"}}},Object(r.adsExtensionDoubleListStyle)({palette:i,iconFontFamily:o}),Object(r.adExtensionItemTemplateStyles)({palette:i,iconFontFamily:o}))}},g=function(){return{"& .category-container":{"& .grid-container":{padding:1},"& .panel-heading":{position:"absolute",zIndex:1,marginTop:48,padding:"0 8px"},"& .autoSuggSearchBoxContainer":{height:48,width:"100%",padding:0,"& .searchbox-input":{height:48,width:"100%",position:"absolute",top:0,left:0},"& .form-control-feedback":{position:"absolute",left:0,paddingTop:4,pointerEvents:"auto"}},"& .grid-table":{marginTop:28,height:400,overflowY:"auto","& .table":{tableLayout:"fixed"},"& .col-sm-1":{display:"none"},"& .table>thead>tr.table__row--header>th":{width:"50%",border:"0px !important",fontWeight:600,"& .grid-asc, & .grid-des":{float:"left"},"&.col-CategoryName":{"& .grid-asc, & .grid-des":{display:"none","&~.col-sm-8::before":{fontFamily:"MsAds MDL2 Assets",position:"relative",top:3}},"& .grid-asc~.col-sm-8::before":{content:'"\\EE68"'},"& .grid-des~.col-sm-8::before":{content:'"\\EE69"'}},"& .col-sm-1":{display:"block",padding:0,width:"unset",marginLeft:0,top:0,"& .glyphicon-arrow-left":{display:"none",padding:[2,5,0,0]}}},"& .col-sm-8":{padding:0},"& tbody .col-CategoryName":{"& .col-sm-8":{width:"100%"}},"& .col-Coverage":{"& .col-sm-8":{"& span":{display:"inline-block",textAlign:"right"}},"& .col-sm-3":{width:"auto",padding:0,float:"right"}},"& .table>tbody>tr>td":{height:36,border:0,padding:"0 8px",position:"relative"}},"& .category-error":{display:"none"}}}},h=function(e){var t=e.palette,i=void 0===t?{}:t;return{"& .dsa-targeting-source":Object(a.a)({marginLeft:20},Object(r.convertToLocalStyle)(Object(r.scrollbarStyle)({palette:i})),{"& .radio":{padding:[5,8,5,28],position:"relative",left:-28,display:"table","&:focus-within":{outline:"1px solid ".concat(i.neutralSecondary)}},"& .layout-columns-container":{maxWidth:1020},"& label":{display:"block",padding:"5px 20px",paddingLeft:20,fontWeight:"normal"},"& .panel-form":{backgroundColor:"white",border:"1px solid #BBB"},"& .col-sm-12":{padding:0},"& .panel-heading":{backgroundColor:"#E5E5E5","& .panel-title":{margin:0}},"& .doubleListBox":{marginTop:10,"& .layout-columns-element":{width:350,padding:0,"& .panel-form":{height:482,"& .panel-heading":{height:36,backgroundColor:"#ffffff",padding:8,"& .panel-title":{color:"#323130",fontSize:14,fontWeight:600}},"& .panel-body":{padding:0,overflow:"auto",paddingBottom:2,"& .dlb-source-container":{height:398},"& .dlb-selected-container":{height:446},"& .dlb-emptyMessage":{padding:"0 8px"},"& .dlb-source-list, & .dlb-selected-list":{outline:"none","& .dlbItem":{height:36,position:"relative",padding:"0 8px","& .dlbItem-actions, & .a11y-k-listview-button":{position:"absolute",right:8,height:36,lineHeight:"36px"},"& .dlbItem-content":{height:36,lineHeight:"36px",paddingRight:"30px","& .itemTemplate-text":{"& > span":{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},"&:hover":{backgroundColor:"#EDEBE9"}}}}}},"& .layout-columns-element:nth-child(1)":{position:"absolute",height:48,"& .dlb-filter-alignPlaceholder":{width:"100%","& .searchbox":{padding:"0 1px",border:"1px solid #BBB","& .searchbox-input":{height:48,paddingLeft:48},"& .form-control-feedback":{position:"absolute",left:0,height:48,lineHeight:"48px",pointerEvents:"auto","& .searchbox-searchbutton":{position:"absolute"}}}},"& .panel-form":{height:434}},"& .layout-columns-element:nth-child(2)":{height:434,marginTop:48,"& .panel-form":{height:434}},"& .layout-columns-element:nth-child(3)":{height:482,marginLeft:8}}}),"& .authoring-container":Object(a.a)({width:960,marginTop:4},Object(r.convertToLocalStyle)(Object(r.scrollbarStyle)({palette:i})),{"& .panel-heading":{padding:"5px 0",fontWeight:600,"& .panel-title":{margin:0,fontSize:14,"& .h5":{fontSize:14}}},"& .panel-body":{padding:0,"& .form-group":{width:"100% !important",float:"none"}},"& .type-bold":{fontWeight:600},'& .target-type-radiogroup input[type="radio"]:focus':{outline:"1px solid ".concat(i.neutralSecondary," !important")},"& .target-type-radiogroup span":{verticalAlign:"top"},"& .form-group":{width:"100%",margin:0,marginBottom:10},"& label":{display:"block",padding:"5px 20px",fontWeight:"normal"},"& .col-sm-12":{padding:0,"& .type-bold":{fontSize:14}},"& .doubleListBox":Object(a.a)({width:"auto",marginBottom:"15px","& >.col-sm-7":{width:400,padding:0},"& .panel-heading":{color:"#323130",fontSize:14,padding:"0 8px"},"& .panel-form":{border:"1px solid ".concat(i.neutralSecondary),height:482},"& .remaining-hint":{fontSize:12,color:i.neutralSecondary}},{"& .category-container":{"& .grid-container":{padding:1},"& .panel-heading":{position:"absolute",zIndex:1,marginTop:48,padding:"0 8px"},"& .autoSuggSearchBoxContainer":{height:48,width:"100%",padding:0,"& .searchbox-input":{height:48,width:"100%",position:"absolute",top:0,left:0},"& .form-control-feedback":{position:"absolute",left:0,paddingTop:4,pointerEvents:"auto"}},"& .grid-table":{marginTop:28,height:400,overflowY:"auto","& .table":{tableLayout:"fixed"},"& .col-sm-1":{display:"none"},"& .table>thead>tr.table__row--header>th":{width:"50%",border:"0px !important",fontWeight:600,"& .grid-asc, & .grid-des":{float:"left"},"&.col-CategoryName":{"& .grid-asc, & .grid-des":{display:"none","&~.col-sm-8::before":{fontFamily:"MsAds MDL2 Assets",position:"relative",top:3}},"& .grid-asc~.col-sm-8::before":{content:'"\\EE68"'},"& .grid-des~.col-sm-8::before":{content:'"\\EE69"'}},"& .col-sm-1":{display:"block",padding:0,width:"unset",marginLeft:0,top:0,"& .glyphicon-arrow-left":{display:"none",padding:[2,5,0,0]}}},"& .col-sm-8":{padding:0},"& tbody .col-CategoryName":{"& .col-sm-8":{width:"100%"}},"& .col-Coverage":{"& .col-sm-8":{"& span":{display:"inline-block",textAlign:"right"}},"& .col-sm-3":{width:"auto",padding:0,float:"right"}},"& .table>tbody>tr>td":{height:36,border:0,padding:"0 8px",position:"relative"}},"& .category-error":{display:"none"}}},{"& .allwebpage-container":{"& .dlb-source-container":{marginTop:15,padding:"0 8px","& .select":{"& .col-sm-11":{padding:0},"& .col-sm-1":{position:"absolute",right:8}}}},"& .exact-urls-container":Object(a.a)({},{"& .summary":{borderTop:"1px solid #BBB",marginTop:8,paddingTop:8,position:"relative","& .preview":{padding:"0 8px","& .operand":{marginRight:2},"& .popover-content":{padding:[20,28,10,28]}},"& .col-sm-1":{position:"absolute",right:8}}},{"& .web-condition":{marginRight:"10px","& .operand":{marginRight:2,marginLeft:8}}}),"& .specificwebpage-container, .rules-container":{"& .panel-body":Object(a.a)({overflowY:"auto",overflowX:"hidden",height:450,"& .specific-target-container":{"& .specific-target-condition":{position:"relative",margin:"8px 0 0 0 !important","& .col-sm-4":{padding:0,marginLeft:8,width:125,"& .form-control":{width:125}},"& .col-sm-2":{padding:"0 8px",width:72,minHeight:"1px","& label":{padding:0,height:32,lineHeight:"32px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"& .col-sm-5":{padding:0,width:150,"& .form-control":{width:150},"& .form-control-static":{height:"auto",lineHeight:"32px","& span":{verticalAlign:"unset"}}},"& .col-sm-1":{top:6,width:14,padding:0,marginLeft:8},"& .col-sm-12":{"& label":{padding:"0 0 8px 8px",color:"#000",fontWeight:"600"}},"& .category-container":{padding:0,width:"100%",marginBottom:8,"& .panel-form":{border:0,borderTop:"1px solid ".concat(i.neutralSecondary),borderBottom:"1px solid ".concat(i.neutralSecondary),marginTop:17,height:"auto","& .panel-body":{height:"auto",overflowY:"unset"},"& .grid-table":{overflowY:"unset",height:"auto"},"& .col-Coverage":{"& .col-sm-7":{width:"auto"},"& .col-sm-5":{width:"auto",position:"absolute",right:8}}},"& .category-error":{display:"none"}}}},"& .add-row":{padding:"0 8px"}},{"& .summary":{borderTop:"1px solid #BBB",marginTop:8,paddingTop:8,position:"relative","& .preview":{padding:"0 8px","& .operand":{marginRight:2},"& .popover-content":{padding:[20,28,10,28]}},"& .col-sm-1":{position:"absolute",right:8}}})},"& .autotarget-customlabel-container":{"& .col-sm-11":{paddingLeft:8,paddingRight:8,"& .custom-label-form-label, .custom-label-input":{width:"100%",padding:0,"& label":{paddingLeft:0},"& input.form-control":{width:"100%"}}},"& .col-sm-1.form-control-static":{top:35,right:8}},"& .selected-targets-container.col-sm-5":{width:400,padding:0,marginLeft:8,"& .panel-form":{display:"flex",flexDirection:"column","& .panel-heading":{padding:"0 8px","& .panel-title":{"& .selected-header":{width:"auto",padding:0,"& .type-bold":{float:"left",margin:0,padding:0,maxWidth:235,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"27px"},"& .helpbutton":{width:"15px",float:"left",padding:0}},"& .col-sm-4.h5":{width:"auto",position:"absolute",right:8,padding:0,margin:0,textAlign:"right","& a":{padding:0,fontWeight:"normal",maxWidth:110,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"27px"}},"& .selected-description":{"& .h5":{fontWeight:"normal",overflowWrap:"break-word",wordBreak:"break-word"}}}},"& .panel-body":{flex:1,overflow:"auto","& .remove-all":{right:8,padding:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"clip",marginBottom:6,marginRight:8,float:"right","& .remove":{display:"none"},"& .col-sm-5":{width:"auto",padding:0}},"& #BidValidationError":{padding:0},"& .inactive":{padding:"0 8px"},"& .dlb-selected-container":{height:"100%",overflow:"auto","& .dlb-selected-list":{height:"100%",display:"flex",flexDirection:"column",overflow:"auto",alignItems:"flex-end","& .panel-body":{width:"100%"}},'& ul[data-bind="foreach: items"]':{overflowY:"auto",flex:1,paddingLeft:8,paddingRight:8,clear:"both",paddingBottom:8,width:"100%","& .dlbItem":{height:36,padding:2,position:"relative","& .arrow-button":{position:"absolute",right:0,marginTop:6},"& .targetName":{width:180,height:32,lineHeight:"32px",paddingLeft:0,paddingRight:8,"& div":{display:"inline-block",verticalAlign:"middle"},"& .specificpage, .exacturls":{borderBottom:"1px dashed #0078D4","& .operand":{marginRight:2,maxWidth:55,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .operator":{maxWidth:50,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .preview-operand":{"& .popover":{marginTop:0,marginLeft:11,marginBottom:20,width:173,top:"0px !important",left:"80px !important","& .arrow":{left:"0px !important",top:12},"& .popover-content":{padding:"9px 14px",fontSize:14,"& .conditions":{"& .operand, .operator":{fontWeight:600,maxWidth:90},"& .truncated":{maxWidth:150,marginLeft:0,display:"block"}}}}}},"& .truncated":{maxWidth:60,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",marginLeft:3,"& a":{color:"#323130"}},"& .category":{"& div:first-child span":{maxWidth:70,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .truncated":{maxWidth:100}},"& .allwebpage":{"& span":{maxWidth:170,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"& span":{verticalAlign:"top"}},"& .col-sm-4":{width:84,height:32,padding:0,"& .form-control":{width:84,margin:0}}}}}}}},"& .alert":{marginTop:5,width:"100%"},"& span, & a":{overflowWrap:"break-word",wordBreak:"break-word"},"& .edit-category-icon":{marginLeft:5}}),"& .pager":{display:"none"}}),"& .adgroupbid-grid":{marginLeft:0,width:460,marginBottom:33,"& .text-left":{padding:"5px 10px"},"& .input-group-addon":{backgroundColor:"#FFFFFF",border:0},"& .grid-error-row":{"& .error-message":{color:"#A80000",fontSize:12}},"& .table>tbody>tr>td:first-child > span":{display:"inline-block",overflow:"hidden",maxWidth:"280px",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}},m=function(e){var t=e.palette,i=void 0===t?{}:t;return{".k-list-container":Object(a.a)({overflowY:"auto"},Object(r.convertToConcatStyle)(Object(r.scrollbarStyle)({palette:i})))}},f=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n;return Object(a.a)({"& .adgroup-create-page":{padding:"25px 32px 0 32px","& .alert.alert-danger":{paddingLeft:"8px"},"& h1":{margin:0,fontSize:20,color:"#323130"},"& h3":{fontSize:14,color:"#323130",margin:"14px 0",fontWeight:"normal"},"& hr":{display:"none"},"& .type-bold":{fontSize:18,paddingTop:8,borderTop:"1px solid ".concat(i.neutralSecondary),margin:"30px 0 0 0",clear:"both"},"& .container-fluid":{padding:1,margin:0,border:"none","& .form-group":{margin:0,"& #LanguageSelectorDescription":{paddingBottom:7}},"& .language":{margin:"5px 0"}},"& .adgroup-settings .bidding-strategy__container .form-group":{"& #BidStrategySetting_BidStrategy_Label":{padding:[5,0]},"& .col-sm-6 > .form-control-static":{paddingBottom:8,minHeight:1}},"& .toggle-campaign-settings-switch":{paddingRight:"8px !important",marginTop:3,display:"inline-block",float:"left"},"& .type-normal":{fontWeight:400},"& .audience-advanced-target-settings":{paddingTop:10},"& .ad-section":{minHeight:150,"& .alert":{marginTop:15},"& .adEditor-listitem":{marginRight:70},"& .ads-creative .row.col-sm-3":{left:900}},"& .location-targets-section":{"& .control-label":{marginTop:33},"& .form-horizontal":{"& > div:nth-child(2) .control-label":{marginTop:10},"& .location-target-physical-intent":{"& .control-label":{marginTop:"33px !important"}}},"& .form-group .col-sm-2":{display:"block"}},"& .location-target-done":{margin:"0 12px 0 15px"},"& .advanced-settings-section":{marginTop:30,paddingBottom:0,borderTop:"1px solid ".concat(i.neutralSecondary),paddingTop:8,"& .date-container>.form-control-static":{minHeight:230}},"& .advanced-settings-title":{display:"none"},"& .add-keywords-root":{marginTop:30,"& .col-sm-4":{padding:0,"& #Keyword_Bmm_Warning_Div":{padding:"8px 32px 8px 8px"},"& #Keyword_Bmm_Block_Div":{padding:"8px 32px 8px 8px"}},"& .keyword-planner-root":{marginTop:10}},"& .save-bar":{borderTop:"1px solid #EDEBE9",paddingTop:16,margin:"35px 0 0 -32px",padding:"16px 32px","& .btn-save":{marginRight:12}},"& .bid-section":{position:"relative","& .alert":{margin:"8px 16px -26px 16px"},"& .search-bid__container":{'div[data-bind="visible: showEstimateButton"]':{padding:0},"& span.status-container":{display:"inline-block",width:"14px",position:"absolute",height:"100%","& .iconba.iconba-Warning":{color:"#FF9900",fontSize:"14px",fontFamily:r,position:"absolute",left:"2px",top:"9px"}}}},"& .auto-targets-section":{"& .type-bold":{borderTop:0},"& .panel.authoring-container":{boxShadow:"none","& .category-container .grid-table .clickable":{cursor:"pointer"}}},"& .adgroup-settings #AdGroupCreate_KoErrors":{marginLeft:15}},"& .mixed-mode-adgroup-create":{"& ul.alert":{marginTop:10},"& .dynamic-adgroup-creation-section-container>h3, & .standard-adgroup-creation-section-container>h3":{height:30,marginBottom:0,"& a":{paddingLeft:0,fontSize:18,"&:hover":{textDecoration:"none",backgroundColor:"#f3f2f1"}},"& .expandedImage, & .expanderImage":{marginRight:11}},"& #standardAdGroupSection, & #dynamicAdGroupSection":{marginLeft:24},"& .filter-clear":{clear:"both"}},"& .mixed-mode-ad-group-creation-container":{"& .dynamic-ad-group-create-view-container .row-fluid .ad-group-list-container":{marginTop:0},"&>ul.alert":{margin:"0 32px"},"& .mixed-mode-ad-group-creation-title, & .ad-group-type-section, & .adgroup-creation-dsa-settings-view-container":{padding:"0 32px 0 32px","& .control-label":{lineHeight:1.5}},"& .save-bar":{borderTop:"1px solid #EDEBE9",paddingTop:16,margin:"35px 0 0 0",padding:"16px 32px","& .btn-save":{marginRight:12}}},"& .adgroup-settings":s({palette:i})},{"& .a11y-adapter-list":{outline:"none"},"& .a11y-adapter-item":{"&.a11y-adapter-item-focused":{border:"1px solid #605e5c"},"&.a11y-adapter-item-selected":{background:"#edebe9"}}})},v=function(e){e.palette;return{".change-adgroup-type-view":{paddingBottom:10,"& .change-adgroup-type-title":{fontWeight:"bold",display:"block",paddingBottom:10}}}},b=function(e){var t=e.palette,i=void 0===t?{}:t;return{"& a.brands_url_link, & .bmc_url_link":{textDecoration:"underline"},"& .location-manage":{"& .location-popup-editor .ba-backbone-instance-wrapper>div":{padding:0}},"& .ba-backbone-instance-wrapper":{"& >div":{padding:"20px 32px",width:"100%"},"& .name, & .store, & .countryChange, & .bid-setting__container .input-group":{width:438},"& .budget-amount":{width:"313px !important"},"& .bidding-strategy__container":{"& .col-sm-6":{width:438,boxSizing:"content-box",paddingTop:5,"& > .form-control-static":{paddingBottom:8,minHeight:1}}},"& h1":{margin:0,fontSize:20,color:i.neutralPrimary},"& h3":{fontSize:14,color:i.neutralPrimary,margin:"14px 0",fontWeight:"normal"},"& hr":{marginTop:-29,background:i.neutralSecondary,height:"1px"},"& .type-bold":{fontSize:18,margin:"40px 0 0 0"},"& .advanced-settings-section":{borderTop:0,marginTop:0,paddingTop:33},"& .alert":{marginTop:20,lineHeight:2.5,marginLeft:15},"& .location-target-done":{marginLeft:15,marginRight:12},"& .save-bar":{borderTop:"1px solid ".concat(i.neutralLight),paddingTop:16,"& .btn-save":{marginRight:12}}},"& .bmc_url_link":{display:"inline-block",margin:"25px 0 25px 5px"}}},y=function(e){var t=e.palette,i=void 0===t?{}:t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isCreationPage,o=void 0===n||n;return Object.assign(Object(a.a)({"& .steps-wizard__description":{marginTop:8,marginBottom:0,marginLeft:32,color:i.neutralSecondary},"& .advanced-campaign-creation__wrapper":{marginLeft:32,marginRight:32,paddingBottom:12},"& .action-container":{marginLeft:32},"& .step-content-container .content-container, .step-content-container > .action-container":{minWidth:1380},"& .row":{margin:0},"& .helpbutton":{display:"inline-block",marginLeft:5},"& label":{display:"inline-block"},"& span":{verticalAlign:"middle"},"& .display-inline-block":{display:"inline-block !important"},"& .help-block, .remaining-chars-hint-container":{textAlign:"right",fontSize:14,margin:0,color:i.neutralPrimary,lineHeight:"24px"},"& .help-block.error":{textAlign:"left"},"& ol, ul":{listStyle:"none",paddingLeft:0},"& .validation-error":{border:"1px solid #A80000 !important",backgroundColor:i.white,margin:0},"& .error":{color:"#A80000"},"& div.error":{fontSize:12},"& input.error, select.error, textarea.error, input.campaign-error-row, select.campaign-error-row, textarea.campaign-error-row":{border:"1px solid #A80000 !important"},"& .form-group":{padding:0,marginBottom:0},"& .form-control":{height:32,border:"1px solid ".concat(i.neutralSecondary),boxSizing:"border-box",borderRadius:2},"& .form-control:focus":{border:"1px solid ".concat(i.neutralSecondary)},"& .form-control-static":{paddingTop:0,paddingBottom:0,margin:0,height:"auto",color:i.neutralSecondary,"&.copy-settings":{marginTop:4}},"& .control-label, .form-label-container":{textAlign:"left",width:"auto",float:"none",marginTop:33,fontSize:14,color:i.neutralPrimary,paddingTop:0,paddingBottom:0,display:"block"},"& .form-label-container":{"&>label>span":{padding:"5px 0px",display:"inline-block"}},"& .control-label .col-sm-4":{width:"auto"},"& .displayNone":{display:"none"},"& select":{appearance:"none","-webkit-appearance":"none"},"& textarea":{resize:"none"},"& .input-group-addon":{backgroundColor:i.white,border:0},"& .bidding-strategy__container":{"& .alert-image":{paddingTop:5},"& .alert.alert-info":{margin:"8px 0",lineHeight:"unset"}},"& .alert-info.form-group":{"& .alert-info-inline":Object(a.a)({},Object(r.internalLinkStyle)({palette:i,elementLocator:"> a",isGreyBackground:!0}),{"& > a:focus":{border:0}})},"& .cashback-settings .alert.alert-info":{marginTop:15,marginRight:24,marginLeft:"unset",lineHeight:"unset"},"& .cashback-settings .alert-div":{width:"50%"}},Object(r.underlineLinkStyle)({palette:i,elementLocator:"a.HelpTopic"}),{"& a.HelpTopic:focus":{border:0}}),o?{"& .checkbox > label + .helpbutton, .radio > label + .helpbutton":{marginLeft:"-6px"}}:{})},S=function(e){var t=e.palette,i=void 0===t?{}:t;e.iconFontFamily;return{"& .crud-audience-campaign":{color:i.neutralPrimary,padding:[0,32],"& .description":{lineHeight:"24px",marginTop:8},"& .form-group":{"& .col-sm-2":{margin:[26,0,0,0]},"& .Name-value":{padding:[6,8,7,8],boxSizing:"border-box",borderRadius:2,width:461,marginTop:2,backgroundColor:i.white},"& .remaining-chars-hint":{marginBottom:0,marginTop:3}}},"& .shopping-settings__container":{"& .col-sm-offset-2":{margin:0},"& .query-group-container":{border:"1px solid ".concat(i.neutralSecondary),padding:10,width:551,"& .query-editor":{margin:"2px 0","& .form-control":{width:188},"& .text-center":{padding:"0 27px",width:"auto"},"& .col-sm-5":{margin:0,width:"auto",padding:0},"& .control-label":{height:32,lineHeight:"32px",margin:0},"& .remove-editor":{width:"auto",padding:0,margin:0,marginLeft:10,marginTop:5}},"& .col-sm-12":{float:"none",padding:0},"& .text-right":{textAlign:"left",marginTop:15},"& .addNewQuery":{"& .glyphicon ":{marginRight:5,marginTop:"-5px"}}},"& .query-summary-item":{border:"1px solid ".concat(i.neutralSecondary),padding:10,width:462,"& div.query-item":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .edit-query span":{verticalAlign:"baseline"}}}}},w=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,a=void 0===n?"MsAds MDL2 Assets":n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.companySearchTableWidth,s=void 0===o?400:o,l=r.companySearchTableCompanyNameWidth,c=void 0===l?258:l,d=r.companyIconHeightWidth,u=void 0===d?32:d,p=r.targetGridWidth,g=void 0===p?514:p;return{"& .target-intent-header":{marginBottom:8},"& .search-box__input-group":{position:"relative","& .search-box__input":{background:"#FFFFFF",border:"1px solid ".concat(i.neutralSecondary),boxSizing:"border-box",borderRadius:2,padding:"6px 8px 7px 32px",width:s},"& .search-box__icon":{fontFamily:a,fontSize:16,position:"absolute",left:0,color:"#0078D4",padding:8,lineHeight:"16px"},"& .search-box__icon:before":{content:'"\\E721"'}},"& .company-search-container":{position:"relative","& .company-search-table":{width:s,height:"182px",overflow:"auto",background:"#FFFFFF",boxShadow:"0px 0.6px 1.8px rgba(0, 0, 0, 0.108), 0px 3.2px 7.2px rgba(0, 0, 0, 0.132)",borderRadius:"0px 0px 2px 2px"},"& .empty-result-message":{position:"absolute",top:0}},"& .company-item-template":{padding:"2px 8px 0 8px","& .pull-right":{margin:0,padding:0,verticalAlign:"top","& .company-search-include-link":{textAlign:"right"},"& .company-search-separator":{margin:"0 5px",verticalAlign:"baseline"}},"& .pull-left":{marginTop:5,marginRight:7,"& img":{width:u,height:u,display:"block",overflow:"hidden"}},"& .company-name":{width:c,lineHeight:"20px","& .company-item-name, .company-item-industry":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingRight:5}}},"& .company-item-template:last-child":{paddingBottom:13},"& .linked-in-target-grid-container, .linked-in-excluded-grid-container":{marginTop:8,position:"relative",width:g,"& .target-grid-remove-all-container":{position:"absolute",right:10,top:11},"& .target-grid":{"& .table-container":{width:"100%","& tr > th, tr > td":{height:"42px"},"& .table":{"& .header":{padding:"11px 8px 12px 7px","& tr > th":{fontWeight:"normal",height:"42px"},"& tr > th:first-child":{width:140},"& tr > th:nth-child(2)":{width:325},"& tr > th:nth-child(3)":{width:149}},"& tbody":{"& .linked-in-target-grid__area-row":{"& .text-left:nth-child(2)":{paddingLeft:7,paddingRight:8},"& .text-left":{padding:0,"& .statusEnabled_icon, .statusExcluded_icon":{lineHeight:"19px",padding:"12px 9px 11px 17px"},"& .company-item-template":{padding:0,"& .pull-left":{margin:0,padding:"5px 7px 5px 1px"},"& .company-name":{width:"100%",paddingRight:8,"& .company-item-name, .company-item-industry":{width:300}}},"& .linked-in-target-grid__remove-col":{fontFamily:a,fontSize:12,color:"#605E5C",textAlign:"center",padding:"15px 8px"},"& .linked-in-target-grid__remove-col:before":{content:'"\\E711"'},"& .clickable":{cursor:"pointer"}}}}}}}},"& .linked-in-target-search-container":{width:s,"& .treeview":{border:"1px solid ".concat(i.neutralSecondary),width:s,height:"265px"},"& .search-result-tree":{padding:"8px 7px 8px 3px",height:"215px",overflowY:"auto","& .node-container":{"& .tree-node-container":{paddingBottom:8,"& .grouped-node-title-container":{"& .glyphicon":{fontFamily:a,marginRight:5},"& .glyphicon-triangle-right:before":{content:'"\\F08F"'},"& .glyphicon-triangle-bottom:before":{content:'"\\F08E"'},"& span:last-child":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},"& .state-value-container":{float:"right"},"& .children-container":{marginLeft:18,"& .node-container":{"& .tree-node-container":{paddingBottom:0,paddingTop:2,"& span:first-child":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",width:s-170},"& .action-link, .action-separator":{float:"right"},"& .action-separator":{margin:[0,5]}}}}}}}}}},C=function(e){var t=e.companySearchTableWidth;return{"& .search-box__input-group":{"& .search-box__input":{border:"0 !important",borderBottom:"1px solid #F3F2F1 !important",width:"".concat((void 0===t?400:t)-2,"px !important"),height:"48px",paddingLeft:"48px !important"},"& .search-box__icon":{padding:"16px !important"}}}},x=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.companySearchTableWidth,l=void 0===s?400:s,c=o.companySearchTableCompanyNameWidth,d=void 0===c?258:c,u=o.companyIconHeightWidth,p=void 0===u?32:u,g=o.targetGridWidth,h=void 0===g?514:g;return{"& .criterion-setting-CompanyName":Object(a.a)({},w({palette:i,iconFontFamily:r},{companySearchTableWidth:l,companySearchTableCompanyNameWidth:d,companyIconHeightWidth:p,targetGridWidth:h}))}},k=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.companySearchTableWidth,l=void 0===s?400:s,c=o.companySearchTableCompanyNameWidth,d=void 0===c?258:c,u=o.companyIconHeightWidth,p=void 0===u?32:u,g=o.targetGridWidth,h=void 0===g?514:g;return{"& .criterion-setting-Industry":Object(a.a)({"& div":Object(a.a)({},w({palette:i,iconFontFamily:r},{companySearchTableWidth:l,companySearchTableCompanyNameWidth:d,companyIconHeightWidth:p,targetGridWidth:h}))},C({companySearchTableWidth:l}))}},A=function(e){var t=e.companySearchTableWidth,i=void 0===t?400:t;return{"& .searchbox-container":{border:"1px solid #605E5C",width:i,height:"265px"},"& .search-result-view-container":{height:"215px",overflow:"auto","& .job-function-item-template":{padding:"8px 8px 9px 8px",lineHeight:"19px","& .job-function-item-name":{width:i-160,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"& .job-function-search-separator":{margin:[0,5],verticalAlign:"baseline"}}}}},T=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.companySearchTableWidth,l=void 0===s?400:s,c=o.companySearchTableCompanyNameWidth,d=void 0===c?258:c,u=o.companyIconHeightWidth,p=void 0===u?32:u,g=o.targetGridWidth,h=void 0===g?514:g;return{"& .criterion-setting-JobFunction":Object(a.a)({"& div":Object(a.a)({},w({palette:i,iconFontFamily:r},{companySearchTableWidth:l,companySearchTableCompanyNameWidth:d,companyIconHeightWidth:p,targetGridWidth:h}))},C({companySearchTableWidth:l}),A({companySearchTableWidth:l}))}},_=function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.companySearchTableWidth,l=void 0===s?400:s,c=o.companySearchTableCompanyNameWidth,d=void 0===c?258:c,u=o.companyIconHeightWidth,p=void 0===u?32:u;return{"& .crud-audience-adgroup":{color:"#323130",padding:[0,32],overflow:"hidden",zoom:1},"& .crud-audience-adgroup, & .audience-adgroup-settings-wizard-container, & .campaign-targets, & .adgroup-targets-section, & .adgroup-targets, & .criterion-creation-container":{"& table.table--no-border>tbody>tr:hover, table.table-hover>tbody>tr:hover":{background:i.neutralLight,"& td":{border:"1px solid ".concat(i.white)}},"& .adgroup-name-input-container":{"& .name-input-control-container":{padding:0,width:461,"& .form-control":{padding:[6,8,7,8],border:"1px solid ".concat(i.neutralSecondary),boxSizing:"border-box",borderRadius:2,width:461,marginTop:2,backgroundColor:"#FFFFFF","-webkit-user-select":"all","-moz-user-select":"all","-ms-user-select":"all",userSelect:"all"},"& .remaining-chars-hint":{marginBottom:0,marginTop:3}}},"& .crud-audience-target-selector":{paddingTop:26,width:900,"& .selection-item-container":{width:259,height:"92px",padding:0,margin:[0,37,37,0],"& .selection-item-button":{color:"#323130",width:259,height:"92px",backgroundColor:"#F3F2F1",paddingLeft:13,paddingRight:14,position:"relative","&:hover":{zIndex:0,border:"1px solid #323130"},"&:focus":{border:"1px solid #605E5C"},"&:active":{borderColor:i.themePrimary,zIndex:0,"& .glyphicon-plus:before":{color:i.themePrimary,content:'"\\EC61"'}},"& .col-sm-1":{position:"absolute",right:0,top:0,paddingLeft:0,"& .glyphicon-ok, .glyphicon-plus":{fontSize:18,fontFamily:r,position:"unset",margin:0},"& .glyphicon-ok:before":{color:i.themePrimary,content:'"\\EC61"'},"& .glyphicon-plus:before":{color:i.neutralPrimary,position:"relative",zIndex:"-1",content:'"\\ECCA"'}},"& .col-sm-11":{width:232,padding:0,position:"absolute",top:"50%",transform:"translate(0px, -50%)","& .selection-item-description":{fontWeight:"lighter",whiteSpace:"normal",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":3,"-webkit-box-orient":"vertical"}}},"& .selection-item-button.active":{border:[1,"solid","#0078D4"],"&:hover":{borderColor:i.themeDarker,"& .glyphicon-ok:before":{color:i.themeDarker}}}},"& .audience-selector-container":{"& h5.control-label":{display:"none"},"& button.btn.btn-primary":{border:"90000em",borderColor:"#0f0",margin:"0em",background:"transparent",display:"flex",padding:"0.3em","&:focus":{border:0,color:"transparent"},"&:before":{color:"#0078D4",content:'"\\E76C"',fontFamily:r,marginRight:8,position:"relative",top:2},'&[aria-expanded="true"]:before':{content:'"\\E70D"'},"& :focus":{border:0},"& .target-header":{margin:"0 em",display:"flex",border:"0em","& p.target-selection-title":{color:"#0078D4",margin:0,padding:0,border:"0em",fontWeight:"bold"},"& p.target-selection-title:hover":{color:"#004578",textDecoration:"underline"}}},"& .item-container:not(#location-setting-container)":{marginLeft:"1.3em",border:"0em"},"& .item-container#location-setting-container":{marginLeft:"0.3em",border:"0em"}}},"& .audience-target-settings-container, .criterion-setting-container-in-creation":Object(a.a)({"& .parent-level-bid-adjustment-grid":{width:1e3,"& .pull-left":{marginRight:7}},"& .show-cashback-percent":{"& .table-container":{"& .company-item-template":{display:"flex","& .pull-left":{marginRight:10},"& .company-name":{width:200}},"& .cashback-percent-cell":{"& .input-group-addon":{border:"none",background:"none",padding:0,verticalAlign:"middle",lineHeight:"30px"}}},"& .cashback-percent-col":{"& .inline-input.form-control":{width:66}},"& .linked-in-target-grid-view .column-header.column-header-leaf.column-name-BidAdjustment":{width:"254px !important"},"& .current-level-bid-adjustment-grid":{width:1e3},"&.criterion-setting-CompanyName, &.criterion-setting-Industry, &.criterion-setting-JobFunction":{"& .linked-in-target-grid-container":{width:"1000px !important"}},"& .cashback-percent-cell":{"& input":{width:60}},"& .linked-in-target-grid-view":{"& .target-grid":{"& .column-header.column-name-isIncludedOrExcluded":{width:"100px !important"},"& .column-header":{"&.column-name-targetName":{width:"auto !important"},"&.column-name-name":{width:"223px !important"}},"& .bid-adjustment-target-column input":{width:60},"& .company-item-template":{"& .company-name":{"& .company-item-name, & .company-item-industry":{width:"200px !important"}}}}}},paddingBottom:15,"& .pagination-control":{"& .pager":{display:"inline-block",marginLeft:20}},"& .location-setting-controller":{marginBottom:0,"& .control-label":{marginTop:10},"& .searchbox-input":{padding:[3,33,3,12]},"& .radio":{paddingTop:0}},"& .criterion-setting-Age, .criterion-setting-Gender":{"& .target-selection-container":{"& .form-group":{margin:0,"& .row":{"& .col-sm-3":{paddingLeft:0},"& .checkbox-inline":{"& input, div":{float:"left"}}},"& .errors-container":{padding:0}}}}},function(e){var t=e.palette,i=void 0===t?{}:t;return{"& .criterion-setting-Audience":{"& .col-sm-10":{width:"100%","& .form-group":{margin:0}},"& a.audience__caption--folded":{display:"inline-block","& > span":{verticalAlign:"unset"}},"& .create-audience-fallback-popover":{backgroundColor:i.white,position:"absolute",left:"160px !important",top:"-40px !important",zIndex:5,"& .popover-view":{border:"1px solid #edebe9",boxShadow:"0 6.4px 14.4px 0 rgba(0,0,0,.132), 0 1.2px 3.6px 0 rgba(0,0,0,.108)",borderRadius:"2px",padding:"20px",width:"250px","& .fallback-popover-title":{fontSize:"20px",lineHeight:"28px",fontWeight:600},"& .fallback-popover":{"& .message":{fontSize:"12px",lineHeight:"22px",paddingTop:"10px",paddingBottom:"10px"},"& .link-container":{fontsize:"16px","& .iconba.iconba-OpenInNewWindow":{color:i.themeDarkAlt,margin:"0 4px",top:"2px"}}}}}}}}({palette:i}),{"& .criterion-setting-CompanyName .col-sm-12 .target-selection-container .searchbox-container .search-box__input-group .search-box__input":{width:l},"& .criterion-setting-CompanyName .col-sm-10 .target-selection-container .searchbox-container .search-box__input-group .search-box__input":{width:l},"& .target-selection-container":{"& .column-name-BidAdjustment":{width:"280px !important"},"& .column-name-removeAll":{width:"149px !important"},"& tbody":{"& .linked-in-target-grid__area-row":{"& .bid-adjustment-target-column select.form-control,input.form-control":{display:"inline-block !important","margin-left":"5px"}}}},"& .criterion-setting-CompanyName, .criterion-setting-Industry, .criterion-setting-JobFunction":Object(a.a)({},function(e){var t=e.palette,i=void 0===t?{}:t,n=e.iconFontFamily,r=void 0===n?"MsAds MDL2 Assets":n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.companySearchTableWidth,l=void 0===s?400:s,c=o.companySearchTableCompanyNameWidth,d=void 0===c?258:c,u=o.companyIconHeightWidth,p=void 0===u?32:u;return{"& .col-sm-10, .col-sm-12":{width:"100%","& .empty-result-message":{padding:8},"& .bid-adjustment-grids-container":{width:"816px"},"& .target-selection-container":Object(a.a)({},w({palette:i,iconFontFamily:r},{companySearchTableWidth:l,companySearchTableCompanyNameWidth:d,companyIconHeightWidth:p,targetGridWidth:816}))}}}({palette:i,iconFontFamily:r},{companySearchTableWidth:l,companySearchTableCompanyNameWidth:d,companyIconHeightWidth:p})),"& .criterion-setting-Industry, .criterion-setting-JobFunction":Object(a.a)({},C({companySearchTableWidth:l})),"& .criterion-setting-JobFunction":Object(a.a)({},A({companySearchTableWidth:l}))}),"& .errors-container":{float:"left",clear:"both",padding:"0 15px 15px 15px"},"& .audience-advanced-target-settings":{paddingTop:10},"& .glyphicon-pencil":{marginRight:11},"& .no-target-exist-edit-label":{marginRight:5,"& u":{"text-decoration":"none"}},"& .edit-target-show-button":{verticalAlign:"middle"},"& .edit-target-show-button-container":{paddingBottom:8},"& .done-editing-target-button":{background:i.themePrimary,color:i.white,"&:focus:after":{border:"1px solid ".concat(i.white),bottom:1,left:1,right:1,top:1}},"& .level-toggle-container":{padding:"5px 0",marginBottom:10,"& .level-toggle":{marginRight:8,float:"left"}},"& .alert-info.form-group.adgroup-override-info":{lineHeight:1.5,margin:"8px 0",padding:8,"& .alert-image":{marginTop:3,float:"left"}},"& .location-target-done":{margin:"0 12px 0 15px"}},"& .adgroup-targets":{"& .linked-in-target-grid-container":{"& .column-name-BidAdjustment":{width:"280px !important"},"& .column-name-removeAll":{width:"149px !important"},"& tbody":{"& .linked-in-target-grid__area-row":{"& .bid-adjustment-target-column select.form-control,input.form-control":{display:"inline-block !important","margin-left":"5px"}}}}}}},E=function(e){var t=e.palette,i=void 0===t?{}:t;e.iconFontFamily;return{"& .crud-audience-budget-bid":{padding:"0 32px 15px 32px","& .control-label:nth-child(1)":{marginTop:0},"& .budget":{"& .form-control-static":{minHeight:1,"& .col-sm-fluid":{float:"left",paddingRight:10}}},"& .bid__container > .form-group":{"& .form-control-static":{minHeight:1}},"& .default-bid":{float:"none","& .input-group":{paddingTop:5},"& .input-group-addon":{backgroundColor:i.white,border:0},"& .kpiestimation-result":{"& .panel-heading":{marginBottom:15,border:0}}},"& .bid-adjustments-container, .adschedule-targets-container":{border:0,"& .bid-adjustment-targets-container, .adschedule-targets":{padding:[0,15]},"& .bid-adjustments-section, .adschedule-section":{zIndex:1,"&:focus, &:hover":{outline:"none",border:"none",textDecoration:"none",color:i.themePrimary,background:i.neutralLighter}}},"& .container-budget":{paddingLeft:"0 !important"}},"& .criterion-setting-container":{"&.show-cashback-percent":{"& .bid-adjustment-grids-container .table-container, & .location-bid-grid-container .table-container":{width:856,"& .inherit-cashback-value":{display:"inline-block"},"& .cashback-option-select.form-control":{width:"180px !important"},"& .input-group-addon":{padding:0,lineHeight:"30px",verticalAlign:"middle",background:"none"}}},"&.criterion-setting-CompanyName.show-cashback-percent":{"& .bid-adjustment-grids-container .table-container":{width:1100}},"&.criterion-setting-Industry.show-cashback-percent":{"& .bid-adjustment-grids-container .table-container":{width:1e3}},"&.criterion-setting-JobFunction.show-cashback-percent":{"& .bid-adjustment-grids-container .table-container":{width:900}},"&.criterion-setting-Audience.show-cashback-percent":{"& .bid-adjustment-grids-container .table-container":{width:1050,"& .column-name-Target":{width:300}}},"& .target-edit-container, .bid-adjustment-grids-container":{"& table.table--no-border>tbody>tr:hover":{background:i.neutralLight,"& td":{border:"1px solid ".concat(i.white)}},"& .table-container":{width:716,"& .header":{padding:"11px 7px 12px 7px","& tr > th":{fontWeight:"normal",height:"42px",wordBreak:"break-all"},"& tr > th:first-child":{width:140},"& tr > th:nth-child(3)":{width:249}},"& tbody":{"& tr > td":{fontWeight:"normal",height:"42px",wordBreak:"break-all"},"& tr > .text-left:first-child":{"& .statusEnabled_icon, .statusExcluded_icon":{lineHeight:"19px",padding:"12px 9px 11px 7px"}},"& tr > .text-left:nth-child(2)":{padding:"0px 7px",lineHeight:"20px","&.col-location":{wordBreak:"break-word"}},"& tr > .text-left:nth-child(3), & tr > .text-left:nth-child(4)":{padding:"0px 7px","& .form-inline":{"& .form-control":{marginRight:8,width:135,padding:"0 28px 0 8px"},"& .inline-input, & input[type=text]":{width:66,padding:"0 8px"},"& .error":{margin:0}}},"& .company-item-template":{paddingTop:2,"& .pull-left":{marginTop:5,marginRight:7,"& img":{width:32,height:32,overflow:"hidden",display:"block"}},"& .company-name":{width:310,lineHeight:"20px","& .company-item-name, .company-item-industry":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",paddingRight:5}}}},"& .footer":{"& .pagination-control":{"& .pager":{display:"inline-block",marginLeft:20}}}}}}}},I=function(){return{"& .crud-audience-ad":Object.assign({},{marginLeft:32,"& .control-label":{margin:0},"& .form-control-static":{paddingTop:7,paddingBottom:7},"& .alert":{marginLeft:0},"& .mobile-url":{marginTop:32},"& .ad-edit-action-buttons":{marginTop:20,"& .save-ad-button":{marginRight:12}},"& .HelpTopic":{verticalAlign:"middle"},"& .audience-ads-policy-container":{"& .alert-info-inline":{"& >a":{verticalAlign:"middle"}}},"& .expand-url-options":{"& .spritedimagealign":{display:"inline-block"},"& > span":{verticalAlign:"unset"}}}),"& .error-no-created-ad":{marginLeft:32}}},O=function(e){var t=e.palette,i=void 0===t?{}:t,n=(e.iconFontFamily,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).creationContainerMarginLeft),a=void 0===n?32:n;return{"& .audience-adgroup-creation-wizard-container, & .audience-adgroup-settings-wizard-container":{"& .cashback-percent-container":{display:"flex","& select":{width:180,marginRight:10},"& .cashback-inherit-container, & .cashback-input-container":{display:"flex","& .cashback-percent-input":{width:90},"& .input-group-addon":{width:"auto",paddingTop:8}}},"& h1":{borderBottom:"1px solid rgb(237, 235, 233)",margin:0,fontSize:20,paddingTop:20,paddingBottom:20,paddingLeft:16},"& .adgroup-creation-step1-container":{marginLeft:a,"& .form-horizontal>.form-group:nth-child(1)>.control-label:nth-child(1)":{marginTop:0,"&.crud-adgroup-schedule-label":{marginTop:33}},"& .name-input-control-container":{"& .Name-value":{width:438}},"& .remaining-chars-hint-container":{width:438,"& .remaining-chars-hint":{margin:0}},"& .bidding-strategy-container":{"& select":{width:438},"& #BidStrategySetting_BidStrategy_Label":{padding:[5,0]},"& .col-sm-6 > .form-control-static":{minHeight:1,paddingBottom:8}},"& .default-bid-container":{width:438,"& .input-group-addon":{background:i.white,border:0,color:i.neutralPrimary,padding:"6px 6px 6px 12px"}},"& .audience-advanced-settings-section":{marginTop:30,"& .audience-advanced-settings-header":{padding:0,fontSize:18,"& .expanderImage, .expandedImage":{fontSize:18,marginRight:11}},"& .audience-advanced-settings":{marginLeft:a,"& .ad-schedule":{marginLeft:16}}}},"& .audience-adgroup-creation-wizard-step2":{"& .crud-audience-target-selector":{paddingTop:0}}},"& .audience-adgroup-settings-wizard-container":{overflow:"auto"}}},P=function(e){var t=e.palette,i=void 0===t?{}:t;e.iconFontFamily;return{"& .bmc_redirect_page":{padding:"20px 32px",width:"100%"},"& h1.bmc_redirect_header":{margin:0,fontSize:20,color:i.neutralPrimary},"& .bmc_save_bar":{borderTop:"1px solid ".concat(i.neutralLight),paddingTop:16,"& .btn-save":{marginRight:12}},"& .bmc_url_link":{display:"inline-block",margin:"25px 0 25px 5px"}}},M=function(){return{"& .raise-bid-popup-content":{width:"355px",zIndex:1,position:"absolute",color:"black",background:"#fff",padding:"16px 14px 16px 16px",border:"solid 1px #dddddd",left:"22px",top:"50%",transform:"translateY(-50%)",cursor:"default",fontFamily:"Segoe UI,Tahoma,Geneva,Verdana,sans-serif",boxShadow:"0 6.4px 14.4px 0 rgba(0,0,0,.132), 0 1.2px 3.6px 0 rgba(0,0,0,.108)","& .close-button.closeimage":{float:"right",position:"relative",cursor:"pointer",color:"#333333",verticalAlign:"middle"},"& strong.title":{marginRight:"24px",fontSize:"20px",lineHeight:"1.5",display:"block"},"& .subcontent":{marginRight:"24px",marginTop:"24px",lineHeight:"normal"},"& label.choices":{marginRight:"24px",marginTop:"11px",marginBottom:"11px",fontWeight:"normal","& span.bid-suggestion":{position:"relative",top:"-2px"}},"& .btn.btn-default.cancel":{marginLeft:"8px"}}}},j={completedBorder:"#0078d4",completedIcon:"#0078d4",inProgressIcon:"#c0def6",incompleteBorder:"#ebebeb",incompleteIcon:"#edebe9",background:"#fff",stepContentBorder:"#e1dfdd",subtitle:"#605E5C",title:"#323130"};function L(e){var t=e.palette;return{"&>.page-content":{height:"100%",width:"100%",display:"flex",flexDirection:"row",alignItems:"stretch","& .bidding-strategy__container":{"& .custom-param__key-field":{display:"inline-block",width:"85px","margin-left":"5px","margin-right":"5px"},"& #currencyLabelTargetCpa":{display:"inline-block","vertical-align":"initial",marginTop:0},"& #currencyLabelTargetRoas":{display:"inline-block","vertical-align":"initial",marginTop:0},"& a.helpbutton":{"margin-left":"5px"},"& .alert":{marginTop:6,marginLeft:0,"& .alert-image":{height:16,paddingTop:0}}}},"& .progress-list":{minWidth:248,width:248,borderRight:"1px solid ".concat(j.stepContentBorder),marginLeft:"38px","& ol.step-progress-list":{margin:0,padding:0,listStyle:"none"},"& ol.step-progress-list>.step-progress-list-item":{paddingTop:"24px","&:first-child":{borderLeftColor:j.background},"&>.step-progress-list-item-glyphicon":{marginLeft:"-8px",marginRight:"8px",background:j.background,paddingTop:"5px",paddingBottom:"4px"}},"& .step-progress-list-item":{borderLeft:"2px solid ".concat(j.completedBorder),"&.step-progress-list-item-ahead":{borderLeftColor:j.incompleteBorder}},"& .step-progress-list-item-behind .step-progress-list-item-glyphicon":{color:j.completedIcon},"& .step-progress-list-item-selected .step-progress-list-item-glyphicon":{color:j.inProgressIcon},"& .step-progress-list-item-ahead .step-progress-list-item-glyphicon":{color:j.incompleteIcon}},"& .sub-form":{flex:1,display:"flex",flexDirection:"column","&>.form-content":{flex:1},"&>.bottom-bar":{borderTop:"1px solid ".concat(t.neutralLight),padding:"0 32px",height:64,display:"flex",alignItems:"center","&>.ssc-form-next":{marginRight:54,"&.first-step":{marginRight:12}},"&>.ssc-form-back":{marginRight:12}},"& .adschedule-targets-container":{borderTop:"none","& .form-group":{"& .col-sm-2, & .col-sm-10":{paddingLeft:0}}}},"& .smart-shopping-campaign-settings":{"& .header-section":{marginLeft:32,"&>p":{color:t.neutralSecondary}},"& .ba-backbone-instance-wrapper>div":{paddingTop:0}},"& .crud-audience-ad":{"&>a.HelpTopic, &>span":{display:"inline-block",lineHeight:"21px",verticalAlign:"middle"},"&>a.HelpTopic":{marginLeft:5},"& .audience-ads-policy-container .alert.alert-info":{lineHeight:"16px",marginTop:0,marginLeft:0,"& .alert-info-inline":{"& a":{verticalAlign:"middle"}},"& .alert-image":{marginTop:2}},"& .react-image-experience":{"& .advanced-url-options":{"& .col-sm-8 .row":{height:35},"& .upgraded-url-options-preview__value":{marginTop:2},"& .control-label":{marginTop:0},"& input.form-control.custom-param__key-field":{margin:"0 5px"},"& input.form-control.custom-param__value-field":{marginLeft:5},"& .tracking-template__container .charactersRemaining span":{wordBreak:"break-all"},"& .row":{minHeight:35,marginTop:10},"& .upgraded-url-options-preview__label":{"white-space":"nowrap"}}}},"& .location-manage":{"& .location-popup-editor .ba-backbone-instance-wrapper>div":{padding:0}}}}i.d(t,"w",function(){return n}),i.d(t,"l",function(){return l}),i.d(t,"c",function(){return d}),i.d(t,"j",function(){return u}),i.d(t,"a",function(){return p}),i.d(t,"s",function(){return h}),i.d(t,"m",function(){return g}),i.d(t,"u",function(){return m}),i.d(t,"b",function(){return f}),i.d(t,"t",function(){return v}),i.d(t,"k",function(){return b}),i.d(t,"n",function(){return y}),i.d(t,"r",function(){return o}),i.d(t,"h",function(){return S}),i.d(t,"i",function(){return _}),i.d(t,"o",function(){return x}),i.d(t,"p",function(){return k}),i.d(t,"q",function(){return T}),i.d(t,"f",function(){return E}),i.d(t,"e",function(){return I}),i.d(t,"d",function(){return O}),i.d(t,"g",function(){return P}),i.d(t,"v",function(){return M}),i.d(t,"x",function(){return L})},yiZA:function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return x});var n=i("1lK0"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("UT4o"),u=i.n(d),p=i("AQBV"),g=i.n(p),h=i("7Mva"),m=i("+ESq"),f=i.n(m),v=i("1EwD"),b=i.n(v),y=i("gBp3"),S=i.n(y),w=window.globalLegacyI18n.get("component/i18n/loader!campaignui/feature/adextension/shared"),C=window.globalLegacyI18n.get("$/schema-i18n!campaign"),x=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.extension,r=i.schema,o=i.customValidators,c=i.fields,d=i.i18nKeys,p=i.data,h=(p=void 0===p?{}:p).extension,m=i.formatting,v=void 0===m?{labelClass:"col-sm-4",controlClass:"col-sm-8"}:m,b=i.instrumentation,y=void 0===b?{startScenario:u.a.noop,startActivity:u.a.noop,logMessage:u.a.noop,endActivity:u.a.noop,asLoggingStart:u.a.constant(u.a.noop)}:b,x=i.instrumentationSettings,k=void 0===x?{ACTIVITYNAME:{},SCENARIONAME:{}}:x,A=i.disableScheduling,T=void 0!==A&&A,_=g.a.get("Permissions")||{};this.isSchedulingEnabled=_.IsAdExtensionsSchedulingEnabled&&!T,this.repository=h,this.instrumentation=y,this.instrumentationSettings=k,Object(l.a)(Object(s.a)(t.prototype),"initialize",this).call(this,{model:a,schema:r,customValidators:o,fields:c,s$i18n:C,template:function(e){return f()(u.a.extend({i18n:w,type:r.name,formatting:v,editWarningMessage:w.get(d&&d.AdExtensions_Edit_Warning?d.AdExtensions_Edit_Warning:"AdExtensions_Edit_Warning")},e))}}),this.isSchedulingEnabled?(this.model=u.a.pick.apply(u.a,[this.model,r.key,"Scheduling"].concat(Object(n.a)(this.properties))),this.schedulingView=new S.a(u.a.extend({},v,{model:this.model.Scheduling||{}}))):this.model=u.a.pick.apply(u.a,[this.model,r.key].concat(Object(n.a)(this.properties))),this.on("save",function(t){e._onSave(t)})}},{key:"render",value:function(){return Object(l.a)(Object(s.a)(t.prototype),"render",this).call(this),this.isSchedulingEnabled&&(this.schedulingView.render(),this.$(".scheduling").replaceWith(this.schedulingView.el)),this}},{key:"remove",value:function(){this.isSchedulingEnabled&&this.schedulingView.remove(),this.trigger("remove"),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"validate",value:function(){return!(this.upgradedUrlView&&!this.upgradedUrlView.isValid())&&(this.isSchedulingEnabled?u.a.every([this.schedulingView.validate(),Object(l.a)(Object(s.a)(t.prototype),"validate",this).call(this)]):Object(l.a)(Object(s.a)(t.prototype),"validate",this).call(this))}},{key:"currentModel",value:function(){var e=Object(l.a)(Object(s.a)(t.prototype),"currentModel",this).call(this);return this.isSchedulingEnabled&&(e.Scheduling=this.schedulingView.toObject()),e}},{key:"_onSave",value:function(e){var t=this,i=this.viewModel.editing?this.instrumentationSettings.SCENARIONAME.UpdateAdExtension:this.instrumentationSettings.SCENARIONAME.CreateAdExtension,n=this.instrumentationSettings.ACTIVITYNAME.SaveAdExtension;this.isSchedulingEnabled&&this.schedulingView.modelChanged()&&this.instrumentation.asLoggingStart(u.a.noop,this.instrumentationSettings.ACTIVITYNAME.ChangeAdExtensionSchedule,i)(),this.instrumentation.startActivity(n),this.repository.create(e).finally(b()(this.$el.parent())).then(function(e){t.trigger(t.viewModel.editing?"updated":"created",e)}).catch(function(e){if(e instanceof t.repository.BadResponseError)t.setErrors({$overall:[e]});else{var i=u.a.groupBy(e,"property");if(t.upgradedUrlView){var n=["FinalUrls","MobileFinalUrls","TrackingUrlTemplate","UrlCustomParameters"],a=u.a.pick(i,n);t.upgradedUrlView.handleApiErrors(a),i=u.a.omit(i,n)}t.setErrors(i),t.schedulingView&&e.Scheduling&&t.schedulingView.setErrors(e.Scheduling)}})}}]),t}(h.a)},ysmP:function(e,t,i){var n,a;n=[i("5iHu")],void 0===(a=function(e){"use strict";return function(t){t=e(t);var i=e(".navbar-fixed-top");if(!(!t||t.length<1||!i||i.length<1)){var n=t.offset();if(n){var a="absolute"==i.css("position")?0:0+i.outerHeight(),r=n.top-a,o=r<0?0:r;window.scrollTo(0,o)}}}}.apply(t,n))||(e.exports=a)},z8dk:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l){a.koErrors=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<ul"+n.attr("class",n.classes([t||"alert alert-danger"],[!0]),!1,!0)+' data-bind="visible: errors().length &gt; 0, foreach: errors, attr: {&quot;aria-hidden&quot;: errors().length == 0}"'+n.attr("id",e||"KoErrors",!0,!0)+' role="alert"><li data-bind="html: $data" role="presentation"></li></ul>'},i+="\x3c!-- ko if: dataLoaded--\x3e",e||(i+="<h1>",i=l?i+"<span>"+n.escape(null==(t=r.get("ShoppingSponsoredCampaignCreate_HeaderTitle"))?"":t)+"</span>":i+"<span>"+n.escape(null==(t=r.get("ShoppingCampaign_Header_Title"))?"":t)+"</span>",i+="</h1>"),i+="\x3c!-- /ko--\x3e\x3c!--[TODO][lizho] add intro line--\x3e",a.koErrors(),i+="\x3c!-- ko if: dataLoaded--\x3e\x3c!-- ko if: !hasStore()--\x3e",i=l?i+"<span>"+n.escape(null==(t=r.get("ShoppingCampaign_NoLinkedAccount_Message"))?"":t)+'</span><a class="brands_url_link"><span>'+n.escape(null==(t=r.get("ShoppingCampaign_NoLinkedAccount_URL_Text"))?"":t)+"</span></a>":i+"<span>"+n.escape(null==(t=r.get("ShoppingCampaign_NoBMCAccount_Message"))?"":t)+'</span><a class="bmc_url_link"><span>'+n.escape(null==(t=r.get("ShoppingCampaign_BmcURL_Text"))?"":t)+"</span></a>",i+="\x3c!-- /ko--\x3e\x3c!-- ko if: hasStore()--\x3e",o||(i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=r.get("ShoppingCampaign_CampaignSetting_SectionTitle"))?"":t)+"</span></h3><hr>"),i+='<div class="campaign-settings"></div>',s&&(i+='<div class="advanced-settings-section"></div>'),i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=r.get("ShoppingCampaign_ShoppingSetting_SectionTitle"))?"":t)+'</span></h3><hr><div class="shopping-settings"></div>',s?i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=r.get("SectionTitle_CampaignTargets"))?"":t)+'</span></h3><hr><div class="campaign-targets clearfix"></div>':(o||(i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=r.get("SectionTitle_AdvancedSettings"))?"":t)+"</span></h3><hr>"),i+='<div class="advanced-settings-section"></div>'),i=i+'\x3c!-- /ko--\x3e<div class="save-bar form-group">\x3c!-- ko if: hasStore()--\x3e<input class="btn-save btn btn-primary" type="button"'+n.attr("value",r.get("ShoppingCampaign_Button_Save"),!0,!0)+' data-bind="attr: { disabled: !isNextButtonEnabled() }">\x3c!-- /ko--\x3e<input class="btn-cancel btn btn-default" type="button"'+n.attr("value",r.get("ShoppingCampaign_Button_Cancel"),!0,!0)+'></div>\x3c!-- /ko--\x3e<div railviewid="newcampaign_createproductadcampaign" style="display: none"></div>'}.call(this,"editMode"in r?r.editMode:"undefined"!==typeof editMode?editMode:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isNewUI"in r?r.isNewUI:"undefined"!==typeof isNewUI?isNewUI:void 0,"isNotAudienceCampaign"in r?r.isNotAudienceCampaign:"undefined"!==typeof isNotAudienceCampaign?isNotAudienceCampaign:void 0,"isSponsoredCampaign"in r?r.isSponsoredCampaign:"undefined"!==typeof isSponsoredCampaign?isSponsoredCampaign:void 0),i}},zJLZ:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t="",i=e||{};return function(e){t=t+'<div class="dropdown-search-selector__search" role="search"><button class="btn btn-default dropdown-search-selector__search--submit glyphicon glyphicon-search filter_search_icon_small" aria-label="Search" type="button" tabindex="0"></button><input'+n.attr("placeholder",e.placeholder,!0,!0)+' name="srch-term" id="srch-term" type="text"></div>'}.call(this,"view"in i?i.view:"undefined"!==typeof view?view:void 0),t}},zKVV:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a=e||{};return function(e,a,r,o){"creation"===o&&(i=i+"<h1><span>"+n.escape(null==(t=e.get("SmartShoppingCampaign_Header_Title"))?"":t)+"</span></h1>"),r?i=i+"<span>"+n.escape(null==(t=e.get("ShoppingCampaign_NoBMCAccount_Message"))?"":t)+'</span><a class="bmc_url_link"><span>'+n.escape(null==(t=e.get("ShoppingCampaign_BmcURL_Text"))?"":t)+"</span></a>":(i=i+'\x3c!-- koErrors--\x3e<h3 class="type-bold campaign-settings-title"><span>'+n.escape(null==(t=e.get("ShoppingCampaign_CampaignSetting_SectionTitle"))?"":t)+'</span></h3><hr><div class="campaign-settings"></div><h3 class="type-bold"><span>'+n.escape(null==(t=e.get("ShoppingCampaign_ShoppingSetting_SectionTitle"))?"":t)+'</span></h3><hr><div class="shopping-settings"></div><h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_CampaignTargeting"))?"":t)+'</span></h3><hr><div class="campaign-targeting clearfix"></div>',"creation"===o?a&&(i=i+'<h3 class="type-bold"><span>'+n.escape(null==(t=e.get("SectionTitle_ResponsiveAd"))?"":t)+'</span></h3><hr><div class="responsive-ad clearfix"></div>'):i=i+'<h3 class="type-bold advaced-settings-title"><span>'+n.escape(null==(t=e.get("SectionTitle_AdvancedSettings"))?"":t)+'</span></h3><hr><div class="advanced-settings clearfix"></div>'),i+='<div class="save-bar form-group create-smart-shopping-campaign-save-bar">',r||(i=i+'<input class="btn-save btn btn-primary" type="button"'+n.attr("value",e.get("ShoppingCampaign_Button_Save"),!0,!0)+">"),i=i+'<input class="btn-cancel btn btn-default" type="button"'+n.attr("value",e.get("ShoppingCampaign_Button_Cancel"),!0,!0)+"></div>"}.call(this,"i18n"in a?a.i18n:"undefined"!==typeof i18n?i18n:void 0,"isResponsiveAdForSSCEnabled"in a?a.isResponsiveAdForSSCEnabled:"undefined"!==typeof isResponsiveAdForSSCEnabled?isResponsiveAdForSSCEnabled:void 0,"isStoreNotValid"in a?a.isStoreNotValid:"undefined"!==typeof isStoreNotValid?isStoreNotValid:void 0,"scenario"in a?a.scenario:"undefined"!==typeof scenario?scenario:void 0),i}},zf2X:function(e,t,i){var n,a;n=[i("UT4o"),i("Glrc"),i("ITOZ"),i("muKe"),i("5iHu"),i("7XbR"),i("sO0N"),i("Gu69"),i("5yFR"),i("UDFB")],void 0===(a=function(e,t,i,n,a,r,o,s,l,c){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=233)}({13:function(e,i){e.exports=t},18:function(e,t){e.exports=i},19:function(e,t){e.exports=n},233:function(e,t,i){e.exports=i(234)},234:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DateFilter",{enumerable:!0,get:function(){return n.DateFilter}});var n=i(235)},235:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilter=void 0;var n=c(i(8)),a=i(19),r=c(i(45)),o=i(236),s=i(239),l=c(i(251));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=a.helpers.updateView,f=a.helpers.ensureChildView,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,g(t).apply(this,arguments))}var i,c,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.DeterministicView),i=t,(c=[{key:"initialize",value:function(e){var t=this;this.options=e,this.DropdownView=this.options.DropdownView||o.DateFilterDropdownView,this.customCloseMenuSelector=this.options.datePickerSelector||".k-calendar",(0,r.default)("body").on("click",function(e){return t.closeMenuOnOutsideClick(e)})}},{key:"closeMenuOnOutsideClick",value:function(e){var t=(0,r.default)(e.target);t.closest(".dropdown-menu",this.$el).length||t.closest(".dropdown-toggle",this.$el).length||t.closest(this.customCloseMenuSelector).length||t.closest(".k-list").length||t.closest(".k-content").length||this.$(".dropdown-toggle").parent().removeClass("open")}},{key:"setState",value:function(e){var t=this,i=e.selection,a=e.today,r=f(this,"date-filter-panels-container",s.DateFilterPanelsContainer,n.default.defaults({today:a},n.default.omit(this.options,"model")),{"date-range-selected":"apply"}).setState({checkedSelection:i,comparisonToggleChecked:this.options.isComparisonEnabled&&i.comparedRange}).getState().checkedSelection,o=n.default.mapObject(r,function(e){return t.cloneDateRange(e)});return f(this,"dropdown-view",this.DropdownView,{i18n:this.options.i18n,dateFormat:this.options.dateFormat,timeFormat:this.options.timeFormat}).setState({selection:o}),this.model.set({selection:o,today:a}),this}},{key:"cloneDateRange",value:function(e){if(e){var t=n.default.clone(e),i=e.start,a=e.end;return t.start=i?new Date(i):i,t.end=a?new Date(a):a,t}return e}},{key:"apply",value:function(e){var t=this,i=n.default.mapObject(e,function(e){return t.cloneDateRange(e)});m(this,{selection:i}),this.trigger("date-range-selected",i),this.getChild("dropdown-view").setState({selection:i}),this.toggle()}},{key:"getSelection",value:function(){var e=this.getState().selection,t={primaryRange:n.default.pick(e.primaryRange,"start","end","grain","key")};return e.comparedRange&&(t.comparedRange=n.default.pick(e.comparedRange,"start","end","key")),t}},{key:"toggle",value:function(){this.$(".dropdown-toggle").parent().toggleClass("open")}},{key:"events",get:function(){var e=this;return{"click .dropdown-toggle":function(){return e.toggle()}}}},{key:"template",get:function(){return l.default}}])&&u(i.prototype,c),d&&u(i,d),t}();t.DateFilter=v},236:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilterDropdownView=void 0;var n=s(i(8)),a=i(19),r=i(237),o=s(i(238));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,u(t).apply(this,arguments))}var i,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.DeterministicView),i=t,(s=[{key:"initialize",value:function(e){this.options=e,this.RANGES=r.RANGES}},{key:"setState",value:function(e){var t=e.selection,i=t.primaryRange,a={start:n.default.result(t.comparedRange,"start"),end:n.default.result(t.comparedRange,"end"),text:n.default.result(t.comparedRange,"text")};return this.model.set({primaryRange:i,comparedRange:a}),this}},{key:"template",get:function(){return o.default}}])&&c(i.prototype,s),l&&c(i,l),t}();t.DateFilterDropdownView=g},237:function(e,t){e.exports=s},238:function(e,t,i){var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.options.i18n,o={skeleton:a.options.dateFormat},s={skeleton:a.options.timeFormat},l=a.RANGES;i=i+'<div class="text-left col-xs-11"><div class="type-bold primary-range"><span>'+n.escape(null==(t=e.primaryRange.text)?"":t)+"</span><span>"+n.escape(null==(t=r.getString("DateFilter_RangeSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(e.primaryRange.start,o))?"":t)+"</span>",e.primaryRange.key===l.CUSTOM_TIME?i=i+" <span>"+n.escape(null==(t=r.formatDate(e.primaryRange.start,s))?"":t)+"</span><span>"+n.escape(null==(t=r.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(e.primaryRange.end,s))?"":t)+"</span>":e.primaryRange.end-e.primaryRange.start!=0&&(i=i+"<span>"+n.escape(null==(t=r.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(e.primaryRange.end,o))?"":t)+"</span>"),i+="</div>",e.comparedRange.start&&(i=i+'<div class="text-muted type-normal compared-range"><span>'+n.escape(null==(t=r.getString("DateFilter_Label_CompareTo"))?"":t)+"</span><span>"+n.escape(null==(t=r.getString("DateFilter_RangeSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(e.comparedRange.start,o))?"":t)+"</span>",e.comparedRange.end-e.comparedRange.start!=0&&(i=i+"<span>"+n.escape(null==(t=r.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(e.comparedRange.end,o))?"":t)+"</span>"),i+="</div>"),i+='</div><div class="icon-right glyphicon glyphicon-triangle-bottom"></div>'}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},239:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateFilterPanelsContainer=void 0;var n=l(i(8)),a=i(19),r=i(240),o=i(249),s=l(i(250));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=a.helpers.updateView,m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var i,l,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.DeterministicView),i=t,(l=[{key:"initialize",value:function(e){var t=this;this.options=e;var i=this.options,a=i.i18n,s=i.dateFormat,l=i.today,c=i.getDateRanges,d=i.getComparedDateRanges,u=i.enabledRangesPredicate,p=i.isComparisonEnabled,g=i.minDate,h=i.maxDate,m=i.defaultTimeRange,f=void 0===m?{}:m;n.default.defaults(f,{start:new Date("2017/01/01 8:00"),end:new Date("2017/01/01 17:00")}),this.setChild("primary-date-range-panel",new r.PrimaryDateRangePanel({dateRangesAccessor:c,enabledRangesPredicate:u,i18n:a,dateFormat:s,today:l,showDates:!0,minDate:g,maxDate:h,defaultTimeRange:f}));var v=this.getChild("primary-date-range-panel");if(v.on("range-checked",function(e){t.rangeChecked(e)}),p){this.setChild("compared-date-range-panel",new o.ComparedDateRangePanel({dateRangesAccessor:d,i18n:a,dateFormat:s,today:l,showDates:!1}));var b=this.getChild("compared-date-range-panel");b.on("range-checked",function(e){return t.rangeChecked(e)}),v.on("range-checked",function(e){return b.onPrimaryRangeChanged(e)})}}},{key:"setState",value:function(e){var t=e.checkedSelection,i=e.comparisonToggleChecked;this.model.set({comparisonToggleChecked:i}),this.getChild("primary-date-range-panel").setState({selection:t.primaryRange}),this.options.isComparisonEnabled&&i&&this.getChild("compared-date-range-panel").setState({selection:t.comparedRange||{},primaryRange:t.primaryRange});var n=this.getCheckedRanges();return this.model.set({checkedSelection:n}),this}},{key:"rangeChecked",value:function(){var e=this.getCheckedRanges();h(this,{checkedSelection:e}),n.default.some(e,function(e){return e.isCustom})||this.getState().comparisonToggleChecked||this.apply()}},{key:"getCheckedRanges",value:function(){var e={primaryRange:this.getChild("primary-date-range-panel").getCheckedRange()};return this.getState().comparisonToggleChecked&&n.default.extend(e,{comparedRange:this.getChild("compared-date-range-panel").getCheckedRange()}),e}},{key:"apply",value:function(){var e=this.getCheckedRanges();if(!e.primaryRange.invalid&&(e.comparedRange&&this.getChild("compared-date-range-panel").onPrimaryRangeChanged(e.primaryRange),!(e=this.getCheckedRanges()).comparedRange||!e.comparedRange.invalid)){h(this,{checkedSelection:e});var t=this.getState().comparisonToggleChecked?e:n.default.pick(e,"primaryRange");this.trigger("date-range-selected",t)}}},{key:"events",get:function(){var e=this;return{"click .apply":function(){e.apply()},"click .toggle-button":function(t){e.model.set({comparisonToggleChecked:!e.model.get("comparisonToggleChecked")}),t.stopPropagation()}}}},{key:"template",get:function(){return s.default}}])&&d(i.prototype,l),c&&d(i,c),t}();t.DateFilterPanelsContainer=m},240:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryDateRangePanel=void 0;var n,a=(n=i(8))&&n.__esModule?n:{default:n},r=i(237),o=i(241);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,i){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var i,n,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.DateRangePanelBase),i=t,(n=[{key:"initialize",value:function(e){d(u(t.prototype),"initialize",this).call(this,e),this.showDateRanges=!0,this.dateRangesAccessor=this.options.dateRangesAccessor||r.getDateRanges,this.enabledRangesPredicate=this.options.enabledRangesPredicate||this.getCommonDateRanges()}},{key:"getCommonDateRanges",value:function(){var e=[r.RANGES.TODAY,r.RANGES.YESTERDAY,r.RANGES.THIS_WEEK_SUNDAY,r.RANGES.THIS_WEEK_MONDAY,r.RANGES.LAST_SEVEN_DAYS,r.RANGES.LAST_WEEK_SUNDAY,r.RANGES.LAST_WEEK_MONDAY,r.RANGES.LAST_FOURTEEN_DAYS,r.RANGES.LAST_THIRTY_DAYS,r.RANGES.THIS_MONTH,r.RANGES.LAST_MONTH,r.RANGES.LAST_THREE_MONTHS,r.RANGES.LAST_SIX_MONTHS,r.RANGES.THIS_YEAR,r.RANGES.LAST_YEAR,r.RANGES.ALL_TIME];return function(t){return a.default.contains(e,t.key)}}},{key:"setState",value:function(e){var t=e.selection;return!t.isCustom&&this.model.get("dateRanges")||this.updateDateRanges(t),this.model.set({selectedKey:t.key}),this.showDatePickersIfCustomSelected(),this}},{key:"updateDateRanges",value:function(e){var t=this,i=e.start,n=e.end,r=this.options,o=r.today,s=r.i18n,l=this.dateRangesAccessor({today:o,i18n:s,customStart:i,customEnd:n}),c=a.default.chain(l).mapObject(function(e){return t.enabledRangesPredicate(e)?e:null}).omit(a.default.isNull).value();this.model.set({dateRanges:c})}}])&&l(i.prototype,n),s&&l(i,s),t}();t.PrimaryDateRangePanel=g},241:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateRangePanelBase=void 0;var n=c(i(8)),a=i(19),r=i(237),o=c(i(242)),s=i(243),l=i(246);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=a.helpers.updateView,f=a.helpers.ensureChildView,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,g(t).apply(this,arguments))}var i,c,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.DeterministicView),i=t,(c=[{key:"initialize",value:function(e){this.options=e,this.RANGES=r.RANGES}},{key:"showDatePickersIfCustomSelected",value:function(){var e=this.model.attributes,t=e.selectedKey,i=e.dateRanges[t];if(i.isCustom)if(t===r.RANGES.CUSTOM)f(this,"customDateRangeSelectionPanel",s.CustomDateRangeSelectionPanel,{startDate:i.start,endDate:i.end,i18n:this.options.i18n,minDate:this.options.minDate,maxDate:this.options.maxDate});else if(t===r.RANGES.CUSTOM_TIME){var n=this.getChild("customTimeRangeSelectionPanel");n||(n=new l.CustomTimeRangeSelectionPanel({i18n:this.options.i18n,minDate:this.options.minDate,maxDate:this.options.maxDate}).setState({date:i.start,startTime:this.options.defaultTimeRange.start,endTime:this.options.defaultTimeRange.end}),this.setChild("customTimeRangeSelectionPanel",n))}}},{key:"getCheckedRange",value:function(){var e=this.model.attributes,t=e.dateRanges,i=e.selectedKey;return t[i].isCustom&&(i===r.RANGES.CUSTOM?n.default.extend(t[i],this.getChild("customDateRangeSelectionPanel").getSelection()):i===r.RANGES.CUSTOM_TIME&&n.default.extend(t[i],this.getChild("customTimeRangeSelectionPanel").getSelection())),t[i]}},{key:"events",get:function(){var e=this;return{"click .dropdown-item":function(t){var i=e.$(t.target).closest(".dropdown-item").first().attr("data-key");if(!i)throw new Error("No key found");var n=e.model.get("dateRanges");n[i].isCustom&&t.stopPropagation(),i!==e.model.get("selectedKey")&&(m(e,{selection:n[i],selectedKey:i}),e.showDatePickersIfCustomSelected(),e.trigger("range-checked",n[i]))}}}},{key:"template",get:function(){return o.default}}])&&u(i.prototype,c),d&&u(i,d),t}();t.DateRangePanelBase=v},242:function(e,t,i){var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e,a){var r=a.options.i18n,o={skeleton:a.options.dateFormat},s=a.RANGES;e.dateRanges&&function(){var l=e.dateRanges;if("number"==typeof l.length)for(var c=0,d=l.length;c<d;c++){var u=l[c];i=i+"<li"+n.attr("class",n.classes(["date-range",e.selectedKey===u.key?"selected":""],[!1,!0]),!1,!0)+'><a class="dropdown-item" role="menuitem" href="javascript:void(0);"'+n.attr("data-key",c,!0,!0)+'><div class="pull-right">',c===s.CUSTOM?i=i+"<div"+n.attr("class",n.classes(["customDateRangePanel","form-inline",e.selectedKey===c?"":"hidden"],[!1,!1,!0]),!1,!0)+'><div data-ref="customDateRangeSelectionPanel"></div></div>':c===s.CUSTOM_TIME?i=i+"<div"+n.attr("class",n.classes(["customTimeRangePanel","form-inline",e.selectedKey===c?"":"hidden"],[!1,!1,!0]),!1,!0)+'><div data-ref="customTimeRangeSelectionPanel"></div></div>':a.options.showDates&&(i=i+"<span>"+n.escape(null==(t=r.formatDate(u.start,o))?"":t)+"</span>",u.end-u.start>0&&(i=i+"<span>"+n.escape(null==(t=r.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(u.end,o))?"":t)+"</span>")),i=i+"</div><div"+n.attr("class",n.classes(["glyphicon","glyphicon-offset-left5","glyphicon-ok",e.selectedKey===u.key?"":"invisible"],[!1,!1,!1,!0]),!1,!0)+"></div><span>"+n.escape(null==(t=u.text)?"":t)+"</span></a></li>"}else for(var c in d=0,l)d++,u=l[c],i=i+"<li"+n.attr("class",n.classes(["date-range",e.selectedKey===u.key?"selected":""],[!1,!0]),!1,!0)+'><a class="dropdown-item" role="menuitem" href="javascript:void(0);"'+n.attr("data-key",c,!0,!0)+'><div class="pull-right">',c===s.CUSTOM?i=i+"<div"+n.attr("class",n.classes(["customDateRangePanel","form-inline",e.selectedKey===c?"":"hidden"],[!1,!1,!0]),!1,!0)+'><div data-ref="customDateRangeSelectionPanel"></div></div>':c===s.CUSTOM_TIME?i=i+"<div"+n.attr("class",n.classes(["customTimeRangePanel","form-inline",e.selectedKey===c?"":"hidden"],[!1,!1,!0]),!1,!0)+'><div data-ref="customTimeRangeSelectionPanel"></div></div>':a.options.showDates&&(i=i+"<span>"+n.escape(null==(t=r.formatDate(u.start,o))?"":t)+"</span>",u.end-u.start>0&&(i=i+"<span>"+n.escape(null==(t=r.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><span>"+n.escape(null==(t=r.formatDate(u.end,o))?"":t)+"</span>")),i=i+"</div><div"+n.attr("class",n.classes(["glyphicon","glyphicon-offset-left5","glyphicon-ok",e.selectedKey===u.key?"":"invisible"],[!1,!1,!1,!0]),!1,!0)+"></div><span>"+n.escape(null==(t=u.text)?"":t)+"</span></a></li>"}.call(this)}.call(this,"model"in a?a.model:"undefined"!==typeof model?model:void 0,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},243:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomDateRangeSelectionPanel=void 0;var n=l(i(8)),a=i(244),r=i(18),o=i(19),s=l(i(245));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=o.helpers.updateView,m=o.helpers.ensureChildView,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var i,l,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o.DeterministicView),i=t,(l=[{key:"initialize",value:function(e){this.options=e,h(this,{startDateErrors:[],endDateErrors:[],generalErrors:[]}),h(this,{startDate:this.options.startDate}),h(this,{endDate:this.options.endDate}),this.showDatePickers()}},{key:"showDatePickers",value:function(){var e=this,t=this.options,i=t.minDate,n=t.maxDate;m(this,"startDatePicker",a.DatePicker,{selectedDate:this.model.get("startDate"),minDate:i,maxDate:n},{rendered:function(){var e=new Date(Math.min(n,this.model.get("endDate")));this.getChild("startDatePicker").datePicker.max(e)},dateChanged:function(t){h(e,{startDate:t}),e.getChild("endDatePicker").datePicker.min(t),e.validate()}}),m(this,"endDatePicker",a.DatePicker,{selectedDate:this.model.get("endDate"),minDate:i,maxDate:n},{rendered:function(){var e=new Date(Math.max(i,this.model.get("startDate")));this.getChild("endDatePicker").datePicker.min(e)},dateChanged:function(t){h(e,{endDate:t}),e.getChild("startDatePicker").datePicker.max(t),e.validate()}})}},{key:"validate",value:function(){var e=this.options,t=e.minDate,i=e.maxDate,a=e.i18n,o=this.model.attributes,s=o.startDate,l=o.endDate<s?[a.getString("StartDate_GreaterThan_EndDate")]:[],c=n.default.map((0,r.validateDateRange)(t,i,this.model.get("startDate")),function(e){return a.getString(e)}),d=n.default.map((0,r.validateDateRange)(t,i,this.model.get("endDate")),function(e){return a.getString(e)});return h(this,{generalErrors:l,startDateErrors:c,endDateErrors:d}),n.default.union(l,c,d)}},{key:"getSelection",value:function(){var e=this.validate(),t=this.getState();return{start:t.startDate,end:t.endDate,invalid:e.length>0}}},{key:"template",get:function(){return s.default}}])&&d(i.prototype,l),c&&d(i,c),t}();t.CustomDateRangeSelectionPanel=f},244:function(e,t){e.exports=l},245:function(e,t,i){var n=i(13);e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.showErrors=t=function(e){this&&this.block,this&&this.attributes,function(){var a=e;if("number"==typeof a.length)for(var r=0,o=a.length;r<o;r++){var s=a[r];i=i+"<span>"+n.escape(null==(t=s)?"":t)+"</span>"}else for(var r in o=0,a)o++,s=a[r],i=i+"<span>"+n.escape(null==(t=s)?"":t)+"</span>"}.call(this)},i=i+"<div"+n.attr("class",n.classes(["datePicker","startDatePicker",e.startDateErrors.length||e.generalErrors.length?"error":""],[!1,!1,!0]),!1,!0)+'><div data-ref="startDatePicker"></div></div><span>'+n.escape(null==(t=r.options.i18n.getString("DateFilter_StartEndDateSeparator"))?"":t)+"</span><div"+n.attr("class",n.classes(["datePicker","endDatePicker",e.endDateErrors.length||e.generalErrors.length?"error":""],[!1,!1,!0]),!1,!0)+'><div data-ref="endDatePicker"></div></div><div class="errors">',a.showErrors(e.startDateErrors),a.showErrors(e.endDateErrors),a.showErrors(e.generalErrors),i+="</div>"}.call(this,"model"in r?r.model:"undefined"!==typeof model?model:void 0,"view"in r?r.view:"undefined"!==typeof view?view:void 0),i}},246:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomTimeRangeSelectionPanel=void 0;var n=u(i(8)),a=u(i(57)),r=i(244),o=i(247),s=i(18),l=i(19),c=i(77),d=u(i(248));function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t,i){return(m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=l.helpers.ensureChildView;function S(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}function w(e){var t=e.getState(),i=t.date,n=t.startTime,a=t.endTime;return{startDate:S(i,n),endDate:S(i,a)}}var C=function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.generalErrors,r=i.startDateErrors,o=i.endDateErrors;b(this,e),this.generalErrors=a.default.observable(n),this.startDateErrors=a.default.observable(r),this.endDateErrors=a.default.observable(o),this.errors=a.default.computed(function(){return[].concat(t.generalErrors(),t.startDateErrors(),t.endDateErrors())})},x=function(e){function t(){return b(this,t),h(this,f(t).apply(this,arguments))}var i,a,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,c.KnockoutView),i=t,(a=[{key:"initialize",value:function(e){var i=e.i18n,n=e.minDate,a=e.maxDate;m(f(t.prototype),"initialize",this).call(this),this.options={i18n:i,minDate:n,maxDate:a},function(e){var t=e.options,i=t.minDate,n=t.maxDate;y(e,"datePicker",r.DatePicker,{minDate:i,maxDate:n},{dateChanged:function(t){e.setState({date:t})}}),y(e,"startTimePicker",o.TimePicker,{},{timeChanged:function(t){var i=t.time;e.setState({startTime:i})}}),y(e,"endTimePicker",o.TimePicker,{},{timeChanged:function(t){var i=t.time;e.setState({endTime:i})}})}(this)}},{key:"setState",value:function(e){var t=e.date,i=e.startTime,a=e.endTime;return t&&this.getChild("datePicker").setState({selectedDate:t}),i&&this.getChild("startTimePicker").setState({time:i}),a&&this.getChild("endTimePicker").setState({time:a}),function(e){var t=e.options,i=t.minDate,a=t.maxDate,r=t.i18n,o=w(e),l=o.startDate,c=o.endDate,d=c<=l?[r.getString("StartTime_GreaterThanOrEqual_EndTime")]:[],u=n.default.map((0,s.validateDateRange)(i,a,l),function(e){return r.getString(e)}),p=n.default.map((0,s.validateDateRange)(i,a,c),function(e){return r.getString(e)});e.viewModel.generalErrors(d),e.viewModel.startDateErrors(u),e.viewModel.endDateErrors(p)}(this),this}},{key:"getState",value:function(){return{date:this.getChild("datePicker").getState().selectedDate,startTime:this.getChild("startTimePicker").getState().time,endTime:this.getChild("endTimePicker").getState().time}}},{key:"getSelection",value:function(){var e=this.viewModel.errors(),t=w(this);return{start:t.startDate,end:t.endDate,invalid:e.length>0}}},{key:"template",get:function(){return d.default}},{key:"ViewModel",get:function(){return C}}])&&g(i.prototype,a),l&&g(i,l),t}();t.CustomTimeRangeSelectionPanel=x},247:function(e,t){e.exports=c},248:function(e,t,i){var n=i(13);e.exports=function(e){var t,i="",a=e||{};return function(e){i=i+'<div class="datePicker"><div data-ref="datePicker"></div></div><span></span><div class="timePicker startTimePicker" data-bind="css: { error: startDateErrors.length || generalErrors.length }"><div data-ref="startTimePicker"></div></div><span>'+n.escape(null==(t=e.options.i18n.getString("DateFilter_StartEndDateSeparator"))?"":t)+'</span><div class="timePicker endTimePicker" data-bind="css: { error: endDateErrors.length || generalErrors.length }"><div data-ref="endTimePicker"></div></div><div class="errors" data-bind="foreach: errors"><span data-bind="text: $data"></span></div>'}.call(this,"view"in a?a.view:"undefined"!==typeof view?view:void 0),i}},249:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComparedDateRangePanel=void 0;var n,a=(n=i(8))&&n.__esModule?n:{default:n},r=i(237),o=i(241);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t,i){return(d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var i,n,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,o.DateRangePanelBase),i=t,(n=[{key:"initialize",value:function(e){d(u(t.prototype),"initialize",this).call(this,e),this.dateRangesAccessor=this.options.dateRangesAccessor||r.getComparedDateRanges}},{key:"setState",value:function(e){var t=e.selection,i=e.primaryRange;return t&&this.model.set({selectedKey:t.key}),this.updateDateRanges(i,t),this.showDatePickersIfCustomSelected(),this}},{key:"onPrimaryRangeChanged",value:function(e){var t=this.getState(),i=t.dateRanges,n=t.selectedKey;this.updateDateRanges(e,i[n])}},{key:"updateDateRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.options,n=i.today,r=i.i18n,o=this.dateRangesAccessor({today:n,i18n:r,primaryRange:e,comparedCustomStart:t.start,comparedCustomEnd:t.end});a.default.extend(o,a.default.pick(this.model.get("dateRanges")||{},function(e){return e.isCustom})),this.model.set({dateRanges:o,primaryRange:e})}}])&&l(i.prototype,n),s&&l(i,s),t}();t.ComparedDateRangePanel=g},250:function(e,t,i){var n=i(13);e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){var o=e.checkedSelection.comparedRange&&e.checkedSelection.comparedRange.isCustom,s=e.checkedSelection.primaryRange.isCustom,l=o||s,c=r.options.i18n;a.toggleButton=t=function(e){this&&this.block,this&&this.attributes,i=i+'<div class="toggle-switch pull-right"><a'+n.attr("class",n.classes(["toggle",e?"toggle-on":"toggle-off"],[!1,!0]),!1,!0)+' role="checkbox"'+n.attr("aria-checked",e,!0,!0)+'><button class="toggle-button"><span class="toggle-handle"></span></button>',i=e?i+'<span class="toggle-text" aria-hidden="true">'+n.escape(null==(t=c.getString("DateFilter_Toggle_On"))?"":t)+"</span>":i+'<span class="toggle-text" aria-hidden="true">'+n.escape(null==(t=c.getString("DateFilter_Toggle_Off"))?"":t)+"</span>",i+="</a></div>"},a.applyButton=t=function(){this&&this.block,this&&this.attributes,i=i+'<div class="glyphicon glyphicon-offset-left5"></div><button class="btn btn-primary apply" type="button">'+n.escape(null==(t=c.getString("DateFilter_Button_Apply"))?"":t)+"</button>"},i+='<div data-ref="primary-date-range-panel"></div>',(r.options.isComparisonEnabled||l)&&(i+='<li class="divider divider-line"></li><div class="dividerPanel">',r.options.isComparisonEnabled&&(e.comparisonToggleChecked&&a.applyButton(),a.toggleButton(e.comparisonToggleChecked)),l&&!e.comparisonToggleChecked&&a.applyButton(),i=i+"</div><div"+n.attr("class",n.classes([e.comparisonToggleChecked?"":"hidden"],[!0]),!1,!0)+'><div data-ref="compared-date-range-panel"></div></div>')}.call(this,"model"in r?r.model:"undefined"!==typeof model?model:void 0,"view"in r?r.view:"undefined"!==typeof view?view:void 0),i}},251:function(e,t,i){i(13);e.exports=function(e){var t="";return t+='<div class="date-filter dropdown"><button class="row btn btn-default dropdown-toggle" type="button" role="menu"><div data-ref="dropdown-view"></div></button><ul class="dropdown-menu"><div data-ref="date-filter-panels-container"></div></ul></div>'}},45:function(e,t){e.exports=a},57:function(e,t){e.exports=r},77:function(e,t){e.exports=o},8:function(t,i){t.exports=e}})}.apply(t,n))||(e.exports=a)},zj4z:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r,o,s,l,c,d,u,p,g,h,m,f){a.popupHelp=t=function(e,t,a){this&&this.block,this&&this.attributes,i=i+'<a class="helpbutton" type="helppopup"'+n.attr("topic",e,!0,!0)+n.attr("data-help",!0,!0,!0)+' onclick="PopupController.PopupJsClick(this)" href="javascript:void(0);"'+n.attr("aria-label",(a||"Learn more")+" "+(t||""),!0,!0)+"></a>"},a.adGroupOverrideInformation=t=function(e){this&&this.block,this&&this.attributes,i=i+'<div class="alert alert-info form-group adgroup-override-info" role="alert"><div class="alert-image"></div><div class="alert-info-inline">'+n.escape(null==(t=o.getString("Demographic_Targets_Override_Information_Line1",{target:e}))?"":t)+"<br>"+n.escape(null==(t=o.getString("Demographic_Targets_Override_Information_Line2",{target:e}))?"":t)+'<a class="HelpTopic" query="help:app54638" href="javascript:void(0);">'+n.escape(null==(t=o.getString("Learn_more_link_text"))?"":t)+"</a></div></div>"},i=i+'<div class="form-horizontal criterion-setting-container"><div class="form-group"><h5'+n.attr("class",n.classes(["col-sm-2","control-label",r?"hide":"show"],[!1,!1,!0]),!1,!0)+"><label>"+n.escape(null==(t=o.getString(m))?"":t)+"</label>",a.popupHelp(e,o.getString(m),o.getString("LearnMoreLinkText")),i=i+"</h5><div"+n.attr("class",n.classes([r?"col-sm-12":"col-sm-10"],[!0]),!1,!0)+"><div"+n.attr("class",n.classes(["level-toggle-container",u?"":"hide"],[!1,!0]),!1,!0)+'><span id="criterion-use-campaign-settings">'+n.escape(null==(t=o.getString("LevelToggleLabel"))?"":t)+'</span><span class="level-toggle"></span></div>',d&&c&&(i=i+'<div class="bid-only-note-container">'+(null==(t=o.getString("Audience_Campaign_Target_Setting_Bid_Only_Note"))?"":t)+"</div>"),s||void 0===s||"adgroup"!==f.level||a.adGroupOverrideInformation(h),i+='<div class="target-edit-container">',l||(i=i+"<div"+n.attr("class",n.classes(["edit-target-show-button-container",g&&c?"":"hide"],[!1,!0]),!1,!0)+'><span class="no-target-exist-edit-label"><u>'+n.escape(null==(t=o.getString("Audience_Campaign_No_Target_Selected_Label"))?"":t)+'</u></span><a class="edit-target-show-button" href="javascript:void(0);"><u>'+n.escape(null==(t=o.getString("Audience_Campaign_Edit_Target_Label"))?"":t)+"</u></a></div>"),i=i+"<div"+n.attr("class",n.classes(["target-selection-container",g&&!c?"":"hide"],[!1,!0]),!1,!0)+'></div><button class="btn done-editing-target-button hide">'+n.escape(null==(t=o.getString("Audience_Campaign_Done_Label"))?"":t)+"</button></div><div"+n.attr("class",n.classes(["bid-adjustment-grids-container",c?"":"hide"],[!1,!0]),!1,!0)+'><div class="current-level-bid-adjustment-grid"></div><div class="parent-level-bid-adjustment-grid hide"></div></div><div'+n.attr("class",n.classes(["bid-or-target-and-bid-selector",p?"":"hide"],[!1,!0]),!1,!0)+"></div></div></div></div>"}.call(this,"helpKey"in r?r.helpKey:"undefined"!==typeof helpKey?helpKey:void 0,"hideTitleLabel"in r?r.hideTitleLabel:"undefined"!==typeof hideTitleLabel?hideTitleLabel:void 0,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"isAudienceCampaign"in r?r.isAudienceCampaign:"undefined"!==typeof isAudienceCampaign?isAudienceCampaign:void 0,"isEditDisabled"in r?r.isEditDisabled:"undefined"!==typeof isEditDisabled?isEditDisabled:void 0,"showBidAdjustment"in r?r.showBidAdjustment:"undefined"!==typeof showBidAdjustment?showBidAdjustment:void 0,"showBidOnlyNote"in r?r.showBidOnlyNote:"undefined"!==typeof showBidOnlyNote?showBidOnlyNote:void 0,"showLevelToggle"in r?r.showLevelToggle:"undefined"!==typeof showLevelToggle?showLevelToggle:void 0,"showTargetOrBid"in r?r.showTargetOrBid:"undefined"!==typeof showTargetOrBid?showTargetOrBid:void 0,"showTargetSelection"in r?r.showTargetSelection:"undefined"!==typeof showTargetSelection?showTargetSelection:void 0,"target"in r?r.target:"undefined"!==typeof target?target:void 0,"titleKey"in r?r.titleKey:"undefined"!==typeof titleKey?titleKey:void 0,"viewContext"in r?r.viewContext:"undefined"!==typeof viewContext?viewContext:void 0),i}},zrPx:function(e,t,i){"use strict";i.r(t);var n=i("bgLp"),a=i("nN5v"),r=i("ePzV"),o=i("23d6"),s=i("Pb1Y"),l=i("2ndk"),c=i("Vwpy"),d=i("syDw"),u=i.n(d),p=i("7XbR"),g=i.n(p),h=i("UT4o"),m=i.n(h),f=i("/xyZ"),v=i.n(f),b=i("c0nf"),y=i("Sk7q"),S=i("OyVy"),w=i.n(S),C=i("SKMo"),x=i.n(C),k=i("nqE1"),A=i.n(k),T=i("ejHs"),_=i.n(T),E=function e(t){var i=this,n=t.deps;Object(a.a)(this,e),this.locationRecommendations=g.a.observable([]),this.locationImpressionGain=g.a.computed(function(){return m.a.reduce(i.locationRecommendations(),function(e,t){return e+t.EstimatedIncreaseInImpressions},0)}),this.locationTrafficGain=g.a.computed(function(){var e=[],t=m.a.reduce(i.locationRecommendations(),function(t,i){var n=m.a.chain(t).result("Campaign").result("Id").value(),a=0;return m.a.contains(e,n)||(e.push(n),a=i.QueriesPassedLocationFiltering),{QueriesFiltered:t.QueriesFiltered+i.QueriesFiltered,QueriesPassedLocationFiltering:t.QueriesPassedLocationFiltering+a}},{QueriesFiltered:0,QueriesPassedLocationFiltering:0}),a=t.QueriesFiltered,r=t.QueriesPassedLocationFiltering;return 0===r?0:n.i18n.formatPercentToFixed(a/r)})},I=function(e){function t(e){var i,n=e.i18n,r=e.scope,l=e.isExpanded;return Object(a.a)(this,t),(i=Object(o.a)(this,Object(s.a)(t).call(this,{deps:{i18n:n}}))).campaignLength=g.a.computed(function(){return m.a.chain(i.locationRecommendations()).pluck("Campaign").pluck("Id").uniq().size().value()}),i.description=g.a.computed(function(){return n.getString("Inline_Location_Recommendation_Description",{trafficGain:i.locationTrafficGain(),impressionGain:i.locationImpressionGain()})}),i.selectedItems=g.a.observableArray([]),i.isActionButtonEnabled=g.a.computed(function(){return i.selectedItems().length>0}),i.banner=g.a.computed(function(){var e="Inline_Location_Recommendation_Account_Banner";return m.a.isFinite(r.campaignId)&&(e="Inline_Location_Recommendation_Campaign_Banner"),n.getString(e,{recommendationCount:m.a.size(i.locationRecommendations()),trafficGain:i.locationTrafficGain(),impressionGain:i.locationImpressionGain(),campaignNumber:i.campaignLength()})}),i.hasRecommendation=g.a.computed(function(){return m.a.size(i.locationRecommendations())>0}),i.isExpanded=g.a.observable(l),i.clickCollapse=function(){i.isExpanded(!i.isExpanded())},i.criterions=g.a.observableArray([]),i.recommendationsOnMap=g.a.observableArray([]),i.isMapShow=g.a.computed(function(){return m.a.size(i.criterions())>0||m.a.size(i.recommendationsOnMap())>0}),i.showLocationsRecommendationsGrid=g.a.computed(function(){return i.hasRecommendation()||i.isMapShow()}),i}return Object(c.a)(t,e),t}(E),O="NewLocationTargetOpportunity",P="campaignsetting",M={inlineTemplate:w.a,locationGridAccountTemplate:x.a,locationGridCampaignTemplate:A.a};function j(e,t){var i=e.logger,n=e.constants;m.a.each(t,function(e){var t=e.OpportunityId,a=e.Campaign,r=void 0===a?{}:a;i.logMessage([n.LOGCATEGORY.TRACE],n.LOGLEVEL.INFO,"Recommendations",{type:O,typeId:216,id:t,campaignId:r.Id,isClick:!1,channel:P})})}var L=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){var t=this;this.options=e,this.deps=e.deps,this.dataSource=e.dataSource,this.isAllSelected=!1,this.i18n=this.deps.i18n,this.model=new I({i18n:this.i18n,scope:e.scope,isExpanded:!!e.isExpanded}),this.alertHelper=new this.deps.AlertHelper({i18n:this.i18n}),this.isAccountLevel=!m.a.isFinite(e.scope.campaignId);var i=this.isAccountLevel?["Campaign","Location","Impression","Dismiss"]:["Location","Impression","Dismiss"];if(this.locationRecommendationGrid=new y.a(Object(n.a)({columns:i,dataSource:{type:"memory",data:[]},hasPagination:this.isAccountLevel,selectAllByDefault:!this.isAccountLevel},e)).render(),this.locationRecommendationGrid.on("selectChanged",function(e){return t.model.selectedItems(e)}),this.locationRecommendationGrid.on("isAllSelected",function(e){t.isAllSelected=e}),this.locationRecommendationGrid.on("dismiss",function(e){return t.dismissRecommendations([e])}),this.locationRecommendationGrid.on("mouseover:recommendation",function(e){return t.mouseOverRecommendation(e)}),this.locationRecommendationGrid.on("mouseout:recommendation",function(e){return t.mouseOutRecommendation(e)}),this.displayedRecommendations=[],this.locationRecommendationGrid.on("display:recommendations",function(e){t.model.isExpanded()?j(t.deps,e):t.displayedRecommendations=e}),this.showMap=!this.isAccountLevel&&this.options.isCampaignLevelLocation||m.a.isFinite(e.scope.adgroupId),this.showMap){var a=this.deps.LocationMap;this.mapView=new a({disableInfoBoxGroupList:["included","excluded"],mapHeight:this.options.mapHeight}).render(),this.mapView.on("target:recommendation",function(e){return t.targetRecommendations([e])}),this.mapView.on("dismiss:recommendation",function(e){return t.dismissRecommendations([e])}),this.model.locationRecommendations.subscribe(function(e){(t.model.isExpanded()||t.options.showRecommendationsOnMap)&&t.updateRecommendedLocations(e)}),this.options.showRecommendationsOnMap||(this.model.isMapShow()||this.mapView.$el.hide(),this.model.isMapShow.subscribe(function(e){e?t.mapView.$el.show():t.mapView.$el.hide()}))}this.model.locationRecommendations.subscribe(function(e){t.trigger("update:recommendations",e)}),this.model.isExpanded.subscribe(function(e){var i=e?t.model.locationRecommendations():[];e?(t.trigger("expand:collapse"),m.a.isEmpty(t.displayedRecommendations)||(j(t.deps,t.displayedRecommendations),t.displayedRecommendations=[])):t.trigger("close:collapse"),t.updateRecommendedLocations(i)}),this.template=_.a,e.template&&(this.template=m.a.isString(e.template)?M[e.template]:e.template),this.on("refresh",function(){t.refreshLocation()})}},{key:"updateRecommendedLocations",value:function(e){this.refreshMap(),this.mapView&&(this.mapView.updateRecommendedLocations(e),this.model.recommendationsOnMap(e))}},{key:"refreshMap",value:function(){this.mapView&&this.mapView.rebindEventBus()}},{key:"refreshLocation",value:function(){this.options.isCampaignLevelLocation&&(this.model.selectedItems([]),this.fetchRecommendations().finally(Object(b.withUiBlock)(this.$el))),this.showMap&&this.loadLocationCriterion()}},{key:"loadLocationCriterion",value:function(){var e=this,t=this.options.scope,i=t.campaignId,n=t.adgroupId;if(!m.a.isUndefined(i)){var a=m.a.isFinite(n)?this.deps.s$AdGroupCriterion:this.deps.s$CampaignCriterion,r=m.a.isFinite(n)?"adgroup":"campaign",o=n||i;this.deps.criterionLoader.load(i,n,["LocationCriterion","RadiusCriterion","LocationIntentCriterion"],a).then(function(t){var i=m.a.chain(t).filter(function(e){return"Radius"===e.Criterion.Type||"Location"===e.Criterion.Type}).map(function(t){return e.deps.locationTargetConverter.buildLocationCriterionFromBiddableCampaignCriterion(t,r,o)}).value();e.model.criterions(i),e.mapView&&e.mapView.waitUntilMapLoaded().then(function(){e.refreshMap(),e.deps.jsDataCampaign.Intermediate.refresh("CampaignCriterion",i,{destroyAll:!0})})})}}},{key:"fetchRecommendations",value:function(){var e=this;return this.deps.recommendationRepository.getRecommendations({deps:this.deps,oppType:O,scope:this.options.scope,channel:P,top:this.options.scope.campaignId?5:500,skip:0}).then(function(t){e.model.locationRecommendations(t.value),e.locationRecommendationGrid.trigger("update:data",t.value)}).catch(function(){e.model.locationRecommendations([]),e.locationRecommendationGrid.trigger("update:data",[])})}},{key:"mouseOverRecommendation",value:function(e){var t=(e||{}).Id;this.showMap&&m.a.isFinite(t)&&this.mapView.trigger("entity:highlight",t)}},{key:"mouseOutRecommendation",value:function(e){var t=(e||{}).Id;this.showMap&&m.a.isFinite(t)&&this.mapView.trigger("entity:reset",t)}},{key:"targetRecommendations",value:function(e){var t=this,i=this.isAllSelected?this.model.locationRecommendations():e,a=m.a.chain(i).map(function(e){return m.a.pick(e,m.a.keys(t.deps.s$CampaignCriterion.properties))}).groupBy(function(e){return e.Campaign.Id}).map(function(e){return{Id:e[0]&&e[0].Campaign.Id,data:{CampaignCriterions:m.a.map(e,function(e){return Object(n.a)({Campaign:m.a.pick(e.Campaign,"Id"),SelectionStatus:"Included"},m.a.pick(e,["Criterion","CriterionType"]))})}}}).value(),r=i;return v.a.map(a,function(e){return t.deps.jsDataCampaign.Campaign.update(e.Id,{reqs:[e]},{adapter:"bulk",cacheResponse:!1,overrideResponse:!0,batch:!0})}).catch(function(e){var t=m.a.filter(e.entity.CampaignCriterions,function(t){return!!m.a.find(e.errors,function(e){return e["Client Id"]===t["Client Id"]&&"1043"!==e.ErrorNumber})});r=m.a.reject(i,function(e){return!!m.a.find(t,function(t){var i=t.Criterion;return m.a.isEqual(i,e.Criterion)})})}).finally(function(){m.a.size(r)>0?t.deps.recommendationRepository.applyRecommendations({deps:t.deps,recommendations:r,recommendationType:O,scope:t.options.scope,isAll:t.isAllSelected&&m.a.size(i)>1&&m.a.size(r)===m.a.size(i),channel:P}).then(function(){t.alertHelper.showSuccess(t.i18n.getString("Apply_Location_recommendations_Success",{success:m.a.size(r),total:m.a.size(i)}))}).finally(function(){t.trigger("add:locations",r),t.refreshLocation(),t.trigger("operate:recommendations")}).finally(Object(b.withUiBlock)(t.$el)):0===m.a.size(r)&&m.a.size(i)>0&&t.alertHelper.showError(t.i18n.getString("Apply_Location_recommendations_Failed"))})}},{key:"dismissRecommendations",value:function(e){var t=this;return this.deps.recommendationRepository.dismissRecommendations({deps:this.deps,recommendations:e,recommendationType:O,scope:this.options.scope,isAll:this.isAllSelected&&m.a.size(e)>1,channel:P}).then(function(i){var a=Object(n.a)({failed:0,success:0},m.a.countBy(i.Results,function(e){return e.ErrorCode>0?"failed":"success"}));t.alertHelper.showSuccess(t.i18n.getString("Dismiss_Location_recommendations_Success",{success:a.success,total:m.a.size(e)})),t.deps.CampaignCacheManager.invalidate("Campaign"),t.refreshLocation(),t.trigger("operate:recommendations")}).catch(function(){t.alertHelper.showError(t.i18n.getString("Dismiss_Location_recommendations_Failed"))}).finally(Object(b.withUiBlock)(this.$el))}},{key:"apply",value:function(){var e=this.model.selectedItems();m.a.isEmpty(e)||this.targetRecommendations(this.model.selectedItems())}},{key:"cancel",value:function(e){this.trigger("cancel",e)}},{key:"dismiss",value:function(){var e=this.model.selectedItems();m.a.isEmpty(e)||this.dismissRecommendations(this.model.selectedItems())}},{key:"remove",value:function(){this.trigger("remove"),this.mapView&&this.mapView.remove(),this.locationRecommendationGrid&&this.locationRecommendationGrid.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}},{key:"expandCollapse",value:function(){var e="expandRecommendLocationsByDefault";if(this.deps.sessionStorage.get(e)){this.deps.sessionStorage.invalidate(e);var t=this.$(".alert-recommendation .alert-info-inline");t.length>0&&t.click()}}},{key:"render",value:function(){var e=this;return this.$el.html(this.template({i18n:this.i18n,showMap:this.showMap})),g.a.applyBindings(this.model,this.el),this.$(".location-recommendation-grid-container").append(this.locationRecommendationGrid.el),this.showMap&&this.$(".location-recommendation-map-container").append(this.mapView.el),m.a.delay(function(){return e.refreshLocation()},100),m.a.delay(function(){return e.expandCollapse()},200),this}},{key:"events",get:function(){return{"click .apply":"apply","click .cancel":"cancel","click .dismiss":"dismiss"}}}]),t}(u.a.View),D=i("AXVV"),R=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.deps=e.deps,this.isRecommendationOperated=!1,this.locationAdded=!1,this.recommendations=[]}},{key:"render",value:function(){var e=this,t=Object(D.decorate)(L,{title:this.deps.i18n.getString("Inline_Location_Recommendation_Dialog_Title"),position:"center",width:1050,maxWidth:1050}),i=Object(n.a)({template:"inlineTemplate",isCampaignLevelLocation:!0,showRecommendationsOnMap:!0,isExpanded:!0},this.options);return this.view=new t(i).render(),this.view.on("cancel",function(t){return e.remove(t)}),this.view.on("add:locations",function(){e.locationAdded=!0}),this.view.on("operate:recommendations",function(){e.isRecommendationOperated=!0}),this.view.on("remove",function(){e.locationAdded?e.trigger("refresh:recommendations"):m.a.isEmpty(e.recommendations)&&e.isRecommendationOperated&&e.trigger("refresh:recommendations")}),this.view.on("update:recommendations",function(t){e.recommendations=t,0===m.a.size(t)&&e.remove()}),this}},{key:"remove",value:function(){this.view&&this.view.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}}]),t}(u.a.View),N=i("tYu0"),V=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"initialize",value:function(e){this.options=e,this.deps=e.deps,this.isRecommendationOperated=!1,this.locationAdded=!1,this.recommendations=[]}},{key:"render",value:function(){var e=this,t=Object(N.panelDecorator)(L,{i18n:this.deps.i18n,panelReadyAriaLabel:this.deps.i18n.getString("Inline location recommendation side panel opened")}),i=Object(n.a)({title:this.deps.i18n.getString("Inline_Location_Recommendation_Dialog_Title"),eventsToActions:[{event:"cancel",action:this.remove.bind(this)},{event:"add:locations",action:function(){e.locationAdded=!0}},{event:"operate:recommendations",action:function(){e.isRecommendationOperated=!0}},{event:"remove",action:function(){e.locationAdded?e.trigger("refresh:recommendations"):m.a.isEmpty(e.recommendations)&&e.isRecommendationOperated&&e.trigger("refresh:recommendations")}},{event:"update:recommendations",action:function(t){e.recommendations=t,0===m.a.size(t)&&e.remove()}}],onClose:this.remove.bind(this),template:"inlineTemplate",isCampaignLevelLocation:!0,showRecommendationsOnMap:!0,isExpanded:!0},this.options);return this.view=new t(i).render(),this}},{key:"remove",value:function(){this.view&&this.view.remove(),Object(l.a)(Object(s.a)(t.prototype),"remove",this).call(this)}}]),t}(u.a.View);i.d(t,"InlineLocationRecommendation",function(){return L}),i.d(t,"InlineLocationRecommendationDialog",function(){return R}),i.d(t,"BaseLocationRecommendationModel",function(){return E}),i.d(t,"InlineLocationRecommendationPanel",function(){return V})},zshA:function(e,t,i){var n=i("4y7W");e.exports=function(e){var t,i="",a={},r=e||{};return function(e,r){a.koError=t=function(e,t){this&&this.block,this&&this.attributes,i=i+"<div"+(n.attr("data-bind","if: "+e+'().length > 0, attr: {"aria-hidden": '+e+"().length == 0}",!0,!0)+n.attr("id",t||e,!0,!0))+' role="alert"><div class="error"'+n.attr("data-bind","html: "+e,!0,!0)+' role="alert"></div></div>'},i=i+'\x3c!-- ko if: editMode()--\x3e<input class="form-control full-width"'+n.attr("placeholder",r,!0,!0)+' type="text" name="TrackingTemplate" data-bind="value: trackingTemplate, attr: {maxlength: maxLength, &quot;aria-invalid&quot;: errorMessages().length &gt; 0}"'+n.attr("aria-label",e.get("TrackingTemplate_Label"),!0,!0)+' aria-describedby="TrackingTemplateErrors"><div class="charactersRemaining" data-bind="visible:templateExampleEnabled"><span>'+n.escape(null==(t=e.get("TrackingTemplate_Example"))?"":t)+'</span></div><div class="font-error"><ul id="TrackingTemplateErrors" data-bind="foreach: errorMessages, &quot;aria-hidden&quot;: errorMessages().length == 0" role="alert"><li><span class="is-error" data-bind="html: $data"></span></li></ul></div>',a.koError("trackingTemplateErrors"),i=i+'\x3c!-- /ko--\x3e<span class="control-label" data-bind="visible: !editMode() &amp;&amp; trackingTemplate(), text: trackingTemplate"></span><div data-bind="visible: showNone()"><span class="control-label">'+n.escape(null==(t=e.get("UrlOptions_None"))?"":t)+"</span></div>"}.call(this,"i18n"in r?r.i18n:"undefined"!==typeof i18n?i18n:void 0,"trackingTemplatePlaceholdertype"in r?r.trackingTemplatePlaceholdertype:"undefined"!==typeof trackingTemplatePlaceholdertype?trackingTemplatePlaceholdertype:void 0),i}}}]);
